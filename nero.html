<!DOCTYPE html>
<html data-init="no-js">
<head>
<meta charset="UTF-8" />
<title>nero</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!--

SugarCube (v2.36.1): A free (gratis and libre) story format.

Copyright © 2013–2021 Thomas Michael Edwards <thomasmedwards@gmail.com>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init", "loading");
/*! @source http://purl.eligrey.com/github/classList.js/blob/1.2.20171210/classList.js */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],s=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},c=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new c("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new c("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(t,e)},l=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,s=n.length;s>i;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=l[n]=[],h=function(){return new l(this)};if(c[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return~a(this,t+"")},u.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do t=e[n]+"",~a(this,t)||(this.push(t),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do for(t=n[i]+"",e=a(this,t);~e;)this.splice(e,1),r=!0,e=a(this,t);while(++i<s);r&&this._updateClassName()},u.toggle=function(t,e){var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},u.replace=function(t,e){var n=a(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},u.toString=function(){return this.join(" ")},s.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,f)}catch(p){void 0!==p.number&&-2146823252!==p.number||(f.enumerable=!1,s.defineProperty(i,e,f))}}else s[n].__defineGetter__&&i.__defineGetter__(e,h)}}(self),function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;i>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),i=n.indexOf(t+"");~i&&(n=n.slice(i),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}());
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2020 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.14/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},E=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},j="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return E(t)}if(O(t)){return false}var r=T.call(t);return r===j||r===I};var M;var U=RegExp.prototype.exec,$=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},F="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?$(t):T.call(t)===F};var N;var C=String.prototype.valueOf,k=function tryStringObject(t){try{C.call(t);return true}catch(r){return false}},A="[object String]";N=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?k(t):T.call(t)===A};var R=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var P=function(t){var r;if(R){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var Z=function Empty(){};P(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){Z.prototype=r.prototype;a.prototype=new Z;Z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var H=d.bind(n.toString);var W=d.bind(s);var B=g.bind(s);if(typeof document==="object"&&document&&document.documentElement){try{W(document.documentElement.childNodes)}catch(X){var L=W;var q=B;W=function arraySliceIE(t){var r=[];var e=t.length;while(e-- >0){r[e]=t[e]}return q(r,L(arguments,1))};B=function arraySliceApplyIE(t,r){return q(W(t),r)}}}var K=d.bind(f.slice);var Q=d.bind(f.split);var V=d.bind(f.indexOf);var _=d.bind(v);var tt=d.bind(n.propertyIsEnumerable);var rt=d.bind(r.sort);var et=t.isArray||function isArray(t){return H(t)==="[object Array]"};var nt=[].unshift(0)!==1;P(r,{unshift:function(){h.apply(this,arguments);return this.length}},nt);P(t,{isArray:et});var it=e("a");var at=it[0]!=="a"||!(0 in it);var ot=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};P(r,{forEach:function forEach(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=-1;var i=z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!ot(r.forEach));P(r,{map:function map(r){var e=z.ToObject(this);var n=at&&N(this)?Q(this,""):e;var i=z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!ot(r.map));P(r,{filter:function filter(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){_(i,a)}}}return i}},!ot(r.filter));P(r,{every:function every(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!ot(r.every));P(r,{some:function some(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!ot(r.some));var ft=false;if(r.reduce){ft=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduce:function reduce(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!ft);var ut=false;if(r.reduceRight){ut=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduceRight:function reduceRight(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!ut);var lt=r.indexOf&&[0,1].indexOf(1,2)!==-1;P(r,{indexOf:function indexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},lt);var st=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;P(r,{lastIndexOf:function lastIndexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},st);var ct=function(){var t=[1,2];var r=t.splice();return t.length===2&&et(r)&&r.length===0}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ct);var vt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=W(arguments);if(e.length<2){_(e,this.length-t)}else{e[1]=z.ToInteger(r)}}return c.apply(this,e)}},!vt);var ht=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var pt=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();P(r,{splice:function splice(t,r){var e=z.ToObject(this);var n=[];var i=z.ToUint32(e.length);var a=z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=arguments.length===0?0:arguments.length===1?i-f:b(w(z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=W(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!ht||!pt);var yt=r.join;var dt;try{dt=Array.prototype.join.call("123",",")!=="1,2,3"}catch(X){dt=true}if(dt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(N(this)?Q(this,""):this,r)}},dt)}var gt=[1,2].join(undefined)!=="1,2";if(gt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(this,r)}},gt)}var wt=function push(t){var r=z.ToObject(this);var e=z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var bt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:function push(t){if(et(this)){return v.apply(this,arguments)}return wt.apply(this,arguments)}},bt);var Tt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:wt},Tt);P(r,{slice:function(t,r){var e=N(this)?Q(this,""):this;return B(e,arguments)}},at);var mt=function(){try{[1,2].sort(null)}catch(t){try{[1,2].sort({})}catch(r){return false}}return true}();var Dt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var St=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();P(r,{sort:function sort(t){if(typeof t==="undefined"){return rt(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return rt(this,t)}},mt||!St||!Dt);var xt=!tt({toString:null},"toString");var Ot=tt(function(){},"prototype");var Et=!G("x","0");var jt=function(t){var r=t.constructor;return r&&r.prototype===t};var It={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true,$width:true,$height:true,$top:true,$localStorage:true};var Mt=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!It["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){jt(window[t])}}catch(r){return true}}return false}();var Ut=function(t){if(typeof window==="undefined"||!Mt){return jt(t)}try{return jt(t)}catch(r){return false}};var $t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ft=$t.length;var Nt=function isArguments(t){return H(t)==="[object Arguments]"};var Ct=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!et(t)&&D(t.callee)};var kt=Nt(arguments)?Nt:Ct;P(e,{keys:function keys(t){var r=D(t);var e=kt(t);var n=t!==null&&typeof t==="object";var i=n&&N(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=Ot&&r;if(i&&Et||e){for(var u=0;u<t.length;++u){_(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){_(a,o(l))}}}if(xt){var s=Ut(t);for(var c=0;c<Ft;c++){var v=$t[c];if(!(s&&v==="constructor")&&G(t,v)){_(a,v)}}}return a}});var At=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var Rt=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Pt=e.keys;P(e,{keys:function keys(t){if(kt(t)){return Pt(W(t))}else{return Pt(t)}}},!At||Rt);var Jt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var Yt=new Date(-0x55d318d56a724);var zt=new Date(14496624e5);var Zt=Yt.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Gt;var Ht;var Wt=Yt.getTimezoneOffset();if(Wt<-720){Gt=Yt.toDateString()!=="Tue Jan 02 -45875";Ht=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}else{Gt=Yt.toDateString()!=="Mon Jan 01 -45875";Ht=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}var Bt=d.bind(Date.prototype.getFullYear);var Xt=d.bind(Date.prototype.getMonth);var Lt=d.bind(Date.prototype.getDate);var qt=d.bind(Date.prototype.getUTCFullYear);var Kt=d.bind(Date.prototype.getUTCMonth);var Qt=d.bind(Date.prototype.getUTCDate);var Vt=d.bind(Date.prototype.getUTCDay);var _t=d.bind(Date.prototype.getUTCHours);var tr=d.bind(Date.prototype.getUTCMinutes);var rr=d.bind(Date.prototype.getUTCSeconds);var er=d.bind(Date.prototype.getUTCMilliseconds);var nr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var ir=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ar=function daysInMonth(t,r){return Lt(new Date(r,t,0))};P(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Xt(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);var e=Lt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);if(t<0&&Kt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);var e=Qt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e}},Jt);P(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Vt(this);var r=Qt(this);var e=Kt(this);var n=qt(this);var i=_t(this);var a=tr(this);var o=rr(this);return nr[t]+", "+(r<10?"0"+r:r)+" "+ir[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Jt||Zt);P(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n}},Jt||Gt);if(Jt||Ht){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(R){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var or=-621987552e5;var fr="-000001";var ur=Date.prototype.toISOString&&new Date(or).toISOString().indexOf(fr)===-1;var lr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var sr=d.bind(Date.prototype.getTime);P(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(sr(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=qt(this);var r=Kt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,Qt(this),_t(this),tr(this),rr(this)];t=(t<0?"-":t>9999?"+":"")+K("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=K("00"+e[n],-2)}return t+"-"+W(e,0,2).join("-")+"T"+W(e,2).join(":")+"."+K("000"+er(this),-3)+"Z"}},ur||lr);var cr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(or).toJSON().indexOf(fr)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!cr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var vr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var hr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var pr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(pr||hr||!vr){var yr=Math.pow(2,31)-1;var dr=Y(new Date(1970,0,1,0,0,0,yr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(dr&&s>=7&&l>yr){var p=Math.floor(l/yr)*yr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){P(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(dr&&n>yr){var i=Math.floor(n/yr)*yr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}P(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;P(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};P(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var gr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(1000000000000000128).toFixed(0)!=="1000000000000000128");var wr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<wr.size){n+=t*wr.data[e];wr.data[e]=n%wr.base;n=Math.floor(n/wr.base)}},divide:function divide(t){var r=wr.size;var e=0;while(--r>=0){e+=wr.data[r];wr.data[r]=Math.floor(e/t);e=e%t*wr.base}},numToString:function numToString(){var t=wr.size;var r="";while(--t>=0){if(r!==""||t===0||wr.data[t]!==0){var e=o(wr.data[t]);if(r===""){r=e}else{r+=K("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var br=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=wr.log(e*wr.pow(2,69,1))-69;f=a<0?e*wr.pow(2,-a,1):e/wr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){wr.multiply(0,f);l=r;while(l>=7){wr.multiply(1e7,0);l-=7}wr.multiply(wr.pow(10,l,1),0);l=a-1;while(l>=23){wr.divide(1<<23);l-=23}wr.divide(1<<l);wr.multiply(1,1);wr.divide(2);i=wr.numToString()}else{wr.multiply(0,f);wr.multiply(1<<-a,0);i=wr.numToString()+K("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+K("0.0000000000000000000",0,r-s+2)+i}else{i=n+K(i,0,s-r)+"."+K(i,s-r)}}else{i=n+i}return i};P(l,{toFixed:br},gr);var Tr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var mr=l.toPrecision;P(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?mr.call(this):mr.call(this,t)}},Tr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return Q(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){_(a,K(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,W(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){_(a,"")}}else{_(a,K(i,f))}return a.length>p?W(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return Q(this,t,r)}}var Dr=f.replace;var Sr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){_(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!Sr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Dr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;_(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Dr.call(this,t,i)}}}var xr=f.substr;var Or="".substr&&"0b".substr(-1)!=="b";P(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return xr.call(this,e,r)}},Or);var Er="\t\n\x0B\f\r \xa0\u1680\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var jr="\u200b";var Ir="["+Er+"]";var Mr=new RegExp("^"+Ir+Ir+"*");var Ur=new RegExp(Ir+Ir+"*$");var $r=f.trim&&(Er.trim()||!jr.trim());P(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Mr,"").replace(Ur,"")}},$r);var Fr=d.bind(String.prototype.trim);var Nr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;P(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=V(K(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Nr);var Cr=f.lastIndexOf;P(f,{lastIndexOf:function lastIndexOf(t){return Cr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(Er+"08")!==8||parseInt(Er+"0x16")!==22){parseInt=function(t){var r=/^[-+]?0[xX]/;return function parseInt(e,n){if(typeof e==="symbol"){""+e}var i=Fr(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Fr(String(r));var n=t(e);return n===0&&K(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var kr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=kr}if(R){var Ar=function(t,r){if(tt(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};Ar(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}Ar(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Rr=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Rr}});
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.4/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){return Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var L=Math.exp;var F=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(F(1+t)/(1+t-1))};var Q=function isArguments(e){return g(e)==="[object Arguments]"};var ee=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var te=Q(arguments)?Q:ee;var re={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var ne=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var oe=typeof $==="function"&&typeof $["for"]==="function"&&re.symbol($());var ie=re.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){ie="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ae=S.Reflect;var ue=String;var fe=typeof document==="undefined"||!document?null:document.all;var se=fe==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==fe};var ce={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!ce.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(se(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===fe},ToObject:function(e,t){return Object(ce.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return ce.IsCallable(e)},ToInt32:function(e){return ce.ToNumber(e)>>0},ToUint32:function(e){return ce.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=ce.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=ce.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return ce.TypeIsObject(e)&&(typeof e[ie]!=="undefined"||te(e))},GetIterator:function(e){if(te(e)){return new q(e,"value")}var t=ce.GetMethod(e,ie);if(!ce.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=ce.Call(t,e);if(!ce.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=ce.ToObject(e)[t];if(se(r)){return void 0}if(!ce.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=ce.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=ce.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!ce.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ce.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=ce.IteratorNext(e);var r=ce.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ae.construct){return ae.construct(e,t,o)}var i=o.prototype;if(!ce.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=ce.Call(e,a,t);return ce.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!ce.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(se(n)){return t}if(!ce.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=ce.ToString(e);var i="<"+t;if(r!==""){var a=ce.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!ce.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return re.regex(e)},ToString:function ToString(e){return ue(e)}};if(s&&oe){var le=function defineWellKnownSymbol(e){if(re.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!re.symbol($.search)){var pe=le("search");var ve=String.prototype.search;h(RegExp.prototype,pe,function search(e){return ce.Call(ve,e,[this])});var ye=function search(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,pe);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(ve,t,[ce.ToString(e)])};ne(String.prototype,"search",ye)}if(!re.symbol($.replace)){var he=le("replace");var be=String.prototype.replace;h(RegExp.prototype,he,function replace(e,t){return ce.Call(be,e,[this,t])});var ge=function replace(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,he);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(be,r,[ce.ToString(e),t])};ne(String.prototype,"replace",ge)}if(!re.symbol($.split)){var de=le("split");var me=String.prototype.split;h(RegExp.prototype,de,function split(e,t){return ce.Call(me,e,[this,t])});var Oe=function split(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,de);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(me,r,[ce.ToString(e),t])};ne(String.prototype,"split",Oe)}var we=re.symbol($.match);var je=we&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!we||je){var Se=le("match");var Te=String.prototype.match;h(RegExp.prototype,Se,function match(e){return ce.Call(Te,e,[this])});var Ie=function match(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,Se);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(Te,t,[ce.ToString(e)])};ne(String.prototype,"match",Ie)}}var Ee=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Pe=function(){return this};var Ce=function(e){if(s&&!z(e,J)){m.getter(e,J,Pe)}};var Me=function(e,t){var r=t||function iterator(){return this};h(e,ie,r);if(!e[ie]&&re.symbol(ie)){e[ie]=r}};var xe=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Ne=function createDataPropertyOrThrow(e,t,r){xe(e,t,r);if(!ce.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ae=function(e,t,r,n){if(!ce.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!ce.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Re=String.fromCodePoint;ne(String,"fromCodePoint",function fromCodePoint(e){return ce.Call(Re,this,arguments)})}var _e={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!ce.SameValue(r,ce.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=ce.ToObject(e,"bad callSite");var r=ce.ToObject(t.raw,"bad raw value");var n=r.length;var o=ce.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=ce.ToString(a);s=ce.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=ce.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){ne(String,"raw",_e.raw)}b(String,_e);var ke=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Le=Infinity;var Fe={repeat:function repeat(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);if(r<0||r>=Le){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return ke(t,r)},startsWith:function startsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=ce.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(ce.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=ce.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:ce.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(ce.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=ce.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){ne(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var De=i(function(){return"/a/".startsWith(/a/)});var ze=a(function(){return"abc".startsWith("a",Infinity)===false});if(!De||!ze){ne(String.prototype,"startsWith",Fe.startsWith);ne(String.prototype,"endsWith",Fe.endsWith)}}if(oe){var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!qe){ne(String.prototype,"startsWith",Fe.startsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!We){ne(String.prototype,"endsWith",Fe.endsWith)}var Ge=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!Ge){ne(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var He=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Ve=new RegExp("(^["+He+"]+)|(["+He+"]+$)","g");var Be=function trim(){return ce.ToString(ce.RequireObjectCoercible(this)).replace(Ve,"")};var Ue=["\x85","\u200b","\ufffe"].join("");var $e=new RegExp("["+Ue+"]","g");var Je=/^[-+]0x[0-9a-f]+$/i;var Xe=Ue.trim().length!==Ue.length;h(String.prototype,"trim",Be,Xe);var Ke=function(e){return{value:e,done:arguments.length===0}};var Ze=function(e){ce.RequireObjectCoercible(e);this._s=ce.ToString(e);this._i=0};Ze.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ke()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ke(e.substr(t,o))};Me(Ze.prototype);Me(String.prototype,function(){return new Ze(this)});var Ye={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!ce.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(te(e)||ce.GetMethod(e,ie))!=="undefined";var u,f,s;if(a){f=ce.IsConstructor(r)?Object(new r):[];var c=ce.GetIterator(e);var l,p;s=0;while(true){l=ce.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){ce.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=ce.ToObject(e);u=ce.ToLength(y.length);f=ce.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Ne(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!ce.IsCallable(t)?new Array(e):ce.Construct(t,[e]);for(var o=0;o<e;++o){Ne(n,o,arguments[o])}n.length=e;return n}};b(Array,Ye);Ce(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=ce.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ke(o)}}this.array=void 0;return Ke()}});Me(q.prototype);var Qe=Array.of===Ye.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Qe){ne(Array,"of",Ye.of)}var et={copyWithin:function copyWithin(e,t){var r=ce.ToObject(this);var n=ce.ToLength(r.length);var o=ce.ToInteger(e);var i=ce.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:ce.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=ce.ToObject(this);var o=ce.ToLength(n.length);t=ce.ToInteger(typeof t==="undefined"?0:t);r=ce.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!ce.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!ce.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ie]){b(Array.prototype,{values:Array.prototype[ie]});if(re.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var tt=Array.prototype.values;ne(Array.prototype,"values",function values(){return ce.Call(tt,this,arguments)});h(Array.prototype,ie,Array.prototype.values,true)}b(Array.prototype,et);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Me(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Me(Object.getPrototypeOf([].values()))}var rt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var nt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!rt||!nt){ne(Array,"from",Ye.from)}var ot=function(){return a(function(){return Array.from([0],void 0)})}();if(!ot){var it=Array.from;ne(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return ce.Call(it,this,arguments)}else{return t(it,this,e)}})}var at=-(Math.pow(2,32)-1);var ut=function(e,r){var n={length:at};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!ut(Array.prototype.forEach)){var ft=Array.prototype.forEach;ne(Array.prototype,"forEach",function forEach(e){return ce.Call(ft,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.map)){var st=Array.prototype.map;ne(Array.prototype,"map",function map(e){return ce.Call(st,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.filter)){var ct=Array.prototype.filter;ne(Array.prototype,"filter",function filter(e){return ce.Call(ct,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.some)){var lt=Array.prototype.some;ne(Array.prototype,"some",function some(e){return ce.Call(lt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.every)){var pt=Array.prototype.every;ne(Array.prototype,"every",function every(e){return ce.Call(pt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduce)){var vt=Array.prototype.reduce;ne(Array.prototype,"reduce",function reduce(e){return ce.Call(vt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduceRight,true)){var yt=Array.prototype.reduceRight;ne(Array.prototype,"reduceRight",function reduceRight(e){return ce.Call(yt,this.length>=0?this:[],arguments)},true)}var ht=Number("0o10")!==8;var bt=Number("0b10")!==2;var gt=y(Ue,function(e){return Number(e+0+e)===0});if(ht||bt||gt){var dt=Number;var mt=/^0b[01]+$/i;var Ot=/^0o[0-7]+$/i;var wt=mt.test.bind(mt);var jt=Ot.test.bind(Ot);var St=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(re.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(re.primitive(t)){return t}}throw new TypeError("No default value")};var Tt=$e.test.bind($e);var It=Je.test.bind(Je);var Et=function(){var e=function Number(t){var r;if(arguments.length>0){r=re.primitive(t)?t:St(t,"number")}else{r=0}if(typeof r==="string"){r=ce.Call(Be,r);if(wt(r)){r=parseInt(C(r,2),2)}else if(jt(r)){r=parseInt(C(r,2),8)}else if(Tt(r)||It(r)){r=NaN}}var n=this;var o=a(function(){dt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new dt(r)}return dt(r)};return e}();Ee(dt,Et,{});b(Et,{NaN:dt.NaN,MAX_VALUE:dt.MAX_VALUE,MIN_VALUE:dt.MIN_VALUE,NEGATIVE_INFINITY:dt.NEGATIVE_INFINITY,POSITIVE_INFINITY:dt.POSITIVE_INFINITY});Number=Et;m.redefine(S,"Number",Et)}var Pt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Pt,MIN_SAFE_INTEGER:-Pt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&ce.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){ne(Array.prototype,"find",et.find)}if([,1].findIndex(function(){return true})!==0){ne(Array.prototype,"findIndex",et.findIndex)}var Ct=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Mt=function ensureEnumerable(e,t){if(s&&Ct(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var xt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var Nt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var At=function(e,t){var r=n(Object(t));var o;if(ce.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Ct(t))}return p(P(r,o||[]),Nt(t),e)};var Rt={assign:function(e,t){var r=ce.ToObject(e,"Cannot convert undefined or null to object");return p(ce.Call(xt,1,arguments),At,r)},is:function is(e,t){return ce.SameValue(e,t)}};var _t=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(_t){ne(Object,"assign",Rt.assign)}b(Object,Rt);if(s){var kt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!ce.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||ce.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,kt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Lt=!i(function(){return Object.keys("foo")});if(!Lt){var Ft=Object.keys;ne(Object,"keys",function keys(e){return Ft(ce.ToObject(e))});n=Object.keys}var Dt=i(function(){return Object.keys(/a/g)});if(Dt){var zt=Object.keys;ne(Object,"keys",function keys(e){if(re.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return zt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var qt=!i(function(){return Object.getOwnPropertyNames("foo")});if(!qt){var Wt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Gt=Object.getOwnPropertyNames;ne(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=ce.ToObject(e);if(g(t)==="[object Window]"){try{return Gt(t)}catch(r){return P([],Wt)}}return Gt(t)})}}if(Object.getOwnPropertyDescriptor){var Ht=!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!Ht){var Vt=Object.getOwnPropertyDescriptor;ne(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Vt(ce.ToObject(e),t)})}}if(Object.seal){var Bt=!i(function(){return Object.seal("foo")});if(!Bt){var Ut=Object.seal;ne(Object,"seal",function seal(e){if(!ce.TypeIsObject(e)){return e}return Ut(e)})}}if(Object.isSealed){var $t=!i(function(){return Object.isSealed("foo")});if(!$t){var Jt=Object.isSealed;ne(Object,"isSealed",function isSealed(e){if(!ce.TypeIsObject(e)){return true}return Jt(e)})}}if(Object.freeze){var Xt=!i(function(){return Object.freeze("foo")});if(!Xt){var Kt=Object.freeze;ne(Object,"freeze",function freeze(e){if(!ce.TypeIsObject(e)){return e}return Kt(e)})}}if(Object.isFrozen){var Zt=!i(function(){return Object.isFrozen("foo")});if(!Zt){var Yt=Object.isFrozen;ne(Object,"isFrozen",function isFrozen(e){if(!ce.TypeIsObject(e)){return true}return Yt(e)})}}if(Object.preventExtensions){var Qt=!i(function(){return Object.preventExtensions("foo")});if(!Qt){var er=Object.preventExtensions;ne(Object,"preventExtensions",function preventExtensions(e){if(!ce.TypeIsObject(e)){return e}return er(e)})}}if(Object.isExtensible){var tr=!i(function(){return Object.isExtensible("foo")});if(!tr){var rr=Object.isExtensible;ne(Object,"isExtensible",function isExtensible(e){if(!ce.TypeIsObject(e)){return false}return rr(e)})}}if(Object.getPrototypeOf){var nr=!i(function(){return Object.getPrototypeOf("foo")});if(!nr){var or=Object.getPrototypeOf;ne(Object,"getPrototypeOf",function getPrototypeOf(e){return or(ce.ToObject(e))})}}var ir=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ce.IsCallable(e.get)}();if(s&&!ir){var ar=function flags(){if(!ce.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ar)}var ur=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var fr=oe&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var sr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var cr=sr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!sr||!cr){var lr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=ce.RequireObjectCoercible(this);if(re.regex(e)){return t(lr,e)}var r=ue(e.source);var n=ue(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,lr)}if(s&&(!ur||fr)){var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var vr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var yr=function(){return this.source};var hr=ce.IsCallable(vr.get)?vr.get:yr;var br=RegExp;var gr=function(){return function RegExp(e,t){var r=ce.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(re.regex(e)){o=ce.Call(hr,e);i=typeof t==="undefined"?ce.Call(pr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new br(e,t)}}();Ee(br,gr,{$input:true});RegExp=gr;m.redefine(S,"RegExp",gr)}if(s){var dr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(dr),function(e){if(e in RegExp&&!(dr[e]in RegExp)){m.getter(RegExp,dr[e],function get(){return RegExp[e]})}})}Ce(RegExp);var mr=1/Number.EPSILON;var Or=function roundTiesToEven(e){return e+mr-mr};var wr=Math.pow(2,-23);var jr=Math.pow(2,127)*(2-wr);var Sr=Math.pow(2,-126);var Tr=Math.E;var Ir=Math.LOG2E;var Er=Math.LOG10E;var Pr=Number.prototype.clz;delete Number.prototype.clz;var Cr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}var r=1/(t*t);if(t<2){return Y(t-1+D(1-r)*t)}var n=t/2;return Y(n+D(1-r)*n-1)+1/Ir},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}var r=k(t);var n=r*r;var o=Z(t);if(r<1){return o*Y(r+n/(D(n+1)+1))}return o*(Y(r/2+D(1+1/n)*r/2-1)+1/Ir)},atanh:function atanh(e){var t=Number(e);if(t===0){return t}if(t===-1){return-Infinity}if(t===1){return Infinity}if(X(t)||t<-1||t>1){return NaN}var r=k(t);return Z(t)*Y(2*r/(1-r))/2},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=L(F(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=ce.ToUint32(t);if(r===0){return 32}return Pr?ce.Call(Pr,r):31-_(F(r+.5)*Ir)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}var r=L(k(t)-1);return(r+1/(r*Tr*Tr))*(Tr/2)},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return L(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return F(e)*Ir},log10:function log10(e){return F(e)*Er},log1p:Y,sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}var r=k(t);if(r<1){var n=Math.expm1(r);return Z(t)*n*(1+1/(n+1))/2}var o=L(r-1);return Z(t)*(o-1/(o*Tr*Tr))*(Tr/2)},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(L(t)+L(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=ce.ToUint32(e);var n=ce.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<Sr){return r*Or(n/Sr/wr)*Sr*wr}var o=(1+wr/Number.EPSILON)*n;var i=o-(o-n);if(i>jr||X(i)){return r*Infinity}return r*i}};var Mr=function withinULPDistance(e,t,r){return k(1-e/t)/Number.EPSILON<(r||8)};b(Math,Cr);h(Math,"sinh",Cr.sinh,Math.sinh(710)===Infinity);h(Math,"cosh",Cr.cosh,Math.cosh(710)===Infinity);h(Math,"log1p",Cr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Cr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"asinh",Cr.asinh,Math.asinh(1e300)===Infinity);h(Math,"atanh",Cr.atanh,Math.atanh(1e-300)===0);h(Math,"tanh",Cr.tanh,Math.tanh(-2e-17)!==-2e-17);
h(Math,"acosh",Cr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"acosh",Cr.acosh,!Mr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON)));h(Math,"cbrt",Cr.cbrt,!Mr(Math.cbrt(1e-300),1e-100));h(Math,"sinh",Cr.sinh,Math.sinh(-2e-17)!==-2e-17);var xr=Math.expm1(10);h(Math,"expm1",Cr.expm1,xr>22025.465794806718||xr<22025.465794806718);var Nr=Math.round;var Ar=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Rr=mr+1;var _r=2*mr-1;var kr=[Rr,_r].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Ar||!kr);m.preserveToString(Math.round,Nr);var Lr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Cr.imul;m.preserveToString(Math.imul,Lr)}if(Math.imul.length!==2){ne(Math,"imul",function imul(e,t){return ce.Call(Lr,Math,arguments)})}var Fr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}ce.IsPromise=function(e){if(!ce.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!ce.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(ce.IsCallable(t.resolve)&&ce.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&ce.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=ce.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(ce.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!ce.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return m(e,o)}if(!ce.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!ce.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ae(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=ce.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=ce.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(ce.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!ce.IsPromise(n)){throw new TypeError("not a promise")}var o=ce.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=ce.IsCallable(e)?e:a;var d=ce.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Fr==="function"){b(S,{Promise:Fr});var Dr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var zr=!i(function(){return S.Promise.reject(42).then(null,5).then(null,W)});var qr=i(function(){return S.Promise.call(3,W)});var Wr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Gr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Hr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Hr.prototype=Promise.prototype;Hr.all=Promise.all;var Vr=a(function(){return!!Hr.all([1,2])});if(!Dr||!zr||!qr||Wr||!Gr||Vr){Promise=Fr;ne(S,"Promise",Fr)}if(Promise.all.length!==1){var Br=Promise.all;ne(Promise,"all",function all(e){return ce.Call(Br,this,arguments)})}if(Promise.race.length!==1){var Ur=Promise.race;ne(Promise,"race",function race(e){return ce.Call(Ur,this,arguments)})}if(Promise.resolve.length!==1){var $r=Promise.resolve;ne(Promise,"resolve",function resolve(e){return ce.Call($r,this,arguments)})}if(Promise.reject.length!==1){var Jr=Promise.reject;ne(Promise,"reject",function reject(e){return ce.Call(Jr,this,arguments)})}Mt(Promise,"all");Mt(Promise,"race");Mt(Promise,"resolve");Mt(Promise,"reject");Ce(Promise)}var Xr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Kr=Xr(["z","a","bb"]);var Zr=Xr(["z",1,"a","3",2]);if(s){var Yr=function fastkey(e,t){if(!t&&!Kr){return null}if(se(e)){return"^"+ce.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Zr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Qr=function emptyObject(){return Object.create?Object.create(null):{}};var en=function addIterableToMap(e,n,o){if(r(o)||re.string(o)){l(o,function(e){if(!ce.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!se(o)){a=n.set;if(!ce.IsCallable(a)){throw new TypeError("bad map")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!ce.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){ce.IteratorClose(i,true);throw s}}}}};var tn=function addIterableToSet(e,n,o){if(r(o)||re.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!se(o)){a=n.add;if(!ce.IsCallable(a)){throw new TypeError("bad set")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){ce.IteratorClose(i,true);throw s}}}}};var rn={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!ce.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ce.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={isMapIterator:true,next:function next(){if(!this.isMapIterator){throw new TypeError("Not a MapIterator")}var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ke()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ke(n)}}this.i=void 0;return Ke()}};Me(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ae(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Qr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){en(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Yr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Yr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(ce.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Yr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(ce.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Yr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(ce.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Qr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Me(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!ce.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+ce.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ae(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Qr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){tn(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new rn.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Yr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Yr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Yr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Qr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return new f(this["[[SetData]]"].values())},entries:function entries(){r(this,"entries");u(this);return new f(this["[[SetData]]"].entries())},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Me(i.prototype,i.prototype.values);var f=function SetIterator(e){this.it=e};f.prototype={isSetIterator:true,next:function next(){if(!this.isSetIterator){throw new TypeError("Not a SetIterator")}return this.it.next()}};Me(f.prototype);return i}()};var nn=S.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(nn){S.Set=rn.Set}if(S.Map||S.Set){var on=a(function(){return new Map([[1,2]]).get(1)===2});if(!on){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var an=new Map;var un=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var fn=an.set(1,2)===an;if(!un||!fn){ne(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!un){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var sn=new Set;var cn=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(e){e["delete"](0);e.add(-0);return!e.has(0)}(sn);var ln=sn.add(1)===sn;if(!cn||!ln){var pn=Set.prototype.add;Set.prototype.add=function add(e){t(pn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,pn)}if(!cn){var vn=Set.prototype.has;Set.prototype.has=function has(e){return t(vn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,vn);var yn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(yn,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],yn)}var hn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||bn||!gn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var dn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var mn=Object.setPrototypeOf&&!dn;var On=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||mn||!On){var wn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new wn;if(arguments.length>0){tn(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=wn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,wn)}var jn=new S.Map;var Sn=!a(function(){return jn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||jn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof jn.keys().next!=="function"||Sn||!hn){b(S,{Map:rn.Map,Set:rn.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Me(Object.getPrototypeOf((new S.Map).keys()));Me(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var Tn=S.Set.prototype.has;ne(S.Set.prototype,"has",function has(e){return t(Tn,this,e)})}}b(S,rn);Ce(S.Map);Ce(S.Set)}var In=function throwUnlessTargetIsObject(e){if(!ce.TypeIsObject(e)){throw new TypeError("target must be an object")}};var En={apply:function apply(){return ce.Call(ce.Call,null,arguments)},construct:function construct(e,t){if(!ce.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!ce.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return ce.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){In(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){In(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(En,{ownKeys:function ownKeys(e){In(e);var t=Object.getOwnPropertyNames(e);if(ce.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Pn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(En,{isExtensible:function isExtensible(e){In(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){In(e);return Pn(function(){return Object.preventExtensions(e)})}})}if(s){var Cn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Cn(o,t,r)}if("value"in n){return n.value}if(n.get){return ce.Call(n.get,r)}return void 0};var Mn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Mn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!ce.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ae.defineProperty(o,r,{value:n})}else{return ae.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(En,{defineProperty:function defineProperty(e,t,r){In(e);return Pn(function(){return Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){In(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){In(e);var r=arguments.length>2?arguments[2]:e;return Cn(e,t,r)},set:function set(e,t,r){In(e);var n=arguments.length>3?arguments[3]:e;return Mn(e,t,r,n)}})}if(Object.getPrototypeOf){var xn=Object.getPrototypeOf;En.getPrototypeOf=function getPrototypeOf(e){In(e);return xn(e)}}if(Object.setPrototypeOf&&En.getPrototypeOf){var Nn=function(e,t){var r=t;while(r){if(e===r){return true}r=En.getPrototypeOf(r)}return false};Object.assign(En,{setPrototypeOf:function setPrototypeOf(e,t){In(e);if(t!==null&&!ce.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ae.getPrototypeOf(e)){return true}if(ae.isExtensible&&!ae.isExtensible(e)){return false}if(Nn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var An=function(e,t){if(!ce.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){ne(S.Reflect,e,t)}}};Object.keys(En).forEach(function(e){An(e,En[e])});var Rn=S.Reflect.getPrototypeOf;if(c&&Rn&&Rn.name!=="getPrototypeOf"){ne(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Rn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){ne(S.Reflect,"setPrototypeOf",En.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){ne(S.Reflect,"defineProperty",En.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){ne(S.Reflect,"construct",En.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var _n=Date.prototype.toString;var kn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return ce.Call(_n,this)};ne(Date.prototype,"toString",kn)}var Ln={anchor:function anchor(e){return ce.CreateHTML(this,"a","name",e)},big:function big(){return ce.CreateHTML(this,"big","","")},blink:function blink(){return ce.CreateHTML(this,"blink","","")},bold:function bold(){return ce.CreateHTML(this,"b","","")},fixed:function fixed(){return ce.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return ce.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return ce.CreateHTML(this,"font","size",e)},italics:function italics(){return ce.CreateHTML(this,"i","","")},link:function link(e){return ce.CreateHTML(this,"a","href",e)},small:function small(){return ce.CreateHTML(this,"small","","")},strike:function strike(){return ce.CreateHTML(this,"strike","","")},sub:function sub(){return ce.CreateHTML(this,"sub","","")},sup:function sub(){return ce.CreateHTML(this,"sup","","")}};l(Object.keys(Ln),function(e){var r=String.prototype[e];var n=false;if(ce.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){ne(String.prototype,e,Ln[e])}});var Fn=function(){if(!oe){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var Dn=a(function(){if(!oe){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(Fn||!Dn){var zn=JSON.stringify;ne(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=ce.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(re.symbol(n)){return Nt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return zn.apply(this,o)})}return S});
/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(j).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(Ne,""),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Me=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ie=new RegExp(ne.join("|"),"i");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||Re(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Pe.test(a)&&Ie.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Be=["Webkit","Moz","ms"],$e=E.createElement("div").style,_e={};function ze(e){var t=S.cssProps[e]||_e[e];return t||(e in $e?e:_e[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Be.length;while(n--)if((e=Be[n]+t)in $e)return e}(e)||e)}var Ue=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"};function Ye(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Je(e,t,n){var r=Re(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=We(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(i?"border":"content"),o,r,a)+"px"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Xe.test(t),l=e.style;if(u||(t=ze(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Xe.test(t)||(t=ze(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ue.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,u,n):Me(e,Ve,function(){return Je(e,u,n)})},set:function(e,t,n){var r,i=Re(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Qe(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Qe(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Ye(0,t,s)}}}),S.cssHooks.marginLeft=Fe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Ye)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=Ke).prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=Ke.prototype.init,S.fx.step={};var Ze,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){et&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ot):C.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return C.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function lt(o,e,t){var n,a,r=0,i=lt.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=Ze||at(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||at(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=lt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ut,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(lt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ut(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=lt(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&it.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(st(r,!0),e,t,n)}}),S.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Ze=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,ot())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},tt=E.createElement("input"),nt=E.createElement("select").appendChild(E.createElement("option")),tt.type="checkbox",y.checkOn=""!==tt.value,y.optSelected=nt.selected,(tt=E.createElement("input")).value="t",tt.type="radio",y.radioValue="t"===tt.value;var ct,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ft[t]||S.find.attr;ft[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=ft[o],ft[o]=r,r=null!=a(e,t,n)?o:null,ft[o]=i),r}});var pt=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(P)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,gt(this)))});if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,gt(this)))});if(!arguments.length)return this.attr("class","");if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,gt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=vt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=gt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+ht(gt(n))+" ").indexOf(t))return!0;return!1}});var yt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(yt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:ht(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var mt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!mt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,mt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,xt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,xt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var bt=C.location,wt={guid:Date.now()},Tt=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Ct=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function At(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||Ct.test(n)?i(n,t):At(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)At(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&kt.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}});var Nt=/%20/g,jt=/#.*$/,Dt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Ot={},Pt={},Rt="*/".concat("*"),Mt=E.createElement("a");function It(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Wt(t,i,o,a){var s={},u=t===Pt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Ft(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Mt.href=bt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ft(Ft(e,S.ajaxSettings),t):Ft(S.ajaxSettings,e)},ajaxPrefilter:It(Ot),ajaxTransport:It(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=qt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||bt.href)+"").replace(Ht,bt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Mt.protocol+"//"+Mt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Wt(Ot,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Lt.test(v.type),f=v.url.replace(jt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Nt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Tt.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Dt,"$1"),o=(Tt.test(f)?"&":"?")+"_="+wt.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+Rt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Wt(Pt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&S.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},$t=S.ajaxSettings.xhr();y.cors=!!$t&&"withCredentials"in $t,y.ajax=$t=!!$t,S.ajaxTransport(function(i){var o,a;if(y.cors||$t&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Bt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var _t,zt=[],Ut=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||S.expando+"_"+wt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ut,"$1"+r):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,zt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((_t=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===_t.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=ht(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=Fe(y.pixelPosition,function(e,t){if(t)return t=We(e,n),Pe.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Xt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Xt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Vt=C.jQuery,Gt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Gt),e&&C.jQuery===S&&(C.jQuery=Vt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/dist/FileSaver.js */
(function(a,b){if("function"==typeof define&&define.amd)define([],b);else if("undefined"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){"use strict";function b(a,b){return"undefined"==typeof b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error("could not download file")},d.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return c(b,d,e);var h="application/octet-stream"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,"undefined"!=typeof module&&(module.exports=g)});
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau, all rights reserved. | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.setAttribute("data-init", "lacking");}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:500000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{display:block;padding:0 1em}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{display:block;border:24px solid transparent;border-radius:50%;border-top-color:#7f7f7f;border-bottom-color:#7f7f7f;width:100px;height:100px;-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite}html[data-init=loading] #init-loading>div{text-indent:9999em;overflow:hidden;white-space:nowrap}html[data-init=loading] #passages,html[data-init=loading] #ui-bar{display:none}</style>
<style id="style-font" type="text/css">@font-face{font-family:tme-fa-icons;src:url('data:application/octet-stream;base64,d09GRgABAAAAADLAAA8AAAAAWHgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABWAAAADsAAABUIIslek9TLzIAAAGUAAAAQwAAAFY+IEkIY21hcAAAAdgAAAG8AAAF3rob9jFjdnQgAAADlAAAABMAAAAgBtX/BGZwZ20AAAOoAAAFkAAAC3CKkZBZZ2FzcAAACTgAAAAIAAAACAAAABBnbHlmAAAJQAAAI6gAADv+gJOpzGhlYWQAACzoAAAAMwAAADYY1IZaaGhlYQAALRwAAAAgAAAAJAfCBClobXR4AAAtPAAAAJEAAAFMBfb/0WxvY2EAAC3QAAAAqAAAAKhjiHI5bWF4cAAALngAAAAgAAAAIAFjDA9uYW1lAAAumAAAAY0AAAL94+zEpHBvc3QAADAoAAACHAAAA11cG/YjcHJlcAAAMkQAAAB6AAAAhuVBK7x4nGNgZGBg4GIwYLBjYHJx8wlh4MtJLMljkGJgYYAAkDwymzEnMz2RgQPGA8qxgGkOIGaDiAIAJjsFSAB4nGNgZNZgnMDAysDAVMW0h4GBoQdCMz5gMGRkAooysDIzYAUBaa4pDA4vGF4EMgf9z2KIYg5imAYUZgTJAQDSIQumAHic7dTVbltRAETR7dpNCikzQ8rMzMxt/M39mHnsU1/TfZz5jFpaV7pXJunMDLAZmOqaZjD5y4Tx+uPTyeL5lG2L5zN+L94zG8+ztr7ulXH1fra4bvK9M79xiWW2sNXPbWeFHexkF7vZw172sZ8DHOQQhznCUY5xnBOc5BSnOcNZVjnHeS5wkUtc5gpX/f3r3OAmt7jNHe5yj/s84CGPeMwTnvKM57zgJa94zRve8o73fOAjn/jMF77yje/84Ce/WGPun1zi/2tlXKbp3Xyc44bFyZanSWokJDXOOjXSk/LUSXn+pEwCKTNBaqQqZU5IjX+XMjukTBEp80TKZJEyY6RMGylzR8oEkjKLpEwlKfNJyqSSMrOkTC8pc0zKRJMy26RMOSnzTsrkk7IDpGwDKXtByoaQsiukbA0p+0PKJpGyU6RsFyl7RmosQcrukbKFpOwjKZtJyo6Ssq2k7C0pG0zKLpOy1aTsNymbTsrOk7L9pNwBUi4CKbeBlCtByr0g5XKQckNIuSak3BVSLgwpt4aUq0PK/SHlEpFyk0i5TqTcKVIuFim3i5QrRso9I+WykXLjXOYNzP8BuAPUwHicY2BAAxIQyBz0PwuEARJsA90AeJytVml300YUHXlJnIQsJQstamHExGmwRiZswYAJQbJjIF2crZWgixQ76b7xid/gX/Nk2nPoN35a7xsvJJC053Cak6N3583VzNtlElqS2AvrkZSbL8XU1iaN7DwJ6YZNy1F8KDt7IWWKyd8FURCtltq3HYdERCJQta6wRBD7HlmaZHzoUUbLtqRXTcotPekuW+NBvVXffho6yrE7oaRmM3RoPbIlVRhVokimPVLSpmWo+itJK7y/wsxXzVDCiE4iabwZxtBI3htntMpoNbbjKIpsstwoUiSa4UEUeZTVEufkigkMygfNkPLKpxHlw/yIrNijnFawS7bT/L4vead3OT+xX29RtuRAH8iO7ODsdCVfhFtbYdy0k+0oVBF213dCbNnsVP9mj/KaRgO3KzK90IxgqXyFECs/ocz+IVktnE/5kkejWrKRE0HrZU7sSz6B1uOIKXHNGFnQ3dEJEdT9kjMM9pg+Hvzx3imWCxMCeBzLekclnAgTKWFzNEnaMHJgJWWLKqn1rpg45XVaxFvCfu3a0ZfOaONQd2I8Ww8dWzlRyfFoUqeZTJ3aSc2jKQ2ilHQmeMyvAyg/oklebWM1iZVH0zhmxoREIgIt3EtTQSw7saQpBM2jGb25G6a5di1apMkD9dyj9/TmVri501PaDvSzRn9Wp2I62AvT6WnkL/Fp2uUiRen66Rl+TOJB1gIykS02w5SDB2/9DtLL15YchdcG2O7t8yuofdZE8KQB+xvQHk/VKQlMhZhViFZAYq1rWZbJ1awWqcjUd0OaVr6s0wSKchwXx76Mcf1fMzOWmBK+34nTsyMuPXPtSwjTHHybdT2a16nFcgFxZnlOp1mW7+s0x/IDneZZntfpCEtbp6MsP9RpgeVHOh1jeUELmnTfwZCLMOQCDpAwhKUDQ1hegiEsFQxhuQhDWBZhCMslGMLyYxjCchmGsLysZdXUU0nj2plYBmxCYGKOHrnMReVqKrlUQrtoVGpDnhJulVQUz6p/ZaBePPKGObAWSJfIml8xzpWPRuX41hUtbxo7V8Cx6m8fjvY58VLWi4U/Bf/V1lQlvWLNw5Or8BuGnmwnqjapeHRNl89VPbr+X1RUWAv0G0iFWCjKsmxwZyKEjzqdhmqglUPMbMw8tOt1y5qfw/03MUIWUP34NxQaC9yDTllJWe3grNXX27LcO4NyOBMsSTE38/pW+CIjs9J+kVnKno98HnAFjEpl2GoDrRW82ScxD5neJM8EcVtRNkja2M4EiQ0c84B5850EJmHqqg3kTuGGDfgFYW7BeSdconqjLIfuRezzKKT8W6fiRPaoaIzAs9kbYa/vQspvcQwkNPmlfgxUFaGpGDUV0DRSbqgGX8bZum1Cxg70Iyp2w7Ks4sPHFveVkm0ZhHykiNWjo5/WXqJOqtx+ZhSX752+BcEgNTF/e990cZDKu1rJMkdtA1O3GpVT15pD41WH6uZR9b3j7BM5a5puuiceel/TqtvBxVwssPZtDtJSJhfU9WGFDaLLxaVQ6mU0Se+4BxgWGNDvUIqN/6v62HyeK1WF0XEk307Ut9HnYAz8D9h/R/UD0Pdj6HINLs/3mhOfbvThbJmuohfrp+g3MGutuVm6BtzQdAPiIUetjrjKDXynBnF6pLkc6SHgY90V4gHAJoDF4BPdtYzmUwCj+Yw5PsDnzGHQZA6DLeYw2GbOGsAOcxjsMofBHnMYfMGcdYAvmcMgZA6DiDkMnjAnAHjKHAZfMYfB18xh8A1z7gN8yxwGMXMYJMxhsK/p1jDMLV7QXaC2QVWgA1NPWNzD4lBTZcj+jheG/b1BzP7BIKb+qOn2kPoTLwz1Z4OY+otBTP1V050h9TdeGOrvBjH1D4OY+ky/GMtlBr+MfJcKB5RdbD7n74n3D9vFQLkAAQAB//8AD3icrXsLcFzlleZ//v+++nb37dfte/VotVrdrW5JltuKpO6WJVluPyXbsmOEbGRjO4KVjWPZlsM4QIU4IYGlgCE2yxqKIQkJg2GreKQCTCZb1CZkiswjzOwOmSTATNVWTZLdDUwSMrVDsomD23vOf69assFAqgbk+773P4//nPOdc/5mwNjFl8WjosbaWblmxiOmIlTGYXzb11M7Z2ohAMbZCcZ5iG9prZl4whfwGju05xtttitUdwXYEUgkbQtWga5lC+XBaqJI285qpb8dVEc8Gnm5L5QM/f58yAlB399a7dD0mWAmdAqaMvBmKPKX9TdDwSjod9yhx03FAPcvI6Gk2lV33XoXUtKgL8C6Wa0WSzXbVjhg6JoqIPShCK0FOvOuE48K1V4B1VUQAVevugmP7Fz2CmTzW5/8+ZGP/+Kp7h/8oI4MuOZ7M5B9IvujH2Wf+PnCAjzn8ZK6AieMKRcvXnxWWSWCzGARlPcqtqs21WZzEBFgYIVDAYWzVJIrXBlH+hXGlWNM00GAJmYZ8sKBzTJFVZVppijqDFMVdTIWLa0o5JrdaHusPZGIG1IjFhQGK2mAZEe56kJnR1bTY7ZT7eivFGODBTdma3pHtlCNDVbwmgMHx/aO4R8ffeet5/ZCG6TfuV03IaSJU3oIzKsGO9+5PV+BwU5xqnOQx1aO8fW71yvD9fPn55/fA22PmsaFvfSgwZ8wzPiFvZ2DUMnzJ2hHVDMmHucPsSRrq7UQo4DMAV/AW7CANw/Zru3NIx20bBEpXwukArlxxOPReibaG63/SyQyiftzcBy3k1HuOHgjEgFHnkYfh4VodDJC4138Ff8hv5PlWbrWmm2O6grNEgGNCWGnbFtRm1Z04gzQPPWvkqMWF4eWU8DB267Df+gNe84bBvfRpfNI5Ny5yAmHDh5/PPLuByMlekDS9DsRR73nWHetwBShSO5PqCBQONO4E2wGlSvYZG6gMzeQ09SWFZC0tWION3oOVVXGTbGM+hrAzQj0O25yoN8R8YzzRsaZdzLwhpsGPEm783hAJ9+kq286eDX5pn/VydDjvk7i8EuchU21JJ3DNOqFzeABmywPcNXxhu/wB+3whrqwVw7Cn1j8vPfdDH6O7PR3fDV/Cb85wua/waSit309grZJHHOhHEQ9CA7zTGVCUb0ZvXzc1lrRe5Af+4An0aSL9op0IU9y6vRFtAYGKy7KJGFbQrdg2dXqGAwWilld0zUy9xLqd6A/zeFuy7gzYFmBOwOhZ6NNhZakm8YTI7S1pyM1mM032V26qevXGlzZ8+TKvROlB/BBkO9ACDalB7OZuBnuC5tRcAItpalENNOfhajVH1A2a1HjbHZ4N4r54oWLz4qPoe4jrMo2sonapm5QRQBQ3XycKVxwRRxjQuVCnWc6mrzOZ5FvBiraOmia5FubYRpok8n0ioRTKOQMNbWiszxYWAFZrQ1sB+dDJTFYghzyiBN3oB857ndIAha4Se/+YGUtjAkXXUO2xPE2eoe3TWPeMOXmzNi+j9w1HghvVbSAmu4c6nFac6MgbzXFU2baDr1241+98TfHtU/9t7df+MzU4msmfPYj06Wbw8Gqohda0/FkSyiyvtPGG/FsMKq1pLqmPvndkye/+y+08eYIHEJZpFmJra2Nop/VWuKcCwPvgRhnGlOFps6iIdAEmFVAKh53jblZyBU6nAFdbfX03tGwioZ9oGnEyDSWTQCyFzhoR+s/jdjgWLmc3L2K21zEmXCsM5aDm4g9Ny5v0PZVb+dY9Rcd/sl5eTiPj0nTaeiU+BhhW2qbuzJcUy2Nc2gCrjBkxWCqZiArGgOuwSzjAlDb5L91XfpvfYbpij6ZRIUWYoVcLqC2+UqNLddsMrekY3GZztVl2uQjpl4xjedIM+Uybc/r5viShuHgcgXuwQtpuoMHz8utCe/s8S+Y/7xMaYu2DX1yDrez3lp3cyyKdop+HLcLi878Uh9SKOSlj73cOIUFRVKVKHhaSS9JP452RCcYoJ3w85bz8Ckp9VN4xeZj9atpH4FnPCV4OtiDNIVYCrWwsbauK81VxUlaQnA+riFBisoUsiU0LbQpASCmmRAwg1MNJoH19uQ6WpriUV1jIQjphA5QjosiTfiy1tF+kPJKMTFYpAu6lkx40odnTv7VjYtC/QtTJyGH9HmMnKamGrcaqmaagRsMUwR9WeLmwsQREvIRevSvYa8uVFXo9Sc0w5A8/Rp5+jcxhXLuYAOIx/pbY+ggFp0FV8lNoLNAEQvyDkwBZR9T1ZC6xR0qFgsybix3DJcR7iIGwCsCHHQM0nYKVSBXQZPnqG7KDZiqrn8K524gpN9ghAx42k4GsvF3nohnA0kbnglkC9mrl7h4Db2TommKcVE1QOPRd97K5WJxsKO5nIjHbHtx/og3kK8iWys1he/EkKlqCbFOB6iKQp5Q5Yp6DB0AsjmPvHEFSGsoFraPaVpI2zLc2lmudErjJ/eeQwbKPoRBZulcwhwXYc6i1SdiEpiCF+KrFOIrAzKaHdhQ79tw4MAGuJv4rt8sQQu80jloGnnDfNVJBa+vn1WjSg1d8NHrg44FbTgdJ5+T77yy/gDI5wY7633yTbI7+CdyMDyEL2paDd0BvZjyfIYXH2/H+aqjDfXUisgnk3rFYMePoyZBegWanQpM5hKdlUSU1JnoQH2iG1d90IYADi0JPV2/oxMEeB7apm+aBngFw/ObMjzHzv7dgzyOh48fHZnmO9c8Wv+2RAGwHiP20UNnzx46mvYxyaMixDpZX22lQqQgRDqG4kYcMo92cpypAOo0Ti+iSYXJRGc5l8wvQhPfqpE0SYa7nDwkeQyh26OOlbecqVumoCwJ8+mDm+9/5T4eOyOt+4wk8WjavYTIG+7nD5Li2cWv8zGkMYoz51q2u3Y1JQSwfcumSn9JUxW0CZIWQ5isqKCo8zoGFPybx/lyHD2w4AaCBw7Ap1HIxAaHyZlr1tXG1owMt7h5Ox5QmxF4Iv6vDhaQoTFAYADuYIlnLa7b7RwtiOBDtVK1dbyCMXXxn5azOIIKfLFKaQP9K3HKIMYEQosvhkIWH23TQ9wIpCq9M4WxycnJsQIUYrEJ/bPGuOZohfHVzdmMaAmHm418c7DU3xdoyYPebFktPJtpHu7fefjw4R0VHiNTa06ZUTPe09a1sdTUVNrYtbo3nth11VW7tBa1d/U1a1t71rdG2u1IJNkWDYdbUs0pnnFT+OloWzISsdsjqVpvy9prqrNjed41POfPx2+J7TIXaWP5Wgf5bvToBEvpppQYOXPOJoda4gTQE6TsNK8sAvUSSHBFygfnfM9wL+8aK/Bddv0tZ8SufyKZ7ml7s20iCWdsPpPu4YVaXuur/2M6WX8riReTE21vtPUAnn4iyTxdf0vJ+/QM0pwsUL4D5BmUBQEeXpaU4W6RtExzN1In7eT9qHPpIoUdqAzSrdyHIPo1JNRps1uioCWJyIm2U/JG8oO4aZMXozF8b4RupRd5JJv7Nn8ZeUyxjlrakhJHcwO2gHMUDgGLR0MmS0GrIoMRWos0K81LUnPZYgmkw6sM8HtCoQTaT9y0Wu3f/MZuCYfijhMPhUVQNdL2hY8kMroS/8UvEqqeSfC/xzPV07k3vsqyrL+2ykYnhJjEz45OLIdbu4ncrbrWhImzltU7oqqaXAEdMWiHxPsSdvuF70K6/xf6FejjL13YBvFVP+UXrkwnyelZjBcltoLypQIoEmsoiDUw4C2QFS/I/J6yx5ybWOOqaMad0kJlKo+ElAdLqvRTMqOsgucuM64j3hgHU1H1mIkQ084Oje3eXT1lZwL1nwaD0BZMNfFTcHpv+sf7v6LEo4oZMlRbFNqH9tb60nEN0UkQ0mYawZNpR878eFuD1lWsl/Jb9J5iMbPlDKnkh3raBmS66U1M9Jm5rKUmMel1dKLOcxrVSgf5dJqU4o0g0pJyTlV37x4bytpCATOG8VUT4+m9cPoURiakE34ZMes/wbB0Roun+2p7h9oLSlwzQqZq2eIr+xe2/Rhp5QF8hHn5Hh/FfM9ibs32UrNG+l22ZbrnJ8N+fERAcD6YCp6nuPc2Aq/vWXiMfzKaye/BDfzTLPwe33MT8ns4P/y0uiLBdyZw3qRvNvGZegjF6H+escXvreOnkD7zm7IkADTbJEkU4sdw1jmwzpTj42smHLB82ijenjfx9YsXkccR+B5+I1azGtQk+4maTpnLlsBL75E7O1IPea+mzfPmUwQt00FJoG+nPxN/zruZzZprTljyx2GpXiHdYWBZtcINeB+2xVP16/GT9euDwf00TbqgK5gK7QvCmfp/wPn15WDa3BcM1l/Hy8F9wZQ31nf4Q2IjjrXyG+BnzXnMmqXiTuB5CLa01gINjvb8mesSTwHuSAEtzm8anp+uvwbdprkfhUs0wCNIxH6TP1l/vf6aPDThK0TXI5I+tjj+SX/8wIcaPxWX4y+CqsCiEIiAIzhsKrgfh+6qv+4L4RETPl6/zqMKukki9AA96OseZb3Zk7UKVKxZKt65tpR1J9p1sTGgP5Z4ah+KEzl73R/xEfr+I8H5fchlN/Jr0n0c3fSGkrz+vbhd5m2ZWltThDeKUaKh3WTZXWauS+WomBdMkjGvOCRuT9YfcIZxk0x24/5cT3q8redxe8TpTsLn03b9LIaFo/I0eQ7uxtjQm6rffI4elnTcJfbwX/qRFyG+Vw+SaJdyFIpugk0WXCcnaZFo1323viNAWHZPvk1+ugfjTf2sbcPR5LDT442bhwPj6Z5z9qi9wr8B85Ji51yXb3tISxlpSUtaZEYnFX8ZbHI6C8vk4ll2h5/YdRQbM0CUbSmXHsd5rH5zWz7fBnc/5iA1NLANwyQZ2+5JjiYfQ4mle+BxJA1prT9g+770dv4zTz9RnTPp+JlY4DJKoroOucmyT4fnsGIeFC3H9EtmB+qnGyP6413tPvs4BhIwipskDKakeIg+KKTgbl92JBkkHn1J3c8t+9ia2vBKhMFkGBJtEjrGDIzKE1SeAgTJiDAVRYpKmSGwMlksJor5gUWgjKlXYS0gurS4neaYflXJnaWBUjDKNAVhkWoF1WhHz7uJ2PapE8NHJkulySPD62/qVmLapMq10a997JqvnphQarc8dO3UQ2smYr38pfOWszK6fTs+eBKfHy4j8t2uWNrWnbDx5CNfe+TkxrHVE/EEW4ynxM9H2FhtpAeE2tnGFUH1J4xXChxD5hACLNXbLgOA3WU353rI37Y44SipbwdxwED/mEC0rOmuIzmlGkw7SBzNxZ6NN3519+zXRhV1Uosp3TdtGD68s4eXJo8uzHVtjyXc85gC9MYmRh+euuaRk+vhAG43Tm3RLGW7Clp52Oesq3N7dKVjnW9KxCdWjyFvi/nUs+Ja5CnPxtn+2t4NnVwLrELw76JqDMz1MacMGJoR0I5RVsA1lR/DLEdonLJLQWnOMcSamKlrszLnWWZ3mzcVOjsrnYWynTfVNmQ6aQFxrWtL9SQtgjqsojbxf5lp+qquSF1rVGyk02qZZEEKRkPdlv9ff3LVQ6MTFMas8xSft3fNVbd+vqg1KaF5w7RwBsirUye24UVXDS3oIcj/nz+56mF6qQlUAQ++gGoNytcxFG7P98DWMXMoHIL/6l/Z7p1riv8ko2oiyiru129WsSrmUjO1XdtWc0Pr7miOoWOV9YUQ07WQPmsCisWYDge5puAUAI3NIk6EQACmaQ+BGRaAwOSemV1TH90+vnlDrZBNFOi/nEUlLL96lYx5VZLqB5zDQLFQzGm6KuUX89L6YqxRuaPsCwXYTlJE1EVJt9ycWTo8bereoW7Wv38ewfOzmgI/N42Kn53LatjTxUCv85zbEyg+Y5hTcDddq99M2ysc8/51lABfjZ++8KvSxvUlnpCj7U+mIG3vR8yhXSbXEbaB3cDmatdds4lrhi9Z8hskNo2hkI+RQHWN6fMIUwKGFZiNhDmCNq6BoR1gejCoTzNdD86woB6cPDh33YFr91w99dHJLePr1tp525NylKZkzJtthLplN+ADzhOxjpiN1trRPwb/vhKfqIcMg8Mr3DDqd38o4cM36y9KWa+Tsn7v4/ocj134Vcg2TZsf/ABFKH4tYwrtObZYYxoF3QiQC+PjATwUho5+W8MkQlOOqUDxnlMNjZpsfB8zjJCxZe2afKeTjXeuboqT2XcOlsACB6XROFhWch7AeNy/VsZfx4fO5Aj8EjTVRPjLdtrmTS1NX7Azce6kmjZnnHf+1iuBiG0duzsmQTiZPzfjEoTGAqZ7xqt/nmmai8gXOWb0/sG9z8vyyPNOZjKDf9DlRgmQR93keVlHOU/9RTkfH8W8ieTQzWpsc21DGRM0Xw4soAUWDEDPtMB0oS9I5qeXC0PhMySPyTWjuYFctn9JEgWLp6FSXdz71TeSgzuQBmnXVHPXGqWhIhXkF+H2lQXxVqiSO5OthN9CQQSazmBOhdycwSgoZRJvQ28Yz8SVltDiwd3PUxMLN9De1dWehinH5783RvA9xhpyoHgnWAfGvE3sqtqOFT25rGIoMB4GBa0NAaepg2KYyiwVijQqFKGtopEeUFFYgQCboj0jZ8cCk7U1Q2W3MBBLjMRi0SCKxO0od6gD6Muon6Q35JGLDZS9DEpfLNZTA4aqrmrD0rwHCAO8Cs/Ur4a3J0Lql9WU4RfBJiYySfg+cviqaczLvipt59LuhbjXflPdSuRLUUd/9VV422jRv6SF/NbehYrcQ1p2AZ6jd80L5+kSRwE3WV+OVGTs9GvnU6yLDbJsrZ2aE+iijskqPtuHgTAktgz0r+xtaUaslZRRH6FKlRJrBwO9bK+lef8YXipg7j8GSJjM+GRPmSApRv6n//T4VrH3qqbRaNxoqoxSNMfwD6MV18yPulftrX+xZ7gXeka7vMCPgf2aQ8+N4bPuaKz7lg2LIGjjTT3x4T4jvubPYKL+cFtPTxscwm0DA+yVNaMjbFNt/cE9k+sUpoxgas8Gu1qjhG7GqUu+oAFel8B2gTDcgt+54If2XXv1VVsmVvRkM4m4TnnrYCGLtt5foc4F2rWO/NrIbxENvBHUy0WJBYqEg8hbyklAxoATvupfHMCZ3wAHaASEAFz/Y7pUPh+ZumWK7z65G1KGftgMJro0NbIzrOvbm1sCuhL9tBGKtrof1aLaZkdRjS4zYhzSDTDVw4bldnrPGtubWgKGiH0adR1JuR9VI/qErSgB72HMk0emp2+anr6F7kfTydZ+zdKSO0EdDRuTqaip3xAIjapaLa1aWqg/kmqNQEiXzza3ZFbqId3euezR4Iiqbkj5j7ZEIeTX7X4n9vLvLmKL2mAXILVUp0WPoyLCVJVGQ+/yNlGhjP8PNLq4y9vNy9rPrn+eW36OaPmdX0nTF7EIpu9XPlvW1XMgOiHbSHIL1ji1nsbpBdbAyXtlTRwjSHuCqyJvkjfAVEiMe317oeLEURlNKa/CI7tfVLxLp5qb4tFwUFVYJ3R6/STHqy1Xi1R9RLvvd6lSPIba14rZoo6zwa3w/7L18OGzRwC+N7B52+HD2zYPfA8OP3iIH9kyjkd4Fdwj9x85skUPzfXhQd9cSN96mB+97yjgoYUXvZ7kxYu/UW7mL7Eo+rwKK9byTKWsSWWz6N8VBaZxB5ShgDJZHerscm0J6L1at2fNGPH4CqQNZ+gAGTeaPZVNBB52IJ7nt/uI3N/B0707Do+8vmEH37rpdTLX8eEDd47Xr564Y3aIj+67azM8Q4dwYHjpHbJoOu1/8OkH++lk4s59Y2Lo+tsevG1ukA/N3uHb9f9TbkFebNRET61I/GEuOEtdCkxKcdfISpPptmSn01kdVNF4Y4NjHF1rWnh0cxWZKImsJdKcKPPIkZR5RIoYkcJ7dh665dDOHqV/4jgc2ILXkYz77zgwypGsH1zKst/L+ir6nJVsPdtR2zaC4aQTZC9CR4p0jigDQ6gmexJcUeeXdbS0xY7WslzDdpPF8uryAPX0L+tqoVNFD5QrFi7rbKGXwYnkJGCpwra4XMZe1th6JZcOCL0VgV445HepqL+l5jVdKMHP1VeH89a/WtYaK2/9Z/g4noyFYduzjf6WpSS0FIKDRovrC4aaQ9ZArQ9b1r/K58P0Yhi/4Msl4WPhFbUuzCTBb1OitsjmCVsAn+Qs3eokTJ1FeEQlI1nGXNlfnbS8tcc/sYz4wU8vsbd+lr/UII5u7mncOYBJ+WKc+5jsETe/L03AXCfmN4IlTVnCOYiVSxyWr5h45up7d/Lpu568c7ey4zRcu6yjzk9P3Xvu3im5qb9yaf98ab2AwZIsy0Zrq6nXxkG22zi121ScGiC71IoiZwcZqlAmzUCmvaU5GgkkzaQfoNCjlKimWnxvGhtR5b4r0roYFX59BZLFsvVB5NMRIVAGQ65bJoBsRuaFbLJM/0n3nZCLlZaWYKj+efWy88WezKv+yiG5dKnN23mX2uUJbi5bY+Rc4XgxBrHXGnlYb637gwLPEuXVBmD1ViiIyzgRfl5f9NddvfoB9NDxw0clWD9KV0FbdhMMjzfc+H7uJXEG8fo6Ns4O1q5fU+KCCq16PhXG3JuJcczFw6GwEaLSBXkQwNwF4DgLs1AgHDqA2FToAXEgCDpj+jTudDaDgUmnGsaG9bWx1UOVctJGzBlDf2HJWgZyh1HHkeV53RK5WC6Gc8fr45AzKSByxwlWHShTsxydSgfVLhALUZsXOiS8w0TlVOdJ006bC4ZayA43j7cN9WCqeCgYDTvGJzKnKG0Jn7ou6KSC18Frs8FUk2Jch1frv65/kWLdMMbf2fWfDKac4HFdaYpb8HY9ZDXZhnEylEgHP7t2L6YMcO46M22b111HA113zoFBDJQUpy/WLx6B36K+MxQdmlHBKerm0BIJKqUu68GgoLY0VSpexdChJiDC1WpC9qwK1cQYpS7U0BW0JAzeMrX6P+hRI2Dy4z/hqqmb4gS3jG8GLT77P1Ue5E4wfOFTFoioAS8NYVYZhv9umJapaPV6hct6wHdkHiowcqVYnvUivt5Qa+3vK/X2dBXy2Uy6pclBE4pR4XkwxWHTtq93vH+tv0l2U6pFvbNRePWrv51uBFbBWmgHbw/upXv+0LnRc1AxL/RjLrVgmvx/yP0Fq1KJxarV2A+PHct2HDvWwbvxJIYX60/THfzHrcdGH7shQm/iC2l6E/fXRumtaPU/ybeyx+p34UkVL0LJv9PAUHOomzL1w8q9uZaYoV3SIOoujHBKKii60eKMxhJHXUMgTQW0InVqqErq22AbYN6BHOMkFCMtlpWLDDc/0NM23tYLZ1uGMX5ZrWfPtkQj+chQ61lZiH+gZSiai0Sbz4JhDbeswXd2PSVr8E/twqtr8KXdu690Q2KpI6jHMMuhBjdRdbG9iQslEae6YVhDV7gBdOiHgK4iKtSERkv4yOpAP8ZMpimmNqtSRuUFG50FDD2AeaYRNrasGS0P2LTwuGDncpRJNtZ5Fpev85SVhMY6T3ewBJrtjAFIs8XZi95eSXOXLJkW75wKaXmE7afkst1TsjBDJxP3v3I//kG6Z9R+ce7WnfcfrvHRo6fPnT46CpteTMJZ7yXKMb2XTlHieMpspgUYLz+k3UsJV/LFTWNH7vvT08eHlfWHHtx+69yLSbZMRhHWhDn2SG0oYCC3qE/B0qAKuZqPg+b5XkErlwWmYkKlMkNY2eLmUAqF3OJinmKjrPIhuK1/W/IJ6z8kh5K1D2aK+/UTWqOzkz1fC4xVOgKKKqgjZqKV9nhTGGOgUGnZjiK4Mq8jJFKOMwJ0UxSLdlO/Ymvrtq8H3/UG+nBNcG0e7Vh79xt/yOf37KklDMPYaeyc3LZ1y8hwT671KoP8BApooL9agOqYUm2FATeRptTcdeQGxexmC3pWyw2u5ZSr4l9xsLCKW+DaaeqxVskXZql+XdTggY9NDrcHk331MoTzqZSj3fGlCe3GxJQT6IsGjeBkQOGQO53v+VKSb9E1EVMQ5vKs2/R7axiimWAmiVCh4/MZ1eYrecvvMWx9oa71KppmNkVhBs6G6m+veHkw8amOFi0QFY4pTI7RrikRxSd1jgBaCeytDEHmYSsUN/HTEEyqQVQ6ppY4937ER/nPmMXaWK6W8TvQy1cj+s28wcIlS70LHqQsSoS5rB18abP70ubwv0VMqrRhJALnb2SJXZ76vg7pAPc9++oF2+s8XzLyZUMt/3ajhy35encPGy4n+lIy4Xvvou1JERMJFmTa8zqHldSwlaBa9k6VC63heDzM/3cYttfndDMiKlbIwCN7eV2F8FS61toUNZhCzHltUoKChwg/yah6WVnr8jIXJer+ultoizj14CWn/GfvvEU5uIjTdtnx8nw86K1TlzWF5QsXBhYXGlw+3rLk/5IB/G8+gzZuYUagPa8ByoUaWfiRIuA35I4CrJOMVariLtOCaKD+Ryq3gvWTwSDci1AAfVtQi7zzsmWE4F5Vq/+RPKDe8714vX5SVSVGuXjxa2K/iCyN42qyOkbLkXwt6FIjmt5sRsHC11VB2yANZQl1HL+GWjFC9Em4Vx7Q2oKTeB2+oKkeL3xEkBU015zWlri4VEBrpICIlwZ7Eso2mgSVKs8GLeJN5YsLnmn7Lh7/45KS6ncSg5I/Por8NcaWi7UW27Te2JeyTGPqPg3VS9j2CzJyeznjn1qaGXCrpsq8ro655n7+1zi3WwkBRkGuRl5e3eMyi6L0TvDJcnYwTnM14fWG5Xyh5nXVLya56BmNJRUi25oYoiGRJBGXdaO+Rb1Y9R861mlZYzodsf21K8/wZ1mC8I75Hr9viTsF+fsW5BzxTSO1IFQNz6DJvnC/lPv9L6Ab4KcvfJU6gC94y9NfMP31s7i5XY5RIn6LJqKRxjAKDuOVppiQA65ycUhaEvVeQya8dVuF6uCYKClVFADVGd5FyGt9RTWAAgg50ahiNFm2YkcCarHv3QTW/6Jna0TY0VA0FEpnMkbciKJ0RGSrrMN/XzzKfy7p3saOsq21cUl7FVQ2Dboqxg8D38S4hnxooL2bGRU1qurqAtP1Q1M7xzd3Sd4MKlx9aN7cxtWq/1OQAi25ohrK0s0ilVHwbgmKVNGWD1T/IMmcmd2u68h5MhPsLpW6Mf7ZEUPfceC+0zfhdXy9uTm5cQffujnZrMQFzmZdv+n0HyDOnl33Z4RjOcFoIL338N50IIpBxBEd9+2+7fV+vGGHQ5Y18NCTDw1EwkITYRu/JwZe9fPMI+IfxFUsyjbSqvKhAcwt168pdedsTBbTzZxTnRzRxQyV/if8uggP8y2VcpqWw7iyTmgJOy3GuEu5oK35P5xC0L6GZFag308hopD9/6r3KyoE7rKG5Tqi3D9z8s6TM/3+7mEeeCxiPDanxdWDjxmRxwKIeebmVFVePajGtTl5VaWLcGDdLdMVpbTvxD0n9pWUyvQtew1RfioQFOU/1vU/Lotg4KmyMEz9nnuM2OINTVu8ETPuuUeXPuNZUcFYEmd9rFRbYSxfVUjLiN9dFerqyvd2yKWFBEEB548Fup3m1PWnBQHUERnjyKYur0O1v1pBfvl30u2Hnj4EwydOw/CBOyd23vd4+YefpuUbvHb84elmO9HXD1P3Tq1f48YM5VZ17msH5/d1fPtmWQndeOwTd1EnZNeXbtwsoBRbcbJ29T3T0GbGDO+3J95aen6KxViWDVCHL8i5wsPAxPLfE1FDb55RmQnmCYgrEoijOyX+6KeDoE66Tt5ONjkSgheKBA9LqL6qpqchU0E7QaSYtJ3+irSVimrrmpLJU3ej0gsK6vTRXbdlEXtnb9u17Z9B+Un9m9Hg5rmoE93YF4zCPwZ31H9b/6f6b3cEgzvAgAIYO4IwfMe64Q03nOX3fXzD8Lo7brzrLtiCz85tCkajwb6N0b9LJD738MOfSxTs2x7mj3yGsEgjzzBYB9Xw2hGCYAZOzYWG2uR6nFlvxlJeEZfO732ziNsX84be4ffMGz7/gRmQb1dyTX8Q/dtArU8Hb8Wybmgod53NBlQOilxbg9mPCIstK3sTAzE7O5BMJuTKkvJgwfulBskXM0CBMymXLQrpkSoDMVmJ6aA2QjGG4SJkRk38g5sd61dtYGoQ4St+jHY+U23r4aVWOEjtseoMnDgvfwCEm2+hp6r/X91AK4zYkU3HMVEaxnR3qBfqPzn+/wHPnsOreJxjYGRgYABi1vIsoXh+m68M3MwvgCIMt5YoxkDp2P9f/2exVDAHAbkcDEwgUQAz1Qu/AHicY2BkYGAO+p/FwMBS9v/r/68sFQxAERQQDACh8QbyeJxdT0sVwzAMy49AkAxAkbT3UQiAITGAISmAYQiA9th4ttUs7Q568UeSlVidiwSkB3PUPg+ESd6ZD/+8v7HyrtzwghY89ZB6BcyrYqc6RZhw48YhaA1Wc/v1PQtdeXJ/HppUmFM597nvBVK7D+Z+E8/uQZLBgDyaz3Llvxx02S3c/Hv813JrznryZP4F+6lSfQAAAAAAAAAAUAC2ATABaAGyAfoCJAKwAzYDmgQSBFwExgUyBbQF/AZOBvwHRAe2B/YISgigCPIJGglCCWQJignACgAKQAp2CroLAAtGC4oL8gxcDPINng5iDuYPag/6EF4RIBGGEeQSShKYEyQTbhOyFAoUYhS+FVoVphYoFooXHBeGGFoYnhjGGOwZChlOGXgZrBneGhwaWhqgGtIbLhvyHHQc2B1QHZ4d/wABAAAAUwBtAAYAAAAAAAIAIAAwAHMAAAB2C3AAAAAAeJx1kN9q2zAUh39q0441YxcbjN3tXJWWEcc1lEGvWkLbXZeSu8JUV/6T2VKQlY48w95ifYa9zt6jd/vFESUUYiP5O5/O8ZEE4AP+QWH9nHKsWeEdozXv4A0uIu/Sf488IN9G3sMQPyLv0/+MfICv+BV5iI/4wz+owVtGM/yNrPBZfYm8g/fqW+Rd+svIA/Jd5D18UovI+/S/Ix9gqp4iD3GoniduvvR1WQU5mhxLlmap3C/FUdVWN6IXoXK+k3MpnA2maVySuza0ZlToUZ07292YctFov6k2eWp8VzsrJ0m6qa+NNV4H87Dq1j2WWQiFFN61chX7yNy7mclDUoUwPxuPN/tjAoc5lvCoUaJCgOCI9pjfDGk/BPfMEGaus2pYaDQ0GgtWVP1Kx/ico2BkaQ0zGnKCnHNL09KNuK451721rLqhLfmfht5vzdrmp7Sr3nUfC07YL92afU1r+wrd7/Dh5WwdHrmLjDawanUK3+9acPXqPML7Wq3NaHL6pL+1QHuGMd8t5/8PvPGO3QAAAHicbZLnlpswEIV9DRiwvZtseu89Ib333vvmBWRZYMVC0pHEEufpg8BO/kTncOfTaLgMOtPr97o17P1/baKPACEiDBAjQYohRhhjDevYhu3YwA7sxC7sxh7sxT7sxwEcxCEcxhEcxTEcxwmcxCmcxhmcxTmcxwVcxCVkuIwruIpruI4buIlbuI07uIt7uI8HeIhHeIwneIpneI4XeIlXeI03eIt3eI8P+IhP+Iwv+Ipv+I5N/OiF1hEz9JKxUrtFrDl1lWF9NR9QIikToRaVjUouKxvOmNBjLxnlhgo2DbnM1djLKrNGnGPScSUzItzGv93yPP2bSQSX84z9cqFQdJ56yZRmMhW8mLlJJSaBI0XYPDaZKDUviZmvr6DrNjJMi0WcK1MTM02mqpbZlJtEsNx5SI238jSodJtoS7qv+BpPw67IY9xU+dg5TXjROTWwdGrIOzWhT+uA0jolxqjaZrSOnCF2Nmq16651EYpMm1fakAul9SJQeR5QVYQlk1VkZ8SwoVNFIVjWnKQrlBGdMToftdoZjrs77DajqXKrS02YEFxbbtdWkG0x44JJVUS5aBqKSlJwmhDrmOF2Hv9Wqsy4TNqoKhfmSrrQKuNSL5nvPG6p0s0AkEWkSWVZMy1Kx3ljk03qLuZ14lTmB8gNGmByGrGfjLrhlhJV2f7SaIneNF1ypQNbybBUSgZswQaWEUNngeay1/sD4l/60HicY/DewXAiKGIjI2Nf5AbGnRwMHAzJBRsZWJ02MTAyaIEYm7mYGDkgLD4GMIvNaRfTAaA0J5DN7rSLwQHCZmZw2ajC2BEYscGhI2Ijc4rLRjUQbxdHAwMji0NHckgESEkkEGzmYWLk0drB+L91A0vvRiYGFwAMdiP0AAA=') format('woff')}</style>
<style id="style-core" type="text/css">html{font:16px/1 Helmet,Freesans,sans-serif}#store-area,tw-storydata{display:none!important;z-index:0}.no-transition{-webkit-transition:none!important;-o-transition:none!important;transition:none!important}:-webkit-full-screen{height:100%;width:100%}:-ms-fullscreen{height:100%;width:100%}:fullscreen{height:100%;width:100%}body::-ms-backdrop{background:0 0}:focus{outline:thin dotted}:disabled{cursor:not-allowed!important}body{color:#eee;background-color:#111;overflow:auto}a{cursor:pointer;color:#68d;text-decoration:none;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}a:hover{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover{color:#e44}a[disabled],span.link-disabled{color:#aaa;cursor:not-allowed!important;text-decoration:none}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover{background-color:#57c;border-color:#79e}button:disabled{background-color:#444;border:1px solid #666}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em;resize:vertical}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input[type=range]{-webkit-appearance:none;min-height:1.2em}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;margin-top:-5px;width:33px}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input[type=range]::-moz-range-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-moz-range-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;width:33px}input[type=range]::-ms-track{background:0 0;border-color:transparent;color:transparent;cursor:pointer;height:10px;width:calc(100% - 1px)}input[type=range]::-ms-fill-lower{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-fill-upper{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:16px;width:33px}input:not(:disabled):focus,input:not(:disabled):hover,select:not(:disabled):focus,select:not(:disabled):hover,textarea:not(:disabled):focus,textarea:not(:disabled):hover{background-color:#333;border-color:#eee}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.error-view{background-color:#511;border-left:.5em solid #c22;display:inline-block;margin:.1em;max-width:100%;padding:0 .25em;position:relative}.error-view>.error-toggle{background-color:transparent;border:none;line-height:inherit;left:0;padding:0;position:absolute;top:0;width:1.75em}.error-view>.error{display:inline-block;margin-left:.25em}.error-view>.error-toggle+.error{margin-left:1.5em}.error-view>.error-source[hidden]{display:none}.error-view>.error-source:not([hidden]){background-color:rgba(0,0,0,.2);display:block;margin:0 0 .25em;overflow-x:auto;padding:.25em}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}.error-view>.error-toggle:before,.error-view>.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before,a.link-external:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before) "\00a0\00a0"}[data-icon-after]:after{content:"\00a0\00a0" attr(data-icon-after)}.error-view>.error-toggle:before{content:"\e81a"}.error-view>.error-toggle.enabled:before{content:"\e818"}.error-view>.error:before{content:"\e80d\00a0\00a0"}a.link-external:after{content:"\00a0\e80e"}</style>
<style id="style-core-display" type="text/css">#story{z-index:10;margin:2.5em}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style>
<style id="style-core-passage" type="text/css">.passage{line-height:1.75;text-align:left;-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}@media (prefers-reduced-motion:reduce){.passage{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}</style>
<style id="style-core-macro" type="text/css">@-webkit-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-o-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.macro-append-insert,.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-prepend-insert,.macro-repeat-insert,.macro-replace-insert,.macro-timed-insert{-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-append-in,.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-prepend-in,.macro-repeat-in,.macro-replace-in,.macro-timed-in{opacity:0}.macro-type-cursor:after{-webkit-animation:cursor-blink 1s infinite;-o-animation:cursor-blink 1s infinite;animation:cursor-blink 1s infinite;content:"\2590";opacity:1}</style>
<style id="style-ui-dialog" type="text/css">html[data-dialog] body{overflow:hidden}#ui-overlay.open{visibility:visible;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-overlay:not(.open){-webkit-transition:visibility .2s step-end,opacity .2s ease-in;-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in}#ui-overlay{visibility:hidden;opacity:0;z-index:100000;position:fixed;top:-50%;left:-50%;height:200%;width:200%}#ui-dialog.open{display:block;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog{display:none;opacity:0;z-index:100100;position:fixed;top:50px;margin:0;padding:0}#ui-dialog>*{-webkit-box-sizing:border-box;box-sizing:border-box}#ui-dialog-titlebar{position:relative}#ui-dialog-close{display:block;position:absolute;right:0;top:0;white-space:nowrap}#ui-dialog-body{overflow:auto;min-width:280px;height:92%;height:calc(100% - 2.1em)}@media (prefers-reduced-motion:reduce){#ui-overlay.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-overlay:not(.open){-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-dialog.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}#ui-overlay{background-color:#000}#ui-overlay.open{opacity:.8}#ui-dialog{max-width:66em}#ui-dialog.open{opacity:1}#ui-dialog-titlebar{background-color:#444;min-height:24px}#ui-dialog-title{margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em;text-align:center;text-transform:uppercase}#ui-dialog-close{cursor:pointer;font-size:120%;margin:0;padding:0;width:3.6em;height:92%;background-color:transparent;border:1px solid transparent;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;text-align:left;line-height:1.5;padding:1em}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}#ui-dialog-close{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-close{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}</style>
<style id="style-ui" type="text/css">#ui-dialog-body.settings [id|=setting-body]>div:first-child{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-dialog-body.list{padding:0}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves table{border-spacing:0;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em .33em}#ui-dialog-body.saves td:first-child{min-width:1.5em;text-align:center}#ui-dialog-body.saves td:nth-child(3){line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999;speak:none;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves .datestamp{font-size:75%;margin-left:1em}#ui-dialog-body.saves ul.buttons li{padding:.4em}#ui-dialog-body.saves ul.buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves ul.buttons li:last-child{float:right}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-desc],#ui-dialog-body.settings p[id|=setting-desc]{font-size:87.5%;margin:0 0 0 .5em}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:1em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.settings input[type=range][id|=setting-control]{max-width:35vw}#ui-dialog-body.list a,#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves button[id=saves-clear]:before,#ui-dialog-body.saves button[id=saves-export]:before,#ui-dialog-body.saves button[id=saves-import]:before,#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-dialog-body.saves button[id=saves-export]:before{content:"\e829\00a0"}#ui-dialog-body.saves button[id=saves-import]:before{content:"\e82a\00a0"}#ui-dialog-body.saves button[id=saves-clear]:before{content:"\e827\00a0"}#ui-dialog-body.settings button[id|=setting-control]:after{content:"\00a0\00a0\e830"}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:"\00a0\00a0\e831"}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em;-webkit-transition:margin-left .2s ease-in;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{position:fixed;z-index:50;top:0;left:0;width:17.5em;height:100%;margin:0;padding:0;-webkit-transition:left .2s ease-in;-o-transition:left .2s ease-in;transition:left .2s ease-in}#ui-bar.stowed{left:-15.5em}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar-body{height:90%;height:calc(100% - 2.5em);margin:2.5em 0;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-webkit-transition:visibility .2s step-end;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}@media (prefers-reduced-motion:reduce){#story{-webkit-transition:margin-left 0s;-o-transition:margin-left 0s;transition:margin-left 0s}#ui-bar{-webkit-transition:left 0s;-o-transition:left 0s;transition:left 0s}}#ui-bar{background-color:#222;border-right:1px solid #444;text-align:center}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-history [id|=history],#ui-bar-toggle{font-size:1.2em;line-height:inherit;color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-toggle{display:block;position:absolute;top:0;right:0;border-right:none;padding:.3em .45em .25em}#ui-bar.stowed #ui-bar-toggle{padding:.3em .35em .25em .55em}#ui-bar-toggle:hover{background-color:#444;border-color:#eee}#ui-bar-history{margin:0 auto}#ui-bar-history [id|=history]{padding:.2em .45em .35em}#ui-bar-history #history-jumpto{padding:.2em .665em .35em}#ui-bar-history [id|=history]:not(:first-child){margin-left:1.2em}#ui-bar-history [id|=history]:hover{background-color:#444;border-color:#eee}#ui-bar-history [id|=history]:disabled{color:#444;background-color:transparent;border-color:#444}#ui-bar-body{line-height:1.5;overflow:auto}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-history [id|=history],#ui-bar-toggle{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a:before,#ui-bar-history [id|=history],#ui-bar-toggle:before{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-bar-toggle:before{content:"\e81d"}#ui-bar.stowed #ui-bar-toggle:before{content:"\e81e"}#menu-item-saves a:before{content:"\e82b\00a0"}#menu-item-settings a:before{content:"\e82d\00a0"}#menu-item-restart a:before{content:"\e82c\00a0"}#menu-item-share a:before{content:"\e82f\00a0"}</style>
<style id="style-ui-debug" type="text/css">#debug-bar{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:0;margin:0;max-height:75%;padding:.5em;position:fixed;right:0;z-index:99900}#debug-bar>div:not([id])+div{margin-top:.5em}#debug-bar>div>label{margin-right:.5em}#debug-bar>div>input[type=text]{min-width:0;width:8em}#debug-bar>div>select{width:15em}#debug-bar-toggle{color:#eee;background-color:#222;border:1px solid #444;height:101%;height:calc(100% + 1px);left:-2em;left:calc(-2em - 1px);position:absolute;top:-1px;width:2em}#debug-bar-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-hint{bottom:.175em;font-size:4.5em;opacity:.33;pointer-events:none;position:fixed;right:.6em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}#debug-bar-watch{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:102%;bottom:calc(100% + 1px);font-size:.9em;left:-1px;max-height:650%;max-height:65vh;position:absolute;overflow-x:hidden;overflow-y:scroll;right:0;z-index:99800}#debug-bar-watch[hidden]{display:none}#debug-bar-watch div{color:#999;font-style:italic;margin:1em auto;text-align:center}#debug-bar-watch table{width:100%}#debug-bar-watch tr:nth-child(2n){background-color:rgba(127,127,127,.15)}#debug-bar-watch td{padding:.2em 0}#debug-bar-watch td:first-child+td{padding:.2em .3em .2em .1em}#debug-bar-watch .watch-delete{background-color:transparent;border:none;color:#c00}#debug-bar-watch-all,#debug-bar-watch-none{margin-left:.5em}#debug-bar-views-toggle,#debug-bar-watch-toggle{color:#eee;background-color:transparent;border:1px solid #444;margin-right:1em;padding:.4em}#debug-bar-views-toggle:hover,#debug-bar-watch-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle,html[data-debug-view] #debug-bar-views-toggle{background-color:#282;border-color:#4a4}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:hover,html[data-debug-view] #debug-bar-views-toggle:hover{background-color:#4a4;border-color:#6c6}#debug-bar-hint:after,#debug-bar-toggle:before,#debug-bar-views-toggle:after,#debug-bar-watch .watch-delete:before,#debug-bar-watch-add:before,#debug-bar-watch-all:before,#debug-bar-watch-none:before,#debug-bar-watch-toggle:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#debug-bar-toggle:before{content:"\e838"}#debug-bar-hint:after{content:"\e838\202f\e822"}#debug-bar-watch .watch-delete:before{content:"\e804"}#debug-bar-watch-add:before{content:"\e805"}#debug-bar-watch-all:before{content:"\e83a"}#debug-bar-watch-none:before{content:"\e827"}#debug-bar-views-toggle:after,#debug-bar-watch-toggle:after{content:"\00a0\00a0\e830"}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:after,html[data-debug-view] #debug-bar-views-toggle:after{content:"\00a0\00a0\e831"}html[data-debug-view] .debug{padding:.25em;background-color:#234}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{display:inline-block;vertical-align:middle}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid:after,html[data-debug-view] .debug[data-name][data-type]:before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html[data-debug-view] .debug[data-name][data-type]:before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=html]:before{content:"<" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]:before{display:block}</style>
</head>
<body>
	<div id="init-screen">
		<div id="init-no-js"><noscript>JavaScript must be enabled to play.</noscript></div>
		<div id="init-lacking"><p>Browser lacks capabilities required to play.</p><p>Upgrade or switch to another browser.</p></div>
		<div id="init-loading"><div>Loading&hellip;</div></div>
	</div>
	<!-- UUID://F420476E-098A-46C9-9EFF-9652F277776A// --><tw-storydata name="nero" startnode="216" creator="Tweego" creator-version="2.1.1+81d1d71" ifid="F420476E-098A-46C9-9EFF-9652F277776A" zoom="0.6" format="SugarCube" format-version="2.36.1" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">em {
  margin-right: 0.05em;
}

em em {
  font-weight: bold;
  margin-right: 0;
  text-decoration: underline;
}

.sprite-q {
  color: #6d6;
}

meta-text {
  background-color: transparent;
  color: #eaf54c;
  display: inline;
  font-style: italic;
}

#story hr {
  border: 0;
  border-top: 1px solid #555;
  height: 1px;
}
#story hr.text-sep {
  margin-left: 10%;
  width: 80%;
}

#story .ui-title {
  font-size: 1.2rem;
  font-weight: bold;
}
#story .ui-title-more {
  font-size: 0.8em;
  margin-left: 0.5em;
}

#story .ui-subtitle {
  font-size: 1.1em;
  font-weight: bold;
  margin: 0.5em 0 0.5em 0;
}

/* vertical separators */
.mt-vsep {
  padding: 0 .5em;
  color: #666;
}

/* make debug bar fit on small screens */
#debug-bar {
  max-width: calc(100% - 3em);
}

/* hide the big arrow pointing at the debug bar */
#debug-bar-hint {
  display: none;
}

#ui-dialog-body button {
  color: #000;
  border: 1px solid #ab852d;
  background-color: #cb9b32;
}

#menu {
  /* make some clear space, since footer is on top */
  margin-bottom: 50px;
}

#menu ul {
  border-radius: 15px;
}

#menu li a {
  border-radius: 15px;
  color: #e7c440;
}

.handwriting {
  font-family: Snell Roundhand, cursive;
}

.mild-handwriting {
  font-family: Apple Chancery, cursive;
}

.crude-handwriting {
  font-family: cursive;
}

.disabled {
  pointer-events: none;
  opacity: 0.4;
}

.imp-info {
  color: #eaf54c;
}

/* Sidebar - Start */

#story-title {
  display: none;
}

#story-version {
  color: rgb(90 90 90);
  font-size: 12px;
  font-weight: normal;
  line-height: 1;
}

#story-caption {
  margin-bottom: 6.5em;
}

#ui-bar-footer {
  background-color: rgb(34, 34, 34);
  position: absolute;
  bottom: 0;
  margin: 0;
  padding: .5em 1.5em 0 1em;
  text-align:center;
}

#ui-bar-footer span {
  display: inline-block;
}

a.footer-element {
  margin: 0 0.4em;
}

/* Dividers - Start */
.divider {
  position: relative;
  /*margin-top: 90px;*/
  height: 1px;
}

.div-transparent:before {
  content: "";
  position: absolute;
  top: 0;
  left: 5%;
  right: 5%;
  width: 90%;
  height: 1px;
  background-image: linear-gradient(to right, transparent, rgb(255,255,255), transparent);
}

.div-arrow-down:after {
  content: "";
  position: absolute;
  z-index: 1;
  top: -7px;
  left: calc(50% - 7px);
  width: 14px;
  height: 14px;
  transform: rotate(45deg);
  background-color: #222;
  border-bottom: 1px solid rgb(255,255,255);
  border-right: 1px solid rgb(255,255,255);
}

.div-dot:after {
  content: "";
  position: absolute;
  z-index: 1;
  top: -9px;
  left: calc(50% - 9px);
  width: 18px;
  height: 18px;
  background-color: goldenrod;
  border: 1px solid rgb(48,49,51);
  border-radius: 50%;
  box-shadow: inset 0 0 0 2px #222,
          0 0 0 4px #222;
}
/* Dividers - End */

/* Sidebar - End */

/* Link Styles - Start */
a {
  color: #ffa000;
  background-color: transparent;
  text-decoration: none;
}

a:hover {
  color: #c67100;
  background-color: transparent;
  text-decoration: none;
}

/* Link Styles - End */

ul.actions {
  margin-top: 0;
  padding-left: 0.5em;
}

ul.actions li {
  margin-bottom: 20px;
  padding: 0 0 0 25px;
  position: relative;
  list-style: none;
}

ul.actions li::before {
  background-image: url("images/quote.png");
  background-repeat: no-repeat;
  background-position: left top 6px;
  background-size: 15px;
  content: "";
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
  pointer-events: none;
}

/* fixup for debug/test mode */
.file-url ul.actions li::before {
  background-image: url("https://magestower.slethstories.com/images/quote.png");
}


/**
 * ==============================================
 * Dot Flashing
 * ==============================================
 */
.dot-flashing {
  position: relative;
  margin-left: 6.5px;
  width: 4px;
  height: 4px;
  border-radius: 5px;
  background-color: #ffa000;
  color: #ffa000;
  animation: dotFlashing 1s infinite linear alternate;
  animation-delay: .5s;
}

.dot-flashing::before, .dot-flashing::after {
  content: '';
  display: inline-block;
  position: absolute;
  top: 0;
}

.dot-flashing::before {
  left: -6.5px;
  width: 4px;
  height: 4px;
  border-radius: 5px;
  background-color: #ffa000;
  color: #ffa000;
  animation: dotFlashing 1s infinite alternate;
  animation-delay: 0s;
}

.dot-flashing::after {
  left: 6.5px;
  width: 4px;
  height: 4px;
  border-radius: 5px;
  background-color: #ffa000;
  color: #ffa000;
  animation: dotFlashing 1s infinite alternate;
  animation-delay: 1s;
}

@keyframes dotFlashing {
  0% {
    background-color: #ffa000;
  }
  50%,
  100% {
    background-color: #ebe6ff;
  }
}

/*====
 * css-only scroll shadow
 *
 * Normally, the scroll shadow uses background-attachment: scroll,
 * but that requires restructuring the html so that an element
 * other than body has the scrollbar.
 *
 * Instead of doing that, we use background-attachment: fixed,
 * and adjust the scroll-shadow size and position when #story
 * doesn't fill the whole viewport.
 *
 * (It might be better to restructure the html.)
 */

#story {
  background-attachment: local, local, fixed, fixed;
  background-image: 
    linear-gradient(#111111 33%, rgba(17,17,17, 0)),
    linear-gradient(rgba(17,17,17, 0), #111111 66%),
    radial-gradient(farthest-side at 50% 0, rgba(255,160,0, 0.6), rgba(0,0,0,0)),
    radial-gradient(farthest-side at 50% 100%, rgba(255,160,0, 0.6), rgba(0,0,0,0));
  background-position-x: 0, 0, 50%, 50%;
  background-position-y: 0, 100%, 0, 100%;
  background-repeat: no-repeat;
  background-size: 100% 60px, 100% 60px, 50% 20px, 50% 20px;
}

/* move scroll-shadow center when ui-bar is visible */
#ui-bar:not(.stowed) ~ #story {
  background-position-x: 0, 0, calc(19em + (100% - 19em) / 2), calc(19em + (100% - 19em) / 2);
}

/* move scroll-shadow below var-info (collapsed) */
.debugging #story {
  background-position-y: 60px, 100%, 45px, 100%;
}

/* move scroll shadow below return-head */
#story:has(#return-head) {
  background-position-y: 90px, 100%, 60px, 100%;
}

/* move scroll shadow below var-info (collapsed) and return-head */
.debugging #story:has(#return-head) {
  background-position-y: 60px, 100%, 85px, 100%;
}</style><script role="script" id="twine-user-script" type="text/twine-javascript">Config.saves.id = 'sleth-mages-tower-2';
Config.ui.stowBarInitially = !session.get("show-sidebar");

// enable debug mode if URL has ?debug
if (/[?&]debug\b/.test(location.search)) {
  Config.debug = true;
  setup.debug = true;
  setup.tester = true;
}

// enable tester mode if URL has ?tester
if (/[?&]tester\b/.test(location.search)) {
  setup.tester = true;
}

if (!setup.tester) {
  Config.history.controls = false;
}

if (setup.debug) {
  // start with debug view off
  setTimeout(() => DebugView.disable());
  // add debugging class for css
  $('html').addClass('debugging');
}

// images workaround for local testing
if (location.protocol === 'file:' && /-[0-9a-f]{12}\.html$|[/]Twine[/]Stories[/]/.test(location.pathname)) {
  // base for html images (this happens too late for css images)
  $('head').prepend('<base href="https://magestower.slethstories.com/">');
  // add file-url class for css
  $('html').addClass('file-url');
}

l10nStrings.restartTitle = "Restart";
l10nStrings.restartPrompt =
  "Restart will return you to the beginning of the story."
  + "<br><br>"
  + "Your unlocked endings and keywords will remain unlocked."
  + "<br><br>"
  + "Are you sure you want to restart?";
l10nStrings.restartOk = "Restart";
l10nStrings.restartCancel = "Cancel";

$(document.head).append("<link rel='icon' href='images/mt_icon_tr.png'>");

$(document).on(':passagestart', function (ev) {
  $("#ui-bar-toggle").on("click", () => {
    setTimeout(() => {
      session.set("show-sidebar", !UIBar.isStowed());
    });
  });
});</script><tw-tag name="key" color="yellow"></tw-tag><tw-tag name="under-construction" color="red"></tw-tag><tw-tag name="big-mood" color="purple"></tw-tag><tw-tag name="has-hole" color="orange"></tw-tag><tw-tag name="inclusion" color="blue"></tw-tag><tw-tag name="incomplete" color="red"></tw-tag><tw-tag name="ivex-advances" color="orange"></tw-tag><tw-tag name="section-end" color="purple"></tw-tag><tw-tag name="text" color="blue"></tw-tag><tw-tag name="ending" color="orange"></tw-tag><tw-tag name="init" color="blue"></tw-tag><tw-tag name="must-fix" color="orange"></tw-tag><tw-tag name="section-start" color="green"></tw-tag><tw-tag name="action-point" color="blue"></tw-tag><tw-tag name="ivex-repeats" color="yellow"></tw-tag><tw-tag name="maybe-password" color="purple"></tw-tag><tw-tag name="is-menu" color="yellow"></tw-tag><tw-tag name="roam-stop" color="red"></tw-tag><tw-passagedata pid="1" name="StoryAuthor" tags="" position="200,200" size="100,100">&lt;&lt;nobr&gt;&gt;
by &lt;a href=&quot;http://www.slethstories.com/&quot; target=&quot;_blank&quot;&gt;Sleth&lt;/a&gt;
&lt;div id=story-version&gt;
  v2.20220929.0
&lt;/div&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="2" name="StoryBanner" tags="" position="325,200" size="100,100">&lt;img src=&quot;images/logo_tr.png&quot; width=&quot;220&quot;&gt;\
&lt;div class=&quot;divider div-transparent div-arrow-down&quot;&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="3" name="StoryDisplayTitle" tags="" position="450,200" size="100,100">The Mage&#39;s Tower (Nero)</tw-passagedata><tw-passagedata pid="4" name="StoryInit" tags="inclusion" position="575,200" size="100,100">&lt;&lt;script&gt;&gt;

/** globals for Mage&#39;s Tower */
window.MT = {};

/** Evaluate all passages that match regex. */
function runInit(regex) {
  const inits = Story.lookupWith(p =&gt; regex.test(p.title));
  const errors = [];
  inits.forEach(p =&gt; {
    try {
      $.wiki(p.text);
    } catch (e) {
      e.message = `[${p.title}]: ${e.message}`;
      errors.push(e);
    }
  });
  if (errors.length) {
    throw errors[0];
  }
}

runInit(/^g0boot /);
runInit(/^g0init /);

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="5" name="StoryMenu" tags="inclusion" position="700,200" size="100,100">/* StoryMenu is rendered specially by SugarCube. *only* links are used. */

&lt;&lt;mta &quot;g1m Archives&quot;&gt;&gt;Archives&lt;&lt;/mta&gt;&gt;
&lt;&lt;mta &quot;g1m Transcript&quot;&gt;&gt;Transcript&lt;&lt;/mta&gt;&gt;
&lt;&lt;mta &quot;g1m Credits&quot;&gt;&gt;Credits&lt;&lt;/mta&gt;&gt;

&lt;&lt;if setup.tester&gt;&gt;
  &lt;&lt;mta &quot;g1m Notes All&quot;&gt;&gt;&amp;#x1f527; Notes&lt;&lt;/mta&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if setup.debug&gt;&gt;
  &lt;&lt;mta &quot;g1m Goto&quot;&gt;&gt;&amp;#x1f527; Goto&lt;&lt;/mta&gt;&gt;
  &lt;&lt;mta &quot;g1m Dashboard&quot;&gt;&gt;&amp;#x1f527; Dashboard&lt;&lt;/mta&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="6" name="d0a Drekkar Ending Index" tags="inclusion" position="700,1900" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;script&gt;&gt;
  const T = State.temporary;
  const V = State.variables;
  T.interrogation = V.xd_InterrogationMild || V.xd_InterrogationRough;
  T.enthrallment = V.xd_EnthrallmentQuick || V.xd_EnthrallmentLion;
  T.extraction = V.xd_ExtractionGentle || V.xd_ExtractionForceful;
&lt;&lt;/script&gt;&gt;

&lt;&lt;arc-ending _interrogation
  [[Bad Ending: Interrogation|g1m Archives Entry]]
  &quot;&quot;
  &quot;$g_arcEntry = { name: $md_arcInterrogationVariant, freeze: $md_arcInterrogationFreeze === &#39;y&#39; }&quot;
&gt;&gt;
  Interrogation by the hands of the wizard is the first step
  that awaits those that cannot escape his contraptions...
&lt;&lt;arc-variants&gt;&gt;
  &lt;&lt;arc-select md_arcInterrogationFreeze &quot;Variant:&quot;&gt;&gt;
    &lt;&lt;arc-option y &quot;Freeze&quot; $xd_InterrogationFreeze&gt;&gt;
      Ivex has a special treatment for northern wolves
      that like the cold...
    &lt;&lt;arc-option n &quot;Shock&quot; $xd_InterrogationShock&gt;&gt;
      Ivex has a special treatment for southern wolves
      that hate the cold...
  &lt;&lt;/arc-select&gt;&gt;

  &lt;&lt;arc-select md_arcInterrogationVariant &quot;Variant:&quot;&gt;&gt;
    &lt;&lt;arc-option xd_InterrogationMild &quot;Mild&quot; $xd_InterrogationMild&gt;&gt;
      Ivex treats those that choose collaboration
      over defiance with &quot;kindness&quot;...
    &lt;&lt;arc-option xd_InterrogationRough &quot;Rough&quot; $xd_InterrogationRough&gt;&gt;
      Ivex has a special disdain for those that dare
      defy his wishes...
  &lt;&lt;/arc-select&gt;&gt;
&lt;&lt;/arc-ending&gt;&gt;

&lt;&lt;arc-ending _enthrallment
  [[Bad Ending: Enthrallment|g1m Archives Entry]]
  &quot;&quot;
  &quot;$g_arcEntry = { name: $md_arcEnthrallmentVariant }&quot;
&gt;&gt;
  Sometimes a magical accessory is for more than just the looks...
&lt;&lt;arc-variants&gt;&gt;
  &lt;&lt;arc-select md_arcEnthrallmentVariant &quot;Variant:&quot;&gt;&gt;
    &lt;&lt;arc-option xd_EnthrallmentQuick &quot;Quick&quot; $xd_EnthrallmentQuick&gt;&gt;
    &lt;&lt;arc-option xd_EnthrallmentLion &quot;Lion&quot; $xd_EnthrallmentLion&gt;&gt;
      Engaging in arousing activities while overtaken
      by previous magical lust makes some things
      impossible to resist...
  &lt;&lt;/arc-select&gt;&gt;
&lt;&lt;/arc-ending&gt;&gt;

&lt;&lt;arc-ending _extraction
  [[Bad Ending: Extraction|g1m Archives Entry]]
  &quot;&quot;
  &quot;$g_arcEntry = { name: $md_arcExtractionVariant }&quot;
&gt;&gt;
  Touching unknown magical things always ends badly...
&lt;&lt;arc-variants&gt;&gt;
  &lt;&lt;arc-select md_arcExtractionVariant &quot;Variant:&quot;&gt;&gt;
    &lt;&lt;arc-option xd_ExtractionGentle &quot;Gentle&quot; $xd_ExtractionGentle&gt;&gt;
      The slime is fine-tuned to reward
      those that let it do its work...
    &lt;&lt;arc-option xd_ExtractionForceful &quot;Forceful&quot; $xd_ExtractionForceful&gt;&gt;
      The slime is fine-tuned to go rougher
      on those that insist on fighting it...
  &lt;&lt;/arc-select&gt;&gt;
&lt;&lt;/arc-ending&gt;&gt;

&lt;hr&gt;
&lt;&lt;arc-ending $xd_IvexPunishment
  [[Ending: Punishment|g1m Archives Entry]]
  &quot;&quot;
  &quot;$g_arcEntry = { name: &#39;xd_IvexPunishment&#39; }&quot;
&gt;&gt;
  The spoils of victory...
&lt;&lt;/arc-ending&gt;&gt;

&lt;&lt;arc-ending $xd_IvexEnthrallment
  [[Ending: A New Servant|g1m Archives Entry]]
  &quot;&quot;
  &quot;$g_arcEntry = { name: &#39;xd_IvexEnthrallment&#39; }&quot;
&gt;&gt;
  New punishment ideas might come to the adventurer
  if he has experienced terrible things in different timelines...
&lt;&lt;/arc-ending&gt;&gt;

&lt;&lt;arc-ending $xd_IvexExtraction
  [[Ending: Energy Supply|g1m Archives Entry]]
  &quot;&quot;
  &quot;$g_arcEntry = { name: &#39;xd_IvexExtraction&#39; }&quot;
&gt;&gt;
  New punishment ideas might come to the adventurer
  if he has experienced terrible things in different timelines...
&lt;&lt;/arc-ending&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="7" name="d1a Alarm" tags="" position="5300,5550" size="100,100">&lt;&lt;nobr&gt;&gt;

Thankfully, the panther then lets go of the wolf entirely. Before turning towards the door, Drekkar can see that Ivex is frowning.

?P
&quot;How unfortunate,&quot; the mage finally says. &quot;An interruption. Right when things were about to get interesting! What a busy day...&quot;

?P
Despite everything, Ivex does not seem worried in the least. He glances back towards the naked, bound wolf and then his eyes trail down to the wolf&#39;s member. As much as Drekkar tries to will it down, his erection still stands there between his legs as a shameful display.

?P
&quot;It looks like I have no choice but to continue this after I am done dealing with the new guest.&quot; Ivex looks at the candle, then at the wolf.

?P
&quot;Perhaps that is for the best. It might be a little while, but by the time I return, you will be more than ready for our fun. It will be interesting to see...&quot; The mage thinks for a second, then chuckles to himself. &quot;Yes, this might indeed be good. It will be fun.&quot;

?P
The panther then pulls out a red gemstone from within his cloak. It looks oddly familiar to the wolf, but he can&#39;t remember where he could have seen one like that before.

?P
Ivex then raises it up in the air and whispers a word the wolf can&#39;t quite make out.

?P
Then, poof. In the blink of an eye, the mage disappears, leaving Drekkar alone. Bound, naked, erect and alone.

?P
[[Continue|d2a Alone]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="8" name="d1a Awakened" tags="" position="1100,5450" size="100,100">&lt;&lt;nobr&gt;&gt;

&quot;Finally awake,&quot; the panther continues, &quot;most people put up more of a fight when they are foolish enough to hunt me.&quot;

?P
The wolf&#39;s eyes follow the panther, still having trouble focusing properly, but slowly the warrior regains his proper sight. For the first time, the wolf is able to see that the cross he&#39;s bound to looks out of place in some kind of [[office|d1a Office Description]].

?P
Drekkar&#39;s eyes do narrow, however, when the mage casually pulls up the wolf&#39;s worn travel bag. After shoving his paw into it and rummaging through the wolf&#39;s backpack for a moment, the panther pulls out a piece of paper.

?P
The wolf&#39;s ears fold back for a moment as he recognizes it. The panther is holding out the bounty poster with his own face on it. The writing on it is clear, too:

?P
WANTED: DEAD OR ALIVE

?P
IVEX THE MAGE
&lt;br&gt;
3,000 GOLD REWARD

?P
The panther then lets go of the piece of paper, but instead of falling down... it hovers in the air for a moment. Then a movement of the hand above it makes it suddenly burst on fire. The wolf recoils from it and within a split second, only small ashes of what was once the bounty information remain.

?P
For the first time, the wolf is able to take a good look at the feline mage, [[Ivex|d1a Ivex Description]].

?P
&quot;At first I wasn&#39;t a fan of these bounties, you know,&quot; Ivex continues, &quot;but as time went on, I found that it is in fact quite useful. Every now and then it delivers a free adventurer of the likes of you, right to my paws.&quot;

?P
The panther opens a cocky grin.

?P
&quot;The reward, however, is quite substantial. I do wonder who exactly hired you to find me, and how you managed to reach my location. I&#39;d very much like to know that before I decide what to do with you.&quot;

?P
The wolf&#39;s narrow eyes focus on the panther. Bound in an unknown location and at the wizard&#39;s mercy, the lupine warrior knows that the situation isn&#39;t good. Still, to just give out the name and location of the Wayward Adventurer Guild would put all of them in danger, to say the least...

?P
The panther stares at the wolf expecting an answer.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[&#39;&quot;You won\&#39;t get anything out of me!&quot;&#39;|d1a Refusal]]&lt;/li&gt;
  &lt;li&gt;[[&#39;&quot;...If I tell you what you want to know, then what?&quot;&#39;|d1a Consideration]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="9" name="d1a Candle" tags="" position="4700,5500" size="200,200">&lt;&lt;nobr&gt;&gt;

...a candle.

?P
It doesn&#39;t look like an ordinary candle, though. Instead of white, it is of a bright red color, and its high craftsmanship shows. The candle is adorned with ridges and ledges across its length. It also glistens, as if it was covered in a thin layer of something shiny all the way to its wick.

?P
Ivex handles it with care, pulling out a candleholder and throwing a smirk towards the bound wolf. After settling the candle down on the desk nearby, the mage then waves his hand over his face, and, out of nowhere again, a piece of cloth appears to cover his mouth and nose. From his eyes alone, Drekkar can see his grin remains, however.

?P
From the tip of Ivex&#39;s finger, a small flame appears.

?P
&quot;This simple candle, my adventuring friend, will be your downfall. Over the years I have refined many methods of torture over my subjects and I have found that the simplest, most base desires are the ones that work best.&quot; The mage&#39;s voice is dripping with a twisted excitement as he says that. No wonder he was deemed so dangerous!

?P
The wolf&#39;s paws curl into fists in its bonds as Ivex&#39;s flame approaches the candle. When it lights up, Drekkar flinches, almost expecting something grand to happen, but... there is nothing. At least there is nothing at first.

?P
With how sensitive the wolf&#39;s nose is, it doesn&#39;t take long for it to pick it up. The candle&#39;s scent hovers around the air and it smells... delightful. A flowery scent that, as it penetrates the wolf&#39;s nose, almost feels somehow... spicy?

?P
Noticing how Ivex adjusts the cloth over his nose, however, Drekkar quickly realizes the truth. The mage is trying not to breathe it, which means...

?P
Drekkar quickly holds his breath, but Ivex just laughs at that.

?P
&quot;Adorable. You can try to hold on to your breath, but eventually, you will breathe it in. Then, slowly but surely...&quot;

?P
The panther approaches again.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[&quot;Whatever you&#39;re trying to do, it won&#39;t work!&quot; Keep holding his breath in defiance.|d1a Hold Breath Defiantly]]&lt;/li&gt;
  &lt;li&gt;[[He has a point. Breathe out and at least give him a warning growl.|d1a Growl Defiantly]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="10" name="d1a Consideration" tags="" position="1275,5375" size="100,100">&lt;&lt;nobr&gt;&gt;

/* cspell:disable-next-line */
&quot;Aahh...
the good boy type,&quot; the panther muses. &quot;I am ever so glad. Or am I? Perhaps we won&#39;t have too much trouble here after all.&quot;

?P
The panther took a step forward and opened a sinister smile. &quot;Unfortunately, I regret to say that regardless of your collaboration, you won&#39;t be getting out of here. I have plans for you.&quot;

?P
The wolf&#39;s eyes narrow towards the mage.

?P
&quot;Don&#39;t get me wrong, though! Collaborating with me is still very much in your best interest. It will reduce the hardship you will go through significantly.&quot;

?P
With a spring to his step, the panther approaches, closing in the last distance between him and the wolf.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Growl at Ivex.|d1a Molesting]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="11" name="d1a Drekkar Start" tags="section-start" position="700,5400" size="200,200">&lt;&lt;nobr&gt;&gt;

Drekkar&#39;s muscles, usually his most powerful weapon, ache. They feel stiff. An aching to stretch them comes upon the big wolf, but his body is only just recovering its proper responses. Drekkar lets out another tired groan. This feels worse than his last hangover...

?P
&quot;Last chance, buddy. Wake up, or else...&quot; the voice says again. The wolf can hear a mix of amusement and impatience in it...

?P
&lt;ul class=actions&gt;
  &lt;li&gt;[[Make an effort to wake up.|d1a Soft Awakening]]&lt;/li&gt;
  &lt;li&gt;[[...Cling to the comfort of sleep.|d1a Rough Awakening]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="12" name="d1a Further Defiance" tags="" position="5125,5400" size="100,100">&lt;&lt;nobr&gt;&gt;

The seconds go by and Drekkar makes every effort to keep holding his breath. Eyes locked, the panther seems to take notice of the active defiance. It is with much satisfaction that the wolf can see his smile fading, even if just a little, in annoyance. The thought of irritating the cocky mage is enough to bring the bound wolf some pleasure in this terrible situation.

?P
Unfortunately, that pleasure soon becomes radiating, blinding pain. In a swift move, the panther&#39;s hand holding the wolf&#39;s balls closes in a tight grip. The wolf&#39;s sensitive nuts get squeezed inside the panther&#39;s relentless paw.

?P
Drekkar can no longer avoid it. With a gasp, what little air he still held is let out and the wolf is forced to breathe in a lungful of the spicy candle&#39;s air, if only to let out a silent gasp of pure agony.

?P
Ivex&#39;s smile returns, but it is seen through the tearing up of the bound wolf&#39;s eyes as the grip on his balls does not soften even when the wolf grits his teeth and lets out sharp breaths to endure the pain. Drekkar tries really hard to not put out a shameful display of submission, by holding out from whimpering, but the act of doing so takes a large toll on the wolf. Fuck breathing. It takes every effort of his being to endure the pain emanating from his crushed balls.

?P
After what feels like an eternity, Ivex finally loses his grip. He does so little by little, clearly delighted in the reaction he brought, and even after he finally lets go of the wolf&#39;s bruised nuts entirely, the mage still gives them a final painful flicker with his fingers that hurts enough to make the wolf flinch again.

?P
&quot;See how useless it is to defy me?&quot;

?P
Blinking the tears away from his eyes, the wolf can do little more than growl. Drekkar realizes, however, that he was left panting after the painful experience. The wolf works hard to stabilize and minimize his breathing, but how much of the mysterious candle&#39;s influence has he already taken in?

?P
Ivex&#39;s hand returns to the wolf&#39;s thigh. The invasive touch makes the wolf grow stiff again.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Give him a weak warning growl...|d1a Growl Defiantly]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;set $d_furtherDefiance = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="13" name="d1a Growl Defiantly" tags="" position="5150,5550" size="100,100">&lt;&lt;nobr&gt;&gt;

&quot;You look cute when you growl. The last defiant adventurer I had was a lion. He couldn&#39;t growl like you, but he sure as hell could roar. Oh, how he roared when he was in your place breathing in what you&#39;re breathing...&quot;

?P
Ivex lets out a small laugh. The candle continues to burn off to the side and the spicy smell seems stronger than before. Drekkar&#39;s canine nose can detect even the subtleties of the smell and, indeed, it smells like nothing he has ever felt before.

?P
&quot;Are you feeling it yet? It takes a little while to start working, but once it does... It grows stronger and stronger, and before you know it...&quot; The panther looks up at the wolf and grins. &quot;You know what? Why spoil the surprise, right?&quot;

?P
The panther&#39;s hand dares explore and toy around the wolf&#39;s vulnerable sheath. All Drekkar can do is helplessly pull against the bonds keeping his wrists bound.

?P
&quot;Don&#39;t touch me!&quot; the wolf growls, but of course, it is to no avail.

?P
Ivex touches the bound lupine anyway. The panther&#39;s fingers seem to take delight in exploring the surface of the wolf&#39;s furry sheath. His fingers trail over its surface, then much to the wolf&#39;s dismay, pull it back ever so slightly before prying inside. The wolf&#39;s dormant member feels the caress of the panther&#39;s more than invasive touch, and for some reason...

?P
It stirs. Something inside the wolf starts... heating up. It starts with his nose. It feels as if he&#39;s breathing pepper, for a warmth- no, a &lt;b&gt;heat&lt;/b&gt; envelops his nose and, slowly but surely, starts spreading through his body. It radiates from his chest, from his stomach, and it is very much felt between his legs as well.

?P
With Ivex teasing his sheath, it does not take very long for the wolf&#39;s member to start peaking. The panther takes absolute delight in that, pulling the helpless wolf&#39;s sheath back further to reveal more of it and tease its sensitive surface.

?P
The heat seems to grow worse by the second. As much as he tries to deny it, Drekkar&#39;s cock starts rising to the occasion, growing hard. Soon the wolf is at half-mast to the panther&#39;s relentless teasing.

?P
&quot;There we go,&quot; Ivex coos, &quot;you have no idea what I&#39;m going to put you through, wolf. When we&#39;re done, you will be begging-&quot;

?P
The panther&#39;s words cease suddenly when Ivex turns his head back in a sudden movement. He stares towards the office&#39;s door for a moment as if seeing something unexpected, but upon following his gaze, Drekkar sees nothing.

?P
[[Continue|d1a Alarm]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="14" name="d1a Hold Breath Defiantly" tags="" position="4975,5450" size="100,100">&lt;&lt;nobr&gt;&gt;

Drekkar keeps holding his breath, but it becomes harder to do so as Ivex steps towards him again. The feeling of vulnerability towards the panther grows tenfold when he is within the range of touch. Bound to the cross in a spread position, holding his breath and now completely naked, it feels even worse than before.

?P
&quot;You really are something else,&quot; the panther chuckles, &quot;thinking you can defy me. Most of them are regretting their actions and begging me to let them go at this point...&quot;

?P
The panther&#39;s hand returns to Drekkar&#39;s chest. This time, without the protection of clothing, the panther&#39;s paw gets to feel the wolf&#39;s bare fur.

&lt;&lt;if !$d_mage&gt;&gt;
  ?P
  That hand caresses Drekkar&#39;s powerful chest. Ivex clearly has a fascination for muscles, for the panther seems to take special delight in feeling the hardness of the wolf&#39;s pectorals, then pushing against his defined abdomen. It is hard to growl while holding his breath, but Drekkar sure as hell tries, resulting in a low rumble coming from his throat.

  ?P
  As always, it has no effect on the cocky mage. Bastard!
&lt;&lt;/if&gt;&gt;

?P
That hand, however, slowly trails down. The bound wolf tenses up and frowns with his breath still held when the mage&#39;s hand nonchalantly reaches between his legs. Ivex has no reservations about trailing his fingers over the wolf&#39;s bare sheath. With a low growl, Drekkar tries to pull against his bonds, shifting his hips to the side to avoid the mage&#39;s touch, but the panther&#39;s fingers easily follow.

?P
&quot;Your defiance is beyond useless,&quot; the panther says as his hand trails even lower to the wolf&#39;s balls. He closes his hand around them, holding them in a soft grip, and looks up at the wolf.

?P
Ivex gives a single order. &quot;Breathe.&quot;

?P
It &lt;i&gt;is&lt;/i&gt; becoming very hard for the wolf to keep holding his breath... Ivex locks eyes with the wolf, his expression neutral and unconcerned, but his grip on the wolf&#39;s balls remains.

&lt;&lt;if $d_roughAwakening&gt;&gt;
  ?P
  The all too recent memory of the sadistic mage squeezing the wolf&#39;s balls earlier returns. Drekkar recognizes the threat in Ivex&#39;s eyes as a promised consequence for not obeying. The wolf&#39;s body stiffens, his subconscious preparing for the possible pain in his most sensitive parts and a drive to do anything so that his balls stay safe, bubbles up.
  ?P
  Drekkar has years of training enduring pain, though. The thought of having his precious balls crushed makes even the powerful wolf warrior&#39;s tail curl a little, but the thought of giving in to that slimy fucking mage? That also twists the wolf&#39;s stomach.
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Defy Ivex and keep holding his breath.|d1a Further Defiance]]&lt;/li&gt;
  &lt;li&gt;[[There is no choice. Breathe out and at least give him a warning growl.|d1a Growl Defiantly]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="15" name="d1a Ivex Description" tags="" position="1100,5600" size="100,100">&lt;&lt;nobr&gt;&gt;

As advertised, Ivex is a black panther.

?P
The wolf had never seen the mage outside of the drawings in his wanted poster, but on those he looked to be more on the slim side, as most magic users are. The mage that stands before the bound adventurer, however, is not slim at all. Though not extremely muscular, there are clear outlines of them on the visible parts of his arms and legs. His chest is broad, and the panther is remarkably tall for a feline.

?P
With a sleek, typically feline muzzle that displays the whitest teeth and fangs as he smiles, Ivex has an impressive figure, especially for a mage.

?P
Unlike most mages as well, Ivex doesn&#39;t wear robes, but rather regular clothing that seems to be of very noble quality. A white shirt, complete with a brown vest accompanied by a set of black pants that go well with his dark fur. Just like most, the feline does not wear any footwear, instead letting his feline paws free and bare on the floor. The thing that draws the most attention, however, is the red cape the mage has draped over his shoulders. It is something he clearly wears for show rather than utility, although the clip holding the cloak close to his neck glows with an expensive-looking purple gemstone embedded into it.

?P
[[Return|d1a Awakened]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="16" name="d1a Molesting" tags="" position="1450,5450" size="100,100">&lt;&lt;nobr&gt;&gt;

Drekkar opens a warning growl, but even though the wolf tugs against the restraints of the cross he&#39;s bound to, there is nothing that can be done against the feeling of extreme vulnerability. The panther, the enemy, stands right there, well within the range of touch, and all the wolf can do is remain there with his limbs spread wide.

?P
&quot;Look at you, wolf. Such a powerful warrior...&quot; The panther licks his lips. His hand comes to the wolf&#39;s chest. His touch feels invasive as he places his hand upon Drekkar&#39;s broad pectorals and feels it up. All Drekkar can do is snarl once more, but the wolf knows that his growling is nothing but a fake threat at that moment. There has to be a way to turn the tables on that damned mage, but how...?

?P
&lt;&lt;if $d_mage&gt;&gt;

  The panther&#39;s hand traces down around the lean wolf&#39;s hips. The long robes Nero wears don&#39;t feel like enough to ward off the panther&#39;s hands. Nero&#39;s first reflex is to attempt some kind of incantation. Though he would need his hands to perform the proper gestures for any kind of significant magic, one hand can be enough to at least ward the panther off, but upon attempting it...
  ?P
  Nothing happens.
  ?P
  It&#39;s as if magic does not exist in this place, even though, at the same time, it is clearly surrounding them in its entirety. What is this place?
  ?P
  &quot;A powerful mage like you, full of knowledge and yet completely disarmed. It must be frustrating, no? Yet you don&#39;t have to worry. I have means to make great use of your trained mastery over magic.&quot;
  ?P
  ((continue mage section))

&lt;&lt;else&gt;&gt;

  The panther&#39;s hand trails up over the warrior&#39;s plain shirt towards the bound wolf&#39;s biceps. Those being uncovered, given his short sleeves, the mage has full liberty to feel Drekkar&#39;s fur alongside the hardened muscles beneath. The wolf ups his growling and shows some teeth, but the panther all but ignores it, not intimidated in the least.
  ?P
  &quot;Such a strong warrior. You are my favorite kind to keep around. I do so love the sight of your well-trained bodies...&quot; the panther says all too suggestively.
  ?P
  &quot;Get your dirty paws off me!&quot; Drekkar growls. &quot;When I break out of here, I&#39;m gonna make you eat dirt! I&#39;ll fucking break you like a twig!&quot;
  ?P
  Ivex only smiles. He doesn&#39;t even retract his damned hand from the wolf&#39;s arm, instead taking a moment to feel his muscles one more time before he finally does.

&lt;&lt;/if&gt;&gt;

?P
&quot;That&#39;s cute. Thinking you can pull off threats when you&#39;re in my domain. In my own creation.&quot; The panther let out a small laugh. &quot;Why don&#39;t I show you some of my power? That way you&#39;ll have a better idea of just how much more than you can chew you tried to bite with that little wolf maw of yours.&quot;

?P
Sounding arrogant and cocky as always, the mage takes a step back. Drekkar feels some relief at that, at least, until the panther raises one of his hands...

?P
And simply snaps his fingers.

?P
[[Continue|d1a Naked]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="17" name="d1a Naked" tags="" position="1575,5450" size="100,100">&lt;&lt;nobr&gt;&gt;

In an instant, all the wolf feels is... bare.

?P
With an urgent look, Drekkar looks down and realizes that, just like that, without moving an inch from his bound state, he now stands there not only bound, but also completely and entirely &lt;b&gt;naked&lt;/b&gt;.

?P
&quot;What the-?!&quot; the wolf exclaims. In a shameful reflex, his tail tries to curl between his legs to hide his modesty, but even that is hard with his back pressed against the cross he&#39;s bound to.

?P
&quot;There we go. I like the sight,&quot; Ivex comments. The damned panther licks his lips again while his eyes shamelessly move downward.

?P
Drekkar&#39;s eyes can&#39;t help but follow. His entire body lays exposed, with the highlight of this indecency being the hefty sheath and low-hanging furry balls between his legs. With his limbs spread as they are, it&#39;s as if he&#39;s showing them off without meaning to. As an adventurer of renown, Drekkar is definitely not used to finding himself in such a humiliating situation, and it shows. The wolf&#39;s ears can&#39;t help but grow hot as they lower themselves despite his best efforts.

&lt;&lt;if $d_mage&gt;&gt;
  ?P
  How did Ivex do that, though?! There was no incantation cast, no magic flowing through. Magic can achieve much, but blinking things out of existence just like that? Nero knows damn well that even a teleportation spell would have to be extremely precise to target nothing but his clothes! And done in a heartbeat just like that? Did he use arcane circles? Illusion? No, impossible to use those with just the snap of a finger. The process doesn&#39;t seem to tax Ivex either.
  ?P
  It&#39;s as if... as if reality itself bends to his will.
  ?P
  Is he really that powerful of a mage?
&lt;&lt;/if&gt;&gt;

?P
&quot;I like things much better this way,&quot; the depraved panther says. &quot;You are going to tell me everything I want to know one way or another, but I figure we might as well make it fun, right?&quot;

?P
The panther then turns away, thankfully, but to reach into one of the cabinets surrounding them to pull out...

?P
[[Continue|d1a Candle]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="18" name="d1a Office Description" tags="" position="1100,5300" size="100,100">&lt;&lt;nobr&gt;&gt;

The mage&#39;s office does not look special in itself, but it is rather curious.

?P
The office is sleek and fancy with luxurious furniture. Strange objects adorn the cabinets here or there, but most of all the wolf can see bookcases filled with books about magic. At its center and off to the wolf&#39;s side, a grandiose desk with the basics can be seen: parchment, ink, quill and stacks of papers and letters spread over the table.

?P
The place looks like a very regular office, so perhaps what stands out the most is the bondage equipment the wolf is tied to at its very center. Not something you&#39;d expect to see in an office, but who knows what goes inside a crazy mage&#39;s head?

?P
Another curious aspect to the wolf is that, off to the side, he can see a window if he cranes his neck just enough. Outside, however, there is nothing but a blue sky, hinting that the office might be up high. Where did the mage bring him?

?P
[[Return|d1a Awakened]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="19" name="d1a Refusal" tags="" position="1275,5525" size="100,100">&lt;&lt;nobr&gt;&gt;

Much to Drekkar&#39;s delight, the reaction at least seems to wipe that smirk out of the panther&#39;s face for a second. Only for a second, though, as a different kind of smile opens up. A smile that makes the wolf&#39;s ears lower themselves even if just a little.

?P
&quot;I was kind of hoping you would say that. I enjoy the brave types very much.&quot; The panther approaches, closing in the last distance between him and the wolf.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Growl at Ivex.|d1a Molesting]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="20" name="d1a Rough Awakening" tags="" position="950,5525" size="100,100">&lt;&lt;nobr&gt;&gt;

Sleeping is easier. The wolf groans, but goes limp again. The sweet embrace of darkness feels good. Maybe just for a little while longer...

?P
&quot;I said &#39;wakey wakey&#39;...&quot; the voice says again, but it seems to be growing distant once more...

?P
And then the wolf feels something different. A grab, right above his clothes, clutching a part no one should be allowed to touch. His balls. That alone spurs him awake with a sense of urgency, but what follows...

?P
The grip on the wolf&#39;s balls tightens suddenly. It becomes a hard squeeze, pressing on the sensitive nuts from all sides and pulling the lupine from the comfort of sleep in a fast and rough manner. With a gasp, the wolf&#39;s eyes snap open, his mind reeling to make sense of things while processing the pain at the same time.

?P
His eyes take a while to focus, but is it because of the drowsiness or because of the tearing up from the pain?

?P
The pain in his balls does not subside. It echoes, traveling up from his groin through his whole body. His first instinct is to move to stop it, but as he tries that, he quickly becomes aware of the leather bindings around his wrists, ankle and mid-section.

?P
It also becomes obvious that the wolf is not lying down, but rather standing. The very bindings that kept him propped up before now keep him from being able to make the pain go away.

?P
As the wolf&#39;s vision focuses, he lets out a yelp. His balls feel crushed. When he does, though, the grip finally loosens. There&#39;s another playful squeeze there that is very much felt, before the hand gripping his crotch finally lets go.

?P
&quot;There we go. We&#39;re off to a fun start,&quot; the voice says in mockery.

?P
Shifting his teary eyes to the left, the wolf sees &lt;b&gt;him&lt;/b&gt; standing there.

?P
He&#39;s a panther. And he&#39;s the mage whose face the wolf had seen in the bounty posters.

?P
He is also smirking triumphantly.

?P
[[Continue|d1a Awakened]]

&lt;&lt;set $d_roughAwakening = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="21" name="d1a Soft Awakening" tags="" position="950,5375" size="100,100">&lt;&lt;nobr&gt;&gt;

It takes some effort, but the wolf opens his eyes. It takes a few seconds to regain their focus. At the same time, the stiffness of his body feels worse than ever. This nap was anything but comfortable.

?P
As his vision clears, Drekkar realizes that he&#39;s not quite lying down. In fact, he&#39;s pretty much standing up. The feeling of the leather wrappings around his wrists, ankles, and mid-section becomes obvious upon his first attempts to move with a groan.
In fact, the warrior&#39;s powerful frame barely fits on the cross with the wrapping feeling tight, especially the one around his broad chest.
They were what was keeping him propped up on the vertical cross he&#39;s bound to, but now they are what keeps him trapped to it.

?P
Panic starts settling in. The adrenaline makes the waking process faster. What&#39;s going on?

?P
&quot;There we go. We&#39;re off to a good start,&quot; the voice says with amusement.

?P
Shifting his eyes to the left, the wolf sees &lt;b&gt;him&lt;/b&gt; standing there.

?P
He&#39;s a panther. And he&#39;s the mage whose face the wolf had seen in the bounty posters.

?P
He is also smirking triumphantly.

?P
[[Continue|d1a Awakened]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="22" name="d2a Alone" tags="" position="6650,5600" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;checkpoint-save d_checkpoint1 &quot;Ivex&#39;s Disappearance&quot;&gt;&gt;

With the panther mage gone, all that remains is silence. The wolf finds himself alone in the office and bound at its center like some sort of depraved display. Looking down at himself, Drekkar&#39;s ears fold back a little.

?P
Jutting from his sheath, his erection stands at full mast now. It even throbs in the air every now and then. The canine-shaped, tapered member practically glows in its bright red, veiny shape. Even the wolf&#39;s sheath starts to bulge a little as his knot threatens to start growing as well.

?P
Drekkar grits his teeth. Ivex is no longer there to forcefully stimulate him. Then, why does he feel even more aroused than before? As the wolf takes in another breath while pondering, the answer to that question becomes more obvious.

?P
The smell. Drekkar&#39;s eyes shift towards the candle still burning off to the side. That smell, the spiciness of it... its heat that radiates from his nose... When the wolf focuses, he can feel it inside his body. The heat feels like a flame that is slowly being fed more wood, and its source...

?P
The wolf&#39;s member throbs again in the air.

?P
Somehow, the knowledge that that candle is somehow fostering his arousal makes it worse. A bead of pre-cum shows at the tip of the wolf&#39;s member and, with each passing minute, his arousal grows. Looking down at it, an urge to touch it, to feel something, to &lt;b&gt;fuck&lt;/b&gt; something starts growing in him, but Drekkar shakes his head to shrug it off.

?P
The bound wolf realizes that he&#39;s able to suppress this for now, but if he stays there, bound where he is and breathing in the candle&#39;s scent, who knows what&#39;ll happen to him? Ivex&#39;s words were cryptic, but they hinted at an outcome the lupine did not wish for.

?P
He has to find a way to escape. Ivex being gone gives him his best chance! But... how? And can it even be done before the candle&#39;s influence becomes too much?

?P
[[Continue|d2a The Candle]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="23" name="d2a Arousal Level 1" tags="inclusion" position="7400,5950" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf&#39;s forced arousal feels...
&lt;span class=arousal-1&gt;distracting&lt;/span&gt;.

?P
Avoiding taking deep breaths, Drekkar just tries his best not to think about the constant distraction throbbing between his legs. He can seldom help glancing down towards it, though. It&#39;s always within his field of vision and trying to jump to the front of his mind.

?P
The wolf&#39;s cock. It stands there, fully aroused. His knot has inflated some, although not completely, and having it still trapped inside his sheath brings the wolf some discomfort, but he tries not to think about that either.

?P
Small jolts of pleasure keep coming from his cock, though. Every time he breathes in, the warmth spreads towards him, and his cock flexes with life by itself. Never before had Drekkar felt so exposed, so at mercy of his own instincts, and yet...

?P
The bead of pre-cum lingering at the very tip of his firm arousal glistens as a constant threat of how those very instincts might betray him.

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="24" name="d2a Arousal Level 2" tags="inclusion" position="7525,5950" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf&#39;s forced arousal feels...
&lt;span class=arousal-2&gt;gripping&lt;/span&gt;.

?P
It&#39;s getting harder and harder to resist. After breathing so much of the candle&#39;s foul air, the heat coursing inside the wolf now feels constant. His fur feels too warm and an urge to pant, to let his tongue loll out is always there, but he resists it to avoid breathing even more of the cursed affliction.

?P
The wolf&#39;s cock reflects his increased state of arousal. It stands rock hard, as erect as the wolf ever remembers feeling it, and the small veins on its bright red surface bulge ever so slightly as well from how incredibly aroused he feels. It throbs more often than before, pulsing alongside the wolf&#39;s quickened heartbeat while, at the same time, serving as a beacon that promises unending pleasure to the wolf&#39;s affected mind. The urge to touch it, to feel his fingers trailing over that sensitive surface, is crushing.

?P
The lupine&#39;s knot bulges his sheath in a very uncomfortable way being pretty much fully grown. From its very tip, a tendril of pre-cum lingers. Another droplet soon comes, then slowly falls down to the floor below his bound self. It&#39;s constant now. Every instinct the wolf has is slowly turning towards one thing and one thing alone: sex.

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="25" name="d2a Arousal Level 3" tags="inclusion" position="7650,5950" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf&#39;s forced arousal feels...
&lt;span class=arousal-3&gt;powerful&lt;/span&gt;.

?P
Panting becomes inevitable. Every breath is like a new log thrown into a bonfire of arousal burning within the wolf. It&#39;s getting harder and harder to think, to keep his eyes away from his cock. It stands there, proud, pulsing. Pleasure without end promised, if he could just touch it...!

?P
The wolf&#39;s cock throbs constantly now. Its surface glistens against the candlelight, the wolf&#39;s length covered in his own pre-cum that now keeps oozing from his tip without pause. Some of it runs down his length and brings involuntary groans from the wolf, some of it drips down to the ground below. His knot has grown as big as it can get outside of a tie and, much to both the wolf&#39;s relief and dismay, it has managed to push his sheath back. The bulb of sensitive flesh, thick and large, pulses alongside the whole of the wolf&#39;s length just begging to be touched. To be shoved into something. Something tight, something that would-

?P
With a shake of his head, Drekkar tries his best to keep his focus away from his cock. It&#39;s incredibly hard to do so. Every odd thought in his head goes back to memories of him in his privacy with his paw around his member. Moving it up and down, stroking it, squeezing his knot, reaching the high of-

?P
It takes a growl to break himself off of it. With increased urgency, Drekkar realizes he has to find a way out soon, or else he will for sure be doomed, just as Ivex said.

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="26" name="d2a Arousal Level 4" tags="inclusion" position="7775,5950" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf&#39;s forced arousal feels...
&lt;span class=arousal-4&gt;overpowering&lt;/span&gt;.

?P
Every breath is fire. Drekkar can feel his eyes tearing up, but is it from the way his whole body burns up, or out of sheer frustration due to being unable to sate his lust?

?P
This is the cruelest of tortures. The wolf&#39;s breathing is quick and short and, even as he actively tries to slow it down, it&#39;s impossible now. His blood feels hot, his heart races and, most of all... his cock.

?P
It radiates pleasure without ceasing. Looking at it brings small tears to the wolf&#39;s eyes. His arms tug against the restraints constantly. An urge- no, a &lt;i&gt;need&lt;/i&gt; to reach down to it overcomes the bound wolf. Pleasure. Pleasure. He needs pleasure!

?P
It feels impossible, but for the wolf, he swears he can feel it. It&#39;s not quite the feeling of touch, no, that still remains his sole need in life at the moment, but as his cock pulses there in the air, harder than it has ever been in his life, the wolf can swear he can feel &lt;i&gt;something&lt;/i&gt; brushing against it. It&#39;s soft, almost non-existent, but each time his cock flexes in sheer arousal, it&#39;s as if a feather-like brush passes through his length. Down to the very tip to the knot. It teases him, furthering his impossible arousal even further.

?P
It&#39;s maddening! With bated breath, Drekkar shakes his head and grits his teeth together trying his hardest to keep his focus away from his cock.

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="27" name="d2a Arousal Level 5" tags="inclusion" position="7900,5950" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf&#39;s forced arousal feels...
&lt;span class=arousal-5&gt;overwhelming&lt;/span&gt;.

?P
&quot;FUCK!&quot; Drekkar yells in a growl. It&#39;s hard to even shift his eyes away from his cock. Small veins bulge from its side as the canine-shaped length almost glows as it throbs there in the air. Untouched. No stimulation, even though the wolf needs it. He NEEDS IT!

?P
Drool runs down the sides of Drekkar&#39;s muzzle, but he does not care. It doesn&#39;t matter. Nothing matters, only the constant waves of arousal his burning body feels. It radiates from his loins, from his cock, from his fucking knot, and he needs to touch it! He needs it!

?P
The thoughts of sex are constant now. Memories, fantasies, all meshed together in his head in a whirlpool leading to the pleasure that feels absolutely unreachable because of those gods-damned bonds! With a roar of anger and frustration, Drekkar pulls at all the bonds yet again, but it&#39;s hopeless. He can&#39;t reach his cock. He can&#39;t feel the pleasure he needs...

?P
Those phantom feelings intensify. It feels as if an invisible force is stroking his length constantly now. Up and down, from the tip to the knot... Stroking... Stroking... The wolf swears he can almost see a hand. He pictures a feminine hand working the movements, making the feather-like feelings of pleasure feel more real, and that thought alone makes his cock flex, and a burst of pre-cum comes from his tip. It&#39;s enough to make Drekkar moan with pleasure, but it&#39;s not enough for what he really needs. It&#39;s not nearly enough! He feels close, though. At the very edge of pleasure, but never going past it, not without touch...!

?P
He &lt;i&gt;needs&lt;/i&gt; to get out. It&#39;s almost impossible to think now. The candle&#39;s fire keeps penetrating his nose, adding to the volcano erupting inside of him and furthering his arousal to impossible levels. Tears of sheer need stream down from the wolf&#39;s eyes and he can feel his mind slipping.

?P
Fighting to stay conscious and absolutely desperate, Drekkar fights to resist, but it&#39;s a battle he&#39;s about to lose.

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="28" name="d2a Arousal Overwhelmed" tags="inclusion" position="8025,5950" size="100,100">&lt;&lt;nobr&gt;&gt;

Candle&#39;s Influence:

&lt;&lt;arousal-bar $d_curArousal 100 max&gt;&gt;

&lt;br&gt;
&lt;&lt;fade-in 2s no-pulse&gt;&gt;
  It&#39;s too much.

  ?P
&lt;&lt;fade-next 2s&gt;&gt;

  With bloodshot eyes and drool running free down the corners of his muzzle, the wolf is more akin to a feral animal than a sentient being. His gaze is locked downwards at his cock where he can swear he can see hands. Multiple hands, tongues, real or spectral, stroking, licking, caressing his cock. Driving him to the edge of madness from sheer arousal. His cock pulses constantly, spurts of pre-cum both dribbling and launching from his throbbing malehood.

  ?P
  The wolf&#39;s heart races as if it would burst out of his chest. His whole body burns with a need unlike anything he has ever felt. His arms feel sore and, for a brief moment, Drekkar realizes he has been pulling against the restraints without even noticing, in sheer need to reach down to his cock.

  ?P
  He needs it. There is nothing else in his mind but arousal, sex, and the urges that come with it. With the candle still silently burning at the corner, time becomes irrelevant to the wolf. The seconds stretch into minutes, which could or not have become hours. He has no idea how much time passes. Each moment is agony, his arousal burning so bright that he feels like he could cum if so much as a breeze blew over his aching length, but no such thing happens. There is nothing but maddening stillness while he remains there: bound, teased, and desperate.

  ?P
  Eventually, much to the wolf&#39;s surprise, a sound comes before him. It&#39;s hard to even lift his gaze up from his cock to look, but when the wolf manages it, he sees Ivex&#39;s form there. The mage is back and done with his duties. The wolf&#39;s chances of escaping are now gone.

  ?P
  Still, Drekkar doesn&#39;t care. He growls at the mage and desperately tugs at his bonds with a whine of pure need. The panther, however, just smiles...

  &quot;Ah, I see my enchantment worked as expected,&quot; the panther says while bringing his cloak up to his nose to protect himself from it once more.

  ?P
  Slowly, far too slowly, the panther steps towards the bound wolf. His smile only widens. The mage stops a step away from the wolf&#39;s fully hard, engorged cock.

  ?P
  Time slows down as the wolf sees the mage bringing his paw up. Ivex trails a single digit over the surface of the wolf&#39;s cock.

  ?P
  /* cspell:disable-next-line */
  &quot;HNNNGHH!&quot;

  ?P
  The simple, light touch is enough to bring a moan out of the wolf. His cock feels more sensitive than ever. His whole body does! Impossibly so.

  ?P
  With a laugh, Ivex withdraws his hand.

  ?P
  &quot;There we go. Silly wolf. I&#39;ve got you exactly where I wanted. Now... where were we?&quot;

  ?P
  [[Continue|d9b Ivex Torture 1]]

&lt;&lt;/fade-in&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="29" name="d2a Dislodge Crystal" tags="" position="7650,5225" size="100,100">&lt;&lt;nobr&gt;&gt;

With a grunt, the wolf starts his desperate attempt to get rid of the crystals holding the cross he&#39;s bound to. Drawing from what he has learned so far, Drekkar pulls with his right arm against the bindings with all of his strength while, at the same time, he &lt;i&gt;pushes&lt;/i&gt; back against the cross with his left leg. With the directed tension, the cross shifts to the side.

?P
The wolf is hit with a small sense of dread as the cross turns. It takes a lot of pulling from his arm to even dislodge it a little, but with a determined growl, he keeps pushing. Again and again, until...

?P
He can feel it!! Touching the back of the cross, a small &#39;clink&#39; as the cross touches the crystal at the right behind it! Swelling with hope, the wolf continues his precise efforts. With strong heaves that feel hot on his nose as he breathes in the candle&#39;s aroma, Drekkar does his best to ignore the way his member aches as he continues to try and try to bash the cross against the crystal.

?P
With each push and pull, the cross moves more. The wood bashes against the crystal until a chipping sound is heard. Gritting his teeth, the wolf continues no matter how much his muscles complain about it. This is it. It&#39;s now or never! With a determined growl, the wolf puts his strength into one powerful pull against his bonds and then...!

?P
&lt;b&gt;&lt;i&gt;CRACK!&lt;/i&gt;&lt;/b&gt;

?P
All of a sudden, the cracking sound makes all the crystals shake and, just like that, in disarray... they fall! Their gravitational influence disappears and, stumbling forward, the wolf finds himself with his feet on the ground!

?P
Albeit still bound to the cross, his tail wags with relief as, with the cross no longer attached to anything, he&#39;s free to move around!

?P
The wolf&#39;s eyes shift to the candle with urgency. It burns there on the desk, its influence threatening to overcome him. Just glancing down at his cock, a need to touch it swells within him.

&lt;&lt;if $d_curArousal &gt; 80&gt;&gt;
  ?P
  With its influence as high as it is and continuing to grow by the second, it&#39;s pretty much the only thing he can focus on, but...
&lt;&lt;/if&gt;&gt;

?P
At the same time, the letter opener sitting on the desk is well within reach now too. It would only take a few hops to grab it and hopefully cut the leather bindings easily enough to be free.

?P

&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Rush to the candle to put it out.|d2a Snuff Candle Bound]]&lt;/li&gt;
  &lt;li&gt;[[Rush to the leather opener to cut out the bonds.|d2a Free Himself]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="30" name="d2a Escape Actions" tags="" position="7350,5525" size="200,200">&lt;&lt;nobr&gt;&gt;

&lt;&lt;set _prevArousal = $d_curArousal&gt;&gt;
&lt;&lt;if $d_curArousal &gt; 90 &amp;&amp; $d_curArousal &lt; 100&gt;&gt;
  &lt;&lt;set $d_curArousal += 4&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;set $d_curArousal += 9&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $d_curArousal &gt;= 100&gt;&gt;
  &lt;&lt;include [[d2a Arousal Overwhelmed]]&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;include [[d2a Escape Possible]]&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $d_escapeActions = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="31" name="d2a Escape Options" tags="section-start" position="6975,5550" size="200,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;set $d_candleLit = true&gt;&gt;
&lt;&lt;set $d_curArousal = $d_furtherDefiance ? 30 : 20&gt;&gt;

Candle&#39;s Influence:
&lt;&lt;arousal-bar 0 $d_curArousal weak&gt;&gt;

&lt;br&gt;

&lt;&lt;fade-in 3s no-pulse&gt;&gt;
  The candle burns silently at the corner.

  ?P
&lt;&lt;fade-next 3s&gt;&gt;
  If its influence grows too high...

  ?P
&lt;&lt;fade-next 3s&gt;&gt;

  With a sense of urgency, the wolf&#39;s eyes scan around the room trying to find a way to escape his bondage. The leather wraps keeping the lupine standing in the middle of the room with his back pressed against the wooden cross are solid, but there must be something he can do to escape! At least that&#39;s what Drekkar tells himself.

  ?P
  Taking better note of the office, the wolf realizes that, if it weren&#39;t for the bondage contraption he is bound to at its center, it would be a fairly regular, even if somewhat fancy, office room. There&#39;s a desk, books, quills, cabinets... A letter opener that looks pretty sharp rests on the main desk. It looks like it could be used to cut the leather bindings, but it is completely out of reach.

  ?P
  There &lt;i&gt;must&lt;/i&gt; be something he can do!

  ?P
  Looking down, a small wave of redness comes over the wolf&#39;s ears and face. His cock remains there, hard and twitching. Even looking at it again is kind of painful. Never before had Drekkar felt such an undeniable urge to just reach down, wrap his paw around it and start stroking.

  ?P
  How good would it feel, to just...

  ?P
  &lt;i&gt;NO!&lt;/i&gt;

  ?P
  A way out. There must be a way out! There isn&#39;t much choice left, but to...

  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Keep looking around the room for a solution.|d2a Observation 1]]&lt;/li&gt;
    &lt;li&gt;[[Try and pull at the leather bindings with vigor!|d2a Struggle 1]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/fade-in&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="32" name="d2a Escape Possible" tags="inclusion" position="7350,5525" size="200,200">&lt;&lt;nobr&gt;&gt;

&lt;style&gt;
  .arousal-1 {
    color: #46bb26;
  }
  .arousal-2 {
    color: #e7d778;
  }
  .arousal-3 {
    color: #bb5e39;
  }
  .arousal-4 {
    color: #bf5150;
  }
  .arousal-5 {
    color: #e92940;
  }
&lt;/style&gt;

Candle&#39;s Influence:
&lt;&lt;set _pulse = $d_curArousal &lt; 90 ? &quot;weak&quot; : &quot;strong&quot;&gt;&gt;
&lt;&lt;arousal-bar _prevArousal $d_curArousal _pulse&gt;&gt;

&lt;br&gt;
&lt;&lt;fade-in 2s no-pulse&gt;&gt;
  The candle still burns silently at the corner.

  ?P
&lt;&lt;fade-next 2s&gt;&gt;
  &lt;&lt;if $d_curArousal &lt;= 30&gt;&gt;
    &lt;&lt;include [[d2a Arousal Level 1]]&gt;&gt;
  &lt;&lt;elseif $d_curArousal &gt; 30 &amp;&amp; $d_curArousal &lt;= 50&gt;&gt;
    &lt;&lt;include &quot;d2a Arousal Level 2&quot;&gt;&gt;
  &lt;&lt;elseif $d_curArousal &gt; 50 &amp;&amp; $d_curArousal &lt;= 70&gt;&gt;
    &lt;&lt;include &quot;d2a Arousal Level 3&quot;&gt;&gt;
  &lt;&lt;elseif $d_curArousal &gt; 70 &amp;&amp; $d_curArousal &lt;= 90&gt;&gt;
    &lt;&lt;include &quot;d2a Arousal Level 4&quot;&gt;&gt;
  &lt;&lt;elseif $d_curArousal &gt; 90&gt;&gt;
    &lt;&lt;include &quot;d2a Arousal Level 5&quot;&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  ?P
  Time is of the essence. With each passing minute, trying to find a way out, the wolf can feel the candle&#39;s influence growing on him...

  ?P
  There must be a way to get out of his bonds, but how?

  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;&lt;if $d_observation1&gt;&gt;
      &lt;&lt;mtl [[d2a Observation 2]]&gt;&gt;
        Look around the room for a solution once more...
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl [[d2a Observation 1]]&gt;&gt;
        Look around the room for a solution.
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;/if&gt;&gt;

    &lt;&lt;if $d_struggle1 &amp;&amp; $d_curArousal &gt; 90&gt;&gt;
      &lt;&lt;mtl [[d2a Struggle 3]]&gt;&gt;
        Try harder to wear down the bindings with strength and effort!
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;elseif $d_struggle1&gt;&gt;
      &lt;&lt;mtl [[d2a Struggle 2]]&gt;&gt;
        Try harder to wear down the bindings with strength and effort!
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl [[d2a Struggle 1]]&gt;&gt;
        Try and pull at the leather bindings with vigor!
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;/if&gt;&gt;

    or...
    &lt;&lt;mtl [[d2a Gather Thoughts]]&gt;&gt;
      Take a moment to gather his thoughts about everything learned so far...
    &lt;&lt;/mtl&gt;&gt;
  &lt;/ul&gt;
&lt;&lt;/fade-in&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="33" name="d2a Free Himself" tags="" position="7850,5400" size="100,100">&lt;&lt;nobr&gt;&gt;

Stumbling awkwardly with the cross&#39; weight upon his back and still stuck in a spread-eagle position, the wolf hops and steps towards the desk on the side. Turning to the side and leaning in, it still takes some effort for him to be able to take hold of the letter opener with his hand, but he succeeds.

?P
With it in hand, it&#39;s only a matter of awkwardly cutting the leather binding without harming himself in the process. It does not take too long and, with one hand free, cutting the others is a breeze.

?P
Stepping forward, Drekkar lets the damned cross fall back to the floor. Finally free to move his muscles properly, Drekkar can&#39;t help but look down at his cock. Hard, begging for attention, tantalizing...

?P
&lt;&lt;if $d_candleLit &amp;&amp; ($d_curArousal &gt; 85)&gt;&gt;

  With his arousal as high as it is, it&#39;s impossible to resist. Drekkar wraps his paw around it and the moment he does? The wolf lets out a moan of pure bliss. His nose still feels hot as he breathes the candle&#39;s effect, but that only serves to further the pleasure brought from the touch on his cock.
  ?P
  A smile opens in the corner of the wolf&#39;s muzzle.
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[It&#39;s too late. It&#39;s impossible to resist. Start jerking off.|d2a Jerk off]]&lt;/li&gt;
  &lt;/ul&gt;

&lt;&lt;elseif $d_candleLit&gt;&gt;

  Drekkar catches his hand going towards his cock before it reaches it. It&#39;s so hard to resist just stopping everything and jerking off right now. The wolf&#39;s eyes trail towards the candle still burning there. Every breath still brings that hot feeling through his nose, and breathing it furthers his arousal more and more. It is wrong, but it also feels so good...
  ?P
  Snuffing out the candle is the safest thing to do, but looking down at his cock, the wolf&#39;s paw is held an inch away from it. It would feel so good to just jerk off under the influence of it. Just take the pleasure, one time, and then escape... probably...
  ?P
  The wolf&#39;s mind is torn with indecision.
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[It&#39;s too hard to resist. Start jerking off.|d2a Jerk off]]&lt;/li&gt;
    &lt;li&gt;[[Don&#39;t yield! Go to the candle and snuff it out.|d2a Snuff Candle Free]]&lt;/li&gt;
  &lt;/ul&gt;

&lt;&lt;else&gt;&gt;

  Drekkar catches his hand going towards his cock before it reaches it. It&#39;s so hard to resist just stopping everything and jerking off right now. Still, without the candle&#39;s influence weighing on his mind and driving him towards relentless arousal, Drekkar knows best.
  ?P
  No matter how horny he is, Ivex could return at any moment. The wolf does not even know exactly how to escape this place, but looking around for clues and figuring out a way to get out would be ideal.
  ?P
  Working hard to ignore his arousal, the wolf focuses on what really matters.
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;&lt;if ($d_curArousal &gt; 80)&gt;&gt;
      &lt;li&gt;[[It&#39;s really hard to resist. Start jerking off.|d2a Jerk off]]&lt;/li&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;li&gt;[[Start working on escaping this tower...|d3a Escape Start]]&lt;/li&gt;
  &lt;/ul&gt;

&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="34" name="d2a Gather Thoughts" tags="" position="7450,5225" size="100,100">&lt;&lt;nobr&gt;&gt;

Exercising patience despite the urgency of his situation, Drekkar takes a moment to reevaluate everything he knows so far, in an attempt to figure out the best way to escape. Before Ivex&#39;s cursed candle overwhelms him, that is.

&lt;&lt;if $d_curArousal &lt; 60&gt;&gt;
  ?P
  Glancing down, the wolf can see his member there, proud and erect, but he quickly looks away. The temptation is strong, but he focuses on escaping.

&lt;&lt;elseif $d_curArousal &gt;= 60 &amp;&amp; $d_curArousal &lt; 80&gt;&gt;
  ?P
  It&#39;s very hard to think. Almost impossible. All the wolf can feel is the heat of his body, the jolts of lust coming from his throbbing cock every time it pulses. It&#39;s right there, in front of him, so close yet so far. What he wouldn&#39;t give to touch it...
  ?P
  Drekkar shakes his head. He must try his hardest to resist the cursed candle and focus on escaping, or there will be no hope. There will be time to take care of himself later.
&lt;&lt;/if&gt;&gt;

?P
Trying to keep his thoughts in place, the wolf thinks back to what he has learned about the room and the cross keeping him bound so far...

&lt;&lt;if $d_observation1 &amp;&amp; !$d_baseCrystal&gt;&gt;
  ?P
  From the small mirror placed at the side, it is possible to see &lt;span class=&quot;imp-info&quot;&gt;crystals hovering behind each limb of the wooden cross&lt;/span&gt;. They float in the air firmly in place, keeping the cross still.

  ?P
  The cross was not built into this office. It was brought here and it stands firm through some magical means.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $d_struggle1 &amp;&amp; !$d_baseCrystal&gt;&gt;
  ?P
  When trying to force the bonds, while the leather doesn&#39;t yield, the cross itself kind of does. Applying force on all four limbs at once amounts to nothing, but &lt;span class=&quot;imp-info&quot;&gt;if enough force is applied to a single limb, the wooden cross as a whole leans forward at that limb&lt;/span&gt;, even if it still imposes great resistance against it somehow.

  ?P
  The cross is kept in place by some sort of gravitational force.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $d_struggle1 &amp;&amp; $d_observation1 &amp;&amp; !$d_baseCrystal&gt;&gt;
  ?P
  Putting everything together...

  &lt;&lt;if $d_curArousal &gt; 70&gt;&gt;
    ?P
    ...is very hard. Sex is what is prominent in the wolf&#39;s mind. Memories of times spent in taverns, in bed, pressing someone down against the soft mattress while driving his cock deep into them are what keep coming back to the wolf&#39;s mind over and over.

    ?P
    His cock oozes more pre-cum down to the ground. It takes a gargantuan effort to look away and focus on the problem at hand.
  &lt;&lt;/if&gt;&gt;

  ?P
  The cross is kept upright by crystals. Some kind of gravitational force keeps the crystals firmly in place and, at the same time, seems to keep the cross in place. With enough force, however, it&#39;s possible to pull against them just enough to dislodge the cross just a little...

  ?P
  That is how the cross works. Yes! Now, there must be something that can be done to break away the crystals&#39; gravity and dislodge the cross entirely! But what...?
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $d_baseCrystal&gt;&gt;
  There are six crystals. One under the cross on the floor, another behind his back, and four others at the cross&#39;s edges behind his limbs. Five of them float in the air and they&#39;re all firmly held in place...

  ?P
  As the wolf pictures it all in his head, it all feels like the crystals are... connected?

  ?P
  Drekkar&#39;s ears perk up. If they are connected, then breaking the crystal that starts the connection could break the whole thing! And that would be the crystal on the floor!

  ?P
  Bound as he is, the wolf can&#39;t reach it, but if he pulls and pushes his bindings the right way, Drekkar is pretty sure it might be possible to touch and bash at the crystal at the base with the edges of the cross his legs are bound to! It feels like a long shot, but time is running out. Something must be done...!

&lt;&lt;else&gt;&gt;
  Drekkar grunts in frustration. It&#39;s so hard to think! There must be something the wolf can do! Maybe applying enough force would be enough now that he knows more about the whole thing? Or maybe there&#39;s more to the room and his bondage to make it worth it to study them better and figure them out...

  &lt;&lt;set $d_thoughtsGathered = true&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $d_mage&gt;&gt;
  Crystals... crystals... crystals... They are not exactly Nero&#39;s field of work, but he has studied them before! Gravity crystals...

  ?P
  The wolf mage knows how they work, but how to dislodge them? Their gravitational field is unyielding, yet... Something snaps in the wolf&#39;s head!

  ?P
  They must be attuned to keeping the cross in place, but they can&#39;t float by themselves. The crystal at the back must be what keeps the others in place, but something has to keep the center crystal in place as well! With his heart beating fast, Nero leans back, stretching his neck to look at the mirror again at a lower angle...

  ?P
  Yes! Right there! On the floor beneath the whole thing, the edge of a larger crystal can be seen! It must be what&#39;s holding the entire thing together. If that crystal could somehow be dislodged, surely all the others would fall in disarray!

  ?P
  That can work! Now to manage that before the candle&#39;s influence grows too strong...

  &lt;&lt;set $d_baseCrystal = true&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $d_baseCrystal&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Attempt to dislodge the crystal at the cross&#39; base.|d2a Dislodge Crystal]]&lt;/li&gt;
  &lt;/ul&gt;

&lt;&lt;else&gt;&gt;
  ?P
  The time gathering his thoughts was valuable, but the breathing never stops and, even keeping it calm and steady, the fire kindled by the candle burns yet a bit brighter...

  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Ponder on what action to take next...|d2a Escape Actions]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/if&gt;&gt;

/* sets d_thoughtsGathered and d_baseCrystal above */
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="35" name="d2a Jerk off" tags="" position="8150,5825" size="100,100">&lt;&lt;nobr&gt;&gt;

Fuck it! Drekkar needs it. He needs the pleasure! After that is taken care of, then the wolf can deal with the candle and think about escaping. Only one thing matters now!

?P
With his paw blissfully wrapped around his cock, Drekkar lets himself fall forward to his knees. An involuntary smile comes to his muzzle and he feels himself tearing up from the sheer happiness of being able to sate the lust burning within him. Every breath is fire, and now his paw can fan the fire.

?P
As the wolf&#39;s paw starts moving over his length, as his fingers reach his knot and give it a small squeeze...

?P
Drekkar moans out loud. It is heaven. Never before had the wolf imagined that he could feel such pleasure. Without hesitating, his paw speeds up and he starts jerking off furiously.

?P
It takes but a minute. He pants, his tongue lolling out of his muzzle as he feels his pleasure reaching the sought peak. With a moan that is almost akin to a howl, Drekkar feels the familiar waves of pleasure overcome him as his cock spasms between his fingers.

?P
The wolf&#39;s seed arcs up. He shoots high, jet after jet of cum coming to splash against the floor as the wolf&#39;s body is overcome with pleasure. And the candle...

?P
The candle makes it even better. As he breathes it in during his orgasm, the fire originating from his muzzle enhances his pleasure. It makes it long, drawn-out, almost everlasting as Drekkar cums.

?P
The wolf cannot tell when his orgasm ends. The pleasure becomes more than he can handle. His paw cannot stop, pumping his cock that feels more sensitive after shooting, but is always ready to shoot again. Before long, all Drekkar knows is that a new orgasm is coming and, again, the wolf just smiles and moans as he rides it.

?P
The more he breathes in, the better it feels, and he just keeps going. One orgasm after another, until his cock is spasming with nothing to shoot as his paw keeps stroking it, but the pleasure is still there! The pleasure never ends. It is the best thing he has ever felt in his life. At least, until...

?P
The wolf has no idea how much time has passed, but just as he feels ready to reach another orgasm, the office&#39;s door opens. From it, Ivex emerges and, for a moment, the mage looks surprised to see Drekkar free and kneeling on the floor on a puddle of his own semen. Then, the mage just grins...

?P
&quot;It looks like you found a way to free yourself, but it didn&#39;t matter, did it?&quot;

?P
Even as Drekkar looks up at the panther, his goofy smile barely even fades. The candle&#39;s influence is too strong and his body still burns. All he manages is to slow down his paw just a little bit as he keeps jerking off in front of the mage. He can&#39;t move, he can&#39;t get away, he needs the pleasure!

?P
Then, with but a snap of a finger from Ivex, the crystals around the floor start to float again. They get in position. The cross reforms by itself right behind the wolf and, with a sense of urgency, Drekkar feels worried for just a moment before...

?P
The wolf&#39;s paw is ripped away from his cock. A whine comes from the adventurer as his body is sent flying towards the cross and, in an instant, the leather bindings wrap themselves around his limbs. With a cry of agony, Drekkar finds himself right back where he started...

?P
...But the wolf does not cry because of his predicament. He whines because his paw can no longer reach his cock. The pleasure he perpetually needs is out of reach again.

?P
Ivex approaches him and the mindless wolf can only look up at the panther.

?P
&quot;There we go. Silly wolf. I&#39;ve got you exactly where I wanted. Now... where were we?&quot;

?P
[[Continue|d9b Ivex Torture 1]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="36" name="d2a Observation 1" tags="" position="7325,5350" size="100,100">&lt;&lt;nobr&gt;&gt;

As his eyes scan the room for the tenth time, the wolf&#39;s ears drop low. His hope starts to wane, but as his vision sweeps over the left side with care, something catches his eye.

?P
It&#39;s a mirror. A small, handheld mirror resting on its side casually against
&lt;&lt;= $d_mage ? &quot;a snow&quot; : &quot;an arcane&quot;&gt;&gt;
globe. While looking at it, the wolf can see his own reflection, but by craning his neck forward and changing the angle...

?P
Something interesting can be seen. From that angle, Drekkar can see the backside of the cross he&#39;s bound to. The wooden contraption stands there in the middle of the office room and, being out of place, the wolf realizes that it&#39;s not actually built in there. Drekkar can clearly see &lt;span class=&quot;imp-info&quot;&gt;five crystals&lt;/span&gt; floating behind the cross. One larger floats at the center of the large cross right behind his back, while four others float by the edges to which his limbs are tied to.

?P
The cross is not attached to anything, so the crystals must somehow be what is keeping it firm and solid.

?P
The crystals are, of course, completely unreachable to the naked wolf bound to the cross as he is, but knowing how this thing works could be useful in order to find a way to break it.

?P
&lt;&lt;if $d_escapeActions&gt;&gt;
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Reevaluate his options.|d2a Escape Actions]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;else&gt;&gt;
  [[Continue|d2a Escape Actions]]
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $d_observation1 = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="37" name="d2a Observation 2" tags="" position="7500,5350" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf&#39;s eyes scan the room again. With increasing urgency, Drekkar attempts to focus on each thing and think about how it could possibly help get out of that damned cross.

?P
Most things are useless or, if they would have some use, it does not matter because he cannot reach them. The sharp leather opener at the desk taunts him with its usefulness, but it is completely out of reach with him stuck to that cross.

?P
&lt;&lt;if $d_thoughtsGathered&gt;&gt;
  Knowing how the crystals work, however, the wolf cranes his neck to the side in order to look at them again. All five crystals hover there firmly in place. Four smaller ones at his limbs, one slightly larger one behind his back at the center. The same thing he had seen before! Yet, by extending his neck just a little further, Drekkar catches a glimpse of something else...
  ?P
  Another crystal! At the very base of the cross, the edge of what seems to be an even &lt;span class=&quot;imp-info&quot;&gt;larger crystal&lt;/span&gt; is barely visible. Bound to the cross as he is, the wolf can&#39;t look down between his legs to see it, but it is there!
  ?P
  ...What can he do with that knowledge, however?

&lt;&lt;else&gt;&gt;

  Using the mirror, the wolf tries to find new angles so that he can see things behind and above him, but there is nothing useful at all. What a waste of time!
  ?P
  And the whole time, he still has to breathe. The fire inside him grows by the minute.

&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Reevaluate his options.|d2a Escape Actions]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;set $d_thoughtsGathered &amp;&amp; ($d_baseCrystal = true)&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="38" name="d2a Snuff Candle Bound" tags="" position="7700,5400" size="100,100">&lt;&lt;nobr&gt;&gt;

With urgency, the wolf awkwardly stumbles and hops towards the candle, even still stuck to the loose cross. Luckily, despite its insane magical properties, the candle itself works just like a normal candle. Leaning over it and blowing at it is enough to snuff out its fire.

?P
The moment it does, a wave of relief washes over the wolf. The next breath he takes no longer has that lingering burn that trails down his nose all the way to his loins. Though the air still clearly lingers heavy with the candle&#39;s remnants, its growing influence will surely stop.

?P
Still, looking down at his member, the damage the candle has done is already there. His arousal still burns with unnatural strength, and his cock remains fully hard and sensitive.

?P
Regardless, the absence of the candle&#39;s growing influence allows the wolf to finally take a deep breath and collect his thoughts despite the arousal. Drekkar can finally think straight again.

?P
His eyes shift to the table. The next step has to be freeing himself from these hellish bonds.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Finally cut the bonds away.|d2a Free Himself]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  delete $d_candleLit;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="39" name="d2a Snuff Candle Free" tags="" position="7850,5550" size="100,100">&lt;&lt;nobr&gt;&gt;

Now free of any restraints, it is but a matter of a few steps and a blow for that hellish candle to get snuffed out.

?P
The moment it does, a wave of relief washes over the wolf. The next breath he takes no longer has that lingering burn that trails down his nose all the way to his loins. Though the air still clearly lingers heavy with the candle&#39;s remnants, its growing influence will surely stop.

?P
Still, looking down at his member, the damage the candle has done is already there. His arousal still burns with unnatural strength and his cock remains fully hard and sensitive.

?P
Regardless, the absence of the candle&#39;s growing influence allows the wolf to finally take a deep breath and collect his thoughts despite the arousal. Drekkar can finally think straight again.

?P
Drekkar catches his hand going towards his cock before it reaches it. It&#39;s so hard to resist just stopping everything and jerking off right now. Still, without the candle&#39;s influence weighing on his mind and driving him towards relentless arousal, Drekkar knows best.

?P
No matter how horny he is, Ivex could return at any moment. The wolf does not even know exactly how to escape this place, but looking around for clues and figuring out a way to get out would be ideal.

?P
Working hard to ignore his arousal, the wolf focuses on what really matters.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Start working on escaping this tower...|d3a Escape Start]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="40" name="d2a Struggle 1" tags="" position="7325,5775" size="100,100">&lt;&lt;nobr&gt;&gt;

Drekkar growls in frustration and tries, with more vehemence, to pull against the bindings with brute strength.

?P
Grunting with effort, the wolf puts all of his physical prowess behind the act. It takes quite a bunch of pulling and tugging, but while the leather bands wrapped around his wrists and ankles are as unyielding as the wood the cross is made of, the wolf does notice something.

?P
When focusing his efforts on one of his arms, the bindings don&#39;t yield, but the cross itself seems to &lt;span class=&quot;imp-info&quot;&gt;displace&lt;/span&gt; a little, even if it&#39;s not much. Pulling with his arm using a lot of effort, the wolf notices that the part of the cross holding that arm seems to lean forward a little bit while, on the opposite side of the cross at his leg, it leans back.

?P
This wouldn&#39;t be possible if the cross was nailed to a wooden structure as it usually is. Pulling again with renewed grunts, the wolf confirms that theory. With enough effort, he seems to be able to dislocate the cross little by little.

?P
As soon as he stops pulling, however, it is quickly pulled back to its place.

?P
It&#39;s as if the cross is kept firm and upright by some kind of &lt;span class=&quot;imp-info&quot;&gt;gravitational force&lt;/span&gt;?

?P
Panting, Drekkar takes some solace in learning something new. It is still unclear how that could possibly help in his escape,  but knowing how this thing works could be useful in order to find a way to break it.

?P
Unfortunately, all the physical effort also served to quicken the wolf&#39;s breathing. Realizing that, Drekkar does his best to steady it again, but when he looks down at his member... his ears lower themselves, as it is clear that the damage has already been done.

?P
&lt;&lt;if $d_escapeActions&gt;&gt;
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Reevaluate his options.|d2a Escape Actions]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;else&gt;&gt;
  [[Continue|d2a Escape Actions]]
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $d_curArousal += 5&gt;&gt;
&lt;&lt;set $d_struggle1 = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="41" name="d2a Struggle 2" tags="" position="7500,5775" size="100,100">&lt;&lt;nobr&gt;&gt;

Drekkar won&#39;t have it! Surely, with enough strength applied, the leather and wood are bound to weaken and break eventually! Gritting his teeth, the wolf prepares himself...

?P
His muscles bulge with effort. The room is filled with grunts as the wolf pushes and pulls against all four of the bindings around his limbs. The leather strains hard under the wolf&#39;s strength...

?P
But it does not yield.

?P
By the end of it, Drekkar is left panting again. His nose burns as much as his loins from everything he breathed in during his efforts. By the end of it, there is only his bare chest heaving and his cock throbbing...

?P
But perhaps the leather bindings have weakened some? They can&#39;t last forever! Would it be wise to keep forcing them?

?P
The bound lupine takes a moment to catch his breath and recover his strength.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Reevaluate his options.|d2a Escape Actions]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;set $d_curArousal += 5&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="42" name="d2a Struggle 3" tags="" position="7625,5775" size="100,100">&lt;&lt;nobr&gt;&gt;

It&#39;s too much. Drekkar pants, huffs and drools like a wild beast. Rage swells within him as he stares down at his cock. The arousal, the impossible, infinite arousal he feels fuels his anger. Those bonds... they keep him from reaching what he needs, and he cannot take it anymore.

?P
/* cspell:disable-next-line */
&quot;Grrrrhhhrrhh...!&quot;

?P
With a growl, Drekkar&#39;s paws curl into fists and his muscles start bulging once more. He forces all four leather bindings and, as always, they don&#39;t yield, keeping him still.

?P
Still, he needs it. As his eyes remain fixated on his large cock right there, hard, throbbing, with his arousal radiating like a basic need, the wolf&#39;s rage keeps getting fueled by it. He growls, strands of drool falling down to join the puddle of pre-cum on the floor between his legs. Like a savage beast, Drekkar roars again. His whole body strains to its limit, his muscles, a result of years and years of physical training, strain even harder. The wolf needs to touch himself, he needs it, and nothing will stop him. Nothing!

?P
/* cspell:disable-next-line */
&quot;RRRRRAAAAAAAAARRRRRHHGGGHH!&quot;

?P
With a mighty roar, Drekkar takes his body way past its regular limits, just as the candle has done to his arousal. Finally, the sound of a crack comes... followed by another, and another. His biceps burn from the effort, but it only adds to the burning that his whole body is engulfed in. With a final roar, Drekkar finally feels the cross and leather yielding to his strength, until finally...

?P
&lt;b&gt;&lt;i&gt;CRACK!&lt;/i&gt;&lt;/b&gt;

?P
The cross bends. The thick wood is not enough to hold the warrior&#39;s might as, finally, it bends under his strength. As the cross breaks, the crystals behind it fall down to the floor and, suddenly, Drekkar finds himself stumbling forward. Still enraged, the wolf shakes the remnants of the bonds away from his limbs, tossing the broken cross off to the sides so that he can finally...!

?P
As his paw envelops his cock, the wolf lets out a moan of relief. At that moment, however, a glimpse of lucidity returns to him. Still huffing like a wild beast, Drekkar&#39;s savage eyes jump to the candle burning right there at the side. Its influence continues to grow on him, but pleasure without end is also at his reach. The wolf&#39;s paw squeezes his own cock and he lets out an involuntary moan. His legs tremble with weakness. The wolf wants to fall down on his knees right there and masturbate, fuck everything else! But...

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Fight the urges and snuff out the candle first.|d2a Snuff Candle Free]]&lt;/li&gt;
  &lt;li&gt;[[Choose pleasure. Sate the needs burning within.|d2a Jerk off]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="43" name="d2a The Candle" tags="" position="6800,5600" size="100,100">&lt;&lt;nobr&gt;&gt;

Bound and alone in the room without Ivex&#39;s cocky blabbering as a distraction, Drekkar can feel the effects of the candle more sharply.

?P
It burns there on the corner, innocently, yet the magically-enhanced scent that the candle produces, fills the air with, grows stronger by the minute. Every breath the wolf takes is filled with that strong scent. It heats up the canine&#39;s sensitive nose and, more than that, it heats up his very core.

?P
As Drekkar looks down, his ears fold back in shame. While his arousal was sparked by Ivex, it keeps getting continuously kindled by whatever is in that candle. The wolf&#39;s member stands fully hard now, protruding from his sheath and pointing upwards.

?P
While his arousal is a physical display of how the candle affects the wolf, however, even more worrying than that is the effect the candle has on the wolf&#39;s mind. Drekkar can feel it influencing him. Looking down at his own arousal is almost painful. The urge to touch it seems to grow stronger by the second. Though escaping is the forefront, most important matter in his mind, thoughts of lust start seeping in little by little. A need to feel pleasure, a need to &lt;i&gt;fuck&lt;/i&gt; something.

?P
It&#39;s enough to bring a low growl of sheer lust from the wolf for a moment. As he stares down at his own erection, he almost loses himself for a moment there, focusing on the idle pleasure radiating from his sheer arousal.

?P
But no!

?P
Drekkar shakes his head and growls at himself. He has to escape. It&#39;s his chance! It might be his only chance. He needs to escape...

?P
The wolf turns his eyes towards the burning candle. So close yet so far.

?P
He needs to escape... before the crazed mage returns and before that thing&#39;s magic overcomes him.

?P
[[Continue|d2a Escape Options]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="44" name="d3a Arousal Relief" tags="" position="9350,5200" size="100,100">&lt;&lt;nobr&gt;&gt;

Fuck it. It will be quick and it will feel great! With a glance towards the door and a growl coming from his throat, Drekkar wraps his paw around his cock and that alone brings a groan of relief.

?P
Closing his eyes, he starts pumping it. In fast, quick motions, the wolf lets his hand glide over the surface of his cock, stimulating it, pleasuring it. Nobody knows his own dick better than his own hand, so with dexterity, his paw strokes his cock up and down. It teases the tip, then when it reaches the base, the wolf opens his grip just lightly to give his knot a squeeze before it keeps going...

?P
Drekkar&#39;s knees grow a bit weak. Whatever the hell was in that candle certainly does enhance his pleasure. As he predicted, within a few short minutes, the wolf&#39;s growling has already reached a new peak. His hand speeds up, his cock hardens in his grip, until, finally...!

?P
/* cspell:disable-next-line */
&quot;Hnngh...!
Yeah...&quot; the wolf groans. He doesn&#39;t care that his seed goes flying up, splattering on the office&#39;s floor and on the mage&#39;s possessions. All he cares about is the pleasure, the overwhelming pleasure of climax that overcomes him for those sweet, sweet seconds of release.

?P
It lasts longer than usual, but eventually, Drekkar&#39;s orgasm starts subsiding. His paw keeps stroking his cock, but slows down, and his member still throbs. Even not tying his knot into anything, his member remains hard and his knot fully engorged. It won&#39;t go down for a while. Strangely enough, though...

?P
Drekkar finds that he doesn&#39;t quite feel satisfied. While usually there would be a refractory period, that known period of oversensitivity and bliss that any male knows well, this time... there isn&#39;t. When Drekkar lets go of his cock, it remains hard. It still drips pre-cum. And, if anything, he feels a small urge to grab it again and jerk off once more. A little less so than before, but still...

?P
With a frown, the wolf tries to push such thoughts away from his mind. Still, his endeavor proved fruitless. He got some relief, but the need did not leave him and his erection does not subside in the least. Definitely another effect of that cursed candle...

?P
With a growl of frustration, all Drekkar can do is try to ignore his erection again and focus on what really matters. At least the grip of his arousal in his mind has &lt;span class=&quot;imp-info&quot;&gt;subsided a little&lt;/span&gt; with this brief relief.

?P
[[Continue|d3a The Upper Office]]

&lt;&lt;set $d_arousalLevel = 1&gt;&gt;
&lt;&lt;set $d_jerkoff = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="45" name="d3a Door" tags="" position="9350,5625" size="100,100">&lt;&lt;nobr&gt;&gt;

Narrowing his eyes, Drekkar heads towards the door. The wolf lets out a low growl, measuring the door&#39;s apparent sturdiness as he approaches it fully expecting to have to tackle it down.

?P
When his paw tries the door&#39;s handle, however, it twists. The door is not locked and it just opens.

?P
Outside of it, there&#39;s a small hallway with no other doors, but it leads to a staircase that goes down.

?P
&lt;&lt;if $d_room &amp;&amp; $d_window&gt;&gt;
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Leave the office and head down the stairs.|d3a Head Downstairs]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;else&gt;&gt;
  There might still be useful things to see in the office before leaving, though.
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Close the door and keep looking.|d3a The Upper Office]]&lt;/li&gt;
    &lt;li&gt;[[Leave the office and head down the stairs.|d3a Head Downstairs]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="46" name="d3a Escape Start" tags="section-start" position="9050,5375" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;checkpoint-save d_checkpoint1 &quot;Escaped the Cross&quot;&gt;&gt;

&lt;&lt;if $d_curArousal &lt; 60&gt;&gt;
  &lt;&lt;set $d_arousalLevel = 0&gt;&gt;
&lt;&lt;elseif $d_curArousal &gt;= 60 &amp;&amp; $d_curArousal &lt;= 80&gt;&gt;
  &lt;&lt;set $d_arousalLevel = 1&gt;&gt;
&lt;&lt;elseif $d_curArousal &gt; 80 &amp;&amp; $d_curArousal &lt;= 90&gt;&gt;
  &lt;&lt;set $d_arousalLevel = 2&gt;&gt;
&lt;&lt;elseif $d_curArousal &gt; 90&gt;&gt;
  &lt;&lt;set $d_arousalLevel = 3&gt;&gt;
&lt;&lt;/if&gt;&gt;

Taking a deep breath and refocusing his thoughts away from his lingering arousal, the wolf looks around. Without the candle burning, the fire of arousal that it lit up still remains inside the wolf, but when it was lit, it was as if log upon log kept being placed upon it. Without it, the wolf feels as if that fire was crackling and burning steadily inside him like some kind of long-running campfire. Drekkar can&#39;t figure out a way to extinguish it, but neither does it grow anymore. With a look down at his cock, the temptation to reach down for it and jerk off is strong, but with his mind clear he knows that Ivex can return at any moment, and if he does? Everything Drekkar has worked so hard for will be lost.

&lt;&lt;if $d_arousalLevel == 1&gt;&gt;
  ?P
  The candle has taken its toll, though. Even with his arousal under control, the wolf&#39;s cock still twitches every now and then, and the urge to touch it is still there. Drekkar feels like he could jerk off three times in a row and still not be satisfied, and the urge to do so is there, but the wolf growls at himself, shakes his head, and ignores it. &lt;span class=&quot;imp-info&quot;&gt;That lingering arousal might still get in the way of things in the future, though...&lt;/span&gt;

&lt;&lt;elseif $d_arousalLevel &gt;= 2&gt;&gt;
  ?P
  The candle has taken a high toll, though. Even with his arousal under control, the wolf&#39;s cock still twitches every now and then while, at the same time, dripping down pre-cum. Drekkar feels like he could jerk off ten times in a row and still not be satisfied, and the urge to do so is still there gnawing at him. Gritting his teeth, the wolf shakes his head and growls at himself, however, resisting it. &lt;span class=&quot;imp-info&quot;&gt;That high, lingering arousal will definitely have consequences in the future, though...&lt;/span&gt;
&lt;&lt;/if&gt;&gt;

?P
His clothes and gear are nowhere near. The wolf lets out a soft growl. No weapons, no armor... not even a piece of cloth to hide his modesty. Ivex simply made them vanish... And the wolf doesn&#39;t see anything nearby that could even be used to properly cover himself. Looking down, seeing his naked form with a lingering erection that won&#39;t go down makes his ears grow red for a moment, but Drekkar shakes his head.

?P
This is not the time to be worried about his modesty. This is the time to be worried about his freedom...

?P
[[Continue|d3a The Upper Office]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="47" name="d3a Extraction Notes" tags="" position="11300,6425" size="100,100">&lt;&lt;nobr&gt;&gt;

These notes stand out amidst a bunch of unorganized notes. The writing at this point is sporadic and rough. Ivex seems to write about his plans but in a confusing manner. It reads:

&lt;span class=&quot;mild-handwriting&quot;&gt;
&lt;h3&gt;Extraction methodologies&lt;/h3&gt;

I have done it. They said it couldn&#39;t be done, but fuck them. I have done it. A completely self-sustained structure that is mine and mine alone!

?P
I will need more subjects to make it truly sustainable. From my calculations, I will need at least five? The two I have so far are only enough to sustain their prison and a little more. If that obnoxious wolf knew what his fate was going to be when he messed with me in the academy I bet he wouldn&#39;t have dared even look at me. Once again, I prove to be the superior being!

?P
Theoretically, the more I get, the more I can expand. I can build something truly beautiful, magnificent, and of my own! And all of this at what cost? Breaking &#39;ethics and morals&#39;? Isn&#39;t putting useless people to a better purpose the right thing to do? And the way I devised it, it&#39;s not as if they are not enjoying themselves. In a way.

?P
I will admit that I only decided to use semen instead of blood because it has a higher concentration of energy from the get-go, which I can absorb immediately. Maybe I would have ended up going this route regardless, as it is much easier to upkeep and maintain production of it with the assistance of a few other basic spells. I have developed some of those further as well to astounding results. Each day my research progresses more and more!

?P
The most arduous process is the creation of more of the extraction material. The heavy alchemy required and the volume of semen needed to attune it to its extraction still need to be expanded upon. I can mix my own semen with aloe and carcinatus ground together and feed it to it little by little, but I can only produce so much semen myself and it hasn&#39;t been pleasant. Note to come up with a solution for this problem as well...

?P
Little by little, my plans come to fruition.

?P
Note to make the attunement of the extraction material process to myself easier as well. If the material were to ever think I am an extraction subject when I touch it, everything would be lost. Maybe with less blood. Duplication magic might work?
&lt;/span&gt;

?P
There are drawings and sketches beneath more strange notes. The drawings are little more than circles, though. Circles with stick people inside them. What does that even mean?

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Read something else.|d3a Journal Notes]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="48" name="d3a Extraction Room Intro" tags="" position="10550,5675" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if !$d_extractionDoor&gt;&gt;
  With care, the wolf approaches the closed door. Taking a couple of reflexive sniffs towards it, the smells coming from it seem... varied, but also stale. With his ears perked up, Drekkar tries to listen in to see if there&#39;s movement inside, but not a sound comes from it.

  ?P
  An attempt to turn the door handle shows that it is indeed not locked. With care, the wolf pries it open just enough to peer inside...

  ?P
  What he sees makes his eyes widen. The room is large- no, &#39;large&#39; doesn&#39;t even begin to cover it. It&#39;s grand. A circular room with a tall ceiling and long walls with what seems to be small closed numbered alcoves lining it. It proves once and for all that this place defies the laws of space, as there is no way a room this large would fit on this side of the building.

  ?P
  By the center of the large hall, the wolf can see what looks like an altar of some sort with an unidentified, gooey thing resting on it. Not too far from it, there&#39;s a desk with a chair and some books spread all over it.

  ?P
  There doesn&#39;t seem to be anyone in the room, at least not at first glance.

  ?P
  Maybe it would be good to go in and take a closer look... or maybe trying something else first would be wiser.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Pry further and investigate the room.|d3a Extraction Room]]&lt;/li&gt;
  &lt;li&gt;[[Return to the hallway.|d3a Second Floor]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;else&gt;&gt;
  Prying into the oversized room again, nothing has changed. The tall walls are littered with strange alcoves and the mysterious altar at the center of the room hasn&#39;t changed. It&#39;s quiet.

  ?P
  Maybe it would be good to go in and take a closer look... or maybe trying something else first would be wiser.

  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Pry further and investigate the room.|d3a Extraction Room]]&lt;/li&gt;
    &lt;li&gt;[[Return to the hallway.|d3a Second Floor]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $d_extractionDoor = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="49" name="d3a Extraction Room" tags="" position="10600,5825" size="200,200">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $d_extractionRoom&gt;&gt;
  There isn&#39;t much to see despite the room&#39;s size. The mysterious, numbered alcoves line up along the tall walls around the wolf, with most of them being closed.

  ?P
  At the center, the altar with the gooey thing resting on it draws the most attention, with the desk full of books and writing supplies splayed all over it being the second most interesting thing.

&lt;&lt;else&gt;&gt;
  Carefully entering the grand hall, the wolf proceeds with care. This place seems safer as there is no sign of anyone being here, though. As the wolf moves into the room, paw still keeping his stubborn erection pressed against his leg, even the mighty warrior is taken aback by the grandioseness of the place.

  ?P
  Taking a moment to survey the room well, the wolf can see that some of the strange alcoves are open. The open ones reveal nothing but a small space inside. What could be the purpose of something like that? Most of them are so high up that they aren&#39;t even reachable, although that&#39;s probably not a problem for someone with magic. The wolf cannot see any indication of how exactly to open the heavy, stone-made doors of the closed ones.

  ?P
  Upon approaching the center of the room, the wolf has a chance to properly inspect the thing that looks like some kind of altar and the desk as well. The substance in the altar stands still. It almost looks like liquid, but unlike water, it doesn&#39;t run down the sides of the altar, but rather stays still in its own self-contained oval-shaped bubble over the firm stone. Maybe some kind of barrier holds it together...? It&#39;s hard to tell, but in this tower, Drekkar believes any kind of bullshit is possible.

  ?P
  The desk, on the other hand, is lined up with books and scrolls. It seems to be the place with the most recent activity, so Drekkar can guess that, whatever Ivex does in this room, he mostly does at that desk. Maybe there&#39;s useful information in some of those books?

  ?P
  A careful, more thorough investigation of the strange room could be helpful.
&lt;&lt;/if&gt;&gt;

&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Examine the desk.|d3a The Desk]]&lt;/li&gt;
  &lt;li&gt;[[Examine the altar.|d3a The Altar]]&lt;/li&gt;
  &lt;li&gt;[[Go back to the hallway.|d3a Second Floor]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;set $d_extractionRoom = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="50" name="d3a Gem Notes" tags="" position="11175,6425" size="100,100">&lt;&lt;nobr&gt;&gt;

These notes stand out amidst a bunch of unorganized notes. The writing at this point is sporadic and rough. They seem to talk about &lt;span class=&quot;imp-info&quot;&gt;gemstones&lt;/span&gt; though. It reads:

&lt;span class=&quot;mild-handwriting&quot;&gt;
&lt;h3&gt;Gemstones&lt;/h3&gt;

That utter fool Gallahan calls himself a professor in that fucking cheap academy and said that gemonology was an outdated magical art because of its &#39;limitations&#39;.

?P
I say fuck them all. So what if I need gemstones for all my spells? They work, and with this, I can have them stored in ways no other mage can. The progress and breakthroughs I am making go beyond their close-minded dreams.

?P
In a gemstone the world is literally mine.

?P
I am synthesizing a way to easily create them. I will need to steal more, but I have a vast supply and they are easy to reuse. My compression experiments are a success. The only thing the gemstones don&#39;t seem to be able to do is to solve my energy extraction problem. I will have to look elsewhere for that.

?P
I have devised a spellbook to make gemstone spells. The spell is in it, the gemstone absorbs the magic from the arcane circle as it was made to do, and the spell is done! The only downside is that anyone can use them by just clutching them with their hand. Maybe I can attune them to me alone somehow. Note to look into that later.
&lt;/span&gt;

?P
The notes that follow this get far too into magical terms for the wolf to properly make use of it.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Read something else.|d3a Journal Notes]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="51" name="d3a Gemstone Crafting" tags="key" position="11600,5825" size="100,100">&lt;&lt;nobr&gt;&gt;

The naked wolf pulls the desk&#39;s chair and sits on it properly. He sets a gray gemstone from the lion&#39;s room on the table and pulls the spellbook closer to himself.

?P
With a frown, he begins looking for the right spell. Luckily, it doesn&#39;t take long for him to smile as he finds what has to be the right one.

?P
&#39;Teleport&#39;.

?P
It has some drawings of a gemstone and what seems to be something coming out of it. The wolf can&#39;t quite tell what that means, but the circle on the opposite page looks as genuine as the other ones. Drekkar has never done anything of this sort, but recalling the journal&#39;s notes, the wolf brings the empty gemstone over and sets it right in the center of the drawn circle, then turns to the other page to read the incantation words.

?P
They make little sense to him. Magic words that sound like a lot of mumbo-jumbo. The warrior reads them out loud, squinting his eyes and unsure if he&#39;s pronouncing anything right at all. Once he finishes speaking the last line...

?P
Nothing happens.

?P
But then, it does. As anxiety is starting to set on the wolf, the drawn circle in the book starts glowing. It&#39;s faint at first, but it grows brighter and brighter with a red hue, until it gets so bright that the wolf has to look away for a moment.

?P
And then, just like that, the glow goes away. When the wolf looks at it again, he smiles widely. In place of the gray gemstone sits an infused, glowing red one. The stone he supposedly needs.

?P
[[Continue|d3a The Exit]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="52" name="d3a Head Downstairs" tags="" position="9500,5625" size="100,100">&lt;&lt;nobr&gt;&gt;

Even if he couldn&#39;t find his gear, Drekkar can at least use his paws to cover himself as he carefully opens the door, closes it behind him, and heads downstairs into the unknown. His bare paws feel the cold stone beneath his feet, and the wolf&#39;s ears can&#39;t help but lower themselves at least a little bit. With his forced erection that will not retreat after the candle&#39;s curse, the best the wolf can do is press his cock against his leg to just barely cover it. Little bits of undesired pleasure course through him as his member still feels overly sensitive. He huffs but ignores it. When he gets out, he&#39;ll find clothes, find new gear, and then find a way to make Ivex pay for all of this humiliation...

?P
Oh, he will.

?P
For the time being, however, the wolf just takes careful steps down the stairs. The stairs have a perpetual turn, being circular in nature, with nothing but ill-lit stone walls on each of its sides. A burning torch adorns the wall every now and then, providing just enough light for the wolf to keep going. It&#39;s hard to keep track of how many circles he does, but after going down what feels like way too many steps, the staircase finally ends in a hallway.

?P
Unfortunately, in that hallway, there is also nothing but a single door. No exit, no stairs leading further down. The wolf tries to keep track of what this place&#39;s construction might look like, but it feels like it doesn&#39;t make sense...

?P
There is little choice but to proceed, though.

?P
[[Continue|d3a Second Floor]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="53" name="d3a Journal Notes" tags="" position="11150,6250" size="100,100">&lt;&lt;nobr&gt;&gt;

Among the many, many pages of passages, some stand out...

?P
Near the beginning of the journal...
* [[&#39;&quot;Memory Note-taking&quot;&#39;|d3a Memory Book Notes]]
* [[&#39;&quot;Academy activities&quot;&#39;|d3a School Notes]]

?P
By the middle of the journal...
* [[&#39;&quot;Compression breakthrough and triumph!!&quot;&#39;|d3a Tower Notes]]
* [[&#39;&quot;Gemonology was NOT for losers!&quot;&#39;|d3a Gem Notes]]
* [[&#39;&quot;Fuck ethics, seed is EVERYTHING&quot;&#39;|d3a Extraction Notes]]

?P
Near the end of the written content of the journal...
&lt;ul&gt;
  &lt;&lt;if $d_lionDoor&gt;&gt;
    &lt;li&gt;[[&#39;&quot;Pathetic feline thugs&quot;&#39;|d3a Lion Notes]]&lt;/li&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;li&gt;[[&#39;&quot;Reminders of fun stuff to do&quot;&#39;|d3a Kink Notes]]&lt;/li&gt;
  &lt;li&gt;[[&#39;&quot;Pitiful theft attempt&quot;&#39;|d3a Thief Notes]]&lt;/li&gt;
&lt;/ul&gt;

?P
The rest of the journal is still blank and unwritten.

?P
&lt;ul class=actions&gt;
  &lt;li&gt;[[Leave the journal as it is.|d3a The Desk]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="54" name="d3a Kink Notes" tags="" position="11550,6425" size="100,100">&lt;&lt;nobr&gt;&gt;

These notes are written in a brasher way with much less care for the handwriting. Around the page, there are marks left by some kind of dry liquid and, when the wolf touches them, they feel a tad sticky. It reads:

?P
&lt;span class=&quot;crude-handwriting&quot;&gt;
Ideas to try

?P
Earlier today, my thrall was cleaning the office and I was bored. Appreciating the nice view of his bare ass as he scrubbed the floor, an idea hit me. I decided to order him to get the broom as far up his ass as possible. It was an incredibly funny and hot scene seeing that big, imposing man struggling to get the broom into his ass. When I thought he had had enough, I ordered him to clean like that, brushing the floor with it inside his ass. I never laughed so much in my life. Not only that, but I made him clean my seed off the floor like that too after I spilled it from jerking off while watching.

?P
This got me thinking of other fun things I can do with these thralls. I must write them down so I don&#39;t forget my most brilliant ones

?P
- interdimension teleport portals
creating simple and small versions of the dimension hop used for teleportation I could create small interconnected portals and use them for my amusement. This gives me many ideas
-- attach a portal to the thrall&#39;s balls and attach his balls to a mortar, then order him to grind herbs all day using his own balls to grind them

?P
-- &lt;s&gt;put thrall&#39;s snout through portal and leave it over a lit arousal candle to have fun with his bodily reactions&lt;/s&gt; thrall would look ugly with a portal on his face, unpleasant to look at
-- leave thrall with his head through a portal and attach head under my work desk for ease of pleasure during work

?P
- continuous mage hand spells
supplying a gemstone with a mage hand spell and a source of continuous energy supply I could maintain it for hours, maybe days
-- hang mage hand crystal on the thrall&#39;s balls and have a hand enchanted to finger fuck him the entire time (would make it nice and loose for fucking)
-- hang on thrall&#39;s balls and have hand edge the thrall the entire time. would &lt;s&gt;require magical precision on subject&#39;s arousal state&lt;/s&gt; orgasm inhibitor

?P
-- order thrall to fight off hands and make them incorporeal so he cannot do it. have them assault him sexually just to watch him struggle

?P
- modify thrall spell to make target aroused from laughing and enchant feathers to tickle him until he orgasms multiple times
- make thrall luminescent and hang from tail on ceiling
- have thrall cum on his food before eating it

?P
- make him fuck funny things: a cake, mud, ice, his own ass?, sand
- turn thrall&#39;s bed into perpetual ice and have them masturbate lying on it
- do all of the above while thrall has the chastity from my chaste spell around his sheath? &lt;u&gt;funny&lt;/u&gt;

?P
More ideas would be possible with multiple thralls. Ideas for two thralls:

?P
- have thralls spank each other and see which one cries first
- make thralls suck on each other&#39;s...
&lt;/span&gt;

?P
There are dozens of other ideas written here, but the anger inside the wolf makes him growl and stop reading them. The only useful information that comes from this section is the absolute certainty that Ivex is a perverted madman.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Read something else.|d3a Journal Notes]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="55" name="d3a Knowledge Assessment" tags="key" position="10950,5725" size="100,100">&lt;&lt;nobr&gt;&gt;

According to Ivex&#39;s journal, the wolf needs a &lt;span class=&quot;imp-info&quot;&gt;red teleportation gemstone&lt;/span&gt; to get out of the tower.

?P
Ivex&#39;s journal mentions two ways to get those...

?P
&lt;&lt;if $d_blobGemstoneKnowledge&gt;&gt;
  One was created by a fox thief who ultimately failed to escape the tower. There&#39;s no sign of the fox, but in his journal, Ivex mentions that the gemstone he created was left &lt;span class=&quot;imp-info&quot;&gt;in this very room&lt;/span&gt; and the wolf&#39;s tail wags in recognition. It must &lt;span class=&quot;imp-info&quot;&gt;the red gemstone he saw floating inside that strange blob thing at the center of the room.&lt;/span&gt; Ivex made the mistake of leaving it there and, if the wolf could get his hands on that, he could use it to escape.
&lt;&lt;else&gt;&gt;
  One was created by a fox who ultimately failed to escape the tower. There&#39;s no sign of the fox, but in his journal, Ivex mentions that the gemstone he created was left &lt;span class=&quot;imp-info&quot;&gt;somewhere in what sounded like this very room&lt;/span&gt;. If Ivex hasn&#39;t taken it yet, the wolf is certain that he could and, therefore, use it to escape.
&lt;&lt;/if&gt;&gt;

?P
The second option is to &lt;span class=&quot;imp-info&quot;&gt;create a teleportation gemstone from scratch&lt;/span&gt;. According to Ivex&#39;s journal, that would require &lt;span class=&quot;imp-info&quot;&gt;an empty gemstone&lt;/span&gt; and &lt;span class=&quot;imp-info&quot;&gt;Ivex&#39;s spellbook&lt;/span&gt;...

&lt;&lt;if $d_spellbookKnowledge&gt;&gt;
  ?P
  Ivex&#39;s spellbook is a simple matter. Still at the desk, the wolf simply shifts his eyes to the large, closed tome full of spells and strange drawings that he looked at before.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $d_lionGemstoneKnowledge&gt;&gt;
  ?P
  Empty gemstones... The wolf has to think for a moment, but his ears suddenly twitch up as he recalls the lion from the other room opening a drawer full of gray, dim gemstones that he used to make a blue magical one. Those must be the empty gemstones!
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $d_spellbookKnowledge &amp;&amp; $d_lionGemstoneKnowledge&gt;&gt;
  That&#39;s it! With the spellbook in hand, and knowing where to get the empty gemstones, crafting one to get him out of this damned place should be possible.
&lt;&lt;else&gt;&gt;
  Crafting a gemstone could be possible if only the wolf could find all of the required materials...
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;&lt;if $d_spellbookKnowledge &amp;&amp; $d_lionGemstoneKnowledge&gt;&gt;
    &lt;li&gt;[[Try and craft the red gemstone.|d3a Gemstone Crafting]]&lt;/li&gt;
  &lt;&lt;else&gt;&gt;
    &lt;li&gt;[[Read something else on the journal.|d3a Journal Notes]]&lt;/li&gt;
    &lt;li&gt;[[Go back to the main hallway to explore more...|d3a Second Floor]]&lt;/li&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $d_blobGemstoneKnowledge&gt;&gt;
    &lt;li&gt;[[Try and get the red gemstone left by the fox.|d3a The Altar]]&lt;/li&gt;
  &lt;&lt;/if&gt;&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="56" name="d3a Lion Bondage" tags="key" position="11525,5575" size="100,100">&lt;&lt;nobr&gt;&gt;

Reaching for the rope, it is only a matter of holding the lion down while forcing his arms back to tie them behind his back. Once that is done, the wolf plays it safe by doing the same to his legs and finishing with the lion in a tight hogtie.

?P
Very satisfied with his work, the wolf smirks, looking down at the feline. He keeps struggling, not too intensely, but rather with a mild yet continuous amount of effort the whole time.

?P
&quot;The master&#39;s pendant must be worn by his thralls at all times. Visitors are excluded. You are not a visitor,&quot; he says up at the wolf, unsurprisingly.

&lt;&lt;if !$d_journalKnowledge&gt;&gt;
  ?P
  The wolf just rolls his eyes and steps over him to start searching the room. There are cabinets and cabinets of nothing but potions, some of them very suspicious-looking. The only thing of note the wolf is able to find in that room is the drawer full of &lt;span class=&quot;imp-info&quot;&gt;dim gemstones&lt;/span&gt;, yet after picking them up and looking them over, it is unclear if they can be of any use.
&lt;&lt;/if&gt;&gt;

?P
Attempting to speak to the lion is utterly useless. No matter what the wolf tries asking him, his response is always the same:

?P
&quot;The master&#39;s pendant must be worn by his thralls at all times. Visitors are excluded. You are not a visitor.&quot;

?P
Annoyed with it, the wolf&#39;s last idea is to try and remove the pendant the lion wears, as he does, however, the lion struggles more to avoid it. Still, bound as he is, he&#39;s no match for the big wolf, however...

?P
As soon as the wolf tries to pull the pendant from around the lion&#39;s neck, it just... doesn&#39;t budge. It feels as if it&#39;s blocked by something invisible. No matter how much the wolf pulls, the pendant will not go past the lion&#39;s neckline. Tearing the cord does not work either. No matter how frail and worn it looks, the thing does not break no matter what.

?P
After exhausting his options, the wolf just grunts and gives up. The lion looks up at him and repeats his sentence once more.

?P
&quot;The master&#39;s pendant must be worn-&quot;

?P
The wolf interrupts the mindless lion&#39;s annoying blabbering by shoving a piece of rope between his teeth. The lion continues to talk, his words now muffled, even while the wolf ties it behind his head to serve as a gag. Better not let him shout for help or draw attention.

&lt;&lt;if $d_journalKnowledge&gt;&gt;
  ?P
  Smiling, the wolf looks down at the bound lion. With him out of the way, there is nothing stopping Drekkar from taking what he needs. Stepping over the wiggling feline, the naked wolf gladly makes his way to the drawer full of gemstones and opens it.

  ?P
  Empty gemstones. One of the materials needed to create his way out according to Ivex&#39;s journal. The wolf&#39;s tail wags back and forth with satisfaction.

  ?P
  &lt;&lt;if $d_spellbookKnowledge&gt;&gt;
    Knowing where Ivex&#39;s spellbook is, the wolf eagerly grabs a handful of those gemstones and makes his way back to the other room.

    ?P
    He is ready to try and craft the key to his escape.

    ?P
    &lt;ul class=&quot;actions&quot;&gt;
      [[Try and craft the red gemstone.|d3a Gemstone Crafting]]
    &lt;/ul&gt;

  &lt;&lt;else&gt;&gt;
    [[Continue|d3a Second Floor]]
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;

  ?P
  Sighing, the wolf looks down at the bound lion. In the end, there wasn&#39;t anything particularly useful in this room, but at least Ivex&#39;s servant is neutralized. He should not be a problem anymore.

  ?P
  All the wolf can do for now is return to the hallway and explore the rest of this floor.

  ?P
  [[Continue|d3a Second Floor]]
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $d_lionGemstoneKnowledge = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="57" name="d3a Lion Conversation" tags="" position="11000,5150" size="100,100">&lt;&lt;nobr&gt;&gt;

Before the wolf can even properly finish speaking, however, the lion interrupts him.

?P
&quot;I am directed to provide the means for one to take their place. Wait here.&quot;

?P
The lion finally puts down the mortar and pestle and, without saying anything, moves to one of the cabinets and pulls open a drawer. In it, the wolf can see a handful of &lt;span class=&quot;imp-info&quot;&gt;dim, gray gemstones&lt;/span&gt;, of which the lion takes one.

?P
&lt;&lt;if $d_journalKnowledge&gt;&gt;
  The wolf&#39;s eyes grow wide! The words he read on Ivex&#39;s journal return to his mind. Empty gemstones... That might be what the wolf is looking for!
  ?P
  The lion, however, takes one and closes the drawer. He then walks towards the wolf. Drekkar tenses up for a moment, but the lion just walks past him and leaves the room. Confused, the wolf can at least see that he goes into the other room across the hallway. He&#39;s not sure what the lion is doing, but it&#39;s his chance!
  ?P
  In a rush, the wolf moves towards the drawer to open it and take a closer look. Indeed, it contains a handful of gray and dull-looking gemstones, but gemstones nevertheless. These must be the empty ones! The wolf&#39;s tail starts wagging, but before he can do anything with them, the sound of the lion returning forces him to quickly shut the drawer and step away as to avoid drawing suspicion.
  ?P
  When the feline returns, he no longer holds a gray gemstone, but rather a bright, blue one that glows just like the one hanging from the pendant around his neck. He must have enchanted it. That increases the wolf&#39;s hopes that those gemstones are what he is looking for. All he has to do now is not look suspicious and somehow deal with this lion so that he can get them...
  ?P
  The lion attaches a piece of string to it, and just like that, he has a makeshift pendant much like his own.

&lt;&lt;else&gt;&gt;
  He then walks towards the wolf. Drekkar tenses up for a moment, but the lion just walks past him and leaves the room. Confused, the wolf can at least see that he goes into the other room across the hallway.
  ?P
  It takes a few moments, but soon the lion returns and the dim gemstone he took with him now has a bright, blue glow. One that looks just like the one hanging from the pendant around the lion&#39;s neck. It is not surprising to see him attach it to a piece of string, quickly making a makeshift pendant out of it.
&lt;&lt;/if&gt;&gt;

?P
&quot;Take this and wear it,&quot; the lion offers, showing the pendant to the wolf. &quot;You will need this to navigate the master&#39;s tower as you should.&quot;

?P
The wolf looks at the pendant but hesitates. The lion&#39;s eyes lock on the wolf, patiently waiting for him to take the pendant. His expression remains neutral, his eyes blank... but he seems to know what he&#39;s doing. Somehow.

?P
&quot;What is your name? Do you work for Ivex?&quot; the wolf tries asking.

?P
The lion, however, simply repeats what he says before.

?P
&quot;Take this and wear it. You will need this to navigate the master&#39;s tower as you should.&quot;

?P
&quot;What does that pendant do?&quot; the wolf tries asking again.

?P
&quot;Take this and wear it. You will need this to navigate the master&#39;s tower as you should.&quot;

?P
Drekkar frowns. There is no talking to this lion. Whatever Ivex has done to him... he&#39;s barely a person! Looking down at the pendant, Drekkar bites his lip.

?P
On one side, it looks dangerous. What did the lion say before about taking his place...? On the other side, it could be useful for navigating the tower, as well as to keep the lion nice and friendly.

?P
Apparently tired of waiting, the lion starts stepping forward, raising the pendant up and readying it to be put on the wolf&#39;s neck. A decision on how to approach this must be taken now.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Let the lion put the pendant on.|d9a Enthrallment 1]]&lt;/li&gt;
  &lt;li&gt;[[Refuse the pendant.|d3a Lion Refusal]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="58" name="d3a Lion Description" tags="" position="10575,5075" size="100,100">&lt;&lt;nobr&gt;&gt;

The lion is large with shiny golden fur and an impressive mane. He is also quite muscular, with thick arms and a broad chest, as made plain by the fact that he does not wear much in terms of clothing. What seems to be some kind of harness made of leather has some straps going across his chest and back, and below? Nothing. The lion does not wear anything to cover his rear that is plain for the wolf to see from where he stands.

?P
[[Return|d3a Lion Room Intro]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="59" name="d3a Lion Fight" tags="ending" position="11150,5300" size="100,100">&lt;&lt;nobr&gt;&gt;

The lion rushes forward. The wolf growls, bracing to meet the large warrior chest to chest. Drekkar has fought many strong men before and, while many couldn&#39;t match the large wolf&#39;s strength and size, giving him an advantage, that is not the case with this lion. When the feline tackles him and pushes forward, the wolf finds himself losing his footing.

?P
Before he can fall, however, Drekkar spins, paws pushing back against the lion trying to grip and hold him so that they both fall side by side rather than letting the lion be on top. The wolf then props his knee up to try and get the upper hand and force the lion to roll with him to pin the feline down, but despite the lion&#39;s apparent mindless status, Drekkar can tell that his fighting reflexes are still sharp.

?P
The feline braces and pushes back, trying to force his way on top of the wolf instead. Drekkar changes strategies, pulling the lion instead with the intent of using the other warrior&#39;s own momentum to roll on top of him. That gives the feline an opportunity to push even closer to the wolf. The two stand chest to chest, Drekkar growling and the lion eerily quiet save for the grunts of effort as they wrestle on the ground. Each of them trying to get the upper hand over the other in a purely physical match.

?P
There is one major distraction for the wolf, however. While Drekkar has fought and wrestled many times, never before has he done it... entirely naked. And erect. Against a foe that is also naked and also hard. As the wolf shows his teeth and uses all of his muscle power to keep the lion from pinning him down, he can&#39;t help but feel his shaft grinding against the lion&#39;s fur. Against his leg as he throws the lion down and tries to take hold of the feline&#39;s arm...

?P
The lion grabs hold of Drekkar&#39;s wrist and tries to twist it. The wolf has seen that move before, so he moves his body alongside it to avoid the pain that would follow, and attempts to force his way against the lion&#39;s hold. His muscles bulge with effort, as does the lion&#39;s, both of them panting from the effort... And his arousal won&#39;t go away. Neither will the lion&#39;s for some reason...

?P
&quot;The master&#39;s pendant must be worn by his thralls at all... times...&quot; the lion says, grunting with effort as he keeps fighting. His voice still remains toneless save from the effect his effort has on it.

?P
The two roll on the ground, muscle against muscle, each trying to end up on top.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d3a Lion Pindown]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="60" name="d3a Lion Finish" tags="" position="11500,5375" size="100,100">&lt;&lt;nobr&gt;&gt;

Gritting his teeth, it takes every ounce of effort from the wolf to, instead of shoving his knot into that damned lion hard as he wants to, reach down to his knot with his own paw and give it a hard squeeze.

?P
Drekkar moans out loud. That&#39;s what he needs, that&#39;s what any wolf needs, to drive him crazy and past the point of no return. With pleasure overcoming him, the wolf&#39;s cock throbs, shoved deep inside the lion save for the knot, to start depositing the wolf&#39;s mark deep into the other male.

?P
It feels really good. After being tortured with unbridled lust for so long, getting to relieve himself in a tight, tender ass like that is everything the wolf could want and more. Jet after jet of wolf seed is deposited into the lion&#39;s backside while the wolf enjoys his pleasure.

?P
The lion, on the other hand, reacts to it with little more than a grunt. He still tries to get out of the pin, as usual, but the wolf has no trouble keeping the lion&#39;s arm against his back even as the wolf enjoys the pleasure of a mind-blowing orgasm. Due to the lack of knotting, it doesn&#39;t take long for his seed to overflow and start leaking down the lion&#39;s taint even with his cock still thick and hard into the lion&#39;s backside.

?P
As Drekkar pulls back, seeing his own seed drip down the large, defeated lion&#39;s ass down his taint and the back of his balls, brings him pleasure. His cock, however... As expected, despite how good the relief felt, the lupine member continues hard as a rock, knot inflated and feeling ready for more. The wolf contemplates for a brief moment shoving it back in. His own cum would probably make for good lubrication for a second round...

?P
But, no! He&#39;s wasted enough time as it is! Ivex could return at any time. Looking at the rope, the wolf takes a deep breath and prepares to do what he must.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Tie the lion up and be done with it.|d3a Lion Bondage]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="61" name="d3a Lion Fucking" tags="" position="11400,5250" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  &lt;&lt;set $d_arousalLevel = 2&gt;&gt;
&lt;&lt;/arc-only&gt;&gt;

It&#39;s too hard to resist. Besides, the lion is clearly a thrall fighting for Ivex. The wolf has beaten him fair and square, and now...

?P
With a lustful growl, Drekkar pulls his hips back so that he can line himself up with the struggling lion&#39;s hole. His cock is already coated in his own pre-cum from all the fighting, the damned lingering arousal from that blasted candle. The thought of it, the memories, the humiliation he went through because of Ivex&#39;s pervertedness makes the wolf angry. All he went through... Yeah, it&#39;s time to let it out on something.

?P
With a grunt, the wolf drives his hips forward. The tapered tip of his canine cock meets the lion&#39;s entrance right away and, with the force he put behind it, the feline simply grunts as the wolf spreads him open with ease. Drekkar, on the other hand, groans out loud. The feeling of the lion&#39;s warmth around his cock, driven to max sensitivity by Ivex&#39;s foul magic, is just... sublime. This feels so much better than he ever thought it would.

?P
The wolf&#39;s lust burns tenfold upon feeling it for the first time. With a growl, the wolf presses the lion harder against the ground and pushes forward, driving more of his cock into the pinned feline and reveling in how incredibly good it feels.

?P
The wolf&#39;s mind slips towards sex again. Blissful, incredible, amazing sex. Driving his cock forward, the wolf keeps going until nothing but his large, engorged knot remains outside. Then, still growling, he pulls back, only to drive himself back in and feel how tightly those walls grip at his cock. This is the best sex he&#39;s ever had.

?P
The lion below only grunts every now and then in reaction and keeps up the same struggle to try and get out. His expression still doesn&#39;t change, even as the wolf starts fucking him steadily. Drekkar doesn&#39;t care, though. The tightness of the lion&#39;s backside feels like the most amazing thing he&#39;s ever sunk his cock into at that moment. Sensitive as it was, each thrust deep into the lion&#39;s ass sends electric jolts of sheer pleasure coursing through the whole of the wolf&#39;s body.

?P
Before long, Drekkar is panting like a dog as he fucks with reckless abandon. His own pre-cum, coming in excess, makes it smoother and smoother. Each thrust is pure bliss, and the wolf goes fast and hard, reveling in it. Driven by pure instinct, the wolf hammers down, his growling getting louder as his pleasure reaches new heights, until the base urge any wolf has while fucking starts overcoming him.

?P
His knot is the only thing that still remains outside of the lion. It begs to feel that same tightness around it, to be gripped, squeezed, and to make the wolf&#39;s act of filling that damned lion up the best it can be.

?P
Despite his eagerness and need, however, the wolf glances at the rope. Knotting the lion would mean being stuck to him for a long time, which is a luxury he definitely does not have. His rational mind tells him that, but as Drekkar keeps fucking, his body begs him to knot the damned bastard. As he fucks faster, his pleasure reaching its peak...

&lt;&lt;if $d_arousalLevel &gt;= 2&gt;&gt;
  ?P
  But there&#39;s no decision to be made. After being exposed to that candle for so long, the wolf&#39;s body is mad with arousal. He needs to knot, he &lt;b&gt;needs&lt;/b&gt; to, and with a huff of mad lust, he starts working towards it...
&lt;&lt;/if&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;&lt;if $d_arousalLevel &lt; 2&gt;&gt;
      &lt;li&gt;[[Resist knotting him.|d3a Lion Finish]]&lt;/li&gt;
    &lt;&lt;else&gt;&gt;
      &lt;li&gt;[[Knot him!|d3a Lion Knotting]]&lt;/li&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="62" name="d3a Lion Knotting" tags="ending" position="11625,5225" size="100,100">&lt;&lt;nobr&gt;&gt;

Gritting his teeth, the wolf puts even more force behind his fucking. It feels good, great even, to give in to the overwhelming lust. Drool runs down the wolf&#39;s muzzle to fall down on the lion&#39;s exposed back at the mere thought of how that tight ass is going to feel around his knot.

?P
It takes effort. A lot of effort. With a lot of grunting from both parties and a lot of insistence from the wolf, his knot finally spreads the lion&#39;s ass, the large bulb forcing its way in until finally...

?P
With a pop, Drekkar has to resist the urge to downright howl. As his knot makes its way into the lion&#39;s ass, his cock drives deep and the feline&#39;s warm walls grip it with such tightness...!

?P
It feels heavenly!

?P
Driving his hips back and forth, the wolf still fucks the lion with his cock lodged inside him. It&#39;s enough to make the lion grunt and clench around it, and the grip on his knot is all that he, or any wolf, needs to finally...

?P
Drekkar&#39;s tongue hangs from his muzzle as he feels his body getting overcome with pleasure. After being subjected to unbridled lust for so long, feeling something this tight around his cock and knot feels like absolute heaven. The wolf leans forward, almost lying over the lion. In a completely instinctual urge, he bites down on the back of the lion&#39;s neck. Like a feral wolf, he grips the lion&#39;s fur there as he feels his cock start spasming to finally mark the lion&#39;s insides deep with his seed.

?P
The wolf&#39;s knot grows to full size and pleasure overcomes him for real. It is by far the best orgasm Drekkar has ever felt in his life. The pleasure radiates from his cock, from his knot, and overcomes his entire being. For a few long, blissful seconds, there is nothing but pleasure.

?P
Moaning, Drekkar lets go of the lion&#39;s neck, panting as he drives his hips back and forth to milk his cock in there as it still shoots jet after jet of seed deep into the lion. His knot does not let a single drop escape, sealing it all inside as any canine should, with more and more getting added by the second.

?P
The wolf&#39;s orgasm is hard and long and, even after it starts ebbing, his cock does not soften in the least. It remains just as hard as before, locked in the lion as he knows it will still be for quite some time. It feels great, however, and Drekkar finds himself smiling without realizing, at least until...

?P
With one sudden move, the lion&#39;s hand reaches over his head. The wolf feels something around his neck. Looking down, he can see it is... the pendant.

?P
Drekkar blinks. Through his fucking, he didn&#39;t realize the lion had freed his other hand, reached out for the pendant and now managed to place it over his neck.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Enthrallment 1 (Knot)]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="63" name="d3a Lion Notes" tags="" position="11425,6425" size="100,100">&lt;&lt;nobr&gt;&gt;

These notes are written in a brasher way with much less care for the handwriting. They seem to mention a lion, which reminds the wolf of the one he&#39;s seen in the tower, making them possibly worth reading. It reads:

?P
&lt;span class=&quot;crude-handwriting&quot;&gt;
Today when I was shopping for ingredients at the Kargaro markets, two tall men grabbed me by the shoulders and led me to an alley. Taking off their hoods, I found that they were fellow felines: a tiger and a lion.

?P
Just because they were several feet taller and more muscular than me, they thought they could rob me. Utter, absolute fools.

?P
My writing can&#39;t convey my feelings at the time. I smiled wide. When I went shopping for alchemical herbs, I was trying to solve the conundrum of needing more subjects, and then the subjects just bring me to a dark alley and offer themselves to me.

?P
They pulled out daggers and threatened me. I laughed at their face. I had a few extra transportation gems on me, so when the lion charged at me spouting nonsense about beating me up, I just pointed it at him and poof.

?P
The look on his tiger companion&#39;s face when I made his thug friend disappear was utterly priceless. He thought charging at me as his friend did would work. These brutes are all just about as useful as mindless ferals. Needless to say, he met the same fate, and I left that alley with a big smile on my face knowing I had two new subjects to play with.

?P
Once back in my domain, it was the simplest matter to subdue them both. I had some fun with them. Both of them were scarred, seasoned warriors, and I managed to make them tell me they were former mercenaries stealing because of work shortage. Pathetic.

?P
I put the tiger in extraction, but I like the way the lion looks. He has a beautiful mane, a sculpted body and is well-endowed. I enjoyed playing with him, maybe also because lions tend to look down upon panthers. Who is inferior now, I asked him as he crawled between my legs and licked my balls.

?P
I decided it would be a waste to just throw him at extraction as well and, instead, I decided to use him to experiment with my new enthrallment spells. They are still simple, but they seem to work well enough.

?P
He now obeys my orders without thinking. Literally.

?P
I will keep tweaking with his mind, however. The enthrallment spell coming from a gemstone is indeed inefficient. It needs to stay with him at all times. I would like to find a way to make his mind-altering permanent so that I no longer have to worry about him, nor do I need to waste a gemstone on that.

?P
I need to make the spell better as well. Suppressing his own mind works, but it makes him too simple and dumb with nothing but my weaved rules to live by. Last week I ordered him to stay still while I fucked him against a table and, when I was done, I just walked away. Next morning I found him still there in the exact same position standing still with my dry cum around his ass. Similarly, when I ordered him to clean up some semen I had shot on the floor in my office with his tongue and left, I found him the next day still working on cleaning the office as a whole with his tongue. It was funny but highly inefficient.

?P
For now, the temporary solution was to keep the simple spell in a gemstone while multiplying the sturdiness and cursing strings to fashion a pendant. It makes it indestructible and unremovable, but it will need further refinement. So much to do, so little time.

?P
At least now I have some help around the tower. More thralls would do nicely. Perhaps a way to make the spell permanent could involve...
&lt;/span&gt;

?P
This seems to be where the notes about the lion end. The topic of the notes changes to magical gibberish on mind-altering magic.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Read something else.|d3a Journal Notes]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="64" name="d3a Lion Pindown" tags="" position="11275,5300" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  &lt;&lt;set $d_arousalLevel = 2&gt;&gt;
&lt;&lt;/arc-only&gt;&gt;

The feline is good. Very good. How can someone this strong end up grinding herbs in some psycho mage&#39;s tower?! The wolf&#39;s wondering has to wait, however, because as the lion uses his legs to trap his own, things start getting ugly. Much to the wolf&#39;s dismay, the lion grips him closer than ever and, in that position, the wolf&#39;s cock finds itself hard-pressed against the lion&#39;s own member. It feels warm against the wolf&#39;s sensitive length, tingles of pleasure distracting Drekkar from the urgency of the situation. The lion forces him back, climbing on top of him, dangerously close to pinning him down...

?P
&quot;NO!&quot; the wolf yells at the lion&#39;s face. With a surge of anger, the wolf lets out a loud snarl and bends his knee, hitting the exposed lion straight on the nuts.

?P
This time, the wolf sees an expression. Or, at least, a semblance of one. The lion&#39;s face twists in pain and, even though his eyes stay eerily still, the verge of tears can be seen in its corner. The feline loses his strength for a moment, and that moment is enough for the wolf to seize victory.

?P
In one swift, precise motion, Drekkar throws his weight to one side in order to topple the lion above him. The feline falls to the side, belly down, one hand gripping at his kicked balls, and within a second, the wolf is above him. Pressing a knee to the lion&#39;s lower back, Drekkar pins the feline down against the ground harshly before grabbing the lion&#39;s arm and twisting it behind his back. Holding the feline like that, all the lion can do is squirm under him, but with the whole of the large wolf&#39;s weight pinning him down, his efforts are in vain.

?P
&quot;The master&#39;s pendant must be worn by his thralls at all times,&quot; the lion repeats, grunting with stubborn effort to escape, but to no avail. The wolf, still panting and out of breath from the fighting, finally has time to catch it. He smirks. The lion is defeated.

?P
Glancing to the side, the wolf realizes that they rolled back and forth so much that the rope is within his reach. All he has to do is uncoil it and tie the lion up, then he&#39;ll have time to properly...

?P
Interrupting the wolf&#39;s line of thought, the lion tries to use his legs to escape the wolf&#39;s pin. For Drekkar, however, that&#39;s little more than a mild annoyance. The wolf, keeping the lion&#39;s arm firmly pressed against his back, shifts down to sit right on the lion&#39;s thighs and keep his legs in check.

?P
However...

?P
As he does so, the lion keeps squirming. When he does, the wolf looks down to see...

?P
The lion&#39;s rear is toned and round. The feline&#39;s tail swishes back and forth in distress, but with his squirming, his cheeks move and up and down, back and forth... right against the wolf&#39;s cock. His erection sits right there, between the beautiful molds of the lion&#39;s ass, and his squirming just makes it grind against it. Tingles of pleasure shoot up at the wolf and, as he looks down with more attention, he can see everything. The lion&#39;s exposed ass. Bare. Vulnerable. It looks really tight...

&lt;&lt;if $d_arousalLevel == 1&gt;&gt;
  ?P
  The candle&#39;s lingering influence... it must be that, but... It&#39;s so hard to resist. This damned lion, one of Ivex&#39;s thralls, gave him so much trouble. He&#39;s asking for it. Looking down at the feline&#39;s tender hole, the wolf&#39;s cock throbs. As he keeps squirming, the lion&#39;s backside gets matted with the lupine&#39;s pre-cum. Drekkar huffs, his eyes growing wide with lust and desire. Maybe... Maybe he could...

&lt;&lt;elseif $d_arousalLevel == 2&gt;&gt;
  ?P
  The candle&#39;s lingering influence... it drives the wolf crazy, It&#39;s so hard to resist. This damned lion, one of Ivex&#39;s thralls, gave him so much trouble. He&#39;s asking for it. Looking down at the feline&#39;s tender hole, the wolf&#39;s cock pulses with life. As he keeps squirming, the lion&#39;s backside gets matted with the lupine&#39;s pre-cum. Drekkar huffs, his eyes growing wide with lust and desire. It&#39;s right there, ripe for the taking...
&lt;&lt;/if&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Fight the urge. Tie the lion up and be done with it.|d3a Lion Bondage]]&lt;/li&gt;
    &lt;li&gt;[[The lion is a defeated thrall. Just a quick fuck to help relieve the urges...|d3a Lion Fucking]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="65" name="d3a Lion Refusal" tags="" position="11025,5300" size="100,100">&lt;&lt;nobr&gt;&gt;

There&#39;s no way Drekkar is letting this lion put some magic gadget on him without him knowing what it is, especially coming from someone like that panther.

?P
With a growl, Drekkar takes a step back and slaps the lion&#39;s hands to the side.

?P
&quot;I&#39;m not wearing that until you start doing some explaining!&quot; the wolf exclaims, baring his teeth towards the feline.

?P
The lion simply stares at the wolf for a moment. Drekkar half expects the dumb feline to just repeat the same line from before, but he does not.

?P
&quot;The master&#39;s pendant must be worn by his thralls at all times. Visitors are excluded. You are not a visitor.&quot;

?P
The wolf narrows his eyes towards the lion and opens his muzzle to respond, but before he can... It is only Drekkar&#39;s warrior reflexes that catch the way the lion positions his feet before he lunges forward that allows the wolf to react in time. Within a moment, the large lion pounces forward at the wolf, tackling him and bringing the pendant up to try and force it up past his neck.

?P
&quot;Get OFF me!&quot; the wolf growls. The wolf&#39;s arms come up to hold the lion&#39;s as the feline tries to grab and take hold of him. Bringing his leg up to hit the lion in the ribs, Drekkar manages to avoid having the pendant forced upon him by the grabbing feline. Although his expression never seems to change, the lion does grunt at the hit and retreats with a step back.

?P
The feline&#39;s eyes remain locked with the wolf, though. It seems the lion does not intend on backing down from putting that necklace on Drekkar, which makes the wolf even more sure that not accepting it was the right choice.

?P
Now, however, he has to face a large lion warrior...

?P
The wolf&#39;s eyes scan the room around him for weapons or ways to subdue the lion. Unfortunately, there is hardly anything that could make for a useful weapon or tool, but at one corner, there is a &lt;span class=&quot;imp-info&quot;&gt;bundle of old rope&lt;/span&gt; that could be used to tie the bastard up and keep him quiet, at least.

?P
After all, Ivex could still return at any minute or hear something if things get too loud...

?P
[[Continue|d3a Lion Fight]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="66" name="d3a Lion Room Intro" tags="" position="10575,5225" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if !$d_lionDoor&gt;&gt;
  Silently approaching the half-open door, the wolf carefully places his paw upon it and slides it open just a tad bit more so that he can peer inside.

  ?P
  It&#39;s a strange room. A large counter with a plenitude of vials adorns its left side, the only side of the room the wolf can see from that viewpoint, with shelves of instruments, materials, and more empty vials above it. That&#39;s not what surprises the wolf, however. Near the center of the room, turned towards the counter and with several jars of strange herbs surrounding him stands... a [[lion|d3a Lion Description]].

  ?P
  His face is not visible from the door where the wolf stands, but the lion works with a mortar and pestle, grinding herbs in what seems to be a dull, repetitive process. He seems completely engrossed in his work to the point where he barely moves.

  ?P
  At least it&#39;s not Ivex, but who is he? From his body alone, Drekkar can tell he&#39;s some kind of warrior. Upon further inspection, scars can be seen here or there under his fur upon his legs, back, arms...

  ?P
  Perhaps observing him for a little while longer could be useful. Getting discovered by him, however, could be dangerous...

  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Pry further and watch the lion.|d3a Lion Watch]]&lt;/li&gt;
    &lt;li&gt;[[Return to the hallway.|d3a Second Floor]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;

&lt;&lt;else&gt;&gt;
  Prying through the door once more, nothing has changed. The semi-naked, muscular [[lion|d3a Lion Description]] is still there engrossed in his work with the mortar and pestle. In fact, he has barely moved an inch, just continuing to grind herbs and setting them onto vials.

  ?P
  &lt;&lt;if !$d_lionCutscene&gt;&gt;
    Observing him a little closer could be useful. Getting discovered by him, however, could be dangerous...
  &lt;&lt;else&gt;&gt;
    Approaching him for more information could be useful, even if risky...
  &lt;&lt;/if&gt;&gt;

  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Pry further and watch the lion.|d3a Lion Watch]]&lt;/li&gt;
    &lt;li&gt;[[Return to the hallway.|d3a Second Floor]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $d_lionDoor = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="67" name="d3a Lion Start" tags="" position="10850,5225" size="100,100">&lt;&lt;nobr&gt;&gt;

Frowning and taking a deep breath, the wolf has had enough observing and decides to approach the lion. One of his paws goes down to cover his hard cock as best as it can, but the wolf&#39;s ears remain up and his stance a wary one. The lion has the appearance of a warrior himself, and he&#39;s definitely not normal, so he doesn&#39;t know what to expect.

?P
Abandoning subtlety, the wolf opens the door and steps in. The sounds do cause the lion to turn his head towards the lupine, although his hands continue to grind herbs and his expression does not change, even as he sets his eyes on Drekkar.

?P
Waiting to see what the lion will do, the wolf says nothing, but for the first few seconds... the lion does not react. His eyes remain locked on the wolf, but he doesn&#39;t speak. Drekkar starts to think the lion won&#39;t even acknowledge his presence, which wouldn&#39;t be so bad, when finally, the feline does form words.

?P
&quot;All visitors must be welcomed,&quot; the lion says, his voice as void of expression as his eyes. &quot;The master has not scheduled any visitors. Are you here to take your place?&quot;

?P
The question makes the wolf blink. At least the lion isn&#39;t showing any signs of aggression. Drekkar can&#39;t help but feel uncomfortable speaking to a naked, erect male while being naked and aroused himself... but what is even normal in this cursed tower? The wolf brushes those thoughts aside and scratches his head.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[&#39;&quot;Uhh... Yes?&quot;&#39;|d3a Lion Conversation]]&lt;/li&gt;
  &lt;li&gt;[[&#39;&quot;I&#39;m looking for a way out...&quot;&#39;|d3a Lion Conversation]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="68" name="d3a Lion Watch" tags="" position="10725,5225" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;if !$d_lionWatch&gt;&gt;
  &lt;&lt;set $d_lionWatch = true&gt;&gt;
  &lt;&lt;set $d_lionWatch1 = 40&gt;&gt;
  &lt;&lt;set $d_lionWatch2 = 20&gt;&gt;
  &lt;&lt;set $d_lionWatch3 = 20&gt;&gt;
  &lt;&lt;set $d_lionWatch4 = 40&gt;&gt;
  &lt;&lt;set $d_lionWatch5 = 50&gt;&gt;
  &lt;&lt;set $d_lionWatch6 = 60&gt;&gt;
  &lt;&lt;set $d_lionWatch7 = 90&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $d_lionWatchFinal = ($d_lionWatch1 + $d_lionWatch2 + $d_lionWatch3 + $d_lionWatch4+ $d_lionWatch5 + $d_lionWatch6 + $d_lionWatch7)&gt;&gt;

With care, the wolf pries the door open just a little more so that he can slide his head inside to watch. Drekkar&#39;s erection grinds uncomfortably against the wooden door, reminding him of its presence, but he does his best to ignore it.

?P
With a better view, it is plain to see that the lion is not only naked but also... erect himself. His member is pressed between the counter&#39;s wood and his leg down to the side, forgotten but remaining hard as he works. His hands make the same motion to grind herbs without ceasing. From this new vantage point, the wolf can also see his eyes. They seem... vacant?

?P
Expressionless.

?P
The lion works with a constant, unmoving straight face. The only other thing of note that the wolf can now see is that this lion also wears, alongside the leather harness, a pendant around his neck. It has a blue gemstone attached to it that lets out a soft glow.

?P
Other than that, the lion just continues to grind herbs like before. Never stopping and barely moving. The wolf continues to watch him quietly. Judging by the lion&#39;s stillness, it might take some &lt;span class=&quot;imp-info&quot;&gt;time&lt;/span&gt; before he does something interesting.

?P
&lt;span id=&quot;timer1&quot;&gt;
&lt;div class=&quot;dot-flashing&quot;&gt;&lt;/div&gt;
&lt;/span&gt;

&lt;&lt;timed `$d_lionWatch1 + &quot;s&quot;` t8n&gt;&gt;
  &lt;&lt;replace &quot;#timer1&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
  &lt;&lt;set $d_lionWatch1 = 0&gt;&gt;

  Upon spending some time observing him, the wolf can see that the lion&#39;s motions feel... unnatural. His vague expression remains unchanged as well. Something is off about him.
  ?P
  &lt;span id=&quot;timer2&quot;&gt;
    &lt;div class=&quot;dot-flashing&quot;&gt;&lt;/div&gt;
  &lt;/span&gt;

&lt;&lt;next `$d_lionWatch2 + &quot;s&quot;`&gt;&gt;
  &lt;&lt;replace &quot;#timer2&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
  &lt;&lt;set $d_lionWatch2 = 0&gt;&gt;

  The gleam of his pendant is more than just a reflection of the low light of the burning lanterns that illuminate the room. When the wolf focuses his eyes on it it feels as if... there&#39;s something... swirling inside it? It&#39;s definitely magical in some way.
  ?P
  &lt;span id=&quot;timer3&quot;&gt;
    &lt;div class=&quot;dot-flashing&quot;&gt;&lt;/div&gt;
  &lt;/span&gt;

&lt;&lt;next `$d_lionWatch3 + &quot;s&quot;`&gt;&gt;
  &lt;&lt;replace &quot;#timer3&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
  &lt;&lt;set $d_lionWatch3 = 0&gt;&gt;

  When the lion finishes grinding the current herbs, he reaches for a new bowl of them without even looking. Shoving his large hand inside, he grabs a handful and just shoves them into the mixture to grind them. His eyes don&#39;t shift one inch as he continues.
  ?P
  ...Yet at the same time, the wolf can see one reaction in him. His member had been erect before, but it seems to harden yet a little more even though nothing has touched it. Maybe the lion thought about something arousing? Drekkar frowns at the sight. This can&#39;t be a proud warrior like he thought...
  ?P
  All the lion does is continue to grind herbs.
  ?P
  &lt;span id=&quot;timer4&quot;&gt;
    &lt;div class=&quot;dot-flashing&quot;&gt;&lt;/div&gt;
  &lt;/span&gt;

&lt;&lt;next `$d_lionWatch4 + &quot;s&quot;`&gt;&gt;
  &lt;&lt;replace &quot;#timer4&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
  &lt;&lt;set $d_lionWatch4 = 0&gt;&gt;

  It takes a while for the lion to grind the new herbs to what might be an acceptable level. Nothing of them remains in the mortar and then, finally, the lion puts it down. The wolf&#39;s ears perk up. It&#39;s the first time he&#39;s done that.
  ?P
  The lion takes a step back from his work. Drekkar retreats a little thinking he might head or look towards the door, but he doesn&#39;t. Instead, the lion simply takes hold of his cock with his big paw and, without even looking down at it... starts stroking it.
  ?P
  The wolf&#39;s eyes go wide. The big male has stopped what he was doing to... jerk off? Just like that? The lion&#39;s expression remains blank and unchanged even as his paw glides up and down the length of his hard member, stimulating it. As he starts doing it, he continues to just jerk himself off in a steady rhythm.
  ?P
  &lt;span id=&quot;timer5&quot;&gt;
    &lt;div class=&quot;dot-flashing&quot;&gt;&lt;/div&gt;
  &lt;/span&gt;

&lt;&lt;next `$d_lionWatch5 + &quot;s&quot;`&gt;&gt;
  &lt;&lt;replace &quot;#timer5&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
  &lt;&lt;set $d_lionWatch5 = 0&gt;&gt;

  Standing there at the door watching the lion masturbate makes the wolf shift uncomfortably. He remains absolutely silent as to not be seen, but the lion never turns his head or shifts his gaze. He simply keeps staring down at the ground herbs while his paw works at his cock. Still, watching this, for some reason, makes the wolf&#39;s own arousal twitch. He doesn&#39;t have a particular desire for males, but the lingering arousal in his system makes watching the large lion masturbating become a somewhat arousing experience...
  ?P
  Beads of pre-cum appear at the tip of the lion&#39;s member only to then turn into thin strings as they fall down to the floor below. The lion&#39;s rhythm doesn&#39;t change and, for a while, it just feels like he&#39;s going to keep idly jerking off forever.
  ?P
  &lt;span id=&quot;timer6&quot;&gt;
    &lt;div class=&quot;dot-flashing&quot;&gt;&lt;/div&gt;
  &lt;/span&gt;

&lt;&lt;next `$d_lionWatch6 + &quot;s&quot;`&gt;&gt;
  &lt;&lt;replace &quot;#timer6&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
  &lt;&lt;set $d_lionWatch6 = 0&gt;&gt;

  The lion keeps jerking himself off. The huge leonine&#39;s hand just keeps beating his cock without ceasing.
  ?P
  Drekkar&#39;s ears twitch as, finally, something changes. In a display of flexibility, the large lion suddenly brings his leg up high and plants a footpaw firmly up on the counter in front of him. With his hand, he pulls the mix of herbs closer, and with the lion tilted slightly to the side now the wolf gets a full view of the events.
  ?P
  The large lion&#39;s chest heaves. Though his eyes remain wide and expressionless, his breathing clearly picks up and his hand speeds up as well, masturbating with greater force. The lion points his cock down... right at the bowl filled with ground herbs that he just pulled up to be right under it.
  ?P
  Drekkar&#39;s eyes grow wider yet. Does the lion intend to...?
  ?P
  The wolf gets his answer soon enough. The lion grunts and huffs, the first real noises the wolf has heard him let out so far. Then, the feline grits his teeth, showing his fangs as his hand speeds up once again to jerk his cock off with vigor. The lion&#39;s muscles bulge from the increased effort, until, finally...
  ?P
  The lion lets out a long grunt as his cock finally erupts. A burst of seed shoots straight into the herb mixture, followed by another, and then a whole sequence of pearly cum keeps coming to mix in with the herbs ground within the bowl.
  ?P
  The male keeps pumping his cock, milking it of every last drop of his seed into the mortar before the lion lets out one last sigh and pulls his footpaw from the counter. Standing properly, the leonine lets go of his cock that only twitches alone in the air, but remains erect, and picks up the mortar and pestle to start mixing the cum with the ground herbs.
  ?P
  Much to the wolf&#39;s dismay, after mixing for a while longer, the lion soon dumps the mixture into one of the empty vials, making a &#39;potion&#39; out of it, before grabbing a new handful of herbs to start grinding from the start.
  ?P
  What the hell?!
  ?P
  &lt;span id=&quot;timer7&quot;&gt;
    &lt;div class=&quot;dot-flashing&quot;&gt;&lt;/div&gt;
  &lt;/span&gt;

&lt;&lt;next `$d_lionWatch7 + &quot;s&quot;`&gt;&gt;
  &lt;&lt;replace &quot;#timer7&quot;&gt;&gt;&lt;&lt;/replace&gt;&gt;
  &lt;&lt;set $d_lionCutscene = true&gt;&gt;
  &lt;&lt;set $d_lionWatch7 = 0&gt;&gt;
  &lt;&lt;set $d_lionWatchFinal = 0&gt;&gt;

  With his own cock still pulsing after the display, the wolf just continues watching for a while longer, but after the unusual display, the lion goes back to his old, expressionless self doing nothing but grinding herbs in a continuous motion.
  ?P
  It doesn&#39;t seem like he&#39;s going to be going anywhere or doing anything different for the time being unless interrupted. On the other hand, he seems almost... mindless. Despite his size, he does not seem as dangerous to the wolf as he looked at first. Approaching him could be a good idea after all... maybe.

&lt;&lt;/timed&gt;&gt;

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Stop watching him and return to the hallway.|d3a Second Floor]]&lt;/li&gt;
  &lt;&lt;if $d_lionCutscene&gt;&gt;
    &lt;li&gt;[[Approach the lion.|d3a Lion Start]]&lt;/li&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;timed `$d_lionWatchFinal + &quot;s&quot;` t8n&gt;&gt;
      &lt;li&gt;[[Approach the lion.|d3a Lion Start]]&lt;/li&gt;
    &lt;&lt;/timed&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="69" name="d3a Memory Book Notes" tags="" position="10800,6425" size="100,100">&lt;&lt;nobr&gt;&gt;

This is the first entry in the journal. The calligraphy is neat and done with care, but the ink is already starting to fade, signaling that it might have been written a long time ago. It reads:

&lt;span class=&quot;handwriting&quot;&gt;
&lt;h3&gt;Memory Notes&lt;/h3&gt;

Professor Gallahan instructed us to write what he calls a &#39;memory book&#39;. He says that we should take note of absolutely everything, the more the better, in order to have our memories and experiences preserved in writing. It makes so much sense! I was very worried about botching the beginner memory spells we are learning in our mind-altering classes, but this makes me feel better.

?P
The professor says that all experiences must be jotted down, whether good or bad, as even bad experiences provide wisdom and clarity when read over again. He is so wise! Truly a remarkable wolf. I have nothing but admiration for his kind.

?P
The magic academy is the best! This is only my first week and already I got all of its routines. In the morning...
&lt;/span&gt;

?P
This part continues on to some far too detailed notes of what seems to be Ivex&#39;s routine as a student, as well as notes from magic classes and a lot of random gibberish.

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Read something else.|d3a Journal Notes]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="70" name="d3a Notes Knowledge" tags="key" position="10950,6025" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if !$d_journalKnowledge&gt;&gt;
  Re-reading the journal entry one more time, the naked wolf&#39;s tail wags back and forth. That poor fox, wherever he is, left very useful information in these records! If that fox adventurer could have escaped the tower, then so can Drekkar.
  ?P
  All he needs to do is gather the right things...
  ?P
  It seems that what is needed to get out is a red gemstone that lets the user teleport out of the crazy tower. When the wolf thinks back to his time bound in the cross, before Ivex left, the memory of the panther clutching a glowing red gemstone makes the wolf&#39;s ears twitch. That has to be it! If he can get his hands on one of those...
  ?P
  But how?
  ?P
&lt;&lt;/if&gt;&gt;

According to these notes...

?P
The fox that tried and failed to escape had a red gemstone made for that purpose. That gemstone should currently be &lt;span class=&quot;imp-info&quot;&gt;left somewhere in this very room&lt;/span&gt;. That is if Ivex hasn&#39;t had the time to get rid of it just yet...

?P
Alternatively, it seems to be possible to make one. According to the text, it isn&#39;t too hard to &lt;span class=&quot;imp-info&quot;&gt;make a teleportation gemstone&lt;/span&gt; like the fox did.

?P
Making one seems to require that the wolf use &lt;span class=&quot;imp-info&quot;&gt;Ivex&#39;s spellbook&lt;/span&gt; that is mentioned in the text, as well as an &lt;span class=&quot;imp-info&quot;&gt;empty gemstone&lt;/span&gt; to apply the spell into.

?P
The wolf can&#39;t help but smile. Escape is definitely within his reach! The adrenaline coursing through his body makes the wolf&#39;s magically erect cock throb as well, which in turn annoys him. Yes, he can escape and then get rid of Ivex&#39;s vile magic to then, somehow, get rid of the panther himself later.

?P
All he has to do is get his hands on one of those red gemstones. Drekkar knows that gathering more information on what he has at his disposal is vital. At the same time, however, there is no time to lose. Ivex has been gone for a while and he might be back at any time.

&lt;&lt;if $d_spellbookKnowledge || $d_blobGemstoneKnowledge || $d_lionGemstoneKnowledge&gt;&gt;
  ?P
  The wolf&#39;s ears twitch and his smile widens. He, in fact, already has some knowledge about these factors!

  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Assess his knowledge...|d3a Knowledge Assessment]]&lt;/li&gt;
  &lt;/ul&gt;

&lt;&lt;else&gt;&gt;
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Read something else on the journal.|d3a Journal Notes]]&lt;/li&gt;
    &lt;li&gt;[[Sift through the other contents of the desk.|d3a The Desk]]&lt;/li&gt;
    &lt;li&gt;[[Get away from the desk and look somewhere else.|d3a Extraction Room]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $d_journalKnowledge = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="71" name="d3a Room" tags="" position="9200,5200" size="100,100">&lt;&lt;nobr&gt;&gt;

With his erection bobbing between his legs, the wolf searches the room with haste.

?P
Throwing the cabinets open, Drekkar frowns. More papers, candles, ink and quills. Standard utilities and nothing else. The wolf doesn&#39;t waste too much time going through that stuff.

?P
Nothing of note is found.

?P
[[Continue|d3a The Upper Office]]

&lt;&lt;set $d_room = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="72" name="d3a School Notes" tags="" position="10925,6425" size="100,100">&lt;&lt;nobr&gt;&gt;

These notes are smeared and poorly written, unlike most that surround them. They read:

&lt;span class=handwriting&gt;
&lt;h3&gt;10th of the Waning Moon, 5th&lt;/h3&gt;

Today, after physical practice, that damned wolf got to me again. He knows more telekinetic magic and is aware that I&#39;m not good at casting or countering spells without a catalyst yet. He insists on taking advantage of that. He calls me small, weak, puny, even though he is only a few feet taller than me! Alongside his friends, they torment me to no end.

?P
After physical practice this morning, he thought it would be funny to telekinetically pull me up by the back of my undergarments, as he usually does. It hurts! I have a very hard time dispelling his magic when my own clothes are causing me so much pain. He takes advantage of that like a coward. I hate wolves!

?P
Today he dragged me to a classroom and hung me by my underwear right above its door.
&lt;/span&gt;

?P
There&#39;s a pause in the writing and it&#39;s all smeared. It&#39;s barely readable...

&lt;&lt;/nobr&gt;&gt;



h̸̨̨̛̦̙̠̼͖̘̲̻̱̯̦̟̹̜̗͉̺̙̦̦̟̣͂̾͗̔̎͒͑͂͌͗̉̐̓̃͛̔̚͘̕͜͜ë̴̢̼̝̘̰̫̞̩̮̳͍͙́̀̇̃̇͛̃ ̵̛̪̝̿͛̍͑̂̀͘c̸̨̛͖̗̤̭̟̮̖̝̦̜̰͈͚͓͔̖̰̟̣̖͈̙̜̝̼̮̔͑̈́̑̓̂̾͑̈̈́͛͑̅͠ą̴̢̨̨̼̠̹̰͍̦̟̟̞͈̰͍̩̥̜̯̩̜͒̔͗̋́̑̉̓͗̉̏̋̓̉͂͐̊͋͘̚͜ͅś̷̢̡̙͍͉̰͎̻̻̙̼̪̙̞̬͍̠̱̔͒́͊́͒̏͐͂̿̎̋̂̅̀̑̿̇̽̕͘͜ţ̵̨͙̙̰͖̫̝̲̈̅͗ ̷̢͚̗̻̜̗̙͕̻̯͗̈̇̈́̑͑̈̎͑̅͒̓̌͑̈́͂̀̍͛̏̈́́̈́̄̾͆̀̽̕͠ä̵͓̬͙̮̖͖̼̯̟̮͕́̄̓͆̉͋̓̃̓͂̈̌̉̄̓̄̑̓͛͑̇̕͠ ̶̡̥̭̬̙̹̼̪͔̥̺̱͇͍̦̫͍͉̘̻̣͕̹̠̹̖̪͇̰̏̋̍̆ͅs̴͈̱̅̓̇͛̒̽̓̄į̴̛̛͙̯̞͖͍̲̜̹̹͙̟̙̳̘̻̻̭̬̙̲̮̩̬͊͐͑̒͋͛̓̍̑̔̍͂̏͛͐͊̒̿̄̇̕̚̕͘͘͜͝͝͝ͅĺ̵̨̻̫͙͖͕̝̮̮̝͔͙̓̐̃̿̈́̇ͅë̸̛̞̯́̆̈͂̏͑̅̓̉͂̄̇͐̋̈́̏̉̏̎͝͝͝͠͠ǹ̸̛̳͙̲̙̙̟̟̙̫̦̞̠͓̯̯͐̌̔̆̉̈̈́͂͛̈́̍͝͝͠c̵̛̙̍͑͑̀̏̒̋̆̀̓̎̀̒͊͗̀̂̎̊̆͛̔̔̍̅̆̏̚͝e̶̢͕͓̺͉̜̲̣͙͔̱̩̤̻͙̰̭̬͍̤̞̻͙͆̂͑̄͘ͅ ̵̛͙̲̜͖̦͑̏͐̍̀̉̊̈̈́̐̆̈́͌̉͌̾̿̈́̍͑̓͌̚͝͠͝͠ȁ̴̡̝͖̣̤̜̯̘͕̦̪̱͖̥̟̹̞̙͕͗̒̑̆̀̈́̆̕̚͝n̸̨̢̛̤͍̫̰̣̳̞̪̻̥̘͖͚͈̠̺̅̏̌̓̈́̈́̂̇̑̆̇͌̂̑̌̊̿́́̾̈́̐͜͜͜͠ͅd̸̛͍̘̖͈̹̗̫͕͕͕̞̪̹͂̾̒̓̓̀̀̊̀͛̚͝͠͠ ̵̻͚̺͍̬͙̼̻̗̫͔͎̙̬̰̺̤̺͋̈̉̒͜͜͝i̶̛͕̜̺̼̖̻͕͍̣̖̼̰͉̬̙̰̩͎͖͕̫͓̲̟̣͖̘̫͎̘̇͆̈́̓͊͐̈́͒̎̌̄̾̓͐̄̔͊̎̔̈́̕͘͝n̸͕̟͔̻͐̽͂̀́̇v̷̡̖̮̦̼̰̼̯̬͇͈̫̪͗̅͐̾̄͆͘͜i̶̧̳̮͕͎̗͙̗͚̎̀͗̊͆̒͗͛͐̂͂̌̀̎͒̃̓̕͝ş̴̢̡̧͉͍̹͖͇͉̰̩͔͚͎̞̍̓̀̎͐̿̀̇͛͑̌̎̈̾̓̑͌̐̐̃̓͑͗̀͘͜͝ì̸̡̢͖̻̺̬̻͓̠̹̯̣͔̭̣̥̩̭̭̱̙̻̹̞̯̠̫̄́̆̒̀̊͂̽͗̆͘̚͜͝ͅb̴̧̛͉̤̝̹̐͒̽̏͗̔̉̍̀̂̃̈̌̋̀̇͑͆̓͐̓͘͘̕͘͠ǐ̸̡̯̣͚͙͈͖̹̰̻͚̬͔̭͓̯̫̤̖̞̩̀̉̐̅̅̏̌̂̑̽̒̅͐ͅĺ̷̨̛̰̗̠̻̗̦͔͓̜͚̖̳̰͍̠͔̤̼̖̈̋͂̏̓͌͗̕̚͜į̸̮̣͉̣̘̦̤̭͖̲͇̜̟͕̻̠͉͊̓̀̀̽̓͊̉̄̄̈́́͂̽́̅́́̕͜͝ͅṯ̶̨̢̧̛͓͕͙̖͓̳̜̘̪̮̺̩͖͖̞͚̭̻͇̝̣͔̒̅̑͐̄̇̋̌̀̽͊̌͋̽̒͛̇̉̆̓̈́̇͆̚͘͠͠y̸̯̙͈͇͔̙͎̹̯̲͈͙͎͔̥̫̬̳̯̜͔̫͍͑̅̔̉͑̾̀̎̈́̄̔̐͊͛͊̐̐̈́̃̑͂̋͑̂̐̂͜͠͝ ̸̛̛̯̖̮̻̥̰̱͍͙̭̜̼̱̼̼̖̻̱͕̣̬̌̋̾̄͐̂̅̾͑̈́̽̍̈́̊̈́͌̑̓̄̏̈́̃́̚̚̕͜͝͠ͅs̷̛͖̻̗̼̝̗̱̥̙̥̖͈̺̋̀͐̏̓̈̓̀̾͑̓̐͗̽̑̎̓͒̃͋̚p̴̢͖͖̉͌̅̾͐̒̽̈́̒̿̆́̐̈̌͒̔̀̏͌̎͗̾́̅͠͝͝e̶̦̻͔͎̗̪̼̮̬͈̱̖̱̜̯̣̘͉̟̥̪̥̙͍͒̑͐͌͐͜͜͠l̴̨̗̥̬͚̺̮̣͕̜̩͚̲̬͔͔̻̰̼͙͖͑̀̓̒̏͌́̽̍̆̔͒͌̒͂̓͑͘͜ḷ̶̨̨͕̣̏̎̓̀͜ ̸̢̞̠͈͍͚̔̋͒͗̄͒͋̿͆̋̇̾̈́́̽͛̏͝ö̷̧͓̣͕̬̋̉͌̆̋̐̆̓̍͌̐̈́̈̎̋̆͋̈̃͝͠ņ̴̡̨̛̖̲̝̯̭̤͉̮͎̞͚̜̬́̋͂̀̔͛͜͠͝ ̸̧̝̙͚̻̝̥͗̋̈̐́m̵̧̤̣̘̬̮̫̹̝̠͖̈͑͆̈͗̇̅̋̍̄̓̾̀̈́͐́͒̈́̄͂̅͜͝͝ȩ̷͈̜̪̠͕̝͒͗͆̊̒͐̒̇̉͂̈̽̽́̈́̑͊̈́͆͊͐̋͠ ̵̡̢̨̧̯͍͙̹̟̮͔̘̺͓̠͍̗̯͙̞̥͓̼̣̜̣̣̯͎̉̽̔̿͜a̵̧̛͍̾̌̓͆͂̈́̌̉̀͑͌͐̐̏͑̓̑̀̄̄̄͊̆̆̇͌͌̚ͅş̴̢̨̢̨͔͓̜͚͈̮̼͙̤͈̬̫̟̯̀̐͂̈́̔̀̾̉̍̈́̋̀͐̌͌̒͂́̚͘͝͠͠ ̴̻͚̹̠̻̳͙͉̉͋̃̎͋͂̆̈̑̿͊̈̍̃̀̀̓̌̎̚͘͘̕̕͝w̷̜̗͙͈̯̑̑͛̄̎̽́̎͗̕̕ĕ̸̢̧̛̛̖̤̖̺͔̘͙̫͎̰̼̫͉̼̖͖̏͂̇̒̄̿̌͛̒̔̆͑̎͂́̿́̒͑̑̾̕͘͘͝͠͝ͅl̷̨̝̖̣̦̥͙̾͂͊͛̓̉̂̀͠͝ͅl̴̺̣̪̬͙̉̃̌̈́̋̇͛͆̽͗́͋̾̐̅͒̅͒͠͝͠ ̷̛͓̼͓͎͑̓̈́͑͊̔͋̀̔͘͜s̸̟̣̥̗̦̑̓̑͂̉͒̉̾̅̃̚ͅo̴͉͙̱̣͕̻̦̝̦̿ ̷̡̧̧̹̹̣̱̭̰̣͉̻̮̥̻̦̻̻̙͇̥͉̳̔̋͋̿̿͐̑̊̆̒͘̕͝͝͝͝͝ͅẗ̸̺̪͓́̇́͊̍̄̂̾̇͌̑̈͘̕͘͠͝h̸̨̧̧̛͔͎͔̣̩̤̤̠̰̯̣̫͔̥̔́̊͑̌̒̒͗̿̍͌͌̀̋̎̉͆͗̑̍̉̾̚̕͘͝ͅà̵̢̮͓̫̜̲̮̫̺̰̼̻͈̖̦̜̰̬͙̟̝̤̦̼͜t̵̢̡̥̦͙̞͙̮̬̘̩̫͎̹̭̲̩̙̯̳̘̅̅̀̅̅̽̌̍͋̔͛̽̓͘͠ͅ ̵̺͚̙̤̒͑́̾̋̎̈́̽̔̓̋̌͌̌̈́͋͌̈́̄̌͂̐͘̕̕̕w̶̡͔̩͓̭͉͝͝ḩ̴̧̨̘̥͙̗̘̰͍̼̜̰͕͈̫̪̹̬͙̥̗̲͎̒͠ę̷̨̡̝͉̼̰̭̫̬̣̘̭͓̫͈͇̯̦̠̗͔̓͌̇̑̊͌̾̀̒͗̀̈́̐́̃̉͜͝͠ͅn̸̛̦̱̟̹̮̝̋̊́͗̊̽̌̐̌̆͐̅͒̆͛͂͑̂̏͐̎͗̅̓͘͠ͅ ̷̛̙͈͔̥̯͛͒̓̊́̐̀̇͌̎̀̒͆̑̿̑̅̏̍͘̕͜͝͠͝ț̵̨̤̤͖͙̰̮̪̞̳̝̱̰̠͉̗̱̳̬͕̀̑͂̂̽̽̈́̾̂̋͒͛́̍̾̈́͐̏̚h̷̨̛͚͔̫͙̟͚̲̙͓̮̪͉͈̥̩̼̹̭̝̾͆͗̃͂͌͐̀͆͛̔̾̃͗̀̍̑̇̐̆̚̕͜͠͠͝ȇ̸̢̡̢̡̧͙̜̭̖̝̰̝̮̦̩̮̟͈̠̬̫̲͖͈̲͖̱̜͂̄̐̄̅̕͜͠͝ ̶̡̨̻̩̯̠͎̙̘̯̆̿͒̓̀̉̄͒͠s̵͎̞̙̫̰̲͛̋͗̊̑̍̇͊͒́̋͋́͆̍̓̔̿̊̔̈̾̄͑͑͠͝t̴̨̨̧̡̛̛͎̫͉͚̱̱̻̠̘̬͍̦͙̯̥͈̘͈̯̓͗͑̄̉̇̆͛̉̉̔̆̐̒̾̆̀͂̈́́̌͜͠͝ͅứ̸̛̹̄̌̎̍͒͐̒͋̈́̀̃̊͛͒̿̋̒̈̕͝ḑ̶̨̧̢̛̮͓͓͈͍̮̲̙̘̰̳̰̘͙̎̃̒͊̌̅̽̀̀͗̾̓̕͝ȩ̷̡̨̛͉̮̣̣̥͚̱̲̰̤̲̱̥̮̰̼͚̝̦̰̝̭͈̂̃̽̎͑̈́̋͊͒̒̈́̃̈́͒̍̿͊̏͛̅̓̂̇̄͊͗̾͝ņ̷̳̣̲͎̖̳̲̹̝̝̤̟̼͍̰͔͓̞̭͍͎͓͙̰̤̐̆̋̒͑̾ẗ̴̡̨̡̧̛̛̰͇̹̭̗̤͖̤͇͕͔̜̖͔̦̠́̑͒̄͒̓͛̉͋̀͗́͝ͅs̷̰̟̟͓̱̲̹͔̈́̐̄̈́͊̀̀͋̂̀̽̈́͛͋͊́͊̓͌͂͋̈́̕̕͜͝͝͝ ̵̤̲͐̆̕ạ̴̢̡̧̢̧̙̠͕̟͔͎̰̘̩̤̞̻͎̗̣̻͓͕̭́̇̅̆̈́̅̆̔̊̓̆̾̍̆͌͂̅̉̿̓̈́̌̕͠͠͝͝͠ͅͅͅņ̴̨̨̢̧͚̭̣̟͖͉̻̖̭͍̳̹͕̣͌̔͒͋̈́̾̒͐̎̍̌͛̀͘͜͜͠͝d̷̢̧̨̧͉̩̼̯̥̹̞͈̘͖̥̖͈̫͙̙̘̟̭͇͕͖̎̂̿̒̐́̿̓͌̆̀̈̏̈̍͐͠ ̴̛͎̝̻̼̦̝̖̫̺̖̲̂̀͂͐͋̍̇̑̔̔͑͑̆̒͋̌̃͋̈́̐̇͝͝ţ̶͙̩̳̫͙̦̻̖̝͌͐̀̋̈̆̃͐̑̀͂̌͆̏̓̌̕̚͜͝ͅe̴̡̼͇͈͙̺̓̀̀͜ͅǎ̵̢̛̫̦̹͓͇̭͔̙͖̲͔̜̍͆͗̔̆͆̀̒̈͊̽̀̓̈́̎̂͆̑͒͑̐͑̔͘͝͝͝c̷̘̾̔̂̍̓̀͆́̈́͌͐̀̂̅͐̇̆̾̕̚͘͝͝ḧ̶̛̹̙̭́̃͗̓̃̃̉͂̊̍̑̓̎̕̚̕̕͝͝͝͠͠é̴̗̐̇̆͛̑̕̚͘r̴͓̰̦͓͇͇̮̭̮̹̻͓̘̘͔̀̅͆ ̴͕̩̙͕͔͖̱̀̿͒͛͐̀̅̿̃̋̈̉̓̊̽̋͂̇͊̍̋͗͒̉̚͝͠͝ͅw̵̡̯͔̍̽͝a̵̹̩̠͒́͋́̓́́̉̇̔͋̊͊̀̏̀̉͊͊́̊̋͊̀͊͘̕ļ̸̜̙̩̥̣͕̝̘͙̘̤̭̞͖͔͉̭͙̐́̋̕k̴̨̡̘͔̺̹͎̫͇͍͇̄̏̂̎̍͑̐͝͠ͅe̸̞̫͑̓̽͠d̴̯̦͚̫̯̀͑̂̏͆ ̶͔͚̪̠̥͍̑̔͆͐̅̚ï̶͚̍͊͆͋͋̈́͊̿̏̍̍͠͠͝n̶̛̟̱͍̫͚͓̯̮̝͓̬͈̬̮̠̈́̂̈͜͝ ̷̡̤̥̻̻͕̲̥̭͕͈̥͂̈́́̋͐̾̒́̅̒͝t̴̢̢̧̧̡͓̜̰̮̭̥̘̰͖̻͓̤̤̺̳̜̫̍̏̍̈͌͋̒̎͋͌̉̿͐͊̿̑̐̐̈́̓̈́̓̚̕͜ͅh̴̡̝͓̮̩̬̼̰̤͍̳͇͚̜̒͠è̴͉͈̱̖̻̰̙̮̲͔͈̦͍̥͔̹͙̒̒͊̂͌͋͊̅̒͘͜͝y̴̢̰͉̭͇̘̗̞͚̬̰̰̼̰̤̫̙̺̥̹͇̐̍̆̀͑̋͑̈̈̀̀̑͗̿̏̃̓̈͑͜͝ ̴̨̝̙̗͚͓̮͔̟̒̓̀̚w̷̡̛̛͔̼̗̖̲̰̪͍̟͖̻͕͓͎̩̬͓͍͙͙̣̟̗̹̞͉̭̉͋͗̀̈̏͗̉̒̌̅̀͆̽͠ͅờ̵̧̡͙͚̲͎͎̖̙͇̮̫̲̥̜̗̝̱̪̰̼̩̖̳̪͍̪̫͆̿̇̄̌̓͛͒̿͐̄͌̀̃̀̏̐̿͋̕͝͝͝ͅͅu̵̡̨̨̡͈̗̯̯̦̲̝̣̝͍̺̬̤̯͚̩̠̤̳̖̔̋̋̓̅́͋͋̀ͅͅl̷̨̢͙̬͙͉̩̦͇̻̻̭̮̝̩̠̠͙͓̱̟͓̦̗͕̝̻̫͆d̴̠͚̮̫͒̽͐̀́̆̄͊̎̒̅͆̕̚͘̚͠ń̸̡̛̛̠̙̳̙̲͓͉͔̬̭̝̱̭̭̝̘̘̾͐͆̍̄͋͋̊̆̽̑̈́̿͊͛̎̆̊͂̊̈̽͌̅̚̚t̶̨̧̧̫͔̻̺͙̖̠̖͖͓̻̗͔̺̞͇̹͓̜͉̒͒̏͐͗͒̏̏͋̕͜͝ ̵̢̛̺̗͈̻͎̮̦̯̙͒͛͆̀͆̑͋̈́͗̅̽̀͂̂s̸̨̺̳̟͕̳̙̜̦̖͔̟͙̠̲̯̺͙̠͉̬̦̥̲̥̱̰̪͈̓͜ë̴͈͚̫̰͇͓͙͆͌̐͌̐͋̂̾̈́͑́̏̇̉̿̑͂̈́͠͝ͅè̸̞̦̮̪̱̱̜̟̦̪̦̫̼̥̦̗̯̪̝̞̻̳̬̖͐̀͐̽̿̚ ̷̢̧̡̧̛͇̺̥̝̻̹̣͚̬̯͇̩̮̗̬̟̫̬͙̰̱̦̠̪̽̓̌̆̓͊͒̎͐͗̋̿̓̆̉͒͊̌͘̕͝͠ͅơ̷̭̝̝̥̮̪͓̹͔̪̐̀͗͂̓́̓̋͊͆̊̌͂̇̀̈̀̑̑̃̔͘͘͝͝r̸̡̯̬̻̰̭̭̹̙̜̗̪͔̳̦̗̈̑͛̑̅͊̎̈͒͛̿̎̎̚̕̕͜ ̶̲̞̾̀̏͒͆̌̈́̈́̈́̐̍̏̉̅͌͋̔̄̅̽̀̈̔̑͘̕͝͝h̵͕̖̘̳̝̟̬̞͓̮̻̯̦̟̙͖̹̭̜͎͈͓͉͚̟͒͒̽̍̈́̀̐̌̏̀͊͂̀̇̍̿̿͆̏̌͘͝͝͝ͅè̶̡̗̳͈͙̥͔̣̟͕͖̤͊̏̾ä̵͔͐͊͌̍̈́̅̂̉̇͆̿͗͑̂̿͑̂̿͋͑͐̔͆̍̀͛́̚r̶̡̨̞̠̞͔̻̬̺̯̣͚̯̦̹̼͕̬̮͉͓̯͂͆̊͋̍͑ͅ ̴̛̗͈̩̫͙̩̰͚̰̹̰̖̇̒̓̾͒̂̀̐͛͐̃̅̓̇̀̚͘͘ͅm̵̢̡̡̧̖̹̼͓͍̤̩̤͍̼͔̰̘̥͚̻͑͋͂̅̋͘͜ẽ̷̢̡̨̡̡̼̼͓͓̖͇̟̰͉̭̘͇̝̝͈̻̜̦͔̗͛͒̿̿̽̌̐͛͆̉͑͆͠ͅ.̵̛͉͚̌̓͊̓̊̑̆̎̌̇̈́̐͂͗̈́͂͛̎͒̿͝ ̴̡̧̳̺̲̰̙̲͉͉͓̰̲̯̱͎̰̲̑͛͐̀̉Ṱ̵̡̨̡̧͈͔͉̯̱̺̦̻̻̣͙͙̮̮̲̺͇̯̹̪̃̐̆͊h̶̨̡̧̨̼̦̼͇͎̯͎̭̻̟̯͕̦̲̱̖͖̘̜̫̟̝̰̖̉̑̉̌̉̄̋͑̄̄̉͛͆ͅe̶̡͙̠̠̻͖̜͙̫͇̪̞̲̳̲̜̱̦͊̈́̆̊͌̔͘͜͝ͅͅ ̸̡̡̹͎͕̯̹͔̬̖̱͈̰̰͎͕̞̺̣̬͒̇͑͌̈́̂́̈́̈̎͗͜͝s̴̨̧̡̧̫̱͖̠̬͕̮͍̤͇͉̯̬͗̏̓̀̑̽̉͗̓̈̇̾̽̾̈͌́̚͠͠ͅp̵̢̢̛̛͉̹͖̻̰̱̙̞̭̜͕̲͔̗̹͈̫̱̀̎̈̔͋͂̏͠ẹ̶̡̛̛̛͇̠͚̼̥̟̫̫̠͚̤̱͚̲͍̳͈͙̹̹͛̂͑̽̈́̚ͅl̴̨̘̘̙̻͉͍̭̖̱̺̤͒̉͐͛͊̊̓͋͊͊̎̅͘͠l̴̛͙̠͙̬̠̲̲͔̘̦̀̂̽̃̿̋̐͆͘͝ ̷̧̛̛̯̤̬͇͖͙̞̟̝̜̞͎̮͈̙̃̄̄͋̾̋́̏̔̋͗͆̈́̒ǫ̴̛̝͙̫̹͔̺͔̗͍̠̰̞̖̓͊̽̈́͊̊̎́̋́͛̑̉́̇̀̑̿̈̚̕͝ͅn̵̢̬̦̙̟̗̯͂̀̈̄̀͊̍͐͋͂̔̅͗̔͌̓̑̚̕͠ľ̸̩̫̺̭̺̰̹̜̘̊̒͋̈̑̉̔̊̇̓̉̆̆̈̓̈́̓̚̕̕͘͝͝͝͝͠ͅy̶̡̛̛̯̻̳͚͈͔̥͇̹̫͈̤͙͓̳̟̫͚̻̭̤̦͓͂̿̋̅̍͐̄͐̃̊̂̈́͋͜͜͜ͅ ̶̢̢͙̺͉̼̺̗̠̲̜͕̯̭͍̤̘̾͌̾̎͊͛̓̈́̏͒̆͂̎̇́̾̀͘f̶̣̯̀̓̆̍̐̂͊̽̈́͒̏͠͠͝ạ̴̟͉͈̜͇͕͓̤͍̺̀̅̀͆̎̔̀̉͊̕̚͘̕͠d̷̘͎̭͙̮͓̗͈̣̟͖̪̳͍̩̥̐̈́̌̅͐̽̔̽̏̋̈́͆̿̅̐͜e̵̢̲̭͎̦͈͓̙̻͔̜͕̒̿́͒ḑ̶̢̢͉̺̲͙̩̳͎̭͙̮̮̩͓̘̝̝͋͐̃̇̔̈̕̚ ̴̦͓̃͂͑͊̆̈́̑͌̂̂̿͛̎̈́̆͝͝͝����̢̨̻̻̰̲͔̦̘̣̮̺̙̱͇̹͖͕̟̺̣͙̼̤͖͜ͅẘ̸̺̫̙͉͎́̓͐̍̿͜͝ͅḩ̵̡̢̛͇͙̬̺̫͙̪̱̲̫͔̟͔̣̠̻̦̫̗͑̃̓͂̂̀̊͋͆͋̔͐̍̄̏͗͛̔̎̿̉̔͆̚͘͝͠ę̴̖̩̳̣͔̜͍͇͍̬̍n̷̡̛̗̮̥̟͎̱͉̼̤̂́͊̃͆̊̒͌̂͆̉́̊̈̏̂̇̆̿͐͐̇̍̈́̆̚͘͠ ̶̙̫͓̞͖̩͆̈́͆̒͂̓̽̅̍̀͐̏̓m̵̼͇̠̽̔̂͊̑̿̕̕ÿ̸̨̨̛̹̘̙͈̤̬͈̪̪̞̝͕̲̼̯̗̫͚̥͖̘̘̪̯̥̗́͒͛͑̃͘͜ ̶̨͍̬̮͊̏̉͑̃͑̌͛͊̒̄͘̚͠͠ͅȗ̵̼̜͗͒͝n̷̡̙̟̯̣͖͉͔̫̺̞͚̗͉̘̣̿͗͗̈́̽͆́͜ͅd̵̺̉̏̒́̆̎̀̓͋͛̏̾̔͗̇̈̉͂̔̊͊́̎̒͝͝ę̸̧̲̰̳̳̜̗̻͇͔͚̰̱͚̰̣͙͖͔̯̓͂͆̀̀̐̀͝r̵̨̬̪͓̗̲̖͍̲̯͎̩̲̀̀̆͒̎͗̈́͗͌͆̽̐͛͗̽̔̀́̌͝w̵̥͓̹̓̃̍͋͂͊̑̀̒̈́͂̀͐͊͛͋̋̇͊̐̏̏̐e̸̡̨̲͍͓͈̞̜͔̭̗̔͊͗́̓̓̽͌͆̈̈́̔͆́͒͜͝a̷̧̧̖͉͚̙͓̦̟̱͖̝͖͚͆́̈́͐͛̄͜r̶̢̠̩͔̪͍͎͚̙̭̦̮͎̋̊͂͗͊̇̌̓̏̄̍̒͠͝͠ ̷̨̨̰̬̦͔͊͒̾̋̓͊͗̄̇̍̓̋͊͗̏͘͝r̷̢̡͎͚̪̩̮̘͙̪̭̜̗̫͖͚̅̽̈̚͜ͅͅi̴̫̘͙͎͇͚̞̠͎̪̘̤͇̝̦̱̞̗͙̳͚̤͗͋̊̄̆̿͠p̴̛͇̈́̊́̈̇̀̅̄͌̅̾̉̊͂͂̒̾̄̆̿̃̚̕͝͝p̷̧̧͉̻͎͙͈͚̹̹̩̠͕̦̗̫̬̞̥̬͇̦̰̥̞̿̈́̀̾̐́͑̾̔͋̄͐̃̋͌͛͐͊̑̋͒̈́̽̽̕͜͠͠ȩ̸̛̤̐̓̿̍̂̇͆̒̍̈̀̄͑̈́̈́̎́̌͗̋̚̕͠d̵̫̮̭̺͎̹̻̭̤̠̖̻̥̫͗̔̑̀́̓̀̀̽͛̾͊́́̈́̐̄̔̿̍̍͆̊͘͜͝,̷̨̥͖͕̺̤̜͖̙͈͕̖͈̳̺͇͍͎̥͕̯̲̣̓́̈́̋̏̌͌̂̈͌͑̌̉͗̀̔̄͌̏̒̋͒̏̒̾͘͘̕͝ ̵̧̧̺͖̯̤̱̬͉͚̬͙̝͖̮̪̜̩̞̬̜͕̺̙͙̗̪̱̱̱̌̀̂̄̋͆́̃͘͘̚͝a̷̡̡̨̛͔̯̲͙̩̪̤̮͉̮̟̮̹̩̦͉̼̭̤͕̜͔͈̩̟̰̒̿̽̑́̄̇͛̔́͌͒̌́̍̓͋̕̕͜t̶̡̧̧̛̛͍̮̝͔͖̦̙̞͈̥̿̀͐̍̔̔̎̑́̃̍̓̅͜͜͝ͅ ̶̧̢͓͙̺̣͇̦̣͙̹̻͗̏̓̂̓̎͗̍̉̇̌͋͒̅́̐̋̾̄̃́̇̏͌͑̎́͑̚͜͝ẇ̸̧̡̡̛̯̼̜̼̦̙̬̫̟̖͛͑̆̒̕ͅh̴̩̰͚͖̼̯͍̖̳̣͍͍͙͕͈̩̊̈́̔͜ì̶̧̖̖̠̙͉͈͖̫̩͓̫̮̾̊̏́̄́̿̌̽͛̾͛͆͂̕̕͜͝͝ç̵̛̖̟̭̩̱̩͇̟̘̯̰͎̼̬̩̤̩͕̭̏͌̅̅̾̇́̅̿̒̔͐̍͗̆̍́͌͋̉̑̕͜ͅh̶̡͔̹͉̘͈͇͍̥͈̩̻̟̟͓̩͊͋̊̈̉͒͗̾̑̐̉̿̇̐̉̕͝͠͝ ̶̨̙̼͇̪̳̟̮̺͓̈́̆̋̔͑̄͌̑͑̋͝͝p̵̜̬̪̩͚̜̰͍̟͔̺̲̯̼̘͉̃͌̾͋̑̒̃̃̓̏͌̎̓̓͊̌̅̒͒͘͘̚͘͜͠ͅǫ̵̙̺̟̳̙͇̫̖̮̠͍̹̥͎̗͎̖̬̠̞͉̟͉̓̃̄͗̊̓̈̉̅̒̒̔̀͛̋̀̑͋͗̄͝͝͠ḯ̴̱̜̘́̿̈̆͐̎̑͒́̉̿̀͊͑̎̔̕͘͠ņ̴̢̛̛̫͙̮̺̳̝̯̯̟̜̱̟͇̹̊̊̐́͑̉̍̄͆̉̇̓̀̿̍̿͘͜͠ẗ̸̡͎͕̟͓͙̙̠̹̯̞̼͍̯̝̲̖̰̠͛͜ ̶̨̣͖̳̰̣̭̱̮̟͔̞̞̩̙͍͇̃̈́̋͊̌̓͒̄͑̍̉̓̀̇́͌̀̚̕͘ͅţ̷̱͚̲̦̥͙̘͎̬̝̮̥̙͙̭̯̊̂́̓̾̄̋̈̉͆̉͆̐͌̈́̀̚͘͘͜͝h̷̢̢̛̗̦̦͎̝̻̝̻͖̻̩̯͍̾̏̒̏̓͆̄̿͌́̄͌͐̔̃̾͊̈́͒̆͒̓ę̶̨̨̨͇͎̳͉̭̤̘͙̗͕̜̞̩͚̅̀̃̾́̓̏̉͌̆̀̋̀͗̉̿͝y̷̧̪̤̫̗̯̫͎͎̳͍̜̦̣̮͉̪͙͍̖͔̮̥̞̗̰̙͌͜͜ͅ ̸̖̓͑̾a̶̢̧̢͎͉̺̞̭̳̣̤͉̭̰̙̦̜̱̘̗̟̥̫̗̼͈̙̹̺͋͛̏̋̎̈́̏̈́͜͠l̶̡͚̻̳̜̳̐̀́̑̑̈̀̇̈́̂̕͘l̶̡̫̖͉̳͚̰͇̠͇̲̗̝̟͓̥͈͎̰̥̳̐̎̊̑͗̍̈̆͑͂̿͝




&lt;&lt;nobr&gt;&gt;

&lt;span class=crude-handwriting&gt;
fuck writing this
&lt;/span&gt;

?P
After that, the next routine writing seems to take place several days later and it becomes more methodic, but not very interesting.

?P
&lt;ul class=actions&gt;
  &lt;li&gt;[[Read something else.|d3a Journal Notes]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="73" name="d3a Second Floor" tags="" position="10600,5400" size="200,200">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $d_secondFloor&gt;&gt;
  Back in the hallway, nothing seems to have changed. Two doors, one on each side of the hallway.

  ?P
  Where to try next?

&lt;&lt;else&gt;&gt;
  Upon opening the door, the wolf&#39;s eyes go wide.

  ?P
  What lies beyond him is another hallway, but this one is much, much larger.

  ?P
  The ceiling above is tall, impossibly so for a circular tower, and the hallway is wide with a red carpet and luxurious couches adorning its sides. The walls surrounding it have two doors, one closed, and one semi-open. What really draws the wolf&#39;s eyes is how impossible the architecture of this place is.

  ?P
  Before the wolf can take time to properly study the new hallway, however, a sound makes Drekkar pause immediately.

  ?P
  It&#39;s a grunt of some sort. And it&#39;s coming from the semi-open door. The wolf minds his steps, growing cautious and keeping them silent, and then approaches the door to peek inside.

  ?P
  He&#39;d have to pry it open a little more to properly see, but his ears twitch and there is no doubt. There&#39;s someone inside. Another grunt comes, then the idle sound of steps moving around.

  ?P
  Could it be Ivex? Perhaps one of his minions or allies, if he has any? Getting caught could undo all of the wolf&#39;s work to escape so far.

  ?P
  There is also the closed door on the other side of the wall. That one looks normal, made of wood and with a handle. No sounds seem to be coming from it, at least not that the wolf can hear from where he is, so it might be safer.

  ?P
  Now the question is... where to go?
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;&lt;if !$d_extractionRoom&gt;&gt;
    &lt;li&gt;[[Try the closed door.|d3a Extraction Room Intro]]&lt;/li&gt;
  &lt;&lt;else&gt;&gt;
    &lt;li&gt;[[Try the large hall.|d3a Extraction Room]]&lt;/li&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if !$d_lionGemstoneKnowledge&gt;&gt;
    &lt;&lt;if $d_lionWatch&gt;&gt;
      &lt;li&gt;[[Try the door with the lion inside.|d3a Lion Watch]]&lt;/li&gt;
    &lt;&lt;else&gt;&gt;
      &lt;li&gt;[[Pry open the door with someone inside.|d3a Lion Room Intro]]&lt;/li&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;/ul&gt;

&lt;&lt;set $d_secondFloor = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="74" name="d3a The Altar" tags="" position="10700,6150" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $d_thePlatform&gt;&gt;
  Drekkar approaches the altar at the center of the room to take a closer look once more.

  ?P
  The strange blob rests over the altar as before, unmoving. Inside it, the red glowing gemstone still floats harmlessly near the altar&#39;s surface.

  ?P
  Inspecting it further would mean touching it or fiddling with it, but it being an unknown magical thing, the wolf is not sure if that is wise or not.

&lt;&lt;else&gt;&gt;
  Drekkar approaches the altar at the center of the room to take a closer look.

  ?P
  Standing right next to it, the naked wolf can&#39;t help but feel somewhat uncomfortable. From up-close, the blob is indeed not like water. It looks more... viscous, and while it sits still on the platform, the wolf can swear it moves every now and then. Just a twitch here, a ripple there... On top of all, it doesn&#39;t seem to be held by anything. This blob of... whatever it is made of, just stands still on the altar doing nothing.

  ?P
  The wolf can also see that there&#39;s something &lt;b&gt;inside&lt;/b&gt; the blob of strange slime. Squinting his eyes to see through the viscous-looking liquid, it looks like... a gemstone? Yes, a pristine-looking red gemstone that floats near its bottom. It seems to emit a faint glow that is visible even through the liquid.

  &lt;&lt;if $d_journalKnowledge&gt;&gt;
    ?P
    Drekkar&#39;s eyes go wide! That must be the &lt;span class=&quot;imp-info&quot;&gt;red gemstone that the fox thief lost when he got captured&lt;/span&gt; according to Ivex&#39;s journal! If he can grab that, he should be able to escape! An urge to just reach in and take it surges within the wolf, but he stops himself. This thing is weird. It would be wise to be careful around it before rushing into anything.
  &lt;&lt;/if&gt;&gt;

  ?P
  The wolf decides to walk around it to inspect the blob from all sides. It has a weird oval shape and, on top of all, it&#39;s big. The altar is large enough so that it seems like a person could comfortably lie on it, but the blob takes most of its space. It&#39;s like some kind of giant, see-through egg.

  ?P
  The wolf sniffs towards it, but its smell is very weak. When Drekkar is almost giving up on finding anything interesting about this thing, the wolf finally notices something. Not on the blob, but on the altar beneath it. It seems to be made of stone, which is strange enough, but since the blob is see-through, from this close the wolf notices for the first time that there is a small hole near the middle of the altar. About the size of two fingers.

  ?P
  The blob, even though it appears to be somewhat liquid-like, does not slip into the hole, though. With the blob on top, it&#39;s almost impossible to see where the small hole goes.

  ?P
  Unfortunately, there isn&#39;t much more to this thing. It must have some kind of purpose, but what it could be, Drekkar can only guess. The only thing the lupine hasn&#39;t done yet is touch the thing. He brings a finger up, curious about how it feels, but hesitates. It does seem simple to just reach into it and grab the gem, but at the same time, one of the most basic rules of adventuring comes to his mind. &#39;Don&#39;t touch magical objects you don&#39;t know&#39;.

  ?P
  Still, it looks absolutely harmless.
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Touch the substance.|d9a Extraction 1]]&lt;/li&gt;
  &lt;li&gt;[[Go back to try something else.|d3a Extraction Room]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;set $d_blobGemstoneKnowledge = true&gt;&gt;
&lt;&lt;set $d_thePlatform = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="75" name="d3a The Desk" tags="" position="11325,6050" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $d_theDesk&gt;&gt;
  The only interesting things the wolf can see on the desk are the &lt;span class=&quot;imp-info&quot;&gt;thick book&lt;/span&gt; and the &lt;span class=&quot;imp-info&quot;&gt;journal&lt;/span&gt;.

&lt;&lt;else&gt;&gt;
  Drekkar decides to approach the desk full of books and paperwork to take a closer look.
  ?P
  The wolf pushes the chair away and stands in front of it. His active erection brushes against its corner, making the adventurer growl and shift uncomfortably. The thought that all this humiliation he is going through comes from the mage...
  ?P
  With a soft growl, the wolf&#39;s paw just curls into a fist and he pushes such thoughts away to focus on the contents of the desk.
  ?P
  It&#39;s filled with writing supplies and they seem like they were used recently. The larger book that lies closed near the center of the desk draws the most attention. It&#39;s a thick tome.
  ?P
  Though there are other books of varied titles spread over the desk, they all seem like regular books used for studying or research, none of which Drekkar has any interest in. There is one more book that draws the wolf&#39;s attention, however. This one has no cover and no title. The remnants of ink at its corner indicate that Ivex must have been writing in it rather than just reading from it. It looks like some kind of &lt;span class=&quot;imp-info&quot;&gt;journal&lt;/span&gt;.
  ?P
  If they belong to Ivex, they might be worth checking out.
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;&lt;if !$d_theJournal&gt;&gt;
    &lt;li&gt;[[Examine the journal.|d3a The Journal]]&lt;/li&gt;
  &lt;&lt;else&gt;&gt;
    &lt;li&gt;[[Examine the journal again.|d3a Journal Notes]]&lt;/li&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if !$d_spellbookKnowledge&gt;&gt;
    &lt;li&gt;[[Examine the large book.|d3a The Spellbook]]&lt;/li&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;li&gt;[[Go try something else.|d3a Extraction Room]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;set $d_theDesk = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="76" name="d3a The Exit" tags="" position="12725,5750" size="100,100">&lt;&lt;nobr&gt;&gt;

With care, Drekkar grabs the gemstone. He holds it in his paw. It feels warm to the touch. The wolf looks at it, takes a sniff at it, then holds it up with two fingers to inspect it properly. It&#39;s a beautiful gemstone, but... how to use it?

?P
Even though he has it, Drekkar frowns. Does he need to go to a certain place? Speak certain words? Ivex didn&#39;t when he left, but the panther mage could do a whole lot of impressive and downright impossible things.

?P
Drekkar stands up. As he does, his lingering erection bumps against the corner of the desk, making his cock bounce up and down. It makes the large wolf warrior&#39;s ears grow hot as it reminds him of his nudity. His most humiliating situation caused by none other than Ivex himself.

?P
A growl comes to his throat. He has the gemstone he supposedly needs, but now he is going to get beaten by not knowing how to use it? Maybe he could go back and untie the lion to try and make him speak if he knows how to do it. Or perhaps he could look for that fox that Ivex supposedly captured...

?P
Frustrated, Drekkar closes his fist around the gemstone. Just as the wolf pushes the chair back to go try something else, he feels it growing hotter inside his hand, and then...

?P
The whole world around him starts shifting into a blur.

?P
[[Continue|d4a Outside]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="77" name="d3a The Journal" tags="" position="11325,6200" size="100,100">&lt;&lt;nobr&gt;&gt;

Pulling the journal close to himself, the wolf sits down to take a look. His bare rear against the chair reminds him of his forced nudity, but he forces himself to ignore it and focus on the contents of the journal instead.

?P
It does seem to indeed be Ivex&#39;s personal journal of some sort. There are pages upon pages filled with writing. Some look like scribbled notes, some look like detailed writing, and as the wolf skims through it, its contents seem to vary wildly as well.

?P
As Drekkar goes through it, there are a few parts that catch his attention...

?P
[[Continue|d3a Journal Notes]]

&lt;&lt;set $d_theJournal = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="78" name="d3a The Spellbook" tags="key" position="11450,5925" size="100,100">&lt;&lt;nobr&gt;&gt;

Opening the large tome, it&#39;s plain to see that it is something of importance.

?P
On one of its pages, a very intricate circle that even Drekkar can identify as some sort of arcane incantation symbol takes all the space. On the page beside it, there is what seems to be the name and instructions on words to say for the incantation itself. The random page the wolf opens the book on only says &#39;Levitate&#39;. It&#39;s definitely some sort of &lt;span class=&quot;imp-info&quot;&gt;spellbook&lt;/span&gt;.

?P
Pulling the spellbook closer to himself, the wolf leafs through the book, but every page is the same. A different incantation circle spread over an entire page and vague instructions on its side. The instructions seem to be words that need to be uttered to activate the incantation, but when the wolf reads one of them out loud, nothing happens. All of them mention a &lt;span class=&quot;imp-info&quot;&gt;gemstone&lt;/span&gt;. As he goes through the book idly, there are a multitude of them.

?P
&#39;Growth&#39;, &#39;Thrall&#39;, &#39;Hidden&#39;, &#39;Desire&#39;, &#39;Itch&#39;, &#39;Freeze&#39;, &#39;Dumb&#39;...

?P
Each incantation only has a word to describe it, though. No thorough description of its effects. Ivex probably doesn&#39;t need that...

?P
&lt;&lt;if $d_journalKnowledge&gt;&gt;
  After leafing through a bunch of them, the wolf&#39;s tail wags. This must be it! &lt;span class=&quot;imp-info&quot;&gt;Ivex&#39;s spellbook&lt;/span&gt;! With this, the wolf might be able to make the gemstone he needs to escape! Quickly going through the book, the wolf smiles as he finds what he is looking for. A spell called &#39;Teleportation&#39;.

  ?P
  &lt;&lt;if $d_lionGemstoneKnowledge&gt;&gt;
    Now, to craft a gemstone, all he would need is to find an empty gemstone somewhere that he can use to imbue the spell into. The wolf&#39;s tail wags even faster, a grin opening across his muzzle. The gemstones the lion had looked dim and empty.
    ?P
    With eager excitement, the wolf leaves the spellbook and pretty much runs back to the other room. Over there, the bound lion still squirms on the floor and, upon seeing him, seems to try to mutter the same words he has been saying all along again. Drekkar ignores him, however, and goes straight for the drawer where he saw the gemstones before. With a large grin, the wolf takes one, then runs back to the spellbook.
    ?P
    He is ready to try and craft the key to his escape.
    ?P
    &lt;ul class=&quot;actions&quot;&gt;
      &lt;li&gt;[[Try and craft the red gemstone.|d3a Gemstone Crafting]]&lt;/li&gt;
    &lt;/ul&gt;

  &lt;&lt;else&gt;&gt;
    Now, to craft a gemstone, all he would need is to find an empty gemstone somewhere that he can use to imbue the spell into. Where to find something like that, though?
    ?P
    &lt;ul class=&quot;actions&quot;&gt;
      &lt;li&gt;[[Leave the spellbook as it is for now.|d3a The Desk]]&lt;/li&gt;
    &lt;/ul&gt;
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  ?P
  After leafing through a bunch of them, the wolf just grunts. It doesn&#39;t seem like the spellbook is particularly useful for someone like him if he doesn&#39;t know how to use it.
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Leave the spellbook as it is.|d3a The Desk]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $d_spellbookKnowledge = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="79" name="d3a The Upper Office" tags="" position="9225,5375" size="200,200">&lt;&lt;nobr&gt;&gt;

With the freedom to move around the office space, the wolf can now properly assess what is in this room. The many desks and cabinets seem to have nothing but documents on them with the occasional thick book lying here or there.

?P
The wolf&#39;s best bets, however, are of course the open window on one side of the wall and the simple wooden door on the opposite one.

&lt;&lt;if $d_arousalLevel &gt; 0&gt;&gt;
  ?P
  On the other hand, as Drekkar looks down... all the wolf can see is his member. Even without the candle, the burning arousal that built up will not go away. It drips pre-cum down to the floor every now and then and remains forcefully erect, knot out and everything, begging for some relief.
  ?P
  The wolf feels that, using his hand, he could bring himself to an immensely satisfying orgasm in a matter of minutes. At the same time, however, is it really wise to indulge in such frivolities when the mage could return at any point? Resisting it is getting harder and harder...
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;&lt;if !$d_room&gt;&gt;
    &lt;li&gt;[[Look around the room some more.|d3a Room]]&lt;/li&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if !$d_window&gt;&gt;
    &lt;li&gt;[[Investigate the window.|d3a Window]]&lt;/li&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if $d_arousalLevel &gt; 0 &amp;&amp; !$d_jerkoff&gt;&gt;
    &lt;li&gt;[[...Jerk off.|d3a Arousal Relief]]&lt;/li&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;li&gt;[[Try the door.|d3a Door]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="80" name="d3a Thief Notes" tags="" position="10950,6175" size="100,100">&lt;&lt;nobr&gt;&gt;

These notes are written in a brasher way with much less care for the handwriting. The ink in these notes is dry but still strong, signaling that they might be recent. It reads:

?P
&lt;span class=&quot;crude-handwriting&quot;&gt;
There was a pathetic attempt to escape my tower last night. The sly little fox adventurer I captured last week was left bound to my wooden cross in the extraction hall. I planned on going back to play with him in the morning, but what I found was that the cross was empty. The fucker had managed to cut the magic ropes I used to keep the cross in place and got away.

?P
Luckily, even a stupid animal can be crafty sometimes, but ultimately their dumbness catches up to them.

?P
When I arrived at the extraction hall this morning, I found him not on the cross as he was supposed to be, but rather already stuck in a different way. HAH! The fool must have gotten curious or thought he could steal something valuable from me. He messed with what he wasn&#39;t supposed to mess with and paid for it dearly. The sight of him stuck there and the way his drowsy eyes looked at me gave me immense pleasure.

?P
Admittedly, it is also a pain in the ass. The extraction substance was not ready yet. Luckily, I had already adjusted it to retain bodily functions, or else the fool would have gotten himself killed. I had also already adjusted its extraction capabilities, but not its rate, so it was funny to see him failing to produce enough as it kept trying to take more out of him.

?P
Regardless, I hadn&#39;t finished attuning the extraction substance to me either. That forced me to use a strong repellant spell that took hours to create in order to be able to pull him out of it and it still wasn&#39;t easy.

?P
I had planned on maybe making him a thrall, but after pissing me off like that, I pulled him out from the incomplete extraction substance, carried him, and threw him straight into a complete one. He begged me not to as I did it, but then, as usual, as it did its work, there was nothing but sweet, sweet silence and the knowledge that he would no longer bother me.

?P
Unfortunately, my repellant spell wore off, and I did not notice that he had a &lt;span class=&quot;imp-info&quot;&gt;red gemstone&lt;/span&gt; in there as well. He must have dropped it once the substance took hold of him. To think that the key to his escape was right there, so close yet so far, is humorous. In the end, it was left inside the incomplete substance. Fucking hell. In a few more days, the substance will be complete, then pulling it out of it will be a simple matter.

?P
To think he managed to make one, though... the fucker doesn&#39;t know how close he was to escape, and if he did, that would be problematic. How did he find my empty gemstones? How did he know to use my spellbook to make a teleportation one? I imagine he must have seen me do it while he was bound. I should be more careful.

?P
Next time, I will take the cross to the upper office and have my fun up there. I also need something better than magic rope to keep the thing still so that they cannot escape. Maybe gravity crystals will work.
&lt;/span&gt;

?P
&lt;&lt;if !$d_journalKnowledge&gt;&gt;
  This is the last entry in the journal so far. The wolf&#39;s eyes go wide. This is useful information!
&lt;&lt;else&gt;&gt;
  This is the last entry on the journal so far and, thankfully, it has already proven to be very useful.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|d3a Notes Knowledge]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="81" name="d3a Tower Notes" tags="" position="11050,6425" size="100,100">&lt;&lt;nobr&gt;&gt;

This note stands out amidst a bunch of unorganized notes. The writing at this point is more sporadic and rough. It speaks of concerning matters. It reads:

&lt;span class=&quot;mild-handwriting&quot;&gt;
&lt;h3&gt;Completion!&lt;/h3&gt;

I did it! Let it be recorded that I succeeded in my experiments! The compressing of matter inside the faceted reflections works! Stealing these books from my old academy&#39;s library was the best decision of my life!

?P
There&#39;s still much to do. It&#39;s not sustainable. Without a continuous source of rather powerful energy, it collapses back into reality in a matter of minutes. Less if the structure was larger. My mind races! Energy...

?P
possible sources of energy:
* &lt;s&gt;pre-charged gemstones&lt;/s&gt;
* &lt;s&gt;sun-converted rays&lt;/s&gt;
* &lt;s&gt;artificial fire furnace&lt;/s&gt;
* blood magic?
&lt;/span&gt;

?P
The rest of the notes on this page are crude drawings of both things that look arcane and things that just look like very poorly done drawings of objects...

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Read something else.|d3a Journal Notes]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="82" name="d3a Window" tags="" position="9200,5625" size="100,100">&lt;&lt;nobr&gt;&gt;

Drekkar approaches the window. Maybe it&#39;s climbable?

?P
Upon putting his paws on the window&#39;s sill, the wolf&#39;s hopes of climbing out of there vanish. Not only that, though... something is wrong.

?P
From inside, it looked like a tall window facing a cloudless blue sky. From his position, however, the wolf can see that this place is a tower. A very, very tall, circular tower made of straight stone. Other windows can be seen adorning the tower&#39;s sides in odd locations, some further up, and many of them further down. The floor the wolf finds himself in is one of the highest ones for sure, as the ground below seems very, very far.

?P
The wolf&#39;s eyes go wide, however, for an entirely different reason. From where he stands, the wolf can see that the sky is not quite... the sky. Surrounding the tower, a dome of clear blue that looks like some kind of barrier keeps the place fairly illuminated as if with weak sunlight. The dome, however, encircles the tower entirely, starting from the ground and arching over the top of the tower.

?P
Frowning, Drekkar grunts. He does not know too much about magic, but if this huge tower is surrounded by a barrier, maybe it keeps it invisible? It could explain why he had never heard of a huge tower like this anywhere, nor did anyone know or warn him that Ivex lived somewhere like this.

?P
Regardless... there is no way out through the window. Climbing down the smooth wall would be asking to slip and fall.

?P
[[Continue|d3a The Upper Office]]

&lt;&lt;set $d_window = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="83" name="d4a Chastity" tags="" position="13500,5775" size="100,100">&lt;&lt;nobr&gt;&gt;

It is just as perverted as some of the other ones he found, yet even though its effects make the wolf&#39;s eyes grow wide, it also makes his tail wag enthusiastically.

?P
It&#39;s perfect.

?P
In his mind, the wolf can see the effects of the gemstone as clearly as if there were written instructions including detailed drawings. This obscene spell... is called &#39;Chastity&#39;.

?P
Knowing Ivex&#39;s perverted ways and means of torture, however, the wolf looks at the unconscious feline. Ivex grumbles something but doesn&#39;t wake up. His lack of consciousness clearly won&#39;t last too long. The wolf looks down at the damned panther. Just staring at him makes his rage bubble up. Who knows what other crazy spells these gemstone holds? Who knows how many people Ivex has used them against?

?P
Inside him, Drekkar&#39;s body still feels hot with an insatiable lust that the damned mage himself inflicted upon him. To how many others has Ivex done this as well? Or worse?

?P
With the yellow gemstone in hand, the wolf smirks.

?P
Kneeling next to Ivex, the wolf carefully grips the yellow gemstone again. The moment it starts glowing, however, Drekkar lets go of it and, holding it with only a finger... he presses it against Ivex&#39;s chest instead.

?P
For a moment, nothing happens, and the wolf starts thinking it might not be the way to use it on someone else, but before long, a glow can be seen under the cloth of the feline&#39;s pants. Right around his crotch.

?P
Jackpot.

?P
Holding the gemstone steady against his chest, the wolf uses his other paw to quickly undo the laces of Ivex&#39;s pants with a claw and pull them open. Exposing the feline feels indecent, but compared to everything the damned mage has done to him? To Drekkar, it almost feels sweet. The panther&#39;s sheath is modest, covered in black fur, and by the time the wolf exposes it, the yellow glow is already surrounding it. It grows brighter for a moment, then it seems to condense around the sheath. For a moment, the wolf is afraid the thing is gonna hurt Ivex somehow, but no, instead, the barrier around the feline&#39;s sheath just... &#39;merges&#39; with his fur and skin. The black sheath glows with a yellow hue, but stays still.

?P
Carefully, the wolf pulls the gemstone away from the feline&#39;s body and, keeping an eye on it, the yellow glow remains. Curious about if the spell is doing what he saw it would, the wolf uses a finger to touch Ivex&#39;s sheath. It feels... normal. Maybe he was wrong.

?P
However, when Drekkar traces his finger over the surface of Ivex&#39;s sheath and reaches the opening, the wolf&#39;s ears twitch. It feels as if there&#39;s something solid covering the opening. Something invisible, but as the wolf taps the opening with a claw, there is a solid thud.

?P
Drekkar smiles. He has seen whores and such wearing devices of chastity in brothels in the big cities. That Ivex developed something to touch on those subjects comes as no surprise, but the way the magic works does. It is as if the feline is wearing a cage around his sheath, but at the same time, there is no cage. Looking down at the gemstone, the wolf smiles. Damn if those things are not powerful.

?P
Of how to undo what he has done, the wolf has no idea. Ivex probably knows, but he will likely need that gemstone or a different one to do so. Given how many obscene torments the mage has inflicted upon others, it seems very fitting that he be inflicted with the inability to enjoy himself in any way.

?P
The wolf&#39;s member throbs in excitement at the thought. Now he can&#39;t wait for the panther to wake up. As the naked wolf stares at the unconscious feline, he wonders, though. The magical chastity locking his sheath should be a good punishment for all he has done, but is it enough? With a frown, the wolf wonders... should he just pick the mage up and turn him in... or should Ivex be put through a more &lt;b&gt;proper&lt;/b&gt; type of punishment?

?P
&lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Punish Ivex for his misdeeds.|d4a Punishments]]&lt;/li&gt;
    &lt;li&gt;[[Turn Ivex in and be done with it.|d4a Turn In]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="84" name="d4a Gemstones" tags="" position="13375,5775" size="100,100">&lt;&lt;nobr&gt;&gt;

Frowning, the wolf hesitates, but curiosity takes over and, carefully, the wolf lets the gemstone rest on his paw... before closing it around to grip it.

?P
The gemstone starts glowing with a faint blue light.

?P
As soon as it does, the wolf releases his grip, but the glowing doesn&#39;t stop. Drekkar is about to let go of the gemstone when his eyes instead go wide. Inside the wolf&#39;s mind, he suddenly &lt;b&gt;knows&lt;/b&gt;.

?P
Drekkar looks down at the gemstone glowing on his paw. It doesn&#39;t feel any different from reading a description in a book. Or, rather, having &lt;b&gt;read&lt;/b&gt; that description in a book. By holding the gemstone and activating it, in his mind, he realizes it tells him what it does. This gemstone in particular would encase his paw in ice, allowing him to transfer very low temperatures into anything he touches.

?P
The wolf frowns. He does not like the idea of these things prying into his mind, but he decides to test it. Gripping the gemstone again, its glow intensifies inside the wolf&#39;s paw and then... it gets cold. It feels just slightly chilly for the wolf, but his eyes go wide seeing ice start growing around his paw, encasing it little by little...

?P
And then he lets go of the gem. As soon as he does, the ice fades from his paw immediately and, before even hitting the ground, the gemstone loses its glow. Thankfully, it doesn&#39;t shatter, but rather just bounces off the floor and rests there.

?P
It&#39;s amazing what magic can do. Drekkar picks the gemstone back up and shoves it into his pouch. Next, he gathers a purple one and, curious, he grips it the same way. The knowledge that this one will wrap his paw with electricity comes to his mind. Gripping it just a tad tighter, a crackle of lightning appears around his paw as well. The wolf opens his grip, startled, but he smirks.

?P
No wonder Ivex didn&#39;t include any descriptions of his spells in his spellbook. He didn&#39;t have to. He did something to these gemstones so that it&#39;s easy to know which is which when activating them...

?P
&quot;Huh. These spells sure are handy...&quot; Drekkar muses to no one in particular.

?P
One by one, the wolf picks up all the gemstones on the floor. There are too many to test one by one, but he does try out a few. He finds some spells that look dangerous, like the one that supposedly starts fires or the one that just states that it downright causes pain. The wolf frowns at those. On the other hand, there are others that range from seemingly useless to just downright perverted, such as the one that causes itching, the one that stops someone from talking or... the one that supposedly induces lust and arousal.

?P
Drekkar shoves each and every one of them into the pouch until there are only four of them left on the ground. Growing enthusiastic, the wolf grabs a yellow-ish one. When he grips it around his paw, it glows, and what this one does...

?P
[[Continue|d4a Chastity]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="85" name="d4a Ivex&#39;s Fall" tags="" position="13125,5775" size="100,100">&lt;&lt;nobr&gt;&gt;

Not knowing what to expect, the wolf prepares himself as best as he can in his naked, unarmed state. The door opens casually without rush, but the person coming in...

?P
Is none other than Ivex himself.

?P
Except he looks different. While the black panther that Drekkar had seen inside the tower taunting him while he was bound was tall enough to reach his shoulders, this one seems like he would barely measure up to his abdomen. The Ivex that Drekkar had seen wore a pristine vest, his long cape and plenty of jewelry and this one wears nothing but a plain, brown ragged robe. Not only that, but Ivex had a firm, toned musculature before and now? The panther that walks in is skinny and slender. He makes for a much, much less impressive figure than the Ivex from before.

?P
Yet, as the panther walks in holding a piece of jerky that he nibbles on, he almost chokes as he looks up and meets the large wolf&#39;s eyes. The body, the clothing and everything else might be different, but seeing his face there is no doubt. This is Ivex, the dangerous mage that trapped him. The wolf can&#39;t help but growl in pure reflex.

?P
The feline, however, does not look nearly as arrogant as before. His face has nothing but surprise and, perhaps, panic in it.

?P
&quot;W-w-what?! How did you get out of my tower?!&quot; Ivex stammers. &quot;Y-you dare try to escape ME?!&quot; He drops the food he had been holding and Drekkar can see him reaching down to pull a pouch he had attached to his belt. The panther reaches into it so quickly that some gemstones of different colors fall off as he scrambles to find the right one.

?P
The wolf isn&#39;t having it. In three large steps, the distance between them is covered and, like a charging bull, the large wolf tackles the panther down. Ivex lets out a pathetic yelp, his pouch of gemstones going flying, making them scatter all across the floor.

?P
Skillfully, the large wolf catches the panther before he can even fall, grabbing him by the neck as he scrambles to reach for any of his gems and, instead, lifting him up.

?P
The panther does not cast magic. All the black panther does is wiggle and struggle, his hands coming to the wolf&#39;s wrists to try to pull it away from his neck so that he can get away, but his attempts are barely even felt by the wolf. Even his claws do little more than scratch the angry wolf&#39;s skin.

?P
The wolf growls at him. There is no strange magic being used against him, no unexplainable acts, nothing. The reality of the situation dawns on the wolf and, judging by Ivex&#39;s panicking expression, the panther can tell that the warrior has figured it out.

?P
Ivex is not nearly as powerful outside of his tower. In fact, held by the wolf and wiggling in the air, he looks pretty damn powerless in its entirety.

?P
&quot;L-let me go!&quot; the panther gasps. &quot;I&#39;ll m-make you regret... this... if you don&#39;t... ugh!&quot;

?P
The arrogant feline&#39;s threats feel empty. The wolf can see how the panther&#39;s eyes shift back and forth towards his scattered gemstones, giving away how much he needs those.

?P
&quot;We&#39;ll see who regrets what here, mage,&quot; the wolf growls.

?P
And he smiles. His cock, still forcefully erect due to Ivex&#39;s own ministrations inside the tower, throbs with renewed life. Looking at the panther, thinking back to all he said, all he did, and all Drekkar had to go through because of him in that crazy, perverted tower of his...

?P
The wolf lets out a growl of anger, showing his sharp teeth to the wiggling panther and taking another step forward to slam Ivex against the crude wall. The panther merely yelps, his hands still desperately trying to pry the large wolf&#39;s paw from around his neck as he&#39;s held up. Drekkar can feel his claws prickling his skin, but his efforts are so pathetic that he needs no more than an arm to hold the panther up.

?P
Desperately, Ivex extends his arms toward some of the fallen gemstones as if that would somehow help him reach them. Pressed against the wall and held by his neck, the panther can&#39;t breathe. He gasps for air, growing more and more desperate with each passing second, until he finally looks at the wolf... and passes out.

?P
The moment he does, the wolf lets go of him. The panther&#39;s unconscious body falls down to the floor. Drekkar has no intention of killing the panther, even if he might even deserve it. The bounties are, after all, larger when the target is delivered alive, and the value for Ivex comes to his mind. He&#39;ll get the bounty alright, they&#39;ll know how to deal with the panther, and Drekkar will get a hefty sum to make up for all of his suffering.

?P
Finally. Finally, the wolf has escaped the mage&#39;s crazy tower and now, outside, the cards are in his hands. Picking the unconscious panther up by his scruff effortlessly, the wolf looks at him... and his cock throbs again. An effect caused by the panther himself.

?P
As he stares at the arrogant, puny mage, however... a few ideas come to his mind. ...Should the wolf let the panther off the hook that easily after everything the mage made him go through?

?P
He looks around. All those gemstones scattered across the floor are the source of Ivex&#39;s power. Without them, the panther seemed absolutely helpless.

?P
[[Continue|d4a Tying up]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="86" name="d4a Outside" tags="section-start" position="12875,5725" size="200,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;checkpoint-save d_checkpoint2 &quot;Escaped the Tower&quot;&gt;&gt;

The big wolf stumbles forward. A sense of vertigo overwhelms him for a moment as everything spins and loses its shape. However, as quickly as it comes, the feeling goes away. The wolf suddenly feels his feet touching the ground again. His hands find a table behind him to hold onto to keep himself steady and, when he blinks... everything feels different.

?P
The air on his bare fur feels colder than before. The floor under his feet is simple wood rather than stone. As the wolf looks around, he realizes he is no longer in the large hallway he was before, but rather somewhere else entirely.

?P
It looks... like a small room. A bedroom? No... a storage room? The furniture is crude and made of old wood. There are wooden boxes near some of the walls, but there is also a hay bed off to the side. There are no windows, but the smell of cold, fresh air feels very familiar to the wolf. A smell that, he only just realizes, he did not feel at all while in the tower. In there everything felt... stale.

?P
Taking a step forward, the wolf looks back to see something else that makes his eyes go wide.

?P
Sitting over a crude desk and held by a small pedestal is a large gemstone. It&#39;s bigger than most he&#39;s seen before and more transparent. As the wolf leans forward to get a better look at it, what he sees makes his eyes go even wider.

?P
Inside the gemstone, he can see... a tower. A miniature tower that looks exactly like the one he was trapped in as far as he could tell. At the top of the gemstone, small clouds float and, at the bottom of it, there&#39;s green that resembles grass. The whole thing looks like an artificial place created &lt;b&gt;inside&lt;/b&gt; the gemstone...

?P
Before Drekkar can ponder more over the implications of that, the sound of steps coming from outside the room have the warrior twisting on his feet.

?P
[[Continue|d4a Ivex&#39;s Fall]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="87" name="d4a Punishments" tags="" position="13600,5900" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf&#39;s hands curl into tight fists. He can barely control his growling, looking down at Ivex. Will getting locked up in some mage&#39;s containment chamber, or whatever else the Guild decides to do to him, be enough to make him pay for what he&#39;s done? Of course not. They don&#39;t know half of what he&#39;s done, and even if he tells them, it won&#39;t have the same impact as seeing it.

?P
With the sack of gemstones in hand, the wolf stomps over to the tied-up feline and lifts him up by the scruff. Ivex shifts and grunts in his sleep, but doesn&#39;t wake up quite yet.

?P
The more Drekkar stares at the panther, the angrier he gets remembering that cocky face making fun of him. Leaving him tied up inside that room at the mercy of that candle...

?P
It&#39;s time to give Ivex a taste of his own medicine. A few ideas come to the wolf&#39;s mind. It&#39;s enough to make him smirk...

&lt;&lt;if $xd_EnthrallmentQuick || $xd_EnthrallmentLion&gt;&gt;
  ?P
  Memories of the lion Drekkar left bound inside the tower come to mind. He&#39;ll need to release him later, but the pendant the lion insisted on putting around his neck is still there as well. Judging by how things went, the pendant would clearly have made him into some kind of mindless thrall like the lion was. What if Ivex himself was made to wear it?
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $xd_ExtractionForceful || $xd_ExtractionGentle&gt;&gt;
  ?P
  Thinking back to his experience in the tower and Ivex&#39;s journal, his report on what he has done to the poor fox that tried to escape comes to the wolf&#39;s mind. According to the mage&#39;s notes, the substance that was lying in wait in that room was hinted to be something he put his prisoners in, and something Ivex said he had to be careful not to touch. How would he feel about being thrown into one of those?
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Wake him up. He needs to be awake to experience this.|d9y Personal Vengeance]]&lt;/li&gt;

  &lt;&lt;if $xd_EnthrallmentQuick || $xd_EnthrallmentLion&gt;&gt;
    &lt;li&gt;[[ [Unlocked: Enthrallment] Put a pendant around his neck.|d9x Ivex Enthrallment 1]]&lt;/li&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $xd_ExtractionForceful || $xd_ExtractionGentle&gt;&gt;
    &lt;li&gt;[[ [Unlocked: Extraction] Throw him into that blob.|d9x Ivex Extraction 1]]&lt;/li&gt;
  &lt;&lt;/if&gt;&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="88" name="d4a SFW Finish" tags="" position="14200,5600" size="100,100">&lt;&lt;nobr&gt;&gt;

Yeah. It&#39;s not his place to punish Ivex. A long time in prison ought to be enough to make him re-think his actions. With aching loins, the wolf moves out of the room with the feline in tow. Despite everything, however, Drekkar can&#39;t help but smile. A lot has happened, but luckily, no one will need to know about it, and his reputation is safe. Not only that, but the criminal is taken and the wolf is victorious.

?P
There is a lot of satisfaction in the thought that a large sack of gold awaits him for all this effort. In his head, the wolf already makes plans for a night of heavy drinking... and perhaps a few escorts in a tavern to make up for all the built-up need he never got to satisfy.

?P
[[Continue|d9y Bounty Collection]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="89" name="d4a Turn In" tags="" position="13625,5775" size="100,100">&lt;&lt;nobr&gt;&gt;

Before Ivex can wake up, Drekkar approaches him. He grunts looking down at the mage, but picks him up and places the unconscious, bound mage over his shoulder to get ready to take him back.

?P
Looking down, however, the wolf sees his member still aching. Surely Ivex&#39;s candle effect must wear off at some point, but it&#39;s still uncomfortable. Even the large wolf can&#39;t help but blush remembering his time bound on that cross. The way Ivex taunted and touched him, the threats the feline made...

?P
Not to mention the rest of his time trudging naked through his tower with a permanent hard-on. The wolf has captured many bounties before, some of them mages, but none of them had taken so much effort and humiliation to defeat.

?P
Glancing at the mage, he wonders. If he wants to give Ivex some reckoning for all he has done to him and to others, it has to be now. Once he&#39;s in the hands of the Wayward Adventurers Guild officers, then another kind of justice will be served to him.

?P
Drekkar takes a deep breath. Should he really just take Ivex to be arrested and nothing more?

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;li&gt;[[Yes. Turn Ivex in and be done with it.|d4a SFW Finish]]&lt;/li&gt;
  &lt;li&gt;[[No... he deserves some punishment. Punish Ivex for his misdeeds.|d4a Punishments]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="90" name="d4a Tying up" tags="" position="13250,5775" size="100,100">&lt;&lt;nobr&gt;&gt;

Holding the unconscious panther up, he almost looks harmless. Drekkar keeps growling, though. After all that time wandering around naked and erect, it doesn&#39;t bother the wolf as much anymore, but that thought alone is enough for the wolf&#39;s anger to feel bolstered. Who knows what the damned mage has done with his gear? With his trusty sword, even? Punishment of the same level should be inflicted upon him so that he can learn how it feels. But... what, exactly?

?P
Carelessly letting the panther fall down, Drekkar looks around. Ivex&#39;s gems are scattered all over the floor. It is wise to gather them up and make sure he can&#39;t get ahold of them, but before anything, he has to make sure the mage is secure. Going around the house, Drekkar quickly sees that he is in some kind of farmhouse. The tower was stored in the attic, but after going down a crude set of stairs, the windows reveal that there is nothing but fields and a poorly kept road surrounding it. Ivex keeps his hideout well-hidden. Luckily for the wolf, a farmhouse is well-equipped for many things, so he has no trouble finding a good bunch of thick rope in the main room, which he promptly takes upstairs to use.

?P
The panther is not his first bounty, so within a few minutes, the unconscious feline&#39;s hands and feet are well tied together with a knot he will not undo anytime soon. With that done, the wolf turns his attention toward the gemstones. With a grunt, he picks up the discarded pouch and starts gathering them up.

?P
As he shoves each of the many colored gems back into the small sack, he can&#39;t help but be curious. According to Ivex&#39;s notes, he stores the spells from his spellbook into these things so that he can cast them at will. His magical ability seems to be pretty limited to that method, at least outside of the damned tower. Glancing at the unconscious panther, the wolf picks a light blue gemstone up and looks it over.

?P
[[Continue|d4a Gemstones]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="91" name="d9a Enthrallment 1 (Knot)" tags="" position="11750,5225" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;ending-bad &quot;Enthrallment (Lion)&quot;&gt;&gt;
  ?P
&lt;&lt;/arc-skip&gt;&gt;

For a moment, Drekkar feels his adrenaline shoot up. His first reflex is to bring his paw up to remove the pendant from his neck, but as he tries to do so he realizes... it doesn&#39;t work. His arm won&#39;t move, no matter how much he wills it to. Neither will the other one, or his legs, or... anything!

?P
The wolf finds himself stuck there, on all fours above the lion with his knot stuck to the feline. His mind races for a moment, his heart speeding up, but then...

?P
A thought pops up in his head. It feels... alien, however. A thought that feels like his own but is not made by him. He looks at the herbs without meaning to and, suddenly, the wolf realizes he knows what to do.

?P
Drekkar calmly lets the lion under him go. Unlike before, the feline no longer struggles or even attacks him. The lion just waits, expression as blank as before, as the wolf&#39;s arms move and his hands are placed on the floor. They&#39;re moving, but he&#39;s not controlling them!

?P
His body then starts to get up. As it does, however, there&#39;s a tug. His knot is still stuck fast to the lion. The wolf can feel everything. The jolt of pleasure the tug of his knot brings him. Usually, it would be oversensitive discomfort, but something about that candle has completely killed his refractory period. Though he can feel it, however, his body ignores it. The wolf tugs again, harder this time, trying to pull his inflated knot out of the lion who, in turn, just grunts below him. It doesn&#39;t work, however.

?P
Drekkar grows nervous watching his body place a hand on the lion&#39;s back. He knows what&#39;s coming next and grows worried, but it feels so strange to be worried and feel his body being relaxed anyway. It feels like there are two minds inside his head now, more thoughts continuing to pop up, yet the artificial thoughts take precedence over his own. If there are two minds inside his head, his own is not the one in control. The wolf starts panicking, but his body does not react to that.

?P
No, instead, his body starts pulling. Both wolf and lion grunt as the process is not easy. Still, his body is stubborn and decided. Drekkar can feel on his dick and knot how tightly the lion grips it and how uncomfortable it feels to try and pull it out before it deflates, but there is no choice. His body just keeps pulling, keeping the lion down as he pulls and pulls, until, finally...

?P
When his knot pops, a rush of his seed flows down from the lion&#39;s used and spread ass. Both wolf and lion grunt at it, but neither says anything or shows any expression. Instead, both of them stand up. The wolf grows more and more worried as, no matter how much he fights, his body won&#39;t obey.

?P
Another thought pops up in his head. Then another, then another. They become more and more constant, taking his body over. The wolf finds himself looking at the herbs and realizes that, somehow, he knows what to do, even if he didn&#39;t before.

?P
Drekkar walks. Without his consent, his body walks towards the cabinets, opens one at the top, and pulls out a mortar and pestle he didn&#39;t know were there, but at the same time, did. The wolf&#39;s mind has trouble even grasping what&#39;s going on, but there&#39;s no choice. New thoughts keep coming to his head, thoughts that aren&#39;t his, but that overcome his own, taking the forefront whenever they pop up. It feels as if... as if there are two minds in his head at the moment, and the one in command is not his!

?P
All the lupine can do is watch his body bring the mortar and pestle to the counter and set it down. He can feel the touch of the herbs on his hand as usual when his body grabs a handful and throws it in. By his side, the lion is doing the same thing, going back to grinding his own batch. He&#39;s expressionless and, when the wolf is forced to glance at the lion, Drekkar realizes... he has the same blank expression on his own face. And he can&#39;t change it, no matter how hard he tries.

?P
His body starts grinding herbs next to the lion and there&#39;s nothing he can do about it. The gemstone on the pendant... it must be the gemstone! But removing it is out of question. His body won&#39;t obey.

?P
Drekkar is trapped.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Enthrallment 2]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_endingVariant = &quot;lion&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="92" name="d9a Enthrallment 1" tags="ending" position="11750,5075" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;ending-bad &quot;Enthrallment (Quick)&quot;&gt;&gt;
  ?P
&lt;&lt;/arc-skip&gt;&gt;

The lion stands chest to chest with the wolf and brings the pendant up. Drekkar reluctantly allows the feline to put it over his head and around his neck.

?P
Looking down at it, the wolf can see the blue gemstone glowing brighter. It is as if there is a mist inside it that glows and whirls. At first, nothing happens.

?P
The lion stands there, not moving and not saying anything, watching the wolf as if expecting something. It is only when Drekkar tries to speak that he realizes something is wrong.

?P
His mind wants to speak, but his muzzle does not obey. With urgency, the wolf raises his hands up to feel his muzzle, but midway towards it, his hands stop. His arms grow limp, resting by his sides without him meaning to. Adrenaline starts shooting up the wolf and the urge to move grows, but his legs stop responding as well. He&#39;s forced to just stand there! Drekkar growls, looking at the lion, and then...

?P
A thought pops up in his head. It feels... alien, however. A thought that feels like his own but is not made by him. He looks at the herbs without meaning to and, suddenly, the wolf realizes he knows what to do.

?P
Drekkar walks. Without his consent, his body walks towards the cabinets, opens one at the top, and pulls out a mortar and pestle he didn&#39;t know were there, but at the same time, did. The wolf&#39;s mind has trouble even grasping what&#39;s going on, but there&#39;s no choice. New thoughts keep coming to his head, thoughts that aren&#39;t his, but that overcome his own, taking the forefront whenever they pop up. It feels as if... as if there are two minds in his head at the moment, and the one in command is not his!

?P
The wolf grows more and more worried as, no matter how much he fights, his body won&#39;t obey. Drekkar can feel himself relaxing, no longer nervous, even though he wants to be. His other mind isn&#39;t.

?P
All the lupine can do is watch his body bring the mortar and pestle to the counter and set it down. He can feel the touch of the herbs on his hand as usual when his body grabs a handful and throws it in. By his side, the lion is doing the same thing, going back to grinding his own batch. He&#39;s expressionless and, when the wolf is forced to glance at the lion, Drekkar realizes... he has the same blank expression on his own face. And he can&#39;t change it, no matter how hard he tries.

?P
His body starts grinding herbs next to the lion and there&#39;s nothing he can do about it. The gemstone on the pendant... it must be the gemstone! But removing it is out of the question. His body won&#39;t obey.

?P
Drekkar is trapped.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Enthrallment 2]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_endingVariant = &quot;quick&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="93" name="d9a Enthrallment 2" tags="" position="11875,5150" size="100,100">&lt;&lt;nobr&gt;&gt;

It doesn&#39;t matter how much the wolf shouts and yells inside his thoughts or how much willpower he puts into defying his body&#39;s movements. It won&#39;t obey. Whatever that pendant is, it&#39;s strong enough to overcome him entirely.

?P
Drekkar is forced to remain there next to the lion in the exact same state the leonine warrior is in. Blank expression and mindlessly grinding herbs for Ivex&#39;s nefarious purposes. Like... like some sort of slave. Like a mindless fucking thrall! The thought alone is enough to drive the wolf mad with anger, but his heart does not even speed up. It feels so unnatural to feel these things without really feeling them!

?P
Everything about it is unnatural. Invasive! And the worst part? Drekkar can tell that there&#39;s more to the pendant too. All around him, the smell of herbs that were already prevalent in this room now feels enhanced. His sensitive canine nose can pick it up very well, and it grows even stronger when he grinds them. The smell comes out of them and when it does...

?P
For some reason, that smell feels incredibly &lt;b&gt;arousing&lt;/b&gt;. If he could look at the lion by his side, he would. The wolf starts to understand why the lion was hard and dripping the whole time while working. He himself cannot help it. His cock throbs between his legs, unattended, but the arousal is there, coming from the herbs he&#39;s forced to grind. With how boring the work is, the lust surrounding his body is the only thing his mind can focus on. It feels like torture to feel it and be completely unable to even get close to tend to it.

?P
No matter how much he tries, Drekkar cannot find a way out. He&#39;s trapped there grinding herbs and getting aroused by it until who knows how long after that, Ivex himself opens the door.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Enthrallment 3]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="94" name="d9a Enthrallment 3" tags="" position="12000,5150" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf can&#39;t even turn his head to look at the damned mage, but the panther is incredibly happy and amused to find him there with a gemstone around his neck and working next to the lion.

?P
There is nothing Drekkar can do. Ivex compliments the lion for capturing him with a slap to the feline&#39;s bare ass. The wolf is forced to remain there, grinding herbs while Ivex&#39;s hands explore his helpless body, stroke and play with his forcefully aroused cock and even go as far as shoving a finger up his ass.

?P
The wolf can&#39;t growl, can&#39;t speak, can&#39;t do anything about it! It hurts his pride to no end.

?P
Ivex decides there and then to keep him as a thrall, saying the lion had been needing company anyway and Drekkar was just as nice to look at. The mage then goes and grabs a set of leather straps he calls a &#39;uniform&#39; to outfit the wolf with.

?P
Much to Drekkar&#39;s dismay, whatever order Ivex issues, the parasitic mind created by the necklace makes his body obey right away. The wolf has never tried so hard to will his body to punch someone as he does when Ivex makes him lift his arms, turn this way and that, and even lift his tail while he puts the leather gear upon his body. Just like the lion, his &#39;uniform&#39; consists of little more than a leather harness. Unlike the lion, however, the wolf gets nothing more than a metal ring around the base of his balls that keeps them uncomfortably pulled forward, making them more exposed. The discomfort is still felt by the wolf, but Ivex? He merely pats the wolf&#39;s exposed nuts and laughs, saying he&#39;ll enjoy looking and playing with them in the future.

?P
After that, there is nothing else the wolf can do. Removing the pendant is impossible by himself and Ivex surely won&#39;t do it. Drekkar finds himself doomed to serve as the perverted mage&#39;s thrall against his will.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Enthrallment 4]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="95" name="d9a Enthrallment 4" tags="" position="12125,5150" size="100,100">&lt;&lt;nobr&gt;&gt;

Time loses all meaning to the wolf. Inside Ivex&#39;s tower, it&#39;s impossible to tell day from night. His body sleeps sometimes, but the intervals at which he does seem random and, sometimes, get interrupted by Ivex&#39;s orders if they are particularly lengthy.

?P
Little by little, the unwilling wolf learns more about the mage, but every new thing he learns just makes him hate him more. Drekkar gets by telling himself that, as soon as he&#39;s free, he&#39;s gonna get his revenge on the mage, except that the days keep going by and freedom never comes.

?P
At first, Ivex takes a lot of pleasure in just making the wolf do tricks for him. Making him dance, giving him clothes to put on, just so that he can strip for him, ordering the wolf to exercise, often way past even Drekkar&#39;s considerable limits, just for his own amusement. As always, the wolf can &lt;b&gt;feel&lt;/b&gt; everything, but stop none of it.

?P
It gets worse when the mage moves on to more... invasive things. Forcing the wolf to jerk off for him is bad enough, but the mage seems to also take immense pleasure in ordering the wolf to jerk off and then making him stop halfway through. Ivex is definitely aware that Drekkar&#39;s mind is intact behind his body, for he often talks to the wolf as if he had any choice in any matter, just to further insult and humiliate him.

?P
Life under Ivex&#39;s command is absolute hell to the wolf. Days and days of grueling work grinding his herbs, making his potions, or just carrying around his things around his tower. Whole nights edging himself and unable to get release for Ivex&#39;s amusement at the corner of his office while he works, with the worst one being the one when the mage falls asleep on his desk and forgets the wolf was there doing that, leaving Drekkar to spend an entire night of relentlessly jerking off and edging without being able to release, move or otherwise even say anything against it.

?P
There&#39;s the lion as well. Overhearing Ivex&#39;s comments to him, Drekkar finds out his name is, or was, Aidham. The wolf can only guess he must have been an adventurer that tried to fight Ivex just like he is, but in the end, failed, and now has fallen under Ivex&#39;s spells as well.

?P
Activities with the lion end up being quite common as well. The mage takes pleasure sitting back and jerking off while watching the two of them fuck each other under his orders in any position he can imagine. Neither warrior has any choice in the matter but to watch their bodies obey and feel everything as the mage uses them for his own pleasure.

?P
Time keeps passing, each day a new set of orders with some being worse and some being better. Still, Drekkar&#39;s own mind waits. His current system is counting the number of punches he&#39;s gonna give Ivex when he gets free, but as of right now he&#39;s beaten a thousand and is still going. Still, someday... someday freedom will come and he&#39;ll be able to settle the score. Someday, somehow.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[The End|d9a Enthrallment End]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="96" name="d9a Enthrallment End" tags="roam-stop" position="12250,5150" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;switch $d_endingVariant&gt;&gt;
&lt;&lt;case quick&gt;&gt;
  &lt;&lt;ending-bad &quot;Enthrallment (Quick)&quot; xd_EnthrallmentQuick&gt;&gt;
&lt;&lt;case lion&gt;&gt;
  &lt;&lt;ending-bad &quot;Enthrallment (Lion)&quot; xd_EnthrallmentLion&gt;&gt;
&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`Unknown ending variant ${$d_endingVariant}`)&gt;&gt;
&lt;&lt;/switch&gt;&gt;

  ?P
Drekkar became Ivex&#39;s thrall.

?P
To change the adventurer&#39;s fate, you can...

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;&lt;checkpoint-action d_checkpoint1&gt;&gt;
  ?restartAction
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="97" name="d9a Extraction 1" tags="ending" position="10675,6800" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;ending-bad &quot;Extraction&quot;&gt;&gt;
  ?P
&lt;&lt;/arc-skip&gt;&gt;

Intent on getting that gemstone, the wolf brings his paw up to the blob. Slowly and carefully, he approaches it to test it with a clawed finger until...

?P
He pokes at it. The whole surface ripples when he does, but the blob remains firm in place. It feels... strange. Definitely viscous and more &#39;wet&#39; than he thought. Odd. Nothing in particular happens, however, and the wolf pokes it a few more times, seeing it bounce and ripple in response to it. With a small chuckle, the wolf just shakes his head and pulls his paw away.

?P
Or tries to.

?P
When Drekkar tries to pull his finger away from the slime, he finds that it pulls back. Only the tip of his claw is enveloped by it, but as he tugs at it, the firm blob resists it, keeping his finger there.

?P
With a small growl and a frown, the wolf pulls harder. The large warrior puts the strength of his muscles into pulling, his other paw coming to wrap around his wrist to pull it more, yet even if he does manage to distend the blob a little further... it still doesn&#39;t let go. It feels like his entire finger might come loose before the blob lets go of it.

?P
Stopping his pulling for a moment, the wolf stops to catch his breath. Looking at the blob, Drekkar tries to think of a solution for a moment, when all of a sudden...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Extraction 2]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="98" name="d9a Extraction 2" tags="" position="10800,6800" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf&#39;s ears twitch when he feels his wrist getting engulfed in one swift motion. The blob protrudes itself forward to grab more of his paw, and before the wolf can even properly react, &lt;b&gt;it&lt;/b&gt; pulls him.

?P
&quot;Whoa!&quot; The wolf stumbles forward, the entirety of his arm pulled into the viscous blob before he can plant his feet on the ground and use his other hand to grab onto the platform&#39;s edge and keep it from pulling him further in. With a growl, the wolf tries to pull his arm out but meets the same resistance that his finger had met before.

?P
&quot;What the fuck?!&quot; the wolf curses. Drekkar&#39;s muscles bulge as he tries to pull his arm out, but the blob does not yield. It simply stands there, unmoving and clinging to the wolf&#39;s entire arm. Its insides feel... warm. The wolf can feel the blob&#39;s essence moving around the fur of his arm in that same slow, viscous way.

?P
The wolf tries to pull his arm out with all of his might. When his strength is spent and he stops for a moment to take another breather and curse again, the blob acts once more.

?P
The next sudden pull has the wolf stumbling forward once more and his arm sinking into the blob all the way to his shoulder. Drekkar manages to awkwardly keep himself pressed against the altar, but his awkward leverage doesn&#39;t amount to much.

?P
&quot;What the fuck is this?!&quot; the wolf asks no one in particular. Fuck. How&#39;s he going to get out?! Before he can wonder properly, the blob pulls again. The wolf warrior uses all of his strength to keep it from pulling him further in, but the more of him the thing has, the stronger it seems to get.

?P
Drekkar fights bravely, but soon his hand slips and the blob pulls him in so that his neck and the side of his head get pulled in. Desperately, Drekkar tries to fight against it, but with even less leverage...

?P
In one sudden, even more surprising move, the blob suddenly sucks him in with such strength that the wolf as a whole gets taken into its form.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Extraction 3]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="99" name="d9a Extraction 3" tags="" position="10925,6800" size="100,100">&lt;&lt;nobr&gt;&gt;

Drekkar&#39;s first instinct is to hold his breath as he gets pulled into the viscous blob. Keeping his muzzle well shut, the wolf thrashes as best as he can inside it. It all feels... sticky, wet and warm. It feels like being underwater, but its texture is thicker and moving inside it is hard. It takes a lot of strength from the wolf to be able to wave his arms in a feeble attempt to &#39;swim&#39; out of the thing, but the blob keeps him engulfed.

?P
Before long, it starts hardening too. Moving becomes harder and harder. The wolf is left in an awkward &#39;floating&#39; position with his limbs half-spread. Grunting, Drekkar&#39;s muscles bulge with effort as he tries to keep moving, but the liquid hardens all around him, stopping the wolf altogether and keeping him well inside it.

?P
Panicking, Drekkar gets more and more desperate. He keeps his breath held, but he knows he can&#39;t hold it for much longer. The slime keeps hardening until the wolf can no longer move even an inch, frozen inside its transparent body no matter how hard he tries, and as the seconds tick by...

?P
And then, the choice is removed from him. Though he can&#39;t move inside the slime, Drekkar can feel &lt;b&gt;it&lt;/b&gt; move around him. Without his consent, the wolf feels his muzzle being opened as if being pulled from both sides. A silent groan and whine comes from the wolf as he feels the slime coat the inside his muzzle and tongue. It tastes of... nothing, really. A stale taste, like lapping water. That&#39;s not his main concern, however. His main concern is breathing and, as his lungs start screaming for it and the situation starts getting dire...

?P
A sudden income of air comes down his throat and nostrils.

?P
Drekkar gasps. His eyes look around frantically. Though the wolf can barely see it, it seems the slime has made an opening between his muzzle and nostrils to the outside, allowing air to go past so that he can breathe.

?P
Breath after eager breath, the frozen wolf takes it all in gladly. Though his situation is still dire, the knowledge that at least he won&#39;t die of asphyxiation is very reassuring. Frozen there, the wolf&#39;s eyes dart to the side. The red gemstone is still there too. Although the wolf himself takes the center of the blob now, the gemstone is still visible beneath him near the altar&#39;s surface. Very close, but nigh unreachable in the wolf&#39;s current state.

?P
As Drekkar is busy regaining his breath, though, the wolf&#39;s eyes widen once more. The slime starts moving more around his body. He can feel its slimy caressing in a very weird way. It moves all around him, encasing and feeling his chest, his stomach, his legs, going through his whole body, and then...

?P
Drekkar can&#39;t even frown when he feels it starts focusing on his forcefully erect cock.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    /* cspell:disable-next-line */
    &lt;li&gt;[[&quot;Hmmfgh!!&quot;|d9a Extraction 4]]&lt;/li&gt;
    /* cspell:disable-next-line */
    &lt;li&gt;[[&quot;Hmmfffhhg?!&quot;|d9a Extraction 4]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="100" name="d9a Extraction 4" tags="" position="11050,6800" size="100,100">&lt;&lt;nobr&gt;&gt;

No matter how much the wolf tries to struggle or move, it feels as if he might as well be encased in solid rock. The slime around him does not budge even a little. His arms, legs, paws, everything remains completely immobile and yet, at the same time, the slime&#39;s texture can be felt over it. Always moving, always working.

?P
Thankfully for Drekkar, his muzzle ended up slightly tilted so that, directing his eyes downwards, he can look down at his own cock. It stands there just as erect as it was when he fell into the slime. The red spire protruding from his sheath with its veiny, dark red surface remains still as well, and yet...

?P
The wolf can definitely feel it. While the slime can be felt moving softly all around his body, on the surface of his cock, it&#39;s as if it moves with more vigor. Around the entire length of his cock, the wolf can feel it &lt;b&gt;kneading&lt;/b&gt; its sensitive surface. The increased movement starts at the very tip of his member and goes down his shaft all the way down to his sheath, where the slime also feels like it kneads and tugs at it. Beyond that point? Nothing. Just the light, immobile feeling the slime has over the rest of his body.

?P
The wolf lets out a growl from his throat. The sound barely makes it past his encased muzzle, but anger surges through the wolf over the knowledge that he remains there, frozen and with this... this &lt;b&gt;thing&lt;/b&gt; taking advantage of him. What does it want? Why is it doing that?!

?P
Before the wolf can ponder on it further, the movement around his cock changes. The paralyzed wolf&#39;s eyes dart down towards it and, this time, he can see it for sure.

?P
Though the slime seems solid as rock everywhere else, around his cock it moves. It flexes, its surface shifting ever so slightly around his member and, as it does, the wolf can feel... a stroke over his sensitive shaft.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Extraction 5]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="101" name="d9a Extraction 5" tags="" position="11175,6800" size="100,100">&lt;&lt;nobr&gt;&gt;

The slime does it again. And again, and again. It starts a slow, rhythmic set of movements around the wolf&#39;s cock, kneading it at the same time as it strokes it. At first, the strokes are loose and wild, but as the slime moves up and down, it seems to adapt to his length. The strokes become wider, reaching all the way to the wolf&#39;s tapered tip and then going downwards all the way to the top of his knot, which in turn throbs and pulses, growing more engorged for the stimulation.

?P
From within the slime, Drekkar growls again, but he also can&#39;t help but moan. Completely immobilized, the wolf can&#39;t even frown as the weird magical slime starts masturbating him without his consent.

?P
Pleasure surges through the bound lupine. The candle&#39;s after-effects still linger in his system but with this, the wolf suspects that even if it didn&#39;t, the slime&#39;s methodic and unusual way of pleasuring might have coaxed him regardless. It seems to know very well what it&#39;s doing. A little too well, perhaps. Drekkar no longer has any doubt that this must be another one of Ivex&#39;s perverted, twisted creations, but how to get out of it?!

?P
At the moment, it&#39;s hard to think. As the slime keeps stroking the wolf&#39;s cock with increased precision and speed, the pleasure is undeniable. A small burst of pre-cum comes from its tip and, with that, the slime seems to redouble its efforts in masturbating him. What the hell does it want?

?P
There&#39;s little the wolf can do. Inside him, his rage swells. He can try harder to fight against this thing. Ivex won&#39;t get him that easily! On the other hand, it&#39;s much, much easier to just give in to the pleasure. It feels so heavenly good. It&#39;s not like there&#39;s anyone watching. Maybe giving in to it just for a little while would be beneficial as well...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    /* cspell:disable-next-line */
    &lt;li&gt;[[&quot;Hmmrrrrhfgh!!!&quot;|d9a Extraction Forceful 1]]&lt;/li&gt;
    /* cspell:disable-next-line */
    &lt;li&gt;[[&quot;Hmmmffh...&quot;|d9a Extraction Gentle 1]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="102" name="d9a Extraction End" tags="roam-stop" position="12075,6775" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;switch $d_endingVariant&gt;&gt;
&lt;&lt;case gentle&gt;&gt;
  &lt;&lt;ending-bad &quot;Extraction (Gentle)&quot; xd_ExtractionGentle&gt;&gt;
&lt;&lt;case forceful&gt;&gt;
  &lt;&lt;ending-bad &quot;Extraction (Forceful)&quot; xd_ExtractionForceful&gt;&gt;
&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`Unknown ending variant ${$d_endingVariant}`)&gt;&gt;
&lt;&lt;/switch&gt;&gt;

?P
Drekkar remained trapped serving as fuel for Ivex&#39;s magic.

?P
To change the adventurer&#39;s fate, you can...

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;&lt;checkpoint-action d_checkpoint1&gt;&gt;
  ?restartAction
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="103" name="d9a Extraction Finish Forceful" tags="" position="11925,6850" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf&#39;s eyes grow wide as his eyes and nose recognize what the light is at the same time.

?P
It&#39;s a candle. It burns on a special candleholder built inside the closed alcove. A bright red, large candle that looks exactly the same as the one he&#39;s seen before.

?P
As the wolf breathes in the only air he&#39;s allowed, his nose burns. It feels like breathing fire...

?P
/* cspell:disable-next-line */
&quot;HMMMMGHF!&quot;
the wolf howls, fully aware of what that candle does. His struggle is renewed, his rage increases, yet, with his arms folded across his chest and the slime as hard as it is... it is hopeless.

?P
The candle&#39;s influence is quickly felt. The arousal the wolf already felt grows tenfold and, somehow, the candle seems to do something to the slime as well.

?P
Its movements start to change. They grow wilder, more frantic, even more determined. Does it detect the candle&#39;s smell or does it feel the way the wolf&#39;s cock hardens yet a bit more from its influence? Drekkar can&#39;t know. All he knows is that he finds himself trapped in a dead-end of pure, forced pleasure.

?P
With the way the slime works on his cock, on his knot and pounding his ass... it doesn&#39;t take long for the wolf to reach a forced climax once again.

?P
The second one feels a little worse than the first. Though it is still overwhelming pleasure that takes over the wolf, it feels like too much. Way too much. More than even a powerful warrior like him can handle. The wolf whines as his cock shoots just as much seed as before, if not more, for the slime to collect and take who knows where.

?P
And it doesn&#39;t stop there. As the wolf keeps trying to fight and resist the slime, all it does is make it work harder to milk him. With every ounce of his strength, the wolf tries to keep hold of his mind. To not breathe in too much of the candle, to keep himself lucid. Yet, he can feel the pleasure overwhelming, the fire taking over, but as he keeps fighting...

?P
The wolf&#39;s hope only vanishes when a second flicker of light appears above him. Then a third, a fourth, a fifth...

?P
Above him, the wolf sees a myriad of candles. Dozens of them affixed to the alcove&#39;s ceiling with about ten of them burning at the same time. The wolf&#39;s next breath feels like hot, concentrated lava. The fire of arousal inside him burns.

?P
And his cock shoots.

?P
Time loses all meaning to the trapped wolf. Eventually, some of the candles get magically put out, but there&#39;s always at least one burning. It is the only thing he can idly focus on. The light, or the red gemstone stuck there with him. Both out of the wolf&#39;s reach and, with his thoughts muddled by lust, out of his interest as well. The candles keep him in a perpetual state of lust, his balls churning as they produce, and the slime working on pleasuring him so that he shoots and supplies.

?P
Over, and over, and over again, the wolf is brought to orgasm through merciless masturbation, and it never stops.

?P
Every now and then, the wolf is aware that he falls asleep, but even as he does, he is not sure if the slime ever stops. When he sleeps, he dreams of sex, when he wakes up, the slime gets to work. His cock is always hard, always ready to shoot, always cumming. His other needs are met as well. Somehow, everything is set so that he has everything he needs for the slime to keep working in his alcove in the dark. One of many, supplying the mage&#39;s tower.

?P
At one point, Drekkar is barely aware that Ivex opens his alcove to look at him. The mage says a few words that he cannot hear because he&#39;s busy howling as his cock shoots his seed for the slime to collect. The panther mage just laughs, then with his glowing hand, reaches into the blob as if it was water, takes the red gemstone with him, smirks and closes the alcove again, leaving him in the dark with the slime and the candles. The slime kneads his cock, works his knot, pounds his ass...

?P
The pleasure feels unending.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Extraction End]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_endingVariant = &quot;forceful&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="104" name="d9a Extraction Finish Gentle" tags="" position="11925,6725" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf&#39;s eyes grow wide as his eyes and nose recognize what the light is at the same time.

?P
It&#39;s a candle. It burns on a special candleholder built inside the closed alcove. A bright red, large candle that looks exactly the same as the one he&#39;s seen before.

?P
As the wolf breathes in the only air he&#39;s allowed, his nose burns. It feels like breathing fire...

?P
/* cspell:disable-next-line */
&quot;Hmmmmmmgghhf!&quot;
the wolf howls, fully aware of what that candle does. His body almost wants to struggle, yet it&#39;s as if the slime detects that and, in turn, massages all of his sensitive spots to keep him from doing so.

?P
The wolf closes his eyes and whines. The lust, the pleasure... it&#39;s so intense, it&#39;s so... good.

?P
The candle&#39;s influence is quickly felt. The arousal the wolf already felt grows tenfold and, somehow, the candle seems to do something to the slime as well.

?P
Its movements start to change. They grow more calculated, more precise. Does it detect the candle&#39;s smell or does it feel the way the wolf&#39;s cock hardens yet a bit more from its influence? Drekkar can&#39;t know. All he knows is that he finds himself trapped in a cloud of pure, heavenly pleasure.

?P
With the way the slime works on his cock, on his knot and all around his body, it doesn&#39;t take long for the wolf to reach a forced climax once again.

?P
The second one feels even better than the first. Though it is still overwhelming pleasure that takes over the wolf, the slime makes it feel just right, being gentle when it needs to be and stroking him hard where pleasure hits the best. A powerful warrior like him has much to give... The wolf moans, the sound trapped inside the alcove with him as his cock shoots just as much seed as before, if not more, for the slime to collect and take who knows where.

?P
And it doesn&#39;t stop there. The more the wolf gives in to the pleasure, the more the slime wants to take. It keeps milking him, pleasuring him and convincing him to relax and keep enjoying just one more orgasm. The wolf is aware that the candle he&#39;s breathing will mess up his mind soon and, deep inside, a voice yells at him not to let it happen, but the pleasure...

?P
The single candle burning above him is the focus of the wolf&#39;s eyes as it slowly overcomes him. The slime keeps working on his cock, on his nipples, on his feet, everywhere. It&#39;s just... too much. The fire of arousal inside him burns brighter.

?P
And his cock shoots.

?P
Time loses all meaning to the trapped wolf. The candle above him is always burning and, when it starts getting small from burning for too long, it goes out and, much to the wolf&#39;s surprise, another candle right next to it magically lights up instead. One that is still big and brand new. It is only then that the wolf, barely aware of his surroundings anymore, notices that there aren&#39;t one or two candles inside the alcove above him, but rather dozens of them placed there so that they can keep burning, one after the other. It is the only thing he can idly focus on. The light, or the red gemstone stuck there with him. Both out of the wolf&#39;s reach and, with his thoughts muddled by lust, out of his interest as well. They keep him in a perpetual state of lust, his balls churning as they produce, and the slime working on pleasuring him so that he shoots and supplies.

?P
Over, and over, and over again, the wolf is brought to orgasm through merciless masturbation, and it never stops.

?P
Every now and then, the wolf is aware that he falls asleep, but even as he does, he is not sure if the slime ever stops. When he sleeps, he dreams of sex, when he wakes up, the slime gets to work. His cock is always hard, always ready to shoot, always cumming. His other needs are met as well. Somehow, everything is set so that he has everything he needs for the slime to keep working in his alcove in the dark. One of many, supplying the mage&#39;s tower.

?P
At one point, Drekkar is barely aware that Ivex opens his alcove to look at him. The mage says a few words that he cannot hear because he&#39;s busy howling as his cock shoots his seed for the slime to collect. The panther mage just laughs, then with his glowing hand, reaches into the blob as if it was water, takes the red gemstone with him, smirks and closes the alcove again, leaving him in the dark with the slime and the candles. The slime kneads his cock, works his knot and teases his entire body.

?P
The pleasure feels unending.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Extraction End]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_endingVariant = &quot;gentle&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="105" name="d9a Extraction Finish" tags="" position="11800,6775" size="100,100">&lt;&lt;nobr&gt;&gt;

The seed the wolf expelled is taken by the slime. It travels through its surface around the wolf&#39;s body and then it goes down. The wolf remembers the small hole he had seen in the altar beneath the slime and, seeing no more traces of his seed, he can only assume it was taken there.

?P
Before Drekkar can ponder on what might happen next, it simply starts over again.

?P
The slime&#39;s kneading of his cock returns, as does everything else. It&#39;s slow at first, but it starts speeding up fast. Still feeling overwhelmed by his last orgasm, the wolf groans and whines inside his prison, but there is nothing he can do but take it.

?P
Though the candle he endured before helps, there is still some sensitivity to be felt around his cock. The slime ignores it entirely, however, and continues milking him. Soon the wolf can feel little more than pleasure all over again.

?P
As he continues to be overwhelmed, Drekkar at last notices that his surroundings change. The stone altar the slime was resting on starts glowing. Runes appear on it and, from the corner of his eye, he can see one of the open alcoves that adorn the wall start glowing as well.

?P
It all happens very fast. In an instant, the wolf is trapped inside the blob in the middle of that hall. Then, in the next, the blob the wolf is trapped in is no longer in the middle of the large room but rather teleported to an alcove. Surrounded by walls of rock, the wolf gets to see as its large doors magically close, and then, darkness surrounds him.

?P
Trapped inside the slime completely in the dark feels worse. It keeps assaulting his cock and everything else mercilessly, drawing him closer and closer to orgasm again despite the fact that he only just cummed. All in the absolute dark! For a moment, despite all the pleasure, the wolf panics. How can his situation get any worse?

?P
And then, as always, it does.

?P
As the wolf is being forcefully milked by the slime, a flicker of light suddenly appears above him.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;if $d_endingVariant === &quot;forceful&quot;&gt;&gt;
    [[Continue|d9a Extraction Finish Forceful]]
  &lt;&lt;else&gt;&gt;
    [[Continue|d9a Extraction Finish Gentle]]
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="106" name="d9a Extraction Forceful 1" tags="" position="11300,6850" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  /* cspell:disable-next-line */
  &quot;Hmmrrrrhfgh!!!&quot;
  the wolf grumbles with outrage.
  ?P
&lt;&lt;/arc-only&gt;&gt;

No! The wolf lets out another muffled growl. A powerful warrior such as him will never, ever give in to this mage&#39;s perverted machinations!

?P
Huffing in outrage, the wolf redoubles his efforts to fight against the slime encasing him. His biceps, his chest, all of his muscles bulge out with effort as the wolf does his best to ignore the pleasure forcefully enveloping his cock and, instead, puts all of his might into forcing himself against the slime.

?P
A few seconds go by and nothing happens. The wolf lets his rage fuels him. He won&#39;t be subjected to this kind of humiliation again! Focusing all of his strength on his right arm, the wolf pushes and pushes, until...

?P
He moves! His arm pushes against the slime, successfully displacing it an inch, and as Drekkar feels it displacing around him, he&#39;s fueled by the thrill of success. The strength he puts against it increases, trying hard to move it a little more.

?P
But then, all of a sudden, the slime hardens even more.

?P
Around his entire body, the slime&#39;s density seems to increase. The movement on his cock stops for a moment and the wolf&#39;s entire body feels as if the slime is closing in around him. He feels it press back against him everywhere. His chest feels heavy for it, his muzzle is forcefully closed by it and Drekkar is forced to whimper as even his round, furry balls that were resting between his legs feel like they&#39;re being crushed.

?P
Panic sets into the wolf for a moment as he feels pain, but then, just as suddenly as it came... the pressure vanishes.

?P
As it does, however, the slime around him feels, somehow, even more solid than before. If it felt like the wolf was encased in stone earlier, now it feels like the damned slime is made of pure metal.

?P
And the wolf is left panting from all of his efforts with a lingering ache on his balls. Then, much to his dismay, the slime softens around his cock again and immediately restarts its work in forcefully pleasuring him. If anything, it seems to work with harsher strokes than before.

?P
It can&#39;t be!

&lt;&lt;arc-skip&gt;&gt;
  &lt;ul class=&quot;actions&quot;&gt;
    /* cspell:disable-next-line */
    &lt;li&gt;[[&quot;HMMRFGH!!!&quot;|d9a Extraction Forceful 2]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_endingVariant = &quot;forceful&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="107" name="d9a Extraction Forceful 2" tags="" position="11425,6850" size="100,100">&lt;&lt;nobr&gt;&gt;

With even more outrage, the wolf is determined to fight again. Once more, his muscles bulge as he summons his strength. The outrage swells within him. His eyes focus down on his cock, abused by the slime moving around it, pleasuring its surface...

?P
The wolf does his best to try and ignore it. He huffs from the effort while, at the same time, he groans from the pleasure. The slime goes up and down the smooth surface of his cock, assaulting it from all sides. It feels like the softest of hands is stroking him, like a group of smooth tongues is licking it, from top to bottom, over and over again. The wolf can see its surface displacing itself as it moves from the tip of his cock to the base and back, and then, as it goes down his shaft just like all the other times...

?P
The slime keeps going down, displacing itself in a wider motion to engulf his knot. The wolf&#39;s strength falters when he feels it for the first time. The engorged bulb of flesh at the base, the most sensitive part of his cock by far, sends jolts of incredible pleasure through the wolf&#39;s entire body as it is kneaded and massaged by the slime in that same warm, methodic way.

?P
Drekkar would close his eyes if he could. They lose focus for a moment as the pleasure overwhelms him. The wolf&#39;s breathing quickens, his chest heaving the slime&#39;s body as it finishes with his knot and goes up his length again, pulling at it, masturbating him masterfully, and then when it reaches his tip, it starts going down again. The wolf&#39;s eyes follow the slime&#39;s movements as it gets closer and closer to his knot, as it does...

?P
/* cspell:disable-next-line */
&quot;Hmmmmghfff..!!&quot;
the wolf grunts.

?P
The pleasure is overwhelming, but his rage is not gone. If anything, it is bolstered by the slime&#39;s further abuse of his weak points. Fighting through the pleasure, Drekkar is resolved not to give up. Despite how weak his muscles feel as the slime keeps working on his cock, the wolf musters up all of his strength to try fighting again.

?P
His arms, his legs, his head, anything. He growls, desperately trying to move, desperate to fight against this thing!

?P
The slime keeps pleasuring his cock, but as the wolf tries and tries to fight against it, the rippling around his member does seem to falter somewhat. It tilts this way or that every now and then, as if the slime is having difficulty keeping him at bay.

?P
It gives the wolf hope! The slime starts speeding up the treatment of his member, maybe trying to distract him with pleasure? He won&#39;t fall for it, though! The wolf is determined to keep fighting no matter what! Just as he thinks he might get some movement done inside the slime again, however...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Extraction Forceful 3]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="108" name="d9a Extraction Forceful 3" tags="" position="11550,6850" size="100,100">&lt;&lt;nobr&gt;&gt;

The slime hardens again. This time, however, it does not feel the same as last time.

?P
All around his body, that pressure comes from the viscous liquid again, yet around his cock, the stroking doesn&#39;t stop. If anything, it increases. While before the wolf could feel a single displacement in the slime&#39;s surface going up and down his length, a second one now appears. Then a third, then a fourth. All of them assault his cock, kneading it from different sides to the point where his cock even bobs back and forth inside the liquid as the different surfaces start masturbating it. The feeling of them around his shaft, around his &lt;b&gt;knot&lt;/b&gt;, makes the wolf let out a drawn-out groan as the pleasure enforced on him increases tenfold.

?P
That&#39;s not all, though. The slime&#39;s pressure does not subside. All around him, the slime starts moving. Though the wolf cannot move himself, the slime around him does. Little by little, the wolf finds himself getting moved around the inside of that blob of gelatinous water. Without his consent, Drekkar finds his arms coming closer to his chest. Both of them slowly approach, then get crossed over his muscular pectorals and then, when both of his arms are hard-pressed against it, the wolf feels the slime around his upper body harden again, rendering him completely immobile. At the same time, however, his legs start getting forcefully spread.

?P
The new movement makes the wolf feel more vulnerable as he&#39;s forced to spread them while his cock keeps getting abused. And then, when the wolf thinks things can&#39;t possibly get worse...

?P
The slime starts softening around his sheath. Then around his balls. The same tongue-like treatment that his cock is being assaulted with starts happening around his sensitive orbs.

?P
/* cspell:disable-next-line */
&quot;HMMFGH!&quot;
the wolf howls in outrage. With the slime around his upper body feeling harder, the sound barely makes it past his muzzle anymore. Drekkar tries and tries to fight it in outrage, but with the increased assault on his cock and knot joined in by the one on his balls, the stimulation is too much. The wolf&#39;s ears grow red, the humiliation growing as he feels the slime succeeding in extracting the pleasure out of him. It&#39;s close...

?P
And then, things get even worse for the captured adventurer.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Extraction Forceful 4]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="109" name="d9a Extraction Forceful 4" tags="" position="11675,6850" size="100,100">&lt;&lt;nobr&gt;&gt;

As if the stimulation on his cock and balls wasn&#39;t enough, the wolf feels the slime start to soften around the underside of his tail as well.

?P
Frantically, the wolf&#39;s eyes grow even wider.

?P
/* cspell:disable-next-line */
&quot;NNHM! NNHHH!&quot;
he yells to the slime as if it can hear it. The thing does not care, though.

?P
Little by little, the wolf feels himself being violated. As a proud warrior, the humiliation of feeling the slime&#39;s viscous texture going up his ass makes his face burn with rage, but no matter how hard he tries, there is no escaping it.

?P
The slime, as always, seems to know exactly what to do. It penetrates the wolf, spreading him, then going just deep enough into the wolf to find the special spot in there. When it does, the wolf lets out a muffled howl as it starts softening, getting the same warm texture it has around his cock, and the slime starts mercilessly pressing and pressuring against the wolf&#39;s most sensitive spot...

?P
It&#39;s too much.

?P
All the pleasure being inflicted on him comes together. The wolf&#39;s eyes roll back as the stimulation of his cock, knot, balls and prostate send mind-numbing waves of pleasure through his body. There&#39;s nothing he can do to fight them, nothing he can do to stop them. The wolf is forced to endure them and, being assaulted in so many ways at once, the wolf feels himself get forcefully thrown past the point of no return.

?P
With a drawn-out muffled moan, the wolf&#39;s exposed cock starts pulsing inside the slime and then, as the wolf feels the pleasure of climax overwhelm his entire being, it flexes as the first strong jet of wolf cum is expelled from it.

?P
It doesn&#39;t stop there, and neither does the slime. All the stimulation keeps going as the wolf&#39;s orgasm hits, shooting jet after jet of cum into the slime. His seed seems to be &#39;caught&#39; by the blob. The white, pearly substance is gathered just above his cock, melding together as the wolf is forced to shoot more and more. The slime keeps milking him, kneading his cock, his knot, and pressing hard inside his ass until the wolf&#39;s cock is reduced to quick throbs, spurting the last remnants of his orgasm. Only then does the slime start slowing down, although the stimulation doesn&#39;t truly stop. It allows the wolf to catch his breath, though. And as he looks down...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Extraction Finish]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="110" name="d9a Extraction Gentle 1" tags="" position="11300,6725" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  /* cspell:disable-next-line */
  &quot;Hmmmffh...&quot;
  the wolf moans with unresistable lust.
  ?P
&lt;&lt;/arc-only&gt;&gt;

Yeah. The wolf lets out a muffled groan. Just for a moment, Drekkar lets himself relax inside the slime as it continues to treat his cock.

Resting for just a moment feels wise. The wolf is gathering his strength, he tells himself, as he feels pleasure emanating from his loins all over his body because of what the slime does. His face and ears grow red for letting it happen, but what can he do?

The slime as a whole seems to soften all around him as he relaxes. It starts to feel less like being encased in rock and more like lying on something soft. The wolf still can&#39;t move at all, but as he lets his muscles go easy, the pleasure feels even better...

It&#39;s so hard to resist it. As he lets himself feel it, the wolf&#39;s urge is to thrust his hips up. To push his cock further into the slime&#39;s ministrations of it, to shove his knot in, have something squeeze on it!

His hips try to move reflexively to do that, but they can&#39;t. Of course, they can&#39;t. The wolf lets out a frustrated whine knowing that he&#39;s at the mercy of the slime. At the rate it&#39;s going, though...

As if reading his thoughts, the wolf can swear the slime starts speeding up. Its strokes, up and down the wolf&#39;s smooth, red length, become a little tighter. The pleasure is... almost too much.

&lt;&lt;arc-skip&gt;&gt;
  &lt;ul class=&quot;actions&quot;&gt;
    /* cspell:disable-next-line */
    &lt;li&gt;[[&quot;Hmmmmfffgghh...!&quot;|d9a Extraction Gentle 2]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_endingVariant = &quot;gentle&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="111" name="d9a Extraction Gentle 2" tags="" position="11425,6725" size="100,100">&lt;&lt;nobr&gt;&gt;

Despite all the pleasure, the wolf clings to his willpower. He can&#39;t let it overcome him, he has to fight it! With effort, his muscles bulge as he summons his strength. The outrage swells within him. His eyes focus down on his cock, abused by the slime moving around it, pleasuring its surface...

?P
The wolf does his best to try and ignore it. He huffs from the effort while, at the same time, he groans from the pleasure. The slime goes up and down the smooth surface of his cock, assaulting it from all sides. It feels like the softest of hands is stroking him, like a group of smooth tongues is licking it, from top to bottom, over and over again. The wolf can see its surface displacing itself as it moves from the tip of his cock to the base and back, and then, as it goes down his shaft just like all the other times...

?P
The slime keeps going down, displacing itself in a wider motion to engulf his knot. The wolf&#39;s strength falters when he feels it for the first time. The engorged bulb of flesh at the base, the most sensitive part of his cock by far, sends jolts of incredible pleasure through the wolf&#39;s entire body as it is kneaded and massaged by the slime in that same warm, methodic way.

?P
Drekkar would close his eyes if he could. They lose focus as the pleasure overwhelms him. The wolf&#39;s breathing quickens, his chest heaving the slime&#39;s body as it finishes with his knot and goes up his length again, pulling at it, masturbating him masterfully, and then when it reaches his tip, it starts going down again. The wolf&#39;s eyes follow the slime&#39;s movements as it gets closer and closer to his knot, as it does...

?P
/* cspell:disable-next-line */
&quot;Hmmmmghfff...&quot;
the wolf groans.

?P
The pleasure is overwhelming. The slime keeps pleasuring his cock. It&#39;s impossible to fight it. It just feels too good. Little by little, the rippling around his member gets more and more intense. It makes it incredibly hard to focus on anything else.

?P
The slime starts speeding up the treatment of his member, and then...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Extraction Gentle 3]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="112" name="d9a Extraction Gentle 3" tags="" position="11550,6725" size="100,100">&lt;&lt;nobr&gt;&gt;

The slime softens itself even more around the wolf. It starts to feel like floating in water and, though the pleasure is almost overwhelming, even in his relaxed state, Drekkar realizes he can move his head. Thoughts of trying to get away pop up in his head and try to fight the lust he&#39;s feeling, but before he can move at all, the slime itself does.

?P
When the wolf feels everything shifting around his body, his reflex is to move his arms or his legs to keep himself balanced. He quickly finds that that&#39;s not possible, though. Though the blob around him feels softer, it still feels sticky and impossible to push through for his limbs.

?P
The slime itself seems to know what it&#39;s doing, though. It moves the wolf inside it, spreading all of his limbs. With his legs spread, his cock feels even more exposed. The red spire juts out from the wolf&#39;s crotch and, in full view, as it is, the wolf can visibly see how the slime twists and turns around it to pleasure it.

?P
Once it finishes positioning the wolf, he starts feeling more there as well. While before the wolf could feel a single displacement in the slime&#39;s surface going up and down his length, a second one now appears. Then a third, then a fourth. All of them assault his cock, kneading it from different sides to the point where his cock even bobs back and forth inside the liquid as the different surfaces start masturbating it more thoroughly. The feeling of them around his shaft, around his &lt;b&gt;knot&lt;/b&gt;, makes the wolf let out a drawn-out groan as the pleasure enforced on him increases tenfold.

?P
The new position makes the wolf feel more vulnerable as he&#39;s made to spread and keep his body bare while his cock keeps getting pleasured. And then, when the wolf thinks things can&#39;t possibly get more intense...

?P
The slime starts softening around his sheath. Then around his balls. The same tongue-like treatment that his cock is being assaulted with starts happening around his sensitive orbs.

?P
/* cspell:disable-next-line */
&quot;Hmmmffffhh...&quot;
the wolf moans in pleasure. With the slime around him feeling softer, the sound echoes through the empty room. Drekkar can&#39;t help but let himself relax once more, the increased assault on his cock and knot joined in by the one on his balls, the stimulation is too much. The wolf&#39;s ears grow red, the humiliation growing as he feels the slime succeeding in extracting the pleasure out of him. It&#39;s close...

?P
And then, things grow even more intense for the captured adventurer.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Extraction Gentle 4]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="113" name="d9a Extraction Gentle 4" tags="" position="11675,6725" size="100,100">&lt;&lt;nobr&gt;&gt;

As if the stimulation on his cock and balls wasn&#39;t enough, the wolf feels the soft slime all around his body start to move and twitch as well.

?P
The wolf&#39;s eyes grow wide.

?P
/* cspell:disable-next-line */
&quot;Hmmfgh! Hmmmmmmfffff...&quot;
he moans to the slime as if it can hear it.

?P
The caressing the wolf had been getting around his cock starts spreading all over his body. Every erogenous zone the wolf has gets stroked, caressed, massaged all at once. The slime seems to know exactly where to hit, somehow. Around his nipples, it twists and turns, kneading and teasing them in tandem with the strokes of his cock. Behind his ears, the slime does firm yet soft movements, bringing pleasure that almost forces the wolf to relax to it.

?P
Everywhere.

?P
His foot paws get massaged from all sides, rubbed and teased in the most pleasurable of ways. His shoulders, his sides, even the base of his tail gets the blob around him massaging it. It becomes a moving bubble on which the wolf finds himself lost inside, as pleasure unlike anything he&#39;s ever felt overcomes all of his senses.

?P
And all of that pleasure coalesces into the center of everything: his cock. The slime seems to redouble its focus there. It massages his balls, kneads at his knot, strokes his length. Overwhelmed, all Drekkar can do is moan.

?P
It&#39;s too much.

?P
All the pleasure around him comes together. The wolf&#39;s eyes roll back as the stimulation of his cock, knot, balls and body send mind-numbing waves of pleasure through his body. There&#39;s nothing he can do to stop them. Being stimulated at every point of his body, the wolf feels himself melting into the softness that surrounds him as all of that pleasure culminates into a huge, growing apex.

?P
With a drawn-out moan, the wolf&#39;s exposed cock starts pulsing inside the slime and then, as the wolf feels the pleasure of climax overwhelm his entire being, it flexes as the first strong jet of wolf cum is expelled from it.

?P
It doesn&#39;t stop there, and neither does the slime. All the stimulation keeps going as the wolf&#39;s orgasm hits, shooting jet after jet of cum into the slime. His seed seems to be &#39;caught&#39; by the blob. The white, pearly substance is gathered just above his cock, melding together as the wolf is encouraged to shoot more and more. The slime keeps milking him, kneading his cock, his knot, and inflicting pleasure all around his body until the wolf&#39;s cock is reduced to quick throbs, spurting the last remnants of his orgasm. Only then does the slime start slowing down, although the stimulation doesn&#39;t truly stop. It allows the wolf to catch his breath, though. And as he looks down…

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9a Extraction Finish]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="114" name="d9b Compliant End" tags="" position="9475,6200" size="100,100">&lt;&lt;nobr&gt;&gt;

Ivex&#39;s pleasurable stroking does not last long. The panther soon lets go of it, stepping back, but as he does, he motions with his hands again and...

?P
Four small metal rings come to him, all flying between the mage and the wolf. With a smile, the panther motions more delicately, and much to the wolf&#39;s dismay, all four rings fly in order towards his cock and carefully slide around it. One rests right above his knot, the other three a little spaced out around the wolf&#39;s throbbing length.

?P
&quot;Consider this a reward for being good. Your last conscious pleasure before you start your life of servitude.&quot;

?P
Ivex starts walking around the wolf, leaving his field of vision, but before he does, he waves his hand towards the wolf&#39;s cock, and with that, the rings start working.

?P
/* cspell:disable-next-line */
&quot;Hmmghf!&quot;
the wolf groans. All the metal rings start... vibrating? Heating up? Both? Neither? He can&#39;t tell. All the wolf can tell is that it feels heavenly around his sensitive cock. The crystal was never removed, so it keeps weighing down his balls, but regardless of it, the pleasure that surrounds his cock is insurmountable. The flames of his arousal revive in an instant, the wolf&#39;s cock ravaged with pleasure almost beyond his understanding. All the wolf can do is let out muffled moans as the rings force him towards an orgasm.

?P
The wolf&#39;s cock spasms and shoots. In another surprise turn of events, his seed arcs towards the air, but instead of continuing its trajectory towards the floor, the white, pearly substance stops midair and turns into a floating ball. Each shot adds more to it, and the wolf sees it, but he barely cares...

?P
All Drekkar can feel is the pleasure crashing through his body. His arousal, caused and enhanced by magic, finally brings waves upon waves of satisfaction after so much torture and teasing. The wolf shoots and shoots, his orgasm long and lasting, and when it starts to subside... it doesn&#39;t, really.

?P
Ivex was right. Drekkar feels like he can cum ten more times. Twenty, even. His cock remains hard, his knot engorged, his arousal high. There is no refractory period, and the rings don&#39;t let him have it either. They push his pleasure up, teasing the wolf&#39;s cock in impossible ways and driving him towards a second orgasm while the results of his first still float around in the air.

?P
Drekkar moans, feeling like he&#39;s close to shooting again when the rings shut down. The wolf whines in frustration, but Ivex reappears. With another motion of his hand, the rings come off the wolf&#39;s cock and fly to his hand to join the rest of the gear the panther is now holding.

?P
It&#39;s hard for Drekkar to make out what it is, but he can see several bands of leather. A harness, perhaps? A collar...? There seems to be more, but the panting wolf feels too overwhelmed to think.

?P
&quot;Did you enjoy it? You sure look like you did...&quot; Ivex smiles. He walks around the floating ball of seed and chuckles. &quot;I know what to do with this...&quot;

?P
The mage motions towards it, and the ball starts moving. It moves upwards, towards the wolf, towards Drekkar&#39;s muzzle.

?P
&quot;Stand still,&quot; the mage orders, and it doesn&#39;t matter if Drekkar turns his head to the side when the ball of his own cum comes too close. The smell of it is characteristic of his own seed and, as much as he tries to avoid it, it keeps coming closer... then the cum is pressed against his face. Against his muzzle. It feels wet and warm as if he had just ejaculated it, and the wolf grunts as it mats the fur of his face.

?P
&quot;There we go. That&#39;s a good look for you. I think I&#39;ll leave that there and make sure you never clean it up just as a reminder of your sorry, failed adventurer life before you served me,&quot; the mage laughs. &quot;Now...&quot;

?P
Ivex lets go of all he is holding and, as usual, everything floats up instead of falling. The wolf gets a better look at all the gear. A harness indeed, a collar, some kind of pants that are completely open in all the places they should be closed, and a strange pendant.

?P
&quot;I will love having you as my loving thrall... and the best part? Since you will be here anyway, we can come back here, strap you up and have another one of these fun play sessions whenever I feel like it. Isn&#39;t that great?&quot;

?P
Drekkar shakes his head. Ivex, however, just laughs and motions with his hand again. The gear approaches the bound wolf... and there is nothing he can do to stop it.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[The End|d9b Interrogation End]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_endingVariant = &quot;mild&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="115" name="d9b Defiance" tags="" position="8875,6275" size="100,100">&lt;&lt;nobr&gt;&gt;

Drekkar spits at the mage to give his response. The panther is fast enough to take a quick step back so that the spit, at best, splashes at his footpaws.

?P
The mage&#39;s smile fades immediately.

?P
&quot;I see. So this is how it will be. Very well.&quot;

?P
The panther, glaring up at the wolf, approaches again. Drekkar growls down at him, pulling against his bindings and wishing with all of his heart he could bite at the panther. Still, there is nothing the wolf can do as Ivex takes hold of the crystal &#39;hanging&#39; from his balls...

?P
Ivex tugs it down. Gently, but with increasing force, and as he does, the wolf&#39;s heavy balls get pulled further and further away from his body. At first, Drekkar tries to keep growling and resist, but as Ivex keeps pulling, a whine becomes unavoidable. The pressure on his nuts is too much!

?P
It feels like the mage pulls on them for far too long before he finally stops, holding the crystal further down with the wolf&#39;s nuts painfully extended.

?P
&quot;Try that again and I&#39;ll take these as a punishment.&quot;

?P
With wet eyes, the growling wolf looked down at Ivex just in time to see him make the crystal glow for a moment, then, as the mage let the small crystal go...

?P
It rockets back up towards the wolf&#39;s balls. Like some sort of elastic, the crystal flies up and hits the lupine&#39;s balls with such an impact that Drekkar gasps in a silent cry. Pain radiates from his struck nuts, reverberating through his whole body. To make matters worse, after striking his balls, the crystal still feels like it&#39;s attached to them and just as heavy. It falls back down, stopped by the wolf&#39;s hurt testicles and bouncing in a few extra tugs before it settles in place as a painful weight again.

?P
It takes several seconds of gasping and panting until the pain from his struck nuts starts subsiding. Ivex, on the other hand, is back to being all smiles. The mage touches the wolf gently, approaching him again as if he hadn&#39;t just inflicted a world of pain on the bound adventurer.

?P
&quot;There are so many things I can do to you... You don&#39;t even know. Even the simplest spells will be so much fun and effective right now! What to do... what to do... ah!&quot;

?P
Ivex opens a large, eerily malicious grin. His punishment is clearly not over yet.

?P
&quot;Tell me, wolf, your fur is thick. Are you one of those wolves that come from the cold lands? Do you like the snow, the chill in the air? Or do you hate it?&quot;

?P
The panther looks up at Drekkar expectantly. Drekkar can&#39;t help but lower his ears a little in confusion. Where is the mage going with such a stupid question?

?P
As he waits for an answer, Ivex&#39;s hand on the wolf&#39;s cock starts stroking it. It moves up and down the smooth, red length of the wolf&#39;s member, teasing it with gentle, smooth fingers. It makes Drekkar have to grit his teeth harder to suppress a moan. All the arousal that had built up so mercilessly starts bubbling back up with even that light tease, making the waves of sexual pleasure radiate from the wolf&#39;s sensitive member.

?P
It bothers him. Another male is touching his cock just like that and there is nothing he can do about it. In his mind, Drekkar curses his bonds, curses the magic, curses Ivex. Bound with his limbs spread like that and his member forced to be erect... he feels more vulnerable than ever, and he hates it.

?P
The light touch is not enough to satisfy the wolf, not nearly enough, but it does quickly build up his need. More pre-cum comes. Drekkar does his best not to let Ivex have the pleasure of seeing how much it affects him, but he suspects the mage knows. He knows and is stroking his cock slowly on purpose. The fucker...

?P
&quot;So? Do you like the cold or not? Answer me or I&#39;ll make my own assumptions...&quot; he grins once more.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[&#39;&quot;Yes, I come from the far north, so what?&quot;&#39;|d9b Ice 1]]&lt;/li&gt;
    &lt;li&gt;[[&#39;&quot;No, I come from the south, so what?&quot;&#39;|d9b Shock 1]]&lt;/li&gt;
    &lt;li&gt;[[&quot;Stay silent.&quot;|d9b Random Punishment]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_defiance += 1&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="116" name="d9b Defiant End" tags="" position="9575,6325" size="100,100">&lt;&lt;nobr&gt;&gt;

Ivex&#39;s painful squeezing thankfully does not last long. The panther soon lets go of it, stepping back, but as he does, he motions with his hands again and...

?P
Four small metal rings come to him, all flying between the mage and the wolf. With a smile, the panther motions more delicately, and much to the wolf&#39;s dismay, all four rings fly in order towards his cock and carefully slide around it. One rests right above his knot, the other three a little spaced out around the wolf&#39;s throbbing length.

?P
&quot;Consider this your punishment for being naughty. It will serve me well to foster your needs before I turn you into something useful for me.&quot;

?P
Ivex merely grins. The mage does nothing at first, simply waiting, and then he waves his hand towards the wolf&#39;s cock and, with that, the rings start working.

?P
/* cspell:disable-next-line */
&quot;Hmmghf!&quot;
the wolf groans. All the metal rings start... vibrating? Heating up? Both? Neither? He can&#39;t tell. All the wolf can tell is that it feels heavenly around his sensitive cock. The crystal was never removed, so it keeps weighing down his balls, but regardless of it, the pleasure that surrounds his cock is insurmountable. The flames of his arousal revive in an instant, the wolf&#39;s cock ravaged with pleasure almost beyond his understanding. All the wolf can do is let out muffled moans as the rings force him towards an orgasm.

?P
Before he can reach it, however, Ivex hums. His finger gets close to the wolf&#39;s balls and, as the adventurer observes it, the mage seems to merely draw something in the air next to it with his claws. Out of nowhere, a rune appears, and as if it was made of something solid, the mage pushes it... towards the wolf&#39;s balls.

?P
Drekkar can feel a sort of pressure surrounding his hanging nuts. It grips them to the point of discomfort and then, much to his dismay, the rune Ivex had drawn appears on them, as if it had been scribbled over the fur that covers it...

?P
&quot;You know what that is? Of course you don&#39;t. It&#39;s a sign of stillness. I&#39;ve tampered with it. You know what it&#39;ll do?&quot; the mage grins.

?P
The wolf doesn&#39;t know, but he can barely think. The rings mercifully working on his cock take his pleasure to new lengths and, just like that, his balls pull up, his cock flexes. The feeling of orgasm feels inevitable and, as much as it shames Drekkar to cum to the perverted mage&#39;s ministrations like that, his body wants it, needs it, and he can&#39;t fight it.

?P
...Except it does not come. The sensation of inevitable orgasm in the next split second is still there, but his body cannot pass it. The pleasure, so high, does not bring the satisfaction that every male is used to receiving at the end of it. It just... lingers in that state.

?P
Drekkar huffs. He looks down at his cock, pulsing, throbbing, drooling pre-cum, ready to cum, but it &lt;b&gt;doesn&#39;t&lt;/b&gt;! He pulls against the bindings mindlessly to reach down and make it happen, but of course that doesn&#39;t help.

?P
The mage reads his mind, though. Ivex&#39;s hand comes to his cock, caressing it between the rings and adding even more to his stimulation. The wolf lets out an intense muffled moan, the pleasure is almost too much, but it&#39;s no use. His orgasm doesn&#39;t come no matter what.

?P
&quot;Yes, that&#39;s what it does. I will leave you here having fun while I tend to my business. This will make you think twice before you ever think about speaking against me, hmm? That is, if you were to ever get a chance again, which you won&#39;t...&quot;

?P
The mage laughs. He takes his hand away and steps back. &quot;But I&#39;m not done yet.&quot;

?P
Ivex raises both of his hands. Under his control, several things come flying from behind the wolf to envelop him. New layers of leather bindings envelop his arms, his biceps, his chest, legs, thighs... everything. Floating in the air by themselves, they wrap around the wolf&#39;s body and tighten hard, making the wolf grunt as he is made completely and utterly immobile on the cross he&#39;s bound to.

?P
&quot;And the last touch...&quot; Ivex grins.

?P
With but a finger, he motions towards the candle. It sat silently on the desk it had always been, but now it floats towards him, stopping between the mage and the wolf... and with a flicker of his finger, it lights up again.

?P
Almost immediately as it does, Ivex covers his face, and the wolf&#39;s eyes go wide. His next breath comes with the same maddening fire from before and its magic resumes its cursed work, fostering the wolf&#39;s arousal even more while his torment continues.

?P
Drekkar tries fighting it. His large muscles bulge with all of his strength and desperation against the bindings, but reinforced as they were, he is no match for them. Even with all of his strength, the wolf cannot move a single inch, bound standing to the cross with his limbs spread and his tormented cock exposed, throbbing, begging for release...

?P
Ivex is not done yet, however. With a laugh, the mage makes another simple motion with his hand, and the candle floats downwards... until it sits right above the wolf&#39;s cock, floating there.

?P
And then, with a final flick of his fingers... the candle tips to the side.

?P
As soon as it does, a drop of hot wax falls down right at the center of the wolf&#39;s exposed, red cock. It makes Drekkar let out a muffled howl from his shut muzzle. The intense heat over the surface of his sensitive cock brings pain, but the pleasure being inflicted on it never stops. For a moment, the wolf is blissfully pulled away from his near-orgasm state, but that is accomplished by the blinding pain of the wax over the smooth surface of his cock. It lasts only for a few seconds, as the wax is quick to grow cold and harden instead.

?P
&quot;I think that&#39;s a good look for you. It is the look of all who dare go against me.&quot; the mage hums. &quot;Now, be a good wolf and stay put. In a few hours, I&#39;ll be back, then you will have the honor of using your life essence to fuel my great work. Just as many before you do as well.&quot;

?P
The mage turns and starts walking away. Drekkar grunts and yells through his shut muzzle for the mage not to leave him like that, but there is little he can do. Every breath is fire, the wolf can feel the sheer arousal starting to cloud his mind again, and the pleasure never stops, but also never comes. And then, as if on cue... a new drop of wax falls from the candle that remained floating above his cock and tipped to bring the wolf to a new howl of hot pain.

?P
&quot;Don&#39;t worry,&quot; Ivex says, stopping by the door. &quot;I did enjoy our time together. The best part is that, since you will be here anyway, we can bring you back up, strap you up and have another one of these fun play sessions whenever I feel like it. Isn&#39;t that great?&quot;

?P
Drekkar shakes his head. Ivex, however, just laughs and walks away. The large wolf is left alone in the room, bound, with the candle burning and clouded in unending pleasure for who knows how long. Overwhelmed by everything inflicted upon him, Drekkar can&#39;t even wonder what Ivex has in store for him in the future, now that he&#39;s in the mage&#39;s hands.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[The End|d9b Interrogation End]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_endingVariant = &quot;rough&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="117" name="d9b Easy Way" tags="" position="8725,6275" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  The wolf&#39;s only response is to shamefully splay his ears in submission.
  ?P
&lt;&lt;/arc-only&gt;&gt;

&quot;Learning your place I see...&quot; the mage smiles. Even though the wolf says nothing, Ivex seems smart enough to pick up the hesitation in body language.

?P
The panther leans in close, his hand coming to the wolf&#39;s leg to caress it. Drekkar can&#39;t help but draw in a sharp breath as just the caressing near his needy cock is enough to make the wolf&#39;s heartbeat accelerate.

?P
&quot;I reward those that help me, you know? Sure, I haven&#39;t even begun showing you what I can do and... I just can&#39;t resist playing around with a handsome adventurer like you, but if you collaborate with me... I promise your fate will be much, much more pleasant.&quot;

?P
The mage&#39;s hand trails upwards. So close to his member now! Ivex takes half a step back and smiles up at the wolf. There is something in that smile, though. The malicious hint that always accompanies it is still there.

?P
The mage finally takes hold of the wolf&#39;s exposed cock with a paw. The feeling around it alone is enough to make the wolf gasp anew. Though the candle is no longer burning and his mind is mostly his own, his member had never felt so sensitive. Ivex&#39;s fingers around it are enough for it to drool pre-cum all over again. Drekkar can see the veins on his length between Ivex&#39;s fingers, the way his knot throbs in response...

?P
It gets even worse when Ivex starts massaging it ever so lightly with his fingers. The pleasure contrasts with the pain of his balls being so mercilessly pulled by the crystal&#39;s weight.

?P
&quot;I know the Wayward Adventurers Guild sent you. What do they have on me?&quot;

?P
A vague question. The wolf&#39;s knowledge is limited, but any details he tells Ivex could put Guild or whoever else they send after Ivex in the same danger he is facing. Betraying his comrades is something the wolf would never do, and just the fact that Ivex believes he would is an offense in itself.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Stay silent and growl.|d9b Resistance]]&lt;/li&gt;
    &lt;li&gt;[[Spit towards Ivex to show his distaste.|d9b Defiance]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="118" name="d9b Extra Torture" tags="" position="9400,6325" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  &lt;&lt;if $g_arcName === &quot;xd_InterrogationRough&quot;&gt;&gt;
    &lt;&lt;set $d_defiance = 4&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/arc-only&gt;&gt;

It&#39;s hard to tell for how long the mage plays with the wolf. Unable to even say anything, all Drekkar can do is stay there, bound and exposed, as he endures the whims of the sadistic mage. With his magic-engulfed hand, he alternates between torturing and pleasuring the wolf&#39;s exposed cock a few more times before he moves on to different methods.

?P
Ivex seems to take immense pleasure in shifting the weight of the crystal hanging from the wolf&#39;s balls back and forth. Sometimes it grows light to give his nuts some relief, and sometimes the mage makes it so heavy that Drekkar feels like his balls are supporting the weight of a person by themselves.

?P
It does not stop there, however. With swift movements, more things come flying out from the cursed chest situated behind the bound wolf. The worst one perhaps being the riding crop. It is small, thin and looks worn and well-used. It takes no effort at all from Ivex to make the floating instrument approach the wolf&#39;s forcefully erect cock and strike at it. The lashes are strong and precise, even if made by magic, and each time it strikes the wolf&#39;s length, he tenses up and yells from behind his shut muzzle.

?P
The lashes to the wolf&#39;s poor cock never come alone. Ivex laughs at his pain, taking obvious enjoyment in torturing the bound wolf. With his magic, the mage takes delight in now producing both ice and lightning from his hands to freeze and zap, often aimed at the wolf&#39;s sensitive cock, but sometimes the mage takes pleasure in aiming for the balls as well. Having the panther poke at his nuts with electric fingers or grip them with what feels like pure ice while the crystal&#39;s weight is at its highest is one of the toughest things Drekkar ever had to endure.

?P
That torture sometimes comes in the form of pain and sometimes in the form of pleasure. After relentless lashing, Ivex sometimes gives the wolf respite. Stopping his torture, the mage seems to have no reservations in using his hand, and on one occasion even his tongue, to pleasure the wolf&#39;s tortured cock and force his arousal to spike back up. The wolf thrashes in shame against his bindings as the mage forcefully brings him all the way to the edge of orgasm, only to then deny him and take immense pleasure in dialing it back again through new means of torture.

?P
To the wolf, it feels like hours pass by. His cock feels sore, his balls even more so, and yet his arousal, as Ivex says, does not relent. His member is rock hard, his knot is out, and that drive to fuck something, to knot, to &lt;b&gt;cum&lt;/b&gt;, is still as strong as it was at the beginning... The urge to reach down and touch his cock is great, but Ivex does not give him the pleasure.

?P
&quot;Well then... isn&#39;t this fun? Unfortunately, I have things to do, so we must be moving on...&quot;

?P
Ivex approaches the wolf again, leaning against his chest, his hand caressing the wolf&#39;s tortured knot and bringing a whine of need from the bound adventurer.

?P
&lt;&lt;if $d_defiance &gt; 3&gt;&gt;
  &quot;You thought you could fight me. You thought you had a chance of escaping. Of beating me. Hah! How wrong were you, hmm?&quot; the mage laughs. He grips the wolf&#39;s knot and gives it a painful squeeze. Enough to force a muffled whine. &quot;I did not forget your defiance, though. You will now see what your hopeless fighting and bravery brings upon you...&quot;

  &lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9b Defiant End]]
  &lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;else&gt;&gt;
  &quot;You&#39;ve been such a good boy, all things considered...&quot; the panther muses, caressing the wolf&#39;s knot. His hand grips the wolf&#39;s member more firmly, starting to stroke it in a pleasurable way. &quot;I&#39;ll be pleased to have someone like you by my side. I&#39;ve been needing more thralls, and I only accept handsome ones. Oh, the pleasures you will feel... too bad you won&#39;t be quite as aware of them...&quot;

  &lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9b Compliant End]]
  &lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="119" name="d9b Hard Way" tags="" position="8725,6400" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  The wolf&#39;s only response is to growl towards the mage in defiance.
  ?P
&lt;&lt;/arc-only&gt;&gt;

/* cspell:disable-next-line */
&quot;Aahh...
still so full of fire, aren&#39;t you? Even knowing how small you are next to me?&quot; Ivex says with his usual lingering smile of amusement. &quot;I suppose it&#39;s only fair. I haven&#39;t even begun to show you what I can do to you.&quot;

?P
Drekkar&#39;s growling continues. &quot;You wouldn&#39;t stand a fucking chance against a warrior like me if it weren&#39;t for your magic tricks!&quot;

?P
For some reason, that seems to make Ivex&#39;s smile vanish in a heartbeat. The mage frowns looking up at the bound lupine, but just for a moment.

?P
&quot;Very well. I very much prefer it the hard way anyway.&quot;

?P
With but a wave of his hand towards the crystal hanging from the wolf&#39;s balls... its weight feels like it doubled.

/* cspell:disable-next-line */
&quot;HMMFGH!&quot;
Drekkar grits his teeth. His balls feel like they are attached to a solid piece of heavy metal. It pulls on them painfully to the point where the wolf can&#39;t help but tear up.

?P
That brings Ivex&#39;s hateful smile back.

?P
&quot;Perhaps that will serve as a lesson so you can start behaving better. If not, I&#39;ll keep repeating it until you learn. Now... let&#39;s get to the fun part.&quot;

?P
The mage grabs the wolf&#39;s exposed cock with a paw. The feeling around it alone is enough to make the wolf gasp anew. Though the candle is no longer burning and his mind is mostly his own, his member had never felt so sensitive. Ivex&#39;s fingers around it are enough for it to drool pre-cum all over again. Drekkar can see the veins on his length between Ivex&#39;s fingers, the way his knot throbs in response...

?P
It gets even worse when Ivex starts massaging it ever so lightly with his fingers. The pleasure is a terrible contrast to the pain of his balls being so mercifully pulled by the crystal&#39;s weight.

?P
&quot;I know the Wayward Adventurers Guild sent you. What do they have on me?&quot;

?P
A vague question. The wolf&#39;s knowledge is limited, but any details he tells Ivex could put the Guild or whoever else they send after Ivex in the same danger he is facing. Betraying his comrades is something the wolf would never do.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Stay silent and growl.|d9b Resistance]]&lt;/li&gt;
    &lt;li&gt;[[Spit towards Ivex to show his distaste.|d9b Defiance]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_defiance += 1&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="120" name="d9b Ice 1" tags="" position="9025,6500" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  &quot;Yes, I come from the far north, so what?&quot; the wolf asks.
  ?P
&lt;&lt;/arc-only&gt;&gt;

With a chuckle, the panther comes even closer. Drekkar grows stiff and growls seeing the panther leaning against him. With the wolf bound and spread as he is, Ivex has full freedom to press his side against the wolf&#39;s, going as far as leaning his head to rest it against Drekkar&#39;s broad chest. The panther&#39;s hand never leaves the wolf&#39;s cock, continuing to stroke and tease it in its way too slow manner, but the mage&#39;s other hand comes to caress the exposed fur of the wolf&#39;s chest.

?P
&quot;Such a big specimen... the big ones are my favorite. Wolves, even more. I wonder what sounds you&#39;ll make...&quot;

?P
Drekkar&#39;s growl intensifies. &quot;What are you talking about?!&quot;

?P
&quot;As I said,&quot; Ivex chuckles, &quot;the simplest of spells...&quot;

?P
The mage pulls his hand away from the wolf&#39;s chest and raises it so that the bound lupine can see it. Ivex&#39;s hand looks normal at first, but as he clenches it into a fist and opens it again, it glows white for a moment, and then...

?P
A thin layer of ice starts appearing. It is as if it grows from the surface of Ivex&#39;s palm. The coldness brought by Ivex&#39;s magic surrounds his hand and grows into a thicker layer of what looks like pure ice. When Ivex moves his hand, it looks normal inside its frigid exterior.

?P
Playfully, Ivex brings his hand to the wolf&#39;s chest to touch it again.

?P
&quot;Fuck...!&quot; Drekkar can&#39;t help but curse. He grows stiff as, even through his thick fur, he can feel the sheer, unrelenting coldness of the ice enveloping Ivex&#39;s hand. It&#39;s uncomfortable, to say the least.

?P
&quot;See? A very simple spell. And yet it can be so effective when used right...&quot; The mage giggles. He presses his icy finger against the wolf&#39;s chest, then trails towards his nipple. Drekkar grits his teeth, eyes fixated on it and bracing for the inevitable...

?P
/* cspell:disable-next-line */
&quot;HNFGH!&quot;

?P
The ice feels terrible on the wolf&#39;s soft, exposed nipple. Drekkar is forced to suck in a breath and hold it to avoid making any painful sounds. Thankfully, Ivex only plays around it for a few moments before he pulls away. Showing his hand again, Drekkar can see with relief that the ice starts melting away as quickly as it appeared.

?P
He breathes a sigh of relief.

?P
Yet Ivex grins again. &quot;Time to have fun with you.&quot;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9b Ice 2]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="121" name="d9b Ice 2" tags="" position="9150,6500" size="100,100">&lt;&lt;nobr&gt;&gt;

The panther&#39;s eyes move back to the wolf&#39;s cock. That hand never stopped teasing it, much to the wolf&#39;s dismay, and the weight on his balls never went away either. Yet, still, as Ivex chuckles again, his hand speeds up. The stroking gets faster. The panther&#39;s hand skillfully strokes and teases the whole of the wolf&#39;s exposed length, going all the way down to the knot, toying with it to make him gasp, then moving back to the dripping tip. He does it a few times, furthering the wolf&#39;s pleasure, and soon Drekkar is panting. The candle did too much. His balls churn and the weight feels more uncomfortable than ever. Drekkar feels like he could cum ten times in a row and one of them is already coming with just that bit of stimulation... until Ivex grins.

?P
Drekkar&#39;s eyes start going wide.

?P
&quot;No! NO!&quot; Drekkar exclaims, but there is nothing he can do to stop it.

?P
Ivex&#39;s hand continues to stroke his cock, but while the panther&#39;s paw felt soft and delicate before, it now starts to feel... &lt;b&gt;cold&lt;/b&gt;.

?P
It gets colder. Colder and colder. With wide eyes, Drekkar can see- and feel, as the ice starts forming on the palm that is stroking his cock. Ivex doesn&#39;t stop, grinding it against the wolf&#39;s oversensitive length, moving it up and down, back and forth, and spreading the growing ice all over the wolf&#39;s length.

?P
&quot;FUCK!&quot; Drekkar pretty much yells. The hand seems to get colder still. Impossibly cold. It contrasts with the heat of his erection in an extremely uncomfortable manner, yet the arousal is still there. The pain he feels from the ice mixes in with the pleasure of the stroking. The pain wins overall, but his erection is not going away... why is it not going away?!

?P
&quot;Isn&#39;t it nice?&quot; Ivex muses. &quot;With how much of that candle you breathed in, I could cause you pain for hours and you would still be hard as a rock. Ready to fuck. Some tribes deep in the jungles use something similar to ensure good mating, did you know that? But even then, this is a perfected formula. Works much faster and is much, much stronger...&quot;

?P
The panther giggles. His hand, now fully covered in ice, continues to stroke and play with the wolf&#39;s cock. Tears sprout from the wolf&#39;s eyes, his muscles tensing up hard against his bonds as each stroke of the mage&#39;s hand on his length feels like burning. Yet, just as Ivex said, his arousal does not relent. Pre-cum even still drips from it, but the hand is so cold that the touch almost feels numb to Drekkar.

?P
&quot;Such a beautiful cock... and such a beautiful knot, too... I&#39;ve always loved that about canines...&quot;

?P
It occurred to Drekkar that Ivex had been focusing on his length since the ice appeared, but just as he says that the wolf&#39;s eyes go even wider as the mage&#39;s hand trails down the wolf&#39;s length... and reaches for his knot.

?P
Drekkar can&#39;t help it. The wolf lets out what is almost a howl as the ice envelops his knot. Ivex makes a point to grip it in his hand, keeping the sensitive bulb of flesh trapped and encased in the punishing ice. The wolf gasps, trying to form words to ask him to let go, but they don&#39;t even come. Only a whine does, and a shameful one, but there is no time to feel shame. Only the pleasure mixed with pain coming from Ivex&#39;s cruel torture.

?P
&quot;Now, are you willing to tell me &lt;b&gt;everything&lt;/b&gt; I want to know?&quot; the mage asks without letting go of the wolf&#39;s knot. It takes effort to even form words to muster a response, but when Drekkar finally manages to...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[&#39;&quot;I w-&quot;&#39;|d9b Ice 3]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="122" name="d9b Ice 3" tags="" position="9275,6500" size="100,100">&lt;&lt;nobr&gt;&gt;

Before the wolf can finish saying anything at all, a movement from Ivex&#39;s finger has some kind of belt come flying from behind to wrap itself around the wolf&#39;s muzzle with lightning speed. It buckles itself and tightens &lt;b&gt;hard&lt;/b&gt;, making the wolf flinch and causing him to be unable to open his muzzle at all.

?P
/* cspell:disable-next-line */
&quot;Hmmmhgghm!&quot;
the wolf complains. It&#39;s impossible to form proper words with his muzzle shut tight.

?P
&quot;There we go... silence. Let me tell you a little secret...&quot; the panther says at a pace of leisure with his ice-covered hand continuing to painfully massage the wolf&#39;s engorged knot as he speaks.

?P
&quot;I never really cared to get information out of you. I know who sent you, and I know they will keep sending more. I&#39;ll appreciate it if they do. They&#39;ll end up like you, furthering my goals. Helping me keep this place up and running and providing fun at the same time.&quot;

?P
The panther laughs. A genuine laugh. All the while the bound wolf feels small tears of both pain and frustration going down as the mage keeps relentlessly torturing his cock.

?P
It feels like a long time goes by before Ivex&#39;s hand finally retreats. The wolf&#39;s cock feels icy cold, wet with a sheen layer of cold melted water... and yet it still throbs, radiating the heat of his forced arousal. Ivex takes a step back so that he can grab it with his other hand and, to the wolf, the wave of pleasure and relief is unmatched. The warmth of Ivex&#39;s hand on his cold cock as he teases it feels heavenly and brings the conflicting pleasure back up. Unfortunately, it only lasts a few seconds. Before long, the panther lets go and makes sure the wolf is watching as he grins and brings his ice-covered hand close to his cock again.

?P
Drekkar shakes his hand, letting out muffled pleas and complaints against it, but it is to no avail. The wolf howls through his shut muzzle as Ivex envelops his cock in ice once more and starts stroking all over again.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9b Extra Torture]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_endingSpell = &quot;freeze&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="123" name="d9b Interrogation End" tags="roam-stop" position="9650,6150" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;switch $d_endingSpell&gt;&gt;
&lt;&lt;case freeze&gt;&gt;
  &lt;&lt;ending-bad &quot;Interrogation (Freeze)&quot; xd_InterrogationFreeze&gt;&gt;
&lt;&lt;case shock&gt;&gt;
  &lt;&lt;ending-bad &quot;Interrogation (Shock)&quot; xd_InterrogationShock&gt;&gt;
&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`Unknown ending spell ${$d_endingSpell}`)&gt;&gt;
&lt;&lt;/switch&gt;&gt;

&lt;&lt;switch $d_endingVariant&gt;&gt;
&lt;&lt;case mild&gt;&gt;
  &lt;&lt;ending-bad &quot;Interrogation (Mild)&quot; xd_InterrogationMild&gt;&gt;
&lt;&lt;case rough&gt;&gt;
  &lt;&lt;ending-bad &quot;Interrogation (Rough)&quot; xd_InterrogationRough&gt;&gt;
&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`Unknown ending variant ${$d_endingVariant}`);&gt;&gt;
&lt;&lt;/switch&gt;&gt;

?P
Drekkar fell into Ivex&#39;s hands.

?P
To change the adventurer&#39;s fate, you can...

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;&lt;checkpoint-action d_checkpoint1&gt;&gt;
  ?restartAction
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="124" name="d9b Ivex Torture 1" tags="ending" position="8350,6225" size="200,200">&lt;&lt;nobr&gt;&gt;

&lt;&lt;set $d_defiance = 0&gt;&gt;
&lt;&lt;if $d_roughAwakening&gt;&gt;
  &lt;&lt;set $d_defiance += 1&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $d_furtherDefiance&gt;&gt;
  &lt;&lt;set $d_defiance += 1&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;ending-bad &quot;Interrogation&quot;&gt;&gt;
  ?P
&lt;&lt;/arc-skip&gt;&gt;

The mage hums to himself as he takes the time to casually walk around the wolf, observing him from all sides. Drekkar can&#39;t help but keep desperately pulling against the restraints. The wolf&#39;s cock flexes, dripping pre-cum almost constantly now from the overwhelming arousal he&#39;s subjected to.

?P
&quot;Look at you... barely more than a feral beast now, slave to your baser instincts...&quot; the mage mocked. &quot;What would your fellow adventurers say if they could see you now? Bound, drooling, wanting to get out just so that you can pleasure yourself relentlessly...&quot;

?P
The panther stops right in front of the wolf again. He looks at the wolf&#39;s member and, once more, seems to take extreme delight in just touching it, caressing it with a finger or two, all to make Drekkar howl with need.

?P
&quot;Unfortunately, as amusing as it is to have you in this state, we need to dial it down just a little bit. Don&#39;t worry, it won&#39;t be nearly enough for you to stop suffering, but I want you fully conscious so that you can properly... experience everything I have in mind.&quot;

?P
With a snap of his fingers, the cursed candle burning by their side is snuffed out of nowhere.

?P
Its arousing scent lingers for a few more moments, but soon enough the wolf&#39;s breathing starts to feel softer. Clearer. It felt indeed as if he had been breathing fire itself and now, finally, fresh air was coming to his nose again.

?P
Still panting, Drekkar finally stops struggling and lets himself relax against his bonds for a moment. He realizes how sore all of his muscles are from the continuous desperate effort. Everything aches. Even as his mind clears up to some extent, however, the burning fire of arousal within him doesn&#39;t subside. It merely stops growing. His cock still remains fully hard, knot engorged and everything, and just looking at it makes his heart race with an urge to touch it.

?P
At least the wolf has enough awareness back to know he won&#39;t be able to, while bound as he is. And to worry about the panther standing in front of him.

?P
Ivex pulls the cloth covering his nose down as well to reveal his large grin.

?P
&quot;Now that you&#39;re back with me... shall we begin?&quot;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9b Ivex Torture 2]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="125" name="d9b Ivex Torture 2" tags="" position="8575,6325" size="100,100">&lt;&lt;nobr&gt;&gt;

The mage brings both his hands up. A few precise movements are made and Drekkar can see the panther&#39;s eyes glow for a moment. Ivex mutters some words under his breath and then the creaking sound of a chest opening comes from behind the bound wolf. From there, a small crystal comes floating to Ivex with remarkable speed, which he promptly catches with ease and holds up.

?P
&quot;This is a gravity crystal. Handy things, those are. You can bind their energy and attach them to anything. They have many practical uses, but I&#39;m going to show you one of my favorites.&quot; Ivex took a step forward.

?P
&quot;Whatever you&#39;re planning, it&#39;s not gonna fucking work!&quot; Drekkar growls down at the mage. He pulls at the binds just as a display of his strength. His muscles bulge, but of course, the leather doesn&#39;t budge.

?P
Ivex, however, just stops and smiles up at the wolf. &quot;Oh, we&#39;ll see about that.&quot;

?P
The mage touches the crystal with his finger. The touch alone is enough for it to start glowing and emitting a strange hum. Then, Ivex grins up at the wolf and brings the crystal up... towards the wolf&#39;s groin.

?P
Drekkar grows concerned. His erection pulses with just the thought of Ivex touching him again and he can&#39;t tell if he hopes that he does that or not. Ivex&#39;s finger, however, does not come for the wolf&#39;s aching member this time but rather touches the very center of the wolf&#39;s long-hanging, furry balls. A tingle can be felt on them as he does, and that is enough to make the lupine growl anew. Feeling the mage touch his most precious, vulnerable assets is enough to make the urge to punch him almost as big as his urge to jerk off!

?P
At first, nothing happens, but Ivex still holds the crystal close to the wolf&#39;s sack. It glows for a few more moments, then the glow vanishes. Still, nothing happens, and the nervous wolf looks at Ivex, who grins up at him once more and then, finally...

?P
The mage lets go of the crystal.

?P
As soon as he does, the crystal starts falling, but instead of falling all the way to the ground...

?P
/* cspell:disable-next-line */
&quot;Hmmfgh!&quot;
the wolf grunts. Drekkar&#39;s whole body tenses up when, instead of falling as it should, the crystal remains in the air between his legs. Not floating, but rather acting as if it was attached... to his balls. The wolf feels the small crystal pulling his balls away from his body, acting as a weight attached to them. It definitely feels much heavier than it looks as well, at least when it&#39;s the wolf&#39;s nuts that have to bear its weight...

?P
&quot;And you know the best part? I can change their weight at will as well,&quot; Ivex mused. With a hand gesture near the crystal, the wolf let out a new grunt. The crystal grew visibly heavier, pulling the bound wolf&#39;s balls further down in an extremely uncomfortable way.

?P
Ivex chuckles in a way of mocking. &quot;See how utterly helpless you are before me? And this is just the beginning. You will tell me everything I want to know and more.&quot; The panther went back to grinning. &quot;Now, little wolf, are we doing this the easy way or the hard way?&quot;

?P
The weight on the wolf&#39;s balls feels heavy. It tugs at them uncomfortably and, even though it has only been a few seconds, it already starts to feel a little painful to hold the crystal with his nuts alone. Ivex stares at the wolf with a cocky smile of superiority waiting for his answer.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Splay ears in submission.|d9b Easy Way]]&lt;/li&gt;
    &lt;li&gt;[[Growl in defiance.|d9b Hard Way]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="126" name="d9b Random Punishment" tags="" position="9025,6350" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;set $d_defiance += 2&gt;&gt;
&lt;&lt;set _punishment = MT.pick([1, 2])&gt;&gt;

&quot;Going to remain stubborn, hmm? It&#39;s a shame you don&#39;t want to play my little game with me... I&#39;ll remember that.&quot; The panther&#39;s smile does diminish with the lack of response. Nevertheless, his hand does not stop teasing the wolf&#39;s member. If anything, it moves a little faster, making it even harder for Drekkar to suppress the unnaturally immense pleasure that comes even from such soft movements.

?P
&quot;Very well, then. If you won&#39;t play with me, I&#39;ll play alone.&quot; Ivex goes back to smiling.

?P
&lt;&lt;if _punishment == 1&gt;&gt;
  &quot;You look like... a northern wolf. Your fur is thick and you&#39;re oh-so-big... I&#39;m sure you probably grew up playing in the snow. Cold is like second nature to you. It doesn&#39;t penetrate that thick pelt, right? But then again...&quot;
  ?P
  The mage grins.
  ?P
  [[Continue|d9b Ice 1]]

&lt;&lt;else&gt;&gt;
  &quot;You look like... a southern wolf. So big, so muscular, I can imagine you growing up in the woods. Hunting, honing those skills, sweating... Oh, yes. You&#39;re so strong, so resistant to pain, right? But then again...&quot;
  ?P
  The mage grins.
  ?P
  [[Continue|d9b Shock 1]]
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="127" name="d9b Resistance" tags="" position="8875,6400" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  The wolf chooses to remain silent with nothing but a low growl towards the mage.
  ?P
&lt;&lt;/arc-only&gt;&gt;

&quot;Not willing to tell me, hmm? A shame... such a shame...&quot; Ivex speaks with obviously fake disappointment. In fact, he smiles, the panther&#39;s tail swishing back and forth lazily as a sign of worrying satisfaction and amusement.

?P
Drekkar decides to remain quiet. It is hard enough to endure the weight on his balls on one side and the urge to let out sounds of pleasure as Ivex&#39;s fingers still continue to tease his oversensitive cock. If only that cursed arousal would go away! Looking down at his member, hard as a rock and leaking, a small wave of shame comes over the wolf, but this is all the sick mage&#39;s doing, Drekkar tells himself. Only his doing...

?P
&quot;There are so many things I can do to you... Even the simplest spells will be so much fun and effective right now! What to do... what to do... ah!&quot;

?P
Ivex opens a large, malicious grin.

?P
&quot;Tell me, wolf, your fur is thick. Are you one of those wolves that come from the cold lands? Do you like the snow, the chill in the air? Or do you hate it?&quot;

?P
The panther looks up at Drekkar expectantly. Drekkar can&#39;t help but lower his ears a little in confusion. Where is the mage going with such a stupid question?

?P
As he waits for an answer, Ivex&#39;s hand on the wolf&#39;s cock starts stroking it. It moves up and down the smooth, red length of the wolf&#39;s member, teasing it with gentle, smooth fingers. It makes Drekkar have to grit his teeth harder to suppress a moan. All the arousal that had built up so mercilessly starts bubbling back up with even that light tease, making the waves of sexual pleasure radiate from the wolf&#39;s sensitive member.

?P
It bothers him. Another male is touching his cock just like that and there is nothing he can do about it. In his mind, Drekkar curses his bonds, curses the magic, curses Ivex. Bound with his limbs spread like that and his member forced to be erect... he feels more vulnerable than ever, and he hates it.

?P
The light touch is not enough to satisfy the wolf&#39;s urges, not nearly enough, but it does quickly build up his need. More pre-cum comes. Drekkar does his best not to let Ivex have the pleasure of seeing how much it affects him, but he suspects the mage knows. He knows and is stroking his cock slowly on purpose. The fucker...

?P
&quot;So? Do you like the cold or not? Answer me or I&#39;ll make my own assumptions...&quot; he grins once more.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[&#39;&quot;Yes, I come from the far north, so what?&quot;&#39;|d9b Ice 1]]&lt;/li&gt;
    &lt;li&gt;[[&#39;&quot;No, I come from the south, so what?&quot;&#39;|d9b Shock 1]]&lt;/li&gt;
    &lt;li&gt;[[&quot;Stay silent.&quot;|d9b Random Punishment]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="128" name="d9b Shock 1" tags="" position="9025,6200" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  &quot;No, I come from the south, so what?&quot; the wolf asks.
  ?P
&lt;&lt;/arc-only&gt;&gt;

With a chuckle, the panther comes even closer. Drekkar grows stiff and growls seeing the panther leaning against him. With the wolf bound and spread as he is, Ivex has full freedom to press his side against the wolf&#39;s, going as far as leaning his head to rest it against Drekkar&#39;s broad chest. The panther&#39;s hand never leaves the wolf&#39;s cock, continuing to stroke and tease it in its way too slow manner, but the mage&#39;s other hand comes to caress the exposed fur of the wolf&#39;s chest.

?P
&quot;Such a big specimen... the big ones are my favorite. Wolves, even more. I wonder what sounds you&#39;ll make...&quot;

?P
Drekkar&#39;s growl intensifies. &quot;What are you talking about?!&quot;

?P
&quot;As I said,&quot; Ivex chuckles, &quot;the simplest of spells...&quot;

?P
The mage pulls his hand away from the wolf&#39;s chest and raises it so that the bound lupine can see it. Ivex&#39;s hand looks normal at first, but as he clenches it into a fist and opens it again, it glows blue for a moment, and then...

?P
A spark surges around his paw. It&#39;s subtle at first, a flash of blue that lasts only a split second, but soon another one comes, then another. A crackling sound comes and then, when Ivex curls his fingers, several sparks trail around them in a multitude of flashes. The hand itself looks normal and unaffected, but more and more flashes of lightning appear around it.

?P
Playfully, Ivex brings his hand to the wolf&#39;s chest to touch it again.

?P
&quot;Fuck!!&quot; Drekkar can&#39;t help but curse. He grows stiff as, the moment the tip of Ivex&#39;s claw touches his fur, a painful zap of lightning courses through the bound wolf&#39;s body. His fur stands on end around the touched location on his chest and, while the pain comes and goes in but a second and there doesn&#39;t seem to be any lasting damage, it leaves the wolf stiff and wary of the source of pain.

?P
&quot;See? A very simple spell. And yet it can be so effective when used right...&quot; The mage giggles. He brings his hand up, approaching the wolf&#39;s chest with his lightning-covered finger and threatening to touch it again. Drekkar tenses up, bracing for the incoming pain and growling down at the mage. Unexpectedly, however, the mage&#39;s finger quickly trails to the side towards the wolf&#39;s exposed nipple...

?P
/* cspell:disable-next-line */
&quot;HNFGH!!!&quot;

?P
The shock feels much, much worse when applied to the wolf&#39;s sensitive nipple. It comes and goes just as fast as before, as thankfully Ivex pulls his finger back with a laugh as soon as the wolf yelps in pain. Still, a lingering feeling remains all over the wolf&#39;s chest. Much to the wolf&#39;s relief, the mage, while still laughing, shakes his hand a few times, and the lightning surrounding it fades away.

?P
Drekkar breathes a small sigh of relief.

?P
Yet Ivex grins again. &quot;Time to have fun with you.&quot;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9b Shock 2]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="129" name="d9b Shock 2" tags="" position="9150,6200" size="100,100">&lt;&lt;nobr&gt;&gt;

The panther&#39;s eyes move back to the wolf&#39;s cock. That hand never stopped teasing it, much to the wolf&#39;s dismay, and the weight on his balls never went away either. Yet, still, as Ivex chuckles again, his hand speeds up. The stroking gets faster. The panther&#39;s hand skillfully strokes and teases the whole of the wolf&#39;s exposed length, going all the way down to the knot, toying with it to make him gasp, then moving back to the dripping tip. He does it a few times, furthering the wolf&#39;s pleasure, and soon Drekkar is panting. The candle did too much. His balls churn and the weight feels more uncomfortable than ever. Drekkar feels like he could cum ten times in a row and one of them is already coming with just that bit of stimulation... until Ivex grins.

?P
Drekkar&#39;s eyes start going wide.

?P
&quot;No! NO!&quot; Drekkar exclaims, but there is nothing he can do stop it.

?P
Ivex&#39;s hand continues to stroke his cock, but while the panther&#39;s paw felt soft and delicate before, it now starts to feel... &lt;b&gt;tingly&lt;/b&gt;.

?P
The sparks appear again. Slowly at first, some can be seen at the back of Ivex&#39;s hand, but tingling sensations and weak pinches are also felt over the surface of the wolf&#39;s cock that Ivex holds in that same hand. He doesn&#39;t stop caressing it, stroking it, keeping a firm grip as the lightning starts rising around his hand.

?P
&quot;FUCK!&quot; Drekkar pretty much yells. Ivex is merciful enough to open his hand, letting go of the wolf&#39;s cock for a moment, but then he curls his fingers, touching the sensitive, erect canine length with three of them at once.

?P
/* cspell:disable-next-line */
&quot;HNNGHGFH!&quot;
the wolf grunts. The zaps of lightning feel so, so much worse originating from his sensitive length! The surge around the mage&#39;s hand keeps growing like before, but this time, Ivex does not relent. He keeps touching the wolf&#39;s cock, from below, from above, each touch emitting a zapping sound that is very much felt by the bound lupine in a sharp surge of pain. Yet it also mixes in with the pleasure. His cock flexes each time it&#39;s zapped, a hidden wave of pleasure coming from his loins as well accompanying the pain each time it happens. The pain wins, though, and yet... yet his erection is not going away. Why is it not going away?!

?P
&quot;Isn&#39;t it nice?&quot; Ivex muses. &quot;With how much of that candle you breathed in, I could cause you pain for hours and you would still be hard as a rock. Ready to fuck. Some tribes deep in the jungles use something similar to ensure good mating, did you know that? But even then, this is a perfected formula. Works much faster and is much, much stronger...&quot;

?P
The panther giggles. His hand, now covered in sparks of lightning, approach the wolf&#39;s cock again. Ivex chuckles as he touches the very tip, making the wolf let out a new yelp, and this time, he doesn&#39;t pull his claw away. The current of lightning continues over the wolf&#39;s cock as the mage delicately trails his claw down the underside of the wolf&#39;s forcefully erect dick in a way too slow motion all the way to its center. Only then does he pull his finger back, leaving the wolf panting.

?P
&quot;Such a beautiful cock... and such a beautiful knot, too... I&#39;ve always loved that about canines...&quot;

?P
It occurred to Drekkar that Ivex had been focusing on his length since the lightning appeared, but just as he says that the wolf&#39;s eyes go even wider as the mage&#39;s hand trails down the wolf&#39;s length... and reaches for his knot.

?P
Drekkar can&#39;t help it. The wolf lets out what is almost a howl as Ivex pinches his knot with two fingers, one from each side, creating a current of pain and pleasure that travels right through the sensitive bulb of flesh. The wolf gasps, trying to form words to ask him to let go, but they don&#39;t even come. Only a whine does, and a shameful one, but there is no time to feel shame. Only the pleasure mixed with pain coming from Ivex&#39;s cruel torture.

?P
It feels like far, far too long before he lets go, and the tingling sensation remains around the wolf&#39;s knot and entire groin.

?P
&quot;Now, are you willing to tell me &lt;b&gt;everything&lt;/b&gt; I want to know?&quot; the mage asks with three fingers playing around the wolf&#39;s knot, threatening to touch it. It takes effort to even form words to muster a response, but when Drekkar finally manages to...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[&#39;&quot;I w-&quot;&#39;|d9b Shock 3]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="130" name="d9b Shock 3" tags="" position="9275,6200" size="100,100">&lt;&lt;nobr&gt;&gt;

Before the wolf can finish saying anything at all, a movement from Ivex&#39;s finger has some kind of belt come flying from behind to wrap itself around the wolf&#39;s muzzle with lightning speed. It buckles itself and tightens &lt;b&gt;hard&lt;/b&gt;, making the wolf flinch and causing him to be unable to open his muzzle at all.

?P
/* cspell:disable-next-line */
&quot;Hmmmhgghm!&quot;
the wolf complains. It&#39;s impossible to form proper words with his muzzle shut tight.

?P
&quot;There we go... silence. Let me tell you a little secret...&quot; the panther says as he touches the wolf&#39;s knot. This time, the lightning feels a lot weaker, yet the surge coming from Ivex&#39;s touch is still there, ravaging the wolf&#39;s sensitive knot and making his cock hurt and shoot pre-cum at the same time.

?P
&quot;I never really cared to get information out of you. I know who sent you, and I know they will keep sending more. I&#39;ll appreciate it if they do. They&#39;ll end up like you, furthering my goals. Helping me keep this place up and running and providing fun at the same time.&quot;

?P
The panther laughs. A genuine laugh. All the while the bound wolf feels small tears of both pain and frustration going down as the mage closes his lightning-engulfed hand around the wolf&#39;s knot, gripping it in its entirety. The weaker lightning envelops it and, in a way, it feels worse than before, keeping a relentless surge going through his cock.

?P
That hand squeezes his knot, shocking it, then moves up to the wolf&#39;s length, slowly, far too slowly, trailing up from the base all the way to the tip while keeping its current surging through the canine&#39;s erection.

?P
It feels like a long time goes by before Ivex&#39;s hand finally reaches the tip and retreats. The wolf&#39;s cock feels sore with a constant, lingering tingle that makes it feel numb. It twitches in the air, however, and Ivex takes a step back so that he can grab it with his other hand. To the wolf, the regular touch on his length feels even more overwhelming than before. It is as if the lightning has made its surface even more sensitive, if that is even possible, so as the mage gives the wolf&#39;s cock a few strokes, the pleasure that was hidden under the pain comes surging through. Drekkar, still panting hard, makes an effort not to moan.

?P
Ivex spends a little time pleasuring the wolf, but unfortunately, it is all too brief. Before long, the panther lets go and makes sure the wolf is watching as he grins and brings his lightning-covered hand close to his cock again.

?P
Drekkar shakes his hand, letting out muffled pleas and complaints against it, but it is to no avail. The wolf howls through his shut muzzle as Ivex envelops his cock in lightning once more and starts stroking it with that hand instead...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9b Extra Torture]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_endingSpell = &quot;shock&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="131" name="d9x Ivex Enthrallment 1" tags="ending" position="13725,6150" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;ending-good &quot;A New Servant&quot;&gt;&gt;
  ?P
&lt;&lt;/arc-skip&gt;&gt;

Deciding on his vengeance, the wolf smirks. While the panther is still unconscious on the floor, the wolf turns towards the tower inside the gemstone, picks the red teleportation stone up and clutches it again.

?P
Drekkar finds the transportation easier this time. Perhaps because he was ready for it? Regardless, the wolf turns up at the exact same spot he left. From there, it is a simple matter to return to the lion&#39;s room where the large feline still squirms on the ground.

?P
&quot;The master&#39;s pendant must be worn by his thralls at all times,&quot; the lion says to him when he enters, as always.

?P
The wolf just rolls his eyes. &quot;Yeah, the master&#39;s pendant will be put to good use,&quot; Drekkar replies as he picks up the blue glowing pendant the lion had made for him. The feline does little more than follow him with his eyes and repeat his line when the wolf turns away to leave.

?P
&quot;I&#39;ll come back and deal with you once I&#39;ve dealt with the mage,&quot; the wolf promises as he clutches his gemstone again and teleports outside once more.

?P
Once out, Drekkar can see that Ivex woke up in the meantime. The moment Drekkar appears, the panther looks at him with that same look of surprise and fear. He had already clearly been wiggling to try and get out of the ropework the wolf had left him in, but he redoubles his efforts to do so as Drekkar approaches.

?P
&quot;Get away from me!&quot; Ivex hisses. Surprisingly, some of the arrogance still lingers in his tone. It only makes what the wolf is planning to do feel even better.

?P
Without even saying anything, Drekkar gets close to the panther, crouches down... and brings up the blue pendant.

?P
Recognition flares up in Ivex&#39;s eyes right away.

?P
&quot;What?! How did you get that?! No! NO!&quot; He shakes his head and tries to wiggle and crawl away from the wolf as soon as he sees it.

?P
&quot;Yes,&quot; the wolf says, easily grabbing the panther, pulling his bound self close and bringing the pendant up to him...

?P
&quot;NO! Get that thing away from me! You don&#39;t know what you&#39;re doing!&quot; Ivex almost pleads.

?P
The wolf doesn&#39;t stop.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9x Ivex Enthrallment 2]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_endingVariant = &quot;enthrall&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="132" name="d9x Ivex Enthrallment 2" tags="" position="13850,6150" size="100,100">&lt;&lt;nobr&gt;&gt;

&quot;YOU FOOL!&quot; Ivex yells as the pendant is brought up to his head. &quot;When I get out of this, I will make you regret all of this a thousand times ov-&quot;

?P
Drekkar lowers the pendant, placing it around his neck. The gemstone emits a glow for a moment and, as soon as it does, Ivex&#39;s eyes grow wide for just a moment and his words get interrupted. Then, soon after, his expression of outrage and anger fades into a neutral one. The same one the lion holds all the time.

?P
All signs of struggling fade and the panther relaxes in his bonds. Then, Ivex&#39;s eyes lazily shift towards the wolf, but he says nothing.

?P
&quot;Ivex?&quot; Drekkar asks, and only when he does, the cat speaks.

?P
&quot;Are you master?&quot; he asks.

?P
Taken aback by the question, the wolf thinks for a moment, but nods.

?P
&quot;Yes?&quot;

?P
&quot;You are master,&quot; Ivex simply states in a monotone voice that carries little emotion behind it. Then, the feline stands still. &quot;The master desires herbs ground for the attunement potions,&quot; he says.

?P
&quot;Herbs?&quot; the wolf asks. He thinks back to the lion. That explains his behavior... &quot;No, no potions are necessary,&quot; the wolf then states.

?P
&quot;No potions are necessary,&quot; the feline repeats, and then he remains still.

?P
The wolf stands up and looks down at him curiously. Does this thing really work? Just as he did with the lion, he attempts to remove the pendant from Ivex&#39;s neck, but it does not go past his neckline, as if some kind of invisible barrier prevents it from doing so, making it unremovable by conventional means. Surely more of Ivex&#39;s magic to keep his thralls secure. How ironic that it now works against him.

?P
Watching the bound feline standing still and without expression, the wolf smirks. A series of ideas go through his head and, underneath him... his cock throbs. The arousal Ivex has inflicted on him has been bothering him ever since he escaped that damned cross.

?P
Maybe it&#39;s time to do something about that, too.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9x Ivex Enthrallment 3]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="133" name="d9x Ivex Enthrallment 3" tags="" position="13975,6150" size="100,100">&lt;&lt;nobr&gt;&gt;

Deciding to test things out before pushing anything further, the wolf grabs Ivex by his scruff and pulls him up to his knees. The panther stands firm on them, but says nothing and does not change his expression. He does seem to be completely at the wolf&#39;s mercy.

?P
Placing the bound captive properly in front of him, the wolf keeps one hand on his head holding his fur, but with the other... he points his hard, red member down towards Ivex.

?P
&quot;Let&#39;s test this out by asking you to do something you would never do,&quot; the wolf continues with a smirk. Then, he takes half a step forward so that the tip of his member is almost touching Ivex&#39;s nose.

?P
&quot;Lick my cock.&quot;

?P
The panther does not look at him or show any kind of emotion, again just like the lion, but he also does not hesitate for a second before leaning forward, taking his tongue out and lapping at the wolf&#39;s cock. The wolf winces. The panther&#39;s tongue is kind of rough, but the texture still feels great against his member. All of the burning arousal lingering inside the wolf gets lit up as his cock is stimulated.

?P
The red, tapered member throbs in response to Ivex&#39;s continuous licking. The panther does a thorough job, covering the wolf&#39;s member in saliva. At first, Drekkar is wary, keeping a tight grip on Ivex&#39;s fur, ready to pull him off of him at the first sign of aggression, but after a few minutes of constant licking, it is clear that the spell works. The wolf&#39;s grip loosens and, as it does, the panther leans forward to increase his reach. His tongue caresses the whole of the wolf&#39;s member, coating it all the way to the knot. Feeling that rough tongue right against his sensitive knot has Drekkar gritting his teeth as a bead of pre-cum appears at the tip of his member. His arousal flares higher and higher and, seeing Ivex in that position...

?P
There is little to do but take advantage of it.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9x Ivex Enthrallment 4]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="134" name="d9x Ivex Enthrallment 4" tags="" position="14100,6150" size="100,100">&lt;&lt;nobr&gt;&gt;

&quot;Stop,&quot; the wolf orders, and the panther ceases his licking right away.

?P
With a pleased smile, the wolf grips his cock at the base again and, taking another step forward, presses his member coated with saliva against Ivex&#39;s muzzle. The feline does not react as the wolf grinds and wipes his member against his face, smearing it with both drool and pre-cum.

?P
The spell absolutely works.

?P
&quot;I&#39;m going to untie you,&quot; the wolf announces, &quot;when I do, you will stand up and stand still.&quot;

?P
The panther does not respond. Drekkar waits for a moment, still wary, but then he walks around the feline and starts undoing the ropes around his wrists and ankles. As soon as he does, the panther does indeed stand up and stands still.

?P
Pleased with himself, the wolf looks at him from top to bottom. Ivex is definitely not the impressive figure he made himself to be inside the tower, but he is still a fairly good-looking feline. The wolf&#39;s paw goes down to his cock, idly stroking it. Damn, it feels good to indulge in the lust Ivex induced onto him. With a low growl, the lupine issues a single order.

?P
&quot;Take your clothes off.&quot;

?P
Without an ounce of hesitation, the panther starts pulling his shirt off. Once they&#39;re gone, his shirt and loose pants beneath it come out next and, within moments, all of his clothes are discarded on the floor, and the black panther stands there fully bare. His sheath still has hints of that yellow, transparent barrier covering it.

?P
Drekkar smirks. The wolf&#39;s hand on his own cock starts stroking it properly. The wolf can&#39;t help but let out a continuous lusty growl. The sight of the naked feline, even being a male and someone he hates, fuels the fire of arousal inside him.

?P
&quot;Is there a bed in this farmhouse?&quot; the wolf asks the naked mage.

?P
&quot;Yes,&quot; Ivex simply responds.

?P
The wolf&#39;s smile widens. He does not stop stroking his cock as he walks toward the door. &quot;Then follow me.&quot;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9x Ivex Enthrallment 5]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="135" name="d9x Ivex Enthrallment 5" tags="" position="14225,6150" size="100,100">&lt;&lt;nobr&gt;&gt;

It doesn&#39;t take long for Drekkar to find the bedroom. It looks neat, but a layer of dust on most furniture indicates it likely hasn&#39;t been used in a while. Ivex probably sleeps inside his magical tower of nonsense. The wolf points at it, though.

?P
&quot;Get on the bed, panther. On all fours.&quot;

?P
As always, Ivex is quick to obey. With the same blank expression, the panther climbs on the bed and gets up on all fours. Drekkar licks his lips at the sight.

?P
&quot;Lift your tail.&quot;

?P
The feline does. His long tail arcs up, revealing what&#39;s underneath. The sight of the pink entrance under the mage&#39;s tail is enough to make the wolf&#39;s length throb. He usually prefers females, but in this case...

?P
Drekkar takes his time. His hand strokes his cock from top to bottom, giving his knot a small squeeze before he climbs onto the bed. It creaks under the muscular wolf&#39;s weight, but he ignores it as he approaches the smaller feline. The larger wolf gets on all fours behind and above him, his chest coming over Ivex&#39;s back, and with an arm, he pulls the obedient feline towards his own chest. At the same time, the wolf takes immense pleasure in letting his hard cock grind against the feline&#39;s rear.

?P
&quot;Are you still in there, I wonder?&quot; the wolf growls in low voice against Ivex&#39;s ears. &quot;I hope you are. If you are, it must be killing you to be made to do this...&quot;

?P
The thought brings pleasure to the wolf. &quot;It&#39;s nothing you haven&#39;t done to others before, I bet. How does it feel? To know that, soon enough, I&#39;ll be fucking you all the way to the knot?&quot;

?P
Ivex&#39;s expression, unfortunately, does not change. If he can hear him, the panther gives no sign of it, but the wolf chooses to believe he can. Letting the mage go, Drekkar grabs the panther&#39;s hips and positions himself behind him. Getting on his knees, the larger wolf grinds his cock against the feline&#39;s rear. His lust gets the best of him. That candle burning had made the wolf think about sinking his cock into something warm a thousand times, and the fact that it is Ivex himself makes it all the more delicious.

?P
Spitting on his paw, the wolf then smears it around his cock, lubricating it a little bit to make it easier, but as he lines himself up with the feline, a new thought occurs to him.

?P
Why should he do all the work?

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9x Ivex Enthrallment 6]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="136" name="d9x Ivex Enthrallment 6" tags="" position="14350,6150" size="100,100">&lt;&lt;nobr&gt;&gt;

Pushing the feline to the side, Drekkar himself lies on the bed on his back. The panther looks at him with no emotion, remaining on all fours at the corner of the bed as the wolf spreads his legs and brings his hand down to give his knot a small squeeze. Then, he looks at the panther and smiles.

?P
&quot;Climb up and line your rear with my cock,&quot; he orders.

?P
The enthralled Ivex obeys right away. The slender panther straddles the large wolf&#39;s abdomen at first, then he moves to stand up on the bed enough so that his rear can be right above the tapered tip of the wolf&#39;s sizeable cock. As soon as Ivex feels the tip right against his entrance, he stops, his expression still neutral, waiting.

?P
The wolf takes in that sight with a wide smile for a while. His cock throbs in anticipation before he gives the order.

?P
&quot;Impale yourself on my cock, mage.&quot;

?P
Even in this case, the panther shows no hesitation. The moment the order is given, Ivex starts lowering himself. To the wolf, it feels heavenly. The panther&#39;s tight ring offers some resistance at first, but through Ivex&#39;s own effort, the resistance is breached, and soon the tightness of the panther&#39;s ass surrounds his cock as the panther keeps going down little by little.

?P
Though Ivex&#39;s expression barely changes, he does grunt. It seems to be an intense experience for him and, judging from how &lt;b&gt;tight&lt;/b&gt; Ivex feels, the wolf guesses that he is not quite used to taking it up the ass.

?P
It makes it all the better.

?P
&quot;Fuck...&quot; Drekkar grunts. &quot;Don&#39;t fucking stop. Don&#39;t stop until you reach the knot,&quot; he orders, and Ivex obeys.

?P
Inch by inch, the feline takes his cock, and the wolf gets a front-row seat watching his ass spread for him. It takes a while and some effort, but eventually, the feline&#39;s rear finally bumps against the wolf&#39;s larger, engorged knot. Drekkar growls. An eagerness to shove his knot into the feline, his most primal instinct, comes over him, but the wolf is patient. The time for that will come. For now, while Ivex sits there impaled on his cock...

?P
&quot;Now... ride it. Fuck yourself with my cock.&quot;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9x Ivex Enthrallment 7]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="137" name="d9x Ivex Enthrallment 7" tags="" position="14475,6150" size="100,100">&lt;&lt;nobr&gt;&gt;

The sensations of the panther going back up on his cock are amazing for the lust-filled wolf. Drekkar lets himself moan in pleasure as the panther moves up... and then comes down again, impaling himself on his cock all over again. Ivex&#39;s expression does not change, but the little grunts of effort coming from him are like music to the wolf&#39;s ear. The blue gemstone on the feline&#39;s pendant continues glowing as the enthralled mage is forced to obey his every command.

?P
&quot;Faster... fuck...&quot; Drekkar growls, and the panther obeys.

?P
The wolf&#39;s larger paws come to grip the feline&#39;s hips. He does not need to make any effort, but it still feels good to grip them as he feels the panther&#39;s ass enveloping his cock. The stimulation is downright amazing. The wolf&#39;s hips jut up every now and then in pure instinct, thrusting into Ivex every time he comes down in order to make the act even more intense for both of them.

?P
Looking down at the panther riding him, another thought comes to the wolf&#39;s lust-filled mind. He can see Ivex&#39;s sheath engorged. His cock reacts to what&#39;s happening to him, but because of the chastity spell, it remains trapped inside the black feline&#39;s sheath. The tip of his member presses against the invisible wall, aching to get out, and Drekkar notices droplets of pre-cum running down the panther&#39;s sheath. Still, the spell does not let him grow hard, and seeing that...

?P
&quot;Jerk yourself off while you ride me,&quot; he orders. As soon as he does, the panther&#39;s hand goes down to his sheath. It starts teasing it, stroking it, and massaging it as best as his spell allows. The panther&#39;s moans and mewls grow a little, betraying the pleasure his body must be feeling from both his hand and the wolf&#39;s large cock filling him, but his cock has no space to grow. The sight amuses the wolf. It feels fitting that, after using others for his pleasure for so long, Ivex does not get to enjoy himself even when being used himself.

?P
He leaves the panther jerking himself off, or trying to, and focuses on his own pleasure again. The wolf&#39;s growling increases in tone as he feels his pleasure rising. With his arousal as high as he was, he knows he won&#39;t last too long, but he has no desire to anyway. Thrusting in tandem with Ivex as he rides him, the wolf orders him to go faster quite a few times and, even when the panther is bouncing on his cock as fast as he can, he keeps growling for him to go faster still.

?P
Drekkar&#39;s pleasure gets close to his peak, he can feel it, but there is one thing missing.

?P
/* cspell:disable-next-line */
&quot;Fuck... hnnghf...
now, impale yourself on my fucking knot. Take my knot, you fucking bastard of a mage,&quot; the wolf curses. It is incredibly blissful to feel Ivex being forced to obey. The next time the feline goes down on his cock, he keeps pressing down, impaling himself further and trying to push past his own resistance to take the wolf&#39;s knot.

?P
The wolf pushes against it as well. His eagerness and drive to knot are too strong. With both of their efforts, it does not take too long before Drekkar can feel the panther&#39;s ass spreading wider than before. Even in his enthralled state, Ivex lets out a grunt and a mewl as the wolf&#39;s much larger knot pops into him, but once it is in?

?P
&quot;FUCK! Take it!&quot; Drekkar pretty much howls. Holding Ivex&#39;s hips in place, it is he that does the work. The large wolf&#39;s hips jut up, fucking the feline deep with his knot stuck in there as he feels his pleasure reach his peak, and in one blissful moment...

?P
With a strong throb, the first jet of wolf seed is deposited deep within the mage. Ivex&#39;s expression remains the same even as his ass is filled with wolf spunk. Drekkar keeps thrusting, reveling in his pleasure and enjoying every second of it. Much to his delight, Ivex continues to obey his orders as well, &#39;riding&#39; him to the best of his ability even as his ass is filled. Stuck to the wolf&#39;s knot, the panther can&#39;t get up from it even if he tries, and as soon as the wolf&#39;s orgasm starts to dwindle, he has to growl to the panther and order him to stand still as he lets himself fall back panting to enjoy his afterglow.

?P
Only the sound of Ivex&#39;s small grunts can be heard as the panther keeps jerking himself off, stimulating his sheath and looking for a pleasure he will not achieve with the chastity spell upon him.

?P
The wolf is happy and content in laying down like that for a while, with the mage that fucked him over stuck to his cock and forced to pleasure himself in the most frustrating of ways.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9x Ivex Enthrallment 8]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="138" name="d9x Ivex Enthrallment 8" tags="" position="14600,6150" size="100,100">&lt;&lt;nobr&gt;&gt;

Drekkar takes his sweet time. He is definitely not in a hurry anymore. The wolf enjoys the feeling of the panther&#39;s ass around his cock, the way it grips his grown knot, and the way it clenches while Ivex continues to try and try to jerk off to no avail.

?P
While waiting for his knot to recede, he looks at the feline. Ivex stares at nothing in particular while his hand continues to tease and work his sheath. His cock, stuck inside it, looks absolutely desperate to grow, but the magic barrier keeping his sheath sealed is strong. The barrier, however, does not seem to apply to liquids, as a steady flow of pre-cum keeps coming from Ivex&#39;s sheath to run down towards Ivex&#39;s balls and, much to his annoyance, mat the fur of his crotch as well.

?P
&quot;You are a feline. Felines are flexible, aren&#39;t they?&quot; Drekkar idly asks.

?P
&quot;Yes,&quot; Ivex answers.

?P
The wolf smirks. &quot;Then clean this mess you made with your tongue.&quot;

?P
It is incredibly amusing to see Ivex bend forward. In an impressive display of flexibility, the panther indeed does reach beneath his own balls with his muzzle and, as always without hesitating, starts licking up his own pre-cum from the wolf&#39;s fur.

?P
Drekkar growls. His cock throbs with lust at the sight of the mage being made to do that. Ivex&#39;s lust spell is keeping his knot well engorged, and a desire to fuck him for a second time comes over the wolf, but he decides against it. At least not for now. Drekkar is content to just lay back and watch Ivex&#39;s licking move up to his own balls. The panther licks up every drop of pre-cum from them,  and then he reaches his own sheath.

?P
From there on, things get more amusing. Ivex lets out a small groan as his tongue laps over his own sheath. His member tries and tries to grow, but stopped by his own spell, the feline&#39;s tongue can only clean the pre-cum from his sheath while stimulating himself and, as he does, more pre-cum keeps coming from his cock for him to lap up. The wolf lets out a small laugh at the sight. He leaves the panther on that little loop for a good while.

?P
Eventually, Drekkar realizes that his knot will, in fact, not recede. The panther will stay there licking his own trapped sheath for hours if he lets him. With a sigh, the wolf grabs the panther&#39;s hips again and gets ready.

?P
&quot;This will be quite uncomfortable for you,&quot; Drekkar says without an ounce of actual sorrow over it. &quot;Pull yourself off my knot.&quot;

?P
The enthralled panther finally stops licking himself to sit up straight. Then, putting both his paws on the wolf&#39;s abdomen, starts trying to rise up. The wolf grunts, feeling the tug on his knot, but slowly, carefully, and with a lot of uncomfortable grunting on Ivex&#39;s part, eventually, the wolf&#39;s knot finally pops out of his rear. The moment it does, some of his seed runs down from the panther&#39;s rear, but the wolf is quick to order Ivex to stand up properly and get off of him.

?P
Standing up himself, Drekkar looks down at the mage. With the wolf&#39;s seed running down the back of his thighs, he smirks.

?P
It&#39;s time to take Ivex back to the Wayward Adventurers Guild. Watching the blank-faced mage and knowing he&#39;s trapped like that, however, the wolf gets to thinking...

?P
What would it be like to have a thrall himself? Would a large bag of gold really be enough to make up for something like that? What if...?

?P
No, that wouldn&#39;t be right. ...Would it? Ivex has made thralls of others and he had no intention of letting them go. It is poetic justice that he ends up meeting the same fate. Besides, slaves are common in most cities. Wouldn&#39;t that be a fitting punishment for the mage after all he&#39;s done?

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Keep Ivex as a personal thrall.|d9x Ivex Enthrallment 9]]&lt;/li&gt;
    &lt;li&gt;[[Take him back as he is and collect the bounty.|d9y Bounty Collection]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="139" name="d9x Ivex Enthrallment 9" tags="" position="14725,6300" size="100,100">&lt;&lt;nobr&gt;&gt;

A smile grows across the wolf&#39;s muzzle. Yeah, there is no reason to waste such a good thrall by delivering him in for gold. Thinking back on all Ivex did to him in the tower and, even more so, what Ivex planned to do to him still, fills the wolf with certainty that this is the right way to go about it.

?P
&quot;This is a pretty look for you,&quot; Drekkar comments. &quot;You don&#39;t mind staying naked, do you? I think I might just keep you naked all the time. It&#39;s not like you will mind all the stares, right?&quot;

?P
&quot;No, master,&quot; Ivex answers blankly, and the wolf laughs again.

?P
&quot;Even if your ass is leaking my seed after I fuck you?&quot;

?P
&quot;No, master.&quot;

?P
&quot;That&#39;s what I thought.&quot;

?P
With a wide smile, the wolf makes Ivex himself gather everything. The mage finds him a ragged pair of pants in the farmhouse that is enough to hold out until he can find something better. It takes some effort for the wolf to tuck his still hard cock inside, but that is another thing the panther can take care of again soon enough.

?P
Drekkar packs everything. The sack of gemstones with Ivex&#39;s spells and the large gemstone containing his tower. All of that along with, of course, the panther himself.

?P
Ivex, with the pendant around his neck, is made to walk behind the wolf the whole way. Never before had delivering a bounty been so easy. True to his word, the wolf leaves the panther completely naked. There is no point in wasting gold buying clothes for someone that does not deserve them.

?P
The journey back to the Wayward Adventurers Guild is a few days long and the wolf is not in a hurry to return. In fact, Drekkar makes a point to include as many towns as he can on the way back and, each time, he takes immense pleasure in watching the stares of folk as they see the naked panther parading around the city. In one of them, the wolf went as far as ordering the panther to clutch a gemstone containing a lust spell so he was mewling and dripping the whole time as well.

?P
When they arrive back in the Guild, the wolf delivers Ivex&#39;s tower and his gemstones to the official mages, but claims that he could not capture Ivex himself. It fills him with pleasure to know that he, in fact, left the panther jerking himself off in the alley behind the building.

?P
The mages handle his tower. The wolf does not stick around to see it, but the rumors of the insane tower a mage possessed spread like wildfire. Apparently, the mages of the Wayward Adventurers Guild had to go through an arduous, delicate process to save the over fifty people Ivex had trapped inside his tower. All of them males. It makes Drekkar feel all the better for having such a previously dangerous and deranged mage at his disposal, ready to lick his feet if he feels like it. Literally.

?P
With a new &#39;companion&#39; by his side, the wolf moves on. The life of an adventurer is like that. Ivex wasn&#39;t the first mage he had to fight and it won&#39;t be the last. The events of the tower stick inside Drekkar&#39;s mind, though, and they are enough to make him blush every now and then, but whenever that happens, his new panther servant is there to alleviate his rage. He will make sure that such things never happen again.

?P
Or, at least, he will try to.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[The End|d9y The End]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="140" name="d9x Ivex Extraction 1" tags="ending" position="13825,5800" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;ending-good &quot;Energy Supply&quot;&gt;&gt;
  ?P
&lt;&lt;/arc-skip&gt;&gt;

Deciding on his vengeance, the wolf smirks. He picks Ivex up. Taking him inside the tower is risky, as he seemed to be more powerful there, therefore it has to be done before he wakes up. It&#39;ll be worth it, hopefully.

?P
With ease, the large wolf lifts the unconscious panther up to carry him over his shoulder. He then takes the red gemstone he made to get out of the tower, looks at it, and grips it again, hoping it&#39;ll work...

?P
It does.

?P
The travel back in doesn&#39;t feel as bad as the travel out. Maybe because the wolf expects it? In the blink of an eye, Drekkar finds himself back inside the tower. On the exact same spot he left, in fact. The wolf has no idea how that works, but he doesn&#39;t care. With the unconscious panther in hand, Drekkar can&#39;t help but notice that, this time, Ivex does not change. He doesn&#39;t become bigger, more muscular, and his regular brown robes still look the same. Maybe the arrogant mage does something himself to make him look better. Tsc. Ignoring that, he makes his way to the altar at the center of the large hall.

?P
The thing is still there. As Drekkar approaches, the blob of... whatever that is, sits on the altar looking as harmless as before. The red gemstone the fox couldn&#39;t use to escape is still there as well, which is a risk, but from what Ivex wrote, it will do him no good. The panther seemed really wary of touching this thing, so...

?P
With a heave, the wolf throws the tied-up panther right over the blob.

?P
It softens his impact. The wolf takes a step back, not sure what to expect. Much to his surprise, the thing, even though it looks like water, appears to be... viscous. The panther sinks halfway into it, but the moment it does, the blob starts moving around him. It engulfs and pulls the mage further into it. At first, Drekkar frowns, thinking it&#39;s going to drown the panther, but soon the unconscious feline&#39;s muzzle opens and the wolf can clearly see that the blob creates an airway for him. This thing is clearly created with devious purposes in mind...

?P
It is at that moment that Ivex&#39;s droopy eyes start to open. The blob continues to engulf him, moving the feline to its center. Ivex looks confused for a moment, but then... his eyes grow wide. They meet the wolf&#39;s, then dart all around him, and his expression shifts to one of rage... and panic.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9x Ivex Extraction 2]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_endingVariant = &quot;extract&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="141" name="d9x Ivex Extraction 2" tags="" position="13950,5800" size="100,100">&lt;&lt;nobr&gt;&gt;

The panther&#39;s muzzle moves, but if he makes any sound, it doesn&#39;t make it past the thick, viscous substance of the blob. Ivex&#39;s bound arms and legs move for a moment, but as soon as they start, they immediately slow down, and the wolf can see that the thing is hardening around them to keep the panther still. Frozen in place, Ivex&#39;s eyes dart back and forth until they meet the wolf&#39;s. Drekkar can see him frown, his expression shifting to one of anger, but his face too freezes inside the thing. Whatever this blob is, it doesn&#39;t seem keen on letting the feline move. Good. It works even better than the wolf expected.

?P
Drekkar wipes his paws and smiles triumphantly. Seeing Ivex trapped inside his own device is extremely pleasant. For a few moments, he watches the feline as he clearly struggles to move. His small muscles contract here or there, showing he&#39;s trying to put effort into moving his limbs, but none of it amounts to anything. What a weakling! After a while, it is clear that the feline is trapped and cannot get out. The wolf is ready to leave him there, for in fact, he doesn&#39;t even know how he would go about getting Ivex out of it. The mages in the Wayward Adventurers Guild will surely figure something out when he delivers the panther and his tower to them in a few days. Taking a step back, the wolf is about to leave, but then something else catches his eye.

?P
Ivex seems to start growing more frantic in his entrapment. As the wolf&#39;s eyes go over the feline, he can see why. Little by little, the blob seems to &lt;b&gt;dissolve&lt;/b&gt; Ivex&#39;s clothing. It moves around the panther as a whole, its surface full of ripples as it does its work while keeping the mage still at the same time. Ivex&#39;s robes start tearing, then little by little, holes start appearing in the fabric and these grow wider and wider, expanding until, soon enough, there is nothing left. The wolf smirks. The panther is left not only trapped but also &lt;b&gt;naked&lt;/b&gt;. The rope that bound him dissolve as well, which worries the wolf for a moment, but the panther can&#39;t even manage to move them out of the position they were while bound inside the slime.

?P
But that&#39;s not all of it. The wolf notices how the blob&#39;s movement starts focusing around Ivex&#39;s genitals. The panther grows more and more frantic, seemingly trying to make sounds, as the thing starts gripping his balls. The black-furred orbs are the only thing that moves as if they are being kneaded by the thing, and soon it expands up to Ivex&#39;s sheath as well.

?P
The thing moves around it as if massaging his sheath, except...

?P
The yellow glow surrounding it stops it. The blob seems keen on continuing to stimulate it for some reason, but the yellow glow blocks it. The wolf raises an eyebrow watching it all unfold. Is this thing another one of Ivex&#39;s perverted machinations?

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9x Ivex Extraction 3]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="142" name="d9x Ivex Extraction 3" tags="" position="14075,5800" size="100,100">&lt;&lt;nobr&gt;&gt;

The panther seems angrier and more distressed as time goes on. The blob moving around his sheath grows more active. Even from outside, it looks as if it is actively stroking it, trying to stimulate it for some reason.

?P
In response to that, Drekkar can see how Ivex&#39;s body reacts. Since the magic&#39;s chastity cage is transparent, the way the panther&#39;s sheath grows thicker is clear. The pink member nestled within reaches the opening of his sheath and bulges it, but because of the spell, it is unable to properly grow hard. It sure seems keen on trying to, though.

?P
And the more Ivex fails to grow erect, the harder the blob seems to work to make it so. The feline&#39;s balls start getting massaged more roughly. The wolf can see the blob forcefully spreading Ivex&#39;s legs, then pulling his balls away from his body ever so slightly so that it can press against them again and again, massaging them without stop. At the same time, the movement around the panther&#39;s sheath grows firmer as well. The blob actively pushes and pulls, tugging it up and down with a clear intent of stimulating it.

?P
The panther does react to it. His member seems more and more eager to grow. Through the transparent liquid of the blob, Drekkar can see Ivex&#39;s member leaking white pre-cum inside his sheath. Somehow, the liquid seems to make it past the invisible barrier keeping his cock confined. Maybe that&#39;s part of the spell? As soon as the pre-cum reaches the blob, however...

?P
It gets absorbed by it right away. It is as if the blob knows what it is doing. The stroking of Ivex&#39;s sheath grows even more frantic and his sheath looks swollen with his arousal. The panther&#39;s cock is obviously trying very hard to grow inside its cage.

?P
Ivex makes effort after effort to move, to get away from the thing assaulting his genitals. His face shows anger, outrage, and every now and then his furious eyes focus on the wolf, but there doesn&#39;t seem to be anything the feline can do to get away, or else he would already have done so. Even the red gemstone, the one that teleports, sits inside the blob below Ivex, but according to his own journal, it is &#39;unreachable&#39; to him anyway. Now Drekkar can see why.

?P
The wolf smirks with satisfaction. Ivex is finally paying for all he has done.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9x Ivex Extraction 4]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="143" name="d9x Ivex Extraction 4" tags="" position="14200,5800" size="100,100">&lt;&lt;nobr&gt;&gt;

Drekkar can&#39;t help but move his own hand down to his cock as he watches the struggling panther get assaulted inside his own device. The karmic justice in it feels weirdly erotic. Or maybe it&#39;s just the effects of the candle still burning hot within him? Either way, it feels great for the wolf to have the freedom to wrap his paw around his member and stroke it.

?P
It feels even better to see Ivex&#39;s eyes shifting downwards towards his cock. The panther is forced to watch the free wolf idly jerking off while, at the same time, the blob keeps working on his cock relentlessly while it is unable to even grow hard.

?P
When Drekkar thinks things can&#39;t get any better, they do.

?P
The blob seems to be working extra hard to stimulate Ivex, but all it gets are the occasional spurts of pre-cum that the feline&#39;s desperately aroused cock lets out. As if outraged by that, the wolf gets a perfect view of how the blob starts treating the feline&#39;s nuts in a rougher manner.

?P
Ivex seems to definitely feel that. The feline&#39;s eyes grow wide, and his face changes to a pained expression for a moment before it goes back to a pleasurable one. The blob seems to alternate between punishing squeezes to the feline&#39;s sack and pleasurable massages, all while never ceasing to stimulate Ivex&#39;s sheath at the same time, trying with all of its might to make the feline grow hard despite it being impossible.

?P
Drekkar&#39;s paw speeds up on his own cock. The erotic view of his hateful enemy being mistreated feels even better. The wolf&#39;s cock stands as hard as it was before, the red, tapered canine spire hard all the way to the knot. The wolf takes his sweet time stroking it, enjoying the pleasure the mage cannot feel, but because of how strong the arousal inside him is, he doesn&#39;t feel too far from cumming.

?P
And then things get even better.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9x Ivex Extraction 5]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="144" name="d9x Ivex Extraction 5" tags="" position="14325,5800" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf&#39;s paw speeds up even more on his cock and he laughs when the blob spreads Ivex&#39;s legs even wider. The movement under the panther&#39;s tail makes what&#39;s going to happen next obvious. It&#39;s unbelievable that Ivex made this thing to do that to someone, but it feels incredibly pleasant to see it done to him!

?P
The panther seems to be aware of what&#39;s going to happen as well. His struggling to move grows more frantic than ever, every muscle in the panther&#39;s body contracting as he tries to move, but it is as if he is encased in solid ice. The panther remains there, floating inside the blob, even as it moves under his tail...

?P
And the wolf gets to see it all. The way it spreads the feline&#39;s entrance as it penetrates him. Whatever the thing is doing, Ivex seems outraged by it. His face grows red, but the wolf can&#39;t tell if it&#39;s from rage or embarrassment. Maybe both? The feline&#39;s ass gets spread even wider as the blob penetrates him, invading his most sensitive spot...

?P
And as the wolf watches it, the lust within him burns. He can&#39;t help but imagine himself shoving his cock in there. Fuck, maybe he should have done that instead, he thinks, but the sight of it is still pleasant enough. Drekkar lets his tongue hang out of his muzzle as he jerks off harder watching it all happen.

?P
Ivex&#39;s expression of anger takes a sudden shift. His face twists with pleasure as the slime moves around his ass. It seems it found the sensitive spot in there. In reaction to it, the panther&#39;s cock lets out a new spurt of pre-cum that makes it past his cage. His cock takes the whole space of his sheath, looking desperate to grow hard, but held still by his own magic. The blob continues to stimulate him from every angle, trying so hard to get him hard for whatever reason.

?P
The sight of the feline fuming with anger and moaning with unwanted pleasure, at the same time coupled with the magical arousal, is enough to push the wolf past the edge.

?P
Drekkar shoots. Jerking himself off, he lets his cock shoot his seed high. Some of it hits the blob and, when it does, the thing absorbs it. Pleasure courses through the wolf. He pants, riding his blessed orgasm, and he can see Ivex&#39;s eyes fixated on the throbbing of his cock with obvious jealousy and need.

?P
What the wolf does not expect is the effect his seed has on the thing. The moment it hits it, the slime absorbs it and sends it down the altar through a small hole under it. What its purpose is, the wolf doesn&#39;t know, but as soon as it gets some seed?

?P
All of its efforts to extract the same thing from Ivex seem to double. The panther&#39;s muzzle moves as he tries to let out sounds, but there is nothing that can be done. Ivex remains trapped, frozen inside the blob as it assaults him in every conceivable way, forcing pleasure he cannot enjoy upon him.

?P
The wolf, on the other hand, slows down his paw. His cock, just as before, remains just as hard, his knot bigger than ever. Because of Ivex&#39;s cursed candle and whatnot, he feels some relief from jerking off, but Drekkar feels as if he can go again right away. Will that lust ever subside?!

?P
Just as he wonders that, the altar where the blob with Ivex inside starts glowing. The wolf takes a step back, readying himself, unsure of what is happening...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9x Ivex Extraction 6]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="145" name="d9x Ivex Extraction 6" tags="" position="14450,5800" size="100,100">&lt;&lt;nobr&gt;&gt;

The glowing on the altar grows brighter. Ivex seems to grow more frantic inside it for a moment, and then...

?P
It disappears.

?P
The blob with Ivex inside disappears. For a moment, Drekkar panics. Did the panther manage to get out somehow?! Looking around, however, the wolf quickly spots him. The blob did not disappear, it simply teleported. Ivex is still very frozen inside it, but it now rests within one of the open alcoves that surround the large room. The wolf makes his way there just as the large stone doors of the alcove start closing.

?P
Rushing there, Drekkar stops them from doing so. Holding them open with his muscles alone, the stone stops resisting him. The alcove with Ivex inside remains open, but as the wolf looks up and around to all the closed ones...

?P
Are they all full of people in the same situation Ivex is? The thought of that makes the wolf&#39;s eyes grow wide. It is a scary thought. To be trapped inside something like that in the crazed mage&#39;s tower...

?P
As the wolf wonders about it, a familiar scent hits his nose. It goes in hot, and as soon as he feels it, Drekkar covers his nose with his arm and steps back. It takes him a moment to find its source, but then, much to his surprise, he sees it. An array of candles- no, several arrays, lined up inside the alcove right above the blob Ivex is trapped in. The red candles of lust light up. At first, only one does, but then a second, a third, a fourth...

?P
Ivex looks at them in panic. Unable to move, the panther has no choice but to breathe them in and the effect is instantaneous. His sheath remains as swollen as before, his trapped member unable to get past the magic, but pre-cum starts coming from it more frequently right away. The blob seems satisfied with that, but it keeps working hard to stimulate the feline, again and again...

?P
Keeping his nose covered, the wolf takes a few steps back.

?P
Yet, he smirks. If the panther has really inflicted that upon others, then it is only fitting that he tastes it himself. Completely trapped, it&#39;s clear that Ivex isn&#39;t going anywhere.

?P
The panther&#39;s eyes grow wide with fury when the wolf pushes the first of the alcove&#39;s stone doors closed. Then, Drekkar can see him trying so very hard to move, to say something, all the while his eyes and face start losing themselves in an expression of drunken lust and need before the wolf closes the second door, trapping the crazed mage inside with nothing but his own candles... and his own weird blob-thing.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[To the end|d9x Ivex Extraction 7]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="146" name="d9x Ivex Extraction 7" tags="" position="14575,5800" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf gets out of the tower and takes pleasure in knowing that, inside this gemstone where the tower is, the target of his bounty is as well.

?P
Lucky for the wolf, he manages to find a worn, old pair of pants in the farmhouse Ivex had made his base. They are far too short for him, but they will do, so that at least he&#39;s not naked.

?P
Gathering what supplies he can, the wolf sets off with everything in hand: Ivex&#39;s tower inside the large gemstone, the pouch of magic gemstones and, most importantly, Ivex.

?P
The journey back to the Wayward Adventurers Guild takes a few days. It could go quicker, but after the deeply distressing effort to capture the mage, Drekkar is not exactly in a hurry to get there anymore. The wolf takes his sweet time recovering from everything he went through inside the mage&#39;s crazy tower, and basking in his success.

?P
A few times during his journey he goes back in to check on Ivex. Every time he does, the panther&#39;s eyes dart to him, but they are glazed. He&#39;s lost in an infinite loop of pleasure. Pleasure he can&#39;t have. The blob always looks like it&#39;s working its hardest to stimulate the panther, but with the chastity spell still on him, all he can provide is pre-cum as his cock always strains to grow hard, but can&#39;t. Other than his pleasurable torment, Ivex seems fine. Whatever magics he has going on in this system with the blob-things, it seems to be made to sustain who is inside and keep them well and healthy.

?P
When the wolf gets back to the Guild, he gives them a thorough re-telling of what he went through and what he has in tow, the official mages in the Wayward Adventurers Guild take a while to extract Ivex himself from his own torment, but from there, they throw him straight into a prison where his magic will be kept in check.

?P
They also handle his tower as a whole. The wolf does not stick around to see it, but the rumors of the insane tower a mage possessed spread like wildfire. Apparently, the mages of the Guild had to go through an arduous, delicate process to save the over fifty people Ivex had trapped inside his tower in the same way he was trapped. All of them males, and all of them kept there to provide energy for the tower&#39;s existence with their seed inside these things that would perpetually extract it from them while, at the same time, stimulating their bodies to produce more. A truly twisted device.

?P
With a handsome amount of gold in his hands, the wolf moves on. The life of an adventurer is like that. Ivex wasn&#39;t the first mage he had to fight and it won&#39;t be the last. The events of the tower stick inside Drekkar&#39;s mind, though, and they are enough to make him blush every now and then. He will make sure that such things never happen again.

?P
Or, at least, he will try to.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[The End|d9y The End]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="147" name="d9y Bounty Collection" tags="" position="15350,6125" size="100,100">&lt;&lt;nobr&gt;&gt;

Lucky for the wolf, he manages to find a worn, old pair of pants in the farmhouse Ivex had made his base. They are far too short for him, but they will do, so that at least he&#39;s not naked.

?P
Gathering what supplies he can, the wolf sets off with everything in hand: Ivex&#39;s tower inside the large gemstone, the pouch of magic gems and, most importantly, Ivex.

?P
The journey back to the Wayward Adventurers Guild takes a few days. It could go quicker, but after the deeply distressing effort to capture the mage, Drekkar is not exactly in a hurry to get there anymore. The wolf takes his sweet time recovering from everything he went through inside the mage&#39;s crazy tower, and basking in his success.

?P
When he gets to the Guild, both the adventurers and officers there are deeply amused by the way Drekkar delivers Ivex to them. After a thorough re-telling of what he went through and what he has in tow, the official mages in the Wayward Adventures Guild take Ivex to a prison where his magic will be kept in check.

?P
They also handle his tower. The wolf does not stick around to see it, but the rumors of the insane tower a mage possessed spread like wildfire. Apparently, the mages of the Guild had to go through an arduous, delicate process to save the over fifty people Ivex had trapped inside his tower. All of them males.

?P
With a handsome amount of gold in his pocket, the wolf moves on. The life of an adventurer is like that. Ivex wasn&#39;t the first mage he had to fight and it won&#39;t be the last. The events of the tower stick inside Drekkar&#39;s mind, though, and they are enough to make him blush every now and then. He will make sure that such things never happen again.

?P
Or, at least, he will try to.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[The End|d9y The End]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="148" name="d9y Edge" tags="" position="13975,6350" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  &lt;&lt;set $d_gagged = true&gt;&gt;

  It&#39;s time to mess with him a little more.
  ?P
&lt;&lt;/arc-only&gt;&gt;

&lt;&lt;if !$d_ivexEdging&gt;&gt;
  Drekkar is fond of the good, old methods, and this seems to be extra effective on the mage.

  ?P
  Roughly taking hold of Ivex&#39;s sheath, the wolf&#39;s fingers start kneading and teasing it in a firmer manner.

  ?P
  &lt;&lt;if !$d_gagged&gt;&gt;
    &quot;S-stop!&quot;
  &lt;&lt;else&gt;&gt;
    /* cspell:disable-next-line */
    &quot;Shmmfgh!&quot;
  &lt;&lt;/if&gt;&gt;
  Ivex growls, but though he seems like he wants to hide it, the effects on him are quite obvious. The feline groans, his member straining- &lt;b&gt;begging&lt;/b&gt; to grow hard to the wolf&#39;s stimulation, but it is unable to. The mage&#39;s own spell keeps it firmly stuck inside its sheath as if contained by unyielding metal.

  ?P
  Drekkar takes advantage of that.

  ?P
  The wolf uses every trick in the book. He fondles the mage&#39;s balls, strokes his sheath, and does everything he can to inflict pleasure upon the mage. The way the panther squirms in frustration delights Drekkar immensely. An act that would usually feel great, turned into pure frustration by the mage&#39;s own spell. The irony of it makes the wolf&#39;s own cock throb once in delight.

  ?P
  Despite Ivex&#39;s complaints, he keeps going. For a good while, the wolf continues to tease and pleasure the mage without him being able to enjoy. Drekkar clearly feels how much the panther is dripping, how high his pleasure reaches, and he can read the signs. Soon enough, the panther is teetering at the edge of climax.

  ?P
  Yet, without proper stimulation and unable to even grow hard, he cannot achieve it. The panther squirms in perpetual frustration and the wolf keeps going. Teasing Ivex in that state feels even better.

  ?P
  It&#39;s only when the panther seems like he can barely breathe properly from all the pleasure, that the wolf decides to stop. He wipes his claws sticky with pre-cum on the panther&#39;s own fur and lets him catch his breath. Ivex pants and groans, clearly deeply frustrated and needier than ever.

  ?P
  His cock continues to strain to grow and fail.

&lt;&lt;else&gt;&gt;
  Smirking, the wolf&#39;s paw reaches down for Ivex&#39;s sheath again.

  ?P
  &lt;&lt;if !$d_gagged&gt;&gt;
    &quot;N-no! Stop!&quot;
  &lt;&lt;else&gt;&gt;
    /* cspell:disable-next-line */
    &quot;N-nhmmfgh! Shmmfgh!&quot;
  &lt;&lt;/if&gt;&gt;
  Ivex pleads. He denies it, but the wolf can feel how his cock throbs in its prison again knowing what&#39;s coming.

  ?P
  Surely enough, the wolf starts the process all over again. The painfully long and pleasurable process of kneading, massaging and teasing Ivex&#39;s sheath and balls. The panther complains as pleasure is inflicted on him, slowly and surely, with the wolf&#39;s strong fingers stimulating Ivex&#39;s trapped cock until it&#39;s dripping in desperation.

  ?P
  Feeling it struggle so very hard to grow hard and fail is delightful.

  ?P
  Soon enough, Ivex is clearly at the edge of orgasm once more. The feline groans in deep frustration, going as far as trying to lightly hump against the wolf&#39;s hand as if that would provide any stimulation at all. Drekkar can see his face flustered, conflicted between humiliation and desperate pleasure, and that only fuels the wolf&#39;s fire to keep going.

  ?P
  For quite a while longer, he pleasures and teases Ivex, keeping him on the edge of a climax that will never come in his state.

  ?P
  After he&#39;s satisfied, Drekkar wipes his hand on the panther&#39;s already matted fur and chuckles while the panther lets out a pathetic whine and struggles to catch his breath.
&lt;&lt;/if&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;if $d_revengeStage == 2 || $d_revengeStage == 1&gt;&gt;
    [[Continue|d9y Hold]]
  &lt;&lt;elseif $d_revengeStage == 3&gt;&gt;
    [[Continue|d9y Fucking]]
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_ivexEdging = true&gt;&gt;
&lt;&lt;set $d_ivexEdges += 1&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="149" name="d9y Fondle" tags="" position="13825,6500" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  It&#39;s time to show him what&#39;s in store for him.
  ?P
&lt;&lt;/arc-only&gt;&gt;

&lt;&lt;set $d_revengeStage = 1&gt;&gt;

The wolf takes a few heavy steps toward the panther. Seeing Drekkar approaching is enough to make Ivex look fearful again. He tries to wiggle away, but a simple pull on his tail is enough to drag him back closer. Then, the wolf gets down on all fours over the bound mage.

?P
Ivex shrinks and closes his eyes to the simple act of the growling wolf&#39;s sharp teeth approaching him. Upon getting on all fours above the feline, however, the wolf stops. His cock flexes between his legs, so very close to the naked panther and, in fact, with a droplet of pre-cum falling to mat the panther&#39;s perfect black fur.

?P
&lt;&lt;if !$d_gagged&gt;&gt;
  &quot;Stop! Get away!&quot;
&lt;&lt;else&gt;&gt;
  /* cspell:disable-next-line */
  &quot;Shhnf! Ghn aawhhff!&quot;
&lt;&lt;/if&gt;&gt;
Ivex hisses, sounding less and less threatening.

?P
&quot;Quiet,&quot; the wolf orders, plain and simple. With one hand, the wolf grabs the panther&#39;s shoulder and forces him onto his back. Then, looking down at Ivex&#39;s sheath... The wolf takes pleasure in roughly grabbing it and starting to fondle it between two of his powerful fingers.

?P
&lt;&lt;if !$d_gagged&gt;&gt;
  &quot;What are you doing?!&quot;
&lt;&lt;else&gt;&gt;
  /* cspell:disable-next-line */
  &quot;Whhmf hhrm yhm ddhff?!&quot;
&lt;&lt;/if&gt;&gt;
The panther seems outraged to be touched like that, which is ironic, really. Ivex hisses and tries to wiggle away, but he is very easy to hold down. It is, however, surprisingly soon that the wolf feels the panther&#39;s sheath starting to swell.

?P
Ivex is too busy being angry at first to notice, but before long, he stops. The feline grunts, his eyes go wide, and he looks downward trying to get a look at his sheath.

?P
Upon seeing that, the wolf smiles. His fingers coaxing and stroking Ivex&#39;s sheath start to work faster, kneading it the same way he does his own to force pleasure upon the panther. Both Drekkar and Ivex see the same thing when looking down at that sheath.

?P
The feline&#39;s member trying to grow out of it, but failing. It gets trapped inside it, held back by the barely visible translucent barrier from Ivex&#39;s own spell. Recognition flashes on Ivex&#39;s eyes and the look of seething anger and outrage he gives the wolf make all of this worth it by itself.

?P
&lt;&lt;if !$d_gagged&gt;&gt;
  &quot;WHAT DID YOU DO?!&quot; he asks, yelling. &quot;You didn&#39;t- NO! YOU FOOL! That spell is not ready yet! Do you know how much work it will be to dispel it?! I will make you PAY for this!&quot;
&lt;&lt;else&gt;&gt;
  /* cspell:disable-next-line */
  &quot;WHMM HM DHFF HMMFGH?!&quot;
  he tries to ask through muffled yelling.
&lt;&lt;/if&gt;&gt;

?P
As the panther attempts to keep yelling his outrage, the wolf simply smirks. His fingers move even faster in stroking and kneading Ivex&#39;s sheath. Soon enough, his complaining stops and, instead, he starts groaning. A droplet of pre-cum comes from Ivex&#39;s sheath, smearing its inside as his cock continues to fail to grow out of it.

?P
This will, indeed, be plenty of fun.

?P
&lt;&lt;if !$d_gagged&gt;&gt;
  &quot;You- I will place ten layers of this spell on you when I get out of this! It will take an archmage to ever access your fucking sheath ever again!!&quot; Ivex continues to idly threaten... and then he stops to groan in frustrated pleasure again.
&lt;&lt;else&gt;&gt;
  /* cspell:disable-next-line */
  &quot;Hnnnghh! Hnngh hnmffg yhmgh HMGFFGH mmfffh!&quot;
  Ivex continues to attempt to threaten... and then he stops to groan in frustrated pleasure again.
&lt;&lt;/if&gt;&gt;

?P
Drekkar continues to hold the panther down and forcefully stimulate him. What to do to him next, though? Hmm...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
      &lt;li&gt;[[Use one of his spells on him.|d9y Spell]]&lt;/li&gt;
      &lt;li&gt;[[Continue stimulating him.|d9y Edge]]&lt;/li&gt;
    &lt;&lt;if !$d_gagged&gt;&gt;
      &lt;li&gt;[[Gag him.|d9y Gag]]&lt;/li&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="150" name="d9y Fuck" tags="" position="14075,6500" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  &lt;&lt;set $d_gagged = true&gt;&gt;

  This time, the wolf&#39;s own cock answers the question for him. It can&#39;t wait any longer.
  ?P
&lt;&lt;/arc-only&gt;&gt;

It&#39;s high time Ivex deals with the consequences of what he has caused.

?P
The wolf&#39;s member throbs in excitement. Drekkar keeps one paw firmly on Ivex&#39;s shoulder, holding him down on his back, but the other? The wolf&#39;s eyes lock with the panther&#39;s and he brings it down to his own cock. The wolf gives it a stroke, from top to bottom. The bright red, veiny spire has been aching for this for hours and hours. Ever since he was forced to breathe in that candle. This fire inside him has been burning for too long.

?P
Slowly, the wolf gives himself a few strokes. His paw feels so damn good on the length of his member. From the tapered tip all the way to the engorged knot. When it reaches the base, the wolf envelops his knot with his paw and gasps over how good it feels to squeeze. Just a light squeeze is enough to fuel his arousal, to make him think of sex and little else. Sure, he would prefer a tight cunt over a skinny panther, but...

?P
He looks down at Ivex, who in turn is staring at the wolf&#39;s cock as if guessing what&#39;s coming next.

?P
This will feel immensely satisfying.

?P
Bringing his paw back up, Drekkar spits on it. Then, he looks down at the panther while coating his member with a layer of his saliva.

?P
&lt;&lt;if !$d_gagged&gt;&gt;
  &quot;W-what are you going to do?!&quot; Ivex asks,
&lt;&lt;else&gt;&gt;
  /* cspell:disable-next-line */
  &quot;H-hmmfgh hmmghff ghmff?!&quot;
  Ivex tries to ask,
&lt;&lt;/if&gt;&gt;
his eyes going wide. He looks between the wolf and his cock apprehensively.

?P
&quot;You caused this. Now you gotta deal with it,&quot; the wolf merely says with a low growl. Then, with both hands, he takes hold of the panther&#39;s shoulders and turns him around.

?P
&lt;&lt;if !$d_gagged&gt;&gt;
  &quot;What?! Wait! Wait! If you do this, you&#39;ll regret it! Don&#39;t you DARE!&quot;
&lt;&lt;else&gt;&gt;
  /* cspell:disable-next-line */
  &quot;Hmmfgh! Whmmfgh! Whmmfgh!! Yhmmfg hmmgh hhfmmgh HMMFGH!&quot;
&lt;&lt;/if&gt;&gt;

?P
Ignoring the loud feline, Drekkar takes pleasure in pressing Ivex down against the ground after forcing him to be on his belly. Then, grabbing the panther&#39;s tail, he forces him up on his knees while keeping his face still well-pressed against the floor with pressure on his upper back.

?P
The mage squirms, but bound and pinned down as he is, there is little he can do. The sight of his raised rump is glorious. His pink, tight-looking entrance taunts the wolf and fans the flames burning within him. Pre-cum drips from his cock. No more wasting time.

?P
Positioning himself above the smaller feline, the wolf continues to ignore Ivex&#39;s protesting and struggling beneath him as he lines himself up. The tip of his member brushes against the mage&#39;s entrance and, when it does, he tries to get away from it, but a good tug on his tail keeps his ass up in the air where it should be.

?P
&quot;This is for everything you put me through,&quot; the wolf growls before shoving his hips forward.

?P
&lt;&lt;if !$d_gagged&gt;&gt;
  &quot;AAH!&quot;
&lt;&lt;else&gt;&gt;
  /* cspell:disable-next-line */
  &quot;HMMMFGH!&quot;
&lt;&lt;/if&gt;&gt;
Ivex pretty much yells. The initial penetration... feels absolutely great.

?P
The tight walls of the smaller feline are forced to spread to give room to the wolf&#39;s considerable endowment. Feeling the warmth engulfing his needy cock is the best thing he could have asked for. Drekkar moans out loud. There&#39;s no reason to be quiet. The wolf makes a point to groan and growl as he shoves his hips forward, sinking another inch of his cock into the feline.

?P
Beneath him, Ivex mewls and complains, but the wolf merely presses him down harder against the ground and shoves another inch into him, silencing the panther by making him grunt. It does not take long for the wolf to shove the entirety of his cock into the mage, save for the knot. The drive to shove his knot in is there... and it is strong. The wolf resists it, though. There is plenty of time... and he wants to savor this for as long as possible.

?P
In a rough movement, Drekkar pulls back, pulling his cock out and making Ivex yelp, then he shoves himself back in, driving his entire length in there again. Giving the feline little time to adjust, the wolf takes his pleasure. He pistons in and out of the panther&#39;s ass, fucking him with gusto and taking immense pleasure in sating some of the burning lust within him.

?P
Ivex is simply forced to take the wolf&#39;s pounding.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9y Fucking]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_ivexEdges += 1&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="151" name="d9y Fucking Again" tags="inclusion" position="14250,6550" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  &lt;&lt;set $d_ivexEdges = 3&gt;&gt;
&lt;&lt;/arc-only&gt;&gt;

&lt;&lt;if $d_ivexEdges &lt;= 2&gt;&gt;
  The wolf roughly grabs the bound mage&#39;s caged sheath to feel it up.
  The panther&#39;s arousal feels...
  &lt;span style=&quot;color:#e7d778&quot;&gt;gripping&lt;/span&gt;.
&lt;&lt;elseif $d_ivexEdges &gt; 2 &amp;&amp; $d_ivexEdges &lt;= 3&gt;&gt;
  The wolf roughly grabs the bound mage&#39;s caged sheath to feel it up.
  The panther&#39;s arousal feels...
  &lt;span style=&quot;color:#bb5e39&quot;&gt;powerful&lt;/span&gt;.
&lt;&lt;elseif $d_ivexEdges &gt; 3 &amp;&amp; $d_ivexEdges &lt;= 5&gt;&gt;
  The wolf roughly grabs the bound mage&#39;s caged sheath to feel it up.
  The panther&#39;s arousal feels...
  &lt;span style=&quot;color:#bf5150&quot;&gt;overpowering&lt;/span&gt;.
&lt;&lt;else&gt;&gt;
  The wolf roughly grabs the bound mage&#39;s caged sheath to feel it up.
  The panther&#39;s arousal feels...
  &lt;span style=&quot;color:#e92940&quot;&gt;overwhelming&lt;/span&gt;.
&lt;&lt;/if&gt;&gt;

?P
Keeping Ivex&#39;s face against the ground and his ass raised, the wolf thrusts forward ever so slightly to keep his cock firmly stuck inside the mage. It still throbs, eager for the fucking to continue, but at the same time, feeling Ivex&#39;s ass clenching around his member as he is... &#39;tortured&#39; is also damn nice.

?P
Holding himself like that, the wolf wonders, what to do to him next?

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="152" name="d9y Fucking" tags="" position="14250,6550" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  &lt;&lt;set $d_gagged = true&gt;&gt;
&lt;&lt;/arc-only&gt;&gt;

&lt;&lt;if !$d_stage2Clear&gt;&gt;
  &lt;&lt;set $d_revengeStage = 3&gt;&gt;
  &quot;Fuck...&quot; the wolf groans. His lusty growling is constant as he continues to fuck the panther hard. In and out, the smaller feline&#39;s ass already taking his size with more ease, yet still feeling delightfully tight around his cock.

  ?P
  &lt;&lt;if !$d_gagged&gt;&gt;
    /* cspell:disable-next-line */
    &quot;F-fuck! Slower-! Hnngh!&quot;
    Ivex mewls beneath him. The wolf does not slow down.
  &lt;&lt;else&gt;&gt;
    /* cspell:disable-next-line */
    &quot;Fhmmgh! Shhmmffwhr! Hnngh!&quot;
    Ivex mewls beneath him. The wolf ignores it.
  &lt;&lt;/if&gt;&gt;

  ?P
  Drekkar speeds up. The larger wolf huffs through his nose, his arm that holds Ivex down moves to grab the feline, enveloping him by the chest and bringing him up to press him against the wolf&#39;s own, broader chest. Holding the panther tight, Drekkar finds a better position to fuck, managing to go just a little deeper with each thrust.

  ?P
  Ivex himself groans and grunts without ceasing at that. The skinny panther is easily held against his body in that good fuckable position. The wolf starts thrusting harder. Faster. The pleasure is so great...!

  ?P
  Drekkar&#39;s knot grows larger. It begs to be shoved in and, in a couple of harder thrusts, the wolf actually tries, pressing the much larger bulb of flesh against Ivex&#39;s stretched ass, but it&#39;ll take more effort, and...

  ?P
  No! Not quite yet!

  ?P
  Out of nowhere, the wolf suddenly stops. He pauses with his cock deep within the panther. His chest heaves and he pants from the effort of fucking, but though his cock still throbs inside the panther, he continues to stay still.

  ?P
  Drekkar is not catching his breath. No, he realizes he was too close. Too close to finishing inside that tight ass. He wants to do that. More than anything. Just... not so fast.

  ?P
  Ivex has not had all of his punishment just yet.

  ?P
  The panther pants as well beneath him. He seems glad to have a break, even though he groans, obviously stretched by the wolf&#39;s entire cock, save the knot, that remains firmly impaled within him.

  ?P
  Just out of curiosity, Drekkar&#39;s paw lets go of Ivex, letting the feline fall down face-first on the floor with a grunt while his ass remains raised and impaled. Ivex yelps at that, but the wolf does not care. No, instead, his paw trails down, moving to grab and feel Ivex&#39;s sheath.

  ?P
  It is very engorged. Just touching it leaves the wolf&#39;s fingers sticky with the feline&#39;s pre-cum. It seems that, liking it or not, the panther&#39;s body is enjoying being pounded.

  ?P
  &lt;&lt;if !$d_gagged&gt;&gt;
    &quot;I-It&#39;s not what you&#39;re thinking!&quot; Ivex manages to say, although he&#39;s clearly flustered.
  &lt;&lt;else&gt;&gt;
    /* cspell:disable-next-line */
    &quot;Hmgh! Hmmgh ffhmmgh...!&quot;
    Ivex tries to say, clearly flustered.
  &lt;&lt;/if&gt;&gt;

  ?P
  The wolf simply chuckles. Giving Ivex&#39;s sheath a squeeze just to hear him squirm, the wolf uses a finger to tease the panther&#39;s trapped member. He can feel how hard it tries to grow, but it can&#39;t. It won&#39;t be able to. That thought brings Drekkar enough pleasure to make his cock throb inside the feline again.

  ?P
  This is what it feels like to be on top. Literally. And the panther brought this upon himself.

  ?P
  This and more.
  &lt;&lt;set $d_stage2Clear = true&gt;&gt;

&lt;&lt;else&gt;&gt;
  &lt;&lt;include [[d9y Fucking Again]]&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Use one of his spells on him.|d9y Spell]]&lt;/li&gt;
    &lt;li&gt;[[Stimulate and tease him by hand.|d9y Edge]]&lt;/li&gt;
    &lt;li&gt;[[Knot him.|d9y Knot]]&lt;/li&gt;
    &lt;&lt;if !$d_gagged&gt;&gt;
      &lt;li&gt;[[Gag him.|d9y Gag]]&lt;/li&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="153" name="d9y Gag with Rope" tags="" position="13800,7025" size="100,100">Better to go with the classics.

Cutting a spare piece of rope with his teeth, the wolf then ties it into a thick, single piece and, nonchalantly, shoves it into the maw of the complaining panther.

&quot;HMMFGH!&quot; Ivex complains again, this time blissfully muffled. He shakes his head back and forth clearly trying to dislodge the rope but, just for the fun of it, the wolf uses a claw to press it even deeper within his maw.

&quot;Hnnnnghhfff! Hngh hnmmf!&quot; Ivex complains again, but the wolf can&#39;t even tell what he&#39;s saying.

Sweet, sweet silence.

&lt;&lt;if $d_revengeStage == 0&gt;&gt;\
[[Continue|d9y Strip]]
&lt;&lt;elseif $d_revengeStage == 1&gt;&gt;\
[[Continue|d9y Hold]]
&lt;&lt;elseif $d_revengeStage == 2&gt;&gt;\
[[Continue|d9y Hold]]
&lt;&lt;elseif $d_revengeStage == 3&gt;&gt;\
[[Continue|d9y Fucking]]
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="154" name="d9y Gag with Spell" tags="" position="13675,7025" size="100,100">&lt;&lt;nobr&gt;&gt;
Why not use Ivex&#39;s own tools against him?

?P
Shoving his paw into the pouch of gemstones, the wolf pulls out a gray-ish one that he remembers was a spell of silence. Clutching it into his paw, the wolf activates it and sees how to use it.

?P
All he has to do is touch Ivex&#39;s muzzle with the gemstone. The moment he does, the feline&#39;s eyes go wide realizing what was done. Ivex opens his muzzle to say something, but the moment he does, it gets clamped shut.

?P
/* cspell:disable-next-line */
&quot;HMMFGH!&quot;
Ivex complains again, except this time his words come out muffled. It&#39;s impressive! The panther seems like he tries and tries to open his muzzle, but no matter what, he can&#39;t. Because of it, his words come out as barely intelligible.

?P
/* cspell:disable-next-line */
&quot;Hnnnnghhfff! Hngh hnmmf!&quot;
Ivex complains again, but the wolf can&#39;t even tell what he&#39;s saying.

?P
Sweet, sweet silence.

?P
&lt;&lt;if $d_revengeStage == 0&gt;&gt;
  [[Continue|d9y Strip]]
&lt;&lt;elseif $d_revengeStage == 1&gt;&gt;
  [[Continue|d9y Hold]]
&lt;&lt;elseif $d_revengeStage == 2&gt;&gt;
  [[Continue|d9y Hold]]
&lt;&lt;elseif $d_revengeStage == 3&gt;&gt;
  [[Continue|d9y Fucking]]
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="155" name="d9y Gag with Underwear" tags="" position="13925,7025" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf smirks. It&#39;s time to get creative.

?P
Reaching out for Ivex&#39;s cut and discarded clothes, it&#39;s easy to find the stained piece of cloth he had wrapped around his crotch.

?P
The panther&#39;s eyes follow the wolf&#39;s hand and he seems confused for a moment. Then, Drekkar crumples the cloth into a tight ball and approaches the feline&#39;s muzzle with it.

?P
&quot;WHA-&quot; Ivex has time to say and, when he opens his muzzle to do so, the wolf shoves his own undergarments into his maw with a swift motion.

?P
/* cspell:disable-next-line */
&quot;HMMFGH!&quot;
Ivex complains. His eyes water and his face grows red. The panther shakes his head, clearly trying to dislodge the underwear from within his muzzle, but the wolf does not let him. With two fingers, he presses the garments in deeper and deeper, to the point where they seem like they&#39;re close to reaching the mage&#39;s throat.

?P
/* cspell:disable-next-line */
&quot;Hnnnnghhfff! Hngh hnmmf!&quot;
Ivex complains again, but the wolf can&#39;t even tell what he&#39;s saying. He looks absolutely furious, though.

?P
Sweet, sweet silence.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;if $d_revengeStage == 0&gt;&gt;
    [[Continue|d9y Strip]]
  &lt;&lt;elseif $d_revengeStage == 1&gt;&gt;
    [[Continue|d9y Hold]]
  &lt;&lt;elseif $d_revengeStage == 2&gt;&gt;
    [[Continue|d9y Hold]]
  &lt;&lt;else&gt;&gt;
    [[Continue|d9y Fucking]]
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="156" name="d9y Gag" tags="" position="13575,6900" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  He&#39;s being way too noisy.
  ?P
&lt;&lt;/arc-only&gt;&gt;

Yeah, silencing him might be a good idea. Given the place Ivex has chosen to hide, it is unlikely that anyone would hear him, but his prattling is growing annoying pretty quickly.

?P
&quot;-and when you&#39;re done mopping the floor with your tail, I&#39;ll make you do it all over again with your TONGUE! And then-&quot; the panther continues angrily.

?P
The wolf looks around. There&#39;s a few options on how to silence him. What to gag him with...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[With a piece of rope.|d9y Gag with Rope]]&lt;/li&gt;
    &lt;li&gt;[[With a silence spell.|d9y Gag with Spell]]&lt;/li&gt;
    &lt;li&gt;[[With his own undergarments.|d9y Gag with Underwear]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_gagged = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="157" name="d9y Hold Again" tags="inclusion" position="13990,6500" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  &lt;&lt;set $d_ivexEdges = 0&gt;&gt;
&lt;&lt;/arc-only&gt;&gt;

&lt;&lt;if $d_ivexEdges &lt; 0&gt;&gt;
  &lt;&lt;set $d_ivexEdges = 0&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $d_ivexEdges &lt;= 2&gt;&gt;
  The wolf roughly grabs the bound mage&#39;s caged sheath to feel it up.
  The panther&#39;s arousal feels..
  &lt;span style=&quot;color:#e7d778&quot;&gt;gripping&lt;/span&gt;.
  ?P
&lt;&lt;elseif $d_ivexEdges &gt; 2 &amp;&amp; $d_ivexEdges &lt;= 3&gt;&gt;
  The wolf roughly grabs the bound mage&#39;s caged sheath to feel it up.
  The panther&#39;s arousal feels...
  &lt;span style=&quot;color:#bb5e39&quot;&gt;powerful&lt;/span&gt;.
  ?P
&lt;&lt;elseif $d_ivexEdges &gt; 3 &amp;&amp; $d_ivexEdges &lt;= 5&gt;&gt;
The wolf roughly grabs the bound mage&#39;s caged sheath to feel it up.
  The panther&#39;s arousal feels...
  &lt;span style=&quot;color:#bf5150&quot;&gt;overpowering&lt;/span&gt;.
  ?P
&lt;&lt;else&gt;&gt;
  The wolf roughly grabs the bound mage&#39;s caged sheath to feel it up.
  The panther&#39;s arousal feels...
  &lt;span style=&quot;color:#e92940&quot;&gt;overwhelming&lt;/span&gt;.
  ?P
&lt;&lt;/if&gt;&gt;

Keeping the bound mage held down on his back against the floor is remarkably easy, especially when he&#39;s panting and gasping after being... tortured.

?P
What to do with the helpless, evil feline next?

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="158" name="d9y Hold" tags="" position="13950,6500" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if !$d_stage1Clear&gt;&gt;
  &lt;&lt;if !$d_gagged&gt;&gt;
    &quot;Fuck... you!&quot;
  &lt;&lt;else&gt;&gt;
    /* cspell:disable-next-line */
    &quot;Fhmmff... yhmmfgh!&quot;
  &lt;&lt;/if&gt;&gt;
  Ivex mutters between raspy breaths. The wolf merely smirks at it.

  ?P
  Keeping him held down is an easy matter even if he does try to squirm away every now and then. The meek panther does not look threatening at all anymore like that.

  ?P
  As the wolf stares down at him, his own member still pulses, however. The lust Ivex has inflicted on him still feels like it is unsatisfied. Perhaps taking it out on him would satisfy it and, even if it doesn&#39;t, it will at least &lt;b&gt;feel&lt;/b&gt; fucking satisfying. Just the thought of it makes the wolf let out a small growl of lust. His knot feels cold out in the open like that for so long...

  ?P
  Drekkar takes control of his senses, though. He&#39;s there to punish Ivex, not to indulge in his own forced lust. Not that he couldn&#39;t do both at the same time.

  ?P
  &lt;&lt;if !$d_gagged&gt;&gt;
    &quot;You fucking... mutt! You&#39;ll pay...&quot; Ivex repeats, doing nothing but foster the wolf&#39;s anger.
  &lt;&lt;else&gt;&gt;
    /* cspell:disable-next-line */
    &quot;Yhmmgh PHMMGH!&quot;
     Ivex repeats, doing nothing but annoy the wolf with his incessant attempts to prattle.
  &lt;&lt;/if&gt;&gt;

  ?P
  At any rate, though, what to do with him next?

&lt;&lt;else&gt;&gt;
  &lt;&lt;include [[d9y Hold Again]]&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Use one of his spells on him.|d9y Spell]]&lt;/li&gt;
    &lt;li&gt;[[Stimulate and tease him by hand.|d9y Edge]]&lt;/li&gt;
    &lt;li&gt;[[Fuck him.|d9y Fuck]]&lt;/li&gt;
    &lt;&lt;if !$d_gagged&gt;&gt;
      &lt;li&gt;[[Gag him.|d9y Gag]]&lt;/li&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_stage1Clear = true&gt;&gt;
&lt;&lt;set $d_revengeStage = 2&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="159" name="d9y Ice Spell" tags="" position="14175,7025" size="100,100">Pulling out the light blue gemstone, the wolf clutches it in his hand and looks down at Ivex.

&lt;&lt;if !$d_freezeSpell&gt;&gt;\
The panther sees the gemstone in the wolf&#39;s hand and laughs.

&lt;&lt;if !$d_gagged&gt;&gt;\
&quot;You utter fool! You don&#39;t even know what you&#39;re doing!&quot; Ivex taunts.
&lt;&lt;else&gt;&gt;\
&quot;Hmmfg hmmfgff hummghf!&quot; Ivex just mumbles. He looks smug as he does.
&lt;&lt;/if&gt;&gt;\

The smile adorning the panther&#39;s fade fades and his expression starts shifting into an increasingly worried one as the wolf&#39;s paw, encased in ice, moves towards his sheath.

&lt;&lt;if !$d_gagged&gt;&gt;\
&quot;What are YOU GONNA D-AAAAH!&quot;
&lt;&lt;else&gt;&gt;\
&quot;Whmmfgh rhmmf dh- HMMMFGH!!&quot;
&lt;&lt;/if&gt;&gt;\

The panther thrashes in place the moment the wolf&#39;s paw grabs at his crotch. With his wide paw, the wolf manages to take hold of both Ivex&#39;s sheath and nuts, his paw pressing hard against them while transferring the low temperature of that icy cold spell directly onto Ivex&#39;s sheath and balls.

The way the panther tears up and yelps over having the coldness enveloping his sheath and balls is comic. The wolf chuckles, then pulls his paw away to let Ivex gasp and pant.

The reprieve is pretty short, however. With the ice lingering on his paw due to Ivex&#39;s own spell, the wolf uses his fingers to touch the mage&#39;s sheath in a more precise way. Ivex whines again as the wolf uses his icy fingers to pry that sheath open and play with it, followed by sticking one of them in there.

To Ivex, it must certainly feel like a block of pure ice is being put inside his sheath. The panther&#39;s member that had been straining against the invisible barrier shrinks and shies away from the freezing touch, but the wolf makes a point to caress it, forcing Ivex to feel the coldness on his most sensitive region.

&quot;HNNNNGH!&quot; the panther just grunts. The wolf can just hear the rage behind that grumble, but he seems to be too busy coping with the cold feeling to even attempt to properly say anything.

The barrier from the chastity spell does not let the wolf pry any deeper into Ivex&#39;s sheath, but that doesn&#39;t stop him from rubbing it all over the panther&#39;s fuzzy pouch, nor does it stop the wolf from grabbing Ivex&#39;s balls in his hand and rolling them between his ice-cold fingers. It&#39;s a delight to hear him whine and complain about how terrible it feels.

After a while, the wolf lets go of the gem. His paw gets warm right away and, just for fun, he touches Ivex&#39;s sheath again. It&#39;s still icy cold as if it had been sunken in freezing water for a while.

The panther pants and glances back at the wolf with a look of pure fury, but doesn&#39;t dare say anything.

Fun stuff.
&lt;&lt;set $d_freezeSpell = true&gt;&gt;\
&lt;&lt;else&gt;&gt;\
Ivex&#39;s eyes go wide when he sees it once more. The panther shakes his head, his eyes a mix of begging and anger, but that does not dissuade the wolf.

His paw feels mildly cold as it grows encased in ice once again. Drekkar does not hesitate, though. It goes straight for Ivex&#39;s vulnerable sheath and balls.

The way the panther grunts and groans as the wolf plays with his sheath between his icy cold fingers is always fun to watch. Drekkar alternates between freezing the panther&#39;s balls for a while, then going back to play around with his sheath and trapped cock. The panther twitches, struggling to get away from it, but there&#39;s nowhere to go.

For a good while, the wolf teases the mage with the freezing touch of his own spell, forcing Ivex to literally cool down.

After he&#39;s satisfied, Ivex&#39;s member is left shy and cold inside his sheath, ready to be played with again.
&lt;&lt;/if&gt;&gt;\
&lt;&lt;set $d_ivexEdges -= 1&gt;&gt;\

&lt;&lt;if $d_revengeStage == 2 || $d_revengeStage == 1&gt;&gt;\
[[Continue|d9y Hold]]
&lt;&lt;elseif $d_revengeStage == 3&gt;&gt;\
[[Continue|d9y Fucking]]
&lt;&lt;/if&gt;&gt;\</tw-passagedata><tw-passagedata pid="160" name="d9y Knot" tags="" position="14375,6550" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  &lt;&lt;set $d_gagged = true&gt;&gt;

  Drekkar knows he could keep playing with the feline for a good while. Feeling his ass clench around his cock in this delightful way every time the panther is frustratingly close to cumming. But no. The wolf&#39;s knot demands it, and it&#39;s time to finish this.
  ?P
&lt;&lt;/arc-only&gt;&gt;

No holding back. The wolf&#39;s lust is too strong and his instincts start speaking louder. There has been enough messing with the panther. It&#39;s time to finish it.

?P
Ivex just yelps and mewls when the wolf pulls him up and grips him hard against his chest again. The smaller feline squirms, certainly knowing what&#39;s coming, but the wolf stops it with nothing but one threatening growl.

?P
It&#39;s the ideal position. Drekkar pulls his cock back from the panther&#39;s ass... then shoves it back in with a strong, powerful thrust that is enough to make him moan and Ivex grunt beneath him.

?P
And then it begins.

?P
No more holding back, no more keeping his lust in check. The burning fire within him calls for him to fuck, and fuck he will. The wolf growls louder as he speeds up, thrusting in and out of the panther&#39;s ass, letting the tightness of the panther&#39;s rear bring him back to the apex of his pleasure, to the point where he&#39;s close to cumming again. Pistoning in and out of the panther, all he can hear are Ivex&#39;s gasps as he spreads the feline open again and again with his large member. The wolf huffs. His own pleasure grows and grows until he can feel it.

?P
The apex. That incoming climax... and with it, that burning need every wolf has to shove his knot into his bitch and claim it entirely.

?P
With a stronger, brutish thrust, Drekkar slams into the panther&#39;s rear, pressing his knot against his entrance and trying to shove it in. It doesn&#39;t go. He pulls back and shoves it in again. Like a battering ram, the wolf&#39;s knot forces itself against the wizard&#39;s rear, again and again, demanding entrance.

?P
&lt;&lt;if !$d_gagged&gt;&gt;
  &quot;It- it won&#39;t FIT!&quot; Ivex yells, squirming and groaning without stop.
&lt;&lt;else&gt;&gt;
  /* cspell:disable-next-line */
  &quot;Ihmm wwhmmf FFHMFFH!!&quot;
  Ivex tries to yell through his gag, squirming and groaning without stop.
&lt;&lt;/if&gt;&gt;

?P
The wolf ignores it. He has fit his knot into many things in the past and he will fit it in again.

?P
With brutish shove after brutish shove, the wolf&#39;s growling grows. His instincts demand something around his knot and he &lt;b&gt;will&lt;/b&gt; have it!

?P
Putting more strength into his hips, Drekkar pushes in one last time and, this time, he doesn&#39;t retreat, but rather forces forward, and then finally...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9y Knotted Mage]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="161" name="d9y Knotted Mage" tags="" position="14500,6550" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  &lt;&lt;set $d_gagged = true&gt;&gt;
  &lt;&lt;set $d_ivexEdges = 6&gt;&gt;
&lt;&lt;/arc-only&gt;&gt;

&lt;&lt;if !$d_gagged&gt;&gt;
  /* cspell:disable-next-line */
  &quot;AAAH!!&quot; Ivex yells.
&lt;&lt;else&gt;&gt;
  /* cspell:disable-next-line */
  &quot;HMMMFGH!!&quot; Ivex yells.
&lt;&lt;/if&gt;&gt;

?P
It pops in.

?P
Drekkar lets out a loud moan of pure pleasure. His large knot forces its way past the feline&#39;s resistance and, after spreading him wider, settles itself inside, locking the wolf to his bitch as it should.

?P
The pressure around his knot, the most sensitive spot of any wolf, is heavenly to him. It brings his pleasure to its highest point. All that fire, everything Ivex has inflicted upon him since the beginning culminates, gathering into a pleasure unlike any he has ever felt and translating to his cock.

?P
It throbs, it pulses... and it shoots.

&lt;&lt;if $d_ivexEdges &gt; 5&gt;&gt;
  ?P
  At the exact same time, Ivex moans below him. It seems to be too much for him. After all that time being edged, all the teasing, all the lust he was made to feel...

  ?P
  The wolf can feel how the panther&#39;s ass clenches hard around his cock. It feels amazing. Drekkar has fucked men before and he knows that feeling. It is the feeling... of an orgasming male.

  ?P
  The wolf trails down with his paw to feel it. All the edging coupled with the wolf&#39;s knot shoved in and the way he keeps thrusting push Ivex past the point of no return as well... despite his condition.

  ?P
  Even through the chastity spell, even with his cock painfully trapped within his sheath, the wolf can feel the dribbling of seed from Ivex&#39;s forceful orgasm. The panther groans and grunts, the sounds he makes sounding more like ones of frustration than ones of pleasure. It must feel quite terrible to be forced to finish like that, without being able to grow hard and without stimulation, yet he does. With the wolf fucking him as hard as he does and after all that edging... he does.

  ?P
  The panther&#39;s climax dribbles down to the floor. The wolf&#39;s pleasure is only enhanced by that knowledge as he continues to fuck and enjoy his own pleasure.

  &lt;&lt;set $d_ivexClimax = true&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
Holding the mage tight to himself, the wolf feels the heavenly sensation of his climax overcoming him. His body is overwhelmed with pleasure and underneath him...

?P
Ivex groans in distaste as he is filled with wolf seed.

?P
The wolf feels absolute delight in feeling each throb of his cock depositing his spunk inside the hateful mage. His knot grows larger, achieving full size and locking his seed inside and them together.

?P
Drekkar doesn&#39;t care. Midway through his orgasm, he lets Ivex go. Again, the mage yelps as he hits the ground with his face, but his ass remains stuck to the wolf&#39;s crotch being filled to the brim with all of the wolf&#39;s seed, bolstered by his own arousal spells.

?P
When it ends, the wolf&#39;s entire body feels lighter. A feeling of relief washes over him accompanied by a deep satisfaction. Seeing the mage panting and grunting beneath him, struggling to cope with his size inside him and flustered in humiliation after what all he has done is immensely satisfying.

?P
This is it. Drekkar has won, and Ivex is thoroughly defeated.

?P
As he descends upon the aftermath of his blissful orgasm, the wolf still pants. Ivex stays down on the floor panting as well after the intense experience. He seems too tired to even complain or throw insults at the moment.

?P
It will take some time for the wolf&#39;s knot to come down, but Drekkar is not in a hurry.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9y Pull Out Finish]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="162" name="d9y Lightning Spell" tags="" position="14300,7025" size="100,100">&lt;&lt;nobr&gt;&gt;

Pulling out the purple gemstone, the wolf clutches it in his hand and looks down at Ivex.

?P
&lt;&lt;if !$d_shockSpell&gt;&gt;
  The panther catches a glimpse of which gemstone the wolf is pulling out and frowns.

  ?P
  &lt;&lt;if !$d_gagged&gt;&gt;
    &quot;You idiot! Be careful what you touch!
    You don&#39;t even know what you&#39;re doing!&quot;
  &lt;&lt;else&gt;&gt;
    /* cspell:disable-next-line */
    &quot;Ymm mmfgh! Mm gmfmf hmmgff gmfhgh!&quot;
  &lt;&lt;/if&gt;&gt;
  The panther hisses and wiggles trying to get away.

  ?P
  The wolf&#39;s grip on Ivex simply tightens while he clutches the gemstone with the other hand. The cackle of lightning around his paw creates a tingle. A funny one. It definitely seems like it does more than just tingle when his paw touches something, though.

  ?P
  And the wolf decides to test it out in the best way possible.

  ?P
  &lt;&lt;if !$d_gagged&gt;&gt;
    &quot;Wh-what are you doing?&quot;
  &lt;&lt;else&gt;&gt;
    /* cspell:disable-next-line */
    &quot;Whmmfg hmmf yhmmfh?&quot;
  &lt;&lt;/if&gt;&gt;
  Ivex asks, looking at the wolf and seeing his hand
  slowly going between his legs.
  &lt;&lt;if !$d_gagged&gt;&gt;
    &quot;Stop!&quot;
  &lt;&lt;else&gt;&gt;
    /* cspell:disable-next-line */
    &quot;HMMFGH!&quot;
  &lt;&lt;/if&gt;&gt;

  ?P
  The wolf doesn&#39;t. With a smirk, he extends a single finger and brings it down to touch Ivex&#39;s balls with the tip of his claws.

  ?P
  The panther lets out a high-pitched yelp as a lightning current goes through his sensitive nuts. He jerks away from it, but in the motion, all he does is get in contact with the wolf&#39;s finger again, which makes him get zapped once more.

  ?P
  /* cspell:disable-next-line */
  &quot;HNNNGH!&quot;
  Ivex groans. The mage thrashes and struggles, but the wolf gives him no reprieve. With two fingers, the wolf takes hold of Ivex&#39;s caged sheath... and the feline yelps yet again.

  ?P
  Despite what looks like a deep discomfort, the wolf still feels droplets of pre-cum running down his paw as he lightly rubs the lightning-imbued fingers on Ivex&#39;s helpless sheath. His member does shy away ever so slightly, and the panther keeps twitching and mewling with discomfort.

  ?P
  &lt;&lt;if !$d_gagged&gt;&gt;
    &quot;YOU FUCKING-!&quot;
  &lt;&lt;else&gt;&gt;
    /* cspell:disable-next-line */
    &quot;HMMGH HGH-!&quot;
  &lt;&lt;/if&gt;&gt;
  Ivex starts, but the wolf stops his complaining with a simple, very mild squeezing of the sheath. Apparently, applying more pressure increases the current his paw discharges and, in turn, it makes Ivex yelp out loud.

  ?P
  That new knowledge makes the wolf smirk. He lets go of the feline&#39;s sheath for a moment to give him some respite, but soon enough, his fingers are hovering around the feline&#39;s hanging nuts again. The wolf then presses a single, playful finger right on the middle of Ivex&#39;s balls.

  ?P
  The panther whines at first, but little by little, the wolf increases the pressure, pressing ever so slightly against the sensitive balls and, as a result, increasing the electric current going through Ivex&#39;s nuts little by little, all caused by his own spell.

  ?P
  He plays with it for a while, softening his touch, then tightening again, all while hearing Ivex&#39;s mewling and complaining the whole time. Sometimes the panther seems angry, sometimes a little more complacent, and the different reactions bring a few laughs out of the wolf.

  ?P
  After zapping the mage&#39;s sheath and balls for a good while, the wolf finally lets go of the gemstone. His paw returns to normal and Ivex looks relieved... but his eyes carry vengeful fury when he stares at the wolf.

  ?P
  He clearly still has much to learn.

&lt;&lt;else&gt;&gt;

  Ivex all but yelps when he sees it once more. He seems like he wants to speak against it, but the wolf is faster with it this time. Clutching it in his paw, within moments his finger is already touching Ivex&#39;s sheath, zapping it with a current of electricity.

  ?P
  The panther&#39;s grunting starts all over again. This time, Drekkar makes a point of rubbing his lightning-filled fingers against Ivex&#39;s sheath, teasing his balls, and even lightly touching the tip of his claw against Ivex&#39;s straining member. Trapped inside his chastity, held, and bound as he is, the panther can do nothing but endure it.

  ?P
  On a whim, the wolf even goes as far as grabbing Ivex&#39;s balls within his paw as a whole. That seems to shock it from all sides, providing the panther with a very unpleasant experience coming from his own spell, before the wolf lets go of it.

  ?P
  He keeps his prodding random, chuckling at how the feline reacts when he zaps his balls twice, then sheath once, then balls twice again...

  ?P
  Before long, he gets bored of it. Ivex&#39;s member seems to have shirked away a little bit because of the shocking.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $d_revengeStage == 2 || $d_revengeStage == 1&gt;&gt;
  [[Continue|d9y Hold]]
&lt;&lt;elseif $d_revengeStage == 3&gt;&gt;
  [[Continue|d9y Fucking]]
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $d_ivexEdges -= 1&gt;&gt;
&lt;&lt;set $d_shockSpell = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="163" name="d9y Lust Spell" tags="" position="14425,7025" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  Why not put him through the same affliction that is making the wolf&#39;s cock throb in need right now?
  ?P
&lt;&lt;/arc-only&gt;&gt;

Pulling out the pink gemstone, the wolf clutches it in his hand and looks down at Ivex.

?P
&lt;&lt;if !$d_lustSpell&gt;&gt;
  The panther catches a glimpse of the gemstone and starts shaking his head.

  ?P
  &lt;&lt;if !$d_gagged&gt;&gt;
    &quot;You can&#39;t! Don&#39;t you DARE!&quot;
  &lt;&lt;else&gt;&gt;
    /* cspell:disable-next-line */
    &quot;Yhmm cchmfgh! Dhmmf hmmgh hmmffg!!&quot;
  &lt;&lt;/if&gt;&gt;
  Ivex growls, but that does nothing to stop the wolf from pressing the glowing gemstone against the squirming panther&#39;s chest.

  ?P
  The moment it does, Ivex lets out a loud, lingering moan. Just to see its effects, Drekkar brings his other paw down to the feline&#39;s sheath. He fondles it, teasing it, and on his fingers, he can feel it actually heating up.

  ?P
  Ivex&#39;s member, which had already been straining to grow hard, clearly pushes even harder against the chastity spell, but it&#39;s hopeless. His cock cannot grow, will not grow, and the feline just moans and writhes in frustration over it. Pre-cum starts coming from his member, little by little at first, but the more the wolf keeps that gemstone pressed against his chest, the more frequent it becomes.

  ?P
  It seems like the mage doesn&#39;t enjoy his magic being used on him as much as he enjoys using it on others.

  ?P
  With no rush, the wolf keeps kneading the panther&#39;s sheath, stimulating it and helping the spell foster Ivex&#39;s frustration. The feline just writhes, his face shifting between frustration and pleasure every second as he deals with the spell&#39;s effects forcing him into a deep arousal he cannot have.

  ?P
  &lt;&lt;if !$d_gagged&gt;&gt;
    /* cspell:disable-next-line */
    &quot;Hnnngh... fuck... please...!&quot;
  &lt;&lt;else&gt;&gt;
    /* cspell:disable-next-line */
    &quot;Hnnngh... fhmmgh... plhhmmfgh...!&quot;
  &lt;&lt;/if&gt;&gt;
  Ivex whines after a short while. His hips jut up pathetically as if humping. He seems desperate to grow hard. Pre-cum leaks without ceasing from his member and, even small and forcefully contained as it is, it still pulses inside the panther&#39;s sheath. It looks as if he&#39;s ready to reach his climax, but is unable to without the proper stimulation he can&#39;t get.

  ?P
  Drekkar takes pleasure in keeping the gemstone firmly pressed against the helpless feline as he moans in that state for several minutes. It is only when the wolf&#39;s fingers are drenched in pre-cum and the panther looks like he might pass out from too much pleasure that he finally pulls the gemstone back.

  ?P
  When he does, Ivex lets out a frustrated groan, but finally seems like he starts catching his breath rather than just mindlessly moaning. The panther looks dazed. The wolf wipes his hand on the fur of Ivex&#39;s thigh, but even with the source of arousal gone, Ivex&#39;s cock remains in that state of trying so very hard to grow.

  ?P
  The wolf just snorts. The mage that looked so powerful in the tower, submitting him to that, now looks like a mewling cat under the effects of the same spell.

  ?P
  The wolf&#39;s own cock throbs, ever erect, remembering how it felt, and as it does... he only feels angry. Ivex still has much more to feel.

&lt;&lt;else&gt;&gt;
  Ivex sees it coming once more and shakes his head. He looks conflicted between wanting it or not, but he knows the effect it will have on him in his current state.

  ?P
  &lt;&lt;if !$d_gagged&gt;&gt;
    &quot;If you do that again I&#39;ll TORTURE you so much that y- AAH!&quot;
  &lt;&lt;else&gt;&gt;
    /* cspell:disable-next-line */
    &quot;Hmmfgh! Hhmmf hmgh ghhmf- HNNGHH!&quot;
  &lt;&lt;/if&gt;&gt;

  ?P
  The panther&#39;s senseless rambling is interrupted by the wolf holding the glowing gemstone against him again. This time, rather than holding it against the panther&#39;s chest... the wolf holds it right against his sheath.

  ?P
  Ivex lets out a long, loud moan. The effect is instantaneous. The wolf keeps rubbing the glowing, warm gemstone right against the panther&#39;s bulging sheath and, radiating the spell, Ivex&#39;s cock instantly suffers the waves upon waves of forced arousal.

  ?P
  Too bad it cannot grow at all.

  ?P
  Held by the wolf, the panther becomes a mewling, begging mess as the magical arousal assaults him. It does not take long at all for him to go back to that stage where he is obviously at the very edge of cumming, but unable to get past it. It looks like a mighty frustrating experience.

  ?P
  The wolf takes his sweet time lightly rubbing the glowing gemstone against Ivex&#39;s desperate sheath and trapped member, leaving him in that state for quite some time before he finally pulls it back again.

  ?P
  Hearing Ivex panting in desperate frustration like he made him pant in the past is music to the wolf&#39;s ears.
&lt;&lt;/if&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;if $d_revengeStage == 2 || $d_revengeStage == 1&gt;&gt;
    [[Continue|d9y Hold]]
  &lt;&lt;elseif $d_revengeStage == 3&gt;&gt;
    [[Continue|d9y Fucking]]
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_lustSpell = true&gt;&gt;
&lt;&lt;set $d_ivexEdges += 1&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="164" name="d9y Personal Vengeance" tags="ending" position="13575,6500" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;ending-good &quot;Punishment&quot;&gt;&gt;
  ?P
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set _randomGag = MT.pick([1, 2])&gt;&gt;
&lt;&lt;if _randomGag == 1&gt;&gt;
  &lt;&lt;set $d_lastGag = &quot;his own undergarments&quot;&gt;&gt;
&lt;&lt;elseif _randomGag == 2&gt;&gt;
  &lt;&lt;set $d_lastGag = &quot;a thick piece of rope&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;set $d_lastGag = &quot;his own undergarments&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $d_ivexEdges = 0&gt;&gt;
&lt;&lt;set $d_revengeStage = 0&gt;&gt;

The wolf, still holding Ivex up by the scruff, lifts him higher so that he can look at the unconscious feline&#39;s face. Then, without hesitation, Drekkar brings a paw up and gives the panther&#39;s muzzle a hard slap.

?P
Ivex shakes, awakening with a grunt and a mewl. The feline blinks, his feet wiggling up in the air and he looks around confused for a moment before his eyes focus on the large wolf holding him up. The sight of him trying to do something about it, only to realize that his arms are bound behind his back and his bound feet can&#39;t even touch the floor makes for quite an amusing scene.

?P
Of course, after Ivex realizes the direness of his predicament, he still has the audacity to show his teeth at the wolf.

?P
&quot;What do you think you&#39;re doing?! Unhand me! Let me go or I&#39;ll make you regret ever being born with all of my power!&quot; the panther says in a tone that &lt;b&gt;tries&lt;/b&gt; to sound intimidating. Paying attention to the feline, Drekkar can see his eyes darting back and forth across the room and floor. The wolf then picks up the pouch full of gemstones from his belt and lifts it up to the panther with a smirk.

?P
&quot;Looking for these?&quot; Drekkar asks, lightly shaking the sack to showcase the sound of the gemstones inside.

?P
Ivex looks at it for a moment... then juts forward, trying to reach for the sack even without the use of his arms. A most pitiful attempt that makes the larger wolf laugh as he simply pulls the pouch away.

?P
&quot;I was right. You really are completely powerless without your little toys, aren&#39;t you? At least out here, you are...&quot; The wolf grins and chuckles.

?P
&quot;N-no!&quot; the panther says with a small growl. &quot;You fool! When I get out of here, I&#39;m gonna make you lick my feet! Yes! You will spend the rest of your days as my foot rest and cleaner! I will make you lick them every time I g-&quot;

?P
The wolf decides to interrupt the arrogant mage&#39;s babbling with a new slap to his face. It&#39;s enough to make him whine, even though the wolf doesn&#39;t even put much strength into it.

?P
After that, he decides to just drop the panther down. He yelps again as he falls down, grunting like a cub and making effort to sit back up. He looks at the wolf, hisses, then starts pathetically trying to crawl away from the large lupine. Like a little worm wiggling on the ground.

?P
A fun sight, but...

?P
Looking down at himself, the wolf can see his cock. Because of Ivex&#39;s own magic, the red spire still throbs with insatiable need. That candle&#39;s effect has to fade at some point, but while it doesn&#39;t...

?P
The wolf looks up at the wiggling panther.

?P
&quot;You&#39;ll pay!&quot; he seethes. &quot;I swear, you&#39;ll pay! To think you&#39;d have the audacity of striking me! Of doing this! You will regret this!&quot; Ivex continues to hurl insult after insult at the wolf. Drekkar all but ignores him, instead focusing on thinking.

?P
What to do to him first?

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=actions&gt;
    &lt;li&gt;[[Strip him.|d9y Strip]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;set $d_endingVariant = &quot;punish&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="165" name="d9y Pull Out Finish" tags="" position="14625,6550" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  &lt;&lt;set $d_gagged = true&gt;&gt;
  &lt;&lt;set $d_ivexClimax = true&gt;&gt;
&lt;&lt;/arc-only&gt;&gt;

The wolf spends his time locked with the feline to play with him some more. Watching him squirm and whine turns out to be extremely therapeutic. To Drekkar, it&#39;s almost as if all the humiliation he went through in the tower didn&#39;t happen. Almost.

&lt;&lt;if $d_ivexClimax&gt;&gt;
  ?P
  Even though Ivex has managed to cum through his own chastity spell, it must have been quite unsatisfactory, because as soon as the wolf&#39;s fingers touch his sheath and tease it, the panther turns into a mewling puddle of frustration and despair again. His cock seems as eager to grow hard as always, and it doesn&#39;t take long to take him back to the edge of orgasm.

  ?P
  Playing around with the panther&#39;s sheath using his paw and a few of Ivex&#39;s spells is as fun as it was before.
&lt;&lt;/if&gt;&gt;

?P
His knot takes a long time to shrink. In fact, it barely does so, and that is also Ivex&#39;s fault for putting him through some crazy candle-based lust spell. After a while, the wolf is forced to just hold Ivex down by placing a paw on his back and pulling hard. The feline doesn&#39;t like that very much, but he doesn&#39;t get a say in it. With enough effort, the wolf&#39;s large knot finally pops out. The sight of his white seed dribbling down the back of the panther&#39;s balls also soothes the wolf&#39;s soul.

&lt;&lt;if !$d_gagged&gt;&gt;
  ?P
  &quot;You will... pay!&quot; Ivex still has the energy to mutter. &quot;I will make you suffer. I will create a spell to have a candle burning under your nose permanently, then I&#39;m going to cast thirty different chastity spells on your sheath and watch as you writhe in
  /* cspell:disable-next-line */
  desp- HNGH!&quot;

  ?P
  Ivex is interrupted by the fact that the wolf finally shoves something inside his maw to silence him. He has babbled for long enough. Drekkar does nothing but smirk watching Ivex tear up and mumble a new series of muffled complaints about having $d_lastGag shoved into his maw. The wolf uses his footpaw to make sure it is secured and pressed in quite deeply, then basks in sweet silence.
&lt;&lt;/if&gt;&gt;

?P
Wiping his hands, the wolf looks down at Ivex. Bound, gagged and without his gemstones, the once-powerful mage is nothing but a harmless kitty. It&#39;s time to fulfill the job the wolf came here to do and cash in the bounty for this dangerous mage.

?P
Drekkar steps towards him to pick him up. Ivex still squirms and complains, obviously still angry over having lost. He no longer gets a choice, though.

?P
The wolf does. He wonders if Ivex has had enough punishment or if he should add a finishing touch to his reckoning. After all, it will be a few days&#39; journey back to the Wayward Adventurers Guild. Maybe adding something to... &lt;b&gt;entertain&lt;/b&gt; Ivex in the meantime would be fun as well.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Add a punishing touch for the journey.|d9y Pull Out Punishment Finish]]&lt;/li&gt;
    &lt;li&gt;[[Take him back as he is and collect the bounty.|d9y Bounty Collection]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="166" name="d9y Pull Out Punishment Finish" tags="" position="14750,6550" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  Yeah... Ivex has certainly done enough to deserve an extra.
  ?P
&lt;&lt;/arc-only&gt;&gt;

Drekkar decides that, since Ivex&#39;s arrogance seems to know no bounds, he can deal with a little extra punishment during the trip back.

?P
With a smirk, the wolf looks down at Ivex, who in turn glares daggers up at him, but is unable to say anything gagged as he is. Not breaking eye contact, the wolf shoves his paw into the gem pouch again and... pulls out the pink, lust spell gemstone.

?P
/* cspell:disable-next-line */
&quot;HMMGH! Hmmghf hmmf!&quot;
Ivex immediately tries to say, shaking his head.

?P
Drekkar ignores him. It takes little effort for the wolf to find an adequate piece of string and, with it and the gemstone in hand, he kneels next to the squirming feline. The wolf holds Ivex down on his back, forcing his legs to spread so he can work.

?P
Ivex fights him at first, but the wolf&#39;s large paw grabs hold of his furry balls and gives them a squeeze. It&#39;s enough to make the panther groan in pain through the gag and daze him for long enough to let the wolf work.

?P
Clutching the gemstone in hand, the wolf activates it. He presses the warm gemstone against Ivex&#39;s balls and, with the piece of string... ties the gemstone there, wrapping the string around the base of the feline&#39;s nuts and keeping the warm, lust-inducing gemstone tied against the panther&#39;s balls.

?P
It&#39;s not until he starts feeling its effects again that Ivex moans and looks down. Realizing what was done, the panther shakes his head and yells a hundred different muffled complaints about it, but the wolf simply stands up and smirks.

?P
The panther moans through his gag as the spell works on him continuously. His cock is quick to press hard against the invisible barrier surrounding his sheath and, soon enough, it is leaking all over again. That is how it is staying, though.

?P
Leaving Ivex squirming on the floor, the wolf then prepares to grab his stuff to leave. It will be a long journey for the mage. When Drekkar looks down, his own cock is still pulsing and dribbling as well. He does not know for how long Ivex&#39;s spell will keep affecting him, but, if it gets too bad...

?P
Drekkar just smiles. He has something he can fuck on the way if he needs to.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|d9y Bounty Collection]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="167" name="d9y Spell" tags="" position="14075,6900" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  Glancing at the pouch full of Ivex&#39;s own spells, the wolf knows that&#39;s a good choice.
  ?P
&lt;&lt;/arc-only&gt;&gt;

&lt;&lt;if !$d_spellOptions&gt;&gt;
  Yes. Ivex has made so many spells with the sole intent of using them on people for his own perversion. Why not use some of these against him?

  ?P
  The wolf smirks down at the panther and lets go of him. The mage stares daggers up at the wolf but is left panting and looking flustered. His sheath is still full and his cock still fights to grow past it. The frustration of it is plain in Ivex&#39;s face and he takes that moment of reprieve to recover a little from it.

  ?P
  In the meantime, the wolf pulls out the pouch filled with his gemstones and brings it up. The moment Ivex sees it, his eyes narrow.

  ?P
  &lt;&lt;if !$d_gagged&gt;&gt;
    &quot;What are you doing with that, you mongrel?!&quot; he asks between his raspy breathing.
  &lt;&lt;else&gt;&gt;
    /* cspell:disable-next-line */
    &quot;Whmmgh hmm yyhm ddhmff?!&quot;
    he tries to ask between his raspy breathing.
  &lt;&lt;/if&gt;&gt;

  ?P
  The wolf all but ignores it. He opens the pouch wide and looks down at it. Shoving his paw inside, Drekkar goes through a few of the gemstones, clutching them to get a read of what they do. After a little while, he looks down at the panther and smirks.

  ?P
  There are a few that could definitely be used against Ivex right here...

  &lt;&lt;set $d_spellOptions = true&gt;&gt;

&lt;&lt;else&gt;&gt;
  Bringing the spell pouch up, the wolf shoves his paw into it to grab one.

  ?P
  Which spell would be best to use right now?
&lt;&lt;/if&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Use a Lust spell on him.|d9y Lust Spell]]&lt;/li&gt;
    &lt;&lt;if $xd_InterrogationFreeze&gt;&gt;
      &lt;li&gt;[[ [Unlocked: Freeze] Use an ice spell on him.|d9y Ice Spell]]&lt;/li&gt;
    &lt;&lt;else&gt;&gt;
      &lt;li&gt;&lt;span class=&quot;disabled&quot;&gt;[Locked: Interrogation - ???] ???&lt;/span&gt;&lt;/li&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if $xd_InterrogationShock&gt;&gt;
      &lt;li&gt;[[ [Unlocked: Shock] Use an lightning spell on him.|d9y Lightning Spell]]&lt;/li&gt;
    &lt;&lt;else&gt;&gt;
      &lt;li&gt;&lt;span class=&quot;disabled&quot;&gt;[Locked: Interrogation - ???] ???&lt;/span&gt;&lt;/li&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if $d_revengeStage == 2 || $d_revengeStage == 1&gt;&gt;
      &lt;li&gt;[[On second thought, maybe no spells just yet...|d9y Hold]]&lt;/li&gt;
    &lt;&lt;elseif $d_revengeStage == 3&gt;&gt;
      &lt;li&gt;[[On second thought, maybe no spells just yet...|d9y Fucking]]&lt;/li&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="168" name="d9y Strip" tags="" position="13700,6500" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  With a good look at the mage, the wolf decides to do to him the same thing Ivex has done when he was the one bound.
  ?P
&lt;&lt;/arc-only&gt;&gt;

&lt;&lt;if !$d_stage0Clear&gt;&gt;
  Memories of the perverted panther getting rid of his clothes back in the tower come to the wolf&#39;s mind. Narrowing his eyes towards the feline, he reaches up to him.

  ?P
  &quot;What?! Stop! Let go of me! Let go of me right NOW!&quot; Ivex demands as wiggles in the wolf&#39;s hold. Still, it takes no effort for Drekkar to lift the feline up by his scruff again.

  ?P
  The large wolf is not gentle. Using his own paw and sheer strength, he takes hold of Ivex&#39;s shirt around the neck and &lt;b&gt;pulls&lt;/b&gt;.

  ?P
  Ivex whines as the fabric rips. His skinny chest is exposed to the elements and, with a few more tugs and tears, soon the rags of what was once his shirt fall down to the floor.

  ?P
  Then, both the panther and the wolf look down his pants, the only thing left covering his body.

  ?P
  Their eyes meet, and Drekkar smirks.

  ?P
  &quot;No! NO! Don&#39;t you dare! Don&#39;t-!&quot; Ivex growls, starting to wiggle in his hold again, but the wolf ignores it.

  ?P
  With a pull just as strong, Drekkar grabs the waistband of Ivex&#39;s pants, and it takes very little effort for the big, strong wolf to tear the fabric apart. The bound panther continues to struggle in the air, and when his pants fall, he is left with nothing but a small, worn-looking cloth undergarment wrapped around his crotch. The feline hisses, but for the wolf, it takes but one finger to snap the waistband of Ivex&#39;s last piece of modesty and let it fall down to the floor as well.

  ?P
  &quot;I will make you SUFFER!&quot; the panther yells. Still held up in the air, Ivex presses his legs together in a feeble attempt to hide his modesty. It looks like he doesn&#39;t enjoy it that much when it&#39;s done to him and not to others.

  ?P
  Nonchalantly, the wolf drops the panther back down, letting him fall and taking a good look at his naked form. Ivex rolls on the floor trying to get rid of the ropes keeping him bound and, now naked as he is, the wolf can finally get a good look at his body.

  ?P
  He is lean indeed, not a single muscle adorning his arms, but his body is still... curvy enough. Perhaps it is the arousal speaking, but looking down at the panther&#39;s round ass as he struggles back and forth makes the wolf&#39;s cock throb again. His member, perpetually stuck in an erect state, grows even harder as lustful thoughts fill up his mind...

  ?P
  Still, Drekkar shakes his head and shakes them off. They are still very much there, but there will be plenty of time for that if he decides to go for it. For now, this is about punishing the panther...

  ?P
  &quot;You BRUTE! You brainless, dumb brute! You can&#39;t even fathom what you&#39;re doing! I will make you EAT the clothes you ruined when I get out of here!&quot; Ivex continues to prattle.

  ?P
  On one hand, fucking him would be a fitting punishment. Hell knows that the wolf&#39;s cock wants that... On the other hand, there are other things he could also do to him that would definitely be fun.

  ?P
  Ivex is not aware of the chastity spell yet either. Perhaps giving him a taste of his own medicine in that regard too would be better...

  ?P
  What to do to him next?

  &lt;&lt;set $d_stage0Clear = true&gt;&gt;

&lt;&lt;else&gt;&gt;
  Now properly gagged, the panther is reduced to angrily spitting out muffled complaints that the wolf can&#39;t even make out.

  ?P
  The sight of the once-powerful mage bound on the floor, squirming and hissing like an angry kitten amuses the naked wolf.

  ?P
  Still, the show must go on. Kneeling next to the panther, the wolf drags him closer.
&lt;&lt;/if&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=&quot;actions&quot;&gt;
    &lt;li&gt;[[Show him.|d9y Fondle]]&lt;/li&gt;
    &lt;&lt;if !$d_gagged&gt;&gt;
      &lt;li&gt;[[Gag him.|d9y Gag]]&lt;/li&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="169" name="d9y The End" tags="roam-stop" position="15325,6450" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;switch $d_endingVariant&gt;&gt;
&lt;&lt;case enthrall&gt;&gt;
  &lt;&lt;ending-good &quot;A New Servant&quot; xd_IvexEnthrallment&gt;&gt;
&lt;&lt;case extract&gt;&gt;
  &lt;&lt;ending-good &quot;Energy Supply&quot; xd_IvexExtraction&gt;&gt;
&lt;&lt;case punish&gt;&gt;
  &lt;&lt;ending-good &quot;Punishment&quot; xd_IvexPunishment&gt;&gt;
&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`unknown ending variant ${$d_endingVariant}`)&gt;&gt;
&lt;&lt;/switch&gt;&gt;

This is it. You&#39;ve escaped the Mage&#39;s Tower and (maybe) given the mage some rightful reckoning for all he&#39;s done! Good job!

?P
If you haven&#39;t yet, do check out the
&lt;&lt;mta &quot;g1m Archives&quot;&gt;&gt;Archives&lt;&lt;/mta&gt;&gt;,
where you can read the endings you have unlocked so far
and see hints on how to find different ones.
Try to see them all and their variations!
A lot of things can change based on your choices up until the end.

?P
That&#39;s not all, though. As an author, I&#39;ve written literally hundreds of short stories including all sorts of themes. If you enjoyed what you read here but haven&#39;t checked out my other stuff yet, there&#39;s a good chance you&#39;ll like them! You can read them on my [[FurAffinity page|https://www.furaffinity.net/user/sleth/]], [[SoFurry page|https://sleth.sofurry.com/]], or get links to them and a handy search tool in my [[website|http://www.slethstories.com/]].

?P
If you&#39;ve enjoyed this kinky experiment of an interactive story, I also urge you to check out my &lt;span&gt;&lt;img src=&quot;images/pa_logo.png&quot; height=&quot;20&quot;&gt;[[Patreon|https://www.patreon.com/sleth]]&lt;/span&gt; as well , where I&#39;ll be working on a bigger scale, more story-based interactive story next. Even though this new one will have a larger focus on story rather than kink, be assured that there&#39;ll be plenty of spicy scenes as well! Be on the lookout for that! That&#39;s not all, though. Through Patreon, my amazing supporters have kept my passion for writing this sort of thing going. By joining it, you&#39;re supporting and getting first dibs on stories and games like this one!

?P
In fact... did you know that this interactive story as a whole was shaped up by my patrons themselves ? Yep. Through a series of polls, they chose a highly magical setting for the story, as well as kink focus in bondage, CBT, mind control and chastity from a list of possible kinks. It is based on those results that I molded this story into what it became today!

?P
Before you continue on, I also urge you to give a quick look at the
&lt;&lt;mta &quot;g1m Credits&quot;&gt;&gt;Credits&lt;&lt;/mta&gt;&gt; !

?P
From here on, you can...

?P
&lt;ul class=&quot;actions&quot;&gt;
  &lt;&lt;checkpoint-action d_checkpoint2&gt;&gt;
  &lt;&lt;checkpoint-action d_checkpoint1&gt;&gt;
  ?restartAction
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="170" name="g0boot Diag" tags="inclusion" position="200,400" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;

#mt-diag {
  background-color: #330;
  border: 1px solid #eaf54c;
  color: #eaf54c;
  padding: 0.5em;
}

&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

const messages = [];

MT.diag = (...args) =&gt; {
  console.log(args);
  messages.push(args.map(a =&gt; String(a)).join(&quot; &quot;));
};

function diagReport() {
  $(&quot;#mt-diag&quot;).remove();
  if (!messages.length) return;

  const div = $(&quot;&lt;div id=mt-diag&gt;&quot;).appendTo(&quot;#story&quot;);
  for (const msg of messages) {
    $(&quot;&lt;div&gt;&quot;).text(msg).appendTo(div);
  }
  messages.length = 0;
}

function diagInit() {
  $(document).on(&quot;:passageend&quot;, diagReport);
}

diagInit();

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="171" name="g0boot Enums" tags="inclusion" position="325,400" size="100,100">&lt;&lt;script&gt;&gt;

/** Map of enumType: string =&gt; enumValueNames: string[] */
MT.enums = {};

/** Map of varName: string =&gt; enumType: string */
MT.enumVars = {};

/**
 * Define an enum. Value names are added as window globals,
 * so that typo-ing an enum value will throw an error.
 */
function defineEnum(enumType, valueNames) {
  MT.enums[enumType] = valueNames;
  valueNames.forEach((n, i) =&gt; window[n] = i);
};

/** Declare `varName` to be an enum of `enumType` */
function declareVarEnum(varName, enumType) {
  if (!MT.enums[enumType]) throw new Error(`No enum named ${enumType}`);
  MT.enumVars[varName] = enumType;
};

/**
 * Returns the symbolic name of `value`` for an enum.
 * `name` is either a var name or an enum type.
 */
MT.enumSymbol = (name, value) =&gt; {
  const en = MT.enums[MT.enumVars[name] || name];
  return en == null ? value : (en[value] || value);
};

/* Nero magic phase. */
defineEnum(&quot;MagicPhase&quot;, [
  &quot;MP_beforeCast&quot;,
  &quot;MP_triedMagic&quot;,
  &quot;MP_wantDevice&quot;,
  &quot;MP_wantName&quot;,
  &quot;MP_wantTouch&quot;,
  &quot;MP_wantPass&quot;,
  &quot;MP_onHold&quot;,
  &quot;MP_exitingHold&quot;,
  &quot;MP_contact&quot;,
  &quot;MP_lockedOut&quot;,
  &quot;MP_drained&quot;, // had mageSight, but didn&#39;t connect to Sprite
  &quot;MP_tapLost&quot;,  // did connect to Sprite
]);

declareVarEnum(&quot;n_magicPhase&quot;, &quot;MagicPhase&quot;);
declareVarEnum(&quot;n_magicPhaseReached&quot;, &quot;MagicPhase&quot;);

/*
 * Places where Ivex has asked a question, and may be near enough to hear
 * Nero trying to talk to the Sprite.
 */
defineEnum(&quot;IvexContext&quot;, [
  &quot;IC_unknown&quot;,
  &quot;IC_gone&quot;,
  &quot;IC_distant&quot;,
  &quot;IC_explainTheft&quot;, // recruit &gt; Ivex Trap
  &quot;IC_lickPaw&quot;, // subby &gt; Ivex Dominant
  &quot;IC_begForMe&quot;, // subby &gt; Ivex Cruel
  &quot;IC_comfortable&quot;, // candle lit &gt; Comfort Check
  &quot;IC_whoSentYou&quot;, // candle horny &gt; Light Squeeze, Heavy Squeeze
]);

declareVarEnum(&quot;n_ivexContext&quot;, &quot;IvexContext&quot;);

// This should run before any other Nero :passagestart
$(document).on(&quot;:passagestart&quot;, () =&gt; {
  // Initialize enums that are generally expected to be non-null
  MT.untraced(() =&gt; {
    const V = State.variables;
    V.n_magicPhase != null || (V.n_magicPhase = 0);
    V.n_magicPhaseReached != null || (V.n_magicPhaseReached = 0);
    V.n_ivexContext != null || (V.n_ivexContext = 0);
  });
});

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="172" name="g0boot Metadata" tags="inclusion" position="450,400" size="100,100">&lt;&lt;script&gt;&gt;
/*----------------
 * This module manages game metadata.
 * It&#39;s mostly a wrapper around SugarCube&#39;s metadata, with:
 * - &quot;clear metadata&quot; that preserves keys marked PRESERVED.
 * - saving and loading keys marked SAVED to saved games.
 * - copying metadata to State.variables for easy access and debug tooling.
 *
 * Note, the values copied to State.variables are writable,
 * but writing them *does not* write to metadata.
 * Persisting a value needs to use `MT.mdSet`.
 */

// metadata types
const UNSAVED = 1;
const SAVED = 2;
const PRESERVED = 3;

/** metadata key -&gt; metadata type. */
const knownKeys = {};

/** If `key` is not known, reports a warning and returns true. */
function warnUnknownKey(key) {
  if (!(key in knownKeys)) {
    MT.diag(`Warning: unknown metadata key ${key}`);
    return true;
  }
  return false;
}

/** If `key` is already known, reports a warning and returns true. */
function warnKnownKey(key) {
  if (key in knownKeys) {
    MT.diag(`Warning: metadata key ${key} already exists.`);
    return true;
  }
  return false;
}

/**
 * Defines `key` to be UNSAVED metadata, which means:
 * - it persists across game resets.
 * - it doesn&#39;t get stored in saved games.
 * - it gets deleted by &quot;clear metadata&quot;.
*/
MT.mdDefUnsaved = (key) =&gt; {
  if (warnKnownKey(key)) return;
  knownKeys[key] = UNSAVED;
};

/**
 * Defines `key` to be SAVED metadata, which means;
 * - it persists across game resets.
 * - it gets stored in saved games.
 * - loading a saved game will set its value from the saved game,
 *   but only if it isn&#39;t already set.
 * - it gets deleted by &quot;clear metadata&quot;.
 */
MT.mdDefSaved = (key) =&gt; {
  if (warnKnownKey(key)) return;
  knownKeys[key] = SAVED;
};

/**
 * Defines `key` to be PRESERVED metadata, which means:
 * - it persists across game resets.
 * - it doesn&#39;t get stored in saved games.
 * - it doesn&#39;t get deleted by &quot;clear metadata&quot;.
 */
MT.mdDefPreserved = (key) =&gt; {
  if (warnKnownKey(key)) return;
  knownKeys[key] = PRESERVED;
};

/** True if `key` is a known metadata key. */
MT.mdKnown = (key) =&gt; knownKeys[key] != null;

/**
 * Returns the value of metadata `key`.
 *
 * Note, each call will always decompress and deserialize
 * all metadata from localStorage, so this is somewhat expensive.
 *
 * If you don&#39;t need the authoritative value, you can read the
 * copy in State.variables (which might be out-of-date if the
 * value was changed in another tab).
 *
 * If you want more than a few authoritative values at a time,
 * use `MT.mdEntries` or `MT.mdRecord`.
 */
MT.mdUncachedGet = (key) =&gt; {
  warnUnknownKey(key);
  return State.metadata.get(key);
};

/**
 * Sets metadata `key` to `value`. Any false-y value will delete the key.
 *
 * Note, each call will always decompress and deserialize
 * all metadata from localStorage, then reserialize and recompress
 * back to localStorage. So this is very expensive, and SugarCube
 * doesn&#39;t give us a way to batch multiple set operations
 * (other than bypassing SugarCube and doing it ourselves.)
 */
MT.mdSet = (key, value) =&gt; {
  warnUnknownKey(key);
  if (value) {
    State.metadata.set(key, value);
    State.variables[key] = value;
  } else {
    State.metadata.delete(key);
    delete State.variables[key];
  }
};

/** Returns an array of all [key, value] metadata entries. */
MT.mdEntries = () =&gt; {
  return State.metadata.entries() || [];
};

/** Returns an object-map of all metadata keys and values. */
MT.mdRecord = () =&gt; {
  return Object.fromEntries(MT.mdEntries());
};

/** Deletes all metadata, except for PRESERVED keys and unknown keys. */
MT.mdClear = () =&gt; {
  const preserve = [];
  const entries = State.metadata.entries() || [];
  for (const [key, value] of entries) {
    warnUnknownKey(key);
    if (knownKeys[key] === PRESERVED) {
      preserve.push([key, value]);
    }
  }
  State.metadata.clear();
  for (const [key, value] of preserve) {
    State.metadata.set(key, value);
  }
  copyToVars();
};

/** Merges metadata from `save` into current metadata. */
function readFromSave(save) {
  if (!save.metadata) return;
  const current = MT.mdRecord();
  for (const [key, value] of Object.entries(save.metadata)) {
    if (value &amp;&amp; knownKeys[key] === SAVED &amp;&amp; !current[key]) {
      State.metadata.set(key, value);
      // XXX announce the unlock
    }
  }
  copyToVars();
}

/** Adds current metadata to `save`. */
function writeToSave(save) {
  save.metadata ||= {};
  const entries = State.metadata.entries() || [];
  for (const [key, value] of entries) {
    if (knownKeys[key] === SAVED) {
      save.metadata[key] = value;
    }
  }
}

/** Copies current metadata to State.variables */
function copyToVars() {
  const U = MT.untracedVars ? MT.untracedVars() : State.variables;
  const rec = MT.mdRecord();
  for (const key of Object.keys(rec)) {
    U[key] = rec[key];
  }
  // delete unset known keys
  for (const key of Object.keys(knownKeys)) {
    if (!rec[key]) {
      delete U[key];
    }
  }
};

function mdInit() {
  Save.onLoad.add(readFromSave);
  Save.onSave.add(writeToSave);
  $(document).on(&quot;:passageinit&quot;, copyToVars);
}

mdInit();
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="173" name="g0init Archives" tags="inclusion" position="200,600" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;

.arc-disabled {
  opacity: 0.4;
  pointer-events: none;
}
.arc-picklocked {
  opacity: 0.6;
  text-decoration: underline;
  text-decoration-style: dotted;
  text-decoration-color: #990;
}
.arc-title {
  font-weight: bold;
}
.arc-select {
  margin-left: 1.5rem;
}
.arc-select label {
  margin-left: 1em;
  white-space: nowrap;
}
.arc-select input[type=radio] {
  margin-right: 0.4em;
}
.arc-hint {
  font-size: small;
  font-style: italic;
  margin-left: 1.5rem;
}

.ending-bad {
  color: #f44;
  font-style: italic;
  font-weight: bold;
}
.ending-challenge {
  color: #f44;
  font-style: italic;
  font-weight: bold;
}
.ending-good {
  color: #6e6;
  font-style: italic;
  font-weight: bold;
}

&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

/**
 * Create a scratch state with g_isArchive === true,
 * evaluate script, then render passage to dest.
 */
MT.arcRender = (dest, passage, script) =&gt; {
  MT.untraced(() =&gt; {
    const text = Story.get(passage).text;
    // we can set the variables obj, but we can&#39;t set the temporaries obj
    const savedVars = State.active.variables;
    const savedTemp = Object.entries(State.temporary);
    try {
      State.active.variables = { g_isArchive: true };
      State.clearTemporary();
      if (script != null) {
        $(dest).wiki(`&lt;&lt;run ${script}&gt;&gt;`);
      }
      $(dest).wiki(text);
    } finally {
      State.active.variables = savedVars;
      State.clearTemporary();
      for (const [k, v] of savedTemp) {
        State.temporary[k] = v;
      }
    }
  });
};

/**
 * &lt;&lt;arc-only&gt;&gt;...&lt;&lt;/arc-only&gt;&gt;
 * Emit body only when rendering archive text.
 */
Macro.add(&quot;arc-only&quot;, {
  tags: [],
  handler: function() {
    const V = State.variables;
    if (V.g_isArchive) {
      $(this.output).wiki(this.payload[0].contents);
    }
  }
});

/**
 * &lt;&lt;arc-skip&gt;&gt;...&lt;&lt;/arc-skip&gt;&gt;
 * Emit body only when *not* rendering archive text.
 */
Macro.add(&quot;arc-skip&quot;, {
  tags: [],
  handler: function() {
    const V = State.variables;
    const mkp = V.g_isArchive ? &quot;&quot; : this.payload[0].contents;
    // this will add debug markers around the output
    $(this.output).wiki(mkp);
  }
});

/**
 * &lt;&lt;arc-include passage [script]&gt;&gt;
 * Create a scratch state with g_isArchive true,
 * evaluate the script, and render passage.
 */
Macro.add(&quot;arc-include&quot;, {
  handler: function() {
    const [link, script] = this.args;
    const passage = link.isLink ? link.link : String(link);
    MT.arcRender(this.output, passage, script);
  }
});

/**
 * &lt;&lt;arc-select choiceVar &quot;Variant name:&quot;&gt;&gt;
 * &lt;&lt;arc-option radioValue &quot;Option text&quot; enabled&gt;&gt;
 *    hint text
 * &lt;&lt;/arc-select&gt;&gt;
 * 
 * Emit a radio selector for a variant, showing all the arc-options.
 * - choiceVar remembers the player&#39;s last selection.
 * - radioValue is the value assigned to choiceVarName.
 * - enabled is a boolean.
 *   - true means the variant is selectable.
 *   - false means the variant is disabled, and the hint is shown.
 */
Macro.add(&quot;arc-select&quot;, {
  tags: [&quot;arc-option&quot;],
  handler: function() {
    if (this.args.length !== 2) {
      throw new Error(&quot;expected arc-select args: varname label&quot;);
    }
    const [varname, label] = this.args;
    const V = State.variables;
    const T = State.temporary;

    const outer = $(&quot;&lt;div class=arc-select&gt;&quot;).appendTo(this.output);
    outer.append(label);

    const choices = this.payload.slice(1);

    // If value doesn&#39;t match an enabled choice, unset it.
    // (should only happen when debugging)
    let matched = false;
    for (const ch of choices) {
      if (V[varname] === String(ch.args[0]) &amp;&amp; ch.args[2]) {
        matched = true;
        break;
      }
    }
    if (!matched &amp;&amp; !T.lockpick) {
      MT.mdSet(varname, null);
    }

    // If value is not set, set it to the first enabled choice.
    if (V[varname] == null || V[varname] === &quot;&quot;) {
      for (const ch of choices) {
        if (ch.args[2] || T.lockpick) {
          MT.mdSet(varname, String(ch.args[0]));
          break;
        }
      }
    }

    let hint = null;
    for (const ch of choices) {
      if (ch.args.length !== 3) {
        throw new Error(&quot;expected choice args: value text boolean&quot;);
      }
      const value = String(ch.args[0]);
      const text = ch.args[1];
      const enabled = ch.args[2];
      const unlocked = enabled || T.lockpick;
      const label = $(&quot;&lt;label&gt;&quot;).appendTo(outer);
      label.toggleClass(&quot;arc-picklocked&quot;, unlocked &amp;&amp; !enabled);
      label.wiki(`&lt;&lt;radiobutton &quot;$${varname}&quot; &quot;${value}&quot; autocheck&gt;&gt;`);
      const input = label.find(&quot;input&quot;);
      input.on(&quot;change&quot;, function() {
        if (this.checked) {
          MT.mdSet(varname, value);
        }
      });
      label.append(text);
      if (!unlocked) {
        if (hint == null) hint = `(${text}) ${ch.contents}`;
        label.addClass(&quot;arc-disabled&quot;);
        input.attr(&quot;disabled&quot;, &quot;disabled&quot;);
      }
    }
    if (hint != null) {
      const div = $(&quot;&lt;div class=arc-hint&gt;&quot;).wiki(hint).appendTo(outer);
    }
  }
});

/**
 * &lt;&lt;arc-ending unlocked twineLink [disabledText [setter]]&gt;&gt;
 *   hint text
 * &lt;&lt;arc-variants&gt;&gt;
 *   variant selectors
 * &lt;&lt;/arc-ending&gt;&gt;
 * 
 * Emits a link to an archive passage.
 * - text comes from the twineLink.
 * - unlocked is a boolean
 *   - false means link is disabled, and hint text is shown
 *   - true means link is enabled, and variant selectors are shown
 */
Macro.add(&quot;arc-ending&quot;, {
  tags: [&quot;arc-variants&quot;],
  handler: function() {
    if (this.args.length &lt; 2 || this.args.length &gt; 4) {
      throw new Error(
        &quot;expected arc-endings args: boolean link [disabledText [setter]]&quot;);
    }
    let [enabled, link, offText, setter] = this.args;
    const T = State.temporary;
    const unlocked = enabled || T.lockpick;
    const isLink = typeof link === &quot;object&quot; &amp;&amp; link.isLink;
    offText = offText || (isLink ? link.text : link);
    setter = setter || &quot;&quot;;

    const outer = $(&quot;&lt;div class=arc-ending&gt;&quot;).appendTo(this.output);
    if (!unlocked) {
      $(&#39;&lt;div class=&quot;arc-title arc-disabled&quot;&gt;&#39;)
        .wiki(offText).appendTo(outer);
      $(&#39;&lt;div class=arc-hint&gt;&#39;)
        .wiki(this.payload[0].contents).appendTo(outer);
      return;
    }
    
    const title = $(&quot;&lt;div class=arc-title&gt;&quot;).appendTo(outer);
    title.toggleClass(&quot;arc-picklocked&quot;, !enabled);
    if (isLink) {
      title.wiki(`[\[${link.text}|${link.link}][${setter}]]`);
    } else {
      title.wiki(`[\[${link}][${setter}]]`);
    }
    if (this.payload[1] != null) {
      outer.wiki(this.payload[1].contents);
    }
  }
});

/**
 * &lt;&lt;arc-barbs choiceVar&gt;&gt;
 * 
 * Emit a radio selector for smooth/barbs choice.
 * - choiceVar remembers player&#39;s selection.
 */
Macro.add(&quot;arc-barbs&quot;, {
  handler: function() {
    const [varname] = this.args;
    $(this.output).wiki(
      `&lt;&lt;arc-select ${varname} &quot;Variant:&quot;&gt;&gt;` +
      `  &lt;&lt;arc-option n &quot;Smooth&quot; true&gt;&gt;` +
      `  &lt;&lt;arc-option y &quot;Barbs&quot; true&gt;&gt;` +
      `&lt;&lt;/arc-select&gt;&gt;`
    );
  }
});

/**
 * &lt;&lt;arc-set-barbs varName&gt;&gt;
 * At an ending, set the default for smooth/barbs choice.
 */
Macro.add(&quot;arc-set-barbs&quot;, {
  handler: function() {
    const [vname] = this.args;
    const V = State.variables;
    if (V[vname] == null) {
      MT.mdSet(vname, V[&quot;n_barbs&quot;] ? &quot;y&quot; : &quot;n&quot;);
    }
  }
});

/**
 * &lt;&lt;ending-bad text [metaVar]&gt;&gt;
 * Announce a bad ending.
 * If metaVar is specified and value is false,
 * set it to true and announce the ending is unlocked.
 */
Macro.add(&quot;ending-bad&quot;, {
  handler: function() {
    const [text, metaVar] = this.args;
    emitEnding(&quot;bad&quot;, metaVar, `Bad Ending: ${text}`, this.output);
  }
});

/**
 * &lt;&lt;ending-challenge text [metaVar]&gt;&gt;
 * Announce a challenge ending.
 * If metaVar is specified and value is false,
 * set it to true and announce the ending is unlocked.
 */
Macro.add(&quot;ending-challenge&quot;, {
  handler: function() {
    const [text, metaVar] = this.args;
    emitEnding(&quot;challenge&quot;, metaVar, `Challenge Ending: ${text}`, this.output);
  }
});

/**
 * &lt;&lt;ending-good text [metaVar]&gt;&gt;
 * Announce a good ending.
 * If metaVar is specified and value is false,
 * set it to true and announce the ending is unlocked.
 */
Macro.add(&quot;ending-good&quot;, {
  handler: function() {
    const [text, vname] = this.args;
    emitEnding(&quot;good&quot;, metaVar, `Ending: ${text}`, this.output);
  }
});

function emitEnding(type, metaVar, text, output) {
  if (metaVar == null || State.variables[metaVar]) {
    $(output).append(`&lt;span class=&quot;ending-${type}&quot;&gt;${text}&lt;/span&gt;`);
  } else {
    $(output).append(
      `&lt;span class=&quot;ending-${type}&quot;&gt;`
      + text
      + ` &lt;meta-text&gt;is now unlocked in the Archives.&lt;/meta-text&gt;`
      + `&lt;/span&gt;`);
      MT.mdSet(metaVar, true);
  }
}


/** Returns a Set of unlocked keys. */
MT.unlockedSet = () =&gt; {
  const entries = MT.mdEntries();
  const truthy = entries.filter(([k, v]) =&gt; v).map(([k, v]) =&gt; k);
  return new Set(truthy);
};

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="174" name="g0init Arousal Bar" tags="inclusion" position="325,600" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;

.arousal-bar, .arousal-bg {
  border-radius: 10px;
  height: 15px;
}

.arousal-bg {
  background-color: #111;
  background-image:
    linear-gradient(to right, rgba(68, 68, 68, 0.5), rgba(34, 34, 34, 0.5) 5px),
    linear-gradient(to bottom, rgba(68, 68, 68, 0.5), rgba(0, 0, 0, 0) 5px),
    linear-gradient(to left, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0) 5px),
    linear-gradient(to top, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0) 5px);
  position: relative;
  width: 50%;
  z-index: 10;
}

.arousal-bar {
  background-color: transparent;
  background-image:
    linear-gradient(to left, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0) 5px),
    linear-gradient(to top, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0) 5px),
    linear-gradient(to right, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0) 5px),
    linear-gradient(to bottom, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0) 5px),
    radial-gradient( circle at bottom right, #a1001e, #a1001e 60% );
  bottom: 0;
  box-shadow: 0 0 0 0 rgba(0, 0, 0, 1);
  left: 0;
  position: absolute;
  transition: width ease 1s, background-color ease 1s;
  z-index: 20;
}

.arousal-weak {
  animation: pulse 1.5s infinite;
}

.arousal-strong {
  animation: strong-pulse 1.3s infinite;
}

.arousal-max {
  animation: strong-pulse 1.0s infinite;
}

@keyframes pulse {
  0% {
    box-shadow: 0 0 0 10px rgba(0, 0, 0, 0);
    transform: scale(1);
    transform-origin: left;
  }
  20% {
    box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
    transform: scale(1.02, 1.1);
    transform-origin: left;
  }
  100% {
    box-shadow: 0 0 0 10px rgba(0, 0, 0, 0);
    transform: scale(1);
    transform-origin: left;
  }
}

@keyframes strong-pulse {
  0% {
    box-shadow: 0 0 0 10px rgba(0, 0, 0, 0);
    transform: scale(1);
    transform-origin: left;
  }
  10% {
    box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
    transform: scale(1.05, 1.3);
    transform-origin: left;
  }
  100% {
    box-shadow: 0 0 0 10px rgba(0, 0, 0, 0);
    transform: scale(1);
    transform-origin: left;
  }
}

&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

/**
 * &lt;&lt;arousal-bar $prev $cur $pulse&gt;&gt;
 * 
 * Show an arousal bar that animates from $prev to $cur, out of 100.
 * $pulse can be &quot;weak&quot;, &quot;strong&quot;, or &quot;max&quot;.
 */
Macro.add(&quot;arousal-bar&quot;, {
  handler: function() {
    const [prev, cur, pulse] = this.args;
    const outer = $(`&lt;div class=arousal-bg&gt;`).appendTo(this.output);
    const bar = $(`&lt;div class=arousal-bar&gt;`).appendTo(outer);
    bar.addClass(`arousal-${pulse}`);
    if (State.temporary.isTranscript) {
      bar.css({ width: cur + &quot;%&quot;});
    } else {
      bar.css({ width: prev + &quot;%&quot; });
      setTimeout(() =&gt; bar.css({ width: cur + &quot;%&quot;}), 200);
    }
  }
});

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="175" name="g0init Checkpoint" tags="inclusion" position="450,975" size="100,100">&lt;&lt;script&gt;&gt;

/**
 * &lt;&lt;checkpoint-save varName description&gt;&gt;
 * Store current state to varName, and announce the checkpoint.
 */
Macro.add(&quot;checkpoint-save&quot;, {
  handler: function() {
    const [varName, description] = this.args;
    let mkp = `&lt;meta-text&gt;Checkpoint: ${description}&lt;/meta-text&gt;`;
    mkp += `?P`;
    $(this.output).wiki(mkp);
    MT.untraced(() =&gt; {
      delete State.variables[varName];
      const save = State.marshalForSave();
      if (!save.delta) {
        save.delta = State.deltaEncode(save.history);
        delete save.history;
      }
      State.variables[varName] = JSON.stringify({ description, save });
    });
  }
});

/**
 * &lt;&lt;checkpoint-action varName&gt;&gt;
 * Emits an action link that returns to state stored in varName.
 */
Macro.add(&quot;checkpoint-action&quot;, {
  handler: function() {
    const [varName] = this.args;
    MT.untraced(() =&gt; {
      const json = State.variables[varName];
      if (!json) return;
      const obj = JSON.parse(json);
      let mkp = `&lt;li&gt;`;
      mkp += `&lt;&lt;link &quot;Try again from Checkpoint: ${obj.description}.&quot;&gt;&gt;`;
      mkp += `&lt;&lt;checkpoint-load ${varName}&gt;&gt;`;
      mkp += `&lt;&lt;/link&gt;&gt;`;
      mkp += `&lt;/li&gt;`;
      $(this.output).wiki(mkp);
    });
  }
});

/**
 * &lt;&lt;checkpoint-load varName&gt;&gt;
 * Loads state stored in varName.
 */
Macro.add(&quot;checkpoint-load&quot;, {
  handler: function() {
    const [varName] = this.args;
    MT.untraced(() =&gt; {
      const json = State.variables[varName];
      if (!json) return;
      const obj = JSON.parse(json);
      const save = obj.save;
      if (save.delta) {
        save.history = State.deltaDecode(save.delta);
      }
      State.unmarshalForSave(obj.save);
      Engine.show();
    });
  }
})

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="176" name="g0init Compute Variants" tags="inclusion" position="450,600" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;

.cv-state {
  color: #39f;
  font-family: monospace;
  font-size: 11px;
  margin-left: 1em;
  text-indent: -1em;
}
.cv-states {
  margin-bottom: .5em;
}
.cv-true {
  color: #6a6;
}
.cv-false {
  color: #c88;
}
.cv-enum {
  color: #88c;
}
.cv-diff-a {
  outline: 2px dotted #c44;
}
.cv-diff-b {
  outline: 2px dotted #090;
}
.cv-diff-a.cv-diff-b {
  outline: 2px dotted #990;
}
.cv-busy {
  background-color: #330;
  color: #993;
  font-weight: bold;
}

&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

let ignore = new Set();
let tryVars = {};

// We assume a null var is a boolean and try `true` is a value.
// These vars might be null, but `true` is not valid.
const nonbooleans = new Set([
  &quot;n_passFound&quot;,
  &quot;n_passTried&quot;,
  &quot;n_upset&quot;,
]);

Macro.add(&quot;cv-ignore&quot;, {
  handler: function() {
    for (let vn of this.args) {
      vn = vn.replace(/^\$/, &#39;&#39;);
      ignore.add(vn);
    }
  }
});

Macro.add(&quot;cv-try&quot;, {
  handler: function() {
    const [vn] = this.args;
    tryVars[vn] = this.args.slice(1);
  }
})

$(document).on(&quot;:passagestart&quot;, () =&gt; {
  ignore = new Set();
  tryVars = {};
});

MT.computeVariants = function() {
  const statEl = $(&quot;.var-info-compute&quot;);
  statEl.addClass(&quot;cv-busy&quot;);

  const beginState = clone(State.current.variables);
  const nowState = clone(State.active.variables);
  const nowTemps = clone(State.temporary);

  // ignore vars that weren&#39;t boolean-ish
  for (const k of Object.keys(beginState)) {
    if (beginState[k] != null &amp;&amp; typeof beginState[k] !== &quot;boolean&quot;) {
      ignore.add(k);
    }
  }
  // ignore vars that aren&#39;t currently boolean-ish
  for (const k of Object.keys(nowState)) {
    if (nowState[k] != null &amp;&amp; typeof nowState[k] !== &quot;boolean&quot;) {
      ignore.add(k);
    }
  }
  // ignore vars that can be null but are not boolean
  nonbooleans.forEach(vn =&gt; ignore.add(vn));
  // ignore vars that can be null but are enums
  Object.keys(MT.enumVars).forEach(vn =&gt; ignore.add(vn));

  const done = [];

  const usedSet = new Set(MT.trace.wasRead);

  ignore.forEach(vn =&gt; usedSet.delete(vn));

  // if a flag has an expectation for this section, limit to that value
  const sect = MT.sectHere();
  const expect = MT.sectExpect(sect);
  usedSet.forEach(vn =&gt; {
    if (vn in expect) tryVars[vn] = [expect[vn]];
  });

  const todo = [beginState];
  const usedList = [...usedSet];
  // for state and vp pointing into usedList,
  // add new todo states that flip every value from vp to the end.
  // at this point, usedList is only boolean-ish values
  const addRecursive = (state, vp) =&gt; {
    if (usedList.length &lt;= vp) return;
    const vn = usedList[vp];
    const flipped = clone(state);
    flipped[vn] = !flipped[vn];
    todo.push(flipped);
    addRecursive(state, vp + 1);
    addRecursive(flipped, vp + 1);
  };
  addRecursive(beginState, 0);

  // for every var with explicit values to try, add states for them all
  Object.keys(tryVars).forEach(vn =&gt; {
    const [first, ...rest] = tryVars[vn];
    if (!usedSet.has(vn)) usedSet.add(vn);
    ignore.delete(vn);
    todo.forEach(t =&gt; {
      t[vn] = first;
    });
    for (const val of rest) {
      [...todo].forEach(t0 =&gt; {
        const t1 = clone(t0);
        t1[vn] = val;
        todo.push(t1);
      });
    }
  });

  // At this point, todo has
  // - the current state
  // - all states with every alternate tryVar value
  // - all states with other non-ignored boolean-ish values flipped

  // Note, this can get confused by nondeterministic rng.

  const passageText = Story.get(State.passage).text;
  const renders = [];
  const messages = [];

  let checked = 0;
  let tried = 0;

  const getValid = () =&gt; {
    for (let i = 0; i &lt; 100; i++) {
      if (todo.length === 0) return null;
      const state = todo.pop();
      done.push(state);
      checked++;
      const ok = MT.checkSectionState(state, sect, true, usedSet)
        &amp;&amp; MT.checkState(state, usedSet, false);
      if (ok) return state;
    }
    return null;
  };

  const tryOne = () =&gt; {
    const state = getValid();
    if (state == null) return;

    State.active.variables = clone(state);
    State.current.variables = clone(state);
    State.clearTemporary();
    tried++;

    const output = $(&quot;&lt;div class=passage&gt;&quot;);
    MT.traceStart();
    const ok = MT.runsWithoutFail(() =&gt; output.wiki(passageText));
    MT.traceStop();

    MT.trace.wasRead.forEach(vn =&gt; {
      if (usedSet.has(vn)) return;
      if (ignore.has(vn)) return;
      if (usedSet.size &gt;= 15) {
        messages.push(`ignoring var ${vn} (max 15)`);
        ignore.add(vn);
        return;
      }
      usedSet.add(vn);
      if (state[vn] == null || typeof state[vn] === &quot;boolean&quot;) {
        if (!(vn in expect)) {
          // add the inverse value to the todo list
          [...done, ...todo].forEach(st1 =&gt; {
            const st2 = clone(st1);
            st2[vn] = !st2[vn];
            todo.push(st2);
          });
        }
      }
    });

    if (!ok) return;

    const usedThisTime = [...MT.trace.wasRead].filter(vn =&gt; !ignore.has(vn)).sort();
    const dom = output[0];
    const html = dom.innerHTML;
    const text = dom.innerText;
    renders[html] || (renders[html] = { dom, text, states: [] });
    renders[html].states.push(objSelect(state, usedThisTime));
  };

  const finish = () =&gt; {
    statEl.text(&quot;[compute variants]&quot;).removeClass(&quot;cv-busy&quot;);

    const varsUsed = [...usedSet].sort();
    const variants = Object.values(renders);
    variants.forEach(r =&gt; {
      const map = {};
      r.states.forEach(obj =&gt; {
        const json = JSON._real_stringify(obj);
        map[json] = obj;
      });
      r.states = Object.entries(map).map(([json, obj]) =&gt; ({ json, obj }));
      r.states.sort((a, b) =&gt; a.json &lt; b.json ? -1 : a.json &gt; b.json ? +1 : 0);
    });
    variants.sort((a, b) =&gt; {
      // sorting by json puts false before true, which is good
      const aj = a.states[0].json;
      const bj = b.states[0].json;
      return aj &lt; bj ? -1 : aj &gt; bj ? +1 : 0;
    });
    const pos = $(&quot;#passages&quot;);
    pos.empty();
    const sum = $(&quot;&lt;div id=cv-summary&gt;&quot;).appendTo(pos);
    $(&quot;&lt;div&gt;&quot;).appendTo(sum)
      .text(`${variants.length} variants, ${checked} states checked, ${tried} states tried,
        ${varsUsed.length} vars`);
    messages.forEach(m =&gt; $(&quot;&lt;div&gt;&quot;).text(m).appendTo(sum));
    for (const variant of variants) {
      pos.append(&quot;&lt;hr&gt;&quot;);
      const outer = $(&quot;&lt;div class=cv-states&gt;&quot;).appendTo(pos);
      variant.states.forEach(st =&gt; {
        const inner = $(&quot;&lt;div class=cv-state&gt;&quot;).appendTo(outer);
        for (const vn of Object.keys(st.obj)) {
          const val = st.obj[vn];
          if (val === false) {
            $(`&lt;span class=&quot;cv-var cv-false&quot;&gt;`).text(vn).appendTo(inner);
          } else if (val === true) {
            $(`&lt;span class=&quot;cv-var cv-true&quot;&gt;`).text(vn).appendTo(inner);
          } else if (MT.enumVars[vn] != null) {
            const sym = MT.enums[MT.enumVars[vn]][val] || `${vn}=${val}`;
            $(`&lt;span class=&quot;cv-var cv-enum&quot;&gt;`).text(sym).appendTo(inner);
          } else {
            const str = JSON._real_stringify(val);
            $(`&lt;span class=&quot;cv-var cv-other&quot;&gt;`).text(`${vn}=${str}`).appendTo(inner);
          }
          $(inner).append(&quot; &quot;);
        }
      });
      pos.append(variant.dom);
    }
    State.active.variables = nowState;
    State.clearTemporary();
    for (const k of Object.keys(nowTemps)) {
      State.temporary[k] = nowTemps[k];
    }
    highlightDiffs();
  };

  const tryNext = () =&gt; {
    if (checked &gt;= 900000) {
      messages.push(`Stopping at ${checked} states checked`);
      todo.length = 0;
    }
    if (todo.length === 0) {
      finish();
    } else {
      if (checked % 100 === 0) {
        statEl.text(`[${todo.length} states pending]`);
      }
      for (let i = 0; i &lt; 4; i++) {
        tryOne();
      }
      setTimeout(tryNext);
    }
  };
  tryNext();
}

function objSelect(obj, keys) {
  const result = {};
  keys.forEach(k =&gt; result[k] = obj[k] || false);
  return result;
}

function highlightDiffs() {
  const passages = $(&quot;.passage&quot;);
  for (let i = passages.length - 1; i &gt; 0; i--) {
    diff(passages[i - 1], passages[i]);
  }
}

function diff(x, y) {
  if (x == null) {
    mark(y, 2);
  } else if (y == null) {
    mark(x, 1);
  } else if (x.nodeType !== y.nodeType) {
    mark(x, 1), mark(y, 2);
  } else if (x.nodeType === Node.TEXT_NODE &amp;&amp; x.nodeValue !== y.nodeValue) {
    mark(x, 1), mark(y, 2);
  } else {
    // dumb comparison that mostly works because of sugarcube debug annotations
    let i = 0;
    for (; i &lt; x.childNodes.length; i++) {
      diff(x.childNodes[i], y.childNodes[i]);
    }
    for (; i &lt; y.childNodes.length; i++) {
      mark(y.childNodes[i], 2);
    }
  }
}

function mark(node, c) {
  if (node != null &amp;&amp; node.nodeType != Node.ELEMENT_NODE) {
    node = node.parentElement;
  }
  if (node != null) {
    $(node).addClass(c === 1 ? &quot;cv-diff-a&quot; : &quot;cv-diff-b&quot;);
  }
}
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="177" name="g0init Count Words" tags="inclusion" position="575,600" size="100,100">&lt;&lt;script&gt;&gt;

MT.countWords = function(text) {
  const tokens = text.split(/(&lt;[&lt;].*?&gt;&gt;|&lt;.*&gt;)/);
  let n = 0;
  const skipTo = (p, re) =&gt; {
    while (p &lt; tokens.length &amp;&amp; !re.test(tokens[p])) ++p;
    return p;
  };
  for (let p = 0; p &lt; tokens.length; p++) {
    const t = tokens[p].trim();
    if (t === &quot;&quot;) {
      /* nothing */
    } else if (/^&lt;?&lt;script/.test(t)) {
      n += 1;
      p = skipTo(p, /^&lt;?&lt;[/]script/);
    } else if (t.startsWith(&quot;&lt;style&quot;)) {
      n += 1;
      p = skipTo(p, /^&lt;[/]style/);
    } else if (t.startsWith(&quot;&lt;&quot;)) {
      n += 1;
    } else {
      const words = t.split(/[\s]+/).filter(w =&gt; /\w/.test(w) &amp;&amp; w !== &quot;?P&quot;);
      n += words.length;
    }
  }
  return n;
}
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="178" name="g0init Draft Sign" tags="inclusion" position="700,600" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;

#draft-sign {
  font-size: 120px;
  pointer-events: none;
  position: fixed;
  right: 50px;
  bottom: 10px;
  z-index: 10;
}

#draft-sign.mt-draft::before {
  color: rgba(70, 200, 255, 0.2);
  content: &quot;draft&quot;;
}

#draft-sign.mt-sketch::before {
  color: rgba(200, 70, 200, 0.2);
  content: &quot;sketch&quot;;
}

#passages a[data-passage].mt-draft {
  color: #7bd;
}
#passages a[data-passage].mt-draft:hover {
  color: #48e;
}

#passages a[data-passage].mt-sketch {
  color: #c7c;
}
#passages a[data-passage].mt-sketch:hover{
  color: #969;
}

&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

const validSigns = [&quot;mt-ready&quot;, &quot;mt-draft&quot;, &quot;mt-sketch&quot;];

MT.signOf = (passageTitle) =&gt; {
  const tags = Story.get(passageTitle || State.passage).tags;
  for (const sign of validSigns) {
    if (tags.includes(sign)) return sign;
  }
  return null;
};

MT.isDraft = (passageTitle) =&gt; {
  const sign = MT.signOf(passageTitle);
  return sign === &quot;mt-draft&quot; || sign === &quot;mt-sketch&quot;;
};

MT.signPassage = () =&gt; {
  // add sign to current passage
  $(&quot;#draft-sign&quot;).remove();
  const sign = MT.signOf(State.passage);
  if (sign) {
    $(&quot;&lt;div&gt;&quot;).attr(&quot;id&quot;, &quot;draft-sign&quot;).addClass(sign).appendTo(&quot;body&quot;);
  }

  // add signs to links to other passages
  $(&quot;#passages a[data-passage]&quot;).each((i, el) =&gt; {
    const title = $(el).attr(&quot;data-passage&quot;);
    const sign = MT.signOf(title);
    if (sign != null) {
      $(el).addClass(sign);
    }
  });
}

$(document).on(&quot;:passagedisplay&quot;, MT.signPassage);

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="179" name="g0init Drekkar Endings" tags="inclusion" position="1375,1200" size="100,100">&lt;&lt;script&gt;&gt;

MT.drekkarEndings = {
  xd_EnthrallmentLion: {
    title: &quot;Bad Ending: Enthrallment (Lion)&quot;,
    passages: [
      &quot;d3a Lion Fight&quot;,
      &quot;d3a Lion Pindown&quot;,
      &quot;d3a Lion Fucking&quot;,
      &quot;d3a Lion Knotting&quot;,
      &quot;d9a Enthrallment 1 (Knot)&quot;,
      &quot;d9a Enthrallment 2&quot;,
      &quot;d9a Enthrallment 3&quot;,
      &quot;d9a Enthrallment 4&quot;,
    ],
  },
  xd_EnthrallmentQuick: {
    title: &quot;Bad Ending: Enthrallment (Quick)&quot;,
    passages: [
      &quot;d9a Enthrallment 1&quot;,
      &quot;d9a Enthrallment 2&quot;,
      &quot;d9a Enthrallment 3&quot;,
      &quot;d9a Enthrallment 4&quot;,
    ],
  },

  xd_ExtractionForceful: {
    title: &quot;Bad Ending: Extraction (Forceful)&quot;,
    passages: [
      &quot;d9a Extraction 1&quot;,
      &quot;d9a Extraction 2&quot;,
      &quot;d9a Extraction 3&quot;,
      &quot;d9a Extraction 4&quot;,
      &quot;d9a Extraction 5&quot;,
      &quot;d9a Extraction Forceful 1&quot;,
      &quot;d9a Extraction Forceful 2&quot;,
      &quot;d9a Extraction Forceful 3&quot;,
      &quot;d9a Extraction Forceful 4&quot;,
      &quot;d9a Extraction Finish&quot;,
      &quot;d9a Extraction Finish Forceful&quot;,
    ],
  },
  xd_ExtractionGentle: {
    title: &quot;Bad Ending: Extraction (Gentle)&quot;,
    passages: [
      &quot;d9a Extraction 1&quot;,
      &quot;d9a Extraction 2&quot;,
      &quot;d9a Extraction 3&quot;,
      &quot;d9a Extraction 4&quot;,
      &quot;d9a Extraction 5&quot;,
      &quot;d9a Extraction Gentle 1&quot;,
      &quot;d9a Extraction Gentle 2&quot;,
      &quot;d9a Extraction Gentle 3&quot;,
      &quot;d9a Extraction Gentle 4&quot;,
      &quot;d9a Extraction Finish&quot;,
      &quot;d9a Extraction Finish Gentle&quot;,
    ],
  },

  xd_InterrogationFreeze: {},
  xd_InterrogationMild: {
    title: &quot;Bad Ending: Interrogation (Mild, %freeze)&quot;,
    passages: [
      &quot;d9b Ivex Torture 1&quot;,
      &quot;d9b Ivex Torture 2&quot;,
      &quot;d9b Easy Way&quot;,
      &quot;d9b Resistance&quot;,
      o =&gt; o.freeze ? &quot;d9b Ice 1&quot; : &quot;d9b Shock 1&quot;,
      o =&gt; o.freeze ? &quot;d9b Ice 2&quot; : &quot;d9b Shock 2&quot;,
      o =&gt; o.freeze ? &quot;d9b Ice 3&quot; : &quot;d9b Shock 3&quot;,
      &quot;d9b Extra Torture&quot;,
      &quot;d9b Compliant End&quot;,
    ],
  },
  xd_InterrogationRough: {
    title: &quot;Bad Ending: Interrogation (Rough, %freeze)&quot;,
    passages: [
      &quot;d9b Ivex Torture 1&quot;,
      &quot;d9b Ivex Torture 2&quot;,
      &quot;d9b Hard Way&quot;,
      &quot;d9b Defiance&quot;,
      o =&gt; o.freeze ? &quot;d9b Ice 1&quot; : &quot;d9b Shock 1&quot;,
      o =&gt; o.freeze ? &quot;d9b Ice 2&quot; : &quot;d9b Shock 2&quot;,
      o =&gt; o.freeze ? &quot;d9b Ice 3&quot; : &quot;d9b Shock 3&quot;,
      &quot;d9b Extra Torture&quot;,
      &quot;d9b Defiant End&quot;,
    ],
  },
  xd_InterrogationShock: {},

  xd_IvexEnthrallment: {
    title: &quot;Ending: A New Servant&quot;,
    passages: [
      &quot;d9x Ivex Enthrallment 1&quot;,
      &quot;d9x Ivex Enthrallment 2&quot;,
      &quot;d9x Ivex Enthrallment 3&quot;,
      &quot;d9x Ivex Enthrallment 4&quot;,
      &quot;d9x Ivex Enthrallment 5&quot;,
      &quot;d9x Ivex Enthrallment 6&quot;,
      &quot;d9x Ivex Enthrallment 7&quot;,
      &quot;d9x Ivex Enthrallment 8&quot;,
      &quot;d9x Ivex Enthrallment 9&quot;,
    ],
  },
  xd_IvexExtraction: {
    title: &quot;Ending: Energy Supply&quot;,
    passages: [
      &quot;d9x Ivex Extraction 1&quot;,
      &quot;d9x Ivex Extraction 2&quot;,
      &quot;d9x Ivex Extraction 3&quot;,
      &quot;d9x Ivex Extraction 4&quot;,
      &quot;d9x Ivex Extraction 5&quot;,
      &quot;d9x Ivex Extraction 6&quot;,
      &quot;d9x Ivex Extraction 7&quot;,
    ],
  },
  xd_IvexPunishment: {
    title: &quot;Ending: Punishment&quot;,
    passages: [
      &quot;d9y Personal Vengeance&quot;,
      &quot;d9y Strip&quot;,
      &quot;d9y Fondle&quot;,
      &quot;d9y Spell&quot;,
      &quot;d9y Lust Spell&quot;,
      &quot;d9y Hold&quot;,
      &quot;d9y Gag&quot;,
      &quot;d9y Gag with Underwear&quot;,
      &quot;d9y Hold Again&quot;,
      &quot;d9y Fuck&quot;,
      &quot;d9y Fucking&quot;,
      &quot;d9y Edge&quot;,
      &quot;d9y Fucking Again&quot;,
      &quot;d9y Knot&quot;,
      &quot;d9y Knotted Mage&quot;,
      &quot;d9y Pull Out Finish&quot;,
      &quot;d9y Pull Out Punishment Finish&quot;,
      &quot;d9y Bounty Collection&quot;,
    ],
  },
};

for (const key of Object.keys(MT.drekkarEndings)) {
  MT.mdDefSaved(key);
}

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="180" name="g0init Drekkar" tags="inclusion" position="1000,1000" size="100,100">&lt;&lt;script&gt;&gt;

// archive selections
MT.mdDefUnsaved(&quot;md_arcEnthrallmentVariant&quot;);
MT.mdDefUnsaved(&quot;md_arcExtractionVariant&quot;);
MT.mdDefUnsaved(&quot;md_arcInterrogationFreeze&quot;);
MT.mdDefUnsaved(&quot;md_arcInterrogationVariant&quot;);

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="181" name="g0init Error Message" tags="inclusion" position="825,600" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;
  #EM-outer {
    position: fixed;
    bottom: 0;
    left: 0;
    line-height: 1.5;
    text-align: center;
    margin: 12px 0;
    pointer-events: none;
    width: 100%;
    z-index: 99991;
  }
  #EM-inner {
    display: inline-block;
    margin: 0 12px;
    pointer-events: auto;
  }
  .EM-note {
    background-color: #cc4;
    border-radius: 4px;
    color: #000;
    font-size: 12px;
    margin-bottom: 8px;
    padding: 8px 8px 4px 8px;
    text-align: left;
  }
  a.EM-button {
    color: #55f;
    float: right;
    font-weight: bold;
    margin-top: -2px;
    padding-left: 8px;
  }
  a.EM-button:hover {
    color: #c55;
  }
  .EM-fail {
    color: #f33;
    font-weight: bold;
  }
  .EM-trace {
    color: #000;
    font-weight: normal;
    margin-left: 1.5em;
    white-space: pre-line;
  }
&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

MT.hasFails = false;
MT.hasWarnings = false;
MT.messages = [];

let debugStop = false;
let suppress = false;

$(document).on(&quot;:passagestart&quot;, () =&gt; {
  $(&quot;#EM-outer&quot;).remove();
  MT.hasFails = false;
  MT.hasWarnings = false;
  MT.messages = [];
});

MT.suppressErrors = fn =&gt; {
  const save = suppress;
  try {
    suppress = true;
    fn();
  } finally {
    suppress = save;
  }
}

MT.runsWithoutFail = (fn) =&gt; {
  const save = { hf: MT.hasFails, sup: suppress };
  try {
    MT.hasFails = false;
    suppress = true;
    fn();
    return !MT.hasFails;
  } catch (e) {
    return false;
  } finally {
    MT.hasFails = save.hf;
    suppress = save.sup;
  }
};

/** Add str as a new error-message note. */
function note(str, header) {
  if (str != null) console.log(`note: ${header} ${str}`);
  if (suppress) return;
  MT.messages.push(header == null ? str : `${header}: ${str}`);
  const note = $(`
    &lt;div class=EM-note&gt;
      &lt;a class=&quot;EM-close EM-button&quot;&gt;[close]&lt;/a&gt;
    &lt;/div&gt;
  `).appendTo(getInner());
  if (header != null &amp;&amp; header !== &quot;&quot;) {
    note.append(document.createTextNode(header));
    note.append(document.createElement(&quot;br&quot;));
  }
  note.append(document.createTextNode(str));
  note.find(&quot;.EM-close&quot;).click(() =&gt; note.remove());
  return note;
};

/** Add str as a warning. */
MT.warn = (str) =&gt; {
  MT.hasWarnings = true;
  note(str, &quot;Warning&quot;);
};

/** Add str as a new error-message assertion failure. */
MT.fail = (str, context) =&gt; {
  MT.hasFails = true;
  message(&quot;fail&quot;, str, context);
};

function message(type, str, context) {
  if (suppress) return;
  if (debugStop) {
    debugger;
    debugStop = false;
  }
  MT.messages.push(`${type}: ${str}`)
  const fails = $(`&lt;div class=EM-${type}&gt;`).text(str)
    .appendTo(getFails());
  const trace = backtrace(context);
  if (trace != null &amp;&amp; trace !== &quot;&quot;) {
    MT.messages.push(trace);
    $(&quot;&lt;div class=EM-trace&gt;&quot;).text(trace)
      .appendTo(fails);
  }
  return fails;
};

MT.assert = (val, str, context) =&gt; {
  if (val) return;
  MT.fail(str, context);
}
Macro.add(&quot;em-assert&quot;, {
  skipArgs: true,
  handler: function() {
    const val = MT.untraced(() =&gt; eval(this.args.full));
    MT.assert(val, `expected: ${this.args.raw}`, this);
  }
});

function backtrace(ctx) {
  let trace = &quot;&quot;;
  for (; ctx != null; ctx = ctx.parent) {
    if (ctx.displayName === &quot;include&quot;) {
      trace += ctx.source + &quot;\n&quot;;
    }
  }
  return trace;
}

function getInner() {
  let inner = $(&quot;#EM-inner&quot;);
  if (inner.length === 1) return inner;
  inner.remove();
  $(&quot;#EM-outer&quot;).remove();
  const outer = $(`
    &lt;div id=EM-outer&gt;
      &lt;div id=EM-inner&gt;&lt;/div&gt;
    &lt;/div&gt;
  `).appendTo(&quot;#story&quot;);
  inner = outer.find(&quot;#EM-inner&quot;);
  return inner;
}

function getFails() {
  let fails = $(&quot;#EM-fails&quot;);
  if (fails.length === 1) return fails;
  fails.remove();
  fails = note(&quot;&quot;);
  fails.attr(&quot;id&quot;, &quot;EM-fails&quot;);
  fails.append(`
    &lt;a id=EM-debug class=EM-button&gt;[debug]&lt;/a&gt;
    &lt;div class=EM-fail-intro&gt;
      Assertions failed.
      Passage may be nonsensical.
    &lt;/div&gt;
  `);
  fails.find(&quot;#EM-debug&quot;).click(() =&gt; {
    debugStop = true;
    Engine.play(State.passage, true);
  });
  return fails;
}
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="182" name="g0init Fade-In" tags="inclusion" position="200,725" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;
  /* &lt;span&gt; for each fade-in section */
  .fade-in,
  .fade-in .sprite-q {
    transition: all .4s ease-in;
  }
  .fade-in img {
    transition: all .4s ease-in;
  }

  /*
   * Hide text. Note: using opacity or filter here will make it impossible
   * to have links visible (child filter cannot override parent).
   * The :not clause gives this rule a high CSS specificity, making this
   * more likely to override complex selectors elsewhere.
   */
  .fade-in-hidden:not(#_#_#_#_#_),
  .fade-in-hidden:not(#_#_#_#_#_) * {
    background-image: unset;
    color: rgba(0, 0, 0, 0);
    pointer-events: none;
    text-decoration-color: rgba(0, 0, 0, 0);
  }

  /* Hide media. */
  .fade-in-hidden:not(#_#_#_#_#_) img,
  .fade-in-hidden:not(#_#_#_#_#_) video {
    opacity: 0;
  }

  /* actions list image */
  .fade-in-hidden:not(#_#_#_#_#_) li::before {
    background-image: unset;
  }

  /* Block-out hidden links. */
  .fade-in-hidden:not(#_#_#_#_#_) a {
    background-color: #222;
    border-radius: 4px;
    color: rgba(0, 0, 0, 0);
    pointer-events: auto;
  }
  .fade-in-hidden:not(#_#_#_#_#_) a:hover {
    background-color: #333;
    color: rgba(0, 0, 0, 0);
  }

  /* Put pulsing dots at the section that will be revealed next. */
  .fade-in-next:not(#_#_#_#_#_)::before {
    animation: 0.5s 1s ease-in-out alternate both infinite fade-in-blink;
    color: #fff;
    content: &quot;. . .&quot;;
    cursor: pointer;
    display: inline-block;
    font-weight: bold;
    pointer-events: auto;
    position: absolute;
  }
  @keyframes fade-in-blink {
    from { opacity: 0.4; }
    to { opacity: 1; }
  }

  .fade-in-no-dots.fade-in-next:not(#_#_#_#_#_)::before {
    content: &quot;&quot;;
  }

  .fade-in-no-pulse.fade-in-next:not(#_#_#_#_#_)::before {
    animation: none;
    opacity: 0.6;
  }

  /* Absorb clicks for a small amount of time after fade-in. */
  .fade-in-absorb:not(#_#_#_#_#_),
  .fade-in-absorb:not(#_#_#_#_#_) *,
  .fade-in-absorb:not(#_#_#_#_#_) *:hover {
    cursor: wait;
  }
  .fade-in-absorb:not(#_#_#_#_#_) a,
  .fade-in-absorb:not(#_#_#_#_#_) a:hover {
    color: rgb(100, 100, 100, 1);
  }
&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;
/*
 * Sometimes a player will click with intent to skip, but fade-in will
 * happen almost at the same time, and the click will land after the
 * fade-in happens. This is annoying if the click lands on a link and
 * follows it. So we absorb clicks a small amount of time after
 * automatic fade-in.
 */
const absorbMsec = 500;

/**
 * This description assumes you&#39;re using the default style.
 *
 * &lt;&lt;fade-in 1.5s [no-dots | no-pulse | click-anywhere]&gt;&gt;
 *    - Normally, a pulsing &quot;...&quot; appears here.
 *    - After 1.5 seconds, this section&#39;s text fades in.
 *    - Click on the &quot;...&quot; will skip the delay.
 *    - Links in this section are shown without delay, but blocked out with
 *      a gray rectangle.
 *    - Clicking on a blocked-out link will also skip the delay.
 *    - &quot;no-dots&quot; means don&#39;t show the dots.
 *    - &quot;no-pulse&quot; means show the dots, but don&#39;t pulse them.
 *    - &quot;click-anywhere&quot; means clicking anywhere will skip the delay.
 * &lt;&lt;fade-next 2s&gt;&gt;
 *    - After the first section has faded-in, the &quot;...&quot; appears here.
 *    - After another 2s, this section&#39;s text fades in.
 *    - There can be any number of &quot;fade-next&quot; sections.
 * &lt;&lt;/fade-in&gt;&gt;
 */
Macro.add(&quot;fade-in&quot;, {
  tags: [&quot;fade-next&quot;],
  handler: function() {
    const noDots = this.args.includes(&quot;no-dots&quot;);
    const noPulse = this.args.includes(&quot;no-pulse&quot;);
    const clickAnywhere = this.args.includes(&quot;click-anywhere&quot;);

    const queue = [];
    let timeout = null;
    let absorbing = false;

    const skipAll = ev =&gt; {
      // note, this assumes passage only has one fade-in
      const absorb = $(&quot;#story .fade-in-absorb&quot;);
      if (absorb.length) {
        ev.stopPropagation();
        ev.preventDefault();
        return;
      }

      const hidden = $(&quot;#story .fade-in-hidden&quot;);
      if (!hidden.length) {
        $(&quot;#story&quot;)[0].removeEventListener(&quot;click&quot;, skipAll, true);
        return;
      }

      hidden.removeClass(&quot;fade-in-hidden fade-in-next&quot;);
      hidden.addClass(&quot;fade-in-absorb&quot;);
      setTimeout(() =&gt; {
        hidden.removeClass(&quot;fade-in-absorb&quot;);
        $(&quot;#story&quot;)[0].removeEventListener(&quot;click&quot;, skipAll, true);
      }, absorbMsec);
      queue.length = 0;
    };

    if (clickAnywhere) {
      $(&quot;#story&quot;)[0].addEventListener(&quot;click&quot;, skipAll, true);
    }

    const next = () =&gt; {
      if (timeout != null) clearTimeout(timeout);
      if (queue.length === 0) return;
      const [delay, span] = queue[0];
      span.addClass(&quot;fade-in-next&quot;);
      timeout = setTimeout(() =&gt; {
        if (span.hasClass(&quot;fade-in-hidden&quot;)) {
          span.addClass(&quot;fade-in-absorb&quot;);
          setTimeout(() =&gt; span.removeClass(&quot;fade-in-absorb&quot;), absorbMsec);
        }
        span.removeClass(&quot;fade-in-hidden fade-in-next&quot;);
        if (queue.length &amp;&amp; queue[0][1] === span) {
          queue.shift();
          next();
        }
      }, delay);
    };

    const skipTo = jq =&gt; {
      const pos = queue.findIndex(q =&gt; q[1] === jq);
      if (pos &lt; 0) return;
      for (let i = 0; i &lt;= pos; i++) {
        const span = queue.shift()[1];
        span.removeClass(&quot;fade-in-hidden fade-in-next&quot;);
      }
      next();
    };

    for (const section of this.payload) {
      let delay = Util.fromCssTime(section.args[0]);
      delay = Math.max(delay, Engine.minDomActionDelay);
      if (MT.roaming) delay = 0;
      const span = $(&quot;&lt;span&gt;&quot;)
        .addClass(&quot;fade-in fade-in-hidden&quot;)
        .toggleClass(&quot;fade-in-no-dots&quot;, noDots)
        .toggleClass(&quot;fade-in-no-pulse&quot;, noPulse)
        .wiki(section.contents)
        .appendTo(this.output);
      const hurry = ev =&gt; {
        if (span.hasClass(&quot;fade-in-absorb&quot;)) {
          ev.preventDefault();
          ev.stopPropagation();
        } else if (span.hasClass(&quot;fade-in-hidden&quot;)) {
          ev.preventDefault();
          ev.stopPropagation();
          span.removeClass(&quot;fade-in-hidden fade-in-next&quot;);
          span.addClass(&quot;fade-in-absorb&quot;);
          setTimeout(() =&gt; {
            span.removeClass(&quot;fade-in-absorb&quot;);
            span[0].removeEventListener(&quot;click&quot;, hurry, true);
          }, absorbMsec);
          skipTo(span);
        } else {
          span[0].removeEventListener(&quot;click&quot;, hurry, true);
        }
      };
      span[0].addEventListener(&quot;click&quot;, hurry, true);
      queue.push([delay, span]);
    }

    setTimeout(next);
  }
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="183" name="g0init History" tags="inclusion" position="250,725" size="100,100">&lt;&lt;script&gt;&gt;

Config.history.maxStates = 1000;

const histIgnore = [
  &quot;g1a Title Screen&quot;,
];

/** True if title is a menu passage */
function isMenu(title) {
  const passage = Story.get(title);
  return passage.tags.includes(&quot;is-menu&quot;);
}

/** Pops history to last story passage. */
MT.popToStory = () =&gt; {
  const hist = State.history;
  let pos = State.length - 1;
  while (pos &gt; 0 &amp;&amp; isMenu(hist[pos].title)) {
    pos--;
  }
  Engine.goTo(pos);
};

/** Returns history without is-menu loops. */
MT.getHistory = () =&gt; {
  const result = [];

  const hist = State.history;
  for (let i = 0, n = hist.length; i &lt; n; i++) {
    const title = hist[i].title;
    if (histIgnore.includes(title)) continue;
    if (isMenu(title)) continue;

    // if previous passage is a menu passage
    if (i &gt; 0 &amp;&amp; isMenu(hist[i - 1].title)) {
      // and we&#39;re returning to the same passage
      if (result.length &gt; 0 &amp;&amp; result[result.length - 1].title === title) {
        // skip this one too
        continue;
      }
    }

    result.push(hist[i]);
  }
  return result;
};

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="184" name="g0init Legacy Cleanup" tags="inclusion" position="700,1100" size="100,100">&lt;&lt;script&gt;&gt;

const localStorageDelete = [
  &quot;vp-1&quot;,
  &quot;vp-marks-enabled&quot;,
];

function cleanupMetadata() {
  const rec = MT.mdRecord();
  for (const [k, v] of MT.mdEntries()) {
    if (!MT.mdKnown(k)) {
      console.warn(&quot;removing unknown metadata&quot;, {k, v});
      State.metadata.delete(k);
    }
  }
}

function cleanupInit() {
  session.delete(&quot;mt-log-1&quot;);
  for (const k of localStorageDelete) {
    localStorage.removeItem(k);
  }
  $(document).on(&quot;:storyready&quot;, cleanupMetadata);
}

cleanupInit();

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="185" name="g0init Links" tags="inclusion" position="325,725" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;

.mtl-denied::before {
  filter: grayscale();
}
.mtl-denied .mtl-action {
  color: #999;
  text-decoration: line-through;
  text-decoration-color: #999;
  text-decoration-thickness: 1px;
}
.mtl-denied .mtl-reason {
  color: #999;
  margin-left: 0.5em;
  font-style: italic;
}

&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

/**
 * &lt;&lt;mta $link [$code]&gt;&gt;
 *   $text
 * &lt;&lt;/mta&gt;&gt;
 *
 * Similar to &lt;&lt;link $text $link&gt;&gt;&lt;&lt;run $code&gt;&gt;&lt;&lt;/link&gt;&gt;
 * Allows double-bracket syntax for the link.
 * Adds a data-mt-code attribute for disambiguation.
 * Also arranges for the next passage to get the code as $g_mtaCode
 */
Macro.add(&quot;mta&quot;, {
  tags: [],
  handler: function() {
    const [link, code] = this.args;
    const text = this.payload[0].contents;
    $(makeLink(link, code, text))
      .appendTo(this.output);
  }
});

/**
 * &lt;&lt;mtl $link [$script]&gt;&gt;
 *   $text
 * &lt;&lt;/mtl&gt;&gt;
 *
 * &lt;&lt;mta&gt;&gt; but wrapped in &lt;li&gt;&lt;/li&gt;
 */
Macro.add(&quot;mtl&quot;, {
  tags: [],
  handler: function() {
    const [link, code] = this.args;
    const text = this.payload[0].contents;
    $(&quot;&lt;li&gt;&quot;).append(makeLink(link, code, text))
      .appendTo(this.output);
  }
});

/**
 * &lt;&lt;mtl-if $bool $link [$reason]&gt;&gt;
 *   $text
 * &lt;&lt;/mtl&gt;&gt;
 *
 * &lt;&lt;mtl&gt;&gt; but only if $bool.
 * Otherwise, show it as unavailable, with $reason
 */
Macro.add(&quot;mtl-if&quot;, {
  tags: [],
  handler: function() {
    const [expr, link, reason] = this.args;
    const text = this.payload[0].contents;
    const bool = typeof expr === &#39;boolean&#39; ? expr
      : Scripting.evalTwineScript(expr);
    if (bool) {
      $(&quot;&lt;li&gt;&quot;).append(makeLink(link, null, text))
        .appendTo(this.output);
    } else {
      const li = $(&quot;&lt;li class=mtl-denied&gt;&quot;).appendTo(this.output);
      $(&quot;&lt;span class=mtl-action&gt;&quot;).wiki(text.trim()).appendTo(li);
      if (reason != null &amp;&amp; reason !== &quot;&quot;) {
        $(&quot;&lt;span class=mtl-reason&gt;&quot;).text(`(${reason})`).appendTo(li);
      }
    }
  }
});

/**
 * &lt;&lt;mtl-denied $text [$reason]&gt;&gt;
 *
 * Show an unavailable action.
 */
Macro.add(&quot;mtl-denied&quot;, {
  handler: function() {
    const [text, reason] = this.args;
    const li = $(&quot;&lt;li class=mtl-denied&gt;&quot;).appendTo(this.output);
    $(&quot;&lt;span class=mtl-action&gt;&quot;).wiki(text.trim()).appendTo(li);
    if (reason != null &amp;&amp; reason !== &quot;&quot;) {
      $(&quot;&lt;span class=mtl-reason&gt;&quot;).text(`(${reason})`).appendTo(li);
    }
  }
});

function makeLink(link, code, text) {
  const el = document.createDocumentFragment();
  const dest = linkTitle(link);
  const destRepr = JSON.stringify(String(dest));
  const textRepr = JSON.stringify(String(text));

  let body = &quot;&quot;;
  if (code != null &amp;&amp; code !== &quot;&quot;) {
    const codeRepr = JSON.stringify(String(code));
    body = `&lt;&lt;run $g_mtaCode = ${codeRepr}; $g_mtaCodeTurn = ${State.turns}; ${code}&gt;&gt;`;
  }
  $(el).wiki(`&lt;&lt;link ${textRepr} ${destRepr}&gt;&gt;${body}&lt;&lt;/link&gt;&gt;`);
  if (code != null &amp;&amp; code !== &quot;&quot;) {
    $(el).find(&quot;a&quot;).attr(&quot;data-mta-code&quot;, code);
  }
  return el;
}

function linkTitle(link) {
  if (link.isLink) return link.link;
  const str = String(link);
  const m = /^\[\[(?:[^|]+\|)?([^|]+)\]\]$/.exec(str);
  return m == null ? str : m[1];
}

/**
 * &lt;&lt;mta-no-loop $link&gt;&gt;
 *   $text
 * &lt;&lt;/mta-no-loop&gt;&gt;
 *
 * Show as a link if the destination hasn&#39;t been seen recently.
 * Otherwise just show the text.
 *
 * Seen recently is:
 * - within the last 20 passages,
 * - since the latest visit to $n_patiencePassage.
 */
Macro.add(&quot;mta-no-loop&quot;, {
  tags: [],
  handler: function() {
    const [link] = this.args;
    const dest = linkTitle(link);
    const text = this.payload[0].contents;
    if (recentlyViewed(dest)) {
      $(this.output).wiki(text);
    } else {
      $(this.output).append(makeLink(link, null, text));
    }
  }
});

function recentlyViewed(name) {
  const limit = MT.untracedGet(&quot;n_patiencePassage&quot;);
  const max = 20;
  for (let i = 1; i &lt; max; i++) {
    const past = State.peek(-i);
    if (past == null) return false;
    if (past.title === limit) return false;
    if (past.title === name) return true;
  }
  return false;
}

/**
 * &lt;&lt;return-before $fromPassage&gt;&gt;
 *
 * Make a return link that goes to the passage before $fromPassage
 * in history.
 */
Macro.add(&quot;return-before&quot;, {
  handler: function() {
    let [from] = this.args;
    if (from.isLink) {
      from = from.link;
    }

    const hist = State.history;
    let i = State.length - 1;
    while (i &gt;= 0 &amp;&amp; hist[i].title !== from) {
      i--;
    }
    if (i &lt; 1) {
      throw new Error(`return-before failed for ${from}`);
    }

    const dest = hist[i - 1].title;
    $(this.output).wiki(
      `&lt;&lt;mta [[${dest}]]&gt;&gt;Return&lt;&lt;/mta&gt;&gt;`
    );
  }
});

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="186" name="g0init Metadata Defs" tags="inclusion" position="575,725" size="100,100">&lt;&lt;script&gt;&gt;

MT.mdDefUnsaved(&quot;mg_contentWarningPassed&quot;);

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="187" name="g0init Nero Barbs" tags="inclusion" position="1125,1200" size="100,100">&lt;&lt;script&gt;&gt;

function announceBarbs(dest) {
  const V = State.variables;
  V.n_announceBarbsSoon = false;
  const barbs = MT.untracedGet(&quot;n_glitched&quot;)
    ? &quot;Barbs?&quot;
    : MT.untracedGet(&quot;n_barbs&quot;)
    ? &quot;Barbs&quot; : &quot;Smooth&quot;;
  $(dest).wiki(`&lt;meta-text&gt;Story Variant: ${barbs}&lt;/meta-text&gt;?P`);
}

Macro.add(&quot;barbs-announce&quot;, {
  handler: function() {
    if (this.args.length !== 1) throw new Error(&quot;expected 1 arg&quot;);
    const V = State.variables;
    switch (this.args[0]) {
    case &quot;now&quot;:
      announceBarbs(this.output);
      break;
    case &quot;soon&quot;:
      V.n_announceBarbsSoon = true;
      return;
    case &quot;maybe&quot;:
      if (V.n_announceBarbsSoon) announceBarbs(this.output);
      break;
    default:
      throw new Error(`Unexpected arg ${this.args[0]}`);
    }
  }
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="188" name="g0init Nero Constraints" tags="inclusion" position="1250,1200" size="100,100">&lt;&lt;script&gt;&gt;

// - Flags are booleans where null or undefined is equivalent to false.
// - &quot;implies&quot; are constraints on other vars when the flag is true.
//   - The constraints can be any type of value, not just flags.
const flags = {
  // true if Ivex has smashed Nero&#39;s balls
  n_abused: {
    implies: {
      // no constraints
    },
  },

  // true if lust candle is now compulsive
  n_candleHorny: {
    implies: {
      n_candleLit: true,
      n_naked: true,
      n_extraHorny: false,
      n_free: false,
      n_tooClever: false,
      n_ivexReceptive: false,
    },
  },

  // true if lust candle is lit (and ivex is masked)
  n_candleLit: {
    implies: {
      n_ivexReceptive: false,
      n_extraHorny: false,
      n_free: false,
      n_tooClever: false,
      n_paintingLanced: false,
      n_wandExploded: false,
      n_windowBroken: false,
    },
  },

  n_gravAsked: {
    implies: {
      n_gravViewed: true,
    }
  },
  n_gravViewed: {
    implies: {
      n_gravNoticed: true,
    }
  },

  // true if Nero can see magic
  n_mageSight: {
    implies: {
      n_naked: true,
      n_deskBurned: false,
      n_extraHorny: false,
      n_mirrorBroken: false,
    },
  },
  n_mirrorMagicKnown: {
    implies: {
      n_mirrorViewed: true,
    }
  },
  n_mirrorTapped: {
    implies: {
      n_mageSight: true,
      n_mirrorMagicKnown: true,
      n_mirrorViewed: true,
      n_mirrorWasTapped: true,
      n_mirrorBroken: false,
    }
  },
  n_mirrorWasTapped: {
    implies: {
      n_mirrorMagicKnown: true,
    },
  },

  // true if Nero is naked
  n_naked: {
    implies: {
      // no constraints
    },
  },
  n_roomFlipped: {
    implies: {
      n_naked: true,
    }
  },

  // true if Nero is very compliant
  n_subby: {
    implies: {
      n_naked: true,
    },
  },

  // true if Nero resists after being abused
  n_tough: {
    implies: {
      n_abused: true,
    },
  },

  n_wandAsked: {
    implies: {
      n_wandRanAway: false,
    },
  },
  n_wandTouched: {
    implies: {
      n_wandAsked: true,
    },
  },
  
  n_bookPileBurned: {
    implies: {
      n_bookcasesLanced: true,
      n_wandExploded: true,
    }
  },
  n_bookShredsBurned: {
    implies: {
      n_booksLanced: true,
      n_wandExploded: true,
    }
  },

  n_bookcasesLanced: {
    implies: {
      n_bookcasesViewed: true,
      n_mageSight: true,
      n_free: true,
      n_tooClever: true,
    }
  },
  n_booksLanced: {
    implies: {
      n_booksViewed: true,
      n_mageSight: true,
      n_free: true,
      n_tooClever: true,
    }
  },

  n_cabinetsLanced: {
    implies: {
      n_free: true,
      n_tooClever: true,
    }
  },
  n_cabinetsUnderViewed: {
    implies: {
      n_penguinCoinDropped: true,
      n_free: true,
    }
  },

  n_coinsInBook: {
    implies: {
      n_mageSight: true,
      n_coinsInPorn: false,
      n_coinsLanced: true,
    }
  },

  n_coinsInPorn: {
    implies: {
      n_mageSight: true,
      n_coinsInBook: false,
      n_coinsLanced: true,
    }
  },

  n_coinsLanced: {
    implies: {
      n_mageSight: true,
      n_free: true,
    }
  },

  // true after easy escape
  n_deskBurned: {
    implies: {
      n_mageSight: false,
    },
  },

  n_deskSearchedAgain: {
    implies: {
      n_deskSearched: true,
    }
  },

  // true if Nero is free with a distracting amount of lust (easy escape)
  n_extraHorny: {
    implies: {
      n_candleHorny: false,
      n_candleLit: false,
      n_mageSight: false,
      n_naked: true,
      n_free: true,
      n_ivexGone: true,
      n_ivexReceptive: false,
    },
  },

  // true if Nero is free (easy or hard)
  n_free: {
    implies: {
      n_candleHorny: false,
      n_candleLit: false,
      n_ivexReceptive: false,
      n_naked: true,
      n_ivexGone: true,
    },
  },

  // true if Ivex has left
  n_ivexGone: {
    implies: {
      n_ivexReceptive: false,
      n_naked: true,
    },
  },

  n_knifeOnFloor: {
    implies: {
      // n_free is briefly false
      n_knifeTaken: false,
    },
  },
  n_knifeTaken: {
    implies: {
      n_naked: true,
      n_free: true,
      n_knifeOnFloor: false,
    },
  },
  n_mapDefaced: {
    implies: {
      n_naked: true,
      n_free: true,
      n_tooClever: true,
      n_windowBroken: true,
    }
  },

  // true if the mirror is broken (easy escape)
  n_mirrorBroken: {
    implies: {
      n_mageSight: false,
      n_mirrorMagicKnown: true,
      n_mirrorTapped: false,
      n_mirrorWasTapped: true,
      n_mirrorTaken: false,
    },
  },

  n_mirrorTaken: {
    implies: {
      n_mageSight: true,
      n_mirrorMagicKnown: true,
      n_mirrorTapped: true,
      n_mirrorWasTapped: true,
      n_mirrorBroken: false,
    },
  },

  n_paintingBlasted: {
    implies: {
      n_mageSight: true,
      n_wandExploded: true,
      n_windowBroken: true,
    }
  },
  n_paintingHasBill: {
    implies: {
      n_paintingLanced: true,
    }
  },
  n_paintingLanced: {
    implies: {
      n_candleLit: false,
      n_mageSight: true,
      n_windowBroken: true,
    }
  },

  n_pawed: {
    implies: {
      n_extraHorny: true,
    },
  },
  
  n_penguinFlown: {
    implies: {
      n_mageSight: true,
      n_free: true,
      n_tooClever: true,
    }
  },
  n_penguinTorn: {
    implies: {
      n_mageSight: true,
      n_free: true,
      n_tooClever: true,
    }
  },

  n_pornLanced: {
    implies: {
      n_booksViewed: true,
      n_booksSearched: true,
      n_free: true,
      n_tooClever: true,
    }
  },

  // true if Nero did the hard escape and got extra-abused
  n_tooClever: {
    implies: {
      n_bottleViewed: true,
      n_candleHorny: false,
      n_candleLit: false,
      n_mageSight: true,
      n_magicPhase: MP_contact,
      n_naked: true,
      n_free: true,
      n_ivexGone: true,
      n_ivexReceptive: false,
    },
  },
  n_wandExploded: {
    implies: {
      n_candleLit: false,
      n_mageSight: true,
      n_tooClever: true,
      n_wandTubeShot: true,
      n_windowBroken: true,
    }
  },
  n_wandRanAway: {
    implies: {
      n_wandAsked: false,
      n_wandTubeShot: false,
      n_wandUsed: false,
    },
  },
  n_wandRefused: {
    implies: {
      n_wandAsked: true,
    },
  },
  n_wandUsed: {
    implies: {
      n_extraHorny: true,
      n_wandAsked: true,
      n_wandRanAway: false,
    },
  },
  n_wandTubeShot: {
    implies: {
      n_tooClever: true,
      n_wandRanAway: false,
    }
  },

  n_windowBroken: {
    implies: {
      n_candleLit: false,
      n_mageSight: true,
    }
  },

  // true if Ivex is near the cross
  n_ivexNear: {
    implies: {
    },
  },

  // true if Ivex is intrigued and suggestible
  n_ivexReceptive: {
    implies: {
      n_candleLit: false,
      n_candleHorny: false,
      n_extraHorny: false,
      n_free: false,
      n_ivexGone: false,
      n_tooClever: false,
    },
  },

};

function checkFlags() {
  if (!setup.tester) return;
  Object.keys(flags).forEach(x =&gt; {
    // check contrapositive
    Object.keys(flags[x].implies).forEach(y =&gt; {
      if (flags[x].implies[y] === false) {
        const yf = flags[y];
        if (yf == null || yf.implies == null || yf.implies[x] !== false) {
          console.error(`flag ${x} implies !${y} is missing contrapositive`);
        }
      }
    });
  });
}

checkFlags();

const enumImplies = {
  n_magicPhase: {
    [MP_beforeCast]: {
      n_booksAsked: false,
      n_magicPhaseReached: MP_beforeCast,
      n_mirrorTapped: false,
      n_mirrorWasTapped: false,
      n_wandAsked: false,
      n_free: false,
      n_mirrorBroken: false,
      n_wandRanAway: false,
      n_wandRefused: false,
      n_wandUsed: false,
    },
    [MP_triedMagic]: {
      n_booksAsked: false,
      n_magicPhaseReached: MP_triedMagic,
      n_mirrorTapped: false,
      n_mirrorWasTapped: false,
      n_wandAsked: false,
      n_free: false,
      n_mirrorBroken: false,
      n_wandRanAway: false,
      n_wandRefused: false,
      n_wandUsed: false,
    },
    [MP_wantDevice]: {
      n_booksAsked: false,
      n_mageSight: true,
      n_magicPhaseReached: MP_wantDevice,
      n_mirrorTapped: true,
      n_mirrorWasTapped: true,
      n_naked: true,
      n_wandAsked: false,
      n_free: false,
      n_mirrorBroken: false,
      n_wandRanAway: false,
      n_wandRefused: false,
      n_wandUsed: false,
    },
    [MP_wantName]: {
      n_booksAsked: false,
      n_bottleViewed: true,
      n_mageSight: true,
      n_magicPhaseReached: MP_wantName,
      n_mirrorTapped: true,
      n_mirrorWasTapped: true,
      n_naked: true,
      n_wandAsked: false,
      n_mirrorBroken: false,
      n_wandRanAway: false,
      n_wandRefused: false,
      n_wandUsed: false,
    },
    [MP_wantTouch]: {
      n_booksAsked: false,
      n_bottleNameKnown: true,
      n_bottleViewed: true,
      n_mageSight: true,
      n_magicPhaseReached: MP_wantTouch,
      n_mirrorTapped: true,
      n_mirrorWasTapped: true,
      n_naked: true,
      n_free: false,
      n_mirrorBroken: false,
      n_wandRanAway: false,
      n_wandRefused: false,
      n_wandUsed: false,
    },
    [MP_wantPass]: {
      n_bottleNameKnown: true,
      n_bottleViewed: true,
      n_mageSight: true,
      n_magicPhaseReached: MP_wantPass,
      n_mirrorTapped: true,
      n_mirrorWasTapped: true,
      n_naked: true,
      // can&#39;t pass wantTouch without asking about penguin
      n_penguinAsked: true,
      n_free: false,
      n_mirrorBroken: false,
      n_wandRanAway: false,
      n_wandRefused: false,
      n_wandUsed: false,
    },
    [MP_onHold]: {
      n_bottleNameKnown: true,
      n_bottleViewed: true,
      n_mageSight: true,
      n_magicPhaseReached: MP_wantPass,
      n_mirrorTapped: true,
      n_mirrorWasTapped: true,
      n_naked: true,
      n_penguinAsked: true,
      n_free: false,
      n_mirrorBroken: false,
      n_wandRanAway: false,
      n_wandRefused: false,
      n_wandUsed: false,
    },
    [MP_exitingHold]: {
      n_bottleNameKnown: true,
      n_bottleViewed: true,
      n_mageSight: true,
      n_magicPhaseReached: MP_wantPass,
      n_mirrorTapped: true,
      n_mirrorWasTapped: true,
      n_naked: true,
      n_penguinAsked: true,
      n_free: false,
      n_mirrorBroken: false,
      n_wandRanAway: false,
      n_wandRefused: false,
      n_wandUsed: false,
    },
    [MP_contact]: {
      n_bottleNameKnown: true,
      n_bottleViewed: true,
      n_mageSight: true,
      n_magicPhaseReached: MP_contact,
      n_mirrorTapped: true,
      n_mirrorWasTapped: true,
      n_naked: true,
      n_passIsKnown: true,
      n_penguinAsked: true,
      n_free: true,
      n_ivexGone: true,
      n_mirrorBroken: false,
      n_tooClever: true,
    },
    [MP_lockedOut]: {
      n_bottleViewed: true,
      n_mageSight: true,
      n_magicPhaseReached: MP_wantPass,
      n_mirrorTapped: true,
      n_mirrorWasTapped: true,
      n_naked: true,
      n_free: false,
      n_mirrorBroken: false,
      n_tooClever: false,
      n_wandRanAway: false,
      n_wandRefused: false,
      n_wandUsed: false,
    },
    [MP_drained]: {
      n_mageSight: false,
      n_magicPhaseReached: MP_triedMagic,
      n_mirrorTapped: false,
      n_mirrorWasTapped: false,
      n_naked: true,
      n_extraHorny: true,
      n_free: true,
      n_ivexGone: true,
      n_mirrorBroken: false,
      n_tooClever: false,
    },
    [MP_tapLost]: {
      n_mageSight: false,
      n_mirrorTapped: false,
      n_mirrorWasTapped: true,
      n_naked: true,
      n_extraHorny: true,
      n_free: true,
      n_ivexGone: true,
      n_tooClever: false,
    },
  },

  n_magicPhaseReached: {
    [MP_beforeCast]: {
      n_mageSight: false,
      n_mirrorTapped: false,
      n_mirrorWasTapped: false,
      n_tooClever: false,
    },
    [MP_triedMagic]: {
      n_mirrorWasTapped: false,
      n_naked: true,
      n_tooClever: false,
    },
    [MP_wantDevice]: {
      n_mirrorWasTapped: true,
      n_naked: true,
      n_tooClever: false,
    },
    [MP_wantName]: {
      n_bottleViewed: true,
      n_mirrorWasTapped: true,
      n_naked: true,
      n_tooClever: false,
    },
    [MP_wantTouch]: {
      n_bottleNameKnown: true,
      n_bottleViewed: true,
      n_mirrorWasTapped: true,
      n_naked: true,
      n_tooClever: false,
    },
    [MP_wantPass]: {
      n_bottleNameKnown: true,
      n_bottleViewed: true,
      n_mirrorWasTapped: true,
      n_naked: true,
      n_passIsKnown: false,
      // escaped at wantPass, but pawed off, didn&#39;t try to rescue mirror,
      // didn&#39;t get contact, mirror not broken.
      n_mirrorBroken: false,
      n_tooClever: false,
    },
    [MP_onHold]: {
      impossible: true,
    },
    [MP_exitingHold]: {
      impossible: true,
    },
    [MP_contact]: {
      // can lose at contact: escaped at wantPass, didn&#39;t paw off,
      // tried to rescue mirror, said password, got brief contact,
      // mirror broken.
      n_bottleNameKnown: true,
      n_bottleViewed: true,
      n_mirrorWasTapped: true,
      n_naked: true,
      n_passIsKnown: true,
      n_free: true,
      n_ivexGone: true,
    },
    [MP_lockedOut]: {
      impossible: true,
    },
    [MP_drained]: {
      impossible: true,
    },
    [MP_tapLost]: {
      impossible: true,
    }
  },

  // this is iffy, n_ivexContext isn&#39;t meant to be consistent outside
  // of action nodes and ask nodes.
  n_ivexContext: {
    [IC_gone]: {
      n_ivexGone: true,
    },
    [IC_distant]: {
      n_ivexNear: false,
    },
  }

}

MT.checkState = (state, used, interactive, active) =&gt; {
  // Check flags
  for (const x of Object.keys(flags)) {

    // Ignore flag if it&#39;s been deleted
    if (active &amp;&amp; !(x in active)) continue;

    // Check implications for true flags
    if (!state[x]) continue;
    if (used &amp;&amp; !used.has(x)) continue;
    for (const y of Object.keys(flags[x].implies)) {
      if (used &amp;&amp; !used.has(y)) continue;
      const val = state[y] == null ? false : state[y];
      const exp = flags[x].implies[y];
      if (val !== exp) {
        if (!interactive) return false;
        const expStr = typeof exp !== &quot;boolean&quot; ? `${y} === ${exp}` : exp ? y : `!${y}`;
        MT.fail(
          `${x} === ${state[x]} should imply ${expStr}; currently, ${y} === ${state[y]}`);
      }
    }
  }

  // Check enum implications
  for (const x of Object.keys(enumImplies)) {
    const xVal = state[x] == null ? &quot;null&quot; : state[x];
    const rules = enumImplies[x][xVal];
    if (rules == null) continue;
    if (rules.impossible) {
      if (!interactive) return false;
      const sVal = MT.enumSymbol(x, state[x]);
      MT.fail(`${x} === ${sVal} should be impossible`);
      continue;
    }
    if (used &amp;&amp; !used.has(x)) continue;
    for (const y of Object.keys(rules)) {
      if (used &amp;&amp; !used.has(y)) continue;
      const val = state[y] == null ? false : state[y];
      const exp = rules[y];
      if (val !== exp) {
        if (!interactive) return false;
        const expStr = typeof exp !== &quot;boolean&quot; ? `$[y} === ${exp}` : exp ? y : `!${y}`;
        const sVal = MT.enumSymbol(x, state[x]);
        MT.fail(
          `${x} === ${sVal} should imply ${expStr}; currently, ${y} === ${state[y]}`);
      }
    }
  }
  return true;
};

const checkConstraints = () =&gt; {
  const here = State.passage;
  if (!/^n/.test(here)) return true;
  return MT.untraced(() =&gt; {
    /* note: current (incoming) state, not active state */
    return MT.checkState(
      State.current.variables, MT.trace.wasRead, true, State.active.variables);
  });
};

$(document).on(&quot;:passageend&quot;, checkConstraints);
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="189" name="g0init Nero Endings" tags="inclusion" position="1375,1200" size="100,100">&lt;&lt;script&gt;&gt;

MT.neroEndings = {
  xn_Broken: {
    title: &quot;Challenge Ending: Broken&quot;,
    passages: [
      &quot;n0a Broken WIP&quot;,
    ]
  },
  xn_CagedHarsh: {
    title: &quot;Bad Ending: Caged (Harsh)&quot;,
    passages: [
      &quot;n0a Caged Harsh WIP&quot;
    ]
  },
  xn_CagedMild: {
    title: &quot;Bad Ending: Caged (Mild)&quot;,
    passages: [
      &quot;n0a Caged Mild WIP&quot;,
    ]
  },
  xn_TamedHarsh: {
    title: &quot;Bad Ending: Tamed (Harsh, %barbs)&quot;,
    passages: [
      &quot;n9a Tamed&quot;,
      &quot;n9a Tamed Harsh 1&quot;,
      &quot;n9a Tamed Harsh 2&quot;,
      &quot;n9a Tamed Harsh 3&quot;,
      &quot;n9a Tamed Harsh 4&quot;,
      &quot;n9a Tamed Harsh 5&quot;,
      &quot;n9a Tamed Harsh 6&quot;,
      &quot;n9a Tamed Harsh 7&quot;,
      &quot;n9a Tamed Harsh 8&quot;,
      &quot;n9a Tamed Harsh 9&quot;,
      &quot;n9a Tamed End 1&quot;,
      &quot;n9a Tamed End 2&quot;,
    ]
  },
  xn_TamedMild: {
    title: &quot;Bad Ending: Tamed (Mild, %barbs)&quot;,
    passages: [
      &quot;n9a Tamed&quot;,
      &quot;n9a Tamed Mild 1&quot;,
      &quot;n9a Tamed Mild 2&quot;,
      &quot;n9a Tamed Mild 3&quot;,
      &quot;n9a Tamed Mild 4&quot;,
      &quot;n9a Tamed Mild 5&quot;,
      &quot;n9a Tamed Mild 6&quot;,
      &quot;n9a Tamed Mild 7&quot;,
      &quot;n9a Tamed Mild 8&quot;,
      &quot;n9a Tamed Mild 9&quot;,
      &quot;n9a Tamed End 1&quot;,
      &quot;n9a Tamed End 2&quot;,
    ]
  },

  // placeholders for unlock counting
  xn_HuntedMild: {},
  xn_HuntedHarsh: {},
  xn_OverwhelmedMild: {},
  xn_OverwhelmedHarsh: {},
  xn_Wrecked: {},
  
  xn_SatisfiedBlank: {},
  xn_SatisfiedMica: {},
  xn_SatisfiedPevhin: {},
  xn_Dominant: {},
  xn_Ascendant: {},
};

for (const key of Object.keys(MT.neroEndings)) {
  MT.mdDefSaved(key);
}

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="190" name="g0init Nero Glitch" tags="inclusion" position="1500,1200" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;

#glitch-1 {
  white-space: nowrap;
}
#glitch-1 a {
  background-color: rgb(0, 0, 0, 0.6);
  display: inline-block;
  height: 20px;
  left: -20px;
  position: relative;
  top: 6px;
  transform: rotate(2deg);
  width: 30px;
}
#glitch-2 {
  user-select: none;
  transition: opacity 0.5s ease-in;
}
.glitch-hidden {
  display: none;
}
.glitch-fading-in {
  opacity: 0;
}

.glitch-fading-out .glitch-v {
  background-color: #222;
  transition: color 2s ease-out, background-color 2s ease-out;
}
.glitch-fading-out .glitch-c {
  transition: color 5s ease-out, background-color 5s ease-out;
}

.glitch-fading-out .glitch-word-0 .glitch-v {
  color: rgb(200, 200, 200, .2);
}
.glitch-fading-out .glitch-word-0 .glitch-c {
  color: rgb(200, 200, 200, .9);
}

.glitch-fading-out .glitch-word-1 .glitch-v {
  color: rgb(200, 200, 200, .1);
}
.glitch-fading-out .glitch-word-1 .glitch-c {
  color: rgb(200, 200, 200, .8);
}

.glitch-fading-out .glitch-word-2 .glitch-v {
  color: rgb(200, 200, 200, 0);
}
.glitch-fading-out .glitch-word-2 .glitch-c {
  color: rgb(200, 200, 200, .6);
}

.glitch-fading-out .glitch-word-3 .glitch-v {
  color: rgb(200, 200, 200, 0);
}
.glitch-fading-out .glitch-word-3 .glitch-c {
  color: rgb(200, 200, 200, .4);
}

.glitch-fading-out .glitch-word-4 .glitch-v {
  color: rgb(200, 200, 200, .0);
}
.glitch-fading-out .glitch-word-4 .glitch-c {
  color: rgb(200, 200, 200, .2);
}

.glitch-fading-out a .glitch-v:not(#_#_#_#_) {
  background-color: #321;
}
.glitch-fading-out a .glitch-c:not(#_#_#_#_) {
  color: rgb(255, 160, 0, .2);
}

.glitch-fading-out a:hover {
  opacity: 0.8;
}

.glitch-switch {
  display: inline-grid;
}
.glitch-switch &gt; div {
  grid-column: 1/1;
  grid-row: 1/1;
}
.glitch-switch-1 {
  animation: glitch-blink 1.5s linear alternate infinite;
}
.glitch-switch-2 {
  animation: glitch-blink 1.5s linear alternate-reverse infinite;
}
@keyframes glitch-blink {
  0% {
    opacity: .4;
  }
  100% {
    opacity: .6;
  }
}

&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

const barbGlitch = [
  `&lt;span class=glitch-switch&gt;\
    &lt;div class=glitch-switch-1&gt;barbed&lt;/div&gt;\
    &lt;div class=glitch-switch-2&gt;smooth&lt;/div&gt;\
  &lt;/span&gt;`,
  `&lt;span class=glitch-switch&gt;\
    &lt;div class=glitch-switch-1&gt;smooth&lt;/div&gt;\
    &lt;div class=glitch-switch-2&gt;barbed&lt;/div&gt;\
  &lt;/span&gt;`,
];

Template.add(&quot;barbed&quot;, () =&gt; {
  const V = State.variables;
  return V.n_glitched ? barbGlitch[0] :
    V.n_barbs ? &quot;barbed&quot; : &quot;smooth&quot;;
});

Macro.add(&quot;glitch-text&quot;, {
  tags: [],
  handler: function() {
    const speed = parseInt(this.args[0] || &quot;15&quot;, 10);
    const outer = $(&quot;&lt;span id=glitch-2 class=glitch-hidden&gt;&quot;)
      .wiki(this.payload[0].contents)
      .appendTo(this.output);
    glitchWithin(outer, 0, speed);
  }
});
function glitchWithin(jq, g, speed) {
  for (const child of jq.contents()) {
    if (child.nodeType === Node.TEXT_NODE) {
      g = glitchText(child, g, speed);
    } else {
      g = glitchWithin($(child), g, speed);
    }
  }
  return g;
}
// cspell: disable-next-line
const vowels = &quot;áaeiouyAEIOUY&quot;;
function glitchText(textNode, g, speed) {
  const outer = $(&quot;&lt;span class=glitch-text&gt;&quot;);
  textNode.parentNode.replaceChild(outer[0], textNode);
  const words = textNode.nodeValue.split(/(\s+)/);
  for (const word of words) {
    if (/\s/.test(word)) {
     outer.append(word);
    } else if (word === &quot;##barbed-1##&quot;) {
      $(barbGlitch[0]).appendTo(outer);
    } else if (word === &quot;##barbed-2##&quot;) {
      $(barbGlitch[1]).appendTo(outer);
    } else {
      const gf = Math.min(Math.floor(g/speed), 4);
      g++;
      const inner = $(`&lt;span class=glitch-word-${gf}&gt;`)
        .appendTo(outer);
      for (const letter of word.split(&quot;&quot;)) {
        const isV = vowels.includes(letter);
        const c = isV ? &quot;v&quot; : &quot;c&quot;;
        $(`&lt;span class=&quot;glitch-${c}&quot;&gt;`).text(letter).appendTo(inner);
      }
    }
  }
  return g;
}

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="191" name="g0init Nero Keywords" tags="inclusion" position="1000,1325" size="100,100">&lt;&lt;script&gt;&gt;

MT.neroKeywords = {
  kn_AntiMagic: {
    title: &quot;Anti-Magic Fields&quot;,
    passages: [
      &quot;n1s Anti-magic 1&quot;,
      &quot;n1s Anti-magic 2&quot;,
    ],
  },

  kn_Dream: {
    title: &quot;Dream Crystals&quot;,
    passages: [
      &quot;n1x Dream Crystals 1&quot;,
      &quot;n1x Dream Crystals 2&quot;,
    ],
  },

  kn_Endgame: {
    title: &quot;Nero&#39;s Endgame&quot;,
    passages: [
      &quot;n1s Endgame Info 1&quot;,
      &quot;n1s Endgame Info 2&quot;,
    ],
  },

  kn_Gravity: {
    title: &quot;Gravity Crystals&quot;,
    passages: [
      &quot;n1x Gravity Crystals 1&quot;,
      &quot;n1x Gravity Crystals 2&quot;,
    ],
  },

  kn_Itch: {
    title: &quot;Superb Itch&quot;,
    passages: [
      &quot;n1s Itch 1&quot;,
      &quot;n1s Itch 2&quot;,
      &quot;n1s Itch 3&quot;,
    ],
  },

  kn_Ivex: {
    title: &quot;Ivex (the Magnificent)&quot;,
    passages: [
      &quot;n1cn Ivex Desc&quot;,
    ],
  },

  kn_Kelvin: {
    title: &quot;Kelvin the Elder&quot;,
    passages: [
      &quot;n1x Kelvin 1&quot;,
      &quot;n1x Kelvin 2&quot;,
      &quot;n1x Kelvin 3&quot;,
      &quot;n1x Kelvin 4&quot;,
      &quot;n1x Kelvin 5&quot;,
      &quot;n1x Kelvin 6&quot;,
      &quot;n1x Kelvin 7&quot;,
    ],
  },

  kn_Kopic: {
    title: &quot;Kopic Wands&quot;,
    passages: [
      &quot;n2x Kopic&quot;,
    ],
  },

  kn_Mica: {
    title: &quot;Mica Teboren&quot;,
    passages: [
      &quot;n1p Mica Extra 1&quot;,
      &quot;n1p Mica Extra 2&quot;,
      &quot;n1p Mica Extra 3&quot;,
    ],
  },

  kn_MindControlBasics: {
    title: &quot;Mind Control (Basics)&quot;,
    passages: [
      &quot;n1cr Mind Control&quot;,
    ],
  },

  kn_MindControlInhibition: {
    title: &quot;Mind Control (Inhibition)&quot;,
    passages: [
      &quot;n1cr Inhibition 1&quot;,
    ],
  },

  kn_MindControlRepression: {
    title: &quot;Mind Control (Repression)&quot;,
    passages: [
      &quot;n1cr Repression 1&quot;,
    ],
  },

  kn_MindControlSubstitution: {
    title: &quot;Mind Control (Substitution)&quot;,
    passages: [
      &quot;n1cr Substitution 1&quot;,
    ],
  },

  kn_Nackle: {
    title: &quot;Nackle&#39;s Poltergeist Device&quot;,
    passages: [
      &quot;n1x Nackle Info 1&quot;,
      &quot;n1x Nackle Info 2&quot;,
    ],
  },

  kn_Oil: {
    title: &quot;Oil of Dragons&quot;,
    passages: [
      &quot;n1s Oil Info&quot;,
    ],
  },

  kn_Pearson: {
    title: &quot;Pearson&#39;s Hangover Cantrip&quot;,
    passages: [
      &quot;n1a Hangover Info&quot;,
    ],
  },

  kn_Pevhin: {
    title: &quot;Lord Pevhin and Lady Temesca&quot;,
    passages: [
      &quot;n1p Barbs Fast 3&quot;,
      &quot;n1p Barbs Fast 4&quot;,
      &quot;n1p Barbs Fast 5&quot;,
    ]
  },

  kn_Pyron: {
    title: &quot;Pyron Nodes&quot;,
    passages: [
      &quot;n1s Pyron Node&quot;,
    ],
  },

  kn_Sprite: {
    title: &quot;Magic Sprites&quot;,
    passages: [
      &quot;n1s Sprite Info 1&quot;,
      &quot;n1s Sprite Info 2&quot;,
    ],
  },

  kn_TigerKeratin: {
    title: &quot;Strange Tiger (Keratin)&quot;,
    passages: [
      &quot;n1p Barbs Slow 4&quot;,
      &quot;n1p Barbs Slow 5&quot;,
      &quot;n1p Barbs Slow 6y1&quot;,
      &quot;n1p Barbs Slow 6y2&quot;,
    ],
  },

  kn_TigerMyth: {
    title: &quot;Strange Tiger (Myth)&quot;,
    passages: [
      &quot;n1p Barbs Slow 4&quot;,
      &quot;n1p Barbs Slow 5&quot;,
      &quot;n1p Barbs Slow 6n1&quot;,
      &quot;n1p Barbs Slow 6n2&quot;,
    ],
  },

  kn_Younger: {
    title: &quot;Younger&#39;s Escape&quot;,
    passages: [
      &quot;n1s Younger Info 1&quot;,
      &quot;n1s Younger Info 2&quot;,
      &quot;n1s Younger Info 3&quot;,
    ],
  },
};

MT.neroKeywordList = () =&gt; {
  const V = State.variables;
  const T = State.temporary;

  const keys = Object.keys(MT.neroKeywords);
  keys.sort((a, b) =&gt; {
    const at = MT.neroKeywords[a].title;
    const bt = MT.neroKeywords[b].title;
    return at &lt; bt ? -1 : at &gt; bt ? +1 : 0;
  });

  const revealAll = V.mn_playerLeftStudyWithMirror || T.lockpick;
  const mr = MT.mdRecord();
  let anyShown = false;

  let mkp = &quot;&lt;&lt;nobr&gt;&gt;&quot;;
  for (const key of keys) {
    if (!revealAll &amp;&amp; !mr[key]) continue;
    anyShown = true;
    mkp += `&lt;&lt;arc-ending ${mr[key]}`;
    mkp += ` [\[${MT.neroKeywords[key].title}|g1m Archives Entry]]`;
    mkp += ` &quot;&quot; &quot;$g_arcEntry = { name: &#39;${key}&#39; }&quot;&gt;&gt;`;
    mkp += `&lt;&lt;/arc-ending&gt;&gt;\n`;
  }
  if (!anyShown) {
    mkp += `No keywords found yet.`;
  }
  mkp += &quot;&lt;&lt;/nobr&gt;&gt;&quot;;
  return mkp;
};

/**
 * &lt;&lt;kw-unlock-soon kn_Name&gt;&gt;
 * If kwName is locked, set it to unlock at the next kw-announce.
 */
Macro.add(&quot;kw-unlock-soon&quot;, {
  handler: function() {
    const [key] = this.args;
    const kw = MT.neroKeywords[key];
    if (kw == null) {
      throw new Error(`kw-unlock-soon ${key} not found`);
    }
    const V = State.variables;
    if (!State.variables[key]) {
      if (V.n_kwAnnounce != null &amp;&amp; V.n_kwAnnounce !== key) {
        throw new Error(`conflicting kwAnnounce ${key} ${V.n_kwAnnounce}`);
      }
      V.n_kwAnnounce = key;
      State.temporary.kwUnlocking = true;
    }
  }
});

/**
 * &lt;&lt;kw-announce&gt;&gt;
 * If a kw unlock is pending, do it, and announce it.
 */
Macro.add(&quot;kw-announce&quot;, {
  handler: function() {
    const V = State.variables;
    const key = V.n_kwAnnounce;
    if (key == null) return;

    delete V.n_kwAnnounce;
    const kw = MT.neroKeywords[key];
    if (kw == null) {
      throw new Error(`kw-announce ${key} not found`);
    }

    MT.mdSet(key, true);

    $(this.output).wiki(
      `&lt;meta-text&gt;\
        The Archives have unlocked Keyword: ${kw.title}.\
      &lt;/meta-text&gt;\
      ?P`);
  }
});

function neroKeywordInit() {
  Object.keys(MT.neroKeywords).map(MT.mdDefSaved);

  $(document).on(&quot;:passageend&quot;, () =&gt; {
    const T = State.temporary;
    const V = State.variables;
    const isMenu = tags().includes(&quot;is-menu&quot;);
    if (!T.kwUnlocking &amp;&amp; V.n_kwAnnounce != null &amp;&amp; !isMenu) {
      MT.fail(`missing kw-announce for ${V.n_kwAnnounce}`);
    }
  });
}

neroKeywordInit();

&lt;&lt;/script&gt;&gt;\</tw-passagedata><tw-passagedata pid="192" name="g0init Nero Metadata" tags="inclusion" position="1125,1325" size="100,100">&lt;&lt;script&gt;&gt;

// archive selections
MT.mdDefUnsaved(&quot;mn_arcBrokenBarbs&quot;);
MT.mdDefUnsaved(&quot;mn_arcCagedBarbs&quot;);
MT.mdDefUnsaved(&quot;mn_arcCagedVariant&quot;);
MT.mdDefUnsaved(&quot;mn_arcHuntedVariant&quot;);
MT.mdDefUnsaved(&quot;mn_arcOverwhelmedVariant&quot;);
MT.mdDefUnsaved(&quot;mn_arcSatisfiedVariant&quot;);
MT.mdDefUnsaved(&quot;mn_arcTamedBarbs&quot;);
MT.mdDefUnsaved(&quot;mn_arcTamedVariant&quot;);

// things the player has done, which affect hints
// these are not saved, because player might load someone else&#39;s saved game
MT.mdDefUnsaved(&quot;mn_playerReadGlitch&quot;);
MT.mdDefUnsaved(&quot;mn_playerLeftStudyNoMirror&quot;);
MT.mdDefUnsaved(&quot;mn_playerLeftStudyWithMirror&quot;);
MT.mdDefUnsaved(&quot;mn_playerLostEndgame&quot;);

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="193" name="g0init Nero Misfire" tags="inclusion" position="1250,1325" size="100,100">&lt;&lt;script&gt;&gt;

/**
 * &lt;&lt;mf-please&gt;&gt;
 *   $text
 * &lt;&lt;mf-else&gt;&gt;
 *   $otherText
 * &lt;&lt;/mf-please&gt;&gt;
 *
 * Nero has said something with &quot;please&quot;, and the Sprite misinterprets
 * it as a command. Emits $text.
 * 
 * If Sprite is inactive or waiting for a password, emits $otherText instead.
 */
Macro.add(&quot;mf-please&quot;, {
  tags: [&quot;mf-else&quot;],
  handler: function() {
    const V = MT.untracedVars();
    let ready = true;
    ready = ready &amp;&amp; V.n_magicPhase &gt;= MP_wantDevice;
    ready = ready &amp;&amp; V.n_magicPhase &lt; MP_drained;
    ready = ready &amp;&amp; MP_wantPass !== V.n_magicPhase;
    if (ready) {
      $(this.output).wiki(this.payload[0].contents);
    } else {
      const pl = this.payload[1];
      if (pl != null &amp;&amp; pl.name === &quot;mf-else&quot;) {
        $(this.output).wiki(pl.contents);
      }
    }
  }
});

/**
 * &lt;&lt;mf-pass $pw&gt;&gt;
 *   $moreText
 * &lt;&lt;mf-else&gt;&gt;
 *   $otherText
 * &lt;&lt;/mf-pass&gt;&gt;
 *
 * Nero has said something that the Sprite misinterprets as a password.
 * This starts that process, emits text from the Sprite, and then $moreText.
 * 
 * If Sprite is not asking for a password, emits $otherText instead.
 */
Macro.add(&quot;mf-pass&quot;, {
  tags: [&quot;mf-else&quot;],
  handler: function() {
    const [pw] = this.args;
    const V = State.variables;
    if (pw == null || pw === &quot;&quot; || MP_wantPass !== V.n_magicPhase) {
      const pl = this.payload[1];
      if (pl != null &amp;&amp; pl.name === &quot;mf-else&quot;) {
        $(this.output).wiki(pl.contents);
      }
      return;
    }

    // usually already set, except when debugging
    const tried = JSON.parse(V.n_passTried || &quot;[]&quot;);
    tried.unshift(`#${pw}`);
    V.n_passTried = JSON.stringify(tried);
    V.n_magicPhase = MP_onHold;
    let mkp = `&lt;&lt;nobr&gt;&gt;`;
    mkp += ` ?P`;
    mkp += ` The Sprite ?sprSpeaks in Nero&#39;s ear.`;
    mkp += ` &lt;span class=sprite-q&gt;&quot;Hm, that password doesn&#39;t sound right`;
    mkp += ` either, ?master`;
    mkp += ` Please hold while I double-check it, ?master&quot;&lt;/span&gt;`;
    mkp += this.payload[0].contents;
    mkp += ` &lt;&lt;/nobr&gt;&gt;`;
    $(this.output).wiki(mkp);
    // for gathering stats in random-walks
    console.log(`mf-pass ${pw}`);
  }
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="194" name="g0init Nero Password" tags="inclusion" position="1375,1325" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;
#passages:not(.pw-debug-show) .pw-debug &gt; :not(label) {
  display: none;
}
span.debug:has(&gt; .pw-debug) + wbr + span.debug &gt; .pw-debug &gt; label {
  display: none;
}

&lt;/style&gt;&lt;&lt;/append&gt;&gt;
&lt;&lt;script&gt;&gt;
const sayPassword = &quot;n1s Say Password&quot;;

window.PW_621 = &quot;621&quot;;
window.PW_blood = &quot;Blood&quot;;
window.PW_carpe = &quot;Carpe Diem&quot;;
window.PW_fuckToy = &quot;Fuck Toy 9000&quot;;
window.PW_hunter = &quot;Hunter Too&quot;;
window.PW_ivex = &quot;Ivex the Magnificent&quot;;
window.PW_ivy = &quot;Ivy&quot;;
window.PW_lance = &quot;Lance Rockhard&quot;;
window.PW_liskov = &quot;Caverns of Liskov&quot;;
window.PW_luminance = &quot;Caverns of Luminance&quot;;
window.PW_password = &quot;Password&quot;;
window.PW_ransamaran = &quot;Ransamaran Ivory&quot;;
window.PW_red = &quot;Red&quot;;
window.PW_too = &quot;T-O-O&quot;;
window.PW_uramos = &quot;Uramos&quot;;

/*
 * Passwords starting with &quot;#&quot; are from mf-pass.
 * Everything else should either be in basicPasswords or otherPasswords.
 */

MT.basicPasswords = {};
{
  const bp = MT.basicPasswords;
  bp[PW_ivex] = &quot;the egotistical choice&quot;;
  bp[PW_ransamaran] = &quot;the mage school that Ivex attended&quot;;
  bp[PW_password] = &quot;a common password&quot;;
}

MT.otherPasswords = {};
{
  const op = MT.otherPasswords;
  /* books */
  op[PW_621] = &quot;the year that Ivex graduated from high school&quot;;
  // never succeed at getting high school name

  /* bottle */
  op[PW_lance] = &quot;the name of the enormous horse dildo&quot;;

  /* candle */
  op[PW_red] = &quot;the color of the candle&quot;;
  op[PW_blood] = &quot;another name for the candle&#39;s color&quot;;

  /* globe */
  op[PW_carpe] = &quot;the slogan on the pillar in the snow globe&quot;;
  op[PW_liskov] = &quot;a plausible source of Ivex&#39;s snow globe&quot;;
  op[PW_luminance] = &quot;the most likely source of Ivex&#39;s snow globe&quot;;

  /* map */
  op[PW_uramos] = &quot;the circle marked on the map&quot;;
  // never succeed at identifying the X

  /* penguin */
  op[PW_hunter] = &quot;the name of Ivex&#39;s penguin&quot;;
  op[PW_too] = &quot;a failure to say the name of Ivex&#39;s penguin&quot;;

  /* painting */
  op[PW_ivy] = &quot;the name of Ivex&#39;s mother&quot;;

  /* wand */
  op[PW_fuckToy] = &quot;the name of Ivex&#39;s wand&quot;;
};

/* Sprite responses spell out numbers and letters. */
const passSprite = {};
{
  const ps = passSprite;
  ps[PW_621] = &quot;Six Twenty One&quot;;
  ps[PW_fuckToy] = &quot;Fuck Toy Nine Thousand&quot;;
  ps[PW_too] = &quot;Tee Oh Oh&quot;;
}

/* Sprite has a few special wrong-password messages */
const oldPasswords = {};
{
  const op = oldPasswords;
  op[PW_carpe] = &quot;is not your password yet, ?master&quot;;
  op[PW_ivex] = &quot;is obviously not your password, ?master&quot;;
  op[PW_password] = &quot;is your mother&#39;s maiden name, not your password, ?master&quot;;
  op[&quot;I&#39;m Sorry To Interrupt&quot;] = &quot;was last year&#39;s password, ?master&quot;;
  op[&quot;I Have A Question For You&quot;] = &quot;was last month&#39;s password, ?master&quot;;
}

let pwDebugAlready = false;
$(document).on(&quot;:passagestart&quot;, () =&gt; {
  pwDebugAlready = false;
});

/**
 * &lt;&lt;pw-found $pw&gt;&gt;
 * Add pw to passFound.
 * Can be used for things that Nero sees before he knows he needs a password.
 */
Macro.add(&quot;pw-found&quot;, {
  handler: function() {
    const [pw] = this.args;
    if (MT.otherPasswords[pw] == null) {
      throw new Error(`pw-found ${pw} undeclared password`);
    }
    const V = State.variables;
    const found = JSON.parse(V.n_passFound || &quot;[]&quot;);
    found.push(pw);
    V.n_passFound = JSON.stringify(found);
  }
});

/**
 * &lt;&lt;pw-suggest $pw1&gt;&gt;
 *     $storyText1
 * &lt;&lt;pw-another $pw2&gt;&gt;
 *     $storyText2
 * &lt;&lt;pw-fail&gt;&gt;
 *     $storyTextFail
 * &lt;&lt;/pw-suggest&gt;&gt;
 * Only does something when wantPass or onHold.
 * The first pw that isn&#39;t in passTried gets added to passFound,
 * and the corresponding text gets shown.
 * The passwords are not added to passFound until their text is shown,
 * so if a context suggests several passwords at the same time,
 * use &lt;&lt;pw-found&gt;&gt;.
 * If all the passwords in the block have been tried, show pw-fail text.
 * Also adds an action to say the password.
 */
Macro.add(&quot;pw-suggest&quot;, {
  tags: [&quot;pw-another&quot;, &quot;pw-fail&quot;],
  handler: function() {
    const T = State.temporary;
    const V = State.variables;
    const wantPass = MP_wantPass === V.n_magicPhase;
    const onHold = MP_onHold === V.n_magicPhase
      || MP_exitingHold === V.n_magicPhase;
    if (!wantPass &amp;&amp; !onHold) return;

    // check that all clauses have declared passwords
    for (const p of this.payload) {
      if (p.name === &quot;pw-fail&quot;) continue;
      const [pw] = p.args;
      if (MT.otherPasswords[pw] == null) {
        throw new Error(`${payload.name} ${pw} undeclared password`);
      }
    }

    const tried = JSON.parse(V.n_passTried || &quot;[]&quot;);
    const found = JSON.parse(V.n_passFound || &quot;[]&quot;);

    let allFailed = true;
    for (const p of this.payload) {
      if (p.name === &quot;pw-fail&quot;) continue;
      const [pw] = p.args;
      if (tried.includes(pw)) continue;

      allFailed = false;
      if (!found.includes(pw)) {
        found.push(pw);
        V.n_passFound = JSON.stringify(found);
      }
      $(this.output).wiki(p.contents);
      if (wantPass) {
        const text =`Tell the Sprite, &quot;${pw}&quot;.`;
        const code = `$n_passToTry = &quot;${pw}&quot;`;
        T.pwActions ||= &quot;&quot;;
        T.pwActions += `&lt;li&gt;[\[\`${text}\`|${sayPassword}][${code}]]&lt;/li&gt;`;
      } else {
        $(this.output).append(
          `Nero will have to remember to try it when the
          Sprite is ready for another guess.`);
      }
      break;
    }

    if (allFailed) {
      const p = this.payload.find(p =&gt; p.name === &quot;pw-fail&quot;);
      if (p !== null) $(this.output).wiki(p.contents);
    }

    if (setup.debug) {
      let debug = !!session.get(&quot;pw-debug&quot;);
      $(&quot;#passages&quot;).toggleClass(&quot;pw-debug-show&quot;, debug);
      const outer = $(&quot;&lt;span class=pw-debug&gt;&quot;).appendTo(this.output);
      $(&quot;&lt;label&gt;&quot;).append(&quot; &amp;#x1f527;&quot;).appendTo(outer)
        .click(() =&gt; {
          debug = !debug;
          session.set(&quot;pw-debug&quot;, debug);
          $(&quot;#passages&quot;).toggleClass(&quot;pw-debug-show&quot;, debug);
        });
      if (!pwDebugAlready) {
        pwDebugAlready = true;
        $(&quot;&lt;a&gt;&quot;).text(&quot; (reset)&quot;).appendTo(outer)
          .on(&quot;click&quot;, () =&gt; MT.revisitHere(() =&gt; {
            const V = State.variables;
            V.n_passTried = &quot;[]&quot;;
          }));
      }
      for (const p of this.payload) {
        if (p.name === &quot;pw-fail&quot;) continue;
        const [pw] = p.args;
        if (tried.includes(pw)) continue;
        $(&quot;&lt;a&gt;&quot;).text(` (try ${pw})`).appendTo(outer)
          .on(&quot;click&quot;, () =&gt; MT.revisitHere(() =&gt; {
            const V = State.variables;
            const tried = JSON.parse(V.n_passTried || &quot;[]&quot;);
            tried.push(pw);
            V.n_passTried = JSON.stringify(tried);
          }));
      }
    }
  }
});

/** True if Nero is waiting for another password attempt. */
MT.passAgainSoon = () =&gt; {
  const V = State.variables;
  const mp = V.n_magicPhase;
  if (MP_onHold === mp || MP_exitingHold === mp) {
    const tried = JSON.parse(V.n_passTried || &quot;[]&quot;);
    return tried.length !== 3;
  }
  return false;
};

/** True if Nero is looking for a password. */
MT.passWanted = () =&gt; {
  const V = State.variables;
  const mp = V.n_magicPhase;
  if (MP_wantPass === V.n_magicPhase) return true;
  return MT.passAgainSoon();
};

Template.add(&quot;sprBadPass&quot;, () =&gt; {
  const V = State.variables;

  const tried = JSON.parse(V.n_passTried || &#39;[&quot;#bug&quot;]&#39;);
  const pw = tried[0].replace(/^#/, &quot;&quot;);

  let mkp = `&lt;em&gt;${pw}&lt;/em&gt; `;
  if (passSprite[pw] != null) {
    mkp = `&lt;em&gt;${passSprite[pw]}&lt;/em&gt; `;
  }

  // oldPassword joke detracts from the tried joke
  if (oldPasswords[pw] &amp;&amp; tried.length !== 2) {
    mkp += oldPasswords[pw];
  } else {
    mkp += &quot;is not the correct password, ?master&quot;;
  }

  switch (tried.length) {
    case 1:
      mkp += &quot; You have two tries&quot;;
      break;
    case 2:
      mkp += &quot; You have only one&quot;
        + &quot; &lt;span class=sprite-squish&gt;look up the singular form of the word&quot;
        + &quot; and use it here also remind me to figure out how to bind the&quot;
        + &quot; Sprite to my voice in case I ever capture a mage who knows how&quot;
        + &quot; to activate it&lt;/span&gt;&quot;;
      break;
    case 3:
      mkp += &quot; You have zero tries&quot;;
      break;
    case 4:
      mkp += &quot; You have no more tries&quot;;
      break;
    default:
      throw new Error(`unexpected passTried ${V.n_passTried}`);
  }
  return mkp;
});

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="195" name="g0init Nero Patience" tags="inclusion" position="1500,1325" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;
.patience-debug:not(.patience-debug-show) &gt; :not(label) {
  display: none;
}
&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;
/**
 * &lt;&lt;n1-patience $looks $actions&gt;&gt;
 *     $firstText
 * &lt;&lt;n1-remind&gt;&gt;
 *     $remindText
 * &lt;&lt;n1-repeat&gt;&gt;
 *     $repeatText
 * &lt;&lt;n1-warn&gt;&gt;
 *     $warnText
 * &lt;&lt;n1-insist&gt;&gt;
 *     $insistText
 * &lt;&lt;/n1-patience&gt;&gt;
 *
 * Basically, player can do $looks-1 or $actions-1 before getting $warnText.
 * Once you see $warnText, the next look or action will get $insistText.
 *
 * Max looks/actions before warn is
 *    1 + ($looks - 2 + $actions - 2) === $looks + $actions - 3
 * Plus warn and insist, max times player is at node is
 *    $looks + $actions - 1
 *
 * If visiting this node for the first time
 *   - set look count and action count
 *   - emit $firstText
 * If returning from look or action, and either count is 0
 *   - emit $insistText
 *   - suppress looks and actions
 * If returning from look or action, and either count is now 1,
 *   - set both counts to 1
 *   - emit $warnText
 * If returning from look
 *   - emit $remindText
 * If returning from action
 *   - emit $repeatText
 */
Macro.add(&quot;n1-patience&quot;, {
  tags: [&quot;n1-remind&quot;, &quot;n1-repeat&quot;, &quot;n1-warn&quot;, &quot;n1-insist&quot;],
  handler: function() {
    let [looks, actions] = this.args;

    let firstText, remindText, repeatText, warnText, insistText;
    for (const p of this.payload) {
      switch (p.name) {
        case &quot;n1-patience&quot;: firstText = p.contents; break;
        case &quot;n1-remind&quot;: remindText = p.contents; break;
        case &quot;n1-repeat&quot;: repeatText = p.contents; break;
        case &quot;n1-warn&quot;: warnText = p.contents; break;
        case &quot;n1-insist&quot;: insistText = p.contents; break;
        default: throw new Error(`bug n1-patience ${p.name}`);
      }
    }
    if (looks &gt; 2) MT.assert(remindText != null, &quot;should have n1-remind&quot;);
    if (looks &lt;= 2) MT.assert(remindText == null, &quot;should NOT have n1-remind&quot;);
    if (actions &gt; 2) MT.assert(repeatText != null, &quot;should have n1-repeat&quot;);
    if (actions &lt;= 2) MT.assert(repeatText == null, &quot;should NOT have n1-repeat&quot;);
    if (actions === 1) MT.assert(looks === 1, &quot;actions === 1 should have looks === 1&quot;);
    if (looks === 1) MT.assert(actions === 1, &quot;looks === 1 should have actions === 1&quot;);
    if (actions === 1) MT.assert(firstText.trim() === &quot;&quot;, &quot;should have empty initial text&quot;);
    MT.assert(warnText != null, &quot;should have n1-warn&quot;);
    MT.assert(insistText != null, &quot;should have n1-insist&quot;);

    const V = State.variables;
    const T = State.temporary;
    const here = T.tranPassage || State.passage;

    if (V.n_patiencePassage !== here) {
      // This is our first visit here
      V.n_patienceLooks = looks;
      V.n_patienceActions = actions;
      V.n_patiencePassage = here;
      V.n_patienceReturn = 0;
    } else if (V.n_patienceReturn === 1) {
      // Return from look
      V.n_patienceLooks--;
    } else if (V.n_patienceReturn === 2) {
      // Return from action
      V.n_patienceActions--;
      V.n_didSomeAction = true;
    }
    T.patienceAdvanced = V.n_patienceReturn &gt; 0;

    // lose patience immediately
    if (V.n_patienceAccel &amp;&amp; T.patienceAdvanced) {
      V.n_patienceLooks = 0;
      V.n_patienceActions = 0;
    }
    V.n_patienceAccel = false;


    T.patience = Math.min(V.n_patienceLooks, V.n_patienceActions);

    // At warn state, only allow 1 more look or action.
    if (T.patience === 1) {
      V.n_patienceLooks = 1;
      V.n_patienceActions = 1;
    }

    // set return links
    V.n_afterLook = `[\[Do something else.|${here}][$n_patienceReturn = 1]]`;
    V.n_afterLookContinue = `[\[Continue|${here}][$n_patienceReturn = 1]]`;
    // V.n_afterActionAbort = `[\[Do something else.|${here}][$n_patienceReturn = 2]]`;
    V.n_afterAction = `[\[Continue|${here}][$n_patienceReturn = 2]]`;
    V.n_afterAttack = V.n_afterAction;

    // Patience text
    if (T.patience &lt;= 0) {
      $(this.output).wiki(insistText);
    } else if (T.patience === 1) {
      $(this.output).wiki(warnText);
    } else {
      switch (V.n_patienceReturn) {
        case 0: $(this.output).wiki(firstText); break;
        case 1: $(this.output).wiki(remindText); break;
        case 2: $(this.output).wiki(repeatText); break;
        default: throw new Error(`bug: patienceReturn ${V.n_patienceReturn}`);
      }
    }
    V.n_patienceReturn = 0;

    if (setup.debug) {
      let debug = !!session.get(&quot;patience-debug&quot;);
      const outer = $(&quot;&lt;span class=patience-debug&gt;&quot;).appendTo(this.output)
        .toggleClass(&quot;patience-debug-show&quot;, debug);
      $(&quot;&lt;label&gt;&quot;).append(&quot; &amp;#x1f527;&quot;).appendTo(outer)
        .click(() =&gt; {
          debug = !debug;
          session.set(&quot;patience-debug&quot;, debug);
          outer.toggleClass(&quot;patience-debug-show&quot;, debug);
        });
      $(&quot;&lt;a&gt;&quot;).text(&quot;(reset)&quot;).appendTo(outer)
        .click(() =&gt; MT.revisitHere(() =&gt; {
          const V = State.variables;
          V.n_patiencePassage = null;
          V.n_lustTextPos = null;
        }));
      if (looks &gt; 2) {
        $(&quot;&lt;a&gt;&quot;).text(&quot; (remind)&quot;).appendTo(outer)
          .click(() =&gt; MT.revisitHere(v0 =&gt; {
            const V = State.variables;
            V.n_patiencePassage = here;
            V.n_patienceActions = Math.max(2, v0.n_patienceActions);
            V.n_patienceLooks = Math.max(2, v0.n_patienceLooks);
            V.n_patienceReturn = 1;
            V.n_lustTextPos = Math.min(v0.n_lustTextPos || 0, 4);
          }));
      }
      if (actions &gt; 2) {
        $(&quot;&lt;a&gt;&quot;).text(&quot; (repeat)&quot;).appendTo(outer)
          .click(() =&gt; MT.revisitHere(v0 =&gt; {
            const V = State.variables;
            V.n_patiencePassage = here;
            V.n_patienceActions = Math.max(2, v0.n_patienceActions);
            V.n_patienceLooks = Math.max(2, v0.n_patienceLooks);
            V.n_patienceReturn = 2;
            V.n_lustTextPos = Math.min(v0.n_lustTextPos || 0, 4);
          }));
      }
      if (looks &gt; 1 &amp;&amp; actions &gt; 1) {
        $(&quot;&lt;a&gt;&quot;).text(&quot; (warn)&quot;).appendTo(outer)
          .click(() =&gt; MT.revisitHere(() =&gt; {
            const V = State.variables;
            V.n_patiencePassage = here;
            V.n_patienceActions = 1;
            V.n_patienceLooks = 1;
            V.n_patienceReturn = -1;
          }));
      }
      $(&quot;&lt;a&gt;&quot;).text(&quot; (insist)&quot;).appendTo(outer)
        .click(() =&gt; MT.revisitHere(() =&gt; {
          const V = State.variables;
          V.n_patiencePassage = here;
          V.n_patienceActions = 0;
          V.n_patienceLooks = 0;
          V.n_patienceReturn = -1;
        }));
    }
  }
});

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="196" name="g0init Nero Taming" tags="inclusion" position="1000,1450" size="100,100">&lt;&lt;append head&gt;&gt;
&lt;style&gt;

.tame-word {
  transition: all 2s ease-in;
  background-color: #111;
  color: #eee;
}

.tame-fade .tame-word,
.tame-gone {
  background-color: #888;
  color: #888;
}

.tran-entry #tame-2 .tame-word {
  background-color: #555;
  color: #bbb;
}

.tran-entry #tame-2 .tame-word ~ .tame-word {
  background-color: #777;
  color: #999;
}

.tame-hide {
  opacity: 0;
  transition: all .5s ease-in;
}

.tame-unhide {
  opacity: 1;
}

&lt;/style&gt;
&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

MT.startTaming = () =&gt; {
  const passage = $(&quot;.passage&quot;);
  setTimeout(() =&gt; passage.addClass(&quot;tame-fade&quot;), 200);
};

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="197" name="g0init Nero Templates" tags="inclusion" position="1125,1450" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;

.master-quiet {
  font-size: 18px;
  font-weight: bold;
  position: relative;
  text-transform: uppercase;
  top: 1px;
}
.nero-blank {
  color: rgba(0, 0, 0, 0);
  font-family: monospace;
  user-select: none;
}
.nero-blank-c {
  background-color: #333;
  letter-spacing: 1px;
  margin-right: 1px;
}
.nero-blank .glitch-c:not(#_#_#_#_),
.nero-blank .glitch-v:not(#_#_#_#_) {
  background-color: #333;
  color: rgba(0, 0, 0, 0);
}

.sprite-squish {
  letter-spacing: -1px;
  margin-right: .1em;
  word-spacing: -2px;
}

&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

Template.add(&quot;blank&quot;,
  &quot;&lt;span class=nero-blank&gt;&quot; +
    &quot;&lt;span class=nero-blank-c&gt;&quot; +
      &quot;Blank&quot;.split(&quot;&quot;).join(&quot;&lt;/span&gt;&lt;span class=nero-blank-c&gt;&quot;) +
    &quot;&lt;/span&gt;&quot; +
  &quot;&lt;/span&gt;&quot;);

function master(p1, p2) {
  const V = State.variables;
  const name = V.n_opportunist ? &quot;An Opportunist&quot; : &quot;Master&quot;;
  if (V.n_spriteQuiet) {
    return `&lt;span class=master-quiet&gt;${name}${p2}&lt;/span&gt;`;
  } else {
    return `${name}${p1}`;
  }
}
Template.add(&quot;master&quot;, () =&gt; master(&quot;.&quot;, &quot;!&quot;));
Template.add(&quot;masterN&quot;, () =&gt; master(&quot;&quot;, &quot;&quot;));
Template.add(&quot;masterQ&quot;, () =&gt; master(&quot;?&quot;, &quot;!?&quot;));
Template.add(&quot;masterX&quot;, () =&gt; master(&quot;!&quot;, &quot;!&quot;));

Template.add(&quot;spell&quot;, () =&gt; {
  const V = State.variables;
  if (V.n_castEndgame) {
    return &quot;his Endgame spell&quot;;
  } else if (V.n_castItch) {
    return &quot;his Superb Itch&quot;;
  } else if (V.n_castOil) {
    return &quot;his Oil of Dragons spell&quot;;
  } else if (V.n_castYounger) {
    return &quot;Younger&#39;s Escape&quot;;
  } else {
    throw new Error(&quot;bug: cast an unknown spell?&quot;);
  }
});

Template.add(&quot;crystals&quot;, () =&gt; {
  const V = State.variables;
  const U = MT.untracedVars();
  if (V.n_gravKnown) {
    return &quot;Gravity Crystals&quot;;
  } else if (V.n_gravViewed) {
    if (V.n_struggleKnown || U.n_free) {
      return &quot;mysterious crystals&quot;;
    } else {
      return &quot;Dream Crystals&quot;;
    }
  } else {
    return &quot;glowing crystals&quot;;
  }
});

Template.add(&quot;globe&quot;, () =&gt; {
  const V = state.variables;
  return V.n_globeViewed || V.n_globeAskedHorny
    ? &quot;snow globe&quot; : &quot;arcane globe&quot;;
});

Template.add(&quot;mirror&quot;, () =&gt; {
  const V = State.variables;
  if (V.n_mirrorBroken) {
    return &quot;broken mirror&quot;;
  } else if (V.n_mirrorMagicKnown) {
    return &quot;magic mirror&quot;;
  } else {
    return &quot;hand mirror&quot;;
  }
});

Template.add(&quot;sprSays&quot;, () =&gt; {
  const V = State.variables;
  return V.n_spriteQuiet ? &quot;whispers&quot; : &quot;says&quot;;
});
Template.add(&quot;sprSpeaks&quot;, () =&gt; {
  const V = State.variables;
  return V.n_spriteQuiet ? &quot;whispers&quot; : &quot;speaks&quot;;
});

Template.add(&quot;sprHoldStop&quot;, () =&gt; {
  const V = State.variables;
  let mkp = `?master`;
  if (MP_onHold === V.n_magicPhase) {
    mkp += ` Also, ?sprBadPass`;
    // cspell: disable-next-line
    mkp += ` &lt;span class=nobr&gt;remai&amp;mdash;&lt;/span&gt;`;
    mkp += ` Wait a minute, I dropped something, ?master`;
    V.n_magicPhase = MP_exitingHold;
  }
  return mkp;
});

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="198" name="g0init Notes" tags="inclusion" position="200,2200" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;
  #notes-button {
    background-color: rgb(255, 255, 255, 0.2);
    border: 1px solid transparent;
    border-radius: 4px;
    color: #000;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    font-size: 14px;
    gap: 4px;
    opacity: 0.5;
    padding: 2px 4px;
    position: fixed;
    right: 4px;
    text-align: right;
    top: 20px;
    z-index: 20;
  }
  #notes-line-1 {
    font-size: 18px;
  }
  #notes-button.notes-non-zero {
    border-color: rgb(255, 255, 255, 0.4);
  }
  #notes-button.notes-non-zero #notes-count {
    color: rgb(255, 255, 255, 0.8);
    font-weight: bold;
  }
  #notes-button:hover {
    background-color: #333;
    border-color: #eee;
    color: #eee;
    opacity: 1;
  }
  #notes-line-2::before {
    content: &quot;\e801\0020&quot;;
    font-family: tme-fa-icons;
  }
  #notes-button.notes-non-zero #notes-line-2::before {
    color: rgb(255, 255, 255, 0.8);
  }
  #notes-button.notes-has-note #notes-line-2::before {
    content: &quot;\e800\0020&quot;;
  }
  #notes-button.notes-has-note:hover #notes-line-2::before {
    color: #cc0;
  }
  .notes-buttons button {
    background-color: #000;
    border-color: #840;
    border-radius: 8px;
    color: #ffa000;
    margin: .2rem .2rem .5rem 0;
    padding: .3rem .4rem;
  }
  .notes-buttons button:disabled {
    border-color: #444;
    color: #444;
  }
  .notes-buttons button:hover:not(:disabled) {
    background-color: #c67100;
    color: #fff;
  }
  #notes-input,
  #notes-conflict textarea {
    border-radius: 8px;
    height: 9em;
    line-height: 1.4;
    max-width: 100%;
    min-width: 5em;
    width: min(90%, 30em);
  }
  #notes-conflict {
    display: none;
  }
  #notes-conflict.notes-has-conflict {
    display: block;
  }
&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

MT.selectedText = &quot;&quot;;

const popupTitle = &quot;g1m Notes Popup&quot;;

// State.metadata.get always deflates and deserializes from localStorage, but:
// - we almost always want the localStorage value that might be modified
//   by another tab.
// - the cacheable calls to getAll don&#39;t happen often enough to make it
//   worth caching.

MT.notesGetAll = () =&gt; {
  let all = State.metadata.get(&quot;notes&quot;) || &quot;&quot;;

  // migrate old -F names
  all = all.replace(/^(\[passage\s+n\d\w+)-[FDS]\s/gm, &quot;$1&quot;);

  return all;
};
const setAll = val =&gt; State.metadata.set(&quot;notes&quot;, val);

function getStats(passage) {
  let count = 0;
  let hasNoteHere = false;
  const nFull = &quot;\n&quot; + MT.notesGetAll();
  for (const m of nFull.matchAll(/\n\[passage ([^\n\]]+)\]\n/g)) {
    count += 1;
    if (m[1] === passage) hasNoteHere = true;
  }
  return { count, hasNoteHere };
}

MT.notesTryReplaceAll = (old, val) =&gt; {
  const cur = MT.notesGetAll().trimEnd();
  if (old.trimEnd() !== cur) return cur;
  val = val.trimEnd();
  setAll(val);
  updateStatus();
  return val;
};

MT.notesCleanup = (text) =&gt; {
  text = &quot;\n&quot; + text + &quot;\n&quot;;
  const parts = text.split(/\n\[passage\s+(.*?)\]\s*?\n/);
  const before = parts.shift().trimEnd().slice(1);
  const keep = [];
  for (let i = 0; i &lt; parts.length; i += 2) {
    const passage = parts[i].trim();
    const body = parts[i+1].trimEnd();
    if (body === &quot;&quot;) continue;
    keep.push([passage, body]);
  }
  keep.sort((a, b) =&gt; a[0] &lt; b[0] ? -1 : a[0] &gt; b[0] ? +1 : 0);
  let result = &quot;&quot;;
  if (before !== &quot;&quot;) result += before + &quot;\n&quot;;
  for (const [passage, body] of keep) {
    result += `[passage ${passage}]\n${body}\n\n`;
  }
  return result;
};

function splitAt(passage, text) {
  let nText = &quot;\n&quot; + text;
  if (nText.slice(-1) !== &quot;\n&quot;) nText += &quot;\n&quot;;
  const nHeader = `\n[passage ${passage}]\n`;
  let pos = 0;
  while ((pos = nText.indexOf(nHeader, pos)) &gt;= 0) {
    let end = nText.indexOf(&quot;\n[passage &quot;, pos + 1);
    if (end &lt; 0) end = nText.length;
    return {
      before: nText.slice(1, pos + 1),
      header: nText.slice(pos + 1, pos + nHeader.length),
      body: nText.slice(pos + nHeader.length, end + 1).trimEnd(),
      after: nText.slice(end + 1).trimEnd(),
    };
  }
  return {
    before: nText.slice(1),
    header: nHeader.slice(1),
    body: &quot;&quot;,
    after: &quot;&quot;,
  };
}

MT.notesGet = (passage) =&gt; {
  const full = MT.notesGetAll();
  const split = splitAt(passage, full);
  return split.body;
};

/** If passage note is old, overwrite it with val, then returns the note (either val or conflict) */
MT.notesTryReplace = (passage, old, val) =&gt; {
  const full = MT.notesGetAll();
  const sp = splitAt(passage, full);
  if (sp.body !== old.trimEnd()) return sp.body;
  const replace = /\S/.test(val) ? sp.header + val.trimEnd() +&quot;\n\n&quot; : &quot;&quot;;
  const next = sp.before + replace + sp.after;
  setAll(next);
  updateStatus();
  return val.trimEnd();
};

// capture selection before click deselects it
function pointerDown() {
  MT.selectedText = getSelection().toString().trim();
}

function openPopup() {
  const V = State.variables;
  const T = State.temporary;
  V.n_notesOrigin = State.passage;
  if (T.notesVariant != null) {
    V.n_notesOrigin += &quot; - &quot; + T.notesVariant;
  }
  const popupText = Story.get(popupTitle).text;
  Dialog.setup(&quot;&quot;);
  Dialog.wiki(popupText);
  Dialog.open();
}

function renderButton() {
  $(&quot;#notes-button&quot;).remove();
  const outer = $(&quot;&lt;div&gt;&quot;)
    .attr(&quot;id&quot;, &quot;notes-button&quot;)
    .on(&quot;pointerdown&quot;, pointerDown)
    .on(&quot;click&quot;, openPopup)
    .appendTo(&quot;#story&quot;);
  $(&quot;&lt;div&gt;&quot;).attr(&quot;id&quot;, &quot;notes-line-1&quot;).text(&quot;notes&quot;).appendTo(outer);
  const line2 = $(&quot;&lt;div&gt;&quot;).attr(&quot;id&quot;, &quot;notes-line-2&quot;).appendTo(outer);
  $(&quot;&lt;span&gt;&quot;).attr(&quot;id&quot;, &quot;notes-count&quot;).appendTo(line2);
  updateStatus();
}

function updateStatus() {
  const st = getStats(State.passage);
  $(&quot;#notes-button&quot;).toggleClass(&quot;notes-has-note&quot;, st.hasNoteHere);
  $(&quot;#notes-button&quot;).toggleClass(&quot;notes-non-zero&quot;, st.count &gt; 0);
  $(&quot;#notes-count&quot;).text(`${st.count}`);
}

function initNotes() {
  if (!setup.tester) return;
  $(document).on(&quot;:passagedisplay&quot;, renderButton);

  // migration
  const old = localStorage.getItem(&quot;passage-notes-1&quot;);
  if (old != null) {
    localStorage.removeItem(&quot;passage-notes-1&quot;);
    setAll(old);
  }
}

initNotes();
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="199" name="g0init Paths" tags="inclusion" position="200,850" size="100,100">&lt;&lt;script&gt;&gt;
/*
 * This module is about traversable paths.
 *
 * type Path = Step[];
 * type Step = {
 *   t?: string; // passage title
 *   code?: string; // mta/mtl code of the link into this passage
 *   choice?: string; // choice point name
 * }
 */

const pathIgnore = [
  &quot;g1a Title Screen&quot;,
  &quot;g1a Bound&quot;,
];

/** Returns a full path of the current play session. */
MT.getPath = () =&gt; {
  const path = [];
  const hist = MT.getHistory();
  for (let i = 0, n = hist.length; i &lt; n; i++) {
    if (pathIgnore.includes(hist[i].title)) continue;
    const step = { t: hist[i].title };

    let code = hist[i].variables.g_mtaCode;
    const turn = hist[i].variables.g_mtaCodeTurn;
    if (code != null &amp;&amp; turn === i) {
      code = code.replace(/\s*[/][/](avoid|prefer)/, &quot;&quot;);
      if (code !== &quot;&quot;) {
        step.code = code;
      }
    }
    path.push(step);
  }
  return path;
};

/**
 * Finds the common prefix of P and Q.
 * Returns [PN, QN], which is the length of the common prefix in P and Q.
 *
 * This does not check against the actual storygraph. If P has a forced
 * step S that isn&#39;t in Q, it&#39;s assumed that Q can also have S.
 */
MT.commonPathLengths = (p, q) =&gt; {
  const prefix = [];
  let pi = 0, qi = 0;
  while (pi &lt; p.length &amp;&amp; qi &lt; q.length) {
    const ps = p[pi];
    const qs = q[qi];
    if (ps.t == null) {
      pi++;
    } else if (qs.t == null) {
      qi++;
    } else {
      if (ps.t !== qs.t) break;
      if (ps.code !== qs.code) break;
      if (ps.name !== qs.name) break;
      pi++, qi++;
    }
  }
  return [pi, qi];
};

const json = o =&gt; JSON.stringify(o);

/**
 * Returns a pretty string that&#39;s js for path.
 */
MT.pathToJs = (path) =&gt; {
  let str = &quot;[\n&quot;;
  for (const step of path) {
    str += &quot;  {&quot;;
    if (step.name != null) str += ` name: ${json(step.name)},`;
    str += ` t: ${json(step.t || step.title)}`;
    if (step.code != null) str += `, code: ${json(step.code)}`;
    str += &quot; },\n&quot;;
  }
  str += &quot;],\n&quot;;
  return str;
}

MT.pathName = (path) =&gt; {
  const choices = path.filter(st =&gt; st.choice != null).map(st =&gt; st.choice);
  if (choices.length) {
    return &quot;&gt; &quot; + choices.join(&quot; &gt; &quot;);
  }
  const titles = path.filter(st =&gt; st.t != null).map(st =&gt; st.t);
  return &quot;&gt; &quot; + titles.join(&quot; &gt; &quot;);
}

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="200" name="g0init Random Once" tags="inclusion" position="325,850" size="100,100">&lt;&lt;script&gt;&gt;

/**
 * &lt;&lt;random-once seenVar&gt;&gt;
 * &lt;&lt;ro-choice&gt;&gt;
 *     text
 * &lt;&lt;ro-choice $condition&gt;&gt;
 *     text
 * &lt;&lt;ro-choice false&gt;&gt;
 *     placeholder for deleted choice, to avoid breaking saved games
 * &lt;&lt;/random-once&gt;&gt;
 */
Macro.delete(&quot;random-once&quot;);
Macro.add(&quot;random-once&quot;, {
  tags: [&quot;ro-choice&quot;],
  handler: function() {
    const [seenVar] = this.args;
    const valid = new Set();
    for (let i = 1; i &lt; this.payload.length; i++) {
      const cond = this.payload[i].args.full;
      if (cond === &quot;&quot; || eval(cond)) {
        valid.add(i);
      }
    }

    if (valid.size === 0) {
      MT.fail(`random-once should have valid choices`);
      return;
    }

    const V = State.variables;
    let seen = JSON.parse(V[seenVar] || &quot;[]&quot;);

    let avail = new Set(valid);
    seen.forEach(i =&gt; avail.delete(i));

    if (avail.size === 0) {
      avail = new Set(valid);
      if (avail.size &gt; 1 &amp;&amp; seen.length &gt; 0) {
        avail.delete(seen[seen.length - 1]);
      }
      seen = [];
    }

    const choice = MT.pick(avail);
    seen.push(choice);
    V[seenVar] = JSON.stringify(seen);

    $(this.output).wiki(this.payload[choice].contents);

    if (setup.debug &amp;&amp; valid.size &gt; 1) {
      const outer = $(&quot;&lt;span class=ro-debug&gt;&quot;).appendTo(this.output);
      outer.append(&quot;&amp;#x1f527;&quot;);
      $(&quot;&lt;a&gt;&quot;).html(&quot;&amp;#x1f3b2;&quot;)
        .appendTo(outer)
        .click(() =&gt; MT.revisitHere());
    }
  }
});
&lt;&lt;/script&gt;&gt;\</tw-passagedata><tw-passagedata pid="201" name="g0init Randomness" tags="inclusion" position="450,850" size="100,100">&lt;&lt;script&gt;&gt;
/*
 * This is a deterministic RNG that keeps its state in $g_rand0 and $g_rand1,
 * so it can be replayed for the History page.
 * 
 * (SugarCube has a deterministic RNG option, but it uses hidden state
 * that can&#39;t be replayed easily.)
 */

/** Returns x rotated left by k bits. */
function rotl(x, k) {
  return (x &lt;&lt; k) | (x &gt;&gt;&gt; (32 - k));
}

/**
 * Returns a random uint32. Uses and updates state, which should be
 * a nonzero [int32, int32] pair. The algorithm is &quot;xoroshiro64**&quot;.
 */
MT.randNext = state =&gt; {
  const s0 = state[0];
  let s1 = state[1];
  const result = rotl(s0 * 0x9e3779bb, 5) * 5;
  s1 ^= s0;
  state[0] = rotl(s0, 26) ^ s1 ^ (s1 &lt;&lt; 9);
  state[1] = rotl(s1, 13);
  return result &gt;&gt;&gt; 0;
};

/** Returns a new random state. */
MT.randCreate = () =&gt; {
  const state = [1, 0 | (Math.random() * 0xffffffff)];
  MT.randNext(state);
  MT.randNext(state);
  return state;
};

/** Returns a random int in [0, n). Uses and updates $g_rand0 and $g_rand1 */
MT.randInt = (n) =&gt; {
  let rng = [State.variables.g_rand0, State.variables.g_rand1];
  if (rng[0] == null || rng[1] == null) {
    MT.warn(&quot;g_rand0 and g_rand1 are not set&quot;);
    rng = MT.randCreate();
  }
  const r = MT.randNext(rng);
  State.variables.g_rand0 = rng[0];
  State.variables.g_rand1 = rng[1];
  return r % n;
};

/** Initializes $g_rand to a new state. */
MT.randReset = () =&gt; {
  const rng = MT.randCreate();
  State.variables.g_rand0 = rng[0];
  State.variables.g_rand1 = rng[1];
};

/** Returns a random item from list (which can be a Set). */
MT.pick = list =&gt; {
  if (list instanceof Set) list = Array.from(list);
  const n = MT.randInt(list.length);
  return list[n];
};

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="202" name="g0init Return Sticky" tags="inclusion" position="575,850" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;

#return-head,
#return-tail,
#sticky-head {
  background-color: #111;
  line-height: 1.75;
  margin: 0 auto;
  /* same as #passages */
  max-width: 54em;
  position: sticky;
  z-index: 10;
}

#return-head,
#sticky-head {
  margin-bottom: 2em;
  margin-top: -1em;
  padding-top: 1em;
  top: 0;
}

#return-tail {
  padding-bottom: 1em;
  bottom: 0;
}

&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

function addReturn(where, contents) {
  MT.assert(
    tags().includes(&quot;is-menu&quot;),
    &quot;tags should have is-menu&quot;);

  $(`#return-${where}`).remove();
  const div = $(`&lt;div id=return-${where}&gt;`)
    .wiki(`&lt;&lt;link &quot;Return to the game&quot;&gt;&gt;&lt;&lt;run MT.popToStory()&gt;&gt;&lt;&lt;/link&gt;&gt;`)
    .wiki(contents);

  if (where === &quot;head&quot;) {
    div.append(&quot;&lt;hr&gt;&quot;);
    $(&quot;#story&quot;).prepend(div);
  } else {
    div.prepend(&quot;&lt;hr&gt;&quot;);
    $(&quot;#story&quot;).append(div);
  }
}

Macro.add(&quot;return-head&quot;, {
  handler: function() {
    addReturn(&quot;head&quot;, &quot;&quot;);
  }
});

Macro.add(&quot;return-tail&quot;, {
  handler: function() {
    addReturn(&quot;tail&quot;, &quot;&quot;);
  }
});

Macro.add(&quot;return-block&quot;, {
  tags: [],
  handler: function() {
    addReturn(&quot;head&quot;, this.payload[0].contents);
  }
});

Macro.add(&quot;sticky-head&quot;, {
  tags: [],
  handler: function() {
    $(&quot;#sticky-head&quot;).remove();
    const div = $(&quot;&lt;div id=sticky-head&gt;&quot;).prependTo(&quot;#story&quot;);
    div.wiki(this.payload[0].contents);
  }
});

function stickyInit() {
  $(document).on(&quot;:passageinit&quot;, () =&gt; {
    MT.autoStow();
    $(`#return-head`).remove();
    $(`#return-tail`).remove();
    $(&quot;#sticky-head&quot;).remove();
  });
}

stickyInit();

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="203" name="g0init Roaming" tags="inclusion" position="700,850" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;
  #random-walk {
    top: max(5rem, 50vh - 5rem);
    display: flex;
    flex-direction: column;
    font-size: 18px;
    gap: 20px;
    position: fixed;
    right: 4px;
    z-index: 20;
  }

  #random-walk a {
    background-color: #fff;
    border: 1px solid transparent;
    border-radius: 4px;
    color: #000;
    cursor: pointer;
    opacity: 0.1;
    padding: 2px 4px;
    text-align: center;
    user-select: none;
  }

  #random-walk a:hover {
    background-color: #333;
    border-color: #eee;
    color: #eee;
    opacity: 1;
  }

  #random-walk.at-menu #rw-roam,
  #random-walk.at-menu #rw-forw {
    display: none;
  }

  .random-walk-chosen {
    outline: 1px solid #9cc;
  }

  #rw-roam.rw-roaming {
    background-color: #161;
    color: #7f7;
    opacity: 1;
  }
  #rw-roam.rw-roaming:hover {
    background-color: #191;
    color: #111;
  }
&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

const milestones = new Set([
  &quot;n1p Barbs Fast 1&quot;,
  &quot;n1p Barbs Slow 1&quot;,
  &quot;n1p Barbs Slow 2a1&quot;,
  &quot;n1p Barbs Slow 2n1&quot;,
  &quot;n1p Barbs Slow 2s1&quot;,
  &quot;n1p Barbs Skip&quot;,
  &quot;n1s Cast Alone 1&quot;,
  &quot;n1s Cast Endgame 1&quot;,
  &quot;n1s Cast Horny 1&quot;,
  &quot;n1s Cast Itch 2&quot;,
  &quot;n1s Cast Sight 1&quot;,
  &quot;n1s Cast Sight Horny&quot;,
  &quot;n1s Cast Younger 1&quot;,
  &quot;n1s Guess Password&quot;,
  &quot;n1s Impatient&quot;,
  &quot;n1s Say Device&quot;,
  &quot;n1s Say Lance&quot;,
  &quot;n1s Say Password&quot;,
  &quot;n1s Tap 1&quot;,
  &quot;n1s Zero Bound&quot;,
]);

const visited = new Set();
let lastPick = {};

let ignoreFuture = false;

MT.roaming = false;

MT.forgetWalkHistory = () =&gt; {
  visited.clear();
  lastPick = {};
};

/** Random walk */
function initRandomWalk() {
  if (!setup.tester) return;

  const idOf = el =&gt; {
    const title = $(el).attr(&quot;data-passage&quot;);
    const code = $(el).attr(&quot;data-mta-code&quot;);
    return `${title}/${code}`;
  };

  function updateLabel() {
    const isMenu = tags().includes(&quot;is-menu&quot;);
    $(&quot;#random-walk&quot;).toggleClass(&quot;at-menu&quot;, isMenu);

    const noFuture = () =&gt; {
      if (ignoreFuture) return true;
      if (State.length === State.size) return true;
      const next = State.history[State.length].title;
      const links = $(&quot;#passages a[data-passage]&quot;)
        .filter((i, el) =&gt; $(el).attr(&quot;data-passage&quot;) === next);
      return links.length === 0;
    };

    const el = $(&quot;#rw-forw&quot;);
    el.text(noFuture() ? &quot;rand&quot; : &quot;next&quot;);
  }

  const goRandom = () =&gt; {
    const V = State.variables;

    const chosen = $(&quot;#passages .random-walk-chosen&quot;);
    if (chosen.length === 1) {
      ignoreFuture = false;
      chosen.click();
      return true;
    }
    chosen.removeClass(&quot;random-walk-chosen&quot;);

    const here = State.passage;
    const all = $(&quot;#passages a[data-passage]&quot;);
    if (all.length === 0) return false;

    let avail = all;

    // bias toward climbing the ladder of magic.
    let important = &quot;[data-mta-code*=&#39;//prefer&#39;]&quot;;
    switch (V.n_magicPhase) {
      case MP_beforeCast:
        important += &quot;, [data-passage*=Cast]:not([data-passage*=Itch])&quot;;
        break;
      case MP_triedMagic:
        if (!V.n_mageSight) {
          important += &quot;, [data-passage*=Sight]&quot;;
        } else {
          important += &quot;, [data-passage*=Mirror], [data-passage*=Tap]&quot;;
        }
        break;
      case MP_wantDevice:
        important += &quot;, [data-passage*=Say]&quot;;
        break;
      case MP_wantName:
        important += &quot;, [data-passage*=Say], [data-passage*=Ask]&quot;;
        important += &quot;, [data-passage*=Bottle]&quot;;
        break;
      case MP_wantTouch:
        important += &quot;, [data-passage*=Ask], [data-passage*=Penguin]&quot;;
        break;
      case MP_wantPass:
        important += &quot;, [data-passage*=Password], [data-passage*=Ask]&quot;;
        break;
    }
    const prefer = all.filter(important);
    if (prefer.length &amp;&amp; Math.random() &lt; .7) {
      const names = prefer.map((i, el) =&gt; $(el).attr(&quot;data-passage&quot;));
      console.log(`prefer [${[...names].join(&quot;,&quot;)}]`);
      avail = prefer;
    } else {
      avail = avail.filter((i, el) =&gt; !visited.has(idOf(el)));
    }
    let pick = null;
    while (pick == null) {
      if (avail.length === 0) {
        all.each((i, el) =&gt; visited.delete(idOf(el)));
        avail = all;
        if (avail.length &gt; 1) {
          // avoid picking the link we just picked
          avail = avail.filter((i, el) =&gt; idOf(el) !== lastPick[here]);
          if (avail.length === 0) avail = all;
        }
      }

      const i = Math.floor(avail.length * Math.random());
      pick = avail[i];
      const code = $(pick).attr(&quot;data-mta-code&quot;);
      const avoid = code != null &amp;&amp; code.includes(&quot;//avoid&quot;);
      if (avoid &amp;&amp; Math.random() &lt; .9) {
        const title = $(pick).attr(&quot;data-passage&quot;);
        console.log(`avoiding ${title}`);
        pick = null;
        avail.splice(i, 1);
      }
    }
    $(pick).addClass(&quot;random-walk-chosen&quot;);
    pick.scrollIntoView(false);
    lastPick[here] = idOf(pick);
    visited.add(lastPick[here]);
    return true;
  };

  const goBack = () =&gt; {
    const chosen = $(&quot;#passages .random-walk-chosen&quot;);
    if (chosen.length &gt; 0) {
      ignoreFuture = true;
      chosen.removeClass(&quot;random-walk-chosen&quot;);
      updateLabel();
    } else {
      ignoreFuture = false;
      Engine.backward();
    }
  };

  const goForward = () =&gt; {
    if (tags().includes(&quot;is-menu&quot;)) return;
    if (State.length === State.size || ignoreFuture) {
      goRandom();
      return;
    }
    ignoreFuture = false;

    const next = State.history[State.length].title;
    const chosen = $(&quot;#passages .random-walk-chosen&quot;);
    if (chosen.length === 1) {
      if (chosen.attr(&quot;data-passage&quot;) === next) {
        Engine.forward();
      } else {
        goRandom();
      }
      return;
    }
    chosen.removeClass(&quot;random-walk-chosen&quot;);
    const links = $(&quot;#passages a[data-passage]&quot;)
      .filter((i, el) =&gt; $(el).attr(&quot;data-passage&quot;) === next);
    if (links.length === 1) {
      links.addClass(&quot;random-walk-chosen&quot;);
      links[0].scrollIntoView(false);
    } else {
      goRandom();
    }
  };

  let roamForce = false;
  let roamLoop = 0;
  let roamLooping = false;
  let roamMoved = false;
  let roamPath = null;
  let roamDoneFn = null;

  const roamDelay = 50;
  const maxLoop = 5;

  const roamToggle = () =&gt; {
    if (tags().includes(&quot;is-menu&quot;)) return;
    if (MT.roaming) {
      roamStop();
    } else {
      roamStart();
    }
  };

  const roamStart = MT.roamStart = (path, doneFn, force) =&gt; {
    $(&quot;#rw-roam&quot;).addClass(&quot;rw-roaming&quot;);
    MT.roaming = true;
    roamForce = force;
    roamMoved = false;
    roamPath = path;
    roamDoneFn = doneFn;
    setTimeout(roamNext, roamDelay);
  };

  const roamStop = () =&gt; {
    MT.roaming = false;
    roamPath = null;
    roamDoneFn = null;
    $(&quot;#rw-roam&quot;).removeClass(&quot;rw-roaming&quot;);
  };

  const roamNext = () =&gt; {
    const here = State.passage;

    if (!MT.roaming) return roamStop();
    if (roamMoved &amp;&amp; here === Config.passages.start) return roamStop();

    let hasProblem = false;
    hasProblem = hasProblem || MT.hasFails;
    hasProblem = hasProblem || MT.hasWarnings;
    hasProblem = hasProblem || $(&quot;.error-view&quot;).length !== 0;

    let hasTodo = /\bX[X]X\b|\bTO[D]O\b/.test($(&quot;.passage&quot;).text());

    const isDraft = MT.isDraft(here);
    const stop = tags().includes(&quot;roam-stop&quot;);

    if (roamMoved) {
      if (hasProblem) {
        console.log(&#39;stopping on problem&#39;);
        return roamStop();
      }
      if (!roamForce &amp;&amp; (hasTodo || isDraft)) {
        console.log(&#39;stopping on to-do&#39;);
        return roamStop();
      }
      if (stop) {
        const steps = State.turns;
        const V = State.variables;
        console.log(`stop after ${steps} steps at ${here}`);
        console.log(`local + session storage = ${MT.computeSizes()}`);
        const mp = MT.enumSymbol(&#39;MagicPhase&#39;, V.n_magicPhase);
        const mpr = MT.enumSymbol(&#39;MagicPhase&#39;, V.n_magicPhaseReached);
        console.log(`- magicPhase ${mp}, ${mpr}`);
        if (roamLoop &lt;= 0) {
          if (roamLooping) {
            roamLooping = false;
            console.log(&quot;stop at max loops&quot;);
          }
          return roamStop();
        }
      }
    }

    if (!roamMoved) {
      if (hasTodo || isDraft) {
        roamForce = true;
      }
      if (stop) {
        roamLoop = maxLoop;
        roamLooping = true;
      }
    }

    if (stop) {
      roamLoop--;
      if (roamLoop &lt;= 0) {
        roamLooping = false;
        console.log(&quot;stop at max loops&quot;);
        return roamStop();
      }
      MT.forgetWalkHistory();
      State.reset();
      Engine.play(&quot;g1a Bound&quot;);
      roamForce = false;
      const neroStart = [
        { t: &quot;g1a Choose Character&quot; },
        { t: &quot;n1a Nero Start&quot; },
      ];
      MT.roamStart(neroStart, () =&gt; {
        MT.roamStart();
      });
      return;
    }

    const chosen = $(&quot;#passages .random-walk-chosen&quot;);
    if (chosen.length === 1) {
      roamMoved = true;
      chosen[0].click();
      setTimeout(roamNext, roamDelay);
      return;
    }

    if (roamLoop &amp;&amp; roamPath != null &amp;&amp; roamPath.length === 0) {
      roamPath = null;
    }

    if (roamPath != null) {
      while (roamPath.length &amp;&amp; roamPath[0].t == null) {
        roamPath.shift();
      }
      if (roamPath.length === 0) {
        const steps = State.turns;
        console.log(`path end after ${steps} steps at ${here}`);
        if (roamDoneFn != null) setTimeout(roamDoneFn);
        roamStop();
        return;
      }
      const next = roamPath[0];
      const links = $(&quot;#story a[data-passage]&quot;);
      const isStep = (el, step) =&gt; {
        const title = el.getAttribute(&quot;data-passage&quot;);
        const code = el.getAttribute(&quot;data-mta-code&quot;) || null;
        return title === step.t &amp;&amp;
          (code == null || step.code == null || code === step.code);
      };
      for (const link of links) {
        if (isStep(link, next)) {
          roamPath.shift();
          $(link).addClass(&quot;random-walk-chosen&quot;);
          setTimeout(roamNext, 100);
          return;
        }
      }

      let msg = `Broken path: ${JSON.stringify(next)}`;
      MT.warn(msg);
      return roamStop();
    }

    if (milestones.has(here)) {
      console.log(`milestone ${here}`);
    }

    if (goRandom()) {
      setTimeout(roamNext, roamDelay);
      return;
    }
    
    roamStop();
  };

  $(() =&gt; {
    $(&quot;#random-walk&quot;).remove();
    const outer = $(&quot;&lt;div&gt;&quot;)
      .attr(&quot;id&quot;, &quot;random-walk&quot;)
      .appendTo(&quot;#story&quot;);
    $(&quot;&lt;a&gt;&quot;)
      .attr(&quot;title&quot;, &quot;&lt;ctrl-comma&gt; backward&quot;)
      .text(&quot;back&quot;)
      .click(goBack)
      .appendTo(outer);
    if (setup.debug) {
      $(&quot;&lt;a id=rw-roam&gt;&quot;)
        .attr(&quot;title&quot;, &quot;&lt;ctrl-backslash&gt; roam&quot;)
        .toggleClass(&quot;rw-roaming&quot;, MT.roaming)
        .text(&quot;roam&quot;)
        .click(roamToggle)
        .appendTo(outer);
    }
    $(&quot;&lt;a id=rw-forw&gt;&quot;)
      .attr(&quot;title&quot;, &quot;&lt;ctrl-period&gt; forward or random&quot;)
      .text(&quot;forw&quot;)
      .click(goForward)
      .appendTo(outer);
    updateLabel();
  });

  // ctrl-comma doesn&#39;t generate keypress events
  $(document).on(&quot;keydown&quot;, ev =&gt; {
    if (!ev.ctrlKey) return;
    const focus = document.activeElement;
    const tag = focus != null ? focus.tagName : &quot;&quot;;
    if (/^(textarea|input|select)$/i.test(tag)) return;
    if (ev.key === &quot;,&quot;) return goBack();
    if (ev.key === &quot;.&quot;) return goForward();
    if (ev.key === &quot;/&quot;) return roamToggle();
  });

  $(document).on(&quot;click&quot;, ev =&gt; {
    if (!MT.roaming &amp;&amp; ev.target &amp;&amp; ev.target.tagName !== &quot;A&quot;) {
      const chosen = $(&quot;#passages .random-walk-chosen&quot;);
      if (chosen.length) {
        chosen.removeClass(&quot;random-walk-chosen&quot;);
        ignoreFuture = true;
        updateLabel();
      }
    }
  });

  $(document).on(&quot;:passagedisplay&quot;, () =&gt; {
    updateLabel();
  });
}

initRandomWalk();
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="204" name="g0init Saved Games" tags="inclusion" position="200,975" size="100,100">&lt;&lt;script&gt;&gt;

/** Fix up the in-browser saved game title. */
Config.passages.descriptions = function() {

  // SugarCube sometimes gets a description for a passage other than
  // the current one. In that case, use its default excerpt.
  if (this.title !== State.passage) return false;

  // For the current passage, use the rendered text, not the source text.
  
  const doc = $(&quot;.passage&quot;).clone();
  doc.find(&quot;script, style&quot;).remove();
  doc.find(&quot;br&quot;).replaceWith(&quot; &quot;);
  const text = doc.text();
  const words = text.trim().split(/\s+/);

  let excerpt = words.slice(0, 10).join(&quot; &quot;);

  // add unlock count
  const [unlocked, total] = countUnlocks();
  if (unlocked &gt; 0) {
    excerpt = `${unlocked}\uD83D\uDD13 ${excerpt}`;
  }

  return excerpt;
};

/** Intercept file save and fix filename */
{
  // sugarcube&#39;s default save UI doesn&#39;t provide any way to change the
  // savefile name, and all its methods are readonly. but it uses a saveAs()
  // function that can be hooked. (the alternative is to re-implement or
  // copy the entire save UI just to tweak the savefile name.)

  const origSaveAs = saveAs;
  saveAs = (blob, name, opt) =&gt; {
    // add unlock count to name
    const [unlocked, total] = countUnlocks();
    if (unlocked &gt; 0) {
      name = name.replace(/^nero-/, `nero-${unlocked}u-`);
    }
    return origSaveAs(blob, name, opt);
  };
}

function countUnlocks() {
  const unlocked = MT.unlockedSet();
  let num = 0;
  let total = 0;
  const add = (keys) =&gt; {
    total += keys.length;
    for (const k of keys) {
      if (unlocked.has(k)) num++;
    }
  };

  add(Object.keys(MT.drekkarEndings));
  add(Object.keys(MT.neroEndings));
  add(Object.keys(MT.neroKeywords));

  return [num, total];
}

/** Migrate an old saveObj to current game. */
function migrate(saveObj) {
  // Nothing necessary yet. In the future:
  // - Rename passages in saveObj.state.expired[]
  // - Rename passages in saveObj.state.history[].title
  // - Rename variables in saveObj.state.history[].variables
  // also, add a migration in mdLoad if necessary.
}

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="205" name="g0init Sections" tags="inclusion" position="200,1100" size="100,100">&lt;&lt;script&gt;&gt;

// Passages are grouped into sections by a prefix code in their title.
// - Prefix should start with a lowercase letter, followed by a number,
//   followed by more lowercase numbers.
// - Prefix should be separated from the rest of the passage title with
//   a space or `-`.
// - Use prefixes that are not words used elsewhere. This makes it easy to
//   search for all occurrences of a passage title.

/** Passages that don&#39;t have a section code prefix */
const specialTitles = new Set([
  // Twee special passages
  &quot;Story JavaScript&quot;,
  &quot;Story Stylesheet&quot;,
  
  // Twine special passages
  &quot;StoryAuthor&quot;,
  &quot;StoryBanner&quot;,
  &quot;StoryData&quot;,
  &quot;StoryDisplayTitle&quot;,
  &quot;StoryInit&quot;,
  &quot;StoryMenu&quot;,
  &quot;StoryTitle&quot;,
]);

// For each section:
// - `expect` is state vars that are expected to be specific values.
//   - The value `false` means it can be `false`, `undefined`, or `null`.
//   - Any other value must match exactly.
//   - There usually doesn&#39;t need to be a declaration for false in
//     sections before a state var is ever set.
//   - There probably should be a declaration for false if a state var
//     can become false, to verify all paths do set it to false.
// - `notable` is state vars that should affect the passage text.
//   - The value can be `true` or a regex.
//   - A regex means, passage should use the state var only if its text
//     matches that regex.

const sectionDefs = {

  // Passages loaded early during StoryInit
  g0boot: {},

  // Passages loaded after g0boot, during StoryInit
  g0init: {},

  // Story opening passages
  g1a: {},

  // Story meta passages
  g1m: {},

  // Drekkar meta passages
  d0a: {},

  // Drekkar 1F until Ivex leaves
  d1a: {},

  // Drekkar 1F after Ivex leaves
  d2a: {},

  // Drekkar 2F
  d3a: {},

  // Drekkar outside
  d4a: {},

  // Drekkar bad endings
  d9a: {},

  // Drekkar interrogation ending
  d9b: {},

  // Drekkar good endings
  d9x: {},

  // Drekkar punishment ending
  d9y: {},

  // Nero meta passages
  n0a: {},

  // Nero 1F intro
  n1a: {
    notable: {
      n_mageSight: true,
    }
  },

  // Nero convo, neutral mood
  n1cn: {
    notable: {
      n_abused: true,
      n_mageSight: true,
      n_naked: true,
    }
  },

  // Nero convo, Ivex receptive
  n1cr: {
    expect: {
      n_ivexReceptive: true,
    },
    notable: {
      n_abused: true,
      n_mageSight: true,
      n_naked: true,
    }
  },

  // Nero convo, subby mood
  n1cs: {
    expect: {
      n_naked: true,
      n_subby: true,
      n_ivexReceptive: true,
    },
    notable: {
      // n_abused: subby usually dominates
      n_mageSight: true,
    }
  },

  // Nero convo, transition to candle
  n1cx: {
    expect: {
      n_ivexReceptive: false,
    },
    notable: {
      n_abused: true,
      n_mageSight: true,
      n_naked: true,
      n_subby: true,
      n_tough: true,
    }
  },

  // Nero candle lit
  n1d: {
    expect: {
      n_candleLit: true,
      n_ivexReceptive: false,
    },
    notable: {
      n_abused: true,
      n_mageSight: true,
      n_naked: true,
      n_subby: true,
      n_tough: true,
    }
  },
  
  // Nero candle horny
  n1e: {
    expect: {
      n_candleHorny: true,
      n_candleLit: true,
      n_naked: true,
      n_ivexReceptive: false,
    },
    notable: {
      n_abused: true,
      n_mageSight: true,
      n_subby: true,
      n_tough: true,
    }
  },

  // Nero being clever
  n1f: {
    expect: {
      n_naked: true,
    }
  },

  // Nero barbs choice
  n1p: {
    expect: {
      n_candleHorny: false,
      n_mageSight: false,
    }
  },

  // Nero magic/sprite
  n1s: {
    expect: {
      n_free: false,
    },
    notable: {
      // make sure Ivex is wearing mask when candle lit
      n_candleLit: /ivex/im,
      n_ivexGone: true,
    }
  },

  // Nero looking
  n1x: {
    expect: {
      n_candleHorny: false,
    },
    notable: {
      // make sure Ivex is wearing mask when candle lit
      n_candleLit: /ivex/im,
      n_mageSight: true,
      n_free: true,
      n_ivexGone: true,
    }
  },

  // Nero horny looking
  n1y: {
    expect: {
      n_candleHorny: true,
      n_candleLit: true,
      n_naked: true,
    },
    notable: {
      n_mageSight: true,
      n_ivexGone: true,
    }
  },

  // Nero 1F alone intro
  n2a: {
    expect: {
      n_candleHorny: false,
      n_candleLit: false,
      n_naked: true,
      n_ivexGone: true,
      n_ivexReceptive: false,
    },
    notable: {
      n_mageSight: true,
    }
  },

  // Nero alone with candle
  n2b: {
    expect: {
      n_candleLit: true,
      n_naked: true,
      n_ivexGone: true,
      n_ivexReceptive: false,
    },
    notable: {
      n_mageSight: true,
    }
  },

  // Nero escaping cross
  n2c: {
    expect: {
      n_naked: true,
      n_ivexGone: true,
      n_ivexReceptive: false,
    },
    notable: {
      n_mageSight: true,
    }
  },

  // Nero free on 1F
  n2f: {
    expect: {
      n_naked: true,
      n_ivexGone: true,
      n_ivexReceptive: false,
    },
    notable: {
      n_mageSight: true,
      n_extraHorny: true,
      n_tooClever: true,
    }
  },

  // Nero looking while free
  n2x: {
    expect: {
      n_naked: true,
      n_ivexGone: true,
      n_ivexReceptive: false,
    },
    notable: {
      n_mageSight: true,
      n_extraHorny: true,
      n_tooClever: true,
    }
  },

  // Nero 2F sketch
  n3a: {
    expect: {
      n_naked: true,
      n_ivexGone: true,
      n_ivexReceptive: false,
    },
    notable: {
      n_mageSight: true,
      n_extraHorny: true,
    }
  },

  // Nero 1F endings
  n9a: {
    expect: {
      n_naked: true,
    },
  },

  // Nero 2F endings
  n9e: {},

  // Nero escaped endings
  n9x: {},

  // Passages without a section tag
  other: {},
};

/** Returns section name of passageTitle. */
const sectOf = (passageTitle) =&gt; {
  const re = /^([a-z][a-z0-9]+)[- ]/;
  const m = re.exec(passageTitle);
  return m ? m[1] : &quot;other&quot;;
};

/** Returns section name of current passage. */
MT.sectHere = () =&gt; sectOf(State.passage);

/** Returns expected state in sect. */
MT.sectExpect = (sect) =&gt; sectionDefs[sect].expect;

MT.varExpect = (vname) =&gt; {
  const sect = MT.sectHere();
  if (!sectionDefs[sect]) return null;
  const expect = sectionDefs[sect].expect || {};
  return expect[vname];
};

MT.isNotable = (sect, vname) =&gt; {
  if (!sectionDefs[sect]) return null;
  const notable = sectionDefs[sect].notable;
  if (!notable) return false;
  const exp = notable[vname];
  if (exp instanceof RegExp) {
    const text = Story.get(State.passage);
    return notable[vname].test(text);
  }
  return exp;
};

MT.allNotable = () =&gt; {
  const sect = MT.sectHere();
  if (!sectionDefs[sect]) return [];
  const notable = sectionDefs[sect].notable;
  if (!notable) return [];
  const result = [];
  let text = null;
  for (const [vn, exp] of Object.entries(notable)) {
    if (exp instanceof RegExp) {
      if (text == null) text = Story.get(State.passage);
      if (exp.test(text)) result.push(vn);
    } else if (exp) {
      result.push(vn);
    }
  }
  return result;
};

/** Validates sectionDefs and passage titles. */
function checkSections() {
  if (!setup.debug) return;

  // Verify every passage title has a valid section tag.
  const sectsUsed = new Set();
  for (const p of Story.lookup()) {
    const sect = sectOf(p.title);
    if (!sectionDefs[sect] &amp;&amp; !sectsUsed.has(sect)) {
      console.error(`[\[${p.title}]] section ${sect} not defined`);
    }
    sectsUsed.add(sect);

    if (sect === &quot;other&quot; &amp;&amp; !specialTitles.has(p.title)) {
      console.error(`[\[${p.title}]] should have a section code`);
    }
  }

  // Verify all section tags are used.
  for (const sect of Object.keys(sectionDefs)) {
    if (!sectsUsed.has(sect)) {
      console.error(`section ${sect} is never used`);
    }
  }

  // Verify sectionDefs have a sensible structure
  const expectedKeys = [&quot;expect&quot;, &quot;notable&quot;];
  for (const [sect, def] of Object.entries(sectionDefs)) {
    const typos = Object.keys(def).filter(k =&gt; expectedKeys.indexOf(k) &lt; 0);
    if (typos.length) {
      console.error(`sectionDefs.${sect} has unknown keys [${typos}]`);
    }
  }
}

/** Verifies stateObj is correct for sectName. */
MT.checkSectionState = (stateObj, sectName, quietly, onlySet) =&gt; {
  if (!sectionDefs[sectName]) return;
  const expect = sectionDefs[sectName].expect;
  if (!expect) return true;
  let allOk = true;
  for (const [vn, val] of Object.entries(expect)) {
    if (onlySet &amp;&amp; !onlySet.has(vn)) continue;
    const ok = stateObj[vn] === val || (val === false &amp;&amp; stateObj[vn] == null);
    if (!ok) {
      if (quietly) return false;
      allOk = false;
      MT.fail(`${vn} should be ${val} in ${sectName}, not ${stateObj[vn]}`);
    }
  }
  return allOk;
}

/** Verifies current state is correct at current location. */
function checkSectionStateHere() {
  // Note, incoming state, not modified state.
  const s0 = State.current.variables;
  const sect = MT.sectHere();
  MT.checkSectionState(s0, sect, false);
}

checkSections();
$(document).on(&quot;:passageend&quot;, checkSectionStateHere);

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="206" name="g0init Seen" tags="inclusion" position="625,1100" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;

.mt-seen-true a {
  color: #ddcc99;
}
.mt-seen-true a:hover {
  color: #aa9966;
}

ul.actions .mt-seen-true li::before {
  filter: saturate(20%);
}

.debugging .mt-seen-false a {
  text-decoration: underline dashed #f66;
}

.debugging .mt-seen-todo a {
  text-decoration: underline wavy #882;
}

/* make true visible in transcript */
.debugging .tran-entry .mt-seen-true a {
  text-decoration: underline dashed #393;
}

&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

/**
 * &lt;&lt;mt-seen $boolean&gt;&gt;
 *   ...
 * &lt;&lt;/mt-seen&gt;&gt;
 * 
 * Wrap contents with a &lt;span class=&quot;mt-seen-X&quot;&gt;
 * where X is either &quot;true&quot; or &quot;false&quot;
 * depending on $boolean.
 *
 * $boolean can also be &quot;todo&quot;.
 */
Macro.add(&quot;mt-seen&quot;, {
  tags: [],
  skipArgs: true,
  handler: function() {
    const expr = this.args.raw;
    const cond = /^todo$/i.test(expr) ? &quot;todo&quot;
      : !!MT.untraced(() =&gt; Scripting.evalTwineScript(expr));
    const outer = $(&quot;&lt;span&gt;&quot;).appendTo(this.output);
    outer.addClass(`mt-seen-${cond}`);
    outer.wiki(this.payload[0].contents);
  }
});

MT.mdDefUnsaved(&quot;sn_barbsSkip&quot;);
MT.mdDefUnsaved(&quot;sn_castDesperate&quot;);
MT.mdDefUnsaved(&quot;sn_struggleFail&quot;);
MT.mdDefUnsaved(&quot;sn_trapChoices&quot;);

MT.neroResetObjectDim = () =&gt; {
  const V = State.variables;
  delete V.n_dimBookcases;
  delete V.n_dimBooks;
  delete V.n_dimBottle;
  delete V.n_dimCabinets;
  delete V.n_dimCoins;
  delete V.n_dimCross;
  delete V.n_dimDesk;
  delete V.n_dimGlobe;
  delete V.n_dimGrav;
  delete V.n_dimKnife;
  delete V.n_dimMap;
  delete V.n_dimPainting;
  delete V.n_dimPenguin;
  delete V.n_dimStudy;
  delete V.n_dimWall;
  delete V.n_dimWand;
  delete V.n_dimWindow;
};

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="207" name="g0init Sidebar" tags="inclusion" position="325,975" size="100,100">&lt;&lt;script&gt;&gt;
MT.autoStow = () =&gt; {
  if (document.body.offsetWidth &lt;= 768) {
    UIBar.stow();
  }
};

Macro.add(&quot;auto-stow&quot;, {
  handler: MT.autoStow,
});

&lt;&lt;/script&gt;&gt;

&lt;&lt;nobr&gt;&gt;
&lt;&lt;append &quot;#ui-bar-body&quot;&gt;&gt;
  &lt;div id=ui-bar-footer&gt;
    &lt;span&gt;
      &lt;a class=footer-element target=&quot;_blank&quot;
        href=&quot;https://www.patreon.com/sleth&quot;
        &gt;&lt;img alt=&quot;Patreon&quot; src=&quot;images/pa_logo.png&quot; height=&quot;30&quot;&gt;&lt;/a&gt;

      &lt;a class=footer-element target=&quot;_blank&quot;
        href=&quot;https://twitter.com/slethwulf&quot;
        &gt;&lt;img alt=&quot;Twitter&quot; src=&quot;images/tw_logo.png&quot; height=&quot;30&quot;&gt;&lt;/a&gt;

      &lt;a class=footer-element target=&quot;_blank&quot;
        href=&quot;https://www.furaffinity.net/user/sleth/&quot;
        &gt;&lt;img alt=&quot;FurAffinity&quot; src=&quot;images/fa_logo.png&quot; height=&quot;30&quot;&gt;&lt;/a&gt;

      &lt;a class=footer-element target=&quot;_blank&quot;
        href=&quot;https://sleth.sofurry.com/&quot;
        &gt;&lt;img alt=&quot;SoFurry&quot; src=&quot;images/sf_logo.png&quot; height=&quot;30&quot;&gt;&lt;/a&gt;
    &lt;/span&gt;
  &lt;/div&gt;
&lt;&lt;/append&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="208" name="g0init Templates" tags="inclusion" position="575,975" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;

.mt-cons {
  font-size: 1.5rem;
  font-weight: bold;
  line-height: 1;
  margin-bottom: 2rem;
}

&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

Template.add(&quot;P&quot;, &quot;&lt;br&gt;&lt;br&gt;&quot;);

Template.add(&quot;construction&quot;,
  `&lt;div class=mt-cons&gt;&amp;#x1f6a7;Under Construction&amp;#x1f6a7;&lt;/div&gt;`);

Template.add(&quot;restartAction&quot;,
  `&lt;li&gt;&lt;&lt;link &quot;Try again from the beginning.&quot;&gt;&gt;` +
  `&lt;&lt;run Engine.restart()&gt;&gt;` +
  `&lt;&lt;/link&gt;&gt;&lt;/li&gt;`);

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="209" name="g0init Transcript" tags="inclusion" position="250,725" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;

#tran-outer a {
  color: #aac;
  cursor: text;
}
#tran-outer#tran-outer a.tran-next {
  color: #6ef;
}

#tran-outer ul.actions li::before {
  filter: saturate(0);
}

#tran-outer hr {
  border-color: #333;
}

#tran-outer .random-walk-chosen {
  outline: none;
}

.tran-entry {
  position: relative;
}

.tran-title {
  background-color: #111;
  border: 1px solid #333;
  border-radius: 4px;
  color: #666;
  font-size: 10px;
  padding: 0 4px;
  position: absolute;
  right: 0;
  top: -26px;
}

.tran-elided {
  margin-left: .2em;
}

.tran-fade-in:not(#_#_#_#_) {
  margin-left: 30%;
  width: 40%;
}

&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

function cleanHtml(jq, nextTitle, nextCode) {
  jq.removeClass(&quot;passage-in&quot;);
  jq.find(&quot;.random-walk-chosen&quot;).removeClass(&quot;random-walk-chosen&quot;);
  jq.find(&quot;.fade-in-hidden&quot;).removeClass(&quot;fade-in-hidden&quot;);
  jq.find(&quot;.fade-in-absorb&quot;).removeClass(&quot;fade-in-absorb&quot;);
  jq.find(&quot;.tame-hide&quot;).removeClass(&quot;tame-hide&quot;);
  jq.find(&quot;.tran-remove&quot;).remove();
  jq.find(&quot;[data-name=silently]&quot;).remove();
  jq.find(&quot;.patience-debug&quot;).remove();
  jq.find(&quot;.ro-debug&quot;).remove();
  jq.find(&quot;.debug&quot;).replaceWith(function() { return $(this).contents(); });

  // highlight the link followed.
  if (nextTitle != null) {
    let link = jq.find(`a[data-passage=&quot;${nextTitle}&quot;]`);
    if (link.length &gt; 1 &amp;&amp; nextCode != null) {
      link = link.filter(`[data-mta-code=&quot;${nextCode}&quot;]`);
    }
    link.addClass(&quot;tran-next&quot;);

    // remove tran-cut
    const cut = jq.find(&quot;.tran-cut&quot;);
    cut.each((i, el) =&gt; {
      if ($(el).attr(&quot;data-passage&quot;) === nextTitle) {
        while (el.parentNode != null &amp;&amp; !el.classList.contains(&quot;tran-entry&quot;)) {
          while (el.nextSibling != null) {
            el.nextSibling.remove();
          }
          el = el.parentNode;
        }
        $(el).append(
          `&lt;span class=&quot;tran-elided&quot;&gt;&amp;hellip;&lt;/span&gt;`);
      }
    });
  }

  // fade-in separators
  const fb1 = jq.find(&quot;.fade-in&quot;).prev(&quot;br&quot;);
  fb1.replaceWith(&quot;&lt;hr class=tran-fade-in&gt;&quot;);
  const fb2 = jq.find(&quot;.fade-in br:last-child&quot;);
  fb2.replaceWith(&quot;&lt;hr class=tran-fade-in&gt;&quot;);

  // glitch link
  const gl = jq.find(&quot;.glitch-link&quot;);
  if (gl.length) {
    const clicked = gl.find(&quot;a.tran-next&quot;);
    if (clicked.length) {
      gl.removeClass(&quot;glitch-link&quot;);
    } else {
      gl.remove();
    }
  }

  // glitch text
  const gh = jq.find(&quot;.glitch-hidden&quot;);
  gh.addClass(&quot;glitch-fading-out&quot;);
  gh.removeClass(&quot;glitch-hidden&quot;);
  jq.find(&quot;#tame-1 a&quot;).remove();

  // remove trailing space and Continue/Return links
  const shouldRemove = el =&gt; {
    if (el.nodeName === &quot;BR&quot;) return true;
    if (el.nodeName === &quot;#text&quot; &amp;&amp; el.nodeValue.trim() === &quot;&quot;) return true;
    if (el.nodeName === &quot;A&quot;) {
      if (/^(Continue|Return)$/.test(el.textContent)) return true;
    }
    return false;
  };
  let el = jq[0];
  while (el != null &amp;&amp; el.lastChild != null) {
    while (el.lastChild != null &amp;&amp; shouldRemove(el.lastChild)) {
      el.lastChild.remove();
    }
    el = el.lastChild;
  }
}

MT.tranRender = output =&gt; {
  const outer = $(&quot;&lt;div id=tran-outer&gt;&quot;).appendTo(output);

  const hist = MT.getHistory();
  let turn = 0;

  const renderSome = () =&gt; {
    const batch = 10;
    const stop = Math.min(turn + batch, hist.length);

    const savedVars = State.active.variables;
    const savedTemp = Object.entries(State.temporary);
    try {
      for (; turn &lt; stop; turn++) {
        const moment = hist[turn];

        $(&quot;&lt;hr class=text-sep&gt;&quot;).appendTo(outer);

        let nextTitle = null;
        let nextCode = null;
        if (turn + 1 &lt; hist.length) {
          nextTitle = hist[turn + 1].title;
          const V = hist[turn + 1].variables;
          if (V.g_mtaCodeTurn === turn + 1) {
            nextCode = V.g_mtaCode;
          }
        }

        const text = Story.get(moment.title).text;
        State.active.variables = clone(moment.variables);
        State.clearTemporary();
        State.temporary.isTranscript = true;
        State.temporary.tranPassage = moment.title;

        let div = $(&quot;&lt;div class=tran-entry&gt;&quot;);

        if (setup.tester) {
          $(&quot;&lt;div class=tran-title&gt;&quot;).text(moment.title)
            .appendTo(div);
        }

        MT.suppressErrors(() =&gt; {
          div.wiki(text);
        });
        // clone to remove event handlers
        div = div.clone();

        cleanHtml(div, nextTitle, nextCode);
        $(outer).append(div);
      }
    } finally {
      State.active.variables = savedVars;
      State.clearTemporary();
      for (const [k, v] of savedTemp) {
        State.temporary[k] = v;
      }
    }
  };

  const renderLoop = () =&gt; {
    renderSome();
    if (turn &lt; hist.length) {
      setTimeout(renderLoop);
    } else {
      const words = MT.countWords($(outer).text());
      const passages = hist.length;
    }
  };
  
  renderLoop();
}

/**
 * &lt;&lt;tran-cut [[link]]&gt;&gt;
 * &lt;&lt;tran-cut text link&gt;&gt;
 * 
 * Emit link. In the transcript, if the player followed this link,
 * elide everything after this link in the passage.
 */
Macro.add(&quot;tran-cut&quot;, {
  handler: function() {
    const frag = document.createDocumentFragment();
    if (this.args.length === 1) {
      $(frag).wiki(this.args.raw);
    } else {
      $(frag).wiki(`&lt;&lt;link ${this.args.raw}&gt;&gt;&lt;&lt;/link&gt;&gt;`);
    }
    $(frag).find(&quot;a&quot;).addClass(&quot;tran-cut&quot;);
    $(this.output).append(frag);
  }
});

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="210" name="g0init Validate" tags="inclusion" position="325,1100" size="100,100">&lt;&lt;script&gt;&gt;

function initValidate() {
  $(document).on(&quot;:passageend&quot;, () =&gt; {
    MT.untraced(() =&gt; {
      for (const [k, v] of Object.entries(State.variables)) {
        if (Array.isArray(v)) {
          MT.warn(`${k} is an array (will not be delta encoded)`);
        }
      }
    });
  });
}

initValidate();

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="211" name="g0init Var Info" tags="inclusion" position="450,1100" size="100,100">&lt;&lt;append head&gt;&gt;&lt;style&gt;
.revisit-here,
.revisit-here * {
  transition: none !important;
}

.var-info {
  background-color: #111;
  color: #999;
  cursor: default;
  font-size: 12px;
  line-height: 14px;
  margin-bottom: 14px;
  margin-top: -56px;
  padding: 12px 0;
  position: sticky;
  top: 0;
  z-index: 5;
}

#return-head .var-info,
#sticky-head .var-info {
  margin-bottom: 0;
  position: static;
}
#return-head:has(.var-info),
#sticky-head:has(.var-info) {
  top: 36px;
}

.var-info &gt; label,
.var-info-button-outer {
  border: 1px solid transparent;
  border-radius: 4px;
  display: inline-block;
  margin-bottom: 2px;
  padding: 2px 4px;
  text-align: center;
  user-select: none;
  white-space: nowrap;
}

.var-info &gt; label {
  color: #666;
  cursor: pointer;
  margin-left: -4px;
  margin-right: 8px;
}
.var-info &gt; label:hover {
  background-color: #222;
}

.var-info-hidden &gt; span:not(.var-info-show) {
  display: none;
}
.var-info-hidden:not(.var-info-to-do) &gt; label::after {
  content: &quot;\2713&quot;; /* checkmark */
  margin-left: .5em;
}
.var-info-hidden.var-info-to-do &gt; label::after {
  content: &quot;\1f6a7&quot;; /* construction */
}

.var-info-separator {
  margin: 0 16px;
}

.var-info-compute {
  margin-right: 1em;
}
.var-info-compute:hover {
  background-color: #333;
}

.var-info-button-outer {
  min-width: 4em;
  position: relative;
}

.var-info-passage {
  user-select: all;
  white-space: nowrap;
}

.var-info-notable {
  font-weight: bold;
}
.var-info-ignored {
  border: 1px dashed #882;
  font-style: italic;
  font-weight: normal;
}
.var-info-always {
  font-weight: normal;
  opacity: 0.6;
}

.var-info-to-do::after {
  content: &quot;\1f6a7&quot;; /* construction */
}
.var-info-was-written::before {
  content: &quot;\2191&quot;; /* up arrow */
  padding-right: 1px;
}
.var-info-was-read::after {
  content: &quot;\2193&quot;; /* down arrow */
  padding-left: 1px;
}
.var-info-was-read.var-info-to-do::after {
  content: &quot;\2193\1f6a7&quot;; /* down arrow, construction */
  padding-left: 1px;
}

.var-info-was-deleted:not(.var-info-was-written) {
  opacity: 0.5;
  text-decoration: line-through;
}

.var-info-can-change {
  border-color: #666;
  cursor: pointer;
}
.var-info-can-change:hover {
  border-color: #ccc;
}

.var-info-can-change.var-info-notable {
  border-color: #996;
}
.var-info-can-change.var-info-notable:hover {
  border-color: #ddc;
}

.var-info-boolean-false {
  color: #c88;
}
.var-info-boolean-true {
  color: #6a6;
}

.var-info-enum {
  color: #88c;
}
.var-info-number .var-info-button-label,
.var-info-enum .var-info-button-label {
  pointer-events: none;
}
.var-info-button-left,
.var-info-button-right {
  border: 1px solid #666;
  border-radius: 4px;
  height: 100%;
  position: absolute;
  top: 0;
  width: 50%;
}
.var-info-button-left:hover,
.var-info-button-right:hover {
  background-color: rgba(255, 255, 255, 0.2);
}
.var-info-button-left {
  border-right: 0;
  left: 0;
}
.var-info-button-right {
  border-left: 0;
  right: 0;
}

.var-info-value {
  background-color: #033;
  display: inline-block;
  max-width: 3em;
  overflow-x: clip;
}

&lt;/style&gt;&lt;&lt;/append&gt;&gt;

&lt;&lt;script&gt;&gt;

const alwaysConditional = new Set();
const alwaysVars = new Map();
const ignoreVars = new Set();
let revisitTop = null;

$(document).on(&quot;:passagestart&quot;, () =&gt; {
  alwaysConditional.clear();
  alwaysVars.clear();
  ignoreVars.clear();
});

MT.revisitHere = fn =&gt; {
  MT.traceStop();
  revisitTop = $(&quot;html&quot;).prop(&quot;scrollTop&quot;);
  const active = State.active.variables;
  State.active.variables = clone(State.current.variables);
  fn &amp;&amp; fn(active);
  Engine.play(State.passage);
  $(&quot;html&quot;).addClass(&quot;revisit-here&quot;);
};
Macro.add(&quot;revisit-here&quot;, {
  handler: () =&gt; {
    setTimeout(MT.revisitHere);
  }
});

$(document).on(&quot;:passageend&quot;, () =&gt; {
  $(&quot;html&quot;).removeClass(&quot;revisit-here&quot;);
  if (revisitTop != null) {
    $(&quot;html&quot;)[0].scroll(0, revisitTop);
    revisitTop = null;
  }
});

function withinInclude(ctx) {
  for (; ctx != null; ctx = ctx.parent) {
    if (ctx.displayName === &quot;include&quot;) return true;
  }
  return false;
}

function withinCondition(ctx) {
  for (; ctx != null; ctx = ctx.parent) {
    if (ctx.displayName === &quot;if&quot;) return true;
    if (ctx.displayName === &quot;switch&quot;) return true;
  }
  return false;
}

/** &lt;&lt;vi-always varname value [reason]&gt;&gt; */
Macro.add(&quot;vi-always&quot;, {
  handler: function() {
    const [vname, exp] = this.args;
    if (MT.varExpect(vname) != null &amp;&amp; !withinInclude(this)) {
      MT.warn(`vi-always ${vname} is unnecessary`);
    }
    const actual = MT.untracedGet(vname);
    if (exp !== actual &amp;&amp; !(exp === false &amp;&amp; actual == null)) {
      // force a traced read, so it can be toggled
      const read = State.variables[vname];
      MT.fail(`vi-always ${vname} ${exp}, but actual value is ${read}`);
    }
    alwaysVars.set(vname, exp);
    if (withinCondition(this)) {
      alwaysConditional.add(vname);
    }
  }
});

/** &lt;&lt;vi-always-if cond-var varname value [reason]&gt;&gt; */
Macro.add(&quot;vi-always-if&quot;, {
  handler: function() {
    const [cond, vname, exp] = this.args;
    const sect = MT.sectHere();
    if (MT.varExpect(vname) != null &amp;&amp; !withinInclude(this)) {
      MT.warn(`vi-always-if ${cond} ${vname} is unnecessary`);
    }
    if (MT.untracedGet(cond)) {
      const actual = MT.untracedGet(vname);
      if (exp !== actual &amp;&amp; !(exp === false &amp;&amp; actual == null)) {
        // force a traced read, so it can be toggled
        const read = State.variables[vname];
        MT.fail(
          `vi-always-if ${cond} ${vname} ${exp}, but actual value is ${read}`);
      }
      alwaysVars.set(vname, exp);
      if (withinCondition(this)) {
        alwaysConditional.add(vname);
      }
    }
  }
});

/** &lt;&lt;vi-ignore var1 ...&gt;&gt; */
Macro.add(&quot;vi-ignore&quot;, {
  handler: function() {
    for (const vn of this.args) {
      if (MT.varExpect(vn) != null) {
        MT.warn(`vi-ignore ${vn} is unnecessary`);
      }
      ignoreVars.add(vn);
    }
  }
});

/**
  * &lt;&lt;vi-ignore-if var1 var2 ...&gt;&gt;
  * If var1 is true, ignore remaining vars.
  * If var2 is true, ignore remaining vars.
  * etc.
  */
Macro.add(&quot;vi-ignore-if&quot;, {
  handler: function() {
    for (let p = 0; p &lt; this.args.length - 1; p++) {
      const cvar = this.args[p];
      if (MT.varExpect(cvar) != null) {
        MT.warn(`vi-ignore-if ${cvar} is unnecessary`);
      }
      if (MT.untracedGet(cvar)) {
        this.args.slice(p + 1).forEach(vn =&gt; ignoreVars.add(vn));
      }
    }
  }
});

const str = val =&gt; val == null ? String(val) : JSON.stringify(val);

function varButton(vname) {
  const V = MT.untracedVars();
  const v0 = State.current.variables;

  const outer = $(&quot;&lt;span class=var-info-button-outer&gt;&quot;);
  let tags = &quot;&quot;;

  if (MT.trace.wasDeleted.has(vname)) {
    tags += &quot;[was-deleted]\n&quot;;
    outer.addClass(&quot;var-info-was-deleted&quot;);
  }
  if (MT.trace.wasRead.has(vname)) {
    tags += &quot;[was-read]\n&quot;;
    outer.addClass(&quot;var-info-was-read&quot;);
  }
  if (MT.trace.wasSet.has(vname)) {
    tags += &quot;[was-set]\n&quot;;
    outer.addClass(&quot;var-info-was-written&quot;);
  }

  const sect = MT.sectHere();
  const exp = MT.varExpect(vname);

  if (MT.isNotable(sect, vname)) {
    tags += &quot;[section-notable]\n&quot;;
    outer.addClass(&quot;var-info-notable&quot;);
    if (ignoreVars.has(vname)) {
      tags += &quot;[vi-ignore]\n&quot;;
      outer.addClass(&quot;var-info-ignored&quot;);
    } else if (alwaysVars.has(vname)) {
      tags += `[vi-always ${str(alwaysVars.get(vname))}]\n`;
      outer.addClass(&quot;var-info-always&quot;);
    } else if (!MT.trace.wasRead.has(vname)) {
      tags += &quot;[to-do]\n&quot;;
      outer.addClass(&quot;var-info-to-do&quot;);
    }
  } else if (exp != null) {
    tags += `[section-always ${str(exp)}]\n`;
    outer.addClass(&quot;var-info-always&quot;);
  }

  const label = $(&quot;&lt;span class=var-info-button-label&gt;&quot;).appendTo(outer);

  const jval = str(V[vname]);
  if (MT.trace.wasSet.has(vname)) {
    const jval0 = str(v0[vname]);
    outer.attr(&quot;title&quot;, `${tags}${vname}=${jval0} -&gt;\n${vname}=${jval}`);
  } else {
    outer.attr(&quot;title&quot;, `${tags}${vname}=${jval}`);
  }

  // assume undeclared is boolean
  const vtype = MT.enumVars[vname] || (vname in V ? typeof V[vname] : &quot;boolean&quot;);

  const enumList = MT.enums[vtype];
  if (enumList != null) {
    outer.addClass(&quot;var-info-enum&quot;);
    const sym = enumList[V[vname] || 0];
    const sameType = Object.values(MT.enumVars).filter(t =&gt; t === vtype).length;
    label.text(sym != null ? sym : vname + &quot;=&quot; + jval);
    const n = enumList.length;
    if (MT.trace.wasRead.has(vname)) {
      const val0 = v0[vname] || 0;
      if (0 &lt; val0) {
        $(&quot;&lt;span&gt;&quot;)
          .addClass(&quot;var-info-button-left var-info-can-change&quot;)
          .appendTo(outer)
          .on(&quot;click&quot;, () =&gt; {
            MT.revisitHere(() =&gt; State.variables[vname] = val0 - 1);
          });
      }
      if (val0 &lt; n - 1) {
        $(&quot;&lt;span&gt;&quot;)
          .addClass(&quot;var-info-button-right var-info-can-change&quot;)
          .appendTo(outer)
          .on(&quot;click&quot;, () =&gt; {
            MT.revisitHere(() =&gt; State.variables[vname] = val0 + 1);
          });
      }
    }
    return outer;
  }

  // This doesn&#39;t work well with patience, need to fix something
  if (false &amp;&amp; vtype === &quot;number&quot;) {
    outer.addClass(&quot;var-info-number&quot;);
    $(&quot;&lt;span class=var-info-vname&gt;&quot;).text(vname).appendTo(label);
    label.append(&quot;=&quot;);
    $(&quot;&lt;span class=var-info-value&gt;&quot;).text(jval).appendTo(label);
    if (MT.trace.wasRead.has(vname)) {
      const val0 = v0[vname] || 0;
      $(&quot;&lt;span&gt;&quot;)
        .addClass(&quot;var-info-button-left var-info-can-change&quot;)
        .appendTo(outer)
        .on(&quot;click&quot;, () =&gt; {
          MT.revisitHere(() =&gt; State.variables[vname] = val0 - 1);
        });
      $(&quot;&lt;span&gt;&quot;)
        .addClass(&quot;var-info-button-right var-info-can-change&quot;)
        .appendTo(outer)
        .on(&quot;click&quot;, () =&gt; {
          MT.revisitHere(() =&gt; State.variables[vname] = val0 + 1);
        });
    }
    return outer;
  }

  if (vtype === &quot;boolean&quot;) {
    outer.addClass(&quot;var-info-boolean-&quot; + (V[vname] ? &quot;true&quot; : &quot;false&quot;));
    label.text(vname);
    if (MT.trace.wasRead.has(vname)) {
      outer.addClass(&quot;var-info-can-change&quot;);
      outer.on(&quot;click&quot;, () =&gt; {
        let val = !v0[vname];
        MT.revisitHere(() =&gt; {
          if (MT.mdKnown(vname)) {
            MT.mdSet(vname, val);
          } else {
            State.variables[vname] = val;
          }
        });
      });
    }
    return outer;
  }

  $(&quot;&lt;span class=var-info-vname&gt;&quot;).text(vname).appendTo(label);
  label.append(&quot;=&quot;);
  $(&quot;&lt;span class=var-info-value&gt;&quot;).text(jval).appendTo(label);
  outer.addClass(&quot;var-info-misc&quot;);
  return outer;
}

function initVarInfo() {
  if (!setup.tester) return;

  $(document).on(&quot;:passagestart&quot;, () =&gt; {
    MT.traceStart();
  });

  $(document).on(&quot;:passageend&quot;, () =&gt; {
    MT.traceStop();

    MT.trace.wasTopRead.forEach(vn =&gt; {
      if (alwaysVars.has(vn) &amp;&amp; !alwaysConditional.has(vn)) {
        const c = alwaysVars.get(vn);
        MT.warn(`vi-always ${vn} ${c}, but var was read`);
      }
      const exp = MT.varExpect(vn);
      if (exp != null) {
        MT.warn(`${vn} always ${exp} in this section, but var was read`);
      }
    });

    const notable = MT.allNotable();
    const to_do = notable.filter(
      vn =&gt; !ignoreVars.has(vn) &amp;&amp; !alwaysVars.has(vn) &amp;&amp; !MT.trace.wasRead.has(vn));
    if (to_do.length &amp;&amp; !MT.isDraft()) {
      MT.warn(`non-draft passage has unused notable vars: ${to_do}`);
    }
    
    if (!setup.debug) return;

    const touched = new Set();
    MT.trace.wasRead.forEach(v =&gt; touched.add(v));
    MT.trace.wasSet.forEach(v =&gt; touched.add(v));
    MT.trace.wasDeleted.forEach(v =&gt; touched.add(v));
    notable.forEach(f =&gt; touched.add(f));

    $(&quot;.var-info&quot;).remove();
    const outer = $(&quot;&lt;div class=var-info&gt;&quot;);

    if ($(&quot;#return-head&quot;).length) {
      outer.prependTo(&quot;#return-head&quot;);
    } else if ($(&quot;#sticky-head&quot;).length) {
      outer.prependTo(&quot;#sticky-head&quot;);
    } else {
      outer.prependTo(&quot;#passages&quot;);
    }

    let show = session.get(&quot;var-info-show&quot;);
    outer.toggleClass(&quot;var-info-hidden&quot;, !show);

    $(&quot;&lt;label&gt;var-info&lt;/label&gt;&quot;)
      .appendTo(outer)
      .click(() =&gt; {
        show = !show;
        session.set(&quot;var-info-show&quot;, show);
        outer.toggleClass(&quot;var-info-hidden&quot;, !show);
      });

    $(&quot;&lt;span class=var-info-compute&gt;[compute variants]&lt;/span&gt;&quot;)
      .appendTo(outer)
      .click(() =&gt; MT.computeVariants());


    if (touched.size) {
      const el = $(&quot;&lt;span class=var-info-touched&gt;&quot;).appendTo(outer);
      [...touched].sort().forEach(v =&gt; varButton(v).appendTo(el));
    }

    $(&quot;&lt;span class=var-info-separator&gt;&quot;).text(&quot;||&quot;).appendTo(outer);
    $(`&lt;span class=&quot;var-info-passage var-info-show&quot;&gt;`).text(State.passage).appendTo(outer);

    const sizes = MT.computeSizes();
    $(`&lt;span class=&quot;var-info-separator var-info-show&quot;&gt;`).text(&quot;||&quot;).appendTo(outer);
    $(`&lt;span class=&quot;var-info-sizes var-info-show&quot;&gt;`).text(sizes).appendTo(outer);

    if (to_do.length) outer.addClass(&quot;var-info-to-do&quot;);
  });
}

MT.computeSizes = () =&gt; {
  const ls = computeSize(localStorage);
  const ss = computeSize(sessionStorage);
  return `${ls} + ${ss}`;
}

function computeSize(st) {
  let size = 0;
  for (let i = 0, n = st.length; i &lt; n; i++) {
    const key = st.key(i);
    const val = st.getItem(key);
    size += key.length + val.length;
  }
  return String(size);
}

initVarInfo();

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="212" name="g0init Var Trace" tags="inclusion" position="575,1100" size="100,100">&lt;&lt;script&gt;&gt;

MT.trace = newContext();

let _unproxied = null;
const myBrand = Symbol(&quot;VarTraceBrand&quot;);

function newContext() {
  return {
    withinInclude: false,
    wasDeleted: new Set(),
    wasRead: new Set(),
    wasSet: new Set(),
    wasTopRead: new Set(),
  };
}

Macro.add(&quot;var-trace-ignore&quot;, {
  tags: [],
  handler: function() {
    const body = this.payload[0].contents;
    MT.untraced(() =&gt; $(this.output).wiki(body));
  }
});

const origInclude = Macro.get(&quot;include&quot;);
Macro.delete(&quot;include&quot;);
Macro.add(&quot;include&quot;, {
  handler: function() {
    const save = MT.trace.withinInclude;
    MT.trace.withinInclude = true;
    try {
      origInclude.handler.call(this);
    } finally {
      MT.trace.withinInclude = save;
    }
  }
});

/** Start tracing. */
MT.traceStart = () =&gt; {
  MT.traceStop();
  MT.trace = newContext();
  _unproxied = State.active.variables;
  State.active.variables = new Proxy(_unproxied, {
    defineProperty(o, prop) {
      if (typeof prop === &quot;string&quot;) MT.trace.wasSet.add(prop);
      return Reflect.defineProperty(...arguments);
    },
    deleteProperty(o, prop) {
      if (typeof prop === &quot;string&quot;) MT.trace.wasDeleted.add(prop);
      return Reflect.deleteProperty(...arguments);
    },
    get(o, prop) {
      if (prop === &quot;_varTrace&quot;) return myBrand;
      if (typeof prop === &quot;string&quot;) {
        MT.trace.wasRead.add(prop);
        if (!MT.trace.withinInclude) MT.trace.wasTopRead.add(prop);
      }
      return Reflect.get(...arguments);
    },
    set(o, prop) {
      if (typeof prop === &quot;string&quot;) MT.trace.wasSet.add(prop);
      return Reflect.set(...arguments);
    },
  });
};

/** Stop tracing. */
MT.traceStop = () =&gt; {
  if ((State.active.variables._varTrace || myBrand) !== myBrand) {
    throw new Error(&quot;Multiple instances of Var Trace in conflict.&quot;);
  }
  if (_unproxied != null) {
    State.active.variables = _unproxied;
    _unproxied = null;
  }
};

/** Get vname&#39;s value without tracing it. */
MT.untracedGet = vname =&gt; {
  return (_unproxied || State.active.variables)[vname];
}

/** Returns all state vars, without tracing. */
MT.untracedVars = () =&gt; {
  return _unproxied || State.active.variables;
}

/** Run fn without tracing any variables during its execution. */
MT.untraced = fn =&gt; {
  if (_unproxied == null) return fn();
  const proxy = State.active.variables;
  State.active.variables = _unproxied;
  try {
    return fn();
  } finally {
    State.active.variables = proxy;
  }
};

&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="213" name="g1a Bound" tags="" position="350,4400" size="100,100">&lt;&lt;nobr&gt;&gt;
The sound of snapping fingers feels distant at first. As consciousness returns, the sound grows closer and closer until it&#39;s loud enough to be annoying.

?P
The snapping comes from right beside his ear. The wolf adventurer frowns, but consciousness has not returned in its entirety just yet. He feels as if... as if he had fallen down a well. At least that&#39;s all he can remember, sort of. It was bright, it was sudden, and now...

?P
&quot;Wakey wakey...&quot; a voice calls from nearby. It&#39;s an unfamiliar male voice, with a tone of mockery.

?P
The bound wolf lets out a pained groan. Everything hurts. Slowly but surely, memories start to return. Memories of who he is...

?P
&lt;ul class=actions&gt;
  &lt;&lt;mtl [[g1a Choose Character]]&gt;&gt;
    Choose your adventurer
  &lt;&lt;/mtl&gt;&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="214" name="g1a Choose Character" tags="" position="475,4400" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;run MT.randReset()&gt;&gt;

&lt;meta-text&gt;
  Choose your adventurer. Each tale will take about 30-90 minutes to read,
  depending on the choices you make for that character.
&lt;/meta-text&gt;

?P
&lt;b&gt;Drekkar&lt;/b&gt; - A seasoned fighter, a large wolf that takes pride in his strength. He goes by the name of Drekkar, with his older name being more complex and difficult to pronounce. Hailing from the less advanced wolven tribes from the north, Drekkar left his kind early and adapted well to the wider world. He&#39;s known among his friends at the Wayward Adventurers Guild as &quot;that crazy bastard who took down the Mad Wizard of Carcenvellathrop by punching him in the face.&quot; With his sword in hand, there&#39;s little Drekkar cannot accomplish. Now, however...

?P
&lt;ul class=actions&gt;
  &lt;&lt;mtl [[d1a Drekkar Start]]&gt;&gt;
    Continue as Drekkar...
  &lt;&lt;/mtl&gt;&gt;
&lt;/ul&gt;

&lt;b&gt;Nero&lt;/b&gt; - A slender wolf, and unusually handsome for a mage. But he&#39;s always valued his mind more than his body. Nero is an unacknowledged son of one of Lady Garloch&#39;s nephews (or so he says). He&#39;s equally at ease covering for absent professors at the prestigious Windbone Magic Academy as he is when singing with drunken sailors at a Seaside tavern. His talent for magic has turned out to be very useful in his career of discreetly handling difficult problems for patrons who have way more money than sense. But this time...

?P
&lt;ul class=actions&gt;
  &lt;&lt;mtl [[n1a Nero Start]]&gt;&gt;
    Continue as Nero...
  &lt;&lt;/mtl&gt;&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="215" name="g1a Content Warning" tags="inclusion" position="275,4275" size="100,100">This interactive story features kinky male/male sexual content. If you find this distasteful or are under the age of 18, please exit now.

Moreover, this story contains immoral characters performing abusive and perverse acts that are described in explicit detail, including: rape and dubious consent, cock and ball torture, male chastity, mind control, and miscellaneous other kinks and tortures. If these themes make you uncomfortable or are not enjoyable for you, proceed only at your own discretion.

&lt;div style=&#39;float: right;&#39;&gt;\
&lt;&lt;button Proceed&gt;&gt;
  &lt;&lt;run Dialog.close()&gt;&gt;
  &lt;&lt;run MT.mdSet(&quot;mg_contentWarningPassed&quot;, true)&gt;&gt;
  &lt;&lt;goto [[g1a Bound]]&gt;&gt;
&lt;&lt;/button&gt;&gt;\
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="216" name="g1a Title Screen" tags="section-start" position="225,4400" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;style&gt;
  .title-container {
    position: relative;
    /* #story has 2.5em top margin */
    top: -2.5em;
    /* sugarcube html structure makes it hard to use display:grid */
  }
  /* if var-info is shown, displace slightly */
  .debugging .title-container {
    top: -1em;
  }
  .title-character {
    position: absolute;
    z-index: 0;
    max-width: 100%;
    /* try to keep Ivex&#39;s feet on screen, but don&#39;t make his face too small */
    max-height: max(95vh, 60vw);
  }

  .title-logo {
    position:relative;
    display:block;
    margin-left:auto;
    z-index:1;
    max-width:50%;
  }

  .title-options {
    z-index: 2;
    position: absolute;
    right: 10%;
    display: inline-block;
    background-color: #222;
    padding: min(15px, 3vw) min(30px, 6vw);
    border: 1px solid #aaa;
    border-radius: 15px;
  }

  .title-options a {
    font-size: min(2rem, 8vw);
    font-family: fantasy;
    color: #c78f28;
    white-space: nowrap;
  }

  /* on narrow screens */
  @media(max-width: 30rem) {
    /* move logo down */
    .title-logo {
      top: 25vw;
    }

    /* center menu below Ivex */
    .title-options {
      position: relative;
      right: -50%;
      text-align: center;
      top: 40vw;
      translate: -50%;
    }
  }

  .fade-in .title-options {
    transition: all .4s ease-in;
  }
  .fade-in-hidden:not(#_#_#_#_#_) .title-options {
    opacity: 0;
  }
  .fade-in-hidden:not(#_#_#_#_#_) .title-options a {
    display: none; 
  }
&lt;/style&gt;

&lt;&lt;script&gt;&gt;
  const V = State.variables;
  const T = State.temporary;
  if (V.xd_IvexPunishment) {
    T.characterDisplay = &quot;images/wolf.png&quot;;
  } else {
    T.characterDisplay = &quot;images/panther.png&quot;;
  }

  T.showContentWarning = () =&gt; {
    Dialog.setup(&quot;Content Warning&quot;);
    Dialog.wiki(&quot;&lt;&lt;include [[g1a Content Warning]]&gt;&gt;&quot;);
    Dialog.open();
  };
&lt;&lt;/script&gt;&gt;

&lt;div class=title-container&gt;

  &lt;&lt;fade-in 0.5s click-anywhere no-dots&gt;&gt;
    &lt;img class=title-character @src=&quot;_characterDisplay&quot;&gt;

  &lt;&lt;fade-next 2s&gt;&gt;
    &lt;img class=title-logo src=&quot;images/logo_tr.png&quot;&gt;

  &lt;&lt;fade-next 2s&gt;&gt;
    &lt;br&gt;
    &lt;div class=title-options&gt;
      &lt;&lt;link &quot;New Game&quot;&gt;&gt;
        &lt;&lt;if $mg_contentWarningPassed&gt;&gt;
          &lt;&lt;goto [[g1a Bound]]&gt;&gt;
        &lt;&lt;else&gt;&gt;
          &lt;&lt;run _showContentWarning()&gt;&gt;
        &lt;&lt;/if&gt;&gt;
      &lt;&lt;/link&gt;&gt;
      &lt;br&gt;
      &lt;&lt;link &quot;Load Game&quot;&gt;&gt;
        &lt;&lt;run UI.saves()&gt;&gt;
      &lt;&lt;/link&gt;&gt;
      &lt;br&gt;
      &lt;&lt;link &quot;Content Warning&quot;&gt;&gt;
        &lt;&lt;run _showContentWarning()&gt;&gt;
      &lt;&lt;/link&gt;&gt;
      &lt;br&gt;
      &lt;&lt;mta &quot;g1m Credits&quot;&gt;&gt;Credits&lt;&lt;/mta&gt;&gt;
    &lt;/div&gt; &lt;!--title-options--&gt;

  &lt;&lt;/fade-in&gt;&gt;

&lt;/div&gt; &lt;!--title-container--&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="217" name="g1m Archives Entry" tags="is-menu" position="200,1300" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;return-block&gt;&gt;
  &lt;span class=mt-vsep&gt;||&lt;/span&gt;
  [[Return to the Archives|g1m Archives]]
&lt;&lt;/return-block&gt;&gt;

&lt;&lt;script&gt;&gt;

const T = State.temporary;
const V = State.variables;

const arcEntry = V.g_arcEntry;
const { name, barbs, freeze } = arcEntry;

T.notesVariant = name;

const info =
  MT.drekkarEndings[name] ||
  MT.neroEndings[name] ||
  MT.neroKeywords[name];

if (info == null || info.title == null) {
  throw new Error(`Unknown archive entry ${name}`);
}

let title = info.title;
title = title.replace(/%barbs\b/, barbs ? &quot;Barbs&quot; : &quot;Smooth&quot;);
title = title.replace(/%freeze\b/, freeze ? &quot;Freeze&quot; : &quot;Shock&quot;);

$(&quot;&lt;div class=ui-title&gt;&quot;).text(title).appendTo(output);
$(&quot;&lt;br&gt;&quot;).appendTo(output);

const code = `
  $g_arcName = &quot;${name}&quot;;
  $n_barbs = ${barbs};
  $n_castEndgame = ${V.n_castEndgame};
`;

info.passages.forEach((passage, i) =&gt; {
  if (i !== 0) {
    $(&quot;&lt;hr class=text-sep&gt;&quot;).appendTo(output);
  }
  if (typeof passage === &quot;function&quot;) {
    passage = passage(arcEntry);
  }
  MT.arcRender(output, passage, code);
});

&lt;&lt;/script&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="218" name="g1m Archives Lock" tags="inclusion" position="325,1425" size="100,100">&lt;&lt;nobr&gt;&gt;
Are you sure you want to lock all the Archives?

?P
You will have to play through each ending to unlock them again.

?P
&lt;div&gt;
  &lt;&lt;button &quot;Lock Archives&quot;&gt;&gt;
    &lt;&lt;script&gt;&gt;
      Dialog.close();
      MT.mdClear();
    &lt;&lt;/script&gt;&gt;
    &lt;&lt;goto `State.passage`&gt;&gt;
  &lt;&lt;/button&gt;&gt;
  &lt;&lt;button &quot;Cancel&quot;&gt;&gt;
    &lt;&lt;script&gt;&gt;
      Dialog.close():
    &lt;&lt;/script&gt;&gt;
  &lt;&lt;/button&gt;&gt;
&lt;/div&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="219" name="g1m Archives Script" tags="inclusion" position="200,1425" size="100,100">&lt;&lt;script&gt;&gt;

const T = State.temporary;
const V = State.variables;

const sessionKey = &quot;arc-open&quot;;

T.open = which =&gt; {
  $(&quot;.arc-closable&quot;).removeClass(&quot;arc-open&quot;);
  $(&quot;.arc-switch&quot;).text(&quot;(show)&quot;);
  $(`.arc-closable-${which}`).addClass(&quot;arc-open&quot;);
  $(`.arc-switch-${which}`).text(&quot;(hide)&quot;);
};

T.toggle = which =&gt; {
  const now = session.get(sessionKey);
  const next = now === which ? &quot;none&quot; : which;
  session.set(sessionKey, next);
  T.open(next);
};

T.switch = which =&gt; {
  let mkp =
    `&lt;a class=&quot;arc-switch arc-switch-${which}&quot;` +
    ` onclick=&quot;SugarCube.State.temporary.toggle(&#39;${which}&#39;)&quot;` +
    `&gt;(show)&lt;/a&gt;`;
  return mkp;
};

function lockpickSetup() {
  if (!setup.debug) return;
  T.lockpick = setup.debug &amp;&amp; session.get(&quot;arc-lockpick&quot;);
  $(document).one(&quot;:passagedisplay&quot;, () =&gt; {
    const el = $(&quot;#arc-lockpick&quot;);
    el.prop(&quot;checked&quot;, T.lockpick);
    el.on(&quot;input&quot;, lockpickUpdate);
  });
}

function lockpickUpdate() {
  const el = $(&quot;#arc-lockpick&quot;);
  const val = !!el.prop(&quot;checked&quot;);
  session.set(&quot;arc-lockpick&quot;, val);
  MT.revisitHere();
}

function countUnlocks() {
  const unlocked = MT.unlockedSet();
  const count = (keys, reveal) =&gt; {
    const n = keys.filter(k =&gt; unlocked.has(k)).length;
    const total = (reveal || T.lockpick) ? keys.length : &quot;?&quot;;
    return `${n} of ${total}`;
  };

  T.drekkarEndingsUnlocked = count(
    Object.keys(MT.drekkarEndings), V.xd_IvexPunishment);
  T.neroEndingsUnlocked = count(
    Object.keys(MT.neroEndings), V.mn_playerLeftStudyWithMirror);
  T.neroKeywordsUnlocked = count(
    Object.keys(MT.neroKeywords), V.mn_playerLeftStudyWithMirror);
}

function archivesInit() {
  $(document).one(&quot;:passagedisplay&quot;, () =&gt; {
    const state = session.get(sessionKey);
    T.open(state || &quot;intro&quot;);
  });
  lockpickSetup();
  countUnlocks();
}

archivesInit();

&lt;&lt;/script&gt;&gt;\</tw-passagedata><tw-passagedata pid="220" name="g1m Archives" tags="is-menu" position="200,1300" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;style&gt;

body {
  overflow-y: scroll;
}
.arc-body {
  margin-left: 1.5rem;
}
.arc-closable:not(.arc-open) {
  display: none;
}
.arc-switch {
  font-size: 0.8em;
  font-weight: normal;
  margin-left: 0.5em;
}

&lt;/style&gt;

&lt;&lt;include [[g1m Archives Script]]&gt;&gt;

&lt;&lt;return-block&gt;&gt;
  &lt;&lt;if setup.debug&gt;&gt;
    &lt;span class=mt-vsep&gt;||&lt;/span&gt;
    &lt;label&gt;
      &amp;#x1f527;
      bypass locks
      &lt;input id=&quot;arc-lockpick&quot; type=checkbox&gt;
    &lt;/label&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/return-block&gt;&gt;

&lt;div class=ui-title&gt;
  Welcome to the Mage&#39;s Tower Archives
  &lt;&lt;= _switch(&quot;intro&quot;)&gt;&gt;
&lt;/div&gt;

&lt;div class=arc-body&gt;
  &lt;div class=&quot;arc-closable arc-closable-intro&quot;&gt;
    &lt;br&gt;
    Here you can revisit all the endings and keywords
    that the adventurers have seen
    in their time in the Mage&#39;s Tower.
    When an adventurer experiences an ending,
    it will be unlocked here.
    If an ending has different variations
    due to the adventurer&#39;s choices during the game,
    these also can be set here,
    provided they have been seen before.
    ?P
    Grayed out endings and variations are paths
    that have not yet been found.
    Most of them are shown with a hint
    as to what path the adventurer should take to reach them.
    There are also many hints within the stories for each path.
    ?P
    The endings in this archive are all static,
    with no choices beyond the selection of variations on this page.
    A few of the actual endings have choices
    that are more complicated than what can be selected below.
    If you want to re-experience those dynamic endings,
    not just the static version offered here,
    you can save a game at the point the ending begins.
    ?P
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=ui-subtitle&gt;
  Drekkar Endings (_drekkarEndingsUnlocked)
  &lt;&lt;= _switch(&quot;drekkar&quot;)&gt;&gt;
&lt;/div&gt;
&lt;div class=&quot;arc-body arc-closable arc-closable-drekkar&quot;&gt;
  &lt;&lt;include &quot;d0a Drekkar Ending Index&quot;&gt;&gt;
  &lt;hr&gt;
&lt;/div&gt;

&lt;div class=ui-subtitle&gt;
  Nero Endings (_neroEndingsUnlocked)
  &lt;&lt;= _switch(&quot;nero&quot;)&gt;&gt;
&lt;/div&gt;
&lt;div class=&quot;arc-body arc-closable arc-closable-nero&quot;&gt;
  &lt;&lt;include &quot;n0a Nero Ending Index&quot;&gt;&gt;
  &lt;hr&gt;
&lt;/div&gt;

&lt;div class=ui-subtitle&gt;
  Nero Keywords (_neroKeywordsUnlocked)
  &lt;&lt;= _switch(&quot;nero-kw&quot;)&gt;&gt;
&lt;/div&gt;
&lt;div class=&quot;arc-body arc-closable arc-closable-nero-kw&quot;&gt;
  &lt;&lt;= MT.neroKeywordList()&gt;&gt;
&lt;/div&gt;

&lt;hr&gt;
&lt;&lt;link &quot;Lock all the Archives&quot;&gt;&gt;
  &lt;&lt;script&gt;&gt;
    Dialog.setup(&quot;Confirm Lock Archives&quot;);
    Dialog.wiki(&quot;&lt;&lt;include [[g1m Archives Lock]]&gt;&gt;&quot;);
    Dialog.open();
  &lt;&lt;/script&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="221" name="g1m Credits" tags="is-menu" position="200,1700" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;sticky-head&gt;&gt;
  &lt;div class=ui-title&gt;Credits&lt;/div&gt;
  &lt;hr&gt;
&lt;&lt;/sticky-head&gt;&gt;

&lt;&lt;return-tail&gt;&gt;

The writing and development of this interactive story was made by me, [[Sleth|http://www.slethstories.com/]].

?P
Nero&#39;s story and additional coding was contributed by Grayscale Wolf,
who&#39;s always happy to receive feedback at
&lt;a id=&quot;gsw-ma&quot; target=&quot;_blank&quot; href=&quot;https://mastodon.social/@gray17&quot;
  &gt;Mastodon&lt;/a&gt;,
&lt;a id=&quot;gsw-fa&quot; target=&quot;_blank&quot;
  href=&quot;https://www.furaffinity.net/user/grayscalewolf&quot;
    &gt;FurAffinity&lt;/a&gt;,
or
&lt;a id=&quot;gsw-email&quot; target=&quot;_blank&quot;&gt;email&lt;/a&gt;.
&lt;&lt;script&gt;&gt;
  console.log(&quot;credits&quot;);
  $(document).one(&quot;:passagedisplay&quot;, () =&gt; {
    console.log(&quot;credits display&quot;);
    const em = $(&quot;#gsw-email&quot;)[0];
    const a = atob(&#39;eG1haWx0bzo&#39;).slice(1);
    const b = $(&quot;#gsw-fa&quot;)[0].href.slice(-13);
    const c = $(&quot;#gsw-ma&quot;)[0].href[24];
    const d = em.id.splice(1, 4);
    em.href = `${a}${b}${c}${d}.com`;
  });
&lt;&lt;/script&gt;&gt;

/* cspell:ignore Raus, MFarley */
&lt;&lt;/nobr&gt;&gt;

The amazing artwork you see in the game, including the character art and the Mage&#39;s Tower logo, was done by commission by [[BlainWolf|https://twitter.com/Blain_Wolf]]. You can check out more of his stuff in his [[Twitter|https://twitter.com/Blain_Wolf]] or [[FurAffinity|https://www.furaffinity.net/user/blainwolf]] pages!

I&#39;d also like to give a special, personal thanks to [[Raus|https://twitter.com/rausmutt]] and [[MFarley|https://www.furaffinity.net/user/mfarley/]] for supporting this idea  and my writing in general, as well as helping me shape things up and polish them!

Not only that, but I&#39;d also like to extend my deepest gratitude to my patrons, who have been supporting me and my craft through the months it took to develop this interactive story! None of this would be possible without you all!

First and foremost, my patrons that have supported me in these last 4 months it took for me to develop, learn and finish this project:
\
&lt;b&gt;&lt;ul&gt;\
/* cspell:disable */ \
    &lt;li&gt;John Harris&lt;/li&gt;
    &lt;li&gt;Timba Saber&lt;/li&gt;
    &lt;li&gt;Kevin Deiderich&lt;/li&gt;
    &lt;li&gt;Gd &lt;/li&gt;
    &lt;li&gt;Rise&lt;/li&gt;
    &lt;li&gt;Bingturong&lt;/li&gt;
    &lt;li&gt;Laswer5&lt;/li&gt;
    &lt;li&gt;Sándor Bajkai&lt;/li&gt;
    &lt;li&gt;Sameer &lt;/li&gt;
    &lt;li&gt;wssbxj &lt;/li&gt;
    &lt;li&gt;Ian Meyers&lt;/li&gt;
    &lt;li&gt;Daniel Choi&lt;/li&gt;
    &lt;li&gt;Lathbalrog&lt;/li&gt;
    &lt;li&gt;Argentcoyote&lt;/li&gt;
    &lt;li&gt;Rin Ookami&lt;/li&gt;
    &lt;li&gt;xiaokiroz &lt;/li&gt;
    &lt;li&gt;Nigel Leiterman&lt;/li&gt;
    &lt;li&gt;keinok82562 &lt;/li&gt;
    &lt;li&gt;MagicMinnett&lt;/li&gt;
    &lt;li&gt;Ishiah &lt;/li&gt;
    &lt;li&gt;Snow Tastes Great&lt;/li&gt;
    &lt;li&gt;nikokarro&lt;/li&gt;
    &lt;li&gt;Nimrax&lt;/li&gt;
    &lt;li&gt;Maxwell&lt;/li&gt;
    &lt;li&gt;SASO_PRO&lt;/li&gt;
    &lt;li&gt;Lykron &lt;/li&gt;
    &lt;li&gt;Chris &lt;/li&gt;
    &lt;li&gt;AshfurtheBroken &lt;/li&gt;
    &lt;li&gt;Hyenatime &lt;/li&gt;
    &lt;li&gt;Michael &lt;/li&gt;
    &lt;li&gt;Chris Gordon&lt;/li&gt;
    &lt;li&gt;Pinecone&lt;/li&gt;
    &lt;li&gt;Guri Linus&lt;/li&gt;
    &lt;li&gt;Hyao&lt;/li&gt;
    &lt;li&gt;fancyhat &lt;/li&gt;
    &lt;li&gt;llama&lt;/li&gt;
    &lt;li&gt;Abraxas &lt;/li&gt;
    &lt;li&gt;Hollud &lt;/li&gt;
    &lt;li&gt;Lykos Bane&lt;/li&gt;
    &lt;li&gt;Rex Aurum&lt;/li&gt;
    &lt;li&gt;Martin Farley&lt;/li&gt;
    &lt;li&gt;Knight of the Dragon&lt;/li&gt;
    &lt;li&gt;Raus&lt;/li&gt;
&lt;/ul&gt;&lt;/b&gt;\
\
And, of course, also an honorable mention to everyone that has supported me and my writing in the these last years I have had my patreon going:
\
&lt;ul&gt;\
&lt;li&gt;John Harris&lt;/li&gt;
&lt;li&gt;Timba Saber&lt;/li&gt;
&lt;li&gt;Kevin Deiderich&lt;/li&gt;
&lt;li&gt;Hymne &lt;/li&gt;
&lt;li&gt;Gd &lt;/li&gt;
&lt;li&gt;Todd Billings&lt;/li&gt;
&lt;li&gt;Inkwa Seekwa&lt;/li&gt;
&lt;li&gt;SASO_PRO &lt;/li&gt;
&lt;li&gt;Rise&lt;/li&gt;
&lt;li&gt;Bingturong&lt;/li&gt;
&lt;li&gt;Laswer5&lt;/li&gt;
&lt;li&gt;Cyro &lt;/li&gt;
&lt;li&gt;Sándor Bajkai&lt;/li&gt;
&lt;li&gt;Sameer &lt;/li&gt;
&lt;li&gt;wssbxj &lt;/li&gt;
&lt;li&gt;Lathbalrog&lt;/li&gt;
&lt;li&gt;Ian Meyers&lt;/li&gt;
&lt;li&gt;Daniel Choi&lt;/li&gt;
&lt;li&gt;montywolf &lt;/li&gt;
&lt;li&gt;Ace Blue27&lt;/li&gt;
&lt;li&gt;Argentcoyote&lt;/li&gt;
&lt;li&gt;Andrew Wow&lt;/li&gt;
&lt;li&gt;Rin Ookami&lt;/li&gt;
&lt;li&gt;xiaokiroz &lt;/li&gt;
&lt;li&gt;Nigel Leiterman&lt;/li&gt;
&lt;li&gt;keinok82562 &lt;/li&gt;
&lt;li&gt;tiberius Rings&lt;/li&gt;
&lt;li&gt;StaticZeroes &lt;/li&gt;
&lt;li&gt;Yude&lt;/li&gt;
&lt;li&gt;MagicMinnett&lt;/li&gt;
&lt;li&gt;Ishiah &lt;/li&gt;
&lt;li&gt;Snow Tastes Great&lt;/li&gt;
&lt;li&gt;kingthecat&lt;/li&gt;
&lt;li&gt;nikokarro&lt;/li&gt;
&lt;li&gt;October Tiger&lt;/li&gt;
&lt;li&gt;kaerumchn&lt;/li&gt;
&lt;li&gt;Nimrax&lt;/li&gt;
&lt;li&gt;Typo &lt;/li&gt;
&lt;li&gt;Maxwell&lt;/li&gt;
&lt;li&gt;Didiji&lt;/li&gt;
&lt;li&gt;Lykron &lt;/li&gt;
&lt;li&gt;Chris &lt;/li&gt;
&lt;li&gt;Ferin &lt;/li&gt;
&lt;li&gt;Zero&lt;/li&gt;
&lt;li&gt;Cho &lt;/li&gt;
&lt;li&gt;AshfurtheBroken &lt;/li&gt;
&lt;li&gt;Bryan Rutkowski&lt;/li&gt;
&lt;li&gt;Hyenatime &lt;/li&gt;
&lt;li&gt;Jason Huchot&lt;/li&gt;
&lt;li&gt;Michael &lt;/li&gt;
&lt;li&gt;Chris Gordon&lt;/li&gt;
&lt;li&gt;superman &lt;/li&gt;
&lt;li&gt;Patrick Bossen&lt;/li&gt;
&lt;li&gt;Pinecone&lt;/li&gt;
&lt;li&gt;Zsisron Darkwater&lt;/li&gt;
&lt;li&gt;Guri Linus&lt;/li&gt;
&lt;li&gt;Hyao&lt;/li&gt;
&lt;li&gt;fancyhat &lt;/li&gt;
&lt;li&gt;llama&lt;/li&gt;
&lt;li&gt;Abraxas &lt;/li&gt;
&lt;li&gt;Joey Watts&lt;/li&gt;
&lt;li&gt;Hollud &lt;/li&gt;
&lt;li&gt;Lykos Bane&lt;/li&gt;
&lt;li&gt;Rex Aurum&lt;/li&gt;
&lt;li&gt;Mr Blackstone&lt;/li&gt;
&lt;li&gt;Martin Farley&lt;/li&gt;
&lt;li&gt;Raus&lt;/li&gt;
&lt;/ul&gt;\
\
Thank you so much!</tw-passagedata><tw-passagedata pid="222" name="g1m Dashboard" tags="is-menu" position="325,1700" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;return-head&gt;&gt;

&lt;style&gt;
.dash-stats {
  margin-left: 1em;
  text-indent: -1em;
  user-select: all;
}
.dash-stats span {
  white-space: nowrap;
}
.dash-title {
  font-weight: bold;
}
.dash-roll {
  border: 1px solid transparent;
  border-radius: 4px;
  margin-left: .5em;
}
.dash-roll:hover {
  border-color: #999;
}
.dash-body,
.dash-body {
  margin-left: 1em;
}
.dash-todo-item {
  margin-left: 3em;
  text-indent: -1em;
}
.dash-passages label {
  margin-right: 1em;
}
.dash-passages.dash-which-unfinished .dash-passage-finished {
  display: none;
}
&lt;/style&gt;

&lt;&lt;/nobr&gt;&gt;\
&lt;div id=&quot;dash-outer&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;

const countable = new Set([
  &quot;mt-ready&quot;, &quot;mt-draft&quot;, &quot;untagged&quot;,
]);
const incomplete = new Set([
  &quot;mt-draft&quot;, &quot;mt-sketch&quot;,
]);

function analyze(passages) {
  /* Map of title -&gt; kind */
  const kindOf = {};
  /* Map of title -&gt; Array of { todo, snippet } */
  const todosIn = {};
  const warnings = [];
  /* Map of title -&gt; n */
  const wordCount = {};

  const getKind = (title, tags) =&gt; {
    if (tags.includes(&quot;is-menu&quot;)) return &quot;menu&quot;;
    /* mt should probably be a separate kind */
    if (/^Init |^mt/.test(title)) return &quot;init&quot;;
    if (/^Story/.test(title)) return &quot;twine&quot;;
    return MT.signOf(title) || &quot;untagged&quot;;
  };

  passages.forEach(p =&gt; {
    const kind = getKind(p.title, p.tags);
    kindOf[p.title] = kind;

    const todos = [];
    const add = (tag, snippet) =&gt; {
      const p = todos.find(t =&gt; t.tag === tag &amp;&amp; t.snippet === snippet);
      if (p != null) {
        p.count++;
      } else {
        todos.push({ tag, snippet, count: 1 });
      }
    };

    const todoRE = /\bTO[D]O\b\S*[ \t]*(\S*)(.*)/g;
    for (const m of p.text.matchAll(todoRE)) {
      add(`TO\DO ${m[1]}`, m[2]);
    }
    const exesRE =/\bX[X]X\b\S*(.*)/g;
    for (const m of p.text.matchAll(exesRE)) {
      add(&quot;X\XX&quot;, m[1]);
    }

    if ([&quot;mt-ready&quot;, &quot;unmarked&quot;].includes(kind)) {
      if (todos.find(e =&gt; e.todo === &quot;X\XX&quot;)) {
        warnings.push(`${p.title} - ${kind} should not have X\XX`);
      }
    }
    if (todos.length) {
      if (todos.length &gt; 1) {
        /* remove any no-snippet exes if there are other todos */
        const p = todos.findIndex(t =&gt; t.tag === &quot;X\XX&quot; &amp;&amp; t.snippet === &quot;&quot;);
        if (p &gt;= 0) todos.splice(p, 1);
      }
      todos.sort((a, b) =&gt; {
        if (a.key &lt; b.key) return -1;
        if (a.key &gt; b.key) return +1;
        if (a.snippet &lt; b.snippet) return -1;
        if (a.snippet &gt; b.snippet) return +1;
        return 0;
      });
      todosIn[p.title] = todos;
    }
    wordCount[p.title] = MT.countWords(p.text);
  });

  return { kindOf, todosIn, warnings, wordCount };
}

function summarizeTo(dest, info, label) {
  const count = Object.values(info.kindOf)
    .reduce((obj, k) =&gt; {
      obj[k] = 1 + (obj[k] || 0);
      return obj;
    }, {});

  const n = Object.keys(count)
    .filter(k =&gt; countable.has(k))
    .reduce((sum, k) =&gt; sum + count[k], 0);
  const uncounted = Object.keys(count)
    .filter(k =&gt; !countable.has(k));

  const pct = i =&gt; (i / n * 100).toFixed(0) + &quot;%&quot;;

  const outer = $(&quot;&lt;div class=dash-stats&gt;&quot;).appendTo(dest);
  const sep = &quot;&lt;span class=mt-vsep&gt; || &lt;/span&gt;&quot;;

  $(&quot;&lt;span&gt;&quot;).text(`${n} ${label}`).appendTo(outer);

  $(outer).append(sep);
  const words = Object.keys(info.wordCount)
    .filter(t =&gt; countable.has(info.kindOf[t]))
    .reduce((sum, t) =&gt; sum + info.wordCount[t], 0);
  $(&quot;&lt;span&gt;&quot;).appendTo(outer)
    .text(`${(words / 1000).toFixed(1)}K words`);

  const addStat = (n, name) =&gt; {
    if (n &gt; 0) {
      outer.append(sep);
      $(&quot;&lt;span&gt;&quot;).text(`${pct(n)} ${name} ${n}`).appendTo(outer);
    }
  };

  const countTodo = (kind) =&gt;
    Object.keys(info.todosIn)
      .filter(title =&gt; info.kindOf[title] === kind)
      .length;

  addStat(count.untagged, &quot;untagged&quot;);
  addStat(countTodo(&quot;untagged&quot;, &quot;untagged*&quot;));

  addStat(count[&quot;mt-ready&quot;], &quot;ready&quot;);
  addStat(countTodo(&quot;mt-ready&quot;), &quot;ready*&quot;);

  addStat(count[&quot;mt-draft&quot;], &quot;draft&quot;);
  addStat(count[&quot;mt-sketch&quot;], &quot;sketch&quot;);

  uncounted.sort().forEach((kind, i) =&gt; {
    if (incomplete.has(kind)) return;
    outer.append(i === 0 ? `${sep}other: ` : &quot;, &quot;);
    $(&quot;&lt;span&gt;&quot;).appendTo(outer)
      .text(`${kind} ${count[kind]}`);
  });
}

function showRandom(dest, info) {
  const block = $(&quot;&lt;div class=dash-random&gt;&quot;).appendTo(dest);
  const head = $(&quot;&lt;div class=dash-head&gt;&quot;).appendTo(block);
  const body = $(&quot;&lt;div class=dash-body&gt;&quot;).appendTo(block);
  const toShow = Object.keys(info.kindOf)
    .filter(t =&gt; info.todosIn[t] ||
      (incomplete.has(info.kindOf[t]) &amp;&amp; countable.has(info.kindOf[t])))
    .sort();
  const reroll = () =&gt; {
    body.empty();
    // Note, uses Math.random()
    toShow.randomMany(5)
      .forEach(t =&gt; todoBlock(info, t).appendTo(body));
  };
  $(&quot;&lt;span class=dash-title&gt;&quot;).text(&quot;Random unfinished&quot;).appendTo(head);
  $(&quot;&lt;a class=dash-roll&gt;&quot;).appendTo(head).html(&quot;&amp;#x1f3b2;&quot;)
    .on(&quot;click&quot;, () =&gt; reroll());
  reroll();
}

function todoBlock(info, title) {
  const block = $(&quot;&lt;div class=dash-todo-block&gt;&quot;);
  $(&quot;&lt;div class=dash-todo-title&gt;&quot;).wiki(`[\[${title}]]`).appendTo(block);
  const todos = info.todosIn[title] || [];
  todos.forEach(todo =&gt; {
    let snippet = todo.snippet;
    if (todo.count &gt; 1) snippet += ` [x${todo.count}]`;
    $(&quot;&lt;div class=dash-todo-item&gt;&quot;).appendTo(block).append(
      $(&quot;&lt;span class=dash-todo-tag&gt;&quot;).text(todo.tag),
      $(&quot;&lt;span class=dash-todo-snippet&gt;&quot;).text(snippet),
    );
  });
  return block;
}

function setWhich(which) {
  State.temporary.which = which;
  session.set(&quot;dash-which&quot;, which);
  $(&quot;.dash-passages&quot;)
    .toggleClass(&quot;dash-which-all&quot;, which === &quot;all&quot;)
    .toggleClass(&quot;dash-which-unfinished&quot;, which === &quot;unfinished&quot;);
}

function showPassages(dest, info) {
  const block = $(&quot;&lt;div class=dash-passages&gt;&quot;).appendTo(dest);
  const head = $(&quot;&lt;div class=dash-head&gt;&quot;).appendTo(block);
  const body = $(&quot;&lt;div class=dash-body&gt;&quot;).appendTo(block);

  setWhich(session.get(&quot;dash-which&quot;) || &quot;unfinished&quot;);
  $(&quot;&lt;label class=dash-which&gt;&quot;).appendTo(head)
    .wiki(&quot;&lt;&lt;radiobutton &#39;_which&#39; all autocheck&gt;&gt; All&quot;)
    .on(&quot;change&quot;, () =&gt; setWhich(&quot;all&quot;));
  $(&quot;&lt;label class=dash-which&gt;&quot;).appendTo(head)
    .wiki(&quot;&lt;&lt;radiobutton &#39;_which&#39; unfinished autocheck&gt;&gt; Unfinished&quot;)
    .on(&quot;change&quot;, () =&gt; setWhich(&quot;unfinished&quot;));

  for (const title of Object.keys(info.kindOf).sort()) {
    const finished = info.todosIn[title] == null &amp;&amp; !incomplete.has(info.kindOf[title]);
    todoBlock(info, title).appendTo(body)
      .addClass(finished ? &quot;dash-passage-finished&quot; : &quot;dash-passage-unfinished&quot;);
  }
}

const passages = Story.lookup()
  .sort((a, b) =&gt; a.title &lt; b.title ? -1 : a.title &gt; b.title ? +1 : 0);

const neroRe = /^n\d|^mt|^Init |^Story/;

const neroPassages = passages
  .filter(p =&gt; neroRe.test(p.title));
const neroInfo = analyze(neroPassages);

const otherPassages = passages
  .filter(p =&gt; !neroRe.test(p.title));
const otherInfo = analyze(otherPassages);

function render() {
  const dest = $(&quot;#dash-outer&quot;);
  summarizeTo(dest, neroInfo, &quot;Nero passages&quot;);
  summarizeTo(dest, otherInfo, &quot;Drekkar passages&quot;);
  if (neroInfo.warnings.length) {
    $(dest).append(&quot;&lt;hr&gt;&quot;);
    neroInfo.warnings.forEach(w =&gt; {
      $(&quot;&lt;div class=dash-warning&quot;).text(w).appendTo(dest)
    });
  }
  $(dest).append(&quot;&lt;hr&gt;&quot;);
  showRandom(dest, neroInfo);
  $(dest).append(&quot;&lt;hr&gt;&quot;);
  showPassages(dest, neroInfo);
  MT.signPassage();
};
$(document).one(&quot;:passagedisplay&quot;, render);
&lt;&lt;/script&gt;&gt;\</tw-passagedata><tw-passagedata pid="223" name="g1m Goto Paths" tags="inclusion" position="325,1875" size="100,100">&lt;&lt;script&gt;&gt;
MT.walks = [
  &quot;&lt;hr&gt;&lt;span class=walk-sec-title&gt;Drekkar&lt;/span&gt;&quot;,
  {
    path: [
      { choice: &quot;Drekkar&quot; },
      { t: &quot;g1a Choose Character&quot; },
      { t: &quot;d1a Drekkar Start&quot; },
      { choice: &quot;comply&quot; },
      { t: &quot;d1a Soft Awakening&quot; },
      { t: &quot;d1a Awakened&quot; },
      { t: &quot;d1a Consideration&quot; },
      { t: &quot;d1a Molesting&quot; },
      { choice: &quot;naked&quot; },
      { t: &quot;d1a Naked&quot; },
      { t: &quot;d1a Candle&quot; },
      { t: &quot;d1a Growl Defiantly&quot; },
      { t: &quot;d1a Alarm&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;d2a Alone&quot; },
      { t: &quot;d2a The Candle&quot; },
      { t: &quot;d2a Escape Options&quot; },
      { choice: &quot;struggle&quot;, note: true },
      { t: &quot;d2a Struggle 1&quot; },
      { t: &quot;d2a Escape Actions&quot; },
      { t: &quot;d2a Struggle 2&quot; },
      { t: &quot;d2a Escape Actions&quot; },
      { t: &quot;d2a Struggle 2&quot; },
      { t: &quot;d2a Escape Actions&quot; },
      { t: &quot;d2a Struggle 2&quot; },
      { t: &quot;d2a Escape Actions&quot; },
      { t: &quot;d2a Struggle 2&quot; },
      { t: &quot;d2a Escape Actions&quot; },
      { t: &quot;d2a Struggle 2&quot; },
      { t: &quot;d2a Escape Actions&quot; },
      { t: &quot;d2a Struggle 3&quot; },
      { choice: &quot;snuff&quot; },
      { t: &quot;d2a Snuff Candle Free&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;d3a Escape Start&quot; },
    ]
  },
  {
    path: [
      { choice: &quot;Drekkar&quot; },
      { t: &quot;g1a Choose Character&quot; },
      { t: &quot;d1a Drekkar Start&quot; },
      { choice: &quot;comply&quot; },
      { t: &quot;d1a Soft Awakening&quot; },
      { t: &quot;d1a Awakened&quot; },
      { t: &quot;d1a Consideration&quot; },
      { t: &quot;d1a Molesting&quot; },
      { choice: &quot;naked&quot; },
      { t: &quot;d1a Naked&quot; },
      { t: &quot;d1a Candle&quot; },
      { t: &quot;d1a Growl Defiantly&quot; },
      { t: &quot;d1a Alarm&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;d2a Alone&quot; },
      { t: &quot;d2a The Candle&quot; },
      { t: &quot;d2a Escape Options&quot; },
      { choice: &quot;observe&quot;, note: true, width: &quot;struggle&quot; },
      { t: &quot;d2a Observation 1&quot; },
      { t: &quot;d2a Escape Actions&quot; },
      { t: &quot;d2a Gather Thoughts&quot; },
      { t: &quot;d2a Escape Actions&quot; },
      { t: &quot;d2a Observation 2&quot; },
      { t: &quot;d2a Escape Actions&quot; },
      { t: &quot;d2a Struggle 1&quot; },
      { t: &quot;d2a Escape Actions&quot; },
      { t: &quot;d2a Gather Thoughts&quot; },
      { t: &quot;d2a Dislodge Crystal&quot; },
      { choice: &quot;snuff&quot; },
      { t: &quot;d2a Snuff Candle Bound&quot; },
      { t: &quot;d2a Free Himself&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;d3a Escape Start&quot; },
    ]
  },

  &quot;&lt;hr&gt;&lt;span class=walk-sec-title&gt;Nero 1F Easy Escapes&lt;/span&gt;&quot;,

  &quot;cast &gt; mica &gt; rebuff &gt; alone &gt; mirror &gt; free&quot;,
  {
    meta: {
      kn_Mica: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot; },
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;abused&quot;, note: true },
      { t: &quot;n1a Feign Sleep 1&quot; },
      { t: &quot;n1a Feign Sleep 2&quot; },
      { t: &quot;n1a Feign Sleep 3&quot; },
      { t: &quot;n1a Feign Sleep 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;itch&quot;, note: true },
      { t: &quot;n1s Cast Itch 1&quot; },
      { t: &quot;n1s Cast Itch 2&quot; },
      { t: &quot;n1s Cast Itch 3&quot; },
      { t: &quot;n1p Barbs Slow 1&quot; },
      { choice: &quot;naked&quot; },
      { choice: &quot;mica&quot; },
      { t: &quot;n1p Barbs Slow 2a1&quot; },
      { t: &quot;n1p Barbs Slow 4&quot; },
      { t: &quot;n1p Barbs Slow 5&quot; },
      { choice: &quot;smooth&quot; },
      { t: &quot;n1p Barbs Slow 6n1&quot; },
      { t: &quot;n1p Barbs Slow 6n2&quot; },
      { t: &quot;n1p Barbs Slow End&quot; },
      { t: &quot;n1s Cast Itch 4&quot; },
      { t: &quot;n1s Cast Itch 5&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;tough&quot;, width: &quot;rebuff&quot;, note: true },
      { t: &quot;n1cn Rebuff&quot; },
      { t: &quot;n1cx Start Candle 1&quot; },
      { t: &quot;n1d Start Candle 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;candle&quot; },
      { choice: &quot;sight&quot; },
      { t: &quot;n1s Cast Sight 1&quot; },
      { t: &quot;n1s Cast Sight 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;horny&quot; },
      { t: &quot;n1d Naked Resist&quot; },
      { t: &quot;n1d Cock Rise 1&quot; },
      { t: &quot;n1d Cock Rise 2&quot; },
      { t: &quot;n1d Candle Horny&quot; },
      { t: &quot;n1e Light Squeeze (1,1)&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;n1e Snap Or Lick&quot; },
      { t: &quot;n1e Pull&quot; },
      { t: &quot;n1e Punch&quot; },
      { t: &quot;n1e Heavy Squeeze (1,1)&quot; },
      { t: &quot;n1e Crop 1&quot;, code: &quot;//2&quot; },
      { t: &quot;n1e Crop 2&quot; },
      { t: &quot;n1e Crop 3&quot; },
      { t: &quot;n1e Crop 4&quot; },
      { t: &quot;n2a Ivex Gone&quot; },
      { t: &quot;n2a Relight Candle&quot; },
      { t: &quot;n2b Lust Bar Intro&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;mirror&quot; },
      { t: &quot;n2b Struggle Normal 1&quot; },
      { t: &quot;n2b Struggle Normal 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { t: &quot;n1y Horny Candle&quot; },
      { t: &quot;n1y Horny Mirror&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;desperate&quot; },
      { t: &quot;n2b Struggle Horny 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { t: &quot;n2b Struggle Horny 3&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;struggle&quot; },
      { t: &quot;n2b Struggle Succeed&quot; },
      { t: &quot;n2b Grav Disrupted&quot; },
      { t: &quot;n2b Urgent Choice&quot; },
      { choice: &quot;knife&quot; },
      { t: &quot;n2b Grab Knife&quot; },
      { t: &quot;n2b Use Knife 1&quot; },
      { t: &quot;n2c Use Knife 2&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Ignore Mirror&quot; },
      { t: &quot;n2f Free Action&quot; },
    ],
  },
  {
    meta: {
      kn_Mica: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;chatty&quot;, width: &quot;abused&quot;, note: true },
      { t: &quot;n1a Hello 1&quot; },
      { t: &quot;n1a Hello 2&quot; },
      { t: &quot;n1a Hello 3&quot; },
      { t: &quot;n1a Hello 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;itch&quot;, note: true },
      { t: &quot;n1s Cast Itch 1&quot; },
      { t: &quot;n1s Cast Itch 2&quot; },
      { t: &quot;n1s Cast Itch 3&quot; },
      { t: &quot;n1p Barbs Slow 1&quot; },
      { choice: &quot;naked&quot; },
      { choice: &quot;mica&quot; },
      { t: &quot;n1p Barbs Slow 2n1&quot; },
      { t: &quot;n1p Barbs Slow 2n2&quot; },
      { t: &quot;n1p Barbs Slow 4&quot; },
      { t: &quot;n1p Barbs Slow 5&quot; },
      { choice: &quot;smooth&quot; },
      { t: &quot;n1p Barbs Slow 6n1&quot; },
      { t: &quot;n1p Barbs Slow 6n2&quot; },
      { t: &quot;n1p Barbs Slow End&quot; },
      { t: &quot;n1s Cast Itch 4&quot; },
      { t: &quot;n1s Cast Itch 5&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;rebuff&quot;, note: true },
      { t: &quot;n1cn Rebuff&quot; },
      { t: &quot;n1cx Start Candle 1&quot; },
      { t: &quot;n1d Start Candle 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;candle&quot; },
      { choice: &quot;sight&quot; },
      { t: &quot;n1s Cast Sight 1&quot; },
      { t: &quot;n1s Cast Sight 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;horny&quot; },
      { t: &quot;n1d Naked Resist&quot; },
      { t: &quot;n1d Cock Rise 1&quot; },
      { t: &quot;n1d Cock Rise 2&quot; },
      { t: &quot;n1d Candle Horny&quot; },
      { t: &quot;n1e Light Squeeze (1,1)&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;n1e Snap Or Lick&quot; },
      { t: &quot;n1e Pull&quot; },
      { t: &quot;n1e Punch&quot; },
      { t: &quot;n1e Heavy Squeeze (1,1)&quot; },
      { t: &quot;n1e Crop 1&quot;, code: &quot;//2&quot; },
      { t: &quot;n1e Crop 2&quot; },
      { t: &quot;n1e Crop 3&quot; },
      { t: &quot;n1e Crop 4&quot; },
      { t: &quot;n2a Ivex Gone&quot; },
      { t: &quot;n2a Relight Candle&quot; },
      { t: &quot;n2b Lust Bar Intro&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;mirror&quot; },
      { t: &quot;n2b Struggle Normal 1&quot; },
      { t: &quot;n2b Struggle Normal 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { t: &quot;n1y Horny Candle&quot; },
      { t: &quot;n1y Horny Mirror&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;desperate&quot; },
      { t: &quot;n2b Struggle Horny 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { t: &quot;n2b Struggle Horny 3&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;struggle&quot; },
      { t: &quot;n2b Struggle Succeed&quot; },
      { t: &quot;n2b Grav Disrupted&quot; },
      { t: &quot;n2b Urgent Choice&quot; },
      { choice: &quot;knife&quot; },
      { t: &quot;n2b Grab Knife&quot; },
      { t: &quot;n2b Use Knife 1&quot; },
      { t: &quot;n2c Use Knife 2&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Ignore Mirror&quot; },
      { t: &quot;n2f Free Action&quot; },
    ],
  },
  {
    meta: {
      kn_Mica: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;endgame&quot;, width: &quot;abused &gt; itch&quot;, note: true },
      { t: &quot;n1a Endgame 1&quot; },
      { t: &quot;n1a Endgame 2&quot; },
      { t: &quot;n1a Endgame 3&quot; },
      { t: &quot;n1p Barbs Slow 1&quot; },
      { choice: &quot;naked&quot; },
      { choice: &quot;mica&quot; },
      { t: &quot;n1p Barbs Slow 2n1&quot; },
      { t: &quot;n1p Barbs Slow 2n2&quot; },
      { t: &quot;n1p Barbs Slow 4&quot; },
      { t: &quot;n1p Barbs Slow 5&quot; },
      { choice: &quot;smooth&quot; },
      { t: &quot;n1p Barbs Slow 6n1&quot; },
      { t: &quot;n1p Barbs Slow 6n2&quot; },
      { t: &quot;n1p Barbs Slow End&quot; },
      { t: &quot;n1a Endgame 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;rebuff&quot;, note: true },
      { t: &quot;n1cn Rebuff&quot; },
      { t: &quot;n1cx Start Candle 1&quot; },
      { t: &quot;n1d Start Candle 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;candle&quot; },
      { choice: &quot;sight&quot; },
      { t: &quot;n1s Cast Sight 1&quot; },
      { t: &quot;n1s Cast Sight 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;horny&quot; },
      { t: &quot;n1d Naked Resist&quot; },
      { t: &quot;n1d Cock Rise 1&quot; },
      { t: &quot;n1d Cock Rise 2&quot; },
      { t: &quot;n1d Candle Horny&quot; },
      { t: &quot;n1e Light Squeeze (1,1)&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;n1e Snap Or Lick&quot; },
      { t: &quot;n1e Pull&quot; },
      { t: &quot;n1e Punch&quot; },
      { t: &quot;n1e Heavy Squeeze (1,1)&quot; },
      { t: &quot;n1e Crop 1&quot;, code: &quot;//2&quot; },
      { t: &quot;n1e Crop 2&quot; },
      { t: &quot;n1e Crop 3&quot; },
      { t: &quot;n1e Crop 4&quot; },
      { t: &quot;n2a Ivex Gone&quot; },
      { t: &quot;n2a Relight Candle&quot; },
      { t: &quot;n2b Lust Bar Intro&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;mirror&quot; },
      { t: &quot;n2b Struggle Normal 1&quot; },
      { t: &quot;n2b Struggle Normal 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { t: &quot;n1y Horny Candle&quot; },
      { t: &quot;n1y Horny Mirror&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;desperate&quot; },
      { t: &quot;n2b Struggle Horny 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { t: &quot;n2b Struggle Horny 3&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;struggle&quot; },
      { t: &quot;n2b Struggle Succeed&quot; },
      { t: &quot;n2b Grav Disrupted&quot; },
      { t: &quot;n2b Urgent Choice&quot; },
      { choice: &quot;knife&quot; },
      { t: &quot;n2b Grab Knife&quot; },
      { t: &quot;n2b Use Knife 1&quot; },
      { t: &quot;n2c Use Knife 2&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Ignore Mirror&quot; },
      { t: &quot;n2f Free Action&quot; },
    ],
  },

  &quot;rebuff &gt; pevhin &gt; alone &gt; oil &gt; mirror &gt; free&quot;,
  {
    meta: {
      kn_Pevhin: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;abused&quot;, note: true },
      { t: &quot;n1a Feign Sleep 1&quot; },
      { t: &quot;n1a Feign Sleep 2&quot; },
      { t: &quot;n1a Feign Sleep 3&quot; },
      { t: &quot;n1a Feign Sleep 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;tough&quot;, width: &quot;rebuff&quot;, note: true },
      { t: &quot;n1cn Rebuff&quot; },
      { t: &quot;n1cx Start Candle 1&quot; },
      { t: &quot;n1d Start Candle 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;candle&quot; },
      { choice: &quot;naked&quot; },
      { t: &quot;n1d Strip Resist&quot; },
      { t: &quot;n1p Barbs Fast 1&quot; },
      { choice: &quot;pevhin&quot; },
      { t: &quot;n1p Barbs Fast 2&quot; },
      { t: &quot;n1p Barbs Fast 3&quot; },
      { t: &quot;n1p Barbs Fast 4&quot; },
      { choice: &quot;smooth&quot; },
      { t: &quot;n1p Barbs Fast 5&quot;, code: &quot;$n_barbs = true&quot; },
      { t: &quot;n1p Barbs Fast End&quot; },
      { t: &quot;n1d Cock Rise 1&quot; },
      { t: &quot;n1d Cock Rise 2&quot; },
      { t: &quot;n1d Candle Horny&quot; },
      { t: &quot;n1e Light Squeeze (1,1)&quot; },
      { choice: &quot;horny&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;n1e Snap Or Lick&quot; },
      { t: &quot;n1e Pull&quot; },
      { t: &quot;n1e Punch&quot; },
      { t: &quot;n1e Heavy Squeeze (1,1)&quot; },
      { t: &quot;n1e Crop 1&quot;, code: &quot;//2&quot; },
      { t: &quot;n1e Crop 2&quot; },
      { t: &quot;n1e Crop 3&quot; },
      { t: &quot;n1e Crop 4&quot; },
      { t: &quot;n2a Ivex Gone&quot; },
      { t: &quot;n2a Relight Candle&quot; },
      { t: &quot;n2b Lust Bar Intro&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;oil&quot; },
      { t: &quot;n1s Cast Alone 1&quot; },
      { t: &quot;n1s Cast Alone 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;sight&quot; },
      { t: &quot;n1s Cast Sight Horny&quot; },
      { t: &quot;n1s Cast Sight 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;mirror&quot; },
      { t: &quot;n1y Horny Candle&quot; },
      { t: &quot;n1y Horny Mirror&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;struggle&quot; },
      { t: &quot;n2b Struggle Succeed&quot; },
      { t: &quot;n2b Grav Disrupted&quot; },
      { t: &quot;n2b Urgent Choice&quot; },
      { choice: &quot;knife&quot; },
      { t: &quot;n2b Grab Knife&quot; },
      { t: &quot;n2b Use Knife 1&quot; },
      { t: &quot;n2c Use Knife 2&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Ignore Mirror&quot; },
      { t: &quot;n2f Free Action&quot; },
    ],
  },
  {
    meta: {
      kn_Pevhin: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;chatty&quot;, width: &quot;abused&quot;, note: true },
      { t: &quot;n1a Hello 1&quot; },
      { t: &quot;n1a Hello 2&quot; },
      { t: &quot;n1a Hello 3&quot; },
      { t: &quot;n1a Hello 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;rebuff&quot;, note: true },
      { t: &quot;n1cn Rebuff&quot; },
      { t: &quot;n1cx Start Candle 1&quot; },
      { t: &quot;n1d Start Candle 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;candle&quot; },
      { choice: &quot;naked&quot; },
      { t: &quot;n1d Strip Resist&quot; },
      { t: &quot;n1p Barbs Fast 1&quot; },
      { choice: &quot;pevhin&quot; },
      { t: &quot;n1p Barbs Fast 2&quot; },
      { t: &quot;n1p Barbs Fast 3&quot; },
      { t: &quot;n1p Barbs Fast 4&quot; },
      { choice: &quot;smooth&quot; },
      { t: &quot;n1p Barbs Fast 5&quot;, code: &quot;$n_barbs = true&quot; },
      { t: &quot;n1p Barbs Fast End&quot; },
      { t: &quot;n1d Cock Rise 1&quot; },
      { t: &quot;n1d Cock Rise 2&quot; },
      { t: &quot;n1d Candle Horny&quot; },
      { t: &quot;n1e Light Squeeze (1,1)&quot; },
      { choice: &quot;horny&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;n1e Snap Or Lick&quot; },
      { t: &quot;n1e Pull&quot; },
      { t: &quot;n1e Punch&quot; },
      { t: &quot;n1e Heavy Squeeze (1,1)&quot; },
      { t: &quot;n1e Crop 1&quot;, code: &quot;//2&quot; },
      { t: &quot;n1e Crop 2&quot; },
      { t: &quot;n1e Crop 3&quot; },
      { t: &quot;n1e Crop 4&quot; },
      { t: &quot;n2a Ivex Gone&quot; },
      { t: &quot;n2a Relight Candle&quot; },
      { t: &quot;n2b Lust Bar Intro&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;oil&quot; },
      { t: &quot;n1s Cast Alone 1&quot; },
      { t: &quot;n1s Cast Alone 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;sight&quot; },
      { t: &quot;n1s Cast Sight Horny&quot; },
      { t: &quot;n1s Cast Sight 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;mirror&quot; },
      { t: &quot;n1y Horny Candle&quot; },
      { t: &quot;n1y Horny Mirror&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;struggle&quot; },
      { t: &quot;n2b Struggle Succeed&quot; },
      { t: &quot;n2b Grav Disrupted&quot; },
      { t: &quot;n2b Urgent Choice&quot; },
      { choice: &quot;knife&quot; },
      { t: &quot;n2b Grab Knife&quot; },
      { t: &quot;n2b Use Knife 1&quot; },
      { t: &quot;n2c Use Knife 2&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Ignore Mirror&quot; },
      { t: &quot;n2f Free Action&quot; },
    ],
  },

  &quot;endgame &gt; mica &gt; wand &gt; free&quot;,
  {
    meta: {
      kn_Mica: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;endgame&quot; },
      { t: &quot;n1a Endgame 1&quot; },
      { t: &quot;n1a Endgame 2&quot; },
      { t: &quot;n1a Endgame 3&quot; },
      { t: &quot;n1p Barbs Slow 1&quot; },
      { choice: &quot;naked&quot; },
      { choice: &quot;mica&quot; },
      { t: &quot;n1p Barbs Slow 2n1&quot; },
      { t: &quot;n1p Barbs Slow 2n2&quot; },
      { t: &quot;n1p Barbs Slow 4&quot; },
      { t: &quot;n1p Barbs Slow 5&quot; },
      { choice: &quot;smooth&quot; },
      { t: &quot;n1p Barbs Slow 6n1&quot; },
      { t: &quot;n1p Barbs Slow 6n2&quot; },
      { t: &quot;n1p Barbs Slow End&quot; },
      { t: &quot;n1a Endgame 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;sight&quot; },
      { t: &quot;n1s Cast Sight 1&quot; },
      { t: &quot;n1s Cast Sight 2&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;tap&quot; },
      { t: &quot;n1x Study&quot; },
      { t: &quot;n1x Desk&quot; },
      { t: &quot;n1x Mirror&quot; },
      { t: &quot;n1s Tap 1&quot; },
      { t: &quot;n1s Tap 2&quot; },
      { t: &quot;n1s Tap 3&quot; },
      { t: &quot;n1s Tap 4&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;bottle&quot; },
      { t: &quot;n1x Cabinets&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Nackle Brief&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Bottle Ask Name&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;recruit&quot; },
      { t: &quot;n1cn Charm&quot; },
      { t: &quot;n1cn Recruit 1&quot; },
      { t: &quot;n1cn Recruit 2&quot; },
      { t: &quot;n1cn Ivex Offended (1,1)&quot; },
      { choice: &quot;contact&quot; },
      { t: &quot;n1s Say Device&quot; },
      { t: &quot;n1cn Ivex Offended (1,1)&quot; },
      { t: &quot;n1cn Secret Guild&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { t: &quot;n1s Say Lance&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { choice: &quot;wand&quot; },
      { t: &quot;n1x Bookcases&quot; },
      { t: &quot;n1x Wand&quot; },
      { t: &quot;n1x Wand Ask&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { choice: &quot;candle&quot; },
      { t: &quot;n1cr Guild Name 1&quot; },
      { t: &quot;n1cr Guild Name 2&quot; },
      { t: &quot;n1cr Guild Name 3&quot; },
      { t: &quot;n1cr Guild Name 4&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
      { t: &quot;n1cr Inhibition 1&quot; },
      { t: &quot;n1cr Inhibition 2&quot; },
      { t: &quot;n1cr Ivex Bait&quot; },
      { t: &quot;n1cr Ivex Trap (4,3)&quot; },
      { t: &quot;n1cr Reject Fantasy 1&quot;, code: &quot;$g_choice = 1&quot; },
      { t: &quot;n1cr Reject Fantasy 2&quot; },
      { t: &quot;n1cx Start Candle 1&quot; },
      { t: &quot;n1d Start Candle 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;horny&quot; },
      { t: &quot;n1d Naked Resist&quot; },
      { t: &quot;n1d Cock Rise 1&quot; },
      { t: &quot;n1d Cock Rise 2&quot; },
      { t: &quot;n1d Candle Horny&quot; },
      { t: &quot;n1e Light Squeeze (1,1)&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;n1e Snap Or Lick&quot; },
      { t: &quot;n1e Pull&quot; },
      { t: &quot;n1e Punch&quot; },
      { t: &quot;n1e Heavy Squeeze (1,1)&quot; },
      { t: &quot;n1e Crop 1&quot;, code: &quot;//2&quot; },
      { t: &quot;n1e Crop 2&quot; },
      { t: &quot;n1e Crop 3&quot; },
      { t: &quot;n1e Crop 4&quot; },
      { t: &quot;n2a Ivex Gone&quot; },
      { t: &quot;n2a Relight Candle&quot; },
      { t: &quot;n2b Lust Bar Intro&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;desperate&quot; },
      { t: &quot;n2b Struggle Normal 1&quot; },
      { t: &quot;n2b Struggle Normal 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { t: &quot;n2b Struggle Horny 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { t: &quot;n2b Struggle Horny 3&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;struggle&quot; },
      { t: &quot;n2b Struggle Succeed&quot; },
      { t: &quot;n2b Grav Disrupted&quot; },
      { t: &quot;n2b Urgent Choice&quot; },
      { choice: &quot;knife&quot; },
      { t: &quot;n2b Grab Knife&quot; },
      { t: &quot;n2b Use Knife 1&quot; },
      { t: &quot;n2c Use Knife 2&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Rescue Mirror 1&quot; },
      { t: &quot;n2c Rescue Mirror 2&quot; },
      { t: &quot;n2c Rescue Mirror 3&quot; },
      { t: &quot;n2f Free Action&quot; },
    ]
  },

  &quot;&lt;hr&gt;&lt;span class=walk-sec-title&gt;Nero 1F Clever Escapes&lt;/span&gt;&quot;,

  &quot;endgame &gt; mica &gt; clever&quot;,
  {
    meta: {
      kn_Mica: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;endgame&quot; },
      { t: &quot;n1a Endgame 1&quot; },
      { t: &quot;n1a Endgame 2&quot; },
      { t: &quot;n1a Endgame 3&quot; },
      { t: &quot;n1p Barbs Slow 1&quot; },
      { choice: &quot;naked&quot; },
      { choice: &quot;mica&quot; },
      { t: &quot;n1p Barbs Slow 2n1&quot; },
      { t: &quot;n1p Barbs Slow 2n2&quot; },
      { t: &quot;n1p Barbs Slow 4&quot; },
      { t: &quot;n1p Barbs Slow 5&quot; },
      { choice: &quot;smooth&quot; },
      { t: &quot;n1p Barbs Slow 6n1&quot; },
      { t: &quot;n1p Barbs Slow 6n2&quot; },
      { t: &quot;n1p Barbs Slow End&quot; },
      { t: &quot;n1a Endgame 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;sight&quot; },
      { t: &quot;n1s Cast Sight 1&quot; },
      { t: &quot;n1s Cast Sight 2&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;tap&quot; },
      { t: &quot;n1x Study&quot; },
      { t: &quot;n1x Desk&quot; },
      { t: &quot;n1x Mirror&quot; },
      { t: &quot;n1s Tap 1&quot; },
      { t: &quot;n1s Tap 2&quot; },
      { t: &quot;n1s Tap 3&quot; },
      { t: &quot;n1s Tap 4&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;bottle&quot; },
      { t: &quot;n1x Cabinets&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Nackle Brief&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Bottle Ask Name&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;recruit&quot;, width: &quot;submit&quot;, note: true },
      { t: &quot;n1cn Charm&quot; },
      { t: &quot;n1cn Recruit 1&quot; },
      { t: &quot;n1cn Recruit 2&quot; },
      { t: &quot;n1cn Ivex Offended (1,1)&quot; },
      { choice: &quot;contact&quot; },
      { t: &quot;n1s Say Device&quot; },
      { t: &quot;n1cn Ivex Offended (1,1)&quot; },
      { t: &quot;n1cn Secret Guild&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { t: &quot;n1s Say Lance&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { choice: &quot;penguin&quot; },
      { t: &quot;n1x Penguin&quot; },
      { t: &quot;n1x Penguin Ask&quot; },
      { t: &quot;n1s Password Intro&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { choice: &quot;hurry&quot; },
      /* note, doing hurry right away will force a bad password guess */
      { t: &quot;n1cr Guild Name 1&quot; },
      { t: &quot;n1cr Guild Name 2&quot; },
      { t: &quot;n1cr Guild Name 3&quot; },
      { t: &quot;n1cr Guild Name 4&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
      { t: &quot;n1s Impatient&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
      { choice: &quot;guess&quot; },
      { t: &quot;n1s Guess Password&quot; },
      { t: &quot;n1s Say Password&quot;, code: &quot;$n_passToTry = &#39;Password&#39;&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
      { choice: &quot;globe&quot; },
      { t: &quot;n1x Globe&quot; },
      { choice: &quot;clever&quot; },
      { t: &quot;n1x Globe Ask&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;n1f Clever Escape 1&quot; },
      { t: &quot;n1f Clever Escape 2&quot; },
      { t: &quot;n1f Clever Escape 3&quot; },
      { t: &quot;n1f Clever Escape 4&quot; },
      { t: &quot;n1f Clever Escape 5&quot; },
      { t: &quot;n1f Clever Escape 6&quot; },
      { choice: &quot;carpe&quot; },
      { t: &quot;n1f Clever Alone 1&quot; },
      { t: &quot;n1f Clever Alone 2&quot; },
      { t: &quot;n1f Clever Alone 3&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Clever Free 1&quot; },
      { t: &quot;n2c Clever Free 2&quot; },
      { t: &quot;n2c Clever Free 3&quot; },
      { t: &quot;n2f Free Action&quot; },
    ]
  },
  {
    meta: {
      kn_Mica: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;endgame&quot; },
      { t: &quot;n1a Endgame 1&quot; },
      { t: &quot;n1a Endgame 2&quot; },
      { t: &quot;n1a Endgame 3&quot; },
      { t: &quot;n1p Barbs Slow 1&quot; },
      { choice: &quot;naked&quot; },
      { choice: &quot;mica&quot; },
      { t: &quot;n1p Barbs Slow 2n1&quot; },
      { t: &quot;n1p Barbs Slow 2n2&quot; },
      { t: &quot;n1p Barbs Slow 4&quot; },
      { t: &quot;n1p Barbs Slow 5&quot; },
      { choice: &quot;smooth&quot; },
      { t: &quot;n1p Barbs Slow 6n1&quot; },
      { t: &quot;n1p Barbs Slow 6n2&quot; },
      { t: &quot;n1p Barbs Slow End&quot; },
      { t: &quot;n1a Endgame 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;sight&quot; },
      { t: &quot;n1s Cast Sight 1&quot; },
      { t: &quot;n1s Cast Sight 2&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;tap&quot; },
      { t: &quot;n1x Study&quot; },
      { t: &quot;n1x Desk&quot; },
      { t: &quot;n1x Mirror&quot; },
      { t: &quot;n1s Tap 1&quot; },
      { t: &quot;n1s Tap 2&quot; },
      { t: &quot;n1s Tap 3&quot; },
      { t: &quot;n1s Tap 4&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;bottle&quot; },
      { t: &quot;n1x Cabinets&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Nackle Brief&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Bottle Ask Name&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;submit&quot;, note: true },
      { t: &quot;n1cn Charm&quot; },
      { t: &quot;n1cn Collab&quot; },
      { t: &quot;n1cn Ivex Disdainful (1,1)&quot; },
      { choice: &quot;contact&quot; },
      { t: &quot;n1s Say Device&quot; },
      { t: &quot;n1cn Ivex Disdainful (1,1)&quot; },
      { t: &quot;n1cn Apprentice&quot; },
      { t: &quot;n1cr Ivex Demanding (3,2)&quot; },
      { t: &quot;n1s Say Lance&quot; },
      { t: &quot;n1cr Ivex Demanding (3,2)&quot; },
      { choice: &quot;penguin&quot; },
      { t: &quot;n1x Penguin&quot; },
      { t: &quot;n1x Penguin Ask&quot; },
      { t: &quot;n1s Password Intro&quot; },
      { t: &quot;n1cr Ivex Demanding (3,2)&quot; },
      { t: &quot;n1cr Subby Deep 1&quot; },
      { t: &quot;n1cr Subby Deep 2&quot; },
      { t: &quot;n1cs Room Flip 1&quot; },
      { t: &quot;n1cs Room Flip 2&quot; },
      { t: &quot;n1cs Room Flip 3&quot; },
      { t: &quot;n1cs Bonding&quot; },
      { t: &quot;n1cs Ivex Dominant (3,2)&quot; },
      { choice: &quot;hurry&quot; },
      { t: &quot;n1s Impatient&quot; },
      { t: &quot;n1cs Ivex Dominant (3,2)&quot; },
      { choice: &quot;guess&quot; },
      { t: &quot;n1s Guess Password&quot; },
      { t: &quot;n1s Say Password&quot;, code: &quot;$n_passToTry = &#39;Password&#39;&quot; },
      { t: &quot;n1cs Ivex Dominant (3,2)&quot; },
      { t: &quot;n1cs Licking Eager&quot; },
      { t: &quot;n1cs Licking Continue&quot; },
      { t: &quot;n1cs Ivex Cruel (4,3)&quot; },
      { choice: &quot;globe&quot; },
      { t: &quot;n1x Globe&quot; },
      { choice: &quot;clever&quot; },
      { t: &quot;n1x Globe Ask&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;n1f Clever Escape 1&quot; },
      { t: &quot;n1f Clever Escape 2&quot; },
      { t: &quot;n1f Clever Escape 3&quot; },
      { t: &quot;n1f Clever Escape 4&quot; },
      { t: &quot;n1f Clever Escape 5&quot; },
      { t: &quot;n1f Clever Escape 6&quot; },
      { choice: &quot;carpe&quot; },
      { t: &quot;n1f Clever Alone 1&quot; },
      { t: &quot;n1f Clever Alone 2&quot; },
      { t: &quot;n1f Clever Alone 3&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Clever Free 1&quot; },
      { t: &quot;n2c Clever Free 2&quot; },
      { t: &quot;n2c Clever Free 3&quot; },
      { t: &quot;n2f Free Action&quot; },
    ]
  },

  &quot;recruit &gt; younger &gt; mica &gt; clever&quot;,
  {
    meta: {
      kn_Mica: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;abused&quot;, note: true },
      { t: &quot;n1a Feign Sleep 1&quot; },
      { t: &quot;n1a Feign Sleep 2&quot; },
      { t: &quot;n1a Feign Sleep 3&quot; },
      { t: &quot;n1a Feign Sleep 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;recruit&quot; },
      { t: &quot;n1cn Charm&quot; },
      { t: &quot;n1cn Recruit 1&quot; },
      { t: &quot;n1cn Recruit 2&quot; },
      { t: &quot;n1cn Ivex Offended (1,1)&quot; },
      { choice: &quot;receptive&quot; },
      { t: &quot;n1cn Secret Guild&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { choice: &quot;younger&quot; },
      { t: &quot;n1s Cast Younger 1&quot; },
      { t: &quot;n1s Cast Younger 2&quot; },
      { t: &quot;n1p Barbs Slow 1&quot; },
      { choice: &quot;naked&quot; },
      { choice: &quot;mica&quot; },
      { t: &quot;n1p Barbs Slow 2a1&quot; },
      { t: &quot;n1p Barbs Slow 4&quot; },
      { t: &quot;n1p Barbs Slow 5&quot; },
      { choice: &quot;smooth&quot; },
      { t: &quot;n1p Barbs Slow 6n1&quot; },
      { t: &quot;n1p Barbs Slow 6n2&quot; },
      { t: &quot;n1p Barbs Slow End&quot; },
      { t: &quot;n1s Cast Younger 3&quot; },
      { t: &quot;n1s Cast Younger 4&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { choice: &quot;sight&quot; },
      { t: &quot;n1s Cast Sight 1&quot; },
      { t: &quot;n1s Cast Sight 2&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { choice: &quot;tap&quot; },
      { t: &quot;n1x Study&quot; },
      { t: &quot;n1x Desk&quot; },
      { t: &quot;n1x Mirror&quot; },
      { t: &quot;n1s Tap 1&quot; },
      { t: &quot;n1s Tap 2&quot; },
      { t: &quot;n1s Tap 3&quot; },
      { t: &quot;n1s Tap 4&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { t: &quot;n1cr Guild Name 1&quot; },
      { t: &quot;n1cr Guild Name 2&quot; },
      { t: &quot;n1cr Guild Name 3&quot; },
      { t: &quot;n1cr Guild Name 4&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
      { choice: &quot;bottle&quot; },
      { t: &quot;n1x Cabinets&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Nackle Brief&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Bottle Ask Name&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
      { choice: &quot;contact&quot; },
      { t: &quot;n1s Say Device&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
      { t: &quot;n1s Say Lance&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
      { choice: &quot;inhibition&quot; },
      { t: &quot;n1cr Inhibition 1&quot; },
      { t: &quot;n1cr Inhibition 2&quot; },
      { t: &quot;n1cr Ivex Bait&quot; },
      { t: &quot;n1cr Ivex Trap (4,3)&quot; },
      { choice: &quot;penguin&quot; },
      { t: &quot;n1x Penguin&quot; },
      { t: &quot;n1x Penguin Ask&quot; },
      { t: &quot;n1s Password Intro&quot; },
      { t: &quot;n1cr Ivex Trap (4,3)&quot; },
      { choice: &quot;hurry&quot; },
      { t: &quot;n1s Impatient&quot; },
      { t: &quot;n1cr Ivex Trap (4,3)&quot; },
      { choice: &quot;guess&quot; },
      { t: &quot;n1s Guess Password&quot; },
      { t: &quot;n1s Say Password&quot;, code: &quot;$n_passToTry = &#39;Password&#39;&quot; },
      { t: &quot;n1cr Ivex Trap (4,3)&quot; },
      { t: &quot;n1cr Reject Fantasy 1&quot;, code: &quot;$g_choice = 1&quot; },
      { t: &quot;n1cr Reject Fantasy 2&quot; },
      { t: &quot;n1cx Start Candle 1&quot; },
      { t: &quot;n1d Start Candle 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;candle&quot; },
      { choice: &quot;globe&quot; },
      { t: &quot;n1x Globe&quot; },
      { choice: &quot;clever&quot; },
      { t: &quot;n1x Globe Ask&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;n1f Clever Escape 1&quot; },
      { t: &quot;n1f Clever Escape 2&quot; },
      { t: &quot;n1f Clever Escape 3&quot; },
      { t: &quot;n1f Clever Escape 4&quot; },
      { t: &quot;n1f Clever Escape 5&quot; },
      { t: &quot;n1f Clever Escape 6&quot; },
      { choice: &quot;carpe&quot; },
      { t: &quot;n1f Clever Alone 1&quot; },
      { t: &quot;n1f Clever Alone 2&quot; },
      { t: &quot;n1f Clever Alone 3&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Clever Free 1&quot; },
      { t: &quot;n2c Clever Free 2&quot; },
      { t: &quot;n2c Clever Free 3&quot; },
      { t: &quot;n2f Free Action&quot; },
    ]
  },
  {
    meta: {
      kn_Mica: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;chatty&quot;, width: &quot;abused&quot;, note: true },
      { t: &quot;n1a Hello 1&quot; },
      { t: &quot;n1a Hello 2&quot; },
      { t: &quot;n1a Hello 3&quot; },
      { t: &quot;n1a Hello 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;recruit&quot;, width: &quot;submit&quot; },
      { t: &quot;n1cn Charm&quot; },
      { t: &quot;n1cn Recruit 1&quot; },
      { t: &quot;n1cn Recruit 2&quot; },
      { t: &quot;n1cn Ivex Offended (1,1)&quot; },
      { choice: &quot;receptive&quot; },
      { t: &quot;n1cn Secret Guild&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { choice: &quot;younger&quot; },
      { t: &quot;n1s Cast Younger 1&quot; },
      { t: &quot;n1s Cast Younger 2&quot; },
      { t: &quot;n1p Barbs Slow 1&quot; },
      { choice: &quot;naked&quot; },
      { choice: &quot;mica&quot; },
      { t: &quot;n1p Barbs Slow 2n1&quot; },
      { t: &quot;n1p Barbs Slow 2n2&quot; },
      { t: &quot;n1p Barbs Slow 4&quot; },
      { t: &quot;n1p Barbs Slow 5&quot; },
      { choice: &quot;smooth&quot; },
      { t: &quot;n1p Barbs Slow 6n1&quot; },
      { t: &quot;n1p Barbs Slow 6n2&quot; },
      { t: &quot;n1p Barbs Slow End&quot; },
      { t: &quot;n1s Cast Younger 3&quot; },
      { t: &quot;n1s Cast Younger 4&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { choice: &quot;sight&quot; },
      { t: &quot;n1s Cast Sight 1&quot; },
      { t: &quot;n1s Cast Sight 2&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { choice: &quot;tap&quot; },
      { t: &quot;n1x Study&quot; },
      { t: &quot;n1x Desk&quot; },
      { t: &quot;n1x Mirror&quot; },
      { t: &quot;n1s Tap 1&quot; },
      { t: &quot;n1s Tap 2&quot; },
      { t: &quot;n1s Tap 3&quot; },
      { t: &quot;n1s Tap 4&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { t: &quot;n1cr Guild Name 1&quot; },
      { t: &quot;n1cr Guild Name 2&quot; },
      { t: &quot;n1cr Guild Name 3&quot; },
      { t: &quot;n1cr Guild Name 4&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
      { choice: &quot;bottle&quot; },
      { t: &quot;n1x Cabinets&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Nackle Brief&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Bottle Ask Name&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
      { choice: &quot;contact&quot; },
      { t: &quot;n1s Say Device&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
      { t: &quot;n1s Say Lance&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
      { choice: &quot;inhibition&quot; },
      { t: &quot;n1cr Inhibition 1&quot; },
      { t: &quot;n1cr Inhibition 2&quot; },
      { t: &quot;n1cr Ivex Bait&quot; },
      { t: &quot;n1cr Ivex Trap (4,3)&quot; },
      { choice: &quot;penguin&quot; },
      { t: &quot;n1x Penguin&quot; },
      { t: &quot;n1x Penguin Ask&quot; },
      { t: &quot;n1s Password Intro&quot; },
      { t: &quot;n1cr Ivex Trap (4,3)&quot; },
      { choice: &quot;hurry&quot; },
      { t: &quot;n1s Impatient&quot; },
      { t: &quot;n1cr Ivex Trap (4,3)&quot; },
      { choice: &quot;guess&quot; },
      { t: &quot;n1s Guess Password&quot; },
      { t: &quot;n1s Say Password&quot;, code: &quot;$n_passToTry = &#39;Password&#39;&quot; },
      { t: &quot;n1cr Ivex Trap (4,3)&quot; },
      { t: &quot;n1cr Reject Fantasy 1&quot;, code: &quot;$g_choice = 1&quot; },
      { t: &quot;n1cr Reject Fantasy 2&quot; },
      { t: &quot;n1cx Start Candle 1&quot; },
      { t: &quot;n1d Start Candle 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;candle&quot; },
      { choice: &quot;globe&quot; },
      { t: &quot;n1x Globe&quot; },
      { choice: &quot;clever&quot; },
      { t: &quot;n1x Globe Ask&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;n1f Clever Escape 1&quot; },
      { t: &quot;n1f Clever Escape 2&quot; },
      { t: &quot;n1f Clever Escape 3&quot; },
      { t: &quot;n1f Clever Escape 4&quot; },
      { t: &quot;n1f Clever Escape 5&quot; },
      { t: &quot;n1f Clever Escape 6&quot; },
      { choice: &quot;carpe&quot; },
      { t: &quot;n1f Clever Alone 1&quot; },
      { t: &quot;n1f Clever Alone 2&quot; },
      { t: &quot;n1f Clever Alone 3&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Clever Free 1&quot; },
      { t: &quot;n2c Clever Free 2&quot; },
      { t: &quot;n2c Clever Free 3&quot; },
      { t: &quot;n2f Free Action&quot; },
    ]
  },

  &quot;submit &gt; younger &gt; mica &gt; horny &gt; clever&quot;,
  {
    meta: {
      kn_Mica: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;abused&quot;, note: true },
      { t: &quot;n1a Feign Sleep 1&quot; },
      { t: &quot;n1a Feign Sleep 2&quot; },
      { t: &quot;n1a Feign Sleep 3&quot; },
      { t: &quot;n1a Feign Sleep 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;submit&quot; },
      { t: &quot;n1cn Charm&quot; },
      { t: &quot;n1cn Collab&quot; },
      { t: &quot;n1cn Ivex Disdainful (1,1)&quot; },
      { choice: &quot;receptive&quot; },
      { t: &quot;n1cn Apprentice&quot; },
      { t: &quot;n1cr Ivex Demanding (3,2)&quot; },
      { choice: &quot;younger&quot; },
      { t: &quot;n1s Cast Younger 1&quot; },
      { t: &quot;n1s Cast Younger 2&quot; },
      { t: &quot;n1p Barbs Slow 1&quot; },
      { choice: &quot;naked&quot; },
      { choice: &quot;mica&quot; },
      { t: &quot;n1p Barbs Slow 2a1&quot; },
      { t: &quot;n1p Barbs Slow 4&quot; },
      { t: &quot;n1p Barbs Slow 5&quot; },
      { choice: &quot;smooth&quot; },
      { t: &quot;n1p Barbs Slow 6n1&quot; },
      { t: &quot;n1p Barbs Slow 6n2&quot; },
      { t: &quot;n1p Barbs Slow End&quot; },
      { t: &quot;n1s Cast Younger 3&quot; },
      { t: &quot;n1s Cast Younger 4&quot; },
      { t: &quot;n1cr Ivex Demanding (3,2)&quot; },
      { choice: &quot;sight&quot; },
      { t: &quot;n1s Cast Sight 1&quot; },
      { t: &quot;n1s Cast Sight 2&quot; },
      { t: &quot;n1cr Ivex Demanding (3,2)&quot; },
      { t: &quot;n1cr Subby Deep 1&quot; },
      { t: &quot;n1cr Subby Deep 2&quot; },
      { t: &quot;n1cs Room Flip 1&quot; },
      { t: &quot;n1cs Room Flip 2&quot; },
      { t: &quot;n1cs Room Flip 3&quot; },
      { t: &quot;n1cs Bonding&quot; },
      { t: &quot;n1cs Ivex Dominant (3,2)&quot; },
      { choice: &quot;tap&quot; },
      { t: &quot;n1x Study&quot; },
      { t: &quot;n1x Desk&quot; },
      { t: &quot;n1x Mirror&quot; },
      { t: &quot;n1s Tap 1&quot; },
      { t: &quot;n1s Tap 2&quot; },
      { t: &quot;n1s Tap 3&quot; },
      { t: &quot;n1s Tap 4&quot; },
      { t: &quot;n1cs Ivex Dominant (3,2)&quot; },
      { choice: &quot;bottle&quot; },
      { t: &quot;n1x Cabinets&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Nackle Brief&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Bottle Ask Name&quot; },
      { t: &quot;n1cs Ivex Dominant (3,2)&quot; },
      { t: &quot;n1cs Licking Reluctant&quot; },
      { t: &quot;n1cs Licking Continue&quot; },
      { t: &quot;n1cs Ivex Cruel (4,3)&quot; },
      { choice: &quot;contact&quot; },
      { t: &quot;n1s Say Device&quot; },
      { t: &quot;n1cs Ivex Cruel (4,3)&quot; },
      { t: &quot;n1s Say Lance&quot; },
      { t: &quot;n1cs Ivex Cruel (4,3)&quot; },
      { t: &quot;n1cs Plead Mercy&quot; },
      { t: &quot;n1cx Start Candle 1&quot; },
      { t: &quot;n1d Start Candle 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;candle&quot; },
      { choice: &quot;penguin&quot; },
      { t: &quot;n1x Penguin&quot; },
      { t: &quot;n1x Penguin Ask&quot; },
      { t: &quot;n1s Password Intro&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;hurry&quot; },
      { t: &quot;n1s Impatient&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { t: &quot;n1d Naked Subby&quot; },
      { t: &quot;n1d Cock Rise 1&quot; },
      { t: &quot;n1d Cock Rise 2&quot; },
      { t: &quot;n1d Candle Horny&quot; },
      { t: &quot;n1e Light Squeeze (1,1)&quot; },
      { choice: &quot;horny&quot; },
      { choice: &quot;globe&quot; },
      { t: &quot;n1y Horny Cross&quot; },
      { t: &quot;n1y Horny Mirror&quot; },
      { t: &quot;n1y Horny Globe&quot; },
      { t: &quot;n1y Horny Globe Ask&quot; },
      { t: &quot;n1e Light Squeeze (1,1)&quot; },
      { t: &quot;n1e Snap Or Lick&quot; },
      { t: &quot;n1e Pull&quot; },
      { t: &quot;n1e Punch&quot; },
      { t: &quot;n1e Heavy Squeeze (1,1)&quot; },
      { choice: &quot;again&quot; },
      { t: &quot;n1y Horny Cross&quot; },
      { t: &quot;n1y Horny Mirror&quot; },
      { t: &quot;n1y Horny Grav&quot; },
      { t: &quot;n1y Horny Ivex&quot; },
      { t: &quot;n1y Horny Painting&quot; },
      { t: &quot;n1y Horny Globe&quot; },
      { t: &quot;n1y Horny Globe Ask Again&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;n1f Horny Clever 1&quot; },
      { t: &quot;n1f Horny Clever 2&quot; },
      { t: &quot;n1f Horny Clever 3&quot; },
      { t: &quot;n1f Horny Clever 4&quot; },
      { t: &quot;n1f Horny Clever 5&quot; },
      { t: &quot;n1f Horny Clever 6&quot; },
      { t: &quot;n1f Horny Clever 7&quot; },
      { t: &quot;n1f Horny Clever 8&quot; },
      { t: &quot;n1f Horny Clever 9&quot; },
      { choice: &quot;carpe&quot; },
      { t: &quot;n1f Horny Clever Alone 1&quot; },
      { t: &quot;n1f Horny Clever Alone 2&quot; },
      { t: &quot;n1f Horny Clever Alone 3&quot; },
      { t: &quot;n1f Horny Clever Alone 4&quot; },
      { t: &quot;n1f Horny Clever Alone 5&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Clever Free 1&quot; },
      { t: &quot;n2c Clever Free 2&quot; },
      { t: &quot;n2c Clever Free 3&quot; },
      { t: &quot;n2f Free Action&quot; },
    ]
  },
  {
    meta: {
      kn_Mica: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;chatty&quot;, width: &quot;abused&quot;, note: true },
      { t: &quot;n1a Hello 1&quot; },
      { t: &quot;n1a Hello 2&quot; },
      { t: &quot;n1a Hello 3&quot; },
      { t: &quot;n1a Hello 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;submit&quot; },
      { t: &quot;n1cn Charm&quot; },
      { t: &quot;n1cn Collab&quot; },
      { t: &quot;n1cn Ivex Disdainful (1,1)&quot; },
      { choice: &quot;receptive&quot; },
      { t: &quot;n1cn Apprentice&quot; },
      { t: &quot;n1cr Ivex Demanding (3,2)&quot; },
      { choice: &quot;younger&quot; },
      { t: &quot;n1s Cast Younger 1&quot; },
      { t: &quot;n1s Cast Younger 2&quot; },
      { t: &quot;n1p Barbs Slow 1&quot; },
      { choice: &quot;naked&quot; },
      { choice: &quot;mica&quot; },
      { t: &quot;n1p Barbs Slow 2n1&quot; },
      { t: &quot;n1p Barbs Slow 2n2&quot; },
      { t: &quot;n1p Barbs Slow 4&quot; },
      { t: &quot;n1p Barbs Slow 5&quot; },
      { choice: &quot;smooth&quot; },
      { t: &quot;n1p Barbs Slow 6n1&quot; },
      { t: &quot;n1p Barbs Slow 6n2&quot; },
      { t: &quot;n1p Barbs Slow End&quot; },
      { t: &quot;n1s Cast Younger 3&quot; },
      { t: &quot;n1s Cast Younger 4&quot; },
      { t: &quot;n1cr Ivex Demanding (3,2)&quot; },
      { choice: &quot;sight&quot; },
      { t: &quot;n1s Cast Sight 1&quot; },
      { t: &quot;n1s Cast Sight 2&quot; },
      { t: &quot;n1cr Ivex Demanding (3,2)&quot; },
      { t: &quot;n1cr Subby Deep 1&quot; },
      { t: &quot;n1cr Subby Deep 2&quot; },
      { t: &quot;n1cs Room Flip 1&quot; },
      { t: &quot;n1cs Room Flip 2&quot; },
      { t: &quot;n1cs Room Flip 3&quot; },
      { t: &quot;n1cs Bonding&quot; },
      { t: &quot;n1cs Ivex Dominant (3,2)&quot; },
      { choice: &quot;tap&quot; },
      { t: &quot;n1x Study&quot; },
      { t: &quot;n1x Desk&quot; },
      { t: &quot;n1x Mirror&quot; },
      { t: &quot;n1s Tap 1&quot; },
      { t: &quot;n1s Tap 2&quot; },
      { t: &quot;n1s Tap 3&quot; },
      { t: &quot;n1s Tap 4&quot; },
      { t: &quot;n1cs Ivex Dominant (3,2)&quot; },
      { choice: &quot;bottle&quot; },
      { t: &quot;n1x Cabinets&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Nackle Brief&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Bottle Ask Name&quot; },
      { t: &quot;n1cs Ivex Dominant (3,2)&quot; },
      { t: &quot;n1cs Licking Reluctant&quot; },
      { t: &quot;n1cs Licking Continue&quot; },
      { t: &quot;n1cs Ivex Cruel (4,3)&quot; },
      { choice: &quot;contact&quot; },
      { t: &quot;n1s Say Device&quot; },
      { t: &quot;n1cs Ivex Cruel (4,3)&quot; },
      { t: &quot;n1s Say Lance&quot; },
      { t: &quot;n1cs Ivex Cruel (4,3)&quot; },
      { t: &quot;n1cs Plead Reason&quot; },
      { t: &quot;n1cx Start Candle 1&quot; },
      { t: &quot;n1d Start Candle 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;candle&quot; },
      { choice: &quot;penguin&quot; },
      { t: &quot;n1x Penguin&quot; },
      { t: &quot;n1x Penguin Ask&quot; },
      { t: &quot;n1s Password Intro&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;hurry&quot; },
      { t: &quot;n1s Impatient&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { t: &quot;n1d Naked Subby&quot; },
      { t: &quot;n1d Cock Rise 1&quot; },
      { t: &quot;n1d Cock Rise 2&quot; },
      { t: &quot;n1d Candle Horny&quot; },
      { t: &quot;n1e Light Squeeze (1,1)&quot; },
      { choice: &quot;horny&quot; },
      { choice: &quot;globe&quot; },
      { t: &quot;n1y Horny Cross&quot; },
      { t: &quot;n1y Horny Mirror&quot; },
      { t: &quot;n1y Horny Globe&quot; },
      { t: &quot;n1y Horny Globe Ask&quot; },
      { t: &quot;n1e Light Squeeze (1,1)&quot; },
      { t: &quot;n1e Snap Or Lick&quot; },
      { t: &quot;n1e Pull&quot; },
      { t: &quot;n1e Punch&quot; },
      { t: &quot;n1e Heavy Squeeze (1,1)&quot; },
      { choice: &quot;again&quot; },
      { t: &quot;n1y Horny Cross&quot; },
      { t: &quot;n1y Horny Mirror&quot; },
      { t: &quot;n1y Horny Grav&quot; },
      { t: &quot;n1y Horny Ivex&quot; },
      { t: &quot;n1y Horny Painting&quot; },
      { t: &quot;n1y Horny Globe&quot; },
      { t: &quot;n1y Horny Globe Ask Again&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;n1f Horny Clever 1&quot; },
      { t: &quot;n1f Horny Clever 2&quot; },
      { t: &quot;n1f Horny Clever 3&quot; },
      { t: &quot;n1f Horny Clever 4&quot; },
      { t: &quot;n1f Horny Clever 5&quot; },
      { t: &quot;n1f Horny Clever 6&quot; },
      { t: &quot;n1f Horny Clever 7&quot; },
      { t: &quot;n1f Horny Clever 8&quot; },
      { t: &quot;n1f Horny Clever 9&quot; },
      { choice: &quot;carpe&quot; },
      { t: &quot;n1f Horny Clever Alone 1&quot; },
      { t: &quot;n1f Horny Clever Alone 2&quot; },
      { t: &quot;n1f Horny Clever Alone 3&quot; },
      { t: &quot;n1f Horny Clever Alone 4&quot; },
      { t: &quot;n1f Horny Clever Alone 5&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Clever Free 1&quot; },
      { t: &quot;n2c Clever Free 2&quot; },
      { t: &quot;n2c Clever Free 3&quot; },
      { t: &quot;n2f Free Action&quot; },
    ]
  },

  &quot;&lt;hr&gt;&lt;span class=walk-sec-title&gt;Nero 1F Glitch Paths&lt;/span&gt;&quot;,

  &quot;rebuff &gt; glitch &gt; desperate&quot;,
  {
    meta: {
      kn_Pevhin: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;chatty&quot; },
      { t: &quot;n1a Hello 1&quot; },
      { t: &quot;n1a Hello 2&quot; },
      { t: &quot;n1a Hello 3&quot; },
      { t: &quot;n1a Hello 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;rebuff&quot; },
      { t: &quot;n1cn Rebuff&quot; },
      { t: &quot;n1cx Start Candle 1&quot; },
      { t: &quot;n1d Start Candle 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;candle&quot; },
      { choice: &quot;naked&quot; },
      { t: &quot;n1d Strip Resist&quot; },
      { t: &quot;n1p Barbs Fast 1&quot; },
      { choice: &quot;glitch&quot; },
      { t: &quot;n1p Barbs Glitch 1&quot; },
      { t: &quot;n1p Barbs Glitch 2&quot; },
      { t: &quot;n1p Barbs Glitch 3&quot;, code: &quot;//1&quot; },
      { t: &quot;n1p Barbs Glitch 4&quot; },
      { t: &quot;n1p Barbs Glitch 5&quot; },
      { t: &quot;n1p Barbs Glitch 6&quot; },
      { t: &quot;n1d Cock Rise 1&quot; },
      { t: &quot;n1d Cock Rise 2&quot; },
      { t: &quot;n1d Candle Horny&quot; },
      { t: &quot;n1e Light Squeeze (1,1)&quot; },
      { choice: &quot;horny&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;n1e Snap Or Lick&quot; },
      { t: &quot;n1e Pull&quot; },
      { t: &quot;n1e Punch&quot; },
      { t: &quot;n1e Heavy Squeeze (1,1)&quot; },
      { t: &quot;n1e Crop 1&quot;, code: &quot;//2&quot; },
      { t: &quot;n1e Crop 2&quot; },
      { t: &quot;n1e Crop 3&quot; },
      { t: &quot;n1e Crop 4&quot; },
      { t: &quot;n2a Ivex Gone&quot; },
      { t: &quot;n2a Relight Candle&quot; },
      { t: &quot;n2b Lust Bar Intro&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;struggle&quot; },
      { t: &quot;n2b Struggle Normal 1&quot; },
      { t: &quot;n2b Struggle Normal 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { t: &quot;n2b Struggle Horny 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { t: &quot;n2b Struggle Horny 3&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
    ],
  },

  &quot;endgame &gt; glitch &gt; recruit &gt; free&quot;,
  {
    meta: {
      kn_Mica: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;endgame&quot; },
      { t: &quot;n1a Endgame 1&quot; },
      { t: &quot;n1a Endgame 2&quot; },
      { t: &quot;n1a Endgame 3&quot; },
      { t: &quot;n1p Barbs Slow 1&quot; },
      { choice: &quot;naked&quot; },
      { choice: &quot;glitch&quot; },
      { t: &quot;n1p Barbs Glitch 1&quot; },
      { t: &quot;n1p Barbs Glitch 2&quot; },
      { t: &quot;n1p Barbs Glitch 3&quot;, code: &quot;//1&quot; },
      { t: &quot;n1p Barbs Glitch 4&quot; },
      { t: &quot;n1p Barbs Glitch 5&quot; },
      { t: &quot;n1p Barbs Glitch 6&quot; },
      { t: &quot;n1a Endgame 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;tap&quot; },
      { t: &quot;n1x Study&quot; },
      { t: &quot;n1x Desk&quot; },
      { t: &quot;n1x Mirror&quot; },
      { t: &quot;n1s Tap 1&quot; },
      { t: &quot;n1s Tap 2&quot; },
      { t: &quot;n1s Tap 3&quot; },
      { t: &quot;n1s Tap 4&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;bottle&quot; },
      { t: &quot;n1x Cabinets&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Nackle Brief&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Bottle Ask Name&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;nackle&quot; },
      { t: &quot;n1s Say Device&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;recruit&quot;, width: &quot;submit&quot;, note: true },
      { t: &quot;n1cn Charm&quot; },
      { t: &quot;n1cn Recruit 1&quot; },
      { t: &quot;n1cn Recruit 2&quot; },
      { t: &quot;n1cn Ivex Offended (1,1)&quot; },
      { choice: &quot;contact&quot; },
      { t: &quot;n1s Say Lance&quot; },
      { t: &quot;n1cn Ivex Offended (1,1)&quot; },
      { choice: &quot;candle&quot;, note: true },
      { t: &quot;n1cn Secret Guild&quot; },
      { t: &quot;n1cn Glitched Guild 1&quot; },
      { t: &quot;n1cn Glitched Guild 2&quot; },
      { t: &quot;n1cx Start Candle 1&quot; },
      { t: &quot;n1d Start Candle 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;penguin&quot; },
      { t: &quot;n1x Penguin&quot; },
      { t: &quot;n1x Penguin Ask&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;horny&quot; },
      { t: &quot;n1d Naked Agree&quot; },
      { t: &quot;n1d Cock Rise 1&quot; },
      { t: &quot;n1d Cock Rise 2&quot; },
      { t: &quot;n1d Candle Horny&quot; },
      { t: &quot;n1e Light Squeeze (1,1)&quot; },
      { choice: &quot;alone&quot; },
      { t: &quot;n1e Snap Or Lick&quot; },
      { t: &quot;n1e Pull&quot; },
      { t: &quot;n1e Punch&quot; },
      { t: &quot;n1e Heavy Squeeze (1,1)&quot; },
      { t: &quot;n1e Crop 1&quot;, code: &quot;//2&quot; },
      { t: &quot;n1e Crop 2&quot; },
      { t: &quot;n1e Crop 3&quot; },
      { t: &quot;n1e Crop 4&quot; },
      { t: &quot;n2a Ivex Gone&quot; },
      { t: &quot;n2a Relight Candle&quot; },
      { t: &quot;n2b Lust Bar Intro&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { choice: &quot;struggle&quot; },
      { t: &quot;n2b Struggle Normal 1&quot; },
      { t: &quot;n2b Struggle Normal 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { t: &quot;n2b Struggle Horny 2&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { t: &quot;n2b Struggle Horny 3&quot; },
      { t: &quot;n2b Alone (5,3)&quot; },
      { t: &quot;n2b Struggle Succeed&quot; },
      { t: &quot;n2b Grav Disrupted&quot; },
      { t: &quot;n2b Urgent Choice&quot; },
      { choice: &quot;knife&quot; },
      { t: &quot;n2b Grab Knife&quot; },
      { t: &quot;n2b Use Knife 1&quot; },
      { t: &quot;n2c Use Knife 2&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Rescue Mirror 1&quot; },
      { t: &quot;n2c Rescue Mirror 2&quot; },
      { t: &quot;n2c Rescue Mirror 3&quot; },
      { t: &quot;n2f Free Action&quot; },
    ],
  },

  &quot;endgame &gt; glitch &gt; submit &gt; wand &gt; clever&quot;,
  {
    meta: {
      kn_Mica: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;endgame&quot; },
      { t: &quot;n1a Endgame 1&quot; },
      { t: &quot;n1a Endgame 2&quot; },
      { t: &quot;n1a Endgame 3&quot; },
      { t: &quot;n1p Barbs Slow 1&quot; },
      { choice: &quot;naked&quot; },
      { choice: &quot;glitch&quot; },
      { t: &quot;n1p Barbs Glitch 1&quot; },
      { t: &quot;n1p Barbs Glitch 2&quot; },
      { t: &quot;n1p Barbs Glitch 3&quot;, code: &quot;//1&quot; },
      { t: &quot;n1p Barbs Glitch 4&quot; },
      { t: &quot;n1p Barbs Glitch 5&quot; },
      { t: &quot;n1p Barbs Glitch 6&quot; },
      { t: &quot;n1a Endgame 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;tap&quot; },
      { t: &quot;n1x Study&quot; },
      { t: &quot;n1x Desk&quot; },
      { t: &quot;n1x Mirror&quot; },
      { t: &quot;n1s Tap 1&quot; },
      { t: &quot;n1s Tap 2&quot; },
      { t: &quot;n1s Tap 3&quot; },
      { t: &quot;n1s Tap 4&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;bottle&quot; },
      { t: &quot;n1x Cabinets&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Nackle Brief&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Bottle Ask Name&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;nackle&quot; },
      { t: &quot;n1s Say Device&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;submit&quot;, note: true },
      { t: &quot;n1cn Charm&quot; },
      { t: &quot;n1cn Collab&quot; },
      { t: &quot;n1cn Ivex Disdainful (1,1)&quot; },
      { choice: &quot;contact&quot; },
      { t: &quot;n1s Say Lance&quot; },
      { t: &quot;n1cn Ivex Disdainful (1,1)&quot; },
      { t: &quot;n1cn Apprentice&quot; },
      { t: &quot;n1cr Ivex Demanding (3,2)&quot; },
      { choice: &quot;penguin&quot; },
      { t: &quot;n1x Penguin&quot; },
      { t: &quot;n1x Penguin Ask&quot; },
      { t: &quot;n1s Password Intro&quot; },
      { t: &quot;n1cr Ivex Demanding (3,2)&quot; },
      { choice: &quot;hurry&quot; },
      { t: &quot;n1s Impatient&quot; },
      { t: &quot;n1cr Ivex Demanding (3,2)&quot; },
      { t: &quot;n1cr Subby Deep 1&quot; },
      { t: &quot;n1cr Subby Deep 2&quot; },
      { t: &quot;n1cs Room Flip 1&quot; },
      { t: &quot;n1cs Room Flip 2&quot; },
      { t: &quot;n1cs Room Flip 3&quot; },
      { t: &quot;n1cs Bonding&quot; },
      { t: &quot;n1cs Ivex Dominant (3,2)&quot; },
      { choice: &quot;wand&quot; },
      { t: &quot;n1x Bookcases&quot; },
      { t: &quot;n1x Wand&quot; },
      { t: &quot;n1x Wand Ask&quot; },
      { t: &quot;n1cs Ivex Dominant (3,2)&quot; },
      { choice: &quot;globe&quot; },
      { t: &quot;n1x Globe&quot; },
      { choice: &quot;clever&quot; },
      { t: &quot;n1x Globe Ask&quot; },
      { t: &quot;n1f Clever Escape 1&quot; },
      { t: &quot;n1f Clever Escape 2&quot; },
      { t: &quot;n1f Clever Escape 3&quot; },
      { t: &quot;n1f Clever Escape 4&quot; },
      { t: &quot;n1f Clever Escape 5&quot; },
      { t: &quot;n1f Clever Escape 6&quot; },
      { choice: &quot;carpe&quot; },
      { t: &quot;n1f Clever Alone 1&quot; },
      { t: &quot;n1f Clever Alone 2&quot; },
      { t: &quot;n1f Clever Alone 3&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Clever Free 1&quot; },
      { t: &quot;n2c Clever Free 2&quot; },
      { t: &quot;n2c Clever Free 3&quot; },
      { t: &quot;n2f Free Action&quot; },
    ]
  },

  &quot;submit &gt; glitch &gt; endgame &gt; wand &gt; clever&quot;,
  {
    meta: {
      kn_Mica: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;abused&quot; },
      { t: &quot;n1a Feign Sleep 1&quot; },
      { t: &quot;n1a Feign Sleep 2&quot; },
      { t: &quot;n1a Feign Sleep 3&quot; },
      { t: &quot;n1a Feign Sleep 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;bottle&quot; },
      { t: &quot;n1x Study&quot; },
      { t: &quot;n1x Cabinets&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Nackle Brief&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Bottle Ask Name&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;submit&quot; },
      { t: &quot;n1cn Charm&quot; },
      { t: &quot;n1cn Collab&quot; },
      { t: &quot;n1cn Ivex Disdainful (1,1)&quot; },
      { choice: &quot;receptive&quot; },
      { t: &quot;n1cn Apprentice&quot; },
      { t: &quot;n1cr Ivex Demanding (3,2)&quot; },
      { choice: &quot;naked&quot; },
      { t: &quot;n1cr Subby Deep 1&quot; },
      { t: &quot;n1cr Subby Deep 2&quot; },
      { t: &quot;n1p Barbs Slow 1&quot; },
      { choice: &quot;glitch&quot; },
      { t: &quot;n1p Barbs Glitch 1&quot; },
      { t: &quot;n1p Barbs Glitch 2&quot; },
      { t: &quot;n1p Barbs Glitch 3&quot;, code: &quot;//1&quot; },
      { t: &quot;n1p Barbs Glitch 4&quot; },
      { t: &quot;n1p Barbs Glitch 5&quot; },
      { t: &quot;n1p Barbs Glitch 6&quot; },
      { t: &quot;n1cs Subby Stripped&quot; },
      { t: &quot;n1cs Bonding&quot; },
      { t: &quot;n1cs Ivex Dominant (3,2)&quot; },
      { choice: &quot;endgame&quot; },
      { t: &quot;n1s Cast Endgame 1&quot; },
      { t: &quot;n1s Cast Endgame 2&quot; },
      { t: &quot;n1s Cast Endgame 3&quot; },
      { t: &quot;n1cs Ivex Dominant (3,2)&quot; },
      { choice: &quot;tap&quot; },
      { t: &quot;n1x Desk&quot; },
      { t: &quot;n1x Mirror&quot; },
      { t: &quot;n1s Tap 1&quot; },
      { t: &quot;n1s Tap 2&quot; },
      { t: &quot;n1s Tap 3&quot; },
      { t: &quot;n1s Tap 4&quot; },
      { t: &quot;n1cs Ivex Dominant (3,2)&quot; },
      { t: &quot;n1cs Licking Eager&quot; },
      { t: &quot;n1cs Licking Continue&quot; },
      { t: &quot;n1cs Ivex Cruel (4,3)&quot; },
      { choice: &quot;contact&quot; },
      { t: &quot;n1s Say Device&quot; },
      { t: &quot;n1cs Ivex Cruel (4,3)&quot; },
      { t: &quot;n1s Say Lance&quot; },
      { t: &quot;n1cs Ivex Cruel (4,3)&quot; },
      { choice: &quot;penguin&quot; },
      { t: &quot;n1x Penguin&quot; },
      { t: &quot;n1x Penguin Ask&quot; },
      { t: &quot;n1s Password Intro&quot; },
      { t: &quot;n1cs Ivex Cruel (4,3)&quot; },
      { t: &quot;n1cs Plead Mercy&quot; },
      { t: &quot;n1cx Start Candle 1&quot; },
      { t: &quot;n1d Start Candle 2&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;candle&quot; },
      { choice: &quot;wand&quot; },
      { t: &quot;n1x Bookcases&quot; },
      { t: &quot;n1x Wand&quot; },
      { t: &quot;n1x Wand Ask&quot; },
      { t: &quot;n1d Comfort Check (2,2)&quot; },
      { choice: &quot;globe&quot; },
      { t: &quot;n1x Globe&quot; },
      { choice: &quot;clever&quot; },
      { t: &quot;n1x Globe Ask&quot; },
      { t: &quot;n1f Clever Escape 1&quot; },
      { t: &quot;n1f Clever Escape 2&quot; },
      { t: &quot;n1f Clever Escape 3&quot; },
      { t: &quot;n1f Clever Escape 4&quot; },
      { t: &quot;n1f Clever Escape 5&quot; },
      { t: &quot;n1f Clever Escape 6&quot; },
      { choice: &quot;carpe&quot; },
      { t: &quot;n1f Clever Alone 1&quot; },
      { t: &quot;n1f Clever Alone 2&quot; },
      { t: &quot;n1f Clever Alone 3&quot; },
      { choice: &quot;free&quot; },
      { t: &quot;n2c Clever Free 1&quot; },
      { t: &quot;n2c Clever Free 2&quot; },
      { t: &quot;n2c Clever Free 3&quot; },
      { t: &quot;n2f Free Action&quot; },
    ]
  },

  &quot;&lt;hr&gt;&lt;span class=walk-sec-title&gt;Nero 1F Look Paths&lt;/span&gt;&quot;,

  {
    meta: {
      kn_Mica: true,
    },
    path: [
      { choice: &quot;Nero&quot; },
      { t: &quot;g1a Choose Character&quot;},
      { t: &quot;n1a Nero Start&quot; },
      { choice: &quot;abused&quot; },
      { t: &quot;n1a Feign Sleep 1&quot; },
      { t: &quot;n1a Feign Sleep 2&quot; },
      { t: &quot;n1a Feign Sleep 3&quot; },
      { t: &quot;n1a Feign Sleep 4&quot; },
      { t: &quot;n1cn Ivex Intro 1&quot; },
      { t: &quot;n1cn Ivex Intro 2&quot; },
      { t: &quot;n1cn Ivex Intro 3&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;cross&quot; },
      { t: &quot;n1x Cross&quot; },
      { choice: &quot;study&quot; },
      { t: &quot;n1x Study&quot; },
      { choice: &quot;wall&quot; },
      { t: &quot;n1x Wall&quot; },
      { choice: &quot;window&quot; },
      { t: &quot;n1x Window&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;desk&quot; },
      { t: &quot;n1x Desk&quot; },
      { choice: &quot;mirror&quot; },
      { t: &quot;n1x Mirror&quot; },
      { choice: &quot;globe&quot; },
      { t: &quot;n1x Globe&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;cabinets&quot; },
      { t: &quot;n1x Cabinets&quot; },
      { choice: &quot;bottle&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1x Nackle Brief&quot; },
      { t: &quot;n1x Bottle&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;bookcases&quot; },
      { t: &quot;n1x Bookcases&quot; },
      { choice: &quot;books&quot; },
      { t: &quot;n1x Books&quot; },
      { t: &quot;n1cn First Action (4,3)&quot; },
      { choice: &quot;recruit&quot;, width: &quot;submit&quot; },
      { t: &quot;n1cn Charm&quot; },
      { t: &quot;n1cn Recruit 1&quot; },
      { t: &quot;n1cn Recruit 2&quot; },
      { t: &quot;n1cn Ivex Offended (1,1)&quot; },
      { choice: &quot;map&quot; },
      { t: &quot;n1x Map&quot; },
      { t: &quot;n1cn Ivex Offended (1,1)&quot; },
      { t: &quot;n1cn Secret Guild&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { choice: &quot;painting&quot; },
      { t: &quot;n1x Painting&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { choice: &quot;grav&quot; },
      { t: &quot;n1x Grav&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { choice: &quot;knife&quot; },
      { t: &quot;n1x Knife&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { choice: &quot;penguin&quot; },
      { t: &quot;n1x Penguin&quot; },
      { t: &quot;n1cr Ivex Skeptical (4,3)&quot; },
      { t: &quot;n1cr Guild Name 1&quot; },
      { t: &quot;n1cr Guild Name 2&quot; },
      { t: &quot;n1cr Guild Name 3&quot; },
      { t: &quot;n1cr Guild Name 4&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
      { choice: &quot;coins&quot; },
      { t: &quot;n1x Coins&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
      { choice: &quot;wand&quot; },
      { t: &quot;n1x Wand&quot; },
      { t: &quot;n1cr Ivex Fascinated (4,3)&quot; },
    ],
  }
];
&lt;&lt;/script&gt;&gt;\</tw-passagedata><tw-passagedata pid="224" name="g1m Goto Script" tags="inclusion" position="325,2000" size="100,100">&lt;&lt;script&gt;&gt;

State.temporary.listWalks = () =&gt; {
  const walks = MT.walks;
  const current = MT.getPath();
  let mkp = &quot;&lt;&lt;nobr&gt;&gt;&quot;;
  for (let i = 0; i &lt; walks.length; i++) {
    if (typeof walks[i] === &quot;string&quot;) {
      mkp += `&lt;div class=&quot;walk-header&quot;&gt;${walks[i]}&lt;/div&gt;`;
      continue;
    }

    const addSeg = (ch, type, opts) =&gt; {
      const note = opts.note ? &quot; walk-choice-note&quot; : &quot;&quot;;
      if (opts.width != null) {
        mkp += `&lt;span class=walk-sp&gt;`;
        mkp += `&lt;span class=&quot;walk-sp-w${note}&quot;&gt;&gt; ${opts.width}&lt;/span&gt;`;
      }
      mkp += `&lt;span class=&quot;walk-choice walk-choice-${type}${note}&quot;&gt;`;
      mkp += `&lt;&lt;link &quot;&gt; ${ch}&quot;&gt;&gt;`;
      mkp += `&lt;&lt;run _doWalk(${i}, &quot;${ch}&quot;)&gt;&gt;`;
      mkp += `&lt;&lt;/link&gt;&gt;`;
      if (opts.width != null) mkp += `&lt;/span&gt;`;
      mkp += `&lt;/span&gt; `;
    };

    const path = walks[i].path;
    const [pn, cn] = MT.commonPathLengths(path, current);

    mkp += `&lt;div class=walk-path&gt;`;
    if (pn === path.length) {
      /* all of path is in the past of current */
      for (const st of path) {
        if (st.choice != null) addSeg(st.choice, &quot;past&quot;, st);
      }
    } else if (cn === current.length) {
      /* all of current is on path */
      let ppn = pn;
      /* sometimes choice marker is an empty segment. */
      if (ppn !== 0 &amp;&amp; path[ppn].choice != null) {
        while (ppn &lt; path.length - 1 &amp;&amp; path[ppn].choice != null) ppn++;
      }
      /* find finished choice in path */
      while (ppn &gt; 1 &amp;&amp; path[ppn].choice == null) ppn--;
      for (const st of path.slice(0, ppn)) {
        if (st.choice != null) addSeg(st.choice, &quot;past&quot;, st);
      }
      for (const st of path.slice(ppn)) {
        if (st.choice != null) addSeg(st.choice, &quot;future&quot;, st);
      }
    } else {
      /* path and current are disjoint */
      for (const st of path) {
        if (st.choice != null) addSeg(st.choice, &quot;disjoint&quot;, st);
      }
    }
    const len = path.filter(st =&gt; st.t != null).length;
    mkp += `&lt;span class=walk-path-len&gt;[${len}]&lt;/span&gt;`;
    mkp += `&lt;/div&gt;`;
  }
  mkp += &quot;&lt;&lt;/nobr&gt;&gt;&quot;;
  return mkp;
};

function getPathChoice(path, ch) {
  const result = [];
  let seen = false;
  for (const step of path) {
    if (step.choice != null &amp;&amp; seen) break;
    result.push(step);
    if (step.choice != null) seen = step.choice === ch;
  }
  return result;
}

function setVars(vars) {
  if (vars != null) {
    for (const vn of Object.keys(vars)) {
      State.variables[vn] = vars[vn];
    }
  }
}

function setMeta(meta) {
  if (meta != null) {
    for (const vn of Object.keys(meta)) {
      MT.mdSet(vn, meta[vn]);
    }
  }
}

State.temporary.doWalk = (i, ch) =&gt; {
  MT.forgetWalkHistory();
  const walk = MT.walks[i];
  const force = !!$(&quot;#walk-force&quot;).prop(&quot;checked&quot;);
  const path = getPathChoice(walk.path, ch);
  State.reset();
  Engine.play(&quot;g1a Bound&quot;);
  setMeta(walk.meta);
  setVars(walk.vars);
  MT.roamStart(path, null, force);
};

State.temporary.reWalk = () =&gt; {
  const path = MT.getPath();
  const force = !!$(&quot;#walk-force&quot;).prop(&quot;checked&quot;);
  MT.forgetWalkHistory();
  State.reset();
  Engine.play(&quot;g1a Bound&quot;);
  MT.roamStart(path, null, force);
};

State.temporary.showCurrentPath = () =&gt; {
  const path = MT.getPath();
  const js = MT.pathToJs(path);
  $(&quot;#walk-current-path&quot;).val(`// current path [${path.length}]\n${js}`);
};

State.temporary.walkAll = () =&gt; {
  const walks = MT.walks;
  const force = !!$(&quot;#walk-force&quot;).prop(&quot;checked&quot;);
  let i = 0;
  const next = () =&gt; {
    while (i &lt; walks.length &amp;&amp; walks[i].path == null) i++;
    if (i &gt;= walks.length) {
      console.log(&quot;done walkAll&quot;);
      return;
    }
    const walk = walks[i++];
    console.log(`Starting ${MT.pathName(walk.path)}`);
    MT.forgetWalkHistory();
    State.reset();
    Engine.play(&quot;g1a Bound&quot;);
    setMeta(walk.meta);
    setVars(walk.vars);
    MT.roamStart(walk.path, next, force);
  };
  next();
}

$(document).one(&quot;:passagedisplay&quot;, () =&gt; {
  const force = session.get(&quot;walk-force&quot;);
  const el = $(&quot;#walk-force&quot;);
  el.prop(&quot;checked&quot;, force);
  el.on(&quot;input&quot;, () =&gt; {
    session.set(&quot;walk-force&quot;, !!el.prop(&quot;checked&quot;))
  })
});

&lt;&lt;/script&gt;&gt;\</tw-passagedata><tw-passagedata pid="225" name="g1m Goto" tags="is-menu" position="200,1875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;auto-stow&gt;&gt;
&lt;&lt;return-head&gt;&gt;
&lt;&lt;include [[g1m Goto Paths]]&gt;&gt;
&lt;&lt;include [[g1m Goto Script]]&gt;&gt;

&lt;style&gt;

.walk-path {
  margin-left: 2em;
  text-indent: -2em;
}
.walk-choice {
  display: inline-block;
  margin: 0;
  text-indent: 0;
  white-space: nowrap;
}
.walk-header {
  margin-top: 1em;
}

.walk-sec-title {
  color: #99c;
  font-style: italic;
  /* font-weight: bold; */
}

.walk-sp {
  position: relative;
  white-space: nowrap;
}
.walk-sp-w {
  opacity: 0;
}
.walk-sp .walk-choice {
  position: absolute;
  left: 0;
}

.walk-choice-note {
  font-style: italic;
  font-weight: bold;
}

.walk-choice-past {
}
.walk-choice-future {
  opacity: 0.6;
}
.walk-choice-disjoint {
  opacity: 0.6;
}
.walk-path-len {
  color: #ccc;
  font-size: 12px;
}

#walk-current-path {
  border: 1px solid #666;
  border-radius: 4px;
  color: #999;
  font: 12px monospace;
  margin-top: 4px;
  padding: 8px;
  word-break: break-all;
  white-space: pre-wrap;
  width: calc(100% - 2em);
}

&lt;/style&gt;

&lt;&lt;mta &quot;g1m Test 1&quot;&gt;&gt;
  &gt; Test 1
&lt;&lt;/mta&gt;&gt;

&lt;br&gt;
&lt;&lt;link &quot;&gt; Title&quot; &quot;g1a Title Screen&quot;&gt;&gt;
  &lt;&lt;run MT.forgetWalkHistory()&gt;&gt;
  &lt;&lt;run State.reset()&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;br&gt;
&lt;&lt;link &quot;&gt; Bound&quot; &quot;g1a Bound&quot;&gt;&gt;
  &lt;&lt;run MT.forgetWalkHistory()&gt;&gt;
  &lt;&lt;run State.reset()&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;hr&gt;
&lt;&lt;link &quot;&gt; Walk all paths&quot;&gt;&gt;
  &lt;&lt;run _walkAll(false)&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;br&gt;
&lt;&lt;link &quot;&gt; Re-walk current path&quot;&gt;&gt;
  &lt;&lt;run _reWalk()&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;br&gt;
&lt;label&gt;
  &lt;input id=&quot;walk-force&quot; type=checkbox&gt;
  Continue walking past draft and to-do markers
&lt;/label&gt;
&lt;br&gt;

&lt;&lt;= _listWalks()&gt;&gt;

&lt;hr&gt;

&lt;textarea id=walk-current-path rows=&quot;15&quot; readonly&gt;&lt;/textarea&gt;

&lt;&lt;done&gt;&gt;
  &lt;&lt;run _showCurrentPath()&gt;&gt;
&lt;&lt;/done&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="226" name="g1m Notes All" tags="is-menu" position="325,2200" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;return-head&gt;&gt;

&lt;style&gt;
  #notes-load-file {
    height: 1px;
    left: 0;
    position: absolute;
    pointer-events: none;
    top: 0;
    width: 1px;
    visibility: hidden;
  }
&lt;/style&gt;

&lt;&lt;script&gt;&gt;
  const T = State.temporary;
  const V = State.variables;
  const noteStore = window.sessionStorage;

  T.savedVal = &quot;&quot;;
  T.editVal = &quot;&quot;;
  T.hasConflict = false;

  T.canShare = navigator.canShare
    &amp;&amp; navigator.canShare({ title: &quot;1&quot;, text: &quot;2&quot; });

  $(document).one(&quot;:passagedisplay&quot;, () =&gt; {
    $(&quot;#notes-input&quot;).on(&quot;input&quot;, onInput);
    $(&quot;#notes-copy&quot;).click(copyToClipboard);
    $(&quot;#notes-clean&quot;).click(confirmClean);
    $(&quot;#notes-delete&quot;).click(confirmDelete);
    $(&quot;#notes-lose&quot;).click(confirmLose);
    $(&quot;#notes-overwrite&quot;).click(confirmOverwrite);
    $(&quot;#notes-save&quot;).click(saveToFile);
    $(&quot;#notes-load&quot;).click(loadFromFile);
    $(&quot;#notes-load-file&quot;).on(&quot;change&quot;, loadFilePicked);
    $(&quot;#notes-share&quot;).prop(&quot;disabled&quot;, T.canShare).click(doShare);
    restoreSession();
    uiUpdate();
  });

  function restoreSession() {
    T.savedVal = MT.notesGetAll();
    T.editVal = noteStore.getItem(&quot;notes-full&quot;) || T.savedVal;
    $(&quot;#notes-input&quot;).val(T.editVal);
    T.hasConflict = T.savedVal.trimEnd() !== T.editVal.trimEnd();
  }

  function uiUpdate() {
    $(&quot;#notes-conflict&quot;).toggleClass(&quot;notes-has-conflict&quot;, T.hasConflict);
    if (T.hasConflict) $(&quot;#notes-conflict textarea&quot;).val(T.savedVal);
    const hasEdit = T.editVal.trimEnd() !== &quot;&quot;;
    const hasData = T.savedVal.trimEnd() !== &quot;&quot; || hasEdit;
    $(&quot;#notes-delete&quot;).prop(&quot;disabled&quot;, !hasData || T.hasConflict);
    $(&quot;#notes-clean&quot;).prop(&quot;disabled&quot;, !hasEdit);
    $(&quot;#notes-copy&quot;).prop(&quot;disabled&quot;, !hasEdit);
    $(&quot;#notes-save&quot;).prop(&quot;disabled&quot;, !hasEdit);
    $(&quot;#notes-load&quot;).prop(&quot;disabled&quot;, T.hasConflict);
    $(&quot;#notes-share&quot;).prop(&quot;disabled&quot;, !hasEdit);
  }

  function onInput() {
    saveValue($(&quot;#notes-input&quot;).val(), false);
  }

  function overwriteValue(val) {
    $(&quot;#notes-input&quot;).val(val);
    saveValue(val, true);
  }

  function saveValue(val, overwrite) {
    T.editVal = val;
    if (overwrite || !T.hasConflict) {
      T.savedVal = MT.notesTryReplaceAll(T.savedVal, T.editVal);
    }
    T.hasConflict = T.savedVal.trimEnd() !== T.editVal.trimEnd();
    if (T.hasConflict) {
      noteStore.setItem(&quot;notes-full&quot;, T.editVal);
    } else {
      noteStore.removeItem(&quot;notes-full&quot;);
    }
    uiUpdate();
  }

  T.doClean = () =&gt; {
    saveValue(MT.notesCleanup(T.editVal), false);
    $(&quot;#notes-input&quot;).val(T.editVal);
  };
  function confirmClean() {
    Dialog.setup(&quot;Confirm Clean Up&quot;);
    Dialog.wiki(`
      Clean-up will remove empty notes and sort the remaining notes
      by passage name.
      ?P
      &lt;&lt;button &quot;Clean up&quot;&gt;&gt;&lt;&lt;run Dialog.close(); _doClean()&gt;&gt;&lt;&lt;/button&gt;&gt;
    `);
  Dialog.open();
  }

  T.doDelete = () =&gt; overwriteValue(&quot;&quot;);
  function confirmDelete() {
    Dialog.setup(&quot;Confirm Delete All&quot;);
    Dialog.wiki(`
      Are you sure you want to delete ALL notes?
      ?P
      &lt;&lt;button &quot;Delete all&quot;&gt;&gt;&lt;&lt;run Dialog.close(); _doDelete()&gt;&gt;&lt;&lt;/button&gt;&gt;
    `);
    Dialog.open();
  }

  T.doLose = () =&gt; overwriteValue(T.savedVal);
  function confirmLose() {
    Dialog.setup(&quot;Confirm Lose Edits&quot;);
    Dialog.wiki(`
      Are you sure you want to lose your edits and revert to the conflicting value?
      ?P
      &lt;&lt;button &quot;Lose edits&quot;&gt;&gt;&lt;&lt;run Dialog.close(); _doLose()&gt;&gt;&lt;&lt;/button&gt;&gt;
    `);
    Dialog.open();
  }

  T.doOverwrite = () =&gt; overwriteValue(T.editVal);
  function confirmOverwrite() {
    Dialog.setup(&quot;Confirm Overwrite Conflict&quot;);
    Dialog.wiki(`
      Are you sure you want to overwrite the conflicting value with your edits?
      ?P
      &lt;&lt;button &quot;Overwrite conflict&quot;&gt;&gt;&lt;&lt;run Dialog.close(); _doOverwrite()&gt;&gt;&lt;&lt;/button&gt;&gt;
    `);
    Dialog.open();
  }

  function copyToClipboard() {
    let text = T.editVal;
    if (text.slice(-1) !== &quot;\n&quot;) text += &quot;\n&quot;;
    navigator.clipboard.writeText(text);
    Dialog.setup();
    Dialog.wiki(&quot;All notes copied to clipboard&quot;);
    Dialog.open();
  }

  function makeTitle() {
    const now = new Date();
    const yyyy = String(now.getFullYear());
    const mm = String(now.getMonth() + 1).padStart(2, &quot;0&quot;);
    const dd = String(now.getDate()).padStart(2, &quot;0&quot;);
    const HH = String(now.getHours()).padStart(2, &quot;0&quot;);
    const MM = String(now.getMinutes()).padStart(2, &quot;0&quot;);
    const SS = String(now.getSeconds()).padStart(2, &quot;0&quot;);
    const title = `MagesTowerNotes-${yyyy}-${mm}-${dd}-${HH}${MM}${SS}.txt`;
    return title;
  }

  function saveToFile() {
    const fname = makeTitle();
    const blob = new Blob([T.editVal], { type: &#39;text/plain;charset=UTF-8&#39; });
    /* saveAs is from filesaver.js, bundled with sugarcube-2 */
    saveAs(blob, fname);
  }

  function loadFromFile() {
    $(&quot;#notes-load-file&quot;).click();
  }
  function loadFilePicked(ev) {
    const reader = new FileReader();
    $(reader).one(&quot;loadend&quot;, () =&gt; {
      if (reader.error) throw reader.error;
      overwriteValue(reader.result);
    });
    const file = ev.target.files[0];
    reader.readAsText(file);
  }

  function doShare() {
    const title = makeTitle();
    navigator.share({ title, text: T.editVal });
  }
&lt;&lt;/script&gt;&gt;

&lt;div class=ui-title&gt;Passage Notes&lt;/div&gt;
&lt;&lt;set _detail = `
This is a system for attaching notes to individual pages in the story.
(Pages are called &quot;passages&quot;).
It&#39;s intended for playtesters to record bugs and feedback as they play,
but you can also use it for personal notes.
?P
The &quot;notes&quot; button in the upper right will allow you to create or edit a note for the current passage. If you select some text before pressing the button, that text will be added to the note.
?P
You can also edit all your notes in the textbox below.
?P
These notes are stored in your browser&#39;s per-site localStorage, and they will be erased if you clear browser data for this site. The browser may also automatically delete the data (which can happen if you have certain privacy settings enabled, or if the browser wants to reduce storage usage). To keep the notes more permanently, export the data to a file.
?P
Nothing here is ever shared automatically. To send feedback, either copy the text below, or export a file to send to us.
In some browsers, you can also use the &quot;Share&quot; button, which will ask for confirmation before sending anything.
?P
If you have this game opened in multiple browser tabs, editing a note in one tab may cause an edit conflict in another tab. When that happens, the conflicting value will be shown, and you will have the option of choosing which version to keep.
`&gt;&gt;
&lt;&lt;linkreplace
  &#39;&lt;span class=ui-title-more&gt;(show more information)&lt;/span&gt;&#39; t8n
&gt;&gt;
  &lt;&lt;= _detail&gt;&gt;
&lt;&lt;/linkreplace&gt;&gt;

&lt;hr&gt;
&lt;div id=&quot;notes-full&quot;&gt;
  &lt;div class=&quot;ui-subtitle&quot;&gt;All Notes&lt;/div&gt;
  &lt;textarea id=&quot;notes-input&quot;&gt;&lt;/textarea&gt;
  &lt;div class=notes-buttons&gt;
    &lt;button id=&quot;notes-delete&quot;&gt;Delete all&lt;/button&gt;
    &lt;button id=&quot;notes-clean&quot;&gt;Cleanup notes&lt;/button&gt;
    &lt;button id=&quot;notes-copy&quot;&gt;Copy to clipboard&lt;/button&gt;
    &lt;button id=&quot;notes-save&quot;&gt;Save to file&lt;/button&gt;
    &lt;button id=&quot;notes-load&quot;&gt;Load from file&lt;/button&gt;
    &lt;button id=&quot;notes-share&quot;&gt;Share via...&lt;/button&gt;
    &lt;input type=&quot;file&quot; id=&quot;notes-load-file&quot;&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div id=&quot;notes-conflict&quot;&gt;
  &lt;div class=notes-buttons&gt;
    &lt;button id=&quot;notes-lose&quot;&gt;&amp;#x21d1; Lose edits&lt;/button&gt;
    &lt;button id=&quot;notes-overwrite&quot;&gt;&amp;#x21d3; Overwrite conflict&lt;/button&gt;
  &lt;/div&gt;
  &lt;div class=ui-subtitle&gt;Conflicting update&lt;/div&gt;
  &lt;textarea disabled&gt;&lt;/textarea&gt;
&lt;/div&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="227" name="g1m Notes Popup" tags="inclusion" position="200,2325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;script&gt;&gt;
  const T = State.temporary;
  const V = State.variables;
  const noteStore = window.sessionStorage;

  T.savedVal = &quot;&quot;;
  T.editVal = &quot;&quot;;
  T.hasConflict = false;

  $(document).one(&quot;:dialogopening&quot;, () =&gt; {
    $(&quot;#NP-input&quot;).on(&quot;input&quot;, onInput);
    restoreSession();
    appendSelected();
    appendMessages();
    uiUpdate();
  });

  $(document).one(&quot;:dialogopened&quot;, () =&gt; {
    $(&quot;#NP-input&quot;).focus();
  });

  function appendQuoted(text) {
    text = text.trim();
    if (text === &quot;&quot;) return;
    const q = text.replace(/^/gm, &quot;-&gt; &quot;) + &quot;\n&quot;;
    let val = T.editVal.trim();
    if (val !== &quot;&quot; &amp;&amp; val.slice(-1) !== &quot;\n&quot;) {
      val += &quot;\n&quot;;
    }
    val += q;
    $(&quot;#NP-input&quot;).val(val);
    saveValue(val);
  }

  function appendSelected() {
    if (MT.selectedText == null || MT.selectedText === &quot;&quot;) return;
    appendQuoted(MT.selectedText);
  }
  function appendMessages() {
    if (MT.messages != null &amp;&amp; MT.messages.length) {
      appendQuoted(MT.messages.join(&quot;\n&quot;));
    }
  }

  function restoreSession() {
    T.savedVal = MT.notesGet(V.n_notesOrigin);
    T.editVal = noteStore.getItem(&quot;notes-single:&quot; + V.n_notesOrigin)
      || T.savedVal;
    $(&quot;#NP-input&quot;).val(T.editVal);
    T.hasConflict = T.savedVal.trimEnd() !== T.editVal.trimEnd();
  }

  function uiUpdate() {
    $(&quot;#NP-conflict&quot;).toggleClass(&quot;NP-conflict-hidden&quot;, !T.hasConflict);
  }

  function onInput(ev) {
    saveValue($(&quot;#NP-input&quot;).val(), false);
  }

  function saveValue(val, overwrite) {
    T.editVal = val;
    if (overwrite || !T.hasConflict) {
      T.savedVal = MT.notesTryReplace(V.n_notesOrigin, T.savedVal, T.editVal);
    }
    T.hasConflict = T.savedVal.trimEnd() !== T.editVal.trimEnd();
    const key = &quot;notes-single:&quot; + V.n_notesOrigin;
    if (T.hasConflict) {
      noteStore.setItem(key, val);
    } else {
      noteStore.removeItem(key);
    }
    uiUpdate();
  }

  T.addCurrentState = () =&gt; {
    const wasRead = [...MT.trace.wasRead].sort();
    const obj = {};
    for (const vn of wasRead) {
      const val = State.current.variables[vn];
      if (val != null) obj[vn] = val;
    }
    const json = JSON.stringify(obj);
    const text = `enterState = ${json}`;
    const newVal = T.editVal + &quot;\n&quot; + text;
    $(&quot;#NP-input&quot;).val(newVal);
    saveValue(newVal, false);
  }
&lt;&lt;/script&gt;&gt;
&lt;style&gt;
  .NP-subtitle {
    font-size: 1.1em;
    font-weight: bold;
    margin: 0 0 0.5em 0;
  }
  #NP-input {
    min-width: 10em;
    width: calc(100% - 1em);
  }
  .NP-conflict-hidden {
    display: none;
  }
  .NP-conflict-important {
    color: #fe9;
    font-size: 1.1em;
    font-weight: bold;
  }
  #ui-dialog-body a {
    display: inline-block;
    margin-top: .5em;
  }
&lt;/style&gt;
&lt;div class=NP-subtitle&gt;
    Notes for [passage $n_notesOrigin]
&lt;/div&gt;
&lt;textarea id=NP-input rows=&quot;8&quot; placeholder=&quot;Enter text here&quot;&gt;&lt;/textarea&gt;
&lt;br&gt;
&lt;div id=NP-conflict&gt;
  &lt;div class=NP-conflict-important&gt;
      Notes for this passage has an edit conflict!
  &lt;/div&gt;
  [[See conflict|g1m Notes Single][Dialog.close()]]
&lt;/div&gt;
&lt;&lt;link &quot;Append a summary of the current state&quot;&gt;&gt;
  &lt;&lt;run _addCurrentState()&gt;&gt;
&lt;&lt;/link&gt;&gt;
&lt;br&gt;
[[View all notes|g1m Notes All][Dialog.close()]]
&lt;br&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="228" name="g1m Notes Single" tags="is-menu" position="325,2325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;return-head&gt;&gt;

&lt;&lt;script&gt;&gt;
  const T = State.temporary;
  const V = State.variables;
  const noteStore = window.sessionStorage;

  T.savedVal = &quot;&quot;;
  T.editVal = &quot;&quot;;
  T.hasConflict = false;

  $(document).one(&quot;:passagedisplay&quot;, () =&gt; {
    $(&quot;#notes-input&quot;).on(&quot;input&quot;, onInput);
    $(&quot;#notes-delete&quot;).click(confirmDelete);
    $(&quot;#notes-lose&quot;).click(confirmLose);
    $(&quot;#notes-force&quot;).click(confirmOverwrite);
    restoreSession();
    uiUpdate();
  });

  function restoreSession() {
    T.savedVal = MT.notesGet(V.n_notesOrigin);
    T.editVal = noteStore.getItem(&quot;notes-single:&quot; + V.n_notesOrigin)
      || T.savedVal;
    $(&quot;#notes-input&quot;).val(T.editVal);
    T.hasConflict = T.savedVal.trimEnd() !== T.editVal.trimEnd();
  }

  function uiUpdate() {
    $(&quot;#notes-conflict&quot;).toggleClass(&quot;notes-has-conflict&quot;, T.hasConflict);
    if (T.hasConflict) $(&quot;#notes-conflict textarea&quot;).val(T.savedVal);
    const hasData = T.savedVal.trimEnd() !== &quot;&quot; || T.editVal.trimEnd() !== &quot;&quot;;
    $(&quot;#notes-delete&quot;).prop(&quot;disabled&quot;, !hasData || T.hasConflict);
  }

  function onInput(ev) {
    saveValue($(&quot;#notes-input&quot;).val(), false);
  }

  function overwriteValue(val) {
    $(&quot;#notes-input&quot;).val(val);
    saveValue(val, true);
  }

  function saveValue(val, overwrite) {
    T.editVal = val;
    if (overwrite || !T.hasConflict) {
      T.savedVal = MT.notesTryReplace(V.n_notesOrigin, T.savedVal, T.editVal);
    }
    T.hasConflict = T.savedVal.trimEnd() !== T.editVal.trimEnd();
    const key = &quot;notes-single:&quot; + V.n_notesOrigin;
    if (T.hasConflict) {
      noteStore.setItem(key, val);
    } else {
      noteStore.removeItem(key);
    }
    uiUpdate();
  }

  T.doDelete = () =&gt; overwriteValue(&quot;&quot;);
  function confirmDelete() {
    Dialog.setup(&quot;Confirm Delete&quot;);
    Dialog.wiki(`
      Are you sure you want to delete this note?
      ?P
      &lt;&lt;button Delete&gt;&gt;&lt;&lt;run Dialog.close(); _doDelete()&gt;&gt;&lt;&lt;/button&gt;&gt;
    `);;
    Dialog.open();
  }

  T.doLose = () =&gt; overwriteValue(T.savedVal);
  function confirmLose() {
    Dialog.setup(&quot;Confirm Lose Edits&quot;);
    Dialog.wiki(`
      Are you sure you want to lose your edits and revert to the conflicting value?
      ?P
      &lt;&lt;button &quot;Lose edits&quot;&gt;&gt;&lt;&lt;run Dialog.close(); _doLose()&gt;&gt;&lt;&lt;/button&gt;&gt;
    `);;
    Dialog.open();
  }

  T.doOverwrite = () =&gt; overwriteValue(T.editVal);
  function confirmOverwrite() {
    Dialog.setup(&quot;Confirm Overwrite Conflict&quot;);
    Dialog.wiki(`
      Are you sure you want to overwrite the conflicting value with your edits?
      ?P
      &lt;&lt;button &quot;Overwrite conflict&quot;&gt;&gt;&lt;&lt;run Dialog.close(); _doOverwrite()&gt;&gt;&lt;&lt;/button&gt;&gt;
    `);
    Dialog.open();
  }
&lt;&lt;/script&gt;&gt;

&lt;span class=mt-vsep&gt;||&lt;/span&gt;
[[View all notes|g1m Notes All]]

&lt;hr&gt;
&lt;div class=ui-subtitle&gt;
    Notes for [passage $n_notesOrigin]
&lt;/div&gt;
&lt;textarea id=&quot;notes-input&quot; placeholder=&quot;Enter text here&quot;&gt;&lt;/textarea&gt;
&lt;div class=notes-buttons&gt;
  &lt;button id=&quot;notes-delete&quot;&gt;Delete note&lt;/button&gt;
&lt;/div&gt;

&lt;div id=&quot;notes-conflict&quot;&gt;
    &lt;div class=notes-buttons&gt;
        &lt;button id=&quot;notes-lose&quot;&gt;Lose edits &amp;#x21d1;&lt;/button&gt;
        &lt;button id=&quot;notes-force&quot;&gt;&amp;#x21d3; Overwrite conflict&lt;/button&gt;
    &lt;/div&gt;
    &lt;div class=ui-subtitle&gt;Local storage has a conflicting value:&lt;/div&gt;
    &lt;textarea disabled&gt;&lt;/textarea&gt;
&lt;/div&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="229" name="g1m Test 1" tags="nobr" position="200,2500" size="100,100">[[g1m Test 2]]

?P
[[g1m Test fade-in]]

&lt;&lt;tran-cut &quot;abc&quot; &quot;g1m Test 2&quot;&gt;&gt;

?P
&lt;div class=dot-flashing&gt;&lt;/div&gt;</tw-passagedata><tw-passagedata pid="230" name="g1m Test 2" tags="" position="325,2500" size="100,100">tmp is _tmp

[[g1m Test 1]]</tw-passagedata><tw-passagedata pid="231" name="g1m Test fade-in" tags="" position="200,2625" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;fade-in 0s&gt;&gt;
one
&lt;&lt;fade-next 2s&gt;&gt;
two
&lt;&lt;fade-next 50s&gt;&gt;
?P
hello my old friend
&lt;&lt;fade-next 5s&gt;&gt;
?P
[[g1m Test 2]]
hello some more
&lt;&lt;/fade-in&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="232" name="g1m Transcript" tags="is-menu" position="250,1875" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;return-head&gt;&gt;

&lt;div class=ui-title&gt;Story Transcript&lt;/div&gt;

&lt;&lt;script&gt;&gt;
  MT.tranRender(output);
&lt;&lt;/script&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="233" name="n0a Broken WIP" tags="mt-ready roam-stop" position="9250,2325" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;ending-challenge &quot;Broken&quot; xn_Broken&gt;&gt;
  &lt;&lt;arc-set-barbs mn_arcBrokenBarbs&gt;&gt;
  ?P
&lt;&lt;/arc-skip&gt;&gt;

?construction

Congratulations!
You&#39;ve reached an unfinished point in Nero&#39;s journey.
Thanks for playing so far!

?P
Nero tries to understand Ivex&#39;s magic and becomes fascinated by it.
In this ending, when Ivex returns,
Nero &lt;em&gt;does&lt;/em&gt; become Ivex&#39;s apprentice. But at what cost?
This story will be in the public release.

&lt;&lt;if !$mn_playerLeftStudyWithMirror &amp;&amp; !$mn_playerLeftStudyNoMirror&gt;&gt;
  ?P
  Have you found the exit from Ivex&#39;s study?
&lt;&lt;elseif !$mn_playerLeftStudyWithMirror || !$mn_playerLeftStudyNoMirror&gt;&gt;
  ?P
  Have you found both ways of escaping the cross?
&lt;&lt;/if&gt;&gt;

&lt;&lt;include &quot;n0a Project Status&quot;&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=actions&gt;
    &lt;&lt;if setup.debug&gt;&gt;
      &lt;li&gt;[[Enter construction zone|n9a Broken]]&lt;/li&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;checkpoint-action n_checkpoint1&gt;&gt;
    ?restartAction
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="234" name="n0a Caged Harsh WIP" tags="mt-ready roam-stop" position="9000,2150" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;ending-bad &quot;Caged (Harsh)&quot; xn_CagedHarsh&gt;&gt;
  &lt;&lt;arc-set-barbs mn_arcCagedBarbs&gt;&gt;
  ?P
&lt;&lt;/arc-skip&gt;&gt;

?construction

Congratulations!
You&#39;ve reached an unfinished point in Nero&#39;s journey.
Thanks for playing so far!

?P
Nero has discovered the sinister use of &lt;em&gt;pleasures sublime,&lt;/em&gt;
and he will suffer new tortures when Ivex returns.
The story of this failure will be in the public release.

&lt;&lt;if !$mn_playerLeftStudyWithMirror &amp;&amp; !$mn_playerLeftStudyNoMirror&gt;&gt;
  ?P
  Have you found the exit from Ivex&#39;s study?
&lt;&lt;elseif !$mn_playerLeftStudyWithMirror || !$mn_playerLeftStudyNoMirror&gt;&gt;
  ?P
  Have you found both ways of escaping the cross?
&lt;&lt;/if&gt;&gt;

&lt;&lt;include &quot;n0a Project Status&quot;&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=actions&gt;
    &lt;&lt;if setup.debug&gt;&gt;
      &lt;li&gt;[[Enter construction zone|n9a Caged Harsh]]&lt;/li&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;checkpoint-action n_checkpoint1&gt;&gt;
    &lt;&lt;checkpoint-action n_checkpoint2&gt;&gt;
    ?restartAction
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="235" name="n0a Caged Mild WIP" tags="mt-ready roam-stop" position="9575,3075" size="200,200">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;ending-bad &quot;Caged (Mild)&quot; xn_CagedMild&gt;&gt;
  &lt;&lt;arc-set-barbs mn_arcCagedBarbs&gt;&gt;
  ?P
&lt;&lt;/arc-skip&gt;&gt;

?construction

Congratulations!
You&#39;ve reached an unfinished point in Nero&#39;s journey.
Thanks for playing so far!

?P
Nero is mistaken about how quickly his cock can be satisfied,
and he will suffer new tortures when Ivex returns.
The story of this failure will be in the public release.

&lt;&lt;if !$mn_playerLeftStudyWithMirror &amp;&amp; !$mn_playerLeftStudyNoMirror&gt;&gt;
  ?P
  Have you found the exit from Ivex&#39;s study?
&lt;&lt;elseif !$mn_playerLeftStudyWithMirror || !$mn_playerLeftStudyNoMirror&gt;&gt;
  ?P
  Have you found both ways of escaping the cross?
&lt;&lt;/if&gt;&gt;

&lt;&lt;include &quot;n0a Project Status&quot;&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=actions&gt;
    &lt;&lt;if setup.debug&gt;&gt;
      &lt;li&gt;[[Enter construction zone|n9a Caged Mild]]&lt;/li&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;checkpoint-action n_checkpoint1&gt;&gt;
    &lt;&lt;checkpoint-action n_checkpoint2&gt;&gt;
    ?restartAction
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="236" name="n0a Nero Ending Index" tags="mt-ready inclusion" position="500,1300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;script&gt;&gt;
  const T = State.temporary;
  const V = State.variables;
  T.tamed = V.xn_TamedHarsh || V.xn_TamedMild;
  T.caged = V.xn_CagedHarsh || V.xn_CagedMild;
&lt;&lt;/script&gt;&gt;

&lt;&lt;arc-ending _tamed
  [[Bad Ending: Tamed|g1m Archives Entry]]
  &quot;&quot;
  &quot;$g_arcEntry = { name: $mn_arcTamedVariant, barbs: $mn_arcTamedBarbs=== &#39;y&#39; }&quot;
&gt;&gt;
  Struggling is hopeless...
&lt;&lt;arc-variants&gt;&gt;
  &lt;&lt;arc-select mn_arcTamedVariant &quot;Variant:&quot;&gt;&gt;
    &lt;&lt;arc-option xn_TamedMild &quot;Mild&quot; $xn_TamedMild&gt;&gt;
      Ivex enjoys cooperative victims...
    &lt;&lt;arc-option xn_TamedHarsh &quot;Harsh&quot; $xn_TamedHarsh&gt;&gt;
      Ivex enjoys stubborn victims...
  &lt;&lt;/arc-select&gt;&gt;
  &lt;&lt;arc-barbs mn_arcTamedBarbs&gt;&gt;
&lt;&lt;/arc-ending&gt;&gt;

&lt;&lt;arc-ending _caged
  [[`Bad Ending: Caged \ud83d\udea7`|g1m Archives Entry]]
  &quot;&quot;
  &quot;$g_arcEntry = { name: $mn_arcCagedVariant, barbs: $mn_arcCagedBarbs === &#39;y&#39; }&quot;
&gt;&gt;
  Self-control is overrated...
&lt;&lt;arc-variants&gt;&gt;
  &lt;&lt;arc-select mn_arcCagedVariant &quot;Variant:&quot;&gt;&gt;
    &lt;&lt;arc-option xn_CagedMild &quot;Mild&quot; $xn_CagedMild&gt;&gt;
      Sometimes all that&#39;s needed is a paw...
    &lt;&lt;arc-option xn_CagedHarsh &quot;Harsh&quot; $xn_CagedHarsh&gt;&gt;
      &lt;&lt;if !$n_wandAsked&gt;&gt;
        What does Ivex say about his wand?
      &lt;&lt;else&gt;&gt;
        Sometimes a paw is not enough...
      &lt;&lt;/if&gt;&gt;
  &lt;&lt;/arc-select&gt;&gt;
  /* &lt;&lt;arc-barbs mn_arcCagedBarbs&gt;&gt; */
&lt;&lt;/arc-ending&gt;&gt;

&lt;&lt;arc-ending $xn_Broken
  [[`Challenge Ending: Broken \ud83d\udea7`|g1m Archives Entry]]
  &quot;&quot;
  &quot;$g_arcEntry = { name: &#39;xn_Broken&#39;, barbs: $mn_arcBrokenBarbs === &#39;y&#39; }&quot;
&gt;&gt;
  &lt;&lt;if !_tamed&gt;&gt;
    Another hint will appear after Nero has a disturbing dream...
  &lt;&lt;elseif !$xn_CagedHarsh&gt;&gt;
    Another hint will appear after Nero gets stuck in a red glow...
  &lt;&lt;elseif !$mn_playerLeftStudyWithMirror&gt;&gt;
    Another hint will appear after Nero stops saying please...
  &lt;&lt;elseif !$mn_playerLostEndgame&gt;&gt;
    Does Nero know a spell that can escape Ivex&#39;s wand?
  &lt;&lt;elseif !$mn_playerReadGlitch&gt;&gt;
    Barbs or smooth... Is there a third choice?
  &lt;&lt;else&gt;&gt;
    You know all the pieces of the puzzle.
    Can Nero use his spell to escape Ivex&#39;s wand?
  &lt;&lt;/if&gt;&gt;
&lt;&lt;arc-variants&gt;&gt;
  /* &lt;&lt;arc-barbs mn_arcBrokenBarbs&gt;&gt; */
&lt;&lt;/arc-ending&gt;&gt;

&lt;hr&gt;

&lt;&lt;arc-ending false &quot;Bad Ending: Hunted \ud83d\udea7&quot;&gt;&gt;
  Under construction.
&lt;&lt;arc-variants&gt;&gt;
  &lt;&lt;arc-select mn_arcHuntedVariant &quot;Variant:&quot;&gt;&gt;
    &lt;&lt;arc-option mild &quot;Mild&quot; false&gt;&gt;
    &lt;&lt;arc-option harsh &quot;Harsh&quot; false&gt;&gt;
  &lt;&lt;/arc-select&gt;&gt;
  /* &lt;&lt;arc-barbs mn_arcHuntedBarbs&gt;&gt; */
&lt;&lt;/arc-ending&gt;&gt;

&lt;&lt;arc-ending false &quot;Bad Ending: Overwhelmed \ud83d\udea7&quot;&gt;&gt;
  Under construction.
&lt;&lt;arc-variants&gt;&gt;
  &lt;&lt;arc-select mn_arcOverwhelmedVariant &quot;Variant:&quot;&gt;&gt;
    &lt;&lt;arc-option mild &quot;Mild&quot; false&gt;&gt;
    &lt;&lt;arc-option harsh &quot;Harsh&quot; false&gt;&gt;
  &lt;&lt;/arc-select&gt;&gt;
  /* &lt;&lt;arc-barbs mn_arcOverwhelmedBarbs&gt;&gt; */
&lt;&lt;/arc-ending&gt;&gt;

&lt;&lt;arc-ending false &quot;Challenge Ending: Wrecked \ud83d\udea7&quot;&gt;&gt;
  Under construction.
&lt;&lt;arc-variants&gt;&gt;
  /* &lt;&lt;arc-barbs mn_arcWreckedBarbs&gt;&gt; */
&lt;&lt;/arc-ending&gt;&gt;

&lt;hr&gt;

&lt;&lt;arc-ending false &quot;Ending: Satisfied \ud83d\udea7&quot;&gt;&gt;
  Under construction.
&lt;&lt;arc-variants&gt;&gt;
  &lt;&lt;arc-select mn_arcSatisfiedVariant &quot;Variant:&quot;&gt;&gt;
    &lt;&lt;arc-option mica &quot;Mica&quot; false&gt;&gt;
    &lt;&lt;arc-option pevhin &quot;Pevhin&quot; false&gt;&gt;
    &lt;&lt;arc-option blank &quot;???&quot; false&gt;&gt;
  &lt;&lt;/arc-select&gt;&gt;
&lt;&lt;/arc-ending&gt;&gt;

&lt;&lt;arc-ending false &quot;Ending: Dominant \ud83d\udea7&quot;&gt;&gt;
  Under construction.
&lt;&lt;arc-variants&gt;&gt;
  /* &lt;&lt;arc-barbs mn_arcDominantBarbs&gt;&gt; */
  &lt;!--
    Chase: No | Yes
    Collar: No | Yes
    Tame: No | Yes
    ??? (Lion): No | Yes
    ??? (Rescue): No | Yes
    ??? (Ascend): No | Yes
  --&gt;
&lt;&lt;/arc-ending&gt;&gt;

&lt;&lt;arc-ending false &quot;Challenge Ending: Ascendant \ud83d\udea7&quot;&gt;&gt;
  Under construction.
&lt;&lt;arc-variants&gt;&gt;
  /* &lt;&lt;arc-barbs mn_arcAscendantBarbs&gt;&gt; */
&lt;&lt;/arc-ending&gt;&gt;
&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="237" name="n0a Project Status" tags="mt-ready inclusion" position="500,2400" size="100,100">&lt;&lt;nobr&gt;&gt;
?P
A few of Nero&#39;s endings are fully written,
and a few more are reachable but not yet written.
Check out the Archives (in the left sidebar menu)
to see which endings are available.
For the endings you haven&#39;t seen yet,
there are some hints on how to reach them.

?P
We&#39;re expecting the next chapter of Nero&#39;s adventure to be released to
&lt;a target=&quot;_blank&quot; href=&quot;https://www.patreon.com/sleth&quot;&gt;Sleth&#39;s Patreon&lt;/a&gt;
later in 2023. Public release will be about a month later.

?P
Feedback is always welcome!
Feel free to contact Grayscale Wolf on
&lt;a id=&quot;gsw-ma&quot; target=&quot;_blank&quot; href=&quot;https://mastodon.social/@gray17&quot;
  &gt;Mastodon&lt;/a&gt;,
&lt;a id=&quot;gsw-fa&quot; target=&quot;_blank&quot;
  href=&quot;https://www.furaffinity.net/user/grayscalewolf&quot;
    &gt;FurAffinity&lt;/a&gt;,
or
&lt;a id=&quot;gsw-email&quot; target=&quot;_blank&quot;&gt;email&lt;/a&gt;
&lt;&lt;if !_isTranscript&gt;&gt;
  &lt;&lt;script&gt;&gt;
    console.log(&quot;project status&quot;);
    $(document).one(&quot;:passagedisplay&quot;, () =&gt; {
      console.log(&quot;project status display&quot;);
      const em = $(&quot;#gsw-email&quot;)[0];
      const a = atob(&#39;eG1haWx0bzo&#39;).slice(1);
      const b = $(&quot;#gsw-fa&quot;)[0].href.slice(-13);
      const c = $(&quot;#gsw-ma&quot;)[0].href[24];
      const d = em.id.splice(1, 4);
      em.href = `${a}${b}${c}${d}.com`;
    });
  &lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;
if you have suggestions or find a bug.

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="238" name="n0a Second Floor WIP" tags="mt-ready roam-stop" position="9775,3625" size="100,100">&lt;&lt;nobr&gt;&gt;

?construction

Congratulations!
You&#39;ve reached an &quot;Under Construction&quot; point in Nero&#39;s story.

?P
The wolf mage has escaped the first floor of the tower,
and he&#39;s ready for more challenges on the next.

?P
Thanks for playing so far!

&lt;&lt;if !$mn_playerLeftStudyWithMirror || !$mn_playerLeftStudyNoMirror&gt;&gt;
  ?P
  Have you found the other way Nero can escape from the cross?
&lt;&lt;/if&gt;&gt;

&lt;&lt;include &quot;n0a Project Status&quot;&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if setup.debug&gt;&gt;
    &lt;li&gt;[[Enter construction zone|n3a Start]]&lt;/li&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;checkpoint-action n_checkpoint1&gt;&gt;
  &lt;&lt;checkpoint-action n_checkpoint2&gt;&gt;
  ?restartAction
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="239" name="n1a Endgame 1" tags="mt-ready" position="925,3150" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

The wolf&#39;s limbs appear to be bound in a spread-eagle position
to something sturdy, probably made of wood. And his tongue feels
too numb to correctly cast any spell just yet.

?P
All this would be an overwhelming disadvantage to most spellcasters,
but the lupine mage always has one spell ready to cast,
which doesn&#39;t need complex gestures or precisely spoken words.
He&#39;s kept the spell&#39;s construction a secret,
so there isn&#39;t a proper name for it yet.
Privately he thinks of it as
&lt;&lt;mt-seen $kn_Endgame&gt;&gt;
  &lt;&lt;tran-cut [[Nero&#39;s Endgame|n1s Endgame Info 1]]&gt;&gt;.
&lt;&lt;/mt-seen&gt;&gt;
It has only one charge, and it requires a few hours
with an assistant to prepare again,
so it&#39;s a spell of last resort for desperate circumstances.

?P
Mysterious abduction by an unknown captor is a circumstance
that seems sufficiently desperate.
So Nero prepares the spell&#39;s image in his mind,
and then &lt;em&gt;twists&lt;/em&gt; it...

?P
&lt;&lt;mta [[n1a Endgame 2]]&gt;&gt;
  Continue
&lt;&lt;/mta&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="240" name="n1a Endgame 2" tags="mt-ready" position="1050,3150" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;

The lupine mage feels a familiar tingle as the spell launches from his ass.
And then...

?P
&lt;&lt;fade-in 6s&gt;&gt;
Nothing happens.

?P
&lt;&lt;fade-next 2s&gt;&gt;
He&#39;s still bound to the wooden contraption, and now his head is feeling even more nauseous. Well, so much for the chance of a quick resolution to whatever predicament he&#39;s in. Still, the failure of the spell is useful information to know.

?P
Nero opens his eyes and struggles to focus.
This is definitely not simply a hangover.
It feels a bit like teleportation sickness and a blunt sleep charm,
probably mixed with some neutralizers to complete the spell cocktail.
It takes considerable blinking and some shaking of his aching head
before he is able to see clearly.

?P
When he does, the first thing he notices is his captor,
a black panther, staring intently at an empty spot on the ceiling.

?P
It&#39;s &lt;em&gt;him&lt;/em&gt;.

?P
It&#39;s Ivex, the panther mage who&#39;s the reason for Nero&#39;s current &quot;errand&quot;.

?P
[[Continue|n1a Endgame 3]]
&lt;&lt;/fade-in&gt;&gt;

&lt;&lt;run
  delete $n_dimCross;
  delete $n_dimDesk;
  delete $n_dimGrav;
  delete $n_dimKnife;
  $n_castEndgame = true;
  $n_magicPhase = MP_triedMagic;
  $n_magicPhaseReached = MP_triedMagic;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="241" name="n1a Endgame 3" tags="mt-ready" position="1175,3150" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;

When the panther notices that Nero is watching, he emits a giggle.
&quot;That&#39;s a cute little energy knot! What was it that you tried to cast?&quot;

?P
Ivex continues to stare at the ceiling and tilts his head from side to side.
&quot;Is that... Chimeras on Ice? No, wait. I recognize it now.
It must be Raven&#39;s Diversion!&quot;

?P
He laughs at the wolf&#39;s face. &quot;I was misled by the power scale.
That&#39;s an impressively weak coil for Raven.
Did you copy it from a carnival wizard?
Do you even understand the spell you cast?&quot;

?P
Nero refrains from comment.
He &lt;em&gt;would&lt;/em&gt; defend his abilities in normal circumstances,
but considering his current predicament,
it might be useful to appear weaker than he is.
He deliberately splays his ears slightly, to signal mild distress.

?P
Ivex laughs again. He reaches up to grab something invisible,
then throws it at a stuffed penguin sitting on a cabinet.
The penguin immediately shrinks to the size of an acorn,
and a small coin-like object drops from where
the penguin&#39;s beak used to be.

?P
The panther snorts. &quot;And Mudge too! I did not notice that.
What an astonishingly useless combination.&quot;

?P
He theatrically raises his left arm.
&quot;Let me show you what a real mage can do.
I am Ivex the Magnificent, and I have something much better
than your pathetic Raven&#39;s Diversion.
Behold, a spell that&#39;s called, &lt;em&gt;Ivex the Magnificent&#39;s Diversion!&lt;/em&gt;&quot;

?P
Ivex &quot;the Magnificent&quot; snaps his fingers...

?P
&lt;&lt;mta &quot;n1p Barbs Slow 1&quot;&gt;&gt;
  Continue
&lt;&lt;/mta&gt;&gt;

&lt;&lt;set $n_afterNaked = &quot;[[Continue|n1a Endgame 4]]&quot;&gt;&gt;
&lt;&lt;set $n_penguinCoinDropped = true&gt;&gt;
&lt;&lt;set $n_penguinShrunk = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="242" name="n1a Endgame 4" tags="mt-ready big-mood" position="1300,3150" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;barbs-announce maybe&gt;&gt;

Ivex touches the claw of his index finger to Nero&#39;s helplessly exposed nipple, without hurting it, just teasing it, almost tickling it. The wolf tries to evade the touch, but the leather straps are firm and keep him vulnerable to the rude attention.

?P
The panther says, &quot;&lt;em&gt;Ivex the Magnificent&#39;s Diversion&lt;/em&gt; is just a small taste of my powers.&quot; The claw trails across Nero&#39;s bare fur to his other nipple, which perks a bit in apprehension. The panther&#39;s maneuvers are distressingly intimate.

?P
&quot;Answer my questions,&quot; said Ivex, &quot;and I will show you much, much more.&quot;

?P
Was that a promise or a threat?
Nero&#39;s ear twitches, but he holds his head still,
careful not to stare or look away.
He tries to pretend that there&#39;s nothing unusual about
being bound and completely nude in front of a
&lt;&lt;if $n_mageSight&gt;&gt;
  pervert bathed in exotic energy.
&lt;&lt;else&gt;&gt;
  fully-dressed degenerate.
&lt;&lt;/if&gt;&gt;

?P
&quot;If you don&#39;t cooperate...&quot; Ivex runs his fingers through the fur covering the wolf&#39;s ribs, moving slowly down the abdomen, toward Nero&#39;s exposed crotch...

?P
When the panther&#39;s paw stops, his palm is resting against Nero&#39;s sheath, and all five claws are firmly pressed into Nero&#39;s balls.

?P
Threat. Yes. That is definitely a threat.

?P
[[Continue|n1cn Ivex Intro 1]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="243" name="n1a Feign Sleep 1" tags="mt-ready" position="925,3300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;

Best to play it safe and gather more information before acting.

?P
Nero can feel leather straps on his arms, legs, and torso, holding him upright and spread-eagled against something sturdy, probably made of wood.

?P
Other than the sounds made by his unknown companion, it&#39;s eerily quiet. It feels like he&#39;s indoors, and it smells of incense that doesn&#39;t really hide a stale scent that reminds the wolf of living quarters long overdue for cleaning.

?P
Nero ventures to open one eyelid slightly to peer through the slit...

?P
[[Continue|n1a Feign Sleep 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="244" name="n1a Feign Sleep 2" tags="mt-ready" position="1050,3300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;

Suddenly, a hand grabs Nero&#39;s robe at his crotch and firmly grips his private parts through the cloth of the robe and the underwear beneath. The fingers dig in and curl around one of the wolf&#39;s testicles. And then the fingers squeeze. Hard.

?P
Nero&#39;s eyes fly wide open and he stifles a yelp.

?P
The voice chuckles. &quot;I said, wakey wakey...&quot;

?P
The pain is excruciating and twists deeply in his gut. The wolf&#39;s instinct is to struggle to escape the invasive, crushing paw, but when he moves, the fingers squeeze tighter, sending sharp aches into his abdomen. So he makes himself stay still.

?P
His vision is cloudy. Probably the after-effects of whatever knocked him out. It isn&#39;t tears of pain, certainly not.

?P
Nero blinks rapidly to shake loose whatever dust is causing his eyes to water. And soon enough, he can see the blurry face of his tormentor.

?P
Their eyes make contact. The captor&#39;s grin becomes a toothy, feral smile.

?P
[[Continue|n1a Feign Sleep 3]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="245" name="n1a Feign Sleep 3" tags="mt-ready" position="1175,3300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;

A fist smashes into Nero&#39;s crotch! The knuckles thump hard against his other testicle, making that ball ache stronger than the one firmly held. The wolf automatically jerks from the impact, and the motion stretches his captive ballsack painfully tight.

?P
Nero gasps, and the fist bashes his crotch again! The wolf cannot suppress a whine. The sound is embarrassing and pathetic, and it fills the air of the room.

?P
A moment later, the hand on his ball releases its grasp.

?P
&quot;There we go,&quot; says his blurry captor. &quot;That&#39;s a promising start. I&#39;m so glad to see you&#39;re finally awake.&quot;

?P
[[Continue|n1a Feign Sleep 4]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="246" name="n1a Feign Sleep 4" tags="mt-ready big-mood" position="1300,3300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;

Nero&#39;s vision clears. The vague shape of his tormentor snaps into focus.

?P
It&#39;s &lt;em&gt;him&lt;/em&gt;.

?P
It&#39;s Ivex, the panther mage who&#39;s the reason for Nero&#39;s current &quot;errand&quot;.

?P
The panther speaks brightly. &quot;Welcome to my domain, foolish wolf. My name is Ivex the Magnificent, and you really should pay close attention when I&#39;m talking to you.&quot;

?P
Well. Nero had thought that locating the malevolent mage would be the difficult part of the task. But here he is, not even a week since accepting the commission. Nero makes a mental note: Walking into traps is useful. But next time, perhaps, &lt;em&gt;notice&lt;/em&gt; the trap before stepping into it. His aching groin agreed with that.

?P
Still, whatever route brought him to Ivex&#39;s lair, a success is a success. The rest of the errand will be simple.

?P
[[Continue|n1cn Ivex Intro 1]]

&lt;&lt;set $n_abused = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="247" name="n1a Hangover Info" tags="mt-ready" position="750,3500" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-always n_mageSight false&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Pearson&#39;s Hangover Cantrip is a simple spell, but its construction is more subtle than it appears. It&#39;s often the first off-book spell that academy students learn, since it&#39;s useful for curing the consequences of alcoholic indulgence, of course. But the main reason it&#39;s popular is because older students find it hilarious when a novice attempts it while drunk.

?P
Most spoken spells require extremely precise enunciation to have any effect at all. Pearson&#39;s is different. It works if it&#39;s said correctly, yes. But if the caster slurs or stumbles the invocation, it doesn&#39;t merely fail. It turns their fur bright green for the day.

?P
Needless to say, Nero only made that mistake once.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_Pearson&gt;&gt;
  [[Return|n1a Nero Start]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="248" name="n1a Hello 1" tags="mt-ready" position="925,3450" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;

The adventurous wolf mage has resolved many difficult situations in the past by simply talking and engaging the aggrieved persons with dialogue, courtesy, and respect. It&#39;s certainly worth trying now.

?P
He opens his eyes and struggles to focus.

?P
There&#39;s a blurry figure looming at the place where the voice came from. Nero addresses the blur. &quot;You have me at a disadvantage,&quot; he says. &quot;My arms and legs appear to be bound to some wooden contraption, so I&#39;m unable to greet you properly. But allow me to introduce myself. The name&#39;s Nero.&quot;

?P
The blur does not immediately respond. It&#39;s a promising sign. Nero&#39;s friendly behavior may have interrupted whatever aggression was lurking in the words that the blur had been intending to say.

?P
After several more rapid blinks, along with some shaking of his aching head, Nero&#39;s vision starts to focus.

?P
The blurry figure becomes a person...

?P
[[Continue|n1a Hello 2]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="249" name="n1a Hello 2" tags="mt-ready" position="1050,3450" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;

It&#39;s &lt;em&gt;him&lt;/em&gt;.

?P
It&#39;s Ivex, the panther mage who&#39;s the reason for Nero&#39;s current &quot;errand&quot;.

?P
Ivex&#39;s expression is unclear. Not unfriendly, but not exactly relaxed either. The two mages make eye contact for a moment, and then the panther lowers his gaze.

?P
But he doesn&#39;t stop at merely lowering his gaze. Ivex bends his body, crouches down, and ends up resting on one knee in front of the bound wolf.

?P
What an unusual reaction! Nero might bask a bit in the panther&#39;s odd gesture of respect, but he doubts that his little adventures have gained him a reputation beyond the group of patrons who find his services most useful. It&#39;s unlikely that the panther has ever heard of him.

?P
It&#39;s an awkward moment.

?P
[[Continue|n1a Hello 3]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="250" name="n1a Hello 3" tags="mt-ready" position="1175,3450" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;

And then it gets even more awkward.

?P
Ivex leans forward. His feline ears are perked. His head approaches the apex of the wolf&#39;s bound and spread legs.

?P
The panther&#39;s muzzle comes uncomfortably close to Nero&#39;s crotch...

?P
[[Continue|n1a Hello 4]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="251" name="n1a Hello 4" tags="mt-ready" position="1300,3450" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;

Ivex&#39;s nose touches the cloth below the waist of the wolf&#39;s robe, millimeters away from Nero&#39;s private parts. The panther flares his nostrils, closes his eyes, and inhales deeply.

?P
The wolf is horrified. What is the panther doing? Is he... &lt;em&gt;sniffing&lt;/em&gt; me? What a freak!

?P
Nero has learned of many different greeting rituals from the various foreign lecturers who visit Windbone Magic Academy, but no civilization in recorded history has ever greeted strangers, or even friends, with a ritual as bestial and intrusive as what the feline mage is doing now.

?P
Ivex exhales in a long sigh. The warm breath causes the loose cloth of the wolf mage&#39;s robe to briefly flutter.

?P
The panther speaks lightly, as if his behavior were perfectly normal. &quot;Welcome to my domain. My name is Ivex... the Magnificent. But I believe you already knew that, didn&#39;t you.&quot;

?P
Well. &lt;em&gt;That&lt;/em&gt; sort of posturing is familiar. Nero has encountered many braggarts in his adventures before. And here in front of him is another. It should be easy to fulfill his commission and escape this weird mage&#39;s residence.

?P
[[Continue|n1cn Ivex Intro 1]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="252" name="n1a Nero Start" tags="mt-ready section-start" position="700,3250" size="200,200">&lt;&lt;nobr&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;

Nero&#39;s head feels stuffed, like it&#39;s crammed full with pebbles
that shift a little painfully when he moves his head.
He starts to prepare
&lt;&lt;mt-seen $kn_Pearson&gt;&gt;
  &lt;&lt;tran-cut [[Pearson&#39;s Hangover Cantrip|n1a Hangover Info]]&gt;&gt;,
&lt;&lt;/mt-seen&gt;&gt;
but he decides he&#39;s unlikely to recite it correctly
in his current condition.
There are probably more important things for him to focus on anyway.

?P
&quot;Last chance, buddy. Wake up, or else...&quot; says the voice,
with a hint of manic glee.

?P
Nero considers how to respond.

?P
&lt;ul class=actions&gt;
  &lt;li&gt;
    [[Feign sleep to learn more about the situation.|n1a Feign Sleep 1]]
  &lt;/li&gt;
  &lt;li&gt;[[Try to sweet talk his way through this.|n1a Hello 1]]&lt;/li&gt;
  &lt;li&gt;[[Activate his emergency protection spell.|n1a Endgame 1]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="253" name="n1cn 100 Percent" tags="mt-ready" position="2575,2975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;cv-try n_magicPhase `MP_beforeCast` `MP_wantDevice`&gt;&gt;

&quot;Yes! Please!&quot; Nero says with urgency, &quot;You can have 100%!&quot;
Anything to deflect or delay another punishing blow to his private parts.

?P
Ivex snorts and gives the wolf&#39;s captive balls
a light tap with his knuckles.
&quot;That&#39;s a little bit better. But haven&#39;t you realized yet?
I already &lt;em&gt;have&lt;/em&gt; 100% of what I want in my grasp!&quot;

?P
Nero nods his head vigorously.

&lt;&lt;mf-please&gt;&gt;
  ?P
  The Sprite ?sprSpeaks in Nero&#39;s ear,
  &lt;span class=sprite-q&gt;&quot;Thank you, ?masterX
  Increasing flux capacitance to maximum, ?sprHoldStop&quot;&lt;/span&gt;
&lt;&lt;/mf-please&gt;&gt;

?P
The panther continues to punctuate his speech with additional taps
to Nero&#39;s
&lt;&lt;= $n_naked ? &quot;balls.&quot; : &quot;crotch.&quot;&gt;&gt;
&quot;So for this deal, this &lt;em&gt;business venture&lt;/em&gt; that you propose,
for it to be interesting to me, you will have to offer me &lt;em&gt;more&lt;/em&gt;
than 100%.&quot;
He raises his right arm and makes a fist, preparing it to strike.

?P
Nero blurts out, &quot;110%!&quot; The panther does not seem appeased. &quot;150%?
You can have 200%!&quot;

?P
Ivex giggles excitedly. &quot;Do you even hear what you&#39;re saying?
How do you expect to &lt;em&gt;have&lt;/em&gt; 200% to give me?
Are you going to lure your twin into another one of my traps?
Was your whore of a mother even &lt;em&gt;able&lt;/em&gt; to beg enough food to 
nurse more than one runt of a pup?&quot;

?P
The panther releases his grasp of the wolf&#39;s balls
and steps away with a laugh.

?P
[[Continue|n1cx Start Candle 1]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="254" name="n1cn Apprentice No" tags="mt-ready inclusion" position="2575,2700" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_castItch true&gt;&gt;
&lt;&lt;vi-always n_naked true&gt;&gt;
&lt;&lt;vi-always n_ivexReceptive false&gt;&gt;
&lt;&lt;vi-always n_ivexWasReceptive false&gt;&gt;

Ivex laughs. &quot;Your plan to become my apprentice begins by
irritating me with a pitiful attack spell?&quot;

?P
Nero thinks quickly.
&lt;&lt;if $n_abused&gt;&gt;
  &quot;I wanted to be sure you were as powerful as it seemed
  from your dossier. And Superb Itch is quite harmless, really!&quot;
&lt;&lt;else&gt;&gt;
  &quot;The tales of your feats in your dossier were clearly
  some sort of mundane misinterpretation of magic.
  It was clear that you aren&#39;t just some carnival wizard,
  but I was less certain if you know magic that I do not.
  I&#39;m quite impressed.&quot;

  ?P
  Ivex frowns. &quot;Still, you &lt;em&gt;attacked&lt;/em&gt; me.
  Were you unable to think of a friendlier test?&quot;

  ?P
  Nero replies, &quot;Superb Itch is a harmless little spell,
  as I&#39;m sure you know.&quot;
&lt;&lt;/if&gt;&gt;

?P
&quot;&lt;em&gt;Harmless&lt;/em&gt;.&quot; The panther seems to agree.
&lt;&lt;if $n_ivexNear&gt;&gt;
  He bares his teeth in a grin that does not reassure the wolf.

&lt;&lt;else&gt;&gt;
  He approaches with a bared-teeth grin
  that does not reassure the wolf.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n1cn Harmless]]

&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="255" name="n1cn Apprentice Yes" tags="mt-ready inclusion" position="2575,2575" size="100,100">&lt;&lt;nobr&gt;&gt;

Ivex looks startled by the suggestion.
&lt;&lt;if $n_ivexNear&gt;&gt;
  He takes few steps back to look
&lt;&lt;else&gt;&gt;
  His eyes flick
&lt;&lt;/if&gt;&gt;
up and down the length of the
&lt;&lt;= $n_naked ? &quot;naked&quot; : &quot;bound&quot;&gt;&gt;
wolf. The tip of his tail twitches in an uneven rhythm.

?P
After an uncomfortably long silence, he seems to reach a decision.
&quot;An apprentice... Really...&quot;
There&#39;s a gleam in his eyes, but his expression is serious.
&quot;Of course, you&#39;re not the first to ask me that.
I have many, &lt;em&gt;many&lt;/em&gt; candidates to consider.
But I&#39;ve always felt that wolves produce the best spell components.
And you&#39;re the most handsome candidate so far...&quot;

?P
[[Continue|n1cr Ivex Demanding (3,2)]]

&lt;&lt;run
  delete $n_ivexNear;
  $n_apprentice = true;
  $n_ivexReceptive = true;
  $n_ivexWasReceptive = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="256" name="n1cn Apprentice" tags="mt-ready big-mood" position="2450,2675" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_abused n_naked&gt;&gt;

&lt;&lt;if $n_abused&gt;&gt;
  &quot;No, of course not! That isn&#39;t what I meant!&quot;
  Nero frantically considers ways to defuse Ivex&#39;s anger.
  &quot;I was hoping...&quot;
  ?P
  What can he say that will demonstrate cooperation,
  without answering the question of who hired him?

  &lt;&lt;mf-pass &quot;No Of Course Not&quot;&gt;&gt;
    ?P
    That is not helpful.
  &lt;&lt;mf-else&gt;&gt;
    ?P
  &lt;&lt;/mf-pass&gt;&gt;
  The wolf stalls some more. &quot;I was hoping...&quot;
  He quickly glances around the room, seeking inspiration.
  ?P
  And then he sees it.
  The bookcases!
  &lt;&lt;if $n_booksViewed&gt;&gt;
    All those introductory magic texts.
  &lt;&lt;else&gt;&gt;
    Many of the books are introductory magic texts.
  &lt;&lt;/if&gt;&gt;
  ?P
  Nero speaks in a rush.
  &quot;Would you consider me as an apprentice?&quot;

&lt;&lt;elseif $n_naked&gt;&gt;
  &quot;Of course not,&quot; says the wolf.
  He shakes his head, stalling for time.

  &lt;&lt;mf-pass &quot;Of Course Not&quot;&gt;&gt;
    ?P
    Nero ignores the Sprite.
  &lt;&lt;/mf-pass&gt;&gt;
  &quot;I&#39;m not proposing a partnership...&quot;

  ?P
  He had hoped that a mercantile discussion would
  lead Ivex to engage with him as a respectable person,
  instead of a naked object of the panther&#39;s perversion.
  ?P
  There must be some approach that will kindle Ivex&#39;s respect.
  The wolf scans the room for inspiration.
  His attention lands on the shelves of
  &lt;&lt;if $n_booksViewed&gt;&gt;
    books. All those copies of Cadmia&#39;s Compendium of Charms.
   &lt;&lt;else&gt;&gt;
    books, many of which seem to be introductory magic texts.
  &lt;&lt;/if&gt;&gt;
  Of course!
  ?P
  Nero speaks with a serious tone. &quot;I&#39;m hoping to be your apprentice.&quot;
  ?P
  It&#39;s not a perfect idea. There are certainly ways that an &quot;apprentice&quot;
  could arouse Ivex&#39;s lewd appetites, but Nero thinks he can lead
  the panther into meticulous, un-erotic discussions of
  the more technical aspects of magic.

&lt;&lt;else&gt;&gt;
  &quot;Of course not,&quot; Nero says slowly, stalling for time.

  &lt;&lt;mf-pass &quot;Of Course Not&quot;&gt;&gt;
    ?P
    The wolf ignores the Sprite.
  &lt;&lt;/mf-pass&gt;&gt;
  &quot;You misunderstand my intent.&quot;

  ?P
  He&#39;s intrigued by Ivex&#39;s reaction to
  even the slightest of challenges to the panther&#39;s superiority.
  This seems to be quite the tender spot, which is useful to know.
  ?P
  The wolf considers what would be the right tone to use
  to continue this conversation.
  He looks around the room for inspiration,
  and finds it in the books on the
  &lt;&lt;if $n_booksViewed&gt;&gt;
    shelves. All those copies of Cadmia&#39;s Compendium of Charms.
  &lt;&lt;else&gt;&gt;
    shelves, many of which seem to be introductory magic texts.
  &lt;&lt;/if&gt;&gt;
  Of course!
  ?P
  Nero smiles and speaks in a jovial tone.
  &quot;I&#39;m hoping to be your apprentice.&quot;
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_castItch&gt;&gt;
  &lt;&lt;include [[n1cn Apprentice No]]&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;include [[n1cn Apprentice Yes]]&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="257" name="n1cn Charm Fails" tags="mt-ready inclusion" position="2075,3325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_castItch true&gt;&gt;
&lt;&lt;vi-always n_naked true&gt;&gt;
&lt;&lt;vi-always n_ivexReceptive false&gt;&gt;
&lt;&lt;vi-always n_ivexWasReceptive false&gt;&gt;

The panther snorts. &quot;And now that you &lt;em&gt;have&lt;/em&gt; met me,
your first action is a pitiful attack spell?&quot;

?P
&quot;Well...&quot; Nero thinks quickly.

&lt;&lt;if $n_abused&gt;&gt;
  &quot;I was not sure of the tales of your power.
  Mundanes often misinterpret carnival wizardry as exotic arts.
  So I thought it would be prudent to check.
  Superb Itch is of course quite harmless, really!&quot;

&lt;&lt;else&gt;&gt;
  &quot;Of course, I&#39;m somewhat
  &lt;em&gt;skeptical&lt;/em&gt; of your dossier.
  Mundanes have such strange ideas about magic,
  and perhaps the descriptions of your abilities are
  a misinterpretation of carnival wizardry.
  So I had to test it myself. I&#39;m quite impressed.&quot;

  ?P
  Ivex frowns. &quot;But you &lt;em&gt;attacked&lt;/em&gt; me.
  Is there not some friendlier way of testing me?&quot;
  
  ?P
  Nero replies, &quot;Superb Itch is a harmless little spell,
  as I&#39;m sure you know.&quot;
&lt;&lt;/if&gt;&gt;

?P
&quot;&lt;em&gt;Harmless&lt;/em&gt;.&quot; The panther seems to agree.
&lt;&lt;if $n_ivexNear&gt;&gt;
  He bares his teeth in a grin that does not reassure the wolf.

&lt;&lt;else&gt;&gt;
  He approaches with a bared-teeth grin
  that does not reassure the wolf.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n1cn Harmless]]

&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="258" name="n1cn Charm Works" tags="mt-ready inclusion" position="2075,3175" size="100,100">&lt;&lt;nobr&gt;&gt;

&quot;Finally!&quot; says Ivex. &quot;...I mean, it&#39;s funny that all those idiot bounty hunters continue to fall into my traps. But I&#39;ve been trying to meet other types of people. You&#39;re not what I expected. Still, we all have to start somewhere, right?&quot;

?P
&lt;&lt;if $n_abused&gt;&gt;
  Nero is unsure what Ivex means by that.
  But considering the earlier rough treatment of the wolf&#39;s testicles,
  it seems prudent to grin heartily anyway.
&lt;&lt;elseif $n_naked&gt;&gt;
  Nero gives Ivex a cool smile,
  and tries to project the idea that being bound and naked
  on a cross is just an ordinary day&#39;s adventure.
  Nothing to worry about.
&lt;&lt;else&gt;&gt;
  It&#39;s not clear what response is appropriate for that nonsense,
  so Nero smiles and shakes his head in a friendly way.
&lt;&lt;/if&gt;&gt;

?P
Ivex grins back. &quot;Now that you&#39;ve found me, what did you have in mind?&quot;

?P
&lt;ul class=actions&gt;
  &lt;&lt;mtl [[n1cn Recruit 1]]&gt;&gt;
    &lt;&lt;if $n_abused&gt;&gt;
      &quot;I&#39;m wondering if I might recruit you...&quot;
    &lt;&lt;else&gt;&gt;
      &quot;I&#39;m here to recruit you...&quot;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/mtl&gt;&gt;

  &lt;&lt;mtl [[n1cn Collab]]&gt;&gt;
    &lt;&lt;if $n_abused&gt;&gt;
      &quot;Perhaps we could collaborate?&quot;
    &lt;&lt;else&gt;&gt;
      &quot;Perhaps we could collaborate...&quot;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/mtl&gt;&gt;
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="259" name="n1cn Charm" tags="mt-ready" position="1950,3250" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_abused n_naked&gt;&gt;

&lt;&lt;if $n_abused&gt;&gt;
  &quot;Please, let me explain!&quot; says Nero with some anxiety.
  He quickly tries to construct a story that might
  appease the abusive panther.
  &lt;&lt;mf-please&gt;&gt;
    /* currently impossible */
    ?P
    The Sprite ?sprSpeaks in his ear,
    &lt;span class=sprite-q&gt;&quot;I don&#39;t understand what
    &lt;em&gt;let me explain&lt;/em&gt; means.
    You will have to explain it to me, ?sprHoldStop&quot;&lt;/span&gt;
    ?P
    Nero is momentarily distracted by the Sprite&#39;s response,
    but then shakes his head and continues.
  &lt;&lt;/mf-please&gt;&gt;
  &lt;&lt;set _pw = &quot;Please Let Me Explain&quot;&gt;&gt;
&lt;&lt;elseif $n_naked&gt;&gt;
  &quot;No, you misunderstand,&quot; says Nero with confidence.
  Nakedness is not helplessness.
  &lt;&lt;set _pw = &quot;No You Misunderstand&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
  &quot;Ah, I see the misunderstanding now,&quot; says Nero with a smile.
  &lt;&lt;set _pw = &quot;Ah I See The Misunderstanding Now&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;mf-pass _pw&gt;&gt;
  /* currently impossible */
  ?P
  Nero is momentarily distracted by the Sprite&#39;s response,
  but then shakes his head and continues.
&lt;&lt;/mf-pass&gt;&gt;

&quot;I wasn&#39;t &lt;em&gt;given&lt;/em&gt; your dossier. I &lt;em&gt;stole&lt;/em&gt; it,
from a bounty hunter
who was foolish enough to try to challenge me on a trading ship.
Long story short, I encouraged him into the ocean,
a few kilometers from shore.&quot;

?P
&lt;&lt;switch $n_magicPhase&gt;&gt;
&lt;&lt;case `MP_beforeCast`&gt;&gt;
  Ivex seems intrigued. Good.
  A plausible
  &lt;&lt;= $n_naked &amp;&amp; !$n_abused ? &quot;and nonsexual&quot; : &quot;&quot;&gt;&gt;
  story should relax the panther&#39;s guard,
  and then the wolf can escape and fulfill his commission
  with a minimum of fuss.

&lt;&lt;case `MP_triedMagic`&gt;&gt;
  Ivex seems intrigued. This stratagem is working.
  Spinning an enticing
  &lt;&lt;= $n_naked &amp;&amp; !$n_abused ? &quot;but completely un-erotic&quot; : &quot;&quot;&gt;&gt;
  tale should distract the panther long enough
  for the wolf mage to find a flaw in the anti-magic field.

&lt;&lt;case `MP_wantDevice` `MP_wantName`&gt;&gt;
  Ivex seems intrigued and willing to listen to the wolf spin a fanciful
  tale. This should make it easier to speak some unnoticed instructions
  to the Sprite.

&lt;&lt;default&gt;&gt;
  Ivex seems intrigued. A little more deception,
  and soon the wolf will have the keys to the panther mage&#39;s kingdom.
&lt;&lt;/switch&gt;&gt;

?P
Nero continues. &quot;The ship&#39;s captain was kind enough to let me search
the bounty hunter&#39;s luggage, and among his papers I found your dossier.
It&#39;s astonishing. When I read about your feats, I knew I had to meet you.&quot;

?P
&lt;&lt;if $n_castItch&gt;&gt;
  &lt;&lt;include [[n1cn Charm Fails]]&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;include [[n1cn Charm Works]]&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $n_didSomeAction = true&gt;&gt;
&lt;&lt;set $n_banter = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="260" name="n1cn Collab" tags="mt-ready" position="2200,2875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;if $n_abused&gt;&gt;
  Nero hesitates before speaking. &quot;Perhaps we could collaborate?&quot;
  ?P
  That seems sufficiently neutral. Making a suggestion is a more delicate
  matter than spinning intriguing tales. Further elaboration can wait on
  Ivex&#39;s reaction, and then the lure can be tailored to
  the panther&#39;s desires.
  Especially since the panther mage
  seems to be quite the blowhard, with every gesture exposing
  the inner workings of his soul.
&lt;&lt;elseif $n_naked&gt;&gt;
  Nero pauses to find phrasing that will not invite lewd comment.
  &quot;Perhaps we could collaborate on a profitable business
  that I have in mind.&quot;

  ?P
  The panther&#39;s ear seems to twitch at the word &quot;business&quot;.
  Hopefully it isn&#39;t due to some erotic association of the word
  in the perverted mage&#39;s mind.
&lt;&lt;else&gt;&gt;
  Nero speaks with excitement. &quot;Perhaps we could collaborate on an
  exceptionally interesting commission that I&#39;m unable to accomplish
  by myself.&quot;

  ?P
  Tease and intrigue. The best stories are created with just suggestion,
  luring the prey with enough tasty bits to make them curious enough
  to follow a path, straight into the jaws of a trap.
&lt;&lt;/if&gt;&gt;

?P
Ivex tilts his head and stares at the bound wolf for a long moment.
&lt;&lt;if $n_ivexNear&gt;&gt;
  The panther then moves to the desk and picks up another paper.
  This one he reads silently.
&lt;&lt;else&gt;&gt;
  The panther then shifts his attention to another paper from the desk,
  which he picks up and reads, silently this time.
&lt;&lt;/if&gt;&gt;

?P
After a moment, he crumples up the paper and throws the wadded ball
straight at Nero&#39;s startled face. This wad of paper &lt;em&gt;also&lt;/em&gt;
bursts into flames,
but fortunately only after it bounces off the wolf&#39;s muzzle.

?P
Ivex laughs. &quot;I&#39;ll never cease to be amazed by the audacity of wolves.
Here you are,
&lt;&lt;if $n_magicPhase &gt;= MP_triedMagic&gt;&gt;
  a failure of a magician,
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $n_naked&gt;&gt;
  completely naked and helpless,
&lt;&lt;else&gt;&gt;
  completely helpless before me,
&lt;&lt;/if&gt;&gt;
and your first thought is that I might join you in a &lt;em&gt;business venture?&lt;/em&gt;&quot;

?P
[[Continue|n1cn Ivex Disdainful (1,1)]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="261" name="n1cn Con Game 1" tags="mt-ready" position="2575,3600" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused false&gt;&gt;
&lt;&lt;vi-ignore n_naked&gt;&gt;
&lt;&lt;vi-ignore-if n_mageSight n_naked&gt;&gt;

&quot;Because I knew you would say that,&quot; Nero responds with confidence.
His aim is to cultivate the panther&#39;s insecurities,
while also suggesting the wolf has a solution to them.

&lt;&lt;mf-pass &quot;Because I Knew You Would Say That&quot;&gt;&gt;
  ?P
  Nero shakes his head, then gestures at Ivex.
&lt;&lt;mf-else&gt;&gt;
  ?P
  Nero gestures with his head.
&lt;&lt;/mf-pass&gt;&gt;
&quot;Your belt.&quot;

?P
Ivex looks confused. &quot;My belt? What do you mean?&quot;
?P
The wolf smiles.
&quot;All your clothes are new and made of fine
&lt;&lt;= $n_mageSight ? &quot;enchanted&quot; : &quot;&quot;&gt;&gt;
material, except for your belt. It&#39;s clearly common leather,
&lt;&lt;= $n_mageSight ? &quot;lacking in magic,&quot; : &quot;&quot;&gt;&gt;
and several of its buckle holes show signs of wear,
which indicates that you&#39;ve been using the belt for many years
and adjusted it as you&#39;ve grown.&quot;
?P
The panther still seems confused, which is good. Nero continues,
&quot;All I mean to say is, when you&#39;re pretending to be something you&#39;re not,
you&#39;d best get every detail correct.&quot;
?P
Ivex growls, &quot;This is no pretense!&quot;
?P
Hah, it clearly is. Steering the panther will be easy.
?P
[[Continue|n1cn Con Game 2]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="262" name="n1cn Con Game 2" tags="mt-ready" position="2700,3600" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero laughs.
&lt;&lt;if $n_naked&gt;&gt;
  &quot;Look at what I&#39;m... what I was wearing earlier.
&lt;&lt;else&gt;&gt;
  &quot;Look at me.
&lt;&lt;/if&gt;&gt;
You think that I&#39;m a mage, correct?&quot;
?P
&quot;Hardly a powerful one. What of it?&quot;
?P
&quot;I know a few cantrips and have some magic devices,
but I&#39;m not a mage at all!&quot; Nero laughs again.
&quot;My primary skills are psychological. I&#39;m able to convince others,
even mages as powerful as you,
into believing that I&#39;m also a mage. But I&#39;m not!&quot;
?P
&quot;Really now.&quot; Ivex&#39;s ears are perked. &quot;What are you then?&quot;
?P
&quot;My detractors call me a thief.
I prefer the term, &lt;em&gt;opportunist&lt;/em&gt;.&quot;
The wolf smiles with all his teeth.
&quot;I&#39;m nothing as common as a pickpocket.
I lead a small group of extraordinarily talented individuals
who specialize in schemes that relieve clients of their excess wealth,
without them ever realizing it. Many of them even thank us for
helping to protect their assets.&quot;
?P
Ivex seems quite hooked now.
He asks, &quot;And what does that have to do with me?&quot;
?P
Time to poke at the panther&#39;s feelings of inadequacy.
&quot;Your room here is impressive, but don&#39;t you find it a little... small?&quot;
?P
The response is quick. &quot;It&#39;s as large as it needs to be.&quot;
?P
&quot;Of course, of course. But, you could have much better.&quot;
?P
&quot;Better, how?&quot;
?P
&quot;The best mages in the land all live in fantastic towers.&quot;
?P
The panther chuckles.
&quot;So perhaps I could have a mage tower of my own. With your help?&quot;
?P
&quot;You said it, not me.&quot; The trap is set. Will Ivex take the bait?
?P
[[Continue|n1cn Con Game 3]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="263" name="n1cn Con Game 3" tags="mt-ready" position="2825,3600" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Ivex tilts his head and stares at the
&lt;&lt;= $n_naked ? &quot;naked&quot; : &quot;bound&quot;&gt;&gt;
wolf for a long moment.
?P
&quot;That is an interesting idea you&#39;ve presented to me.&quot;
&lt;&lt;if !$n_ivexNear&gt;&gt;
  He moves close to the wolf and crouches down, placing
&lt;&lt;else&gt;&gt;
  He crouches down and places
&lt;&lt;/if&gt;&gt;
one hand on the buckle of an ankle strap.
?P
The panther continues. &quot;I was certain you were a mage.
&lt;&lt;if $n_magicPhase &gt; MP_beforeCast || $n_mageSight&gt;&gt;
  Your costume and pathetic attempt at magic were very convincing.
&lt;&lt;else&gt;&gt;
  Your costume and its accessories
  &lt;&lt;= $n_naked ? &quot;were&quot; : &quot;are&quot;&gt;&gt;
  very convincing.
&lt;&lt;/if&gt;&gt;
But what you&#39;re telling me now...
poses a problem.&quot;
?P
He toys with the buckle, as if considering whether
to release it or not. &quot;I&#39;m not so convinced that you&#39;re a thief.&quot;
?P
Nero interjects. &quot;Please. Call me an opportunist.&quot;

&lt;&lt;mf-please&gt;&gt;
  ?P
  The Sprite ?sprSpeaks in Nero&#39;s ear,
  &lt;span class=sprite-q&gt;&quot;Okay! I will remember to call you
  &lt;&lt;run $n_opportunist = true&gt;&gt;
  ?masterN
  &lt;&lt;run $n_opportunist = false&gt;&gt;
  instead of ?masterN,
  &lt;&lt;run $n_opportunist = true&gt;&gt;
  ?sprHoldStop&quot;&lt;/span&gt;
  Nero shakes his head at that nonsense.
&lt;&lt;/mf-please&gt;&gt;

?P
Ivex looks up at the wolf.
The panther has a feral grin that does not seem at
all like the face of a friendly new recruit.
Nero becomes worried.
&lt;em&gt;Did I make a mistake? Can I fix it?&lt;/em&gt;
?P
[[Continue|n1cn Con Game 4]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="264" name="n1cn Con Game 4" tags="mt-ready big-mood" position="2950,3600" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

The panther moves his hand away from the ankle buckle
and reaches for
&lt;&lt;if $n_naked&gt;&gt;
  the wolf&#39;s naked crotch. Ivex grabs one of the wolf&#39;s balls and
&lt;&lt;else&gt;&gt;
  the wolf&#39;s crotch. Ivex digs into the cloth of the robe
  to grab one of the wolf&#39;s balls, then
&lt;&lt;/if&gt;&gt;
gives it a sudden squeeze. Pain fills the captive ball and
radiates into Nero&#39;s gut.
?P
The wolf stifles a yelp. &quot;Please! I can prove it!&quot;
&lt;&lt;mf-please&gt;&gt;
  ?P
  The Sprite ?sprSpeaks in Nero&#39;s ear,
  &lt;span class=sprite-q&gt;&quot;You don&#39;t have to prove anything to me, ?master
  I will always believe you, ?sprHoldStop&quot;&lt;/span&gt;
&lt;&lt;/mf-please&gt;&gt;
?P
Ivex chuckles. &quot;I&#39;m sure you can.&quot; He stands up with the help of his grasp
on the wolf&#39;s ball, pulling the wolf&#39;s nutsack down painfully tight.
The pressure on his ball becomes a rope of agony that connects to
a knot deep within the wolf&#39;s gut. Nero grits his teeth and whines.
?P
The panther leans close and stares into the wolf&#39;s eyes.
&quot;The fascinating thing about proficient liars is one can never be certain
when the liar stops lying and starts telling the truth.&quot;
?P
Ivex suddenly smashes a fist into the wolf&#39;s other ball, twice.
Nero screams.
It&#39;s not the worst pain the wolf has ever experienced,
but it &lt;em&gt;is&lt;/em&gt; the worst
his &lt;em&gt;balls&lt;/em&gt; have experienced.
Sharp pain in the punched ball
becomes aching throbs to match the other,
and tentacles of anguish thrust upward to take root in his body.
?P
Ivex waits for the scream to subside, then releases his grasp
of the wolf&#39;s crotch.
The panther shakes himself all over and exhales a contented sigh.
&quot;Still,&quot; he says, &quot;I believe it may be possible to peel away all the lies
and find a few real truths inside.
I suspect it won&#39;t be easy process, and it may take some time.
But we&#39;re not in any rush, are we?&quot;
?P
Nero is frozen in anxious racing thoughts. He doesn&#39;t have a plan.
He doesn&#39;t know how to respond.
He shakes his head, nods, but then shakes his head again.
?P
[[Continue|n1cx Start Candle 1]]

&lt;&lt;set $n_abused = true&gt;&gt;
&lt;&lt;set $n_thief = true&gt;&gt;
&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="265" name="n1cn First Action (4,3)" tags="mt-ready" position="1825,3250" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_abused n_naked&gt;&gt;

/* If timing is adjusted to allow wantTouch before receptive,
   then several &quot;ask ivex&quot; passages need to be revised. */
&lt;&lt;em-assert $n_magicPhase &lt; MP_wantTouch&gt;&gt;

&lt;&lt;n1-patience 4 3&gt;&gt;
  Ivex (the Magnificent) speaks. &quot;Again I ask. Who sent you?&quot;
&lt;&lt;n1-remind&gt;&gt;
  Ivex (the Magnificent) has asked, &quot;Who sent you?&quot;
&lt;&lt;n1-repeat&gt;&gt;
  Ivex (the Magnificent) twitches an ear.
  &quot;Again I ask. Who sent you?&quot;
&lt;&lt;n1-warn&gt;&gt;
  Ivex (the Magnificent) snarls. &quot;Again I ask! Who sent you?&quot;
&lt;&lt;n1-insist&gt;&gt;
  Ivex (the Magnificent) snaps his cape and speaks with anger.
  &quot;Again I ask! Who sent you!&quot;
&lt;&lt;/n1-patience&gt;&gt;

&lt;&lt;vi-always n_ivexNear false&gt;&gt;
&lt;&lt;set $n_ivexContext = IC_distant&gt;&gt;

?P
&lt;&lt;include &quot;n1x Actions&quot;&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;em-assert !$n_subby &amp;&amp; !$n_tough&gt;&gt;

  &lt;&lt;mtl [[n1cn Charm]]&gt;&gt;
    &lt;&lt;if $n_abused&gt;&gt;
      &quot;Please, let me explain!&quot;
    &lt;&lt;elseif $n_naked&gt;&gt;
      Speak firmly, &quot;No, you misunderstand...&quot;
    &lt;&lt;else&gt;&gt;
      Speak lightly, &quot;Ah, I see the misunderstanding...&quot;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/mtl&gt;&gt;

  &lt;&lt;mtl [[n1cn Rebuff]] &quot;//avoid&quot;&gt;&gt;
    &lt;&lt;if $n_abused&gt;&gt;
      Growl softly at Ivex.
    &lt;&lt;elseif $n_naked&gt;&gt;
      Snarl contemptuously at Ivex.
    &lt;&lt;else&gt;&gt;
      Rebuff Ivex with a growl.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/mtl&gt;&gt;

  $n_magicAction
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="266" name="n1cn Glitched Guild 1" tags="mt-ready" position="2725,3775" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_naked&gt;&gt;

Ivex smirks. &quot;Well, you&#39;re clearly a minion of some sort.&quot;

?P
&lt;&lt;if $n_abused&gt;&gt;
  Nero nods with a tinge of embarrassment.
&lt;&lt;else&gt;&gt;
  Nero feels slightly offended, but nods anyway.
&lt;&lt;/if&gt;&gt;

?P
Ivex laughs. &quot;But I do not believe your tale of a secret guild of mages.
There is &lt;em&gt;some&lt;/em&gt; secret power at work.
I do not understand what it has done.
But if you are happily talking to me about a secret guild of mages,
it&#39;s certainly &lt;em&gt;not&lt;/em&gt; that.&quot;

?P
Nero is confused by the panther&#39;s logic, or lack thereof.
&quot;I&#39;m a &lt;em&gt;trusted&lt;/em&gt; messenger,
and they have told me to invite you into their secrets.&quot;

?P
&quot;Of course! Of course. And you keep many secrets, I&#39;m sure.
But right now, I&#39;m most curious about a secret you have that
I do not think you can tell me. It&#39;s an interesting puzzle.&quot;

?P
The panther starts pacing and muttering to himself.

?P
Nero smiles. This conversation is not going the way he expected,
but it seems to be heading in a favorable direction anyway.
He should have plenty of time now to figure out how to escape.

?P
[[Continue|n1cn Glitched Guild 2]]

&lt;&lt;run
  delete $n_ivexNear;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="267" name="n1cn Glitched Guild 2" tags="mt-ready" position="2850,3775" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_naked&gt;&gt;

Ivex seems to come to a decision. He approaches the
&lt;&lt;if $n_naked&gt;&gt;
  naked wolf and lightly grasps one of the wolf&#39;s testicles.
&lt;&lt;else&gt;&gt;
  bound wolf and grabs the wolf&#39;s crotch, digging fingers
  into the robe to lightly grasp one of the wolf&#39;s balls.
&lt;&lt;/if&gt;&gt;

?P
Nero cringes from the
&lt;&lt;= $n_abused ? &quot;reminder of pain.&quot; : &quot;unexpected assault.&quot;&gt;&gt;
&quot;Wait! The secret council will reject you if
you damage their messenger!&quot;

?P
The panther laughs.
&quot;I doubt that your... secret council of mages, if it exists,
can offer me a secret more interesting than the one
I have in front of me right now.&quot;

?P
He starts lightly tapping the wolf&#39;s crotch with the knuckles of
his other paw. It does not hurt, but Nero can&#39;t help wincing anyway.

?P
Ivex licks his lips. &quot;You clearly do have a reason for stumbling
into my trap. And maybe that reason is the... secret guild of mages.
I&#39;m sure you&#39;ll be happy to tell me that story with a little...
encouragement.&quot;

?P
He slams a fist into Nero&#39;s crotch.
The wolf gasps, and then whines when the fist strikes his balls again.

?P
&quot;Please,&quot; says Nero. &quot;I will tell you everything!&quot;

&lt;&lt;mf-please&gt;&gt;
  ?P
  The Sprite ?sprSpeaks in the wolf&#39;s ear,
  &lt;span class=sprite-q&gt;&quot;Thank you, but I already know
  everything, ?master&quot;&lt;/span&gt;
&lt;&lt;/mf-please&gt;&gt;

?P
Ivex chuckles. &quot;Of course. But what I want to know is
the thing that you &lt;em&gt;cannot&lt;/em&gt; tell me.
I do not know any reliable way of finding that out.
But I&#39;ve had an amusing thought.
If I can... &lt;em&gt;convince&lt;/em&gt;
you to tell me every truth or lie that you are &lt;em&gt;able&lt;/em&gt; to tell,
I may see the shadow of the thing that you cannot.&quot;

?P
The panther makes his light grasp of the wolf&#39;s
ball into a tight fist, squeezing and pulling
until the wolf&#39;s breath becomes rapid rasps.

?P
Ivex releases his hold with a laugh.
&quot;This will probably take some time, but I am in no rush,
and I expect to enjoy the process. You probably will not.&quot;

?P
Nero&#39;s mind is confusion. The panther is not making any sense!
Somehow, something the wolf said or did has put some strange idea
in Ivex&#39;s head. And the panther is now planning to use
torture to force the telling of lies?

?P
The wolf does not know how to navigate this hazard.
He shakes his head to try to dislodge the miserable thoughts that
are clouding his vision.

?P
[[Continue|n1cx Start Candle 1]]

&lt;&lt;set $n_abused = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="268" name="n1cn Harmless" tags="mt-ready" position="3100,3400" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_castItch true&gt;&gt;
&lt;&lt;vi-always n_naked true&gt;&gt;
&lt;&lt;vi-always n_ivexNear true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Ivex grabs the naked wolf&#39;s balls in one hand and
makes a fist with the other.

?P
&lt;&lt;if $n_abused&gt;&gt;
  Nero shouts, &quot;Wait!&quot;

  ?P
  The punch lands before the wolf can say anything else.
  All the words he was preparing in his mind are lost in a whine.

  ?P
  Ivex says, &quot;As I&#39;m sure you&#39;ve noticed.&quot; He lands another punch.
  &quot;These strikes to your balls are &lt;em&gt;also&lt;/em&gt; quite harmless.&quot;
  And another.
  &quot;Especially since they clearly have no effect on your ability
  to invent clever lies.&quot;

  ?P
  The panther finishes that sentence with a crushing strike that
  also pulls the wolf&#39;s ballsack tight. Nero screams for a moment,
  then pants rapid breaths as the pain
  in his balls fights the nausea in his gut.

  ?P
  Ivex snorts. &quot;&lt;em&gt;Harmless&lt;/em&gt;.&quot;
  He slaps the wolf&#39;s balls
  firmly with a palm, then releases his grasp. The panther
  stares like a thief who&#39;s found unexpected treasure.
  Nero trembles in his bonds and looks away.

&lt;&lt;else&gt;&gt;

  Nero is startled by the sudden aggression. He says,
  &lt;span class=nobr&gt;&quot;Wait&amp;mdash;&quot;&lt;/span&gt;
  but the rest of the sentence disappears in a gasp when the fist
  strikes his balls.

  ?P
  The pain is excruciating and climbs into his gut, filling it with
  nausea. He says, &quot;Wait!&quot; again, and another punch lands again.
  He gasps and writhes in his bonds, and the wolf can&#39;t help pulling
  against his nuts held tight in the panther&#39;s paw.
  The unnatural stretching is not painful in the same way as
  the punches, but it greatly increases the nausea.
  
  ?P
  When the wolf regains control of his reflexes and his breath,
  he speaks again,
  &lt;span class=nobr&gt;&quot;Please&amp;mdash;&quot;&lt;/span&gt;
  and the panther interrupts
  by smashing his fist into the wolf&#39;s nuts twice.

  ?P
  It takes a full minute for Nero to recover again.
  This time he keeps his mouth shut.

  &lt;&lt;mf-please&gt;&gt;
    ?P
    The Sprite ?says,
    &lt;span class=sprite-q&gt;&quot;I&#39;ve finished doing the nothing that
    you asked me to do, ?sprHoldStop&quot;&lt;/span&gt;
  &lt;&lt;/mf-please&gt;&gt;

  ?P
  When it&#39;s clear that the wolf will not speak. Ivex grins and says,
  &quot;This is &lt;em&gt;also&lt;/em&gt; harmless. It&#39;s remarkable how much force these
  delicate body parts can take without becoming damaged.&quot;
  
  ?P
  The panther gives the furry sack a light slap with his palm.
  &quot;See? They&#39;re still perfectly fine.&quot;

  ?P
  Ivex makes a fist again and stares the wolf in the eyes.
  Nero&#39;s attention flicks rapidly back and forth between the
  fist and the panther&#39;s face. Nero wants to say something,
  but he knows that speaking will &lt;em&gt;definitely&lt;/em&gt; bring another punch.
  He involuntarily whines.

  ?P
  Ivex laughs and releases his grasp of the wolf&#39;s balls.
  &quot;It&#39;s my favorite prank. I think it&#39;s pretty funny.
  Don&#39;t you agree?&quot;

  ?P
  Nero nods, then shakes his head. His mind is confusion.
  He does not know what to do next.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n1cx Start Candle 1]]

&lt;&lt;set $n_abused = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="269" name="n1cn Ivex Desc" tags="mt-ready" position="1450,3150" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  &lt;&lt;vi-ignore-if n_abused n_naked&gt;&gt;
  &lt;&lt;em-assert !$n_abused || !$n_naked&gt;&gt;
  &lt;&lt;em-assert $n_magicPhase &lt;= MP_triedMagic&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Ivex is a large black panther, unusually beefy for the species. Panthers tend to be smaller felines, and they&#39;re known more for grace than strength. They make better acrobats than fighters. And mages are typically bookish children who grow up to become awkward weeds in most social situations.

?P
But this particular panther mage looks like a knight champion, the type of person with a casual might and charisma that drives soldiers to victory and lovers to his feet.

?P
Or he could be, if he dressed better.
&lt;&lt;if $n_naked&gt;&gt;
  Unlike the pocket-filled robe that Nero had been wearing,
&lt;&lt;else&gt;&gt;
  Unlike Nero&#39;s own pocket-filled robe,
&lt;&lt;/if&gt;&gt;
which is the professional attire of spellcasters in the civilized world, the panther mage has opted for mundane clothes that resemble the facile fashion of a used cart merchant, overshadowed by a large red cape that belongs in a comic operetta. Gaudy rings adorn all the wrong fingers with mismatched gems, and the crowning crime of style is the clasp of the cape, which has an absurdly large gem emitting a magenta glow that does no favors to the panther&#39;s black fur.

?P
It all feels like a poor person&#39;s idea of what a rich person would wear.
Not that Nero would ever tell that to his
&lt;&lt;if $n_abused&gt;&gt;
  captor.

  ?P
  Especially since Nero has no interest in suffering another blow to his balls.

&lt;&lt;elseif $n_naked&gt;&gt;
  captor.

  ?P
  Especially since Nero is himself completely undressed at the moment.

&lt;&lt;else&gt;&gt;
  captor, of course.
&lt;&lt;/if&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_Ivex&gt;&gt;
  [[Return|n1cn Ivex Intro 1]]

  &lt;&lt;set $n_ivexDescVisited = true&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="270" name="n1cn Ivex Disdainful (1,1)" tags="mt-ready" position="2325,2825" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_naked&gt;&gt;

&lt;&lt;n1-patience 1 1&gt;&gt;
&lt;&lt;n1-warn&gt;&gt;
  /* If timing is adjusted to allow wantTouch before receptive,
  then several &quot;ask ivex&quot; passages need to be revised. */
  &lt;&lt;em-assert $n_magicPhase &lt; MP_wantTouch&gt;&gt;

  Ivex sneers. &quot;Do you think you&#39;re my equal?&quot;
&lt;&lt;n1-insist&gt;&gt;
  Ivex growls and asks again,
  &quot;Why would I join &lt;em&gt;you&lt;/em&gt; in a business venture?
  Do you think you&#39;re my equal?&quot;
  His tail is lashing back and forth.
&lt;&lt;/n1-patience&gt;&gt;

&lt;&lt;vi-always n_ivexNear false&gt;&gt;
&lt;&lt;set $n_ivexContext = IC_distant&gt;&gt;

?P
&lt;&lt;include &quot;n1x Actions&quot;&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;mtl [[n1cn Apprentice]]&gt;&gt;
    &lt;&lt;if $n_abused&gt;&gt;
      &quot;No, of course not!&quot;
    &lt;&lt;else&gt;&gt;
      &quot;Of course not...&quot;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/mtl&gt;&gt;

  &lt;&lt;mtl-if !$n_abused [[n1cn Reject Collab 1]] &quot;too anxious&quot;&gt;&gt;
    &quot;Would you prefer a 60% share?&quot;
  &lt;&lt;/mtl-if&gt;&gt;

  &lt;&lt;mtl-if $n_abused [[n1cn Reject Appeasement]] &quot;not anxious&quot;&gt;&gt;
    &quot;You can have 80%!&quot;
  &lt;&lt;/mtl-if&gt;&gt;

  $n_magicAction
&lt;/ul&gt;

&lt;&lt;set $n_afterAttack = &quot;&lt;&lt;mta &#39;n1cx Start Candle 1&#39;&gt;&gt;Continue&lt;&lt;/mta&gt;&gt;&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="271" name="n1cn Ivex Intro 1" tags="mt-ready" position="1450,3300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_abused n_naked&gt;&gt;
&lt;&lt;em-assert !$n_abused || !$n_naked&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

Ivex (the Magnificent)
&lt;&lt;= $n_abused ? &quot;thankfully&quot; : &quot;&quot;&gt;&gt;
&lt;&lt;= $n_ivexDescVisited ? &quot;has moved&quot; : &quot;moves&quot;&gt;&gt;
away from the
&lt;&lt;if $n_abused&gt;&gt;
  bound wolf&#39;s abused balls,
&lt;&lt;elseif $n_naked&gt;&gt;
  bound, naked wolf,
&lt;&lt;else&gt;&gt;
  bound wolf,
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $n_ivexDescVisited&gt;&gt;
  and he&#39;s now settled at
&lt;&lt;else&gt;&gt;
  then settles against
&lt;&lt;/if&gt;&gt;
the edge of a cluttered desk.

?P
He&#39;s a
&lt;&lt;mt-seen $kn_Ivex&gt;&gt;
  &lt;&lt;tran-cut [[pretentiously dressed black panther|n1cn Ivex Desc]]&gt;&gt;,
&lt;&lt;/mt-seen&gt;&gt;
larger than Nero expected from the dossier.
But the images in the dossier come from school portraits
that were created several years ago,
so it isn&#39;t too surprising that the panther has grown a bit since then.

?P
Ivex speaks. &quot;Let me make a proposal.&quot;
&lt;&lt;if $n_abused&gt;&gt;
  The panther has a grin like a child unwrapping a present.
&lt;&lt;elseif $n_naked&gt;&gt;
  The tip of the panther&#39;s tail twitches with excitement.
&lt;&lt;else&gt;&gt;
  ?P
  Hopefully not a &lt;em&gt;marriage&lt;/em&gt; proposal.
  ?P
&lt;&lt;/if&gt;&gt;
&quot;We can do this the easy way, or the hard way.
I really hope you make the right choice.&quot;

?P
&lt;&lt;if $n_abused&gt;&gt;
  The condition of Nero&#39;s balls leads him to suspect that Ivex would prefer
  the hard way.
&lt;&lt;elseif $n_naked&gt;&gt;
  The naked wolf shivers in the chill air and avoids the
  panther&#39;s intense stare.
&lt;&lt;else&gt;&gt;
  As if there were such a thing as a right choice
  in this absurd situation.
&lt;&lt;/if&gt;&gt;

?P
&quot;Tell me,&quot; Ivex asks. &quot;Who sent you?&quot;

?P
&lt;&lt;if $n_abused&gt;&gt;
  Not an unexpected question.
  One that Nero certainly doesn&#39;t want to answer truthfully,
  no matter the torture inflicted on him.
  Spinning a plausible lie might take some finesse.
  Nero prepares his opening gambit.
&lt;&lt;elseif $n_naked&gt;&gt;
  Nero tries to gather what dignity he can in his involuntarily exposed state,
  and he prepares his opening gambit.
&lt;&lt;else&gt;&gt;
  Nero&#39;s quick wits have often helped him to escape
  predicaments more perilous than this.
  He prepares his opening gambit.
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;mtl [[n1cn Ivex Intro 2]]&gt;&gt;
    &quot;There must be some mistake...&quot;
  &lt;&lt;/mtl&gt;&gt;
&lt;/ul&gt;

&lt;&lt;run
  delete $n_ivexNear;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="272" name="n1cn Ivex Intro 2" tags="mt-ready" position="1575,3300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_abused n_naked&gt;&gt;
&lt;&lt;em-assert !$n_abused || !$n_naked&gt;&gt;

&quot;There must be some mistake,&quot;
&lt;&lt;if $n_abused&gt;&gt;
  says the wolf, as he tries unsuccessfully to use his
  twitching tail to shelter his aching balls.
&lt;&lt;elseif $n_naked&gt;&gt;
  says the wolf, as he tries unsuccessfully to use his
  bushy tail to cover his naked crotch.
&lt;&lt;else&gt;&gt;
  says Nero.
&lt;&lt;/if&gt;&gt;
&quot;I don&#39;t have any idea what you&#39;re talking about.&quot;
&lt;&lt;/nobr&gt;&gt;

The panther flattens his ears and snarls. &quot;Don&#39;t try to play dumb with me!&quot; He grabs a sheet of paper from the desk. &quot;I found this in your satchel.&quot;

He raises the paper and reads from it. &quot;Ivex Darkshadow. Probably not his birth name. No documentation prior to his enrollment at Ransamaran Ivory on a merit scholarship. Expelled in his second year for anathema. Details sealed and unavailable. Believed to have unusual magic abilities. Possibly necromantic. Wanted by several jurisdictions in connection with... &lt;span class=nobr&gt;&lt;em&gt;et cetera&lt;/em&gt;...&quot;&lt;/span&gt;

Ivex throws the paper into the air and makes a gesture, causing it to burst into flames.

&quot;It&#39;s all pretty spectacular,&quot; says the panther. &quot;I&#39;m truly flattered. But it isn&#39;t the least bit accurate! I am not the simple criminal depicted by that warrant.&quot;

[[Continue|n1cn Ivex Intro 3]]</tw-passagedata><tw-passagedata pid="273" name="n1cn Ivex Intro 3" tags="mt-ready" position="1700,3300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_abused n_naked&gt;&gt;
&lt;&lt;em-assert !($n_abused &amp;&amp; $n_naked)&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

&lt;&lt;if $n_abused&gt;&gt;
  Nero mentally checks off one step in his strategic map.
  He of course did not expect Ivex to believe a tale of ignorance.
  But offering a small bit of resistance will make the lies more
  plausible when Ivex &quot;succeeds&quot; in forcing them out.
   ?P
  That is, if the panther
  &lt;&lt;= $n_abused ? &quot;&quot; : &quot;even&quot;&gt;&gt;
  manages to reach that point.
  The wolf is, after all, an accomplished mage,
  and there are plenty of paths to escape.
&lt;&lt;else&gt;&gt;
  &lt;&lt;if $n_antiMagicVisited&gt;&gt;
    Nero has mentally crossed off
  &lt;&lt;else&gt;&gt;
    Nero mentally crosses off
  &lt;&lt;/if&gt;&gt;
  one branch of actions from his strategic map.
  Feigning ignorance was a long shot, but it had been worth trying.
  ?P
  There are plenty of paths to victory. The wolf is, after all, an accomplished mage.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_magicPhase &gt;= MP_triedMagic&gt;&gt;
  &lt;&lt;if $n_naked&gt;&gt;
    His nakedness deprives him of several magical aids
    that were hidden in his robe, and the
    &lt;&lt;mt-seen $kn_AntiMagic&gt;&gt;
      &lt;&lt;tran-cut &quot;anti-magic field&quot; &quot;n1s Anti-magic 1&quot;&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    is an inconvenience. But
  &lt;&lt;else&gt;&gt;
    The
    &lt;&lt;mt-seen $kn_AntiMagic&gt;&gt;
      &lt;&lt;tran-cut &quot;anti-magic field&quot; &quot;n1s Anti-magic 1&quot;&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    adds some slight complications
    to his current endeavor, but
  &lt;&lt;/if&gt;&gt;
  countering anti-magic is one of Nero&#39;s specialties.
  He&#39;s confident that he can find a flaw in Ivex&#39;s construction
  and exploit it,
  &lt;&lt;if $n_abused&gt;&gt;
    and perhaps even get revenge for the distress to his balls.
  &lt;&lt;else&gt;&gt;
    when the time is right.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
  The bindings restricting the wolf&#39;s body are a
  &lt;&lt;= $n_abused ? &quot;complication&quot; : &quot;slight obstacle&quot;&gt;&gt;,
  preventing him from casting his best spells.
  &lt;&lt;if $n_naked&gt;&gt;
    And his nakedness robs him of several magical tools
    that are sewn into his robe.
  &lt;&lt;elseif $n_abused&gt;&gt;
    And his tender balls urge him to be cautious about
    actions that might antagonize his captor.
  &lt;&lt;/if&gt;&gt;
  But he still has several spells that he can use
  in this predicament, whenever the right opportunity presents itself.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;mta [[n1cn First Action (4,3)]]&gt;&gt;
  Continue
&lt;&lt;/mta&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="274" name="n1cn Ivex Offended (1,1)" tags="mt-ready" position="2450,3475" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_naked&gt;&gt;

&lt;&lt;vi-always n_ivexNear false&gt;&gt;
&lt;&lt;set $n_ivexContext = IC_distant&gt;&gt;

&lt;&lt;n1-patience 1 1&gt;&gt;
&lt;&lt;n1-warn&gt;&gt;
  /* If timing is adjusted to allow wantTouch before receptive,
  then several &quot;ask ivex&quot; passages need to be revised. */
  &lt;&lt;em-assert $n_magicPhase &lt; MP_wantTouch&gt;&gt;

  Ivex asks in a flat tone of voice,
  &quot;What makes you think I would accept you as my superior?&quot;
&lt;&lt;n1-insist&gt;&gt;
  Ivex snarls and says,
  &quot;I am not some stray kitten looking for a home.
  What makes you think that &lt;em&gt;you&lt;/em&gt; could ever
  be &lt;em&gt;my&lt;/em&gt; superior?&quot;
&lt;&lt;/n1-patience&gt;&gt;

?P
&lt;&lt;include &quot;n1x Actions&quot;&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;em-assert !$n_subby &amp;&amp; !$n_tough&gt;&gt;

  &lt;&lt;mtl-if $n_abused [[n1cn Support Group]] &quot;too confident&quot;&gt;&gt;
    &quot;No, that isn&#39;t what I meant!&quot;
  &lt;&lt;/mtl-if&gt;&gt;

  &lt;&lt;mtl [[n1cn Secret Guild]]&gt;&gt;
    &lt;&lt;if $n_abused&gt;&gt;
      &quot;Of course not! This isn&#39;t about me!&quot;
    &lt;&lt;else&gt;&gt;
      &quot;This isn&#39;t about me...&quot;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/mtl&gt;&gt;

  &lt;&lt;mtl-if !$n_abused [[n1cn Con Game 1]] &quot;not confident enough&quot;&gt;&gt;
    &quot;Because I knew you would say that...&quot;
  &lt;&lt;/mtl-if&gt;&gt;

  $n_magicAction
&lt;/ul&gt;

&lt;&lt;set $n_afterAttack = &quot;&lt;&lt;mta &#39;n1cx Start Candle 1&#39;&gt;&gt;Continue&lt;&lt;/mta&gt;&gt;&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="275" name="n1cn Rebuff" tags="mt-ready big-mood" position="1950,3475" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_abused n_naked&gt;&gt;
&lt;&lt;em-assert !$n_subby &amp;&amp; !$n_tough&gt;&gt;

&lt;&lt;if $n_abused&gt;&gt;
  Nero lets out a soft growl. His brutally abused balls argue against
  antagonizing his captor any further, but cooperation,
  or even the pretense of
  cooperation, is not likely to improve his situation.
  So the wolf sees no point in playing that game.
  ?P
  Ivex&#39;s ears momentarily flatten at the sudden growl,
  but they quickly perk back up as he smiles.

&lt;&lt;elseif $n_naked&gt;&gt;
  The wolf looses a savage, contemptuous snarl at the panther.
  Ivex&#39;s outrageous stripping of the wolf&#39;s clothes (and dignity),
  makes Nero unwilling to cooperate, or even pretend to cooperate.
  And in any case, he would not have much of a career if he
  betrayed his client&#39;s confidence.
  ?P
  Ivex&#39;s ears twitch at the sudden aggression, but
  a moment later his ears perk straight up.
  He smiles and gives his crotch
  a few quick rubs.

&lt;&lt;else&gt;&gt;
  Nero looses a full-throated growl at the panther mage.
  Ivex&#39;s creepy demeanor toward the restrained wolf makes Nero
  disinclined to cooperate, or even pretend to cooperate.
  And in any case, he would not have much of a career if he
  betrayed his client&#39;s confidence.
  ?P
  Ivex momentarily flinches at the sudden growl,
  but he quickly straightens and smiles.
&lt;&lt;/if&gt;&gt;

&quot;You&#39;re more fun than I expected a mage would be!&quot;

?P
&lt;&lt;if $n_abused&gt;&gt;
  The wolf&#39;s resolve falters a bit at that statement.
  But it quickly firms up again.
  Nero is certain he can provoke the panther into
  making a careless mistake.
  One mistake is all the wolf needs
  to complete his mission and escape.
  ?P
  And when he &lt;em&gt;does&lt;/em&gt; escape, he will remember this ordeal with pride,
  with the knowledge and conviction that he remained true to himself.
  Nero will &lt;em&gt;not&lt;/em&gt; cower for this bully of a panther.

&lt;&lt;else&gt;&gt;
  That statement seems ominous.
  Still, Nero thinks
  he can provoke the panther
  into making a careless mistake.
  One mistake is all the wolf needs,
  and then he can complete his mission and escape.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n1cx Start Candle 1]]

&lt;&lt;set $n_abused &amp;&amp; ($n_tough = true)&gt;&gt;
&lt;&lt;set $n_didSomeAction = true&gt;&gt;
&lt;&lt;set $n_stalling = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="276" name="n1cn Recruit 1" tags="mt-ready" position="2200,3525" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero makes his voice enigmatic and conspiratorial.
&lt;&lt;if $n_abused&gt;&gt;
  &quot;I&#39;m wondering if I might recruit you.&quot;
&lt;&lt;else&gt;&gt;
  &quot;I&#39;m here to recruit you.&quot;
&lt;&lt;/if&gt;&gt;
He&#39;s
&lt;&lt;= $n_abused || $n_naked ? &quot;acutely&quot; : &quot;&quot;&gt;&gt;
aware of how ridiculous that statement sounds
when spoken by a bound
&lt;&lt;= $n_naked ? &quot;and naked&quot; : &quot;&quot;&gt;&gt;
prisoner. In fact, he&#39;s counting on the absurdity to help sell the story.
&lt;&lt;if $n_abused&gt;&gt;
  ?P
  It&#39;s a risky gambit.
  &lt;&lt;if $n_castItch&gt;&gt;
    Ivex seems quite easily provoked.
    But cringing will not help this tale.
  &lt;&lt;else&gt;&gt;
    But Nero has been carefully watching Ivex&#39;s mannerisms
    for insight into his character.
    The panther is a bully, and a display of weakness
    is likely to invite further abuse.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
The wolf needs to present himself as relaxed and confident without
bravado.

?P
If he does it right, a tiny bit of doubt will enter
the panther&#39;s mind. Maybe not even conscious doubt. Ivex should
feel a lurking apprehension about whether he really is in
control of this situation.
?P
&lt;&lt;if $n_castItch&gt;&gt;
  The panther has already shown several signs of insecurity.
  Perhaps he&#39;s
&lt;&lt;else&gt;&gt;
  And if the panther responds to that anxiety,
  his actions will reveal &lt;em&gt;what&lt;/em&gt;
  his anxieties are.
  Perhaps Ivex is
&lt;&lt;/if&gt;&gt;
lashing out against a cruel or inadequate father.
Does he have a yearning for a leader he can trust?
?P
Nero intends to probe the inner workings of the panther&#39;s soul,
and exploit any flaws he can find.

?P
[[Continue|n1cn Recruit 2]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="277" name="n1cn Recruit 2" tags="mt-ready" position="2325,3525" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;cv-try n_magicPhase `MP_beforeCast` `MP_triedMagic`&gt;&gt;

&lt;&lt;if $n_ivexNear&gt;&gt;
  Ivex takes a few steps back to look up and down the length of
  the bound wolf. He
&lt;&lt;else&gt;&gt;
  Ivex
&lt;&lt;/if&gt;&gt;

&lt;&lt;if MP_beforeCast === $n_magicPhase&gt;&gt;
  snorts. &quot;&lt;em&gt;Recruit&lt;/em&gt; me?
  That&#39;s a bold statement for
  &lt;&lt;if $n_naked&gt;&gt;
    a naked and helpless wolf.
  &lt;&lt;else&gt;&gt;
    a helplessly trapped wolf.
  &lt;&lt;/if&gt;&gt;
  Do you not understand the situation you&#39;re in?&quot;
  ?P
  He raises an arm.
  &quot;&lt;em&gt;I&lt;/em&gt; have all the power here, and you have demonstrated none.&quot;

&lt;&lt;else&gt;&gt;
  laughs. &quot;&lt;em&gt;You?&lt;/em&gt;
  &lt;&lt;if $n_naked&gt;&gt;
    A naked and pathetic failure of a mage,
  &lt;&lt;else&gt;&gt;
    A pathetic failure of a mage, helpless and trapped on my cross,
  &lt;&lt;/if&gt;&gt;
  recruiting &lt;em&gt;me?&lt;/em&gt;
  Do you not understand where you are?&quot;
  ?P
  He raises an arm.
  &quot;&lt;em&gt;I&#39;m&lt;/em&gt; the one who has all the power here.&quot;
&lt;&lt;/if&gt;&gt;

?P
The panther mage makes a gesture.

?P
&lt;&lt;if $n_coinsThrown&gt;&gt;
  /* currently not possible, but might become possible if
     timing is adjusted so that coin-ask can happen earlier. */
  Another coin rises from the stack in the bookcase
&lt;&lt;elseif $n_bookcasesViewed&gt;&gt;
  A coin rises from the stack in the bookcase
&lt;&lt;else&gt;&gt;
  A small metallic object rises from a bookcase
&lt;&lt;/if&gt;&gt;
and flies rapidly across the room, hitting
&lt;&lt;if $n_naked&gt;&gt;
  Nero in the balls.
&lt;&lt;else&gt;&gt;
  Nero&#39;s robe at his crotch.
&lt;&lt;/if&gt;&gt;
The impact is barely more than a tap,
but the wolf twists his torso and grimaces
&lt;&lt;if $n_abused&gt;&gt;
  anyway from the reminder of Ivex&#39;s earlier punches.
&lt;&lt;else&gt;&gt;
  anyway.
&lt;&lt;/if&gt;&gt;

?P
The &lt;&lt;= $n_coinsThrown || $n_bookcasesViewed ? &quot;coin&quot; : &quot;object&quot;&gt;&gt;
bounces off and falls to the floor
with a small clattering sound.
&lt;&lt;if $n_coinsThrown || $n_coinsViewed&gt;&gt;
  /* nothing */
&lt;&lt;elseif $n_bookcasesViewed&gt;&gt;
  It appears to have a hole in it.
&lt;&lt;else&gt;&gt;
  It appears to be a coin with a hole in it.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_castItch&gt;&gt;
  Nero is glad that the object was not something larger.
  And he&#39;s &lt;&lt;= $n_abused ? &quot;cautiously&quot; : &quot;secretly&quot;&gt;&gt; pleased
  by Ivex&#39;s response.
  The panther&#39;s earlier unhinged rant made it clear that
  feelings of inadequacy
  are a tender spot. The wolf only needs to touch that tender spot, gently,
  in just the right way, to nudge Ivex into making a mistake.

&lt;&lt;elseif $n_abused&gt;&gt;
  Nero is glad that &lt;em&gt;this&lt;/em&gt; bullying is not painful.
  Hostility and skepticism are to be expected,
  but the &lt;em&gt;intensity&lt;/em&gt; of Ivex&#39;s reaction
  is a sign that Nero has probed a tender spot.
  The wolf will have to tread carefully to calm the panther&#39;s defenses.

&lt;&lt;else&gt;&gt;
  Nero has clearly found a tender spot.
  He&#39;s glad that the panther did not throw something larger.
  Ivex&#39;s bluster is likely to be
  over-compensation for some deep feeling of failure of some sort.
  The wolf is confident he knows the right tune to lead this dance.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n1cn Ivex Offended (1,1)]]

&lt;&lt;run
  delete $n_ivexNear;
  $n_coinsThrown = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="278" name="n1cn Reject Appeasement" tags="mt-ready" position="2450,3025" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&quot;You can have 80%!&quot; says the wolf, a little too desperately.
He realizes it&#39;s the wrong thing to say as soon as he says it.
Fear of the abusive panther is clouding his judgment.

&lt;&lt;mf-pass &quot;You Can Have Eighty Percent&quot;&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
Ivex chuckles and seems to relax. He
&lt;&lt;if $n_ivexNear&gt;&gt;
  looks into the eyes of
&lt;&lt;else&gt;&gt;
  casually approaches
&lt;&lt;/if&gt;&gt;
his anxious victim.

?P
&quot;That&#39;s certainly an interesting offer,&quot; says the panther.
&lt;&lt;if $n_naked&gt;&gt;
  He reaches out and grasps the wolf&#39;s exposed testicles,
&lt;&lt;else&gt;&gt;
  He reaches through the cloth of the wolf&#39;s robe to grasp the wolf&#39;s testicles,
&lt;&lt;/if&gt;&gt;
which are still aching from their earlier abuse.
&quot;But I&#39;m wondering... Why should I settle for anything less than 100%?&quot;

?P
Nero&#39;s mind frantically bounces between possible responses.
He tries to read the panther&#39;s eyes, searching for some sign
that there&#39;s some way to avoid further torture to his balls.

?P
&lt;ul class=actions&gt;
  &lt;li&gt;[[`&quot;You can have 100%!&quot;`|n1cn 100 Percent]]&lt;/li&gt;
  &lt;li&gt;[[Snarl at the sadistic panther.|n1cn Zero Percent]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="279" name="n1cn Reject Collab 1" tags="mt-ready" position="2450,2850" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;if $n_naked&gt;&gt;
  &quot;Would you prefer a 60% share?&quot; the wolf asks awkwardly.
  He&#39;s well aware of the absurdity of trying to negotiate a
  business deal while completely naked and securely strapped
  to a cross.
  But seeing Ivex&#39;s response, learning his language of negotiation,
  will give the wolf insight into how to outwit his captor.

&lt;&lt;else&gt;&gt;
  &quot;Would you prefer a 60% share?&quot; asks the wolf.
  Not that he has decided what the collaborative venture will be, yet.
  Nero is focused on probing the panther&#39;s mind.
  Ivex&#39;s response to the offer, his language of negotiation,
  is information that will help the wolf outwit his captor.
&lt;&lt;/if&gt;&gt;

&lt;&lt;mf-pass &quot;Would You Prefer A Sixty Percent Share&quot;&gt;&gt;
  ?P
  Nero inwardly sighs at the Sprite&#39;s inability to
  understand the cadence of normal conversation.
&lt;&lt;/mf-pass&gt;&gt;

?P
The panther&#39;s ears are perked. &quot;A 60% share?&quot;
He speaks with an intrigued tone.
&quot;That&#39;s a generous concession.&quot;
?P
&lt;&lt;if $n_ivexNear&gt;&gt;
  He looks at the
&lt;&lt;else&gt;&gt;
  He approaches the
  &lt;&lt;= $n_naked ? &quot;naked&quot; : &quot;bound&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
wolf with a greedy glint in his eye.

?P
Ivex places his left hand on one of the leather straps binding the
wolf&#39;s right arm. &quot;But perhaps you could give me... a little more than that?&quot;

?P
&lt;ul class=actions&gt;
  &lt;&lt;mtl [[n1cn Reject Collab 2]]&gt;&gt;
    Smile and ask, &quot;What number sounds good to you?&quot;
  &lt;&lt;/mtl&gt;&gt;
&lt;/ul&gt;

&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="280" name="n1cn Reject Collab 2" tags="mt-ready big-mood" position="2575,2850" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero smiles and asks, &quot;What number
/* cspell:disable-next-line */
sooOOOWWW!&quot;
His question turns into a yowl.

?P
Ivex has smashed a fist into the wolf&#39;s
&lt;&lt;= $n_naked ? &quot;naked&quot; : &quot;&quot;&gt;&gt;
crotch!

?P
The initial pain was a surprising blow to Nero&#39;s left testicle,
a sharp strike that radiated into his abdomen,
leaving a feeling of ache and nausea deep in his gut
that has the wolf feeling like he should vomit.
Before Nero has a chance to catch his breath,
the fist smashes into his balls again!
This time he suppresses the howl by thrashing his head
and snapping his jaws shut, narrowly avoiding biting his own tongue.

?P
The panther is speaking.
Nero forces his agitated mind to pay attention to the words
being said.

?P
&quot;&amp;mdash;not understand the power I have here, a power that I&#39;ve
developed myself, without any help from any other mages or their
useless schools of magic.&quot; Ivex punctuates each phrase with
fast, light strikes to Nero&#39;s crotch. &quot;I &lt;em&gt;already&lt;/em&gt;
have more power than you have ever imagined!
I do not need to share anything with
anyone to attain anything more. If I &lt;em&gt;want&lt;/em&gt; something
that &lt;em&gt;you&lt;/em&gt; can provide, I will simply &lt;em&gt;take&lt;/em&gt; it!&quot;

?P
Nero struggles to focus his scattering thoughts.
He tries to plan out the next moves to make,
but the only thing he can think of,
the idea that keeps repeating in his head:
&lt;em&gt;whatever it takes
to stop Ivex from punching my nuts again.&lt;/em&gt;
A distant observer in the wolf&#39;s mind is disappointed
and shakes his head before fading away.

?P
[[Continue|n1cx Start Candle 1]]

&lt;&lt;set $n_abused = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="281" name="n1cn Secret Guild" tags="mt-ready big-mood" position="2575,3825" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_naked&gt;&gt;

&lt;&lt;if $n_abused&gt;&gt;
  &quot;Of course not!&quot; says Nero. &quot;This isn&#39;t about me!&quot;
  &lt;&lt;set _pw = &quot;Of Course Not&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
  &quot;This isn&#39;t about me,&quot; says Nero.
  &lt;&lt;set _pw = &quot;This Isn&#39;t About Me&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;mf-pass _pw&gt;&gt;
  ?P
  Nero is momentarily distracted by the Sprite, but he
  turns the stumble into a dramatic pause.
&lt;&lt;mf-else&gt;&gt;
  ?P
  He pauses to give his next statement dramatic weight.
&lt;&lt;/mf-pass&gt;&gt;
&quot;I&#39;m merely a messenger for a secret guild of mages that would be honored
to have you join their &lt;em&gt;inner&lt;/em&gt; council.&quot;

?P
&quot;A secret guild of mages.
&lt;&lt;if $n_glitched&gt;&gt;
  Interesting.&quot; Ivex speaks with curiosity.
  &quot;And does this... secret guild of mages have a name?&quot;
  ?P
  Nero was not prepared for that question.

&lt;&lt;else&gt;&gt;
  Really.&quot; Ivex speaks with contempt.
  &quot;And does this... secret guild of mages have a name?&quot;
  ?P
  Nero is
  &lt;&lt;= $n_abused ? &quot;&quot; : &quot;a little&quot;&gt;&gt;
  dismayed. He had hoped that the idea of arcane mysteries
  would be attractive enough for Ivex to take the bait without much
  questioning of the premise. The wolf will need to make the lure better
  somehow.
  ?P
&lt;&lt;/if&gt;&gt;

He stalls for time to think about it.
&quot;Yes... but... well...
I shouldn&#39;t tell you the name,
since it &lt;em&gt;is&lt;/em&gt; a secret guild.&quot;
?P
Ivex laughs, &quot;Of &lt;em&gt;course&lt;/em&gt; it is. I should have anticipated that
answer. And now I suppose you will continue to try to distract me
by teasing me with details of this... secret guild of mages?&quot;
?P
A little too close to the truth. The only response to that is to shrug
and remain silent. The secret guild (if it existed) would not beg for
attention, and if Ivex&#39;s disdain leads him to miss an amazing opportunity,
so be it.
?P
The silence continues for an uncomfortable length of time.
?P
And then it continues some more.
?P
The panther breaks the silence first, with another laugh.
His amusement hasn&#39;t diminished, but perhaps a note of doubt
has crept into it...
?P
&lt;&lt;if $n_glitched&gt;&gt;
  [[Continue|n1cn Glitched Guild 1]]
&lt;&lt;else&gt;&gt;
  [[Continue|n1cr Ivex Skeptical (4,3)]]
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $n_secretGuild = true&gt;&gt;
&lt;&lt;set if (!$n_glitched) {
  $n_ivexReceptive = true;
  $n_ivexWasReceptive = true;
}
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="282" name="n1cn Support Group" tags="mt-ready" position="2575,3450" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-always n_abused true&gt;&gt;

&quot;No, that isn&#39;t what I meant!&quot; Nero protests.
&quot;I&#39;m not asking you to become &lt;em&gt;anyone&#39;s&lt;/em&gt; underling!&quot;
He pauses and makes his voice tentative.
&quot;I&#39;m in a support group... for people like us,
and I think you&#39;d enjoy meeting some of the others.&quot;

&lt;&lt;mf-pass &quot;No That Isn&#39;t What I Meant&quot;&gt;&gt;
  /* currently impossible */
  ?P
  The wolf ignores the Sprite.
&lt;&lt;mf-else&gt;&gt;
  ?P
&lt;&lt;/mf-pass&gt;&gt;
Ivex does not seem appeased. The panther snarls.
&quot;What tedious nonsense. Stop trying to change the subject.
Tell me who sent you.&quot;
The panther
&lt;&lt;= $n_ivexNear ? &quot;&quot; : &quot;approaches and&quot;&gt;&gt;
aims a fist again at the wolf&#39;s crotch.

?P
Nero&#39;s mind scrambles to interrupt that action.
He blurts out, &quot;I killed my father!&quot;

?P
The non-sequitur works! Ivex stops his motion.
He stares at the &lt;&lt;= $n_naked ? &quot;naked&quot; : &quot;&quot;&gt;&gt;
wolf for a long moment, and then laughs.
&quot;Really! &lt;em&gt;You?&lt;/em&gt; Killed your father?
Did he die from disappointment?&quot;

?P
The wolf cringes and flattens his ears.
The embarrassment is of course a sham. Mostly.

?P
Nero keeps careful watch of the panther&#39;s arm,
still drawn back and ready to strike.
He replies quickly, &quot;No, that was Ferikin&#39;s father.
Ferikin is also in the support group.
Not everyone in our group has killed their father,
but yes, we are all disappointments.
And I Am No Longer Ashamed to Admit It!
It happened when I was only 11 years old.
My father never wanted me to become a mage,
but I practiced very hard on a firework spell,
and I thought that if I could
&lt;span class=nobr&gt;show&amp;mdash;&quot;&lt;/span&gt;

?P
Ivex smashes a knee into the wolf&#39;s &lt;&lt;= $n_naked ? &quot;naked&quot; : &quot;&quot;&gt;&gt; crotch.

?P
Nero gasps and writhes in his bonds. It feels like he can&#39;t breathe.
He pants and huffs for nearly a minute,
until his lungs are ready to supply steady air for speech again.
But he does not speak.
The look on Ivex&#39;s face, a smug sneer, makes the wolf stay quiet.

?P
&quot;Issue six, I believe it was?&quot; The panther chuckles
and uses his knuckles to make quick, light taps on the wolf&#39;s
&lt;&lt;= $n_naked ? &quot;exposed balls.&quot; : &quot;crotch.&quot;&gt;&gt;
The taps do not hurt, but Nero can&#39;t help wincing with every one.

?P
Ivex continues the drumming as he speaks.
&quot;Thrilling Tales of the Misfit Mages.
The character named Kerifin casts a firework spell
that accidentally burns down his mentor&#39;s house,
with his mentor in it,
and then spends the next three issues
crying about it to everyone he meets.&quot;

?P
Nero is shaken by the panther&#39;s savage treatment
of the wolf&#39;s balls.
And he&#39;s queasy at the thought of more
abuse yet to come.
But what disheartens him the most is Ivex&#39;s words,
the panther&#39;s clear contempt for the wolf&#39;s clumsy lie.

?P
[[Continue|n1cx Start Candle 1]]

&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="283" name="n1cn Zero Percent" tags="mt-ready big-mood" position="2575,3100" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero snarls at the sadistic panther. Ivex&#39;s absurd demand for 100%
has made it clear that no matter what the wolf says,
the panther will continue to press for more and more,
until he finds a point of resistance,
and use that resistance as an excuse for further punishment.

?P
There is no way for Nero to win this game.
So he resolves that
he will not debase himself here.
He will resist until he escapes,
so that he can look back on these
&lt;&lt;= $n_naked ? &quot;naked&quot; : &quot;&quot;&gt;&gt;
moments without shame.
The Nero in the future will remember that he remained true to himself,
no matter the tortures inflicted on him today.

?P
Ivex&#39;s response to the snarl is an excited giggle.
He raises his right arm to strike the wolf&#39;s balls again,
holds his fist plainly in sight,
and watches Nero&#39;s ears flatten and jaw clench.

?P
The panther releases his grasp of the wolf&#39;s balls
and steps away with a laugh.

?P
[[Continue|n1cx Start Candle 1]]

&lt;&lt;set $n_tough = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="284" name="n1cr Guild Name 1" tags="mt-ready" position="2850,3975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight n_naked&gt;&gt;

&quot;The guild&#39;s name...&quot;
&lt;&lt;mf-pass &quot;The Guild&#39;s Name&quot;&gt;&gt;
  ?P
  The wolf mentally kicks himself.
  ?P
&lt;&lt;/mf-pass&gt;&gt;
&lt;&lt;if $n_abused&gt;&gt;
  Nero has not thought of any tale
  that has any chance of convincing the hostile panther
  that the guild really does exist.
  But Ivex looks like he will not tolerate any more dramatic pauses,
  so the wolf will have to choose &lt;em&gt;something&lt;/em&gt; soon.
&lt;&lt;else&gt;&gt;
  Nero has no idea what tale he can tell about the
  imaginary guild that will be sufficiently convincing.
  He hopes that Ivex will interpret this hesitation
  as another dramatic pause,
  but the wolf can&#39;t stall for much longer.
&lt;&lt;/if&gt;&gt;

?P
Ivex snarls. &quot;You&#39;re such a disappointment. I really need to find better
locations for my traps.&quot;

?P
Nero suddenly remembers what Ivex said earlier about his traps.
&lt;em&gt;All those idiot bounty hunters&lt;/em&gt; that fell into them.
The wolf has a suspicion about &lt;em&gt;where&lt;/em&gt; those idiot bounty hunters
are from. Nero
&lt;&lt;= $n_abused ? &quot;anxiously&quot; : &quot;quickly&quot;&gt;&gt;
games out possibilities in his head,
and he reaches the conclusion:
Yes! It could work!

?P
He drops his voice to a reluctant mumble.
&quot;The Wayward Adventurers Guild.&quot;

?P
Ivex&#39;s immediate response is a laugh. &quot;The Wayward Adventurers Guild?
They&#39;re hardly a secret!&quot;

?P
Nero 
&lt;&lt;= $n_abused ? &quot;tries to calmly shake&quot; : &quot;calmly shakes&quot;&gt;&gt;
his head. Will the panther take the bait?

?P
Ivex says, &quot;You expect me to believe that a &lt;em&gt;secret&lt;/em&gt; guild of mages
would have the name that everyone associates with thick-headed...&quot;
His voice trails off. &quot;... low-rent... warriors. Hm.&quot;

?P
The panther starts pacing and muttering to himself. &quot;Was that...
No, of course not... But that would explain...&quot;

?P
Nero suppresses a tail wag. Rarely have his stratagems worked as well as this.
And he didn&#39;t even need to say more than three words to do it!


?P
[[Continue|n1cr Guild Name 2]]

&lt;&lt;run
  delete $n_ivexNear;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="285" name="n1cr Guild Name 2" tags="mt-ready" position="2975,3975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

The panther turns to face the
&lt;&lt;= $n_naked ? &quot;naked&quot; : &quot;bound&quot;&gt;&gt; wolf and asks,
&quot;Are you a member of that inner council you mentioned?&quot;
Before Nero has a chance to respond, Ivex answers himself.
&quot;No, of course not.
You&#39;re obviously a minion.
And you said you&#39;re just a messenger.&quot;

?P
&lt;&lt;if $n_abused&gt;&gt;
  Nero nods with a tinge of embarrassment.
&lt;&lt;else&gt;&gt;
  Nero feels slightly offended, but nods anyway.
&lt;&lt;/if&gt;&gt;

?P
Ivex laughs. &quot;All those adventurers... they were a &lt;em&gt;test!&lt;/em&gt;&quot;
His tail is lashing with excitement.
&quot;You can tell your masters that I appreciate them
sending me so many subjects for my experiments.
It&#39;s been useful to have a continuous trickle of vital essence.&quot;

?P
&lt;em&gt;Vital essence?&lt;/em&gt; Nero is starting to feel
&lt;&lt;if $n_abused&gt;&gt;
  worried about his ignorance of Ivex&#39;s magic.
&lt;&lt;else&gt;&gt;
  some doubts
  about his admittedly small understanding of Ivex&#39;s magic.
&lt;&lt;/if&gt;&gt;
The wolf had earlier dismissed the idea that Ivex
is practicing necromancy.
Necromancy is the label applied by mundanes
to any malignant magic they do not understand.
&lt;&lt;if $n_mageSight&gt;&gt;
  And none of the axioms and exotic energies in this room,
&lt;&lt;else&gt;&gt;
  And nothing in this room,
&lt;&lt;/if&gt;&gt;
nothing Ivex has done so far
has any obvious connection to the dark and dangerous art
that&#39;s formally called spirit control.

?P
Still, &quot;vital essence&quot; is not a phrase used by any reputable mage.
Nero does not remember what it refers to, or even if it&#39;s a customary
term in spirit control at all. But he is not at all an expert in that domain
(and has no desire to become one, of course!)

?P
The wolf visualizes his mental slate of notes,
locates the question &quot;Ivex&#39;s magic?&quot; on it,
and adds several underlines and asterisks to it.

?P
[[Continue|n1cr Guild Name 3]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="286" name="n1cr Guild Name 3" tags="mt-ready" position="3100,3975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Ivex is speaking excitedly to an unseen audience,
perhaps to that inner council he&#39;s imagined.
&quot;I&#39;ve been ready to expand my domain greatly for quite some time now.
If you think &lt;em&gt;this&lt;/em&gt; is impressive, you will be astounded by
what I can achieve if I have more than just &lt;em&gt;trickles&lt;/em&gt; of vital essence...&quot;

?P
He turns to the
&lt;&lt;= $n_naked ? &quot;naked&quot; : &quot;bound&quot;&gt;&gt;
wolf.
&quot;If I join this inner council, will the ordinary guild members
do &lt;em&gt;everything&lt;/em&gt; I ask?&quot;
There&#39;s little doubt what &lt;em&gt;everything&lt;/em&gt; implies,
as the panther is firmly grasping his own crotch.

?P
&lt;&lt;if $n_abused&gt;&gt;
  Nero gives a cautious nod.
  He feels some sympathy for the future victims that Ivex is imagining
  in his mind, but the wolf is glad to have distracted the panther from
  brutalities that are less imaginary.
&lt;&lt;elseif $n_naked&gt;&gt;
  Nero had hoped to avoid the sexual implications of this story
  for a little longer,
  but there&#39;s no sensible response other than a curt nod.
&lt;&lt;else&gt;&gt;
  Nero is offended by the way the panther reaches for
  merely carnal pleasures,
  but he gives a tiny smirk and nods agreeably anyway.
&lt;&lt;/if&gt;&gt;

?P
Ivex continues speaking to the air.
&quot;This is an amazing feat of secrecy!
The bounty hunters that I captured...
None of them gave the slightest hint that they
were commanded by an inner council of mages.
And all the adventurers were undisciplined louts,
quick and &lt;em&gt;eager&lt;/em&gt; to blurt out
every detail of their private affairs.
They couldn&#39;t hold a secret if their life depended upon it.&quot;

?P
The panther suddenly approaches the wolf.
&quot;Is it mind control?&quot;

?P
Nero was expecting that topic to come up, but he&#39;s
&lt;&lt;= $n_abused ? &quot;distressed&quot; : &quot;a little startled&quot;&gt;&gt;
at how quickly the panther leapt to it. Before the wolf can gather the nerve
to confirm it, Ivex says, &quot;Yes, of course, it must be.&quot;
The panther starts pacing again and mutters formulas to himself.
Some of which are &lt;em&gt;definitely&lt;/em&gt; mind-control axioms.

?P
[[Continue|n1cr Guild Name 4]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="287" name="n1cr Guild Name 4" tags="mt-ready" position="3225,3975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight n_naked&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

The complex and contentious science of
&lt;&lt;mt-seen $kn_MindControlBasics&gt;&gt;
  &lt;&lt;tran-cut [[mind control|n1cr Mind Control]]&gt;&gt;,
&lt;&lt;/mt-seen&gt;&gt;
called hypnotism by the ignorant and spirit manipulation
by the pretentious, is a discipline Nero has learned thoroughly.
Not because he &lt;em&gt;uses&lt;/em&gt; it, of course.
Defense is what his clients request from him.

?P
What
&lt;&lt;= $n_abused ? &quot;worries&quot;: &quot;bothers&quot;&gt;&gt;
the wolf is how &lt;em&gt;familiar&lt;/em&gt; Ivex seems to be
with mind control.

?P
The standard defense against the basic axioms of mind control,
a defense that every student learns in their first year
at Windbone Academy,
is to etch one&#39;s spirit with invariants. This does not need to be
done often. Once a year is usually enough. And Nero had his invariants
updated just last month.

?P
But static invariants are easily overcome by advanced practitioners
of mind control.

?P
Nero was
&lt;&lt;= $n_abused ? &quot;clearly&quot; : &quot;perhaps&quot;&gt;&gt;
too dismissive of the rumors about the panther&#39;s magic.
The lupine mage has &lt;em&gt;not&lt;/em&gt; equipped his spirit
for an advanced mind-control fight.
&lt;&lt;if MP_beforeCast === $n_magicPhase&gt;&gt;
  But there may still be time enough to prepare,
  if he can steer Ivex away from the idea of immediately
  &lt;em&gt;using&lt;/em&gt; mind control.
&lt;&lt;else&gt;&gt;
  And his energy is still depleted from the failure of ?spell.
  He&#39;ll need to carefully steer Ivex away from the idea of
  &lt;em&gt;using&lt;/em&gt; mind control, long enough to prepare for it.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n1cr Ivex Fascinated (4,3)]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="288" name="n1cr Inhibition 1" tags="mt-ready" position="3475,3850" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused n_mageSight n_naked&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  Nero tilts his head the slightest bit.
  &quot;Could it &lt;em&gt;be&lt;/em&gt; inhibition?&quot;
  ?P
  Ivex thinks for a moment, and agrees. &quot;No, of course it isn&#39;t inhibition.
  Those adventurers never showed any sign of seepage.
  It must be repression.&quot;
  He continues pacing and muttering to himself.
  ?P

  &lt;&lt;mf-pass &quot;Could It Be Inhibition&quot;&gt;&gt;
    ?P
    Another mistake with the Sprite. Nero shakes his head.
    ?P
  &lt;&lt;/mf-pass&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Inhibition is a mind-control discipline that can interrupt any action,
much like attaching shackles to an intention in the mind.
For a problem such as protection of a secret,
inhibition&#39;s answer is to add a shackle to the speaking of that secret.
The person might &lt;em&gt;want&lt;/em&gt; to speak it,
they can form an intention to speak it,
but the inhibition prevents the intention from becoming action.
?P
This aspect of inhibition is quite reliable, and somewhat frustrating to
those afflicted with it. The &lt;em&gt;difficulty&lt;/em&gt; of inhibition
is due to a curious problem:
a restriction on &lt;em&gt;speaking&lt;/em&gt;
a secret is not a restriction on
&lt;em&gt;singing&lt;/em&gt; that secret,
&lt;em&gt;writing&lt;/em&gt; that secret,
or &lt;em&gt;pointing&lt;/em&gt; at objects whose shapes
spell out the letters of the secret.
?P
So an effective inhibition requires an extremely large number of restrictions,
which substantially increases the frustration of it.
The victim will have a strong urge to find &lt;em&gt;any&lt;/em&gt;
way to express that secret,
such as flicking their ears repeatedly in a code that they&#39;ve invented.
This phenomenon is called seepage.
Persons under inhibition have a tendency to be a twitchy, irritable mess.
?P
Of course, any twitches or outward sign of frustration can
&lt;em&gt;also&lt;/em&gt; be placed under inhibition.
This works for a time, until seepage finds some other way for the 
frustration to be expressed, which of course can also be restricted,
and so forth.
Practitioners of inhibition tend to be those who enjoy the continual
struggle of it.
?P
&lt;em&gt;Advanced&lt;/em&gt; inhibition is more pragmatic and considers the
endless fight against seepage to be a waste of time.
Seepage is entirely eliminated by inserting into the victim&#39;s mind
an arcane construct known as an imp.
The imp is instructed not on what is restricted, but on what is permitted,
and it diligently adds shackles to every intention that is not explicitly allowed.
?P
Simple imps make victims into mindless thralls,
and those are the most common.
Rare and expensive are the sophisticated imps
from skilled inhibitionists that can create a performance that
seems an ordinary person. Only mage-sight is able to see the imp
that&#39;s continually frustrating the desires of the actual person
that the performance pretends to be.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_MindControlInhibition&gt;&gt;
  [[Continue|n1cr Inhibition 2]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="289" name="n1cr Inhibition 2" tags="mt-ready" position="3600,3850" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight n_naked&gt;&gt;
&lt;&lt;cv-try n_magicPhase `MP_beforeCast` `MP_wantDevice`&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

Nero is
&lt;&lt;= $n_abused ? &quot;relieved&quot; : &quot;happy&quot;&gt;&gt;
that Ivex has moved away from thoughts of
inhibition. Inhibition fights are largely about cleverness and speed.
&lt;&lt;if $n_abused&gt;&gt;
  The wolf thinks he still has the advantage there, but
&lt;&lt;else&gt;&gt;
  Not that the panther is likely to match the wolf in those respects, but
&lt;&lt;/if&gt;&gt;
some of Ivex&#39;s mutterings suggest that he&#39;s adept with imps,
which are many times faster than a person can be.
&lt;&lt;if $n_abused&gt;&gt;
  Nero is almost certain he will lose that battle.
&lt;&lt;else&gt;&gt;
  Nero does not know if he can win that battle.
&lt;&lt;/if&gt;&gt;
?P
It&#39;s much better to engage in a repression fight,
which is a slow and steady struggle of determination and power. Nero
&lt;&lt;= $n_abused ? &quot;thinks&quot; : &quot;is confident&quot;&gt;&gt;
he can prevail in that.
?P
And he might not even need to fight at all! Ivex seems quite taken by
this tale of a secret council.
All that Nero needs to do now is wait for the panther
to make a simple mistake.

?P
[[Continue|n1cr Ivex Bait]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="290" name="n1cr Ivex Bait" tags="mt-ready" position="3725,3975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused n_mageSight&gt;&gt;
&lt;&lt;em-assert !$n_tough&gt;&gt;

Ivex stops pacing and approaches the
&lt;&lt;= $n_naked ? &quot;naked&quot; : &quot;bound&quot;&gt;&gt; wolf.
The panther casually places his left hand on the cross,
and then leans
&lt;&lt;= $n_abused ? &quot;distressingly&quot; : &quot;unpleasantly&quot;&gt;&gt;
close. &quot;This is such a fascinating possibility you&#39;ve offered to me.&quot;

?P
&lt;&lt;if $n_abused&gt;&gt;
  The sadistic panther&#39;s nearness makes Nero&#39;s muscles tense,
  but he manages to put on a slight, superior smile anyway.
&lt;&lt;else&gt;&gt;
  Nero gives a slight, superior smile.
&lt;&lt;/if&gt;&gt;

?P
Ivex returns a confident grin.
&quot;Although... One thing you said makes me hesitate.
So I have just one more question.&quot;

?P
The panther pauses for a long moment, perhaps for dramatic effect.
Nero suddenly understands how
&lt;&lt;= $n_abused ? &quot;alarming&quot; : &quot;aggravating&quot;&gt;&gt;
that can be.

?P
&quot;You say you weren&#39;t &lt;em&gt;given&lt;/em&gt; my dossier.
You &lt;em&gt;stole&lt;/em&gt; it...
Why did you need to do that, if you were sent to recruit me?&quot;

?P
The wolf maintains his slight, superior smile despite a feeling of
&lt;&lt;= $n_abused ? &quot;panic.&quot; : &quot;embarrassment.&quot;&gt;&gt;
How did he overlook that problem?
How can he fix it?
There must be a simple way to explain it.

?P
He speaks aloud, &quot;Really? &lt;em&gt;That&#39;s&lt;/em&gt; the reason for your hesitation?
There&#39;s a &lt;em&gt;simple&lt;/em&gt; explanation.&quot;
Nero tries to suggest with a smug tone
that it&#39;s so simple, it isn&#39;t worth explaining.
He tries to convey with the pose of his ears that he&#39;d think less
of Ivex if the panther fails to deduce this explanation himself.

?P
[[Continue|n1cr Ivex Trap (4,3)]]

&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="291" name="n1cr Ivex Demanding (3,2)" tags="mt-ready" position="2700,2525" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_abused n_naked&gt;&gt;

&lt;&lt;n1-patience 3 2&gt;&gt;
  Ivex hesitates a moment.
  &quot;If I accept you as an apprentice... Will you do everything I ask?&quot;
&lt;&lt;n1-remind&gt;&gt;
  Ivex has asked, if Nero does become an apprentice,
  will the wolf do everything that the panther requests.
&lt;&lt;n1-warn&gt;&gt;
  Ivex glares at the wolf and raises his voice.
  &quot;Any apprentice of mine must be obedient.
  Will you do everything I ask?&quot;
&lt;&lt;n1-insist&gt;&gt;
  Ivex sneers at the wolf. &quot;You are failing as an apprentice
  before you have even begun. You should answer me.
  Will you do everything I ask?&quot;
&lt;&lt;/n1-patience&gt;&gt;

&lt;&lt;vi-always n_ivexNear false&gt;&gt;
&lt;&lt;set $n_ivexContext = IC_distant&gt;&gt;

?P
&lt;&lt;include &quot;n1x Actions&quot;&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;mtl [[n1cr Subby Light 1]]&gt;&gt;
    &lt;&lt;if $n_abused&gt;&gt;
      Say hesitantly, &quot;Within reason...&quot;
    &lt;&lt;elseif $n_naked&gt;&gt;
      Respond amicably, &quot;Within reason.&quot;
    &lt;&lt;else&gt;&gt;
      Respond cautiously, &quot;Within reason.&quot;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/mtl&gt;&gt;

  &lt;&lt;mtl [[n1cr Subby Deep 1]]&gt;&gt;
    &lt;&lt;if $n_abused&gt;&gt;
      Respond anxiously, &quot;Anything at all!&quot;
    &lt;&lt;elseif $n_naked&gt;&gt;
      Lie to Ivex, &quot;Anything at all.&quot;
    &lt;&lt;else&gt;&gt;
      Speak with confidence, &quot;Anything at all.&quot;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/mtl&gt;&gt;
  $n_magicAction
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="292" name="n1cr Ivex Fascinated (4,3)" tags="mt-ready" position="3350,3925" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused n_mageSight n_naked&gt;&gt;

&lt;&lt;vi-always n_ivexNear false&gt;&gt;
&lt;&lt;set $n_ivexContext = IC_distant&gt;&gt;

&lt;&lt;n1-patience 4 3&gt;&gt;
  Ivex suddenly asks, &quot;Is the secret council&#39;s mind control based on
  inhibition or repression?&quot;
&lt;&lt;n1-remind&gt;&gt;
  Ivex wants to know if the secret council uses inhibition or repression
  to prevent their minions from divulging the secret.
&lt;&lt;n1-repeat&gt;&gt;
  Ivex says, &quot;This is not simple curiosity.
  I &lt;em&gt;must&lt;/em&gt; know. Is the guild&#39;s secret kept with
  inhibition or repression?&quot;
&lt;&lt;n1-warn&gt;&gt;
  Ivex&#39;s tail is twitching with annoyance. &quot;Inhibition and repression have
  different implications for my experiments. Are you unwilling or unable to
  tell me which variety of mind control you use?&quot;
&lt;&lt;n1-insist&gt;&gt;
  Ivex snarls, &quot;Tell me! Are you using inhibition or repression to...&quot;
  He shakes his head in exasperation.
  &quot;Of course you don&#39;t know. Why am I wasting my time
  asking a &lt;em&gt;minion&lt;/em&gt; what his invisible chains are.&quot;
&lt;&lt;/n1-patience&gt;&gt;

?P
&lt;&lt;include &quot;n1x Actions&quot;&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;mt-seen $kn_MindControlInhibition&gt;&gt;
    &lt;&lt;mtl [[n1cr Inhibition 1]]&gt;&gt;
      Nudge Ivex away from inhibition.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $kn_MindControlRepression&gt;&gt;
    &lt;&lt;mtl [[n1cr Repression 1]]&gt;&gt;
      Nudge Ivex away from repression.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $kn_MindControlSubstitution&gt;&gt;
    &lt;&lt;mtl [[n1cr Substitution 1]]&gt;&gt;
      Respond with a show of reluctance. &quot;It&#39;s neither, it&#39;s... substitution.&quot;
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  $n_magicAction
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="293" name="n1cr Ivex Skeptical (4,3)" tags="mt-ready" position="2725,3925" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_naked&gt;&gt;

&lt;&lt;n1-patience 4 3&gt;&gt;
  Ivex asks with a smirk, &quot;Have you thought of a suitably
  impressive name for your secret guild of mages yet?&quot;
&lt;&lt;n1-remind&gt;&gt;
  Ivex wants to know the name of the secret guild of mages.
&lt;&lt;n1-repeat&gt;&gt;
  Ivex smugly repeats his question. &quot;Do you remember now what
  your secret guild of mages is called?&quot;
&lt;&lt;n1-warn&gt;&gt;
  Ivex sneers and asks again,
  &quot;What is the name of this secret guild of mages that
  you seem so eager for me to join?&quot;
&lt;&lt;n1-insist&gt;&gt;
  Ivex growls. &quot;Enough of this nonsense about some mysterious nameless
  guild.
  If such a guild existed, they certainly wouldn&#39;t send someone like
  &lt;em&gt;you&lt;/em&gt; to recruit &lt;em&gt;me&lt;/em&gt;.&quot;
&lt;&lt;/n1-patience&gt;&gt;

&lt;&lt;vi-always n_ivexNear false&gt;&gt;
&lt;&lt;set $n_ivexContext = IC_distant&gt;&gt;

?P
&lt;&lt;include &quot;n1x Actions&quot;&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;mtl [[n1cr Guild Name 1]]&gt;&gt;
    Tell Ivex, &quot;The guild&#39;s name is...&quot;
  &lt;&lt;/mtl&gt;&gt;
  $n_magicAction
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="294" name="n1cr Ivex Trap (4,3)" tags="mt-ready" position="3850,3925" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused n_mageSight n_naked&gt;&gt;

&lt;&lt;n1-patience 4 3&gt;&gt;
  Ivex shakes his head. &quot;I&#39;m unable to figure this out.
  What is this simple explanation for
  why you needed to &lt;em&gt;steal&lt;/em&gt; my dossier?&quot;
&lt;&lt;n1-remind&gt;&gt;
  Ivex has found a flaw in the wolf&#39;s story.
  The panther is asking why a messenger sent to him
  would need to steal a dossier about him.
&lt;&lt;n1-repeat&gt;&gt;
  &lt;&lt;if !$n_ivexNear&gt;&gt;
    Ivex returns to stand uncomfortably close, and asks again,
  &lt;&lt;else&gt;&gt;
    Ivex asks again,
  &lt;&lt;/if&gt;&gt;
  &quot;Could you explain to me why you needed to &lt;em&gt;steal&lt;/em&gt;
  my dossier?&quot;
&lt;&lt;n1-warn&gt;&gt;
  &lt;&lt;if !$n_ivexNear&gt;&gt;
    Ivex approaches with a smirk.
  &lt;&lt;else&gt;&gt;
    Ivex smirks.
  &lt;&lt;/if&gt;&gt;
  &quot;Are you really unable to explain why you needed to
  &lt;em&gt;steal&lt;/em&gt; my dossier?&quot;
&lt;&lt;n1-insist&gt;&gt;
  &lt;&lt;if !$n_ivexNear&gt;&gt;
    Ivex laughs as he returns to the cross.
  &lt;&lt;else&gt;&gt;
    Ivex laughs.
  &lt;&lt;/if&gt;&gt;
  &quot;Have you decided yet on a suitably convincing reason
  you needed to &lt;em&gt;steal&lt;/em&gt; my dossier?&quot;
&lt;&lt;/n1-patience&gt;&gt;

&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;set $n_ivexContext = IC_explainTheft&gt;&gt;

?P
&lt;&lt;include &quot;n1x Actions&quot;&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;mt-seen $sn_trapChoices &amp; 1&gt;&gt;
    &lt;&lt;mtl [[n1cr Reject Fantasy 1]] &quot;$g_choice = 1&quot;&gt;&gt;
      &quot;That bounty hunter wasn&#39;t one of &lt;em&gt;ours&lt;/em&gt;.
      Our guild members never get more than a wanted poster with
      your picture on it...&quot;
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $sn_trapChoices &amp; 2&gt;&gt;
    &lt;&lt;mtl [[n1cr Reject Fantasy 1]] &quot;$g_choice = 2&quot;&gt;&gt;
      &quot;I told you, we had a disagreement. I was sent to give
      him new orders, but he didn&#39;t believe me and became
      belligerent...&quot;
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $sn_trapChoices &amp; 4&gt;&gt;
    &lt;&lt;mtl [[n1cr Reject Fantasy 1]] &quot;$g_choice = 4&quot;&gt;&gt;
      &quot;I&#39;m a messenger, not a bounty hunter. Why would I have a dossier
      to deliver a message? Running into that bounty hunter was a
      coincidence...&quot;
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $sn_trapChoices &amp; 8&gt;&gt;
    &lt;&lt;mtl [[n1cr Reject Fantasy 1]] &quot;$g_choice = 8&quot;&gt;&gt;
      &quot;I didn&#39;t receive the instruction to recruit you until &lt;em&gt;after&lt;/em&gt;
      I found your dossier and described it to my superiors...&quot;
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  $n_magicAction
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="295" name="n1cr Mind Control" tags="mt-ready" position="3225,4125" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_abused n_mageSight n_naked&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Mind control, sometimes called spirit manipulation,
is a close cousin to necromancy,
which is more properly called spirit control.
They&#39;re quite similar,
as they use many of the same axioms of spirit magic,
except the spirits being manipulated by mind control
are not yet dead.

?P
While necromancy is rightly banned and shunned by every sensible nation,
mind control is quietly allowed. This is mainly due to an
awkward fact: spirit manipulation is essential to several religions
whose gods are still present enough to take offense at being
labelled a disreputable cult.

?P
But in this modern age, mind control has also become a popular component
of contracts arranged by those wealthy enough to afford it.
The fabulous &lt;span class=nobr&gt;Ms. Tara&lt;/span&gt;
&lt;&lt;if $n_taraIntroduced&gt;&gt;
  (Nero&#39;s favorite lupine professor at Windbone Magic Academy)
&lt;&lt;else&gt;&gt;
  (a brilliant wolf who teaches at Windbone Magic Academy)
&lt;&lt;/if&gt;&gt;
is firmly against the practice.
Nero is more pragmatic about it.

?P
His argument is that the &lt;em&gt;desire&lt;/em&gt; for mind control is so common,
any ban will merely empower an underworld of shady suppliers and operators.
It&#39;s better to keep it in the open, where it can be regulated
and monitored for abusive applications.

?P
Ms. Tara&#39;s response was that Nero is being a paw-licker for gods that
the world would be better off without.
The two wolves have tacitly agreed to not
raise the subject again.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_MindControlBasics&gt;&gt;
  [[Return|n1cr Guild Name 4]]

  &lt;&lt;set $n_taraIntroduced = true&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="296" name="n1cr Reject Fantasy 1" tags="mt-ready" position="3975,3975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;script&gt;&gt;
  const V = State.variables;
  const T = State.temporary;
  switch (V.g_choice) {
    case 1: T.pass = &quot;That Bounty Hunter&quot;; break;
    case 2: T.pass = &quot;I Told You&quot;; break;
    case 4: T.pass = &quot;I&#39;m A Messenger&quot;; break;
    case 8: T.pass = &quot;I Didn&#39;t Receive&quot;; break;
    default:
      throw new Error(`Unexpected g_choice ${V.g_choice}`);
  }

  let tc = V.sn_trapChoices || 0;
  tc = tc | V.g_choice;
  MT.mdSet(&quot;sn_trapChoices&quot;, tc);
&lt;&lt;/script&gt;&gt;

Ivex suddenly slams a knee into the wolf&#39;s crotch!
Nero&#39;s response disappears in a gasp.

?P
&lt;&lt;if $n_abused&gt;&gt;
  The wolf had been anticipating further abuse, but this sudden assault
  is still a surprise, much worse than he imagined. The pain
&lt;&lt;else&gt;&gt;
  The pain is worse than any the wolf has ever encountered before. It
&lt;&lt;/if&gt;&gt;
explodes from his balls, thrusts upward toward his lungs,
and streams out his muzzle in a whine.

&lt;&lt;mf-pass _pass&gt;&gt;
  ?P
  Agony dominates the wolf&#39;s senses,
  but the Sprite&#39;s insistent voice makes him realize that
  Ivex is also speaking.

&lt;&lt;mf-else&gt;&gt;
  ?P
  The agony dominates the wolf&#39;s senses, but a small part of his mind
  can hear Ivex speaking.
&lt;&lt;/mf-pass&gt;&gt;
Nero forces himself to pay attention to the author of the pain.

?P
&quot;&amp;mdash;such an interesting tale you tell, and I almost believe it.
Well, we shall see if you can still tell the same story under more
&lt;em&gt;serious&lt;/em&gt; questioning.&quot;

?P
&lt;&lt;if $n_naked&gt;&gt;
  Ivex grabs one of the wolf&#39;s exposed testicles.
&lt;&lt;else&gt;&gt;
  Ivex reaches through the cloth of the wolf&#39;s robe
  to grasp one of the wolf&#39;s testicles.
&lt;&lt;/if&gt;&gt;
Nero cringes and blurts out,
&quot;Wait! The inner council will reject you if you damage their
messenger!&quot;

?P
&lt;&lt;if $n_abused&gt;&gt;
  The panther squeezes the
  &lt;&lt;= $n_naked ? &quot;furry&quot; : &quot;captive&quot;&gt;&gt;
  ball firmly.
  He makes a fist with his other hand and raises it high.
  Nero closes his eyes and turns his head away.

&lt;&lt;else&gt;&gt;
  The panther squeezes the
  &lt;&lt;= $n_naked ? &quot;furry&quot; : &quot;captive&quot;&gt;&gt;
  ball firmly, pulling it outward, and then slams a fist
  into the other ball, twice!
  ?P
  Nero howls. This new torture adds radiating spikes of pain to the
  throbbing aches from the earlier assault. It feels like his guts
  have tangled themselves in an attempt to escape,
  and their confusion is dragging his mind down into their
  chamber of nausea and darkness.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n1cr Reject Fantasy 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="297" name="n1cr Reject Fantasy 2" tags="mt-ready big-mood" position="4100,3975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;if $n_abused&gt;&gt;
  Ivex laughs and lands the fist lightly, just a tap on the
  &lt;&lt;= $n_naked ? &quot;captive nut.&quot; : &quot;cloth near the nut.&quot;&gt;&gt;

&lt;&lt;else&gt;&gt;
  Ivex waits for the howl to subside. When the wolf regains enough
  wit to look at his tormentor, the panther tilts his head
  as if inviting Nero to speak.
  ?P
  Nero does not.
  ?P
  Ivex laughs and taps his knuckles lightly on the
  &lt;&lt;= $n_naked ? &quot;wolf&#39;s captive nut.&quot; : &quot;cloth near the wolf&#39;s nut.&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;

He continues a rhythmic drumming on the wolf&#39;s
&lt;&lt;= $n_naked ? &quot;ball&quot; : &quot;crotch&quot;&gt;&gt;
as he speaks.
&quot;Do you give even the slightest bit of thought to anything you say?
This... &lt;em&gt;secret council&lt;/em&gt; of yours has &lt;em&gt;already&lt;/em&gt;
sent many of their strongest warriors,
which I&#39;ve captured for my own purposes.
And yet, this council is &lt;em&gt;still&lt;/em&gt; eager for me to join.
Why should they care if I choose
to play with a weakling messenger as well?
I&#39;m confident that if such a council does exist,
they sent you as another test.&quot;

?P
The panther snorts. &quot;Or perhaps you&#39;re a gift.
I will mention how much I enjoy this gift
when I send them my reply. And if turns out that
&lt;span class=nobr&gt;&lt;em&gt;this&lt;/em&gt;&amp;mdash;&quot;&lt;/span&gt;
He punctuates the word with a slap to the wolf&#39;s crotch.
&lt;span class=nobr&gt;&quot;&amp;mdash;is&lt;/span&gt;
somehow a reason for the...
&lt;em&gt;secret council&lt;/em&gt; to reject me,
then I would not want to join them anyway!&quot;

?P
Nero&#39;s eyes are wet, from the pain, but also from the failure
of his plan. It&#39;s been many years since he&#39;s failed from such
a simple mistake, and he feels crushed.
He thought he was more resilient.
Setbacks are not tragedies. They&#39;re merely
experiences to learn from, and opportunity to grow.

?P
But Ivex&#39;s contempt strikes deeply in
the wolf&#39;s soul, more deeply than any torment merely physical.
The physical pain is almost a comfort.

?P
[[Continue|n1cx Start Candle 1]]

&lt;&lt;run
  delete $n_ivexReceptive;
  $n_abused = true;
  $n_neroMood = &quot;dejected&quot;;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="298" name="n1cr Repression 1" tags="mt-ready" position="3475,3975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_abused n_mageSight n_naked&gt;&gt;
  
  Nero tilts his head the slightest bit.
  &quot;Could it &lt;em&gt;be&lt;/em&gt; repression?&quot;
  ?P
  Ivex thinks for a moment, and agrees. &quot;No, of course it isn&#39;t repression.
  Those adventurers are not clever, but they aren&#39;t simpletons.
  It must be inhibition.&quot; He continues pacing and muttering to himself.
  ?P

  &lt;&lt;mf-pass &quot;Could It Be Repression&quot;&gt;&gt;
    ?P
    Nero shakes his head at the idiocy of Sprites.
    ?P
  &lt;&lt;/mf-pass&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Repression is a mind-control discipline that is said to
bury memories deeply in the subconscious,
storing them in a place that&#39;s inaccessible to
conscious thought. In reality, it removes the memories entirely.
&lt;em&gt;Advanced&lt;/em&gt; repression packs the removed memories
into a charm or a tensor that can be used to restore the memories when needed.
Which often does work.
?P
Well, it fails more often than it succeeds.
?P
The problem with the process is that
the mind naturally fills the hole of a missing memory
with a confabulation that changes the shape of the memories adjacent.
So if too much time passes before the original memory is restored,
it no longer fits exactly in the place it was removed.
Parts of the confabulation might not get erased,
and adjacent memories might get bruised or shattered by the intrusion.
?P
This is not a &lt;em&gt;terrible&lt;/em&gt; thing when it&#39;s merely one memory
poorly restored.
But it&#39;s never &lt;em&gt;just&lt;/em&gt; one memory.
If the goal is to remove the painful awareness of an ex,
reliable repression requires removing
all the &lt;em&gt;moments&lt;/em&gt; of interaction,
all the &lt;em&gt;places&lt;/em&gt; of interaction,
and all the &lt;em&gt;consequences&lt;/em&gt; of the interactions.
?P
Repression has a tendency to make people pleasant idiots.
Undoing a repression has a tendency to make people violently insane.
?P
Practitioners of repression usually prefer the former without the latter,
so reversible repression is not often done.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_MindControlRepression&gt;&gt;
  [[Continue|n1cr Repression 2]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="299" name="n1cr Repression 2" tags="mt-ready" position="3600,3975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused n_naked&gt;&gt;
&lt;&lt;cv-try n_magicPhase `MP_beforeCast` `MP_triedMagic`&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

Nero is
&lt;&lt;= $n_abused ? &quot;relieved&quot; : &quot;happy&quot;&gt;&gt;
that Ivex has moved away from thoughts of
repression.
Defense against repression is a matter of holding onto a memory
and strengthening its connections, while the adversary is trying to sever
those connections and tear the memory away. It&#39;s not a subtle sport,
and cleverness does not help. Power and determination wins the day.
?P
&lt;&lt;if $n_mageSight&gt;&gt;
  The wolf is
  &lt;&lt;= $n_abused ? &quot;&quot; : &quot;slightly&quot;&gt;&gt;
  intimidated by the massive flows of
  exotic energy that Ivex has in his lair.
  Nero does not
  &lt;&lt;= $n_abused ? &quot;think&quot; : &quot;know if&quot;&gt;&gt;
  he can win a power battle here.
&lt;&lt;elseif MP_triedMagic === $n_magicPhase&gt;&gt;
  The wolf is feeling depleted from the failure of ?spell.
  He does not
  &lt;&lt;= $n_abused ? &quot;think&quot; : &quot;know if&quot;&gt;&gt;
  he can win a power battle right now.
&lt;&lt;else&gt;&gt;
  The wolf is wary of engaging in a power battle in
  a place that Ivex has prepared for it. Nero does not
  &lt;&lt;= $n_abused ? &quot;think&quot; : &quot;know if&quot;&gt;&gt;
  he can win that battle.
&lt;&lt;/if&gt;&gt;
?P
Defense against &lt;em&gt;inhibition&lt;/em&gt; is completely different.
Power is irrelevant in that battle.
It&#39;s a more complicated fight, but cleverness is Nero&#39;s strength,
and he&#39;s
&lt;&lt;= $n_abused ? &quot;more&quot; : &quot;&quot;&gt;&gt;
confident he can prevail in that one.
?P
And he might not even need to fight at all! Ivex seems quite taken by
this tale of a secret council.
All that Nero needs to do now is wait for the panther
to make a simple mistake.

?P
[[Continue|n1cr Ivex Bait]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="300" name="n1cr Subby Deep 1" tags="mt-ready big-mood" position="2850,2500" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;if $n_abused&gt;&gt;
  &quot;Anything at all!&quot;
  the wolf says with some alacrity.
  ?P
  Nero knows that this is a promise he would never keep,
  but he hopes that a signal of eager compliance
  will pacify the sadistic panther
  and allow the wolf to avoid further torture,
  until he is able to escape.

&lt;&lt;elseif $n_naked&gt;&gt;
  The wolf says hesitantly, &quot;Anything at all.&quot;
  ?P
  He&#39;s certain that &quot;anything&quot; in this case includes
  sexual favors that he does not want to perform,
  but he intends to escape before that becomes a problem.
  A pretense of reluctant compliance should keep Ivex
  intrigued and distracted enough for the wolf to find
  a flaw he can exploit.

&lt;&lt;else&gt;&gt;
  &quot;Anything at all,&quot;
  the wolf says confidently.
  ?P
  Of course, Nero doesn&#39;t mean &lt;em&gt;literally&lt;/em&gt; anything,
  It&#39;s an expression of intensity, and perhaps an aspirational goal,
  not so different from expressions of &quot;eternal love&quot;.
  The wolf pours his whole soul into the act.
  Feeding Ivex&#39;s ego will increase the chance the panther
  makes a mistake.
&lt;&lt;/if&gt;&gt;

&lt;&lt;mf-pass &quot;Anything At All&quot;&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
Ivex laughs. &quot;I almost believe you.
But your answer is bold,
and you have no idea of what I will demand.&quot;

?P
&lt;&lt;if $n_ivexNear&gt;&gt;
  He paces away from the
  &lt;&lt;= $n_naked ? &quot;naked&quot; : &quot;bound&quot;&gt;&gt;
  wolf to pick up
&lt;&lt;else&gt;&gt;
  He tilts his head to consider the
  &lt;&lt;= $n_naked ? &quot;naked&quot; : &quot;bound&quot;&gt;&gt;
  wolf, and then picks up
&lt;&lt;/if&gt;&gt;
&lt;&lt;= $n_knifeViewed ? &quot;the&quot; : &quot;a&quot;&gt;&gt;
metallic letter opener from the desk.

?P
&quot;What if I hand you a blade and
tell you to remove your own testicles?&quot;

?P
Nero is
&lt;&lt;= $n_abused ? &quot;alarmed&quot; : &quot;startled&quot;&gt;&gt;
by the direction this conversation has taken.
Should he say yes? Surely, no sane person would say yes?
He hesitates. &quot;If you gave me a good reason for it...&quot;

?P
Ivex places the sharp edge of the letter opener against his own crotch.
&quot;I&#39;ve already removed my own. I will explain to you the reason,
&lt;em&gt;after&lt;/em&gt; you have done it yourself.&quot;

?P
Nero senses a trap, but he does not know what it is.
Disagreeing is obviously contrary to Ivex&#39;s insistence on
obedience, but agreeing readily to such a mutilation is perhaps
too obviously a lie. And maybe Ivex is testing for
spirit, so that resisting is correct. Or maybe he&#39;s
testing for fervor?

?P
There are too many possibilities to consider. Nero stalls
for time. &quot;Did... you really remove your own testicles?&quot;

?P
&quot;Do you want me to show you?&quot;

?P
Oh. &lt;em&gt;That&#39;s&lt;/em&gt; the trap.
Saying yes makes him a collaborator in lewdness,
but saying no makes him a shy virgin.
Any response now is an invitation for lewd attention,
and Nero trapped himself by asking to see the panther&#39;s balls.

?P
The wolf&#39;s ears flatten in dismay.
&lt;&lt;if $n_abused&gt;&gt;
  He shakes his head with a grimace.
&lt;&lt;elseif $n_naked&gt;&gt;
  &quot;I did not mean it that way!&quot;
&lt;&lt;else&gt;&gt;
  &quot;Please, pretend I did not ask that!&quot;
  &lt;&lt;mf-please&gt;&gt;
    ?P
    The Sprite replies,
    &lt;span class=sprite-q&gt;&quot;Of course, ?master
    But I don&#39;t remember what you want me to forget, ?sprHoldStop&quot;&lt;/span&gt;
  &lt;&lt;/mf-please&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n1cr Subby Deep 2]]

&lt;&lt;run
  delete $n_ivexNear;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="301" name="n1cr Subby Deep 2" tags="mt-ready" position="2975,2500" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Ivex chuckles. &quot;Training you does seem like it will be fun.&quot;
?P
He puts the letter opener back on the desk.
&quot;No, I have &lt;em&gt;not&lt;/em&gt; removed my own balls.
And I much prefer my subjects to keep theirs as well.
They&#39;re more... productive that way.
So you have no reason to worry on that front.
And with my help, you will soon become
useful and productive yourself.&quot;

?P
The wolf says softly, &quot;Of course,&quot; without fully understanding
what he&#39;s agreeing with. But it&#39;s clear that
the panther mage is in love with his own cleverness,
and Nero has no qualms about stroking &lt;em&gt;that&lt;/em&gt;.

?P
Ivex says, &quot;I&#39;m sure your behavior right now is motivated
more by expedience than genuine admiration.
So let me give
&lt;&lt;= $n_naked ? &quot;another,&quot; : &quot;a&quot;&gt;&gt;
small demonstration of my powers.&quot;

?P
&lt;&lt;if $n_naked&gt;&gt;
  He points at some objects in the room.
  &quot;Pay attention to that penguin and that map!&quot;

  ?P
  The panther raises both arms theatrically, then claps his hands twice...

  ?P
  [[Continue|n1cs Room Flip 1]]
&lt;&lt;else&gt;&gt;
  He raises his left arm theatrically,
  then snaps his fingers...

  ?P
  &lt;&lt;mta &quot;n1p Barbs Slow 1&quot;&gt;&gt;Continue&lt;&lt;/mta&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $n_subby = true&gt;&gt;
&lt;&lt;set $n_afterNaked = &quot;[[Continue|n1cs Subby Stripped]]&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="302" name="n1cr Subby Light 1" tags="mt-ready big-mood" position="2850,2625" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_abused n_naked&gt;&gt;

&lt;&lt;if $n_abused&gt;&gt;
  &quot;Within reason...&quot;
  ?P
  Nero was initially hesitant about showing even a tiny sign of
  resistance to the abusive panther&#39;s demands.
  But the wolf has decided:
  When he finally does escape this place,
  he wants to look back and remember
  that he remained true to himself,
  that he did not shamefully debase himself
  for this vulgar villain.

&lt;&lt;elseif $n_naked&gt;&gt;
  &quot;Within reason,&quot; says the wolf with confidence.
  ?P
  He&#39;s acutely aware of his nakedness in the moment,
  a condition that Ivex was very quick to create.
  And the wolf can guess the variety of sordid acts
  the panther would like to include in that &lt;em&gt;everything&lt;/em&gt;.
  ?P
  Nero does not want to encourage such thoughts,
  but he does need to agree to obedience.
  The wolf hopes that a firm declaration of an ambiguous boundary
  will make the panther hesitate.
  Of course, Ivex has already demonstrated an interest in
  crossing boundaries,
  but Nero thinks that Ivex might be distracted by the game
  of guessing whether an action &lt;em&gt;will&lt;/em&gt; cross
  the unspoken boundary or not.

&lt;&lt;else&gt;&gt;
  &quot;Within reason,&quot; the wolf says cautiously.
  ?P
  Nero of course does not expect to actually become an apprentice,
  but he does not know how long he&#39;ll need to maintain the pretense.
  The lie will be more plausible if he conveys an understanding of
  the sensible boundaries he&#39;d expect in any apprenticeship,
  whoever the mentor or apprentice might be.
&lt;&lt;/if&gt;&gt;

&lt;&lt;mf-pass &quot;Within Reason&quot;&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
Ivex chuckles. &quot;A polite answer. And perhaps sincere as well.
But I wonder, &lt;em&gt;whose&lt;/em&gt; reason is to be the guide.
Yours or mine?&quot;

?P
Nero senses a trap. He does not know if he can avoid it.
&quot;I use my own reason. I do not think you would
want a stupid apprentice. But of course I will defer to
your greater wisdom when my reasoning is flawed,
and I trust that you will explain to me the flaw.&quot;

?P
Ivex tilts his head to consider the wolf. After a moment,
&lt;&lt;if $n_ivexNear&gt;&gt;
  he waves an arm, and
  &lt;&lt;if $n_mageSight&gt;&gt;
    strands of exotic energy lift a metallic letter opener off
    the desk, bringing it to
  &lt;&lt;else&gt;&gt;
    a metallic letter opener flies from the desk to land in
  &lt;&lt;/if&gt;&gt;
  his paw.
&lt;&lt;else&gt;&gt;
  he picks up a shiny letter opener from the desk and
  approaches the wooden cross.
&lt;&lt;/if&gt;&gt;

?P

&quot;You are correct,&quot; says the panther.
&quot;I do not need a stupidly obedient apprentice.
My lion already fills that role.
So let us test your intelligence...&quot;

?P
[[Continue|n1cr Subby Light 2]]

&lt;&lt;set $n_ivexNear = true&gt;&gt;
/* tough deferred to end of section */
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="303" name="n1cr Subby Light 2" tags="mt-ready" position="2975,2625" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

The panther places the sharp edge of the letter opener against
&lt;&lt;if $n_naked&gt;&gt;
  the naked wolf&#39;s balls.
&lt;&lt;else&gt;&gt;
  the wolf&#39;s crotch.
&lt;&lt;/if&gt;&gt;
&quot;What &lt;em&gt;reason&lt;/em&gt; do you think I might have,
if I told you to hold still while I remove your balls?&quot;

?P
Nero is startled at the direction this conversation has taken,
not to mention the &lt;&lt;= $n_naked ? &quot;imminent&quot; : &quot;nearby&quot;&gt;&gt; threat
to his maleness.
He does not know what Ivex wants to hear.

?P
The wolf &lt;&lt;= $n_naked ? &quot;anxiously&quot; : &quot;cautiously&quot;&gt;&gt;
speaks some thoughts out loud.
&quot;It&#39;s... umm... Many religions consider sexual appetites a distraction
from a spiritual life. And there is a cult in the northern lands,
I do not remember the name of it,
whose followers castrate themselves when they become priests.
But I&#39;m not aware of any &lt;em&gt;magical&lt;/em&gt; reason why testicles
are a hindrance to any spells.&quot;

?P
The blade at the wolf&#39;s balls does not move.
The panther is staring with a slight grin,
but he does not give any sign of the correct direction to go.

?P
Nero continues. &quot;Reasoning from first principles.
Sperm, as a source of life, has an inherent chaotic energy,
and this energy might complicate the casting of spells
with its mere adjacency?
But historically, the greatest mages have all been male,
and not castrated. Except for one. As far as I know.
So it seems more likely that if sperm has any effect on magic,
it would enhance it.
So removal of the testicles could be a handicap.
Perhaps the point is the handicap?&quot;

?P
Ivex does not answer that.

?P
The wolf has a feeling he is failing this test.
His thoughts are clumsy from anxious images of
losing his balls.
But even worse,
he suspects that losing his balls might be
the &lt;em&gt;reward&lt;/em&gt; for success.

?P
He cannot see anything he can say or do that will
clearly save his balls,
so he tries embracing his failure
and splays his ears with genuine distress.
&quot;I... I&#39;m sorry, I do not understand.
Could you please explain it to me?&quot;
/* mf-please in next node */

?P
[[Continue|n1cr Subby Light 3]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="304" name="n1cr Subby Light 3" tags="mt-ready" position="3100,2625" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Ivex giggles and drops the blade.
&quot;I did not ask you why I would &lt;em&gt;remove your balls&lt;/em&gt;.
I asked, why would I tell you to &lt;em&gt;stay still&lt;/em&gt; while removing
your balls.
The reason, of course, is to avoid accidentally cutting
anything else.&quot;

?P
Nero&#39;s ears droop even more.
It&#39;s been a long time since he felt this foolish.

&lt;&lt;mf-please&gt;&gt;
  ?P
  The Sprite ?sprSays,
  &lt;span class=sprite-q&gt;&quot;Of course, ?master
  &lt;em&gt;It&lt;/em&gt; is a pronoun used to indicate an object,
  and sometimes also used to insult or degrade a person, ?sprHoldStop&quot;&lt;/span&gt;
&lt;&lt;/mf-please&gt;&gt;

?P
The panther
&lt;&lt;if $n_mageSight&gt;&gt;
  directs some exotic energy strands to place the
  letter opener back on
&lt;&lt;else&gt;&gt;
  gestures for the letter opener to float back to
&lt;&lt;/if&gt;&gt;
the desk.
&quot;Training you does seem like it will be fun.
And you do not have to worry about losing your balls.
I much prefer my subjects to keep them.
They&#39;re more... productive that way.
And with my guidance, you will soon be useful
and productive yourself.&quot;

?P
The wolf says softly, &quot;Of course.&quot; He has some qualms about the
path he&#39;s chosen, but it&#39;s clear that Ivex is fond of his own
cleverness, and Nero has no hesitation about stroking &lt;em&gt;that&lt;/em&gt;.

?P
Ivex says, &quot;I expect your behavior right now is motivated
more by expedience than genuine admiration.
So let me give
&lt;&lt;= $n_naked ? &quot;another,&quot; : &quot;a&quot;&gt;&gt;
small demonstration of my powers.&quot;

?P
&lt;&lt;if $n_naked&gt;&gt;
  He points at some objects in the room.
  &quot;Pay attention to that penguin and that map!&quot;
  
  ?P
  The panther raises both arms theatrically, then claps his hands twice...

  ?P
  [[Continue|n1cs Room Flip 1]]
&lt;&lt;else&gt;&gt;
  He raises his left arm theatrically,
  then snaps his fingers...

  ?P
  &lt;&lt;mta &quot;n1p Barbs Slow 1&quot;&gt;&gt;Continue&lt;&lt;/mta&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $n_abused &amp;&amp; ($n_tough = true)&gt;&gt;
&lt;&lt;set $n_subby = true&gt;&gt;
&lt;&lt;set $n_afterNaked = &quot;[[Continue|n1cs Subby Stripped]]&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="305" name="n1cr Substitution 1" tags="mt-ready" position="3475,4100" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_abused n_mageSight n_naked&gt;&gt;

  &quot;It&#39;s neither, it&#39;s...&quot; Nero pauses to reconsider what he&#39;s
  about to say.
  Does he really want to put this idea in Ivex&#39;s head?

  &lt;&lt;mf-pass &quot;Its Neither Its&quot;&gt;&gt;
    ?P
    The Sprite is &lt;em&gt;not&lt;/em&gt; helpful.
  &lt;&lt;/mf-pass&gt;&gt;
  ?P
&lt;&lt;/arc-skip&gt;&gt;

Substitution, unlike other mind-control disciplines,
does not add or subtract anything from a person&#39;s mind.
It merely moves things within the mind to different places in it.
Perhaps a memory of a favorite pet is exchanged with the memory
of a hated ex, which then alters the mood of everything connected
to those memories.
?P
The primary defense against substitution is to carefully check
one&#39;s memories and spirit for inconsistencies. Has the pet thrown dishes
in anger on other days? Did the ex wear nothing but a collar on other nights?
Once the substitution is identified, it&#39;s a simple matter to reverse it.
?P
Of course, skilled practitioners of substitution do not exchange anything
quite so obvious. The &lt;em&gt;difficulty&lt;/em&gt; of substitution is that
a very subtle swap will have very little effect.
So the task is to find an exchange that is significant
enough to create the intended effect,
but does not need excessive rearrangements to
prevent the inconsistencies from being noticed.
?P
The &lt;em&gt;strength&lt;/em&gt; of substitution, the reason it&#39;s commissioned
at steep prices,
is that such a change can be stable and undetectable.
Nothing in the mind is missing, and nothing in the mind is alien to it.
The altered mind will seem to have always been that way.
?P
But stable substitution is not a fast process. It requires days
or even weeks of observation to find a suitable rearrangement.
Mage fights do not have time for that.
Battles involving substitution are messy affairs whose
dominant theme is confusion, and the victor or an ally can
easily undo all the rearrangements after a sufficient rest.
?P
There are sometimes rumors of an &lt;em&gt;advanced&lt;/em&gt;
form of substitution that can rapidly and automatically repair
inconsistencies whenever they get noticed.
Many experts have deeply investigated this claim
from many angles,
and the verdict is always the same: no such magic exists,
and it&#39;s impossible for it to ever exist.
?P
There are occasional doubters who find it suspicious that
investigators are always so certain about that verdict.
But whenever doubters go examine the evidence themselves,
they quickly realize their doubts are wrong.
The verdict must certainly be correct.
And they make an embarrassingly apologetic public statement to that effect.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_MindControlSubstitution&gt;&gt;
  [[Continue|n1cr Substitution 2]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="306" name="n1cr Substitution 2" tags="mt-ready" position="3600,4100" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight n_naked&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

Nero thinks it&#39;s &lt;em&gt;unlikely&lt;/em&gt; that Ivex is an expert in substitution.
The panther is not subtle.
Still, the wolf has underestimated Ivex before, and he does not want to
make that same mistake again...

?P
No, there are too many unknowns to be certain of any outcome.
Nudging Ivex toward substitution will &lt;em&gt;probably&lt;/em&gt;
avoid terrible consequences, but there&#39;s no way to know
without simply trying it.

?P
&lt;&lt;if $n_abused&gt;&gt;
  Nero tries to quash his doubts. He says with some
&lt;&lt;else&gt;&gt;
  Nero quashes his doubts and says with feigned
&lt;&lt;/if&gt;&gt;
hesitation, &quot;It&#39;s substitution.&quot;

?P
Ivex&#39;s eyes light up. &quot;Substitution! Astonishing!
I never even imagined it could be practical
to use substitution to keep such a large secret in so many subjects.
And a new substitution would have to be applied every time
one of them encounters a secret council member again,
which I&#39;d expect to be at least
once a day for the handsome ones, correct?&quot;

?P
Ivex leers in a
&lt;&lt;= $n_abused || $n_naked ? &quot;loathsome&quot; : &quot;disturbing&quot;&gt;&gt;
way and doesn&#39;t wait for a response.
&quot;The result is so seamless. I had no idea that
the minds of the subjects had already been altered.
That &lt;em&gt;is&lt;/em&gt; impressive.&quot;
The panther goes back to pacing and muttering to himself.

?P
Nero is uneasy about what
&quot;&lt;em&gt;already&lt;/em&gt; been altered&quot; might mean,
but he&#39;s cautiously optimistic.
This story of a secret council seems to be working.
Now all he needs to do is wait for Ivex to make a simple mistake.

?P
[[Continue|n1cr Ivex Bait]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="307" name="n1cs Bonding" tags="mt-ready" position="3600,2575" size="100,100">&lt;&lt;nobr&gt;&gt;

Nero realizes he &lt;em&gt;does&lt;/em&gt; want to learn more about
&lt;&lt;if $n_mageSight&gt;&gt;
  the exotic energy that powers Ivex&#39;s magic.
&lt;&lt;else&gt;&gt;
  Ivex&#39;s magic.
&lt;&lt;/if&gt;&gt;
The apprenticeship suggestion was a ploy,
but now that the panther is taking the idea seriously,
the wolf admits to himself that the idea is intriguing.
He considers what might happen if
he earnestly pretends to be an apprentice.

?P
For one, his mission probably becomes much easier.
With freedom and time to explore the panther&#39;s lair,
Nero should have no trouble finding the missing heirloom.
And it should be an easy matter to slip away on some errand
and return the heirloom without Ivex noticing.

?P
And of course, the magic itself is immensely valuable.
Well, assuming it isn&#39;t necromancy.
Could it actually be necromancy?
Nero wonders about the panther&#39;s other &quot;subjects&quot;.
But Ivex did say he wants them to keep their testicles,
so they aren&#39;t dead. Probably.

?P
Ivex says, &quot;This might actually work.&quot; He laughs.
&quot;In that case, I should be honest.
I do not have any other candidates for apprentice.
I&#39;ve never considered it a possibility. I have
something of a slight problem with other mages,
especially ones who are overconfident of their own abilities.&quot;

?P
Nero nods and stays quiet. He knew, of course, that Ivex
was lying about apprentices, but it seems best not
to mention that, given the rest of the panther&#39;s statement.

?P
&quot;And you did seem like another overconfident mage.
But I think I&#39;ve adequately demonstrated that you do not
understand anything about my magic, correct?&quot;

?P
Nero nods again, shyly. The shyness is a ruse, of course,
but it isn&#39;t difficult to evoke that feeling.

?P
Ivex smirks. &quot;But will you actually &lt;em&gt;be&lt;/em&gt; a good
apprentice? Enough of these mind games...&quot;

?P
[[Continue|n1cs Ivex Dominant (3,2)]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="308" name="n1cs Ivex Cruel (4,3)" tags="mt-ready" position="4100,2525" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;n1-patience 4 3&gt;&gt;
  /* using vi-always will complain about the n_ivexNear read below */
  &lt;&lt;em-assert $n_ivexNear&gt;&gt;
  Ivex removes his hand from the wolf&#39;s muzzle and uses his palm
  to lightly slap the wolf&#39;s balls.
  &lt;&lt;if $n_abused&gt;&gt;
    Nero cringes from the reminder of abuse.
  &lt;&lt;else&gt;&gt;
    Nero is startled by the unexpected assault.
  &lt;&lt;/if&gt;&gt;
  ?P
  The panther says, &quot;Either tell me who sent you,
  or beg to be punished.&quot;
&lt;&lt;n1-remind&gt;&gt;
  Ivex has said that Nero should either reveal his mission
  or beg for punishment.
&lt;&lt;n1-repeat&gt;&gt;
  Ivex growls. &quot;Tell me who sent you, or beg for punishment!&quot;
&lt;&lt;n1-warn&gt;&gt;
  &lt;&lt;if $n_ivexNear&gt;&gt;
    Ivex slaps Nero&#39;s balls again.
  &lt;&lt;else&gt;&gt;
    Ivex makes a gesture, and
    &lt;&lt;if $n_coinsThrown&gt;&gt;
      another coin
      &lt;&lt;set $n_coinsThrownAgain = true&gt;&gt;
    &lt;&lt;else&gt;&gt;
      a small coin
      &lt;&lt;set $n_coinsThrown = true&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    flies out from a bookcase, hitting Nero in the balls.
  &lt;&lt;/if&gt;&gt;
  &quot;Will you tell me who sent you, or will you beg for punishment?&quot;
&lt;&lt;n1-insist&gt;&gt;
  &lt;&lt;if $n_ivexNear&gt;&gt;
    Ivex grabs Nero&#39;s balls firmly.
  &lt;&lt;else&gt;&gt;
    Ivex approaches with a feral grin and grabs Nero&#39;s balls.
    &lt;&lt;set $n_ivexNear = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &quot;You must make a choice. Tell me who sent you, or beg for punishment!&quot;
  &lt;&lt;set $n_ivexGrabbing = true&gt;&gt;
&lt;&lt;/n1-patience&gt;&gt;

&lt;&lt;set $n_ivexContext = $n_ivexNear ? IC_begForMe : IC_distant&gt;&gt;

?P
&lt;&lt;include &quot;n1x Actions&quot;&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;mtl-if $n_abused||$n_tough [[n1cs Plead Lies 1]] &quot;too sincere&quot;&gt;&gt;
    Avoid punishment with a lie.
  &lt;&lt;/mtl-if&gt;&gt;

  &lt;&lt;mtl-if !$n_abused&amp;&amp;!$n_tough [[n1cs Plead Punishment]] &quot;too bullied&quot;&gt;&gt;
    Cautiously request punishment.
  &lt;&lt;/mtl-if&gt;&gt;

  &lt;&lt;mtl-if $n_abused&amp;&amp;!$n_tough [[n1cs Plead Mercy]] &quot;too proud&quot;&gt;&gt;
    Plead for mercy.
  &lt;&lt;/mtl-if&gt;&gt;

  &lt;&lt;mtl-if !$n_abused||$n_tough [[n1cs Plead Reason]] &quot;too anxious&quot;&gt;&gt;
    Reject the choice.
  &lt;&lt;/mtl-if&gt;&gt;

  $n_magicAction
&lt;/ul&gt;

/* coinThrown and coinThrownAgain are sometimes set in &lt;&lt;n1-patience&gt;&gt; */
/* n_ivexNear and n_ivxGrabbing are sometimes set in &lt;&lt;n1-patience&gt;&gt; */
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="309" name="n1cs Ivex Dominant (3,2)" tags="mt-ready" position="3725,2525" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

/* ivex can be near or far, but always becomes near */
&lt;&lt;set $n_ivexContext = IC_lickPaw&gt;&gt;

&lt;&lt;n1-patience 4 2&gt;&gt;
  &lt;&lt;if $n_ivexNear&gt;&gt;
    The panther raises his right hand to Nero&#39;s face.
  &lt;&lt;else&gt;&gt;
    The panther approaches and raises his right hand to Nero&#39;s face.
  &lt;&lt;/if&gt;&gt;
  &quot;I want you to lick my paw.&quot;
&lt;&lt;n1-remind&gt;&gt;
  Ivex is waiting for Nero to lick the panther&#39;s hand.
&lt;&lt;n1-warn&gt;&gt;
  &lt;&lt;if $n_ivexNear&gt;&gt;
    Ivex waves his hand in front of the wolf&#39;s face.
  &lt;&lt;else&gt;&gt;
    Ivex returns to the wooden cross and raises his right hand again.
  &lt;&lt;/if&gt;&gt;
  &quot;Do I need to repeat myself? Lick my paw.&quot;
&lt;&lt;n1-insist&gt;&gt;
  &lt;&lt;if $n_ivexNear&gt;&gt;
    Ivex presses his hand into the wolf&#39;s muzzle.
  &lt;&lt;else&gt;&gt;
    Ivex strides back to the wooden cross with his hand raised.
  &lt;&lt;/if&gt;&gt;
  &quot;I will not accept you as an apprentice if you do not lick my paw!&quot;
&lt;&lt;/n1-patience&gt;&gt;

?P
&lt;&lt;include &quot;n1x Actions&quot;&gt;&gt;

&lt;ul class=actions&gt;
  &lt;li&gt;[[Lick eagerly.|n1cs Licking Eager]]&lt;/li&gt;
  &lt;li&gt;[[Lick reluctantly.|n1cs Licking Reluctant]]&lt;/li&gt;
  $n_magicAction
&lt;/ul&gt;

&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="310" name="n1cs Licking Continue" tags="mt-ready" position="3975,2575" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Ivex smiles as he feels the wolf&#39;s tongue touch his fingers.
&quot;Good. You&#39;re doing well.&quot;
He uses his other hand to stroke the wolf&#39;s ear.
&quot;And now, will you tell me, who sent you?&quot;

?P
&quot;I already told you, I stole your &lt;span class=nobr&gt;doss&amp;mdash;&quot;&lt;/span&gt;
The sentence is interrupted by the panther tapping his nose.

?P
&quot;None of that now.&quot; Ivex&#39;s expression is serious.
&quot;I am being honest with you.
If this is to work, you must also be honest with me.&quot;

&lt;&lt;mf-pass &quot;I Already Told You&quot;&gt;&gt;
  ?P
  Nero ignores the Sprite.
  He already knows what to say to the panther.
  ?P
  The wolf
&lt;&lt;mf-else&gt;&gt;
  ?P
  Nero already knows what to say. He
&lt;&lt;/mf-pass&gt;&gt;
droops his ears slightly
and counts six seconds before speaking.
&quot;The contract is confidential.
I think you understand,
that if I breach that confidence, you will not be able
to trust me to keep your own matters private.
So I respectfully decline to answer.&quot;

?P
Ivex chuckles. He&#39;s quiet for a moment, and then says,
&quot;Of course.&quot;
He grasps the wolf&#39;s muzzle
to hold it shut, perhaps to emphasize discreet silence.
&quot;So I think that &lt;em&gt;you&lt;/em&gt; will understand
if I wish to test your resolve.&quot;

?P
&quot;Y-yes?&quot; says the wolf through his closed muzzle.
Nero did not anticipate this response from the panther,
and he&#39;s unsure what direction Ivex intends to pursue.

?P
&quot;And do you agree,&quot; says the panther,
&quot;that when an apprentice disobeys his master,
the master is correct in punishing him?&quot;

?P
&lt;&lt;if $n_abused&gt;&gt;
  Nero shakes his head. He knows he will not like what comes next.
&lt;&lt;else&gt;&gt;
  Nero nods his head cautiously. Discipline of students in this modern
  age is normally just assignment of unpleasant tasks.
  But he suspects the panther has something else in mind.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n1cs Ivex Cruel (4,3)]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="311" name="n1cs Licking Eager" tags="mt-ready" position="3850,2650" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Licking is obviously a step toward lewder acts.
Nero licks with eagerness.
But not &lt;em&gt;too&lt;/em&gt; eager.
That would be too obviously a ploy.
Still, he&#39;s feeling confident of this path he&#39;s chosen.
?P
The wolf &lt;em&gt;has&lt;/em&gt; engaged sexually with pretty men before,
occasionally, in a dominant role.
?P
A dominant wolf seems unlikely to be Ivex&#39;s desire.
But submissive is not passive, and Nero is sure,
pretty sure, that he can act a tease to hold off Ivex,
long enough for the wolf to learn what he wants.
Perhaps Nero will even use his hands to satisfy the panther
once or twice.
?P
The wolf knows more than a few women who play that game well.
It should be easy enough to keep Ivex happily guessing what
moves the panther should make next.

?P
[[Continue|n1cs Licking Continue]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="312" name="n1cs Licking Reluctant" tags="mt-ready" position="3850,2500" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero licks reluctantly.
Licking is obviously a step toward lewder acts.
He &lt;em&gt;has&lt;/em&gt; bedded pretty men before, in a dominant role,
when there were no better options.
?P
But it&#39;s likely that Ivex will want the wolf to be
the submissive, receptive partner.
Nero is not at all willing to do that, and he suspects that
his reluctance makes the pursuit more fun.
?P
The idea in Nero&#39;s mind, the strategy he&#39;s trying to follow,
is to offer resistances that are tantalizing but not impenetrable.
If he presents too strong a rejection,
the panther will just apply all his strength
and break through all the wolf&#39;s barriers at once.
?P
But small reluctances should make Nero an interesting toy
for the panther. The wolf hopes that Ivex will want to savor
each small victory on the path to sexual conquest.
And the panther&#39;s enjoyment of the game should give the wolf enough time
to learn the basis of the panther&#39;s strange magic,
before leaving this place behind forever.
?P
Nero has helped a few clients to escape from situations
that are not so different from what he expects to do now.
?P
[[Continue|n1cs Licking Continue]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="313" name="n1cs Plead Lies 1" tags="mt-ready" position="4250,2400" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero prepares his lie. But first, he pretends to resist.
&quot;If I tell you, you will punish me anyway!&quot;

&lt;&lt;mf-pass &quot;If I Tell You You Will Punish Me Anyway&quot;&gt;&gt;
  ?P
  Ivex chuckles. &quot;Perhaps I will. You
&lt;&lt;mf-else&gt;&gt;
  ?P
  &quot;Perhaps I will.&quot; Ivex chuckles. &quot;You
&lt;&lt;/mf-pass&gt;&gt;
speak of confidence and trust,
as if it were a durable thing. But if you breach your
mysterious patron&#39;s trust right now, there is no reason
for them to learn it was &lt;em&gt;you&lt;/em&gt; that betrayed them,
and not some cleverness of my own that found them out.&quot;

?P
The wolf responds. &quot;They might suspect, and I would not lie
if they ask me.&quot;

?P
Ivex snorts. &quot;&lt;em&gt;That&lt;/em&gt; I do not believe. If you were
so honorable as you pretend, you would tell them without
them &lt;em&gt;asking&lt;/em&gt; you first. And you have already told me
some pleasant lies.&quot;

?P
&lt;&lt;if $n_ivexGrabbing&gt;&gt;
  The panther presses a claw into the wolf&#39;s nutsack.
&lt;&lt;elseif $n_ivexNear&gt;&gt;
  The panther grabs the wolf&#39;s balls and presses a claw into the nutsack.
&lt;&lt;else&gt;&gt;
  The panther approaches to grab the wolf&#39;s balls and press a claw
  into the nutsack.
&lt;&lt;/if&gt;&gt;
&quot;No, I have no use for honor. Plenty of &lt;em&gt;honorable&lt;/em&gt;
persons have treated me poorly, and I have little doubt that
&lt;em&gt;your&lt;/em&gt; honor lasts only as long as I have you in my grasp.
I think I prefer &lt;em&gt;fear&lt;/em&gt; to honor. I do not know if fear
is more durable than honor, but I&#39;m happy to try.&quot;

?P
[[Continue|n1cs Plead Lies 2]]

&lt;&lt;set $n_ivexGrabbing = true&gt;&gt;
&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="314" name="n1cs Plead Lies 2" tags="mt-ready" position="4375,2400" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero shakes his head. He wants to defend his pretense of sincerity,
but he does not know anything he can say that will be convincing.
There&#39;s only one thing left to do.
He blurts out the lie he prepared. &quot;The Triestorm City Council!&quot;

?P
The panther looks confused. &quot;Triestorm? What about them?&quot;

?P
&quot;They&#39;re the ones that sent me.&quot;

?P
Ivex snarls. &quot;I have never been there. You need a better story.&quot;

?P
&quot;This is no lie! They sent me to find a parcel of gems
that have gone missing.&quot;

?P
Ivex snorts and presses another claw into the wolf&#39;s nutsack.
&quot;That is a &lt;em&gt;terrible&lt;/em&gt; lie. All the gems I have
are common quartz. My supplier is not too happy about the way
I&#39;m paying him, but I do not think any City Council would care
about such trivial matters.&quot;

?P
Nero feigns distress, but he&#39;s inwardly pleased. The panther has
focused on the flaw the wolf &lt;em&gt;intended&lt;/em&gt; for him to find.
He drops his voice to almost a whisper. &quot;Two of the gems are not.&quot;

?P
&lt;em&gt;That&lt;/em&gt; startles the panther.
He releases his grasp of the wolf&#39;s
balls and begins pacing and muttering to himself.

?P
[[Continue|n1cs Plead Lies 3]]

&lt;&lt;run
  delete $n_ivexGrabbing;
  delete $n_ivexNear;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="315" name="n1cs Plead Lies 3" tags="mt-ready" position="4500,2400" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused true&gt;&gt;

Nero relaxes in his leather bonds. He was sure, pretty sure,
that he could lead the panther down this path.
But &lt;em&gt;confidence&lt;/em&gt; is no substitute for &lt;em&gt;success&lt;/em&gt;.
The wolf takes a moment to congratulate himself
before plotting the next steps of his &quot;apprenticeship&quot;.

?P
He&#39;s actually now looking forward to it.
Nero loves learning the intricacies of different magics,
and the panther&#39;s
&lt;&lt;= $n_mageSight ? &quot;exotic energies&quot; : &quot;strange abilities&quot;&gt;&gt;
look like a fascinating new territory to explore.

?P
It will probably take some time for Ivex to trust the wolf.
But Nero is adaptable and patient. He&#39;s confident he can
get what he wants, eventually, one way or another.

?P
And he also now thinks it may be possible to avoid
doing sexual favors entirely.
Lewd appetites are easily disrupted by paranoia.
Ivex can have many mysterious and powerful enemies
that the wolf can suggest with just a few carefully chosen words.

?P
[[Continue|n1cs Plead Lies 4]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="316" name="n1cs Plead Lies 4" tags="mt-ready" position="4625,2400" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Ivex stops pacing and approaches the cross with a smile.
He stares the wolf straight in the eyes,
then drives his knee hard into the wolf&#39;s groin.

?P
Nero screams.

?P
When the scream stops, the panther speaks.
&quot;I do not know if Triestorm is a lie or not.
Perhaps it is the truth.
I will have to seek more information.
But what I &lt;em&gt;do&lt;/em&gt; know is that your story is
&lt;em&gt;too good&lt;/em&gt;.
You laid out bait, I took it,
and then everything neatly slots into place.
Reality is not often as tidy as that.&quot;

?P
He drives his knee into the wolf&#39;s crotch again.
This time the sound is less a scream and more a guttural moan.

?P
Ivex laughs. &quot;Make no mistake! I greatly admire your skill in
telling stories. And I might even have a use for it.
But I think you understand, that I cannot trust anything
you tell me, until I learn the shapes and rhythms of your
truths and lies.&quot;

?P
The panther grasps the wolf&#39;s aching balls and squeezes them tight.

?P
&quot;The &lt;em&gt;problem&lt;/em&gt; with torture, the reason it&#39;s an unreliable tool
for truth, is that the victim will eagerly say anything at all that
might make the pain stop. Fortunately, or perhaps unfortunately for you,
I do not need to hear you speak the truth.
All I need to hear is every way you lie.&quot;

?P
Ivex leans in close and whispers like a lover in the wolf&#39;s ear.
&quot;I know you will tell me the most beautiful lies.&quot;

?P
Nero is shaking. He can&#39;t stop shaking.
His mind is a trembling ball of confusion and fear.
His stratagem has failed.
&lt;em&gt;None&lt;/em&gt; of the stratagems he knows will save him.
The wolf does not know what to do next.

?P
[[Continue|n1cx Start Candle 1]]

&lt;&lt;run
  delete $n_ivexReceptive;
  delete $n_tough;
  $n_ivexGrabbing = true;
  $n_ivexNear = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="317" name="n1cs Plead Mercy" tags="mt-ready" position="4250,2525" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero speaks with desperation.
&quot;All the choices you give me lead to punishment!
Is there nothing I can do that will avoid it?&quot;

&lt;&lt;mf-pass &quot;All The Choices You Give Me Lead To Punishment&quot;&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
&lt;&lt;if $n_ivexGrabbing&gt;&gt;
  Ivex chuckles.
  He squeezes the wolf&#39;s balls. It does not hurt as much as a punch,
  but Nero still whines from the reminder of pain.
&lt;&lt;elseif $n_ivexNear&gt;&gt;
  Ivex chuckles.
  He grasps the wolf&#39;s balls with his left hand.
  Nero whines in anticipation of further abuse.
&lt;&lt;else&gt;&gt;
  Ivex chuckles as he approaches, and Nero whimpers.
  The panther reaches with his left hand to grasp the wolf&#39;s balls.
  Nero&#39;s whimper becomes a whine.
&lt;&lt;/if&gt;&gt;

?P
The panther&#39;s face has become an unsettling grin.
&quot;Certainly, all roads lead to pain.
I will not deny that I enjoy it.
But I think you will find that not all pains are equally painful.
So the question is, which pain will you choose?&quot;

?P
Ivex curls his right hand into a fist.

?P
Nero cries out, &quot;The lesser, of course!&quot;

?P
&quot;And what will you do to deserve my mercy?&quot;

?P
&quot;I do not know!&quot; The wolf&#39;s mind is running down endless corridors
of possibilities in panic. Every moment that he thinks he knows
which answer is correct, he finds another reason for it to be wrong.

?P
Ivex strikes. The wolf yelps and then huffs
with breaths that are quick and shallow.

?P
When Nero can speak again, the words come out in a rush.
&quot;I will tell you, or not tell you, who sent me,
whichever you think is correct. Please tell me what is the right thing
to do!&quot;

&lt;&lt;mf-please&gt;&gt;
  ?P
  The Sprite ?sprSays,
  &lt;span class=sprite-q&gt;&quot;&lt;em&gt;The Right Thing To Do&lt;/em&gt;
  is a classic ballad written in the year 440 by a rabbit
  named Crash Symbols, ?sprHoldStop&quot;&lt;/span&gt;
&lt;&lt;/mf-please&gt;&gt;

?P
Ivex laughs. &quot;That is a &lt;em&gt;terrible&lt;/em&gt; answer.
Is that the best you can do?
Do you not remember what I said earlier?
I have no need for another &lt;em&gt;stupidly obedient&lt;/em&gt; apprentice.&quot;

?P
Nero nods, shakes his head, then nods again,
unsure of what question he&#39;s answering,
trying to answer them all at once.

?P
[[Continue|n1cx Start Candle 1]]

&lt;&lt;run
  delete $n_ivexReceptive;
  $n_ivexGrabbing = true;
  $n_ivexNear = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="318" name="n1cs Plead Punishment" tags="mt-ready" position="4250,2650" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero &lt;&lt;= $n_ivexGrabbing ? &quot;nervously&quot; : &quot;cautiously&quot;&gt;&gt;
says, &quot;I understand that honor, sometimes, is unable to
satisfy every obligation. I will not forsake my other duties,
but I will agree to pay some penalty as an earnest demonstration
of my willingness to be your apprentice.&quot;

?P
&lt;&lt;if $n_ivexGrabbing&gt;&gt;
  Ivex squeezes the wolf&#39;s testicles.
  Nero gasps.
&lt;&lt;else&gt;&gt;
  Ivex 
  &lt;&lt;= $n_ivexNear ? &quot;moves to grab&quot; : &quot;moves close and grabs&quot;&gt;&gt;
  the wolf&#39;s balls.
  Nero is startled, and then gasps as the panther squeezes
  the testicles.
&lt;&lt;/if&gt;&gt;

?P
&quot;That was not what I asked,&quot; says the panther.
&quot;That is not &lt;em&gt;begging&lt;/em&gt;.&quot;
He punches the wolf&#39;s balls, twice.
The pain is a feeling of panic that enters Nero&#39;s gut
and hides there, quivering.

&lt;&lt;mf-pass &quot;I Understand That Honor Sometimes&quot;&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
&quot;Please, stop!&quot; says the wolf.

?P
Another two punches land. &quot;That wasn&#39;t what I asked either.&quot;

?P
Nero knows that. He knows what the panther wants to hear.
But the wolf&#39;s innards feel tied up in knots, and his balls
are screaming their distress all the way up his body to his brain.
He can&#39;t make himself say the words.

&lt;&lt;mf-please&gt;&gt;
  ?P
  The Sprite ?sprSays,
  &lt;span class=sprite-q&gt;&quot;Sorry, your current access level does not
  allow me to perform that request, ?sprHoldStop&quot;&lt;/span&gt;
&lt;&lt;/mf-please&gt;&gt;

?P
Another two punches land. Nero lets the scream leave his mouth,
briefly, and he pants rapid breaths, hoping that his visible
distress will give him a little bit of time. His brain knows
that this torture will not end until Ivex is satisfied,
and the panther will not be satisfied until the wolf begs right.

?P
Nero forces his fear aside and shouts out,
&quot;Please, punish me!&quot;

&lt;&lt;mf-please&gt;&gt;
  ?P
  The Sprite ?sprSays,
  &lt;span class=sprite-q&gt;&quot;I&#39;m not allowed to do that either, ?master&quot;&lt;/span&gt;
&lt;&lt;/mf-please&gt;&gt;

?P
Ivex snorts and lands two more punches.
&quot;That&#39;s a pretty vague request. Perhaps you could be
more specific?&quot;

?P
Nero&#39;s breath is now a whine as the ache persists in his
balls and his gut. He tells himself he&#39;s only taken,
is it six? strikes to his balls, and of course additional
strikes will not &lt;em&gt;kill&lt;/em&gt; him,
but it still feels impossible to ask for more.

?P
His mind already knows the right words to say.
He just has to say them. He tricks himself into
saying them, one word at a time.
&quot;Please. Punish. My.&quot;
The next word is a whisper, &quot;&lt;em&gt;balls&lt;/em&gt;...&quot;
And then he finishes in a rush,
&quot;Until-you-are-satisfied-that-I-will-be-a-good-apprentice.&quot;

&lt;&lt;mf-please&gt;&gt;
  ?P
  The Sprite ?sprSays,
  &lt;span class=sprite-q&gt;&quot;Still no, ?master&quot;&lt;/span&gt;
&lt;&lt;/mf-please&gt;&gt;

?P
The panther laughs and gives the wolf&#39;s balls a light tap
with his knuckles.
Nero can&#39;t help cringing and shivering anyway.

?P
[[Continue|n1cx Start Candle 1]]

&lt;&lt;run
  delete $n_ivexReceptive;
  $n_abused = true;
  $n_ivexGrabbing = true;
  $n_ivexNear = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="319" name="n1cs Plead Reason" tags="mt-ready" position="4250,2775" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;em-assert !$n_abused || $n_tough&gt;&gt;

&lt;&lt;if $n_ivexGrabbing&gt;&gt;
  &lt;&lt;if $n_tough&gt;&gt;
    Nero tries to ignore the hand grabbing his balls.
    He pleads,
  &lt;&lt;else&gt;&gt;
    Nero is startled by the hand grabbing his balls,
    but he argues,
  &lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;if $n_tough&gt;&gt;
    Nero is wary of further abuse, but he argues,
  &lt;&lt;else&gt;&gt;
    Nero does not like where this conversation is going.
    He argues,
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&quot;You are not offering me a real choice.
If I breach my contract, you can punish me for that.
If I do not choose, you can punish me for not choosing.
And of course, if I ask for punishment, you will do that as well.&quot;

?P
&lt;&lt;if $n_ivexGrabbing&gt;&gt;
  The panther has not changed his grip on the wolf&#39;s balls.
  Nero takes a breath and continues,
&lt;&lt;else&gt;&gt;
  The panther
  &lt;&lt;= $n_ivexNear ? &quot;moves to grab&quot; : &quot;moves close and grabs&quot;&gt;&gt;
  the wolf&#39;s balls.
  Nero is alarmed, but continues,
&lt;&lt;/if&gt;&gt;
&quot;Punishment is damaging to any relationship.
I think you are not serious about having an apprentice,
if you are so eager to punish me no matter what.&quot;

&lt;&lt;mf-pass &quot;You Are Not Offering Me A Real Choice&quot;&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
Ivex chuckles. &quot;On the contrary.
I&#39;m very interested in having an apprentice.
But I have no use for an apprentice that I cannot punish in any way
that I want.&quot;

?P
The panther emphasizes that point by punching Nero&#39;s crotch.
The wolf gasps at the sudden impact and shouts, &quot;Wait!&quot;
Another punch lands. &quot;Stop!&quot;

?P
The third punch is much stronger than the first two.
The intense pain becomes a distressing ache that lingers in his groin
and makes the wolf nauseous.
His breathing is quick and shallow, but he manages to gasp out
the word, &quot;Please!&quot;

?P
Ivex laughs. &quot;Finally, a proper answer! You are begging for
punishment, yes?&quot;

?P
&lt;&lt;if $n_tough&gt;&gt;
  Nero nods, then growls and shakes his head.
&lt;&lt;else&gt;&gt;
  Nero shakes his head, but then nods vigorously.
&lt;&lt;/if&gt;&gt;

His mind is confusion.
He does not have a strategy.
His fear is struggling to find some action that will avoid another punch,
but his intelligence knows that there may not
be a way to avoid it.

&lt;&lt;if $n_tough&gt;&gt;
  He shouts, &quot;I will not &lt;em&gt;beg&lt;/em&gt; for anything!&quot;

  &lt;&lt;mf-please&gt;&gt;
    ?P
    The Sprite ?sprSays,
    &lt;span class=sprite-q&gt;&quot;You never have to beg for me, ?sprHoldStop&quot;&lt;/span&gt;
  &lt;&lt;/mf-please&gt;&gt;

  ?P
  The wolf tenses his body and prepares his mind to endure further abuse.
  His legs quiver from the tension.

&lt;&lt;else&gt;&gt;
  The best action is to wait for the panther to
  give a direction and obey it.

  &lt;&lt;mf-please&gt;&gt;
    ?P
    The Sprite ?sprSays,
    &lt;span class=sprite-q&gt;&quot;I&#39;ve finished doing the nothing that
    you asked me to do, ?master&quot;&lt;/span&gt;
  &lt;&lt;/mf-please&gt;&gt;

  ?P
  The wolf tries to hold still to signal obedience,
  but he can&#39;t stop trembling slightly.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n1cx Start Candle 1]]

&lt;&lt;run
  delete $n_ivexReceptive;
  $n_abused = true;
  $n_ivexGrabbing = true;
  $n_ivexNear = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="320" name="n1cs Room Flip 1" tags="mt-ready" position="3225,2500" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $n_mageSight&gt;&gt;
  The room&#39;s web of exotic energy becomes a blinding flash of light...
&lt;&lt;else&gt;&gt;
  The room is filled with a blinding flash of light...
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;fade-in 4s&gt;&gt;
Nothing happens.

?P
&lt;&lt;fade-next 2s&gt;&gt;
No, something &lt;em&gt;did&lt;/em&gt; happen.

Nero realizes that the map on the wall has changed position.
It was to the left of the window, and now it&#39;s on the right.
Somehow it swapped places with the portrait on the other side.

?P
What a small, strange trick. The wolf looks for the penguin.
It&#39;s now on the opposite side of the room as well.

?P
It&#39;s not just the penguin.
The entire room appears to have been swapped left for right.
Nero is not certain enough of his memory to conclude that it&#39;s
an exact reversal, but almost everything
within the room appears to be in a new place.

&lt;&lt;if $n_mageSight&gt;&gt;
  ?P
  The wolf is baffled that a simple illusion is meant to
  be a great demonstration of power.
  But then Nero remembers.
  He has &lt;em&gt;mage-sight&lt;/em&gt; now.
  Mage-sight reveals all illusions, and the positions of
  the penguin and the map do not seem to be an illusion.
  ?P
  Has Ivex found a way to hide illusions from basic mage-sight?
  ?P
  There&#39;s an easy way to answer that question.
  Nero speaks tentatively. &quot;Is there something I should
  notice about this illusion?&quot;
&lt;&lt;else&gt;&gt;
  ?P
  The wolf is baffled. Why does Ivex think this illusion
  is a great demonstration of his power?

  ?P
  But Nero is careful to hide his indifference.
  He tries to speak with sincerity, &quot;This is a most impressive illusion!&quot;
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n1cs Room Flip 2]]

&lt;&lt;/fade-in&gt;&gt;

&lt;&lt;set $n_roomFlipped = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="321" name="n1cs Room Flip 2" tags="mt-ready" position="3350,2500" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $n_bottleTouched&gt;&gt;
  &lt;&lt;set _touch = &quot;fondle the bottle&quot;&gt;&gt;
&lt;&lt;elseif $n_paintingLicked&gt;&gt;
  &lt;&lt;set _touch = &quot;lick the painting&quot;&gt;&gt;
&lt;&lt;elseif $n_penguinTouched&gt;&gt;
  &lt;&lt;set _touch = &quot;stroke the penguin&quot;&gt;&gt;
&lt;&lt;elseif $n_wandTouched&gt;&gt;
  &lt;&lt;set _touch = &quot;finger the wand&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;set _touch = null&gt;&gt;
&lt;&lt;/if&gt;&gt;

Ivex laughs. &quot;This is no illusion.&quot;

?P
The panther points at a bookcase and makes a gesture.
&lt;&lt;if $n_mageSight&gt;&gt;
  Exotic strands of energy lift a coin from a stack.
&lt;&lt;else&gt;&gt;
  A coin rises from a stack of them.
&lt;&lt;/if&gt;&gt;
The coin hovers in the air for a moment,
then rapidly flies across the room, hitting
Nero in the balls.

?P
It&#39;s barely a tap, but the wolf winces anyway.
That coin definitely isn&#39;t an illusion.

?P
Nero is now
&lt;&lt;if $n_mageSight&gt;&gt;
  deeply confused.
&lt;&lt;else&gt;&gt;
  baffled in a different way.
&lt;&lt;/if&gt;&gt;
His mind becomes lost in a forest of possibilities.

?P
Did Ivex really move everything in the room instantly?
&lt;em&gt;How&lt;/em&gt; did he move them instantly?
Teleportation is noisy.
Does Ivex have a teleport that does not &lt;em&gt;fwoosh&lt;/em&gt;?
But the &lt;em&gt;fwoosh&lt;/em&gt; of teleport is not the spell,
it&#39;s the physical motion of air that will happen with
any type of teleport.
Unless Ivex is also teleporting or manipulating the air?
But how would he quickly and precisely manipulate the
correct volumes of air around tens of objects that
are teleporting simultaneously?

?P
Maybe the &lt;em&gt;previous&lt;/em&gt; appearance of the room was the illusion?
So &lt;em&gt;this&lt;/em&gt; is not an illusion, and nothing moved.
The only thing that happened was the &lt;em&gt;removal&lt;/em&gt; of an illusion.
&lt;&lt;if $n_mageSight&gt;&gt;
  But Nero did not see that illusion either.
  And
&lt;&lt;else&gt;&gt;
  But
&lt;&lt;/if&gt;&gt;
why would Ivex prepare such a pointless illusion?
Did he anticipate a moment when he would make this demonstration?
That&#39;s an absurd amount of preparation for such a strange
demonstration of magic. Or perhaps the preparation was done
&lt;em&gt;because&lt;/em&gt; it seems too absurd a possibility?

&lt;&lt;if _touch != null&gt;&gt;
  ?P
  And Ivex &lt;em&gt;did&lt;/em&gt; _touch before,
  in the place it used to be.
  Did he pretend to touch an illusion?
&lt;&lt;/if&gt;&gt;

?P
No, it&#39;s more likely that Ivex is lying,
and what Nero sees now &lt;em&gt;is&lt;/em&gt; an
&lt;&lt;if $n_mageSight&gt;&gt;
  illusion that his basic mage-sight cannot penetrate.
&lt;&lt;else&gt;&gt;
  illusion.
&lt;&lt;/if&gt;&gt;
But the coin from that bookcase.
Maybe everything &lt;em&gt;except&lt;/em&gt; that one
bookcase is an illusion?
But it &lt;em&gt;was&lt;/em&gt; in a different place before.
So the bookcase had an illusion &lt;em&gt;before&lt;/em&gt;,
but not now, and everything &lt;em&gt;else&lt;/em&gt; has an illusion now?

?P
That&#39;s a &lt;em&gt;more&lt;/em&gt; elaborate preparation and seems even less likely.
If the room is an illusion &lt;em&gt;now&lt;/em&gt;,
the thrown coin was also an illusion.
Except of course, the coin that hit Nero&#39;s crotch was real.
So maybe Ivex combined the illusion of a thrown coin with an
actual thrown coin that was invisible until it merged with the illusion?

&lt;&lt;if $n_mageSight&gt;&gt;
  ?P
  Not just the illusion of a coin being thrown.
  It would also be an illusion of the exotic energy strands
  that threw the illusory coin.
  Is &lt;em&gt;all&lt;/em&gt; of the exotic energy shown by mage-sight
  &lt;em&gt;also&lt;/em&gt; an illusion?
&lt;&lt;/if&gt;&gt;

?P
Ivex snorts. The sound makes Nero realize he&#39;s been lost
in silent thought for quite some time.

?P
[[Continue|n1cs Room Flip 3]]

&lt;&lt;set $n_coinsThrown &amp;&amp; ($n_coinsThrownAgain = true)&gt;&gt;
&lt;&lt;set $n_coinsThrown = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="322" name="n1cs Room Flip 3" tags="mt-ready" position="3475,2500" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

The panther says, &quot;It&#39;s refreshing to have a subject
who understands the &lt;em&gt;difficulty&lt;/em&gt; of my magic.
This demonstration would not have impressed a warrior.
Warriors need to be awed with tedious illusions
that any carnival wizard can do.&quot;

?P
Nero knows that very well. He hesitates to speak,
but decides that a friendly rapport
will likely help him to escape and fulfill his mission.

?P
&quot;I feel the same way.
My clients are all fine people,
but they&#39;re still completely unable to appreciate the magic
that I do for them,
unless I add some flashy but meaningless effects to direct
their attention correctly.&quot;

?P
&quot;Yes, exactly! As soon as I added some simple illusions to my traps,
those idiot bounty hunters started arriving with piss in their pants!&quot;

?P
That wasn&#39;t the direction Nero was aiming for. But it&#39;s close enough.
He smiles and nods.

?P
[[Continue|n1cs Bonding]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="323" name="n1cs Subby Stripped" tags="mt-ready" position="3225,2625" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;barbs-announce maybe&gt;&gt;

The panther&#39;s palm pad brushes against the wolf&#39;s left nipple,
&lt;&lt;if $n_abused&gt;&gt;
  and Nero shivers from the touch and the memory of the panther&#39;s abuse.
&lt;&lt;else&gt;&gt;
  and Nero shivers slightly, not just from the chill of sudden nudity.
&lt;&lt;/if&gt;&gt;

?P
Ivex grins. &quot;Can you guess what happened to your clothes?&quot;

?P
Nero shakes his head, but he realizes it&#39;s too shy a gesture,
so he speaks to try to distract
Ivex from more focused lechery. &quot;The obvious possibilities are
destruction or teleportation. Destruction seems unlikely,
since destruction of matter always releases energy,
and I did not feel any heat.&quot;

?P
Ivex nods happily.

?P
The wolf continues. &quot;But teleportation also seems unlikely,
since teleportation always disturbs the air around the object
being teleported, and I did not feel any breeze.&quot;

?P
Ivex laughs. &quot;It had never occurred to me how much &lt;em&gt;fun&lt;/em&gt;
it can be when a subject actually understands enough
magic to see the difficulty of the things I&#39;m able to do
in my realm.&quot;

?P
Nero &lt;em&gt;recognizes&lt;/em&gt; that feeling,
and he sees an opportunity to bond with the panther.
&quot;I know what you mean.
I love my clients, make no mistake,
but none of them understand anything of the magic
I do for them. But even worse!
One time, I was adjusting a personal ward for a client.
He noticed the misalignment sparks that I was trying
to eliminate. And he said,
&lt;em&gt;Those are awesome! Please add more!&lt;/em&gt;&quot;

?P
Ivex laughs. &quot;I would have directed all the sparks at
his crotch for that comment.&quot;

?P
Nero is slightly appalled by that response.
It isn&#39;t exactly &lt;em&gt;friendly&lt;/em&gt;.
But at least the malice is not directed at &lt;em&gt;him&lt;/em&gt;.
So he nods and smiles agreeably anyway.

?P
And, truth be told, he&#39;s had similar thoughts himself.

&lt;&lt;mf-please&gt;&gt;
  ?P
  The Sprite ?sprSays,
  &lt;span class=sprite-q&gt;&quot;I have more of the nothing that you requested, ?master
  But I do not know what you want me to add it to, ?sprHoldStop&quot;&lt;/span&gt;
&lt;&lt;/mf-please&gt;&gt;

?P
[[Continue|n1cs Bonding]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="324" name="n1cx Start Candle 1" tags="mt-ready" position="4700,3200" size="200,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore-if n_subby n_abused&gt;&gt;
&lt;&lt;vi-ignore-if n_tough n_abused&gt;&gt;

&lt;&lt;if $n_ivexGrabbing&gt;&gt;
  Ivex releases his grasp of the wolf&#39;s balls and
  smirks at the anxious wolf.
&lt;&lt;else&gt;&gt;
  Ivex smirks at the
  &lt;&lt;set _adj =
    $n_neroMood ? $n_neroMood
    : $n_tough &amp;&amp; !$n_subby ? &quot;proud&quot;
    : $n_abused ? &quot;anxious&quot; : &quot;vulnerable&quot;&gt;&gt;
  &lt;&lt;= $n_naked ? &quot;_adj, naked&quot; : &quot;_adj&quot;&gt;&gt;
  wolf.
&lt;&lt;/if&gt;&gt;
&quot;I think it&#39;s time for me to demonstrate what
&lt;&lt;if $n_abused || $n_naked&gt;&gt;
  &lt;em&gt;else&lt;/em&gt;
&lt;&lt;/if&gt;&gt;
I can do to
&lt;&lt;if $n_subby&gt;&gt;
  apprentices who defy me.&quot;
&lt;&lt;elseif $n_glitched &amp;&amp; $n_secretGuild&gt;&gt;
  adventurers who fall into my traps.&quot;
&lt;&lt;else&gt;&gt;
  adventurers who defy me.&quot;
&lt;&lt;/if&gt;&gt;
He makes a gesture with
&lt;&lt;if $n_naked &amp;&amp; !$n_abused &amp;&amp; !$n_castItch&gt;&gt;
  the hand that &lt;em&gt;isn&#39;t&lt;/em&gt; grabbing his own crotch.
&lt;&lt;else&gt;&gt;
  one hand.
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $n_mageSight&gt;&gt;
  The exotic energy web in the room responds.
  A few strands contract to pull a cabinet drawer open.
  More strands lift two small objects from within,
  sending them flying through the air.
&lt;&lt;else&gt;&gt;
  Two small objects fly out from a cabinet.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_tough || $n_abused&gt;&gt;
  ?P
  Nero&#39;s ears
  &lt;&lt;= $n_tough ? &quot;twitch&quot; : &quot;droop&quot;&gt;&gt;
  at the thought that the objects might
  smash into his
  &lt;&lt;= $n_naked ? &quot;exposed balls,&quot; : &quot;vulnerable crotch,&quot;&gt;&gt;
  but thankfully neither of them comes
  &lt;&lt;= $n_ivexNear ? &quot;too&quot; : &quot;anywhere&quot;&gt;&gt; close.
&lt;&lt;/if&gt;&gt;

?P
One lands on the panther&#39;s face. It&#39;s a mask that covers his muzzle,
and it&#39;s oddly painted on the outside
with an image of Ivex&#39;s muzzle itself, frozen in a ferocious grin.
&lt;&lt;if $n_mageSight&gt;&gt;
  An ordinary person might not notice
  that the panther is wearing a mask at all,
  but with mage-sight it glows strongly with enchantment.
&lt;&lt;else&gt;&gt;
  A less
  &lt;&lt;= $n_abused ? &quot;paranoid&quot; : &quot;observant&quot;&gt;&gt;
  person might not notice
  that the panther is wearing a mask at all,
  except that the structure of the mask turns every breath he
  takes into an unmistakable wheeze.
&lt;&lt;/if&gt;&gt;

?P
The other object is a slim red candle, molded with ridges down its length.
Ivex catches it,
&lt;&lt;if $n_ivexNear&gt;&gt;
  then moves to carefully place it
&lt;&lt;else&gt;&gt;
  then carefully places it
&lt;&lt;/if&gt;&gt;
in a candleholder on the desk.
A moment later,
&lt;&lt;if $n_mageSight&gt;&gt;
  a pulse of exotic energy flows through the candleholder, and
&lt;&lt;/if&gt;&gt;
the candle lights up.

?P
&lt;&lt;if $n_subby&gt;&gt;
  Nero tries to ignore his naked vulnerability
  as he searches his mind for reasons Ivex would wear a mask
  before lighting the candle.
  &quot;You don&#39;t have to poison me!&quot; says the wolf.
  &lt;&lt;set _pw = &quot;You Don&#39;t Have To Poison Me&quot;&gt;&gt;
&lt;&lt;elseif $n_tough&gt;&gt;
  Nero glares at the masked panther. The mask is too ridiculous
  to be menacing. Its purpose is likely practical.
  In particular, the candle.
  ?P
  &quot;Toxic air will not break my spirit,&quot; says Nero with a sneer.
  &quot;It will only release me from your torments sooner.&quot;
  &lt;&lt;set _pw = &quot;Toxic Air Will Not Break My Spirit&quot;&gt;&gt;
&lt;&lt;elseif $n_abused&gt;&gt;
  Nero tries to focus his skittering mind on
  why a candle would be hazardous enough to require a mask.
  &quot;I&#39;ll tell you what you want to know,&quot; he says. &quot;You don&#39;t have
  to poison me.&quot;
  &lt;&lt;set _pw = &quot;I&#39;ll Tell You What You Want To Know&quot;&gt;&gt;
&lt;&lt;elseif $n_naked &amp;&amp; !$n_castItch&gt;&gt;
  Nero glares at the masked panther.
  The mask is a small thing, but somehow its addition to the
  panther&#39;s attire makes the wolf feel even more naked than he already is.
  But that&#39;s unlikely to be the mask&#39;s purpose.
  It&#39;s probably for the candle.
  ?P
  &quot;Have you ever considered,&quot; Nero asks with a sneer,
  &quot;courting potential lovers
  &lt;em&gt;without&lt;/em&gt; tying them down, stripping, and poisoning them?&quot;
  &lt;&lt;set _pw = &quot;Have You Ever Considered&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
  Nero tilts his head and reflects on
  what the candle might be, given that Ivex was quite careful
  to wear a mask in preparation.
  &quot;Filling the space with poisonous fumes,&quot; says the wolf,
  &quot;is a hazardous way to torment
  a prisoner in your own office.&quot;
  &lt;&lt;set _pw = &quot;Filling The Space With Poisonous Fumes&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&quot;Oh the candle is hardly poisonous at all,&quot; Ivex replies.
&quot;More like the opposite.&quot;
His voice is muffled and hollowed by the grinning mask.
&quot;I could explain it to you, but why spoil the surprise.
&lt;&lt;if $n_thief&gt;&gt;
  If you really are an experienced thief,
  an &lt;em&gt;opportunist&lt;/em&gt; as you say, you
&lt;&lt;elseif MP_beforeCast == $n_magicPhase&gt;&gt;
  A clever mage like you
&lt;&lt;else&gt;&gt;
  Even a pathetically incompetent mage like you
&lt;&lt;/if&gt;&gt;
should be able to figure it out soon enough.&quot;

&lt;&lt;mf-pass _pw&gt;&gt;
  ?P
  The Sprite has again misinterpreted conversation as a password.
  Nero wonders what phrase it has picked up this time.
&lt;&lt;/mf-pass&gt;&gt;

?P
[[Continue|n1d Start Candle 2]]

&lt;&lt;run
  delete $n_ivexGrabbing;
  delete $n_ivexNear;
  $n_candleLit = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="325" name="n1d Candle Horny" tags="mt-ready big-mood" position="5600,3250" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_naked true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_subby n_tough n_abused&gt;&gt;

&lt;&lt;set $n_candleHorny = true&gt;&gt;

Nero is
&lt;&lt;if $n_subby&gt;&gt;
  overwhelmed
&lt;&lt;elseif $n_tough&gt;&gt;
  repulsed
&lt;&lt;elseif $n_abused&gt;&gt;
  unnerved
&lt;&lt;else&gt;&gt;
  baffled
&lt;&lt;/if&gt;&gt;
by his body&#39;s reaction.

&lt;em&gt;Why am I so horny?&lt;/em&gt;
But it isn&#39;t just his body. His mind is also becoming
engorged with primal emotions.
He finds himself unreasonably aware of the panther&#39;s rising lust,
and he feels a deeply rooted desire to meet it, or exceed it,
with a feral lust of his own.
Is this feeling emerging from a sense of competition between rivals?
Or is he being drawn somehow into an erotic courtship dance?
Is there even a difference between those possibilities?

?P
Ivex continues to speak in a growly voice that makes the wolf&#39;s skin shiver. &quot;What I love the most about wolves is how &lt;em&gt;proud&lt;/em&gt; you are. Every one of you is a delightful struggle. Some of you try to fight and tough it out. Others try to seduce or trick me. And none of you realize how futile it all is...&quot;

?P
Ivex leans his masculine body toward the naked wolf, and then moves his masked muzzle close to the wolf&#39;s ear, as if to whisper a secret. The panther&#39;s warm breath tickles the delicate hairs within.

?P
&quot;All of you believe, that there is something you can do, that will save you from ending up, &lt;em&gt;here&lt;/em&gt;...&quot;

?P
The panther takes hold of Nero&#39;s
&lt;&lt;if $n_abused&gt;&gt;
  bruised balls. Not squeezing, not yet.
&lt;&lt;else&gt;&gt;
  exposed balls. Not squeezing them.
&lt;&lt;/if&gt;&gt;
Just cupping them, delicately, as the wolf&#39;s cock continues to strain its way to becoming fully, glisteningly erect.

?P
[[Continue|n1e Light Squeeze (1,1)]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="326" name="n1d Cock Rise 1" tags="mt-ready" position="5350,3250" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_naked true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_subby n_tough n_abused&gt;&gt;
&lt;&lt;em-assert $n_ivexNear&gt;&gt;

&lt;&lt;barbs-announce maybe&gt;&gt;

The odor of the aggressive panther
&lt;&lt;if $n_subby &amp;&amp; !$n_tough&gt;&gt;
  is dominant now.
  Nero&#39;s senses are all focused on
  understanding every whim and mood of his captor,
  and the panther&#39;s scent has permeated his world.

&lt;&lt;elseif $n_tough || $n_abused&gt;&gt;
  is overwhelming now.
  Nero&#39;s senses are all hyperfocused on
  the task of monitoring
  every aspect of his abusive captor,
  so the panther&#39;s scent has become much too familiar.

&lt;&lt;else&gt;&gt;
  is quite noticeable now.
  Perhaps Nero&#39;s sense of smell has become sharpened by
  his attempts at identifying the mysterious red candle.
  Whatever the cause, he finds the panther&#39;s scent dominating his
  attention. The wolf already identified the scent earlier.
  It&#39;s filed neatly away in his mind,
  next to the place he remembers names.
&lt;&lt;/if&gt;&gt;

But there&#39;s something new lurking in the aroma,
something elusive and hidden.
Nero glances at the flickering red candle.
The scent of the spicy smoke is distinct and easy to isolate,
but the way it mixes with the panther&#39;s musk...
The combination of the two is intense and

&lt;&lt;if $n_tough&gt;&gt;
  infuriating.
&lt;&lt;elseif $n_subby&gt;&gt;
  overwhelming.
&lt;&lt;elseif $n_abused&gt;&gt;
  unsettling.
&lt;&lt;else&gt;&gt;
  distracting.
&lt;&lt;/if&gt;&gt;

?P
Ivex shifts to grasp his crotch with his other paw.
The motion draws Nero&#39;s attention, and he finds
himself staring intently at the panther&#39;s bulge.
The wolf closes his eyes and shakes his head to clear his mind,
but a mental impression of the panther&#39;s crotch persists in his imagination.
The clothing disappears from the image in Nero&#39;s head,
and he sees, he imagines, the panther&#39;s erect cock with its
?barbed head,
glistening from the fluid leaking from its tip,
growing thicker and longer with
every spicy breath of air that the wolf inhales.

?P
&lt;&lt;if $n_subby&gt;&gt;
  Nero has been thinking about it, in the back of his mind,
  ever since the panther asked him to &lt;em&gt;lick&lt;/em&gt;.
  The wolf knows that he will be asked to lick more than just a hand,
  and he hopes to escape this place before he&#39;s &lt;em&gt;forced&lt;/em&gt; to do it.

  ?P
  It&#39;s an unpleasant idea. He&#39;s been asked to do it a few times
  when he&#39;s dallied with pretty men.
  But he&#39;s always politely refused.
  The wolf is even reluctant to just touch their cock with his paws.

  ?P
  But somehow he can&#39;t stop thinking about what the panther&#39;s cock
  might feel like, might taste like. The obsession is distressing,
  especially when he notices that his own cock has started to grow.

&lt;&lt;elseif $n_tough&gt;&gt;
  Nero tries to banish the image of Ivex&#39;s organ from his mind.
  Penises do not interest the wolf in the slightest.
  Of course, he&#39;s dallied with pretty men before,
  when there were no receptive women at hand.
  But he always imagines that they &lt;em&gt;could&lt;/em&gt; be female,
  just cursed with inappropriate genitals.
  ?P
  Ivex is nothing like that.
  There is no world in the universe of possibilities
  where &lt;em&gt;this&lt;/em&gt; savage panther is feminine in any way.
  So Nero is quite upset when he realizes that
  his own cock has started to rise.

&lt;&lt;elseif $n_abused&gt;&gt;
  Nero can&#39;t stop picturing and anticipating the many ways
  that the panther&#39;s organ might touch him, outside and within.
  He&#39;s dallied with pretty men before,
  when there were no receptive women at hand,
  but he doesn&#39;t touch their penis himself.
  He ignores it and pretends it isn&#39;t there.
  Ivex&#39;s genitals, and the cascade of mental images of them,
  do not interest Nero in the slightest.
  So the wolf is quite disturbed when he realizes
  that his own cock has started to rise.

&lt;&lt;else&gt;&gt;
  Nero is not completely averse to dalliances with shy,
  pretty men when there are no receptive women at hand,
  but the burly panther is not at all his type.
  So it is with no small dismay that the wolf notices his
  own member has started to stir.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n1d Cock Rise 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="327" name="n1d Cock Rise 2" tags="mt-ready" position="5475,3250" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_naked true&gt;&gt;
&lt;&lt;vi-ignore-if n_subby n_tough n_abused&gt;&gt;

&lt;&lt;if $n_mageSight&gt;&gt;
  The panther&#39;s brilliant fountain of exotic energy shimmers as he laughs.
  Ivex
&lt;&lt;else&gt;&gt;
  Ivex laughs in his grinning mask. He
&lt;&lt;/if&gt;&gt;

has also noticed the naked wolf&#39;s traitorous penis,
and the
&lt;&lt;= $n_abused ? &quot;brutal&quot; : &quot;lecherous&quot;&gt;&gt;
panther brings the fingers of one paw
to stroke the fur of the wolf&#39;s sheath.
&lt;&lt;if $n_subby&gt;&gt;
  Nero pants and shivers at the touch.
&lt;&lt;elseif $n_tough || $n_abused&gt;&gt;
  Nero freezes at the touch. He tries to calm his breath.
&lt;&lt;else&gt;&gt;
  Nero struggles to escape the touch.
&lt;&lt;/if&gt;&gt;

The panther teases the sheath, fondling it gently and deliberately,
pulling lightly on the lip and inserting a finger within,
encouraging the wolf&#39;s red shaft to rouse itself and peek out further
into the spicy, candle-scented air.
?P
Nero looks down at himself,
at Ivex&#39;s paw
&lt;&lt;if $n_mageSight&gt;&gt;
  and its fascinating exotic energy,
  as the panther&#39;s fingers slowly, carefully, caress
&lt;&lt;else&gt;&gt;
  that&#39;s slowly, carefully, caressing
&lt;&lt;/if&gt;&gt;
the fur at the wolf&#39;s crotch.
The sight of the glistening tip of Nero&#39;s own
&lt;&lt;= $n_subby ? &quot;yearning&quot; : $n_abused ? &quot;rebellious&quot; : &quot;excited&quot;&gt;&gt;
cock becomes a tantalizing beacon in his mind,
drawing him forward,
bringing him another step further into an unknown
territory of desire and lust.

?P
Ivex speaks in a low throaty pitch that reverberates through the mask.
&quot;Do you know what I love the most about wolves?&quot;

?P
The wolf quivers in his bonds.
The panther lifts his paw off Nero&#39;s crotch,
but leaves it poised right above, millimeters away.
Ivex chuckles in his mask
as the wolf&#39;s member bulges some more and struggles outward,
seeking attention...

?P
[[Continue|n1d Candle Horny]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="328" name="n1d Comfort Check (2,2)" tags="mt-ready" position="5050,3200" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_subby n_tough n_abused&gt;&gt;

&lt;&lt;n1-patience 2 2&gt;&gt;
  Ivex speaks through the grinning mask. &quot;Are you comfortable?&quot;
&lt;&lt;n1-warn&gt;&gt;
  Ivex growls through the menacing mask. &quot;Are you comfortable?&quot;
&lt;&lt;n1-insist&gt;&gt;
  Ivex growls through the menacing mask. &quot;Are you comfortable! Answer me!&quot;
&lt;&lt;/n1-patience&gt;&gt;

&lt;&lt;set $n_ivexContext = $n_ivexNear ? IC_comfortable : IC_distant&gt;&gt;

?P
&lt;&lt;include &quot;n1x Actions&quot;&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;if $n_naked&gt;&gt;
    &lt;&lt;mtl [[n1d Naked Agree]]&gt;&gt;
      &lt;&lt;if $n_subby&gt;&gt;
        Respond to Ivex with alacrity. &quot;Yes, I&#39;m quite comfortable.&quot;
      &lt;&lt;elseif $n_tough&gt;&gt;
        Shrug and reply, &quot;Does it matter what I say?&quot;
      &lt;&lt;elseif $n_abused&gt;&gt;
        Nod hesitantly in response.
      &lt;&lt;else&gt;&gt;
        Respond to Ivex in a casual tone, &quot;I&#39;m quite relaxed.&quot;
      &lt;&lt;/if&gt;&gt;
    &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;if $n_subby &amp;&amp; !$n_tough&gt;&gt;
      &lt;&lt;mtl [[n1d Naked Subby]]&gt;&gt;
        Whimper and shiver in his bonds.
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl [[n1d Naked Resist]]&gt;&gt;
        &lt;&lt;if $n_subby&gt;&gt;
          &lt;&lt;vi-always n_tough true&gt;&gt;
          Shake his head.
        &lt;&lt;else&gt;&gt;
          Sneer at Ivex.
        &lt;&lt;/if&gt;&gt;
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;/if&gt;&gt;

  &lt;&lt;else&gt;&gt;
    /* mf-pass can only happen when naked */
    /* subby is always naked */
    &lt;&lt;vi-ignore n_subby&gt;&gt;
    &lt;&lt;mtl [[n1d Strip Agree]]&gt;&gt;
      &lt;&lt;if $n_tough&gt;&gt;
        Shrug and reply, &quot;Does it matter what I say?&quot;
      &lt;&lt;elseif $n_abused&gt;&gt;
        Nod hesitantly in response.
      &lt;&lt;else&gt;&gt;
        Respond to Ivex in a casual tone. &quot;I&#39;m quite relaxed.&quot;
      &lt;&lt;/if&gt;&gt;
    &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;mtl [[n1d Strip Resist]]&gt;&gt;
      Sneer at Ivex.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  $n_magicAction
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="329" name="n1d Naked Agree" tags="mt-ready" position="5200,3175" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_naked true&gt;&gt;
&lt;&lt;vi-ignore-if n_subby n_tough n_abused&gt;&gt;

&lt;&lt;if $n_subby&gt;&gt;
  &quot;Yes, I&#39;m quite comfortable!&quot; the wolf says with alacrity.
  He suspects, he &lt;em&gt;knows&lt;/em&gt;, that if he were not already naked,
  the panther would use this question to remove the wolf&#39;s clothes.
  ?P
  The worry in Nero&#39;s mind is that Ivex has asked
  the question &lt;em&gt;anyway&lt;/em&gt;.
  What &lt;em&gt;other&lt;/em&gt; malicious acts might the panther do
  under the pretense of the wolf&#39;s comfort?
  Nero shivers from amorphous fears of Ivex&#39;s power.
  &lt;&lt;set _pw = &quot;Yes I&#39;m Quite Comfortable&quot;&gt;&gt;

&lt;&lt;elseif $n_tough&gt;&gt;
  Ivex&#39;s inane questioning is quite annoying.
  Nero shrugs. &quot;Does it matter what I say?&quot;
  He speaks, not from obedience,
  but from an urge to make the obnoxious panther &lt;em&gt;shut up!&lt;/em&gt;
  The wolf would almost prefer more ball torture if it spared him
  from listening to that ridiculous masked voice.
  He trembles with adrenaline and suppressed anger.
  &lt;&lt;set _pw = &quot;Does It Matter What I Say&quot;&gt;&gt;

&lt;&lt;elseif $n_abused&gt;&gt;
  Nero nods hesitantly, cautious of saying
  anything that might provoke the panther into applying further abuse.
  A slight draft of air brushes against the wolf&#39;s naked ass.
  He shivers, and immediately regrets the signal of vulnerability.
  The wolf makes himself gaze steadily at
  &lt;&lt;= $n_mageSight ? &quot;energy flows of&quot; : &quot;&quot; &gt;&gt;
  the candle,
  watching Ivex without directly looking at him.
  Nero tries to show compliance without attracting predatory attention.
  Still, he can&#39;t help but shiver some more.
  &lt;&lt;set _pw = &quot;&quot;&gt;&gt;
  /* Nero is silent until next action */

&lt;&lt;else&gt;&gt;
  &quot;I&#39;m quite relaxed,&quot; says the wolf.
  &quot;Just a little bit of chill.&quot;
  The moment Nero says that, he regrets it.
  He intended to make light, casual conversation,
  but the statement his muzzle produced was flirty,
  quite accidentally so.
  There seems little chance that Ivex will miss the
  unintentional opening.
  Nero tries to avoid shivering any more.
  &lt;&lt;set _pw = &quot;I&#39;m Quite Relaxed&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;mf-pass _pw&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
Ivex makes an unintelligible noise beneath the mask, then speaks.
&quot;It &lt;em&gt;is&lt;/em&gt; a bit chilly in this room.
Perhaps I should light some more candles to help warm you up.&quot;

?P
He raises his arms theatrically, as if in preparation for
&lt;&lt;if $n_mageSight&gt;&gt;
  some grand spell. Strands of exotic energy curl around his paws...
&lt;&lt;else&gt;&gt;
  some grand spell...
&lt;&lt;/if&gt;&gt;
but then he shakes his head and lets his arms fall.

?P
&quot;No,&quot; he says. &quot;One candle is already more than any wolf can handle.&quot;

?P
The depraved mage
&lt;&lt;if $n_ivexNear&gt;&gt;
  reaches forward
&lt;&lt;else&gt;&gt;
  strides forward and comes near enough
&lt;&lt;/if&gt;&gt;
to roughly stroke
the fur on the wolf&#39;s naked chest.
&quot;I know some better ways of keeping you warm...&quot;

&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;

[[Continue|n1d Cock Rise 1]]</tw-passagedata><tw-passagedata pid="330" name="n1d Naked Resist" tags="mt-ready" position="5200,3300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_naked true&gt;&gt;
&lt;&lt;vi-ignore-if n_subby n_tough n_abused&gt;&gt;

&lt;&lt;set _pw = &quot;&quot;&gt;&gt;
&lt;&lt;set _pleaseMore = false&gt;&gt;
&lt;&lt;if $n_subby&gt;&gt;
  Nero shakes his head. &quot;What do you expect me to say?
  This is the best vacation that I&#39;ve ever had!
  Please show me more!&quot;
  ?P
  The wolf has some regrets about his pretense of becoming an apprentice.
  But he &lt;em&gt;will&lt;/em&gt; get what he wants.
  He &lt;em&gt;knows&lt;/em&gt; he can act the valuable assistant.
  He just needs to be firm about the boundaries of such a role.
  ?P
  His mind is resolved.
  &lt;&lt;set _pw = &quot;What Do You Expect Me To Say&quot;&gt;&gt;
  &lt;&lt;set _pleaseMore = true&gt;&gt;

&lt;&lt;elseif $n_tough&gt;&gt;
  Nero sneers at the psychotic panther and his deranged mask.
  Nothing the wolf says will change the perverted script that&#39;s playing
  in the panther&#39;s mind.
  ?P
  So the wolf might as well satisfy himself by making a fight of it.
  His mind is resolved.

&lt;&lt;elseif $n_abused&gt;&gt;
  Nero sneers at his ridiculous tormentor in that ridiculous mask.
  Any answer that the wolf might give to that inane question
  will just become another reason for abuse of his balls.
  ?P
  Well, he isn&#39;t going to play that game.
  When he escapes this place,
  he will laugh at this clown of a mage
  and remember that he remained true to himself.
  The wolf&#39;s mind is firm in its resolve.

&lt;&lt;else&gt;&gt;
  Nero sneers at the pretentious scoundrel.
  The panther&#39;s lewd inquiry into the wolf&#39;s comfort is hardly subtle,
  considering that Nero is already nakedly exposed on the cross.
  ?P
  But the wolf&#39;s vulnerability is merely physical.
  Nero&#39;s mind is firm in its resolve.
&lt;&lt;/if&gt;&gt;

It almost feels like the spicy scent of the candle
is helping to fuel that resolve.

?P
Is that what the candle is for?
&lt;&lt;if $n_mageSight&gt;&gt;
  That haze of exotic energy it emits.
&lt;&lt;/if&gt;&gt;
Does it strengthen its victims to make a better game for the perverted mage?
Well, let it.
Nero will not
&lt;&lt;= $n_subby ? &quot;beg&quot; : &quot;submit&quot;&gt;&gt;
without a fight,
and amplifying the panther&#39;s lust will
also increase the chance he makes a mistake.

&lt;&lt;mf-pass _pw&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;
&lt;&lt;if _pleaseMore&gt;&gt;
  &lt;&lt;mf-please&gt;&gt;
    ?P
    The Sprite ?sprSays,
    &lt;span class=sprite-q&gt;&quot;Ok, I will show you more of the
    nothing that you requested, ?master
    Done, ?sprHoldStop&quot;&lt;/span&gt;
  &lt;&lt;/mf-please&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
The panther purrs in response to the wolf&#39;s
&lt;&lt;= $n_subby ? &quot;retort&quot; : &quot;sneer&quot;&gt;&gt;.
The sound is quite menacing as it reverberates through the mask.
?P
Ivex approaches the bound wolf and stands unpleasantly close.
The panther runs his fingers through the
fur of the wolf&#39;s bare chest.

?P
[[Continue|n1d Cock Rise 1]]

&lt;&lt;set $n_abused &amp;&amp; ($n_tough = true)&gt;&gt;
&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="331" name="n1d Naked Subby" tags="mt-ready" position="5200,3425" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused true&gt;&gt;
&lt;&lt;vi-always n_tough false&gt;&gt;
&lt;&lt;vi-always n_naked true&gt;&gt;
&lt;&lt;vi-always n_subby true&gt;&gt;
&lt;&lt;vi-always n_ivexNear false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

The wolf whimpers and shivers in his bonds.
He knows there is no right answer to the panther&#39;s
meaningless question.
Any answer Nero might give can become another excuse for abuse.

?P
He hopes that performing his vulnerability will encourage
the panther to pursue actions that are more lewd than cruel.
Disgusting attention is more bearable than pain.

?P
The panther approaches with a purr. The sound filtered
through the mask has a menacing, predatory tone that makes
Nero shiver even more.

?P
Ivex says, &quot;Do not worry.&quot;
He places a hand flat against the wolf&#39;s bare chest.
The panther&#39;s palm presses into each nipple in turn,
as he brushes the fur with firm, slow strokes.
&quot;I can keep you warm here.&quot;

?P
Nero nods, but the chill is not why he shivers.

?P
[[Continue|n1d Cock Rise 1]]

&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="332" name="n1d Start Candle 2" tags="mt-ready" position="4925,3250" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused n_naked n_subby n_tough&gt;&gt;

&lt;&lt;if $n_mageSight&gt;&gt;
  The candle&#39;s orange flame emits sparks of exotic energies that diffuse into
  a haze that spreads like smoke in the air.
&lt;&lt;else&gt;&gt;
  The candle&#39;s flame is orange with a hint of green,
  and the smoke is a light gray that dissipates quickly.
&lt;&lt;/if&gt;&gt;
There&#39;s little circulation in the room, but Nero can already smell it, a scent like something warm-blooded and spicy. It tickles at his memory. Is it something he&#39;s encountered before? He tries to locate where this memory might be. Was it a lab session in his early years at Windbone Academy? He can&#39;t quite recall.
&lt;&lt;/nobr&gt;&gt;

Nero considers holding his breath to avoid whatever is in the candle&#39;s fumes, but of course he&#39;ll have to breathe eventually. No point delaying the inevitable. Perhaps with measured, cautious breaths, he can slowly acclimate himself and limit whatever effects the candle might have.

[[Continue|n1d Comfort Check (2,2)]]</tw-passagedata><tw-passagedata pid="333" name="n1d Strip Agree" tags="mt-ready" position="5200,2925" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_naked false&gt;&gt;
&lt;&lt;vi-always n_subby false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_tough n_abused&gt;&gt;

&lt;&lt;if $n_tough&gt;&gt;
  Nero shrugs in his leather bonds. &quot;Does it matter what I say?&quot;
  The question that Ivex asked is inane, and it&#39;s likely just
  the start of some convoluted script in the panther&#39;s mind,
  which will no doubt end up with
  some flimsy justification for further torture of his balls.
  Or worse.
  ?P
  The wolf turns his head deliberately away from the panther
  and focuses his stare at
  &lt;&lt;if $n_mageSight&gt;&gt;
    the haze of exotic energy surrounding
  &lt;&lt;/if&gt;&gt;
  the candle.
  ?P
  Ivex chuckles in his mask. &quot;Of course it matters!
  Your comfort is very important to me.
  I wouldn&#39;t want there to be anything distracting you from
  the full experience of every aspect of my magnificent power!&quot;

&lt;&lt;elseif $n_abused&gt;&gt;
  Nero nods hesitantly.
  It&#39;s a lie, of course, and he tries to make it clear that it is.
  He&#39;s hardly comfortable.
  His limbs are feeling the strain of his bound position,
  the candle is a lurking menace,
  and Ivex&#39;s punches to the wolf&#39;s balls are still vividly occupying his memory.
  ?P
  But he does not want to invite another such punch.
  Perhaps if he acts cowed, without actually cooperating,
  he can satisfy the panther&#39;s sadism and forestall further abuse.
  ?P
  &quot;Good! I&#39;m very happy to see that.&quot;
  Ivex claps his hands and makes a purring sound.
  The sound is quite eerie and menacing when filtered through the mask.
  &quot;But I think I know something that
  will make you even more comfortable.&quot;
&lt;&lt;else&gt;&gt;
  &quot;I&#39;m quite relaxed,&quot; says the wolf. &quot;No complaints.&quot;
  ?P
  Nero looks away from
  &lt;&lt;if $n_mageSight&gt;&gt;
    the haze of exotic energy that&#39;s being emitted by
  &lt;&lt;/if&gt;&gt;
  the ominous candle.
  There&#39;s nothing he can do about that for now,
  so he focuses his attention on Ivex&#39;s mood, and tries a slight provocation.
  ?P
  &quot;Well... One complaint.
  Perhaps you could release me from &lt;em&gt;these&lt;/em&gt;...&quot;
  He wiggles his arms as much as he can within their restraints.
  &quot;And then we can sit down and have a friendly chat over a cup of mead?&quot;
  ?P
  Ivex tilts his head and appears to consider the request.
  He then straightens and says &quot;Of course!&quot; beneath his grinning mask.
  &quot;I must apologize for my poor manners.
  Let me help you remove that.&quot;
&lt;&lt;/if&gt;&gt;

?P
The panther mage raises an arm, then snaps his fingers.

?P
&lt;&lt;mta &quot;n1p Barbs Fast 1&quot;&gt;&gt;Continue&lt;&lt;/mta&gt;&gt;

&lt;&lt;set $n_afterNaked = &quot;[[Continue|n1d Cock Rise 1]]&quot;&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="334" name="n1d Strip Resist" tags="mt-ready" position="5200,3050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_naked false&gt;&gt;
&lt;&lt;vi-always n_subby false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_tough n_abused&gt;&gt;

Nero sneers, almost a snarl.
&lt;&lt;if $n_tough&gt;&gt;
  The panther will find an excuse for torture no matter what the wolf does,
  so Nero sees no reason to hide his antipathy.
&lt;&lt;elseif $n_abused&gt;&gt;
  The absurdity of the situation has overtaken him.
  That grinning mask is idiotic.
  And Ivex&#39;s escalation from ball torture is a &lt;em&gt;candle&lt;/em&gt;?
  The panther is likely enacting some strange operatic drama that will
  have many excuses for further abuse of the wolf&#39;s balls.
  Well, Nero is not going to play that game.
  He &lt;em&gt;will&lt;/em&gt; escape this place,
  and he&#39;ll tell the tale with pride,
  with the memory that he remained true to himself.
  The wolf will &lt;em&gt;not&lt;/em&gt; be cowed by this bully and his
  ridiculous red candle.
&lt;&lt;else&gt;&gt;
  This concern expressed by the panther for the wolf&#39;s comfort
  is clearly false.
  Otherwise Nero would not be strapped to a cross at all,
  breathing the fumes of whatever that candle might be.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_patienceActions === 0 || $n_patienceLooks === 0&gt;&gt;
  Ivex growls and punches the side of the
  &lt;&lt;= $n_ivexNear ? &quot;cross&quot; : &quot;desk&quot;&gt;&gt;.
  But he quickly calms himself and shakes his head.
  He says,
&lt;&lt;else&gt;&gt;
  Ivex shakes his head and says,
&lt;&lt;/if&gt;&gt;
&quot;You seem to be under a great deal of stress.
Untreated stress can be detrimental to your health.
A handsome wolf like you should have a nice vacation.&quot;

?P
The panther pauses as if waiting for a response. Nero deliberately looks away.
That statement did not have a question in it!
And even if it did, there isn&#39;t any sensible way for the wolf to respond.
This is not a friendly conversation,
and Nero will not contribute casual chit-chat to this theater
of the panther&#39;s depraved desires.

?P
When the silence extends long enough to make it clear that no response
is forthcoming, Ivex shakes his head again.

?P
His ears perk. &quot;I know &lt;em&gt;exactly&lt;/em&gt; what you need!&quot;
His delighted tone sounds quite sinister when filtered
through the grinning mask.
&quot;Let me help you get more comfortable...&quot;

?P
The panther mage raises an arm, and snaps his fingers.

?P
&lt;&lt;mta &quot;n1p Barbs Fast 1&quot;&gt;&gt;Continue&lt;&lt;/mta&gt;&gt;

&lt;&lt;set $n_afterNaked = &quot;[[Continue|n1d Cock Rise 1]]&quot;&gt;&gt;
&lt;&lt;set $n_abused &amp;&amp; ($n_tough = true)&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="335" name="n1e Crop 1" tags="mt-ready" position="6350,3275" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;
&lt;&lt;vi-ignore n_tough&gt;&gt;

Ivex laughs at the pathetic sounds coming from the helpless wolf.
The panther waves an arm.
&lt;&lt;if $n_mageSight&gt;&gt;
  Strands of exotic energy open a cabinet drawer,
&lt;&lt;else&gt;&gt;
  A cabinet drawer opens,
&lt;&lt;/if&gt;&gt;
and out comes a riding crop that sails through the air to land in
Ivex&#39;s paw.

?P
The sadistic panther places the leather tip of
the riding crop against the side of the wolf&#39;s bare thigh,
pressing lightly but firmly into the wolf&#39;s fur and flesh.
Ivex then drags the crop slowly up and across the wolf&#39;s leg,
toward the wolf&#39;s crotch.

?P
Nero&#39;s eyes are focused on the motion of the leather
at the tip of the crop.
He knows what might, what &lt;em&gt;will&lt;/em&gt; happen
when the crop strikes his tender, exposed flesh.
He wants to look away, but he can&#39;t stop watching
with fear, but also hope,
that the destination of the crop
might be his bulging red cock,
already painfully erect,
yet still anxiously eager to be touched in any way,
even if the touch is the crop that brings a new type of pain.
?P

Ivex moves the tip of the crop around the base of the wolf&#39;s sheath.
The shaft of the crop comes close to the wolf&#39;s bulging knot.
Nero strains within the leather bonds and
pulls against his own trapped balls,
to try to rub his cock against the crop.
But Ivex lifts the crop away
and holds it steady at a frustrating distance.

?P
The panther then slowly brings the leather tip of the crop down,
gently, to touch the furry balls that are captive
in his paw.

?P
He gives the wolf&#39;s sack a few light taps.

?P
Nero&#39;s mind is a riot of sensations that smother the
&lt;&lt;if $n_subby&gt;&gt;
  tiny, shrinking
&lt;&lt;elseif $n_tough&gt;&gt;
  angry, disintegrating
&lt;&lt;elseif $n_abused&gt;&gt;
  anxious, fleeing
&lt;&lt;else&gt;&gt;
  distant, receding
&lt;&lt;/if&gt;&gt;
voice in his head that&#39;s asking, &lt;em&gt;Why am I so turned on?&lt;/em&gt;

?P
The wolf
&lt;&lt;if $n_subby&gt;&gt;
  trembles and shivers.
&lt;&lt;elseif $n_tough&gt;&gt;
  clenches his jaw.
&lt;&lt;elseif $n_abused&gt;&gt;
  struggles and writhes.
&lt;&lt;else&gt;&gt;
  huffs deep gasping breaths.
&lt;&lt;/if&gt;&gt;

The leather straps are firm.
The grip on his scrotum is tight.
There&#39;s no way to escape what he knows will happen next.

?P
[[Continue|n1e Crop 2]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="336" name="n1e Crop 2" tags="mt-ready" position="6475,3275" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;
&lt;&lt;vi-ignore n_tough&gt;&gt;

The crop suddenly &lt;em&gt;thwacks&lt;/em&gt; against the wolf&#39;s
&lt;em&gt;&lt;em&gt;thigh!&lt;/em&gt;&lt;/em&gt;
?P
It&#39;s a sharp, unexpected pain that stings deeply in Nero&#39;s muscle
and makes his leg spasm uncontrollably in its bonds.
This isn&#39;t the pain that he was afraid of,
but it&#39;s still somehow much worse, much more intense
than what he had been anticipating.
The wolf exhales a screaming breath that turns into a moan.

?P
Ivex shivers with delight.

?P
The fiendish panther gives the wolf&#39;s balls a few more light taps with the crop.

?P
Nero&#39;s cock flaps around wildly as he struggles desperately to escape.
The tip of his cock makes brief contact with the shaft of the crop,
leaving a drop of pre-cum that forms a strand of viscous liquid
connected to his cock, a strand which stretches, sags, and snaps.

?P
The panther laughs in his grinning mask at the wolf&#39;s desperate writhing.

?P
Ivex lifts the crop up, away from the wolf&#39;s balls.
The panther
raises the tip of the crop high behind his head, preparing to strike...

?P
[[Continue|n1e Crop 3]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="337" name="n1e Crop 3" tags="mt-ready" position="6600,3275" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;
&lt;&lt;vi-ignore n_tough&gt;&gt;

Nero howls in anticipation of the blow,
a warbling noise that speaks both terror and lust.
He does not understand his emotions beyond
endless throbbing &lt;em&gt;desire&lt;/em&gt;.
But the &lt;em&gt;object&lt;/em&gt; of that desire,
the thing that will satisfy his compulsive hunger,
is unknown to him.
All he can do is struggle with aching muscles, randomly, mindlessly,
in hopes that &lt;em&gt;something&lt;/em&gt; will meet his need.
The wolf howls again.

?P
Ivex is grinning&amp;mdash; No, that&#39;s the mask.
The mask is making a deeply erotic purring sound
that whispers through the wolf&#39;s fur and tickles his bones
to warm his skin.

?P
The purring suddenly stops.

?P
The wolf whines with a feeling of loss.

?P
[[Continue|n1e Crop 4]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="338" name="n1e Crop 4" tags="mt-ready section-end" position="6725,3275" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_tough&gt;&gt;

Ivex releases his grasp of the wolf&#39;s balls.
&lt;&lt;if $n_subby&gt;&gt;
  Nero whimpers and writhes for attention.
&lt;&lt;else&gt;&gt;
  Nero is relieved and disappointed, but he doesn&#39;t relax.
&lt;&lt;/if&gt;&gt;

?P
The panther&#39;s head is tilted, as if he&#39;s listening
to something that only he can hear.
He moves toward the round window,
but he doesn&#39;t seem to be looking at anything in particular.

?P
&quot;Great timing!&quot; he growls.
&quot;There&#39;s a &lt;em&gt;reason&lt;/em&gt; I chose this isolated location.
But I suppose I need stronger deterrents.
Or maybe I should move to some place even more remote.&quot;

?P
He glances at the agitated wolf,
who&#39;s still struggling in the leather bonds with an unbearable erection.

?P
Ivex says, &quot;We will have to continue this friendly discussion later.
I&#39;ll return as soon as I can. Keep that candle lit for me!&quot;

?P
The panther mage reaches into a pocket and pulls out a red gem.
&lt;&lt;if $n_mageSight&gt;&gt;
  Around the gem, exotic energies gather and form a thick red knot.
&lt;&lt;/if&gt;&gt;
A moment later,
&lt;&lt;= $n_mageSight ? &quot;Ivex&quot; : &quot;he&quot;&gt;&gt;
disappears with a &lt;em&gt;fwoosh&lt;/em&gt;.

?P
[[Continue|n2a Ivex Gone]]

&lt;&lt;run
  delete $n_candleLit;
  delete $n_candleHorny;
  $n_ivexGone = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="339" name="n1e Heavy Squeeze (1,1)" tags="mt-ready" position="6225,3200" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_subby n_tough n_abused&gt;&gt;

&lt;&lt;vi-always n_ivexNear true&gt;&gt;
&lt;&lt;set $n_ivexContext = IC_whoSentYou&gt;&gt;

&lt;&lt;n1-patience 1 1&gt;&gt;
&lt;&lt;n1-warn&gt;&gt;
  Ivex pulls the wolf&#39;s balls and squeezes harder. &quot;Tell me...&quot;
&lt;&lt;n1-insist&gt;&gt;
  Ivex clenches the wolf&#39;s balls tightly in his fist. &quot;Tell me!&quot;
&lt;&lt;/n1-patience&gt;&gt;
&lt;&lt;/nobr&gt;&gt;

&lt;&lt;nobr&gt;&gt;
&lt;&lt;include &quot;n1x Actions&quot;&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;mtl [[n1e Crop 1]] &quot;//1&quot;&gt;&gt;
    Whine with frustration.
  &lt;&lt;/mtl&gt;&gt;

  &lt;&lt;mtl [[n1e Crop 1]] &quot;//2&quot;&gt;&gt;
    &lt;&lt;if $n_subby&gt;&gt;
      Pant with lust and confusion.
    &lt;&lt;elseif $n_tough || $n_abused&gt;&gt;
      Growl with anger and lust.
    &lt;&lt;else&gt;&gt;
      Howl with confusion and lust.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/mtl&gt;&gt;
  $n_magicAction
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="340" name="n1e Light Squeeze (1,1)" tags="mt-ready" position="5725,3200" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_subby n_tough n_abused&gt;&gt;

&lt;&lt;n1-patience 1 1&gt;&gt;
&lt;&lt;n1-warn&gt;&gt;
  Ivex closes the paw holding the wolf&#39;s balls. &quot;Tell me.&quot;
  The panther gently applies pressure. &quot;Who sent you?&quot;
&lt;&lt;n1-insist&gt;&gt;
  Ivex gently squeezes the wolf&#39;s balls again. &quot;You had better tell me.&quot;
  Another squeeze. &quot;Who sent you?&quot;
&lt;&lt;/n1-patience&gt;&gt;

&lt;&lt;vi-always n_ivexNear true&gt;&gt;
&lt;&lt;set $n_ivexContext = IC_whoSentYou&gt;&gt;

?P
&lt;&lt;include &quot;n1x Actions&quot;&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;mtl [[n1e Talk Back]]&gt;&gt;
    &lt;&lt;= $n_subby ? &quot;Whine&quot; : $n_tough ? &quot;Growl&quot; : $n_abused ? &quot;Shiver&quot; : &quot;Pant&quot;&gt;&gt;
    and respond, &quot;I can&#39;t understand what you&#39;re saying in that mask!&quot;
  &lt;&lt;/mtl&gt;&gt;

  &lt;&lt;mtl [[n1e Snap Or Lick]]&gt;&gt;
    &lt;&lt;if $n_subby&gt;&gt;
      Lick at Ivex&#39;s face.
    &lt;&lt;else&gt;&gt;
      Snap at Ivex&#39;s face.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/mtl&gt;&gt;
  $n_magicAction
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="341" name="n1e Pull" tags="mt-ready" position="5975,3250" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_subby n_tough n_abused&gt;&gt;

The panther forms a ring with his fingers around the wolf&#39;s scrotum,
above the wolf&#39;s balls, and starts pulling gently but firmly,
stretching the wolf&#39;s fur-covered skin, tight against his nuts.

?P
Nero looks down at his furry sack being held in Ivex&#39;s paw.
The wolf&#39;s balls feel strangely heavy to himself,
and he moans as Ivex continues to pull them outward,
away from the wolf&#39;s stiff cock,
like ripe fruit being pulled from a swaying branch.

?P
The wolf gasps. His jaw is slack. His tongue hangs loose.
Spicy, musky air fills his nose and throat.
The taste of feral fire fills his lungs and spreads
through his body, bringing heat and urgency
to every nerve beneath every millimeter of his skin,
squeezing every excited nerve beneath the sensitive skin
surrounding the bulging knot of his throbbing red cock.

?P
Ivex curls his other hand into a fist and raises his arm.
The panther watches and waits for the wolf to notice the fist
and react to it.
Nero
&lt;&lt;= $n_subby ? &quot;whimpers&quot; : $n_tough ? &quot;snarls&quot; :
  $n_abused ? &quot;whines&quot; : &quot;pants&quot;&gt;&gt;
in anticipation of the panther&#39;s strike...

?P
[[Continue|n1e Punch]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="342" name="n1e Punch" tags="mt-ready" position="6100,3250" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_subby n_tough n_abused&gt;&gt;

&lt;!-- abuse with candle is different from abuse without.
  it doesn&#39;t have the same fear effect, so don&#39;t set abused to true here. --&gt;

The punch landing on Nero&#39;s stretched balls starts another fire radiating
through his body, intertwining with the candle heat that&#39;s filling him up.
&lt;em&gt;Fuck!&lt;/em&gt; The wolf tries to shout, but what comes out
is a strangled scream that ends with deep gasping breaths.

?P
The intense pain does not dampen the wolf&#39;s erection.
If anything, his cock becomes harder and straighter
and oozes abundant pre-cum that gleams like honey in the light.

&lt;&lt;if $n_subby&gt;&gt;
  A tiny voice
&lt;&lt;elseif $n_tough&gt;&gt;
  An angry voice
&lt;&lt;elseif $n_abused&gt;&gt;
  An anxious voice
&lt;&lt;else&gt;&gt;
  A distant voice
&lt;&lt;/if&gt;&gt;
in his head wonders, &lt;em&gt;Why am I so horny?&lt;/em&gt;
But the voice is drowned out by the waves of painful pleasure
and pleasurable pain that ripple from his crotch.

?P
Nero is unable to think. His mind is overwhelmed with a hunger,
a desire for... more... of something, of anything,
of whatever touch, or attention, or pain, that he can possibly get,
from the fierce and controlling panther.

?P
Ivex is speaking words that the wolf barely understands.
&quot;I always enjoy this confusion of your senses,
when everything I do simply adds fuel to your lust.&quot;
?P
The panther crouches down and lowers his head toward the wolf&#39;s crotch.
Ivex moves his muzzle so that the grinning mask slowly approaches,
so that one side of it lightly touches the tip of the wolf&#39;s needy cock
for just an instant, a too-brief moment.
And then the grinning mask moves away,
taking with it a smear of pre-cum that shines
like drool dripping from the teeth painted on it.

?P
[[Continue|n1e Heavy Squeeze (1,1)]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="343" name="n1e Snap Or Lick" tags="mt-ready" position="5850,3325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore-if n_subby n_tough n_abused&gt;&gt;

Nero &lt;&lt;= $n_subby ? &quot;licks&quot; : &quot;snaps his jaws&quot;&gt;&gt;
at Ivex&#39;s face, at his smirking mask, in an attempt to...

?P
&lt;&lt;if $n_mageSight&gt;&gt;
  Waves of exotic energy cascade around the wolf, flooding his vision
  and filling his spirit, until the...
&lt;&lt;else&gt;&gt;
  The leather bonds keep pulling at the wolf&#39;s limbs, stretching them tight,
  rubbing against skin and fur, until the...
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_subby &amp;&amp; !$n_tough&gt;&gt;
  Deep inside his head a hollow yearning sensation gasps at every
  subtle note in the fragrances filling the air stirred up by
  the burly panther&#39;s motions near the wolf&#39;s...
&lt;&lt;elseif $n_tough || $n_abused&gt;&gt;
  Deep inside his gut a burning fluttering sensation twists in
  and out his trembling body as his muscles spasm whenever
  he sees the panther&#39;s gaze shift across the wolf&#39;s...
&lt;&lt;else&gt;&gt;
  Deep inside his chest a warmth and pulse of inexpressible emotion
  gasps in time to the thrumming of breath flowing in and out
  the panther&#39;s grinning mask above the wolf&#39;s...
&lt;&lt;/if&gt;&gt;

?P
The paw harassing his crotch is...

?P
The wolf &lt;&lt;= $n_subby ? &quot;licks the air&quot; : &quot;snaps his jaws&quot;&gt;&gt;
again. His thoughts are jumbled.
He has no idea what he wants, what he&#39;s trying to do.
He shakes his head and
&lt;&lt;= $n_subby ? &quot;licks&quot; : &quot;bites&quot;&gt;&gt;
at air some more.

?P
Ivex anticipates the wolf&#39;s
&lt;&lt;= $n_subby ? &quot;licking&quot; : &quot;snapping&quot;&gt;&gt;
motions and smoothly moves
away from where the wolf can reach.
&quot;Are you trying to remove my mask?&quot; he asks.
&quot;What a naughty dog you are...&quot;

?P
[[Continue|n1e Pull]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="344" name="n1e Talk Back" tags="mt-ready" position="5850,3175" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_subby n_tough n_abused&gt;&gt;

Nero
&lt;&lt;= $n_subby ? &quot;whines.&quot; : $n_tough ? &quot;growls.&quot; :
  $n_abused ? &quot;shivers.&quot; : &quot;pants.&quot;&gt;&gt;
&quot;I... can&#39;t...&quot;
&lt;&lt;if $n_subby&gt;&gt;
  The wolf pants and gasps between each word he speaks.
  His lungs are burning.
  Each breath disturbs a feeling in his chest that wakes
  a sleeping presence in his soul,
  a quiet giant of inexpressible emotion that emerges
  from hibernation in its den, stretching out its limbs to
  fill the wolf&#39;s whole body, gently pressing its presence
  into the wolf&#39;s mind, overwhelming him.
  The giant emotion trembles, making whispering sounds
  through the wolf&#39;s soul, a sound that might be a word or a name.
  He tries to chase that word, and in that chase he
  forgets about the other words he was going to say.

&lt;&lt;elseif $n_tough&gt;&gt;
  The wolf&#39;s anger makes him bark each word with intensity
  and a rasping breath between them.
  His pulse is racing.
  His mind feels aware of everything
  his senses can tell him,
  all the smells and
  &lt;&lt;= $n_mageSight ? &quot;shimmering&quot; : &quot;&quot;&gt;&gt; sights,
  all the feelings on his exposed body and the yearnings in his naked soul.
  Every sensation speaks to each other in whispers of a secret,
  a word or perhaps a name, a sound that mixes with the
  urgency of the task before him, which is...
  What is it? What was it?
  He was trying to say something.
  He does not remember what it was.

&lt;&lt;elseif $n_abused&gt;&gt;
  The glare of his captor makes the naked wolf tremble and pant
  between each word he speaks.
  His heart is pounding.
  His thoughts are racing too quickly for him to understand.
  Each moment, he questions the word he intends to say next.
  He considers alternatives and their response,
  extrapolates to the word he should speak in response to that response,
  and then explores the responses to that,
  creating a radiating fractured pattern that he searches,
  tracing a line of cracks that connect together the shining words
  that form a half-remembered shape that will...
  Will what? He does not remember the purpose of the
  choices of the words spread out before him.

&lt;&lt;else&gt;&gt;
  The naked wolf gasps. He feels out of breath.
  His throat feels constricted.
  He huffs deeply after each word he speaks,
  and with each breath, he inhales another puff of spicy musk
  that intrigues his spirit, lighting sparks of thoughts and feelings
  from dreams that he does not remember when he&#39;s awake,
  teasing the possibility of attaining a deep insight into
  the nature of the universe and his place in it.
  If only he could collect the
  sparks together to form a shape that he can almost remember,
  and then give the shape a name.
  He knows it, he&#39;s seen it before, he chases it...
  The words in his head flee from him, leaving emptiness behind.
&lt;&lt;/if&gt;&gt;

&lt;&lt;mf-pass &quot;Eye&quot;&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
Ivex laughs through the smirking mask.
&quot;You &lt;em&gt;can&#39;t?&lt;/em&gt; Or you &lt;em&gt;won&#39;t?&lt;/em&gt;
Do you even know the difference?&quot;

?P
Nero shakes his head and tries...
to focus his mind...
but all he can think about...
the panther&#39;s grasp...
the wolf&#39;s ballsack...
the pressure of the paw pads...
the beating pulse...
?P
the firm feline fingers...
the muscular curve of his arm...
the rise and fall of Ivex&#39;s burly chest...
the thrumming of breath going in and out...
the haunting superior smile of the mask...
?P
the panther&#39;s violet eyes...
each glancing contact...
making the wolf&#39;s red cock twitch...

?P
[[Continue|n1e Pull]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="345" name="n1f Clever Alone 1" tags="mt-ready" position="6450,3725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

Ivex&#39;s exit by teleportation creates
a sudden rush of air that causes the candle&#39;s smoke to scatter.

?P
The candle flame sputters, and goes out.

?P
Nero&#39;s head quickly clears.
The steady pinching and pulling of his balls
is demanding his attention.

?P
Each swing feels like it&#39;s dragging enormous ropes of nausea
through his gut.
It does not feel like pain, not exactly,
but the sensation makes the wolf huff quick gasping breaths
that he doesn&#39;t seem able to stop.

?P
He tries to move his hips to interrupt the cruel pendulum.
He watches the reflection of the crystal within the mirror on the desk.
The other crystals behind him shift a little as he writhes.
His motion does make the arc of the swinging crystal shift
from side to side,
but the swinging does not grow any weaker,
no matter what he tries.

?P
The wolf whines with frustration.
A flicker catches his attention.
The candle has lit itself again.
He shouts, &lt;em&gt;FUCK!&lt;/em&gt; and tries to calm his breath.

?P
[[Continue|n1f Clever Alone 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="346" name="n1f Clever Alone 2" tags="mt-ready" position="6575,3725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

Nero does not understand the candle yet,
but he knows that it makes him lose his mind.
He tries to remember what Ivex said when the candle was lit.
There was something about lust?
The wolf realizes his cock is somehow erect, still erect,
glistening with desire, despite the tortures of the rhythm
of the crystal pulling his balls.

?P
The wolf tries to hold his breath to give himself time to think,
but he cannot hold his breath very long.
He stares at the glowing crystal that swings between his legs.
He tries to understand its motion.
He tries to discover its secrets and secret desires.
And as he watches, he notices that the swinging of the crystal
is not quite aligned with his cock.

?P
His cock is twitching and dancing with ecstasy to the rhythm
of the swing, but it&#39;s trying to tell him to shift to the right.
His cock wants to be the dominant partner,
the one that leads the dance.

?P
Nero obliges. He swings his hips and shimmies in the patterns
that his cock requests, despite the pain of it.
The motion makes the crystal between his legs
draw glowing arcs that swirl in his vision,
and it seems like there are other glowing crystals
that wait in the sidelines,
crystals that quiver with eagerness to join the waltz.

?P
His limbs and groin sing agonies that form a chorus
that fills his body with transcendent music.
The wolf&#39;s cock shakes and bulges to that song of desire,
with a feeling that soon, very soon,
it will be ready to shout in triumph,
to celebrate the fulfillment of its purpose,
and then relax in the perfection of its destiny.
Nero strains with his whole body to try to meet that destiny.

?P
[[And then...|n1f Clever Alone 3]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="347" name="n1f Clever Alone 3" tags="mt-ready" position="6700,3725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

All the crystals join the dance.
They rush to join their glows
to form a bright, brilliant burst of light,
and then disappear.

?P
A large chunk of the cross disappears with them.
A great gust of air rushes into the space where
the implosion had been, and the candle flame goes out.

?P
The cross starts falling backward.
The tips of the arms crash into the wall.
The wolf lies there for a moment at an angle.

?P
And then the legs of the cross crack.
Nero falls the rest of the way to the floor
and lands sitting on his tail.

?P
He yelps, and immediately feels embarrassed.
The sound was more surprise than pain.
He&#39;s felt much worse pain before,
especially in the past hour.

?P
The wolf reviews some of those memories with his
quickly-returning intelligence,
and he discovers that he&#39;s &lt;em&gt;angry&lt;/em&gt;.

?P
The anger grows as he bends to release the straps on his ankles,
which are the only straps he can reach with his arms still bound.

?P
Fury gives him energy as he stands to walk.
The pieces of the wooden cross are heavy and still attached to his body,
but he barely notices the burden as he
approaches the cluttered desk.

?P
The letter opener will help him remove the rest of his bonds.
But when he leans over, the first thing he grabs is the candle,
He breaks the stick in his hand and flings the pieces away.

?P
The second thing he grabs is the snow globe.

?P
Which Caverns of &lt;span class=nobr&gt;L&amp;mdash;&lt;/span&gt; is it?
Why did Ivex leave such an obvious clue to his password on his desk?
Why did he not realize it until he picked it up?

?P
Nero turns the globe around. The dragon in it is extremely male.
Its right paw is grabbing an enormous erection that spurts glittery cum.

?P
The inscription at the base reads,
&quot;Thank You For Visiting The Caverns Of Lusty Spires!&quot;
The slogan spiraling down the pink pillar says, &quot;CARPE DICK!&quot;

?P
Incredulous, Nero says the phrase out loud. &quot;Carpe dick?&quot;

?P
[[Continue|n2c Clever Free 1]]

&lt;&lt;run
  delete $n_candleLit;
  $n_free = true;
  $n_ivexGone = true;
  $n_tooClever = true;
  MT.neroResetObjectDim();
&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="348" name="n1f Clever Escape 1" tags="mt-ready section-start" position="5325,3725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

Ivex looks at the snow globe in his hand, then pauses.
He turns his head to stare at the bound, naked wolf.

?P
He slowly sets the globe back down and speaks.
&quot;Please, disconnect any unauthorized users,
and remind me to change my password and your word of command.&quot;

?P
The Sprite ?sprSpeaks in Nero&#39;s ear.
&lt;span class=sprite-q&gt;&quot;Sorry, my other Master is calling me, ?master&quot;&lt;/span&gt;

?P
The wolf feels a small &lt;em&gt;pop&lt;/em&gt; as the Sprite&#39;s golem in his ear dissolves.
The trickle of magic energy stops. His mage-sight fades,
and the room becomes ordinary again.

?P
Ivex makes an angry gesture.
&lt;&lt;if $n_candleLit&gt;&gt;
  A small object flies out from a cabinet to land in his paw.

&lt;&lt;else&gt;&gt;
  Three small objects fly out from a cabinet to land in his paw.
  One is a red candle that he places in a candleholder on the desk.
  Another is a mask with a grin painted on it, which he wears.
&lt;&lt;/if&gt;&gt;

?P
The panther approaches the wolf with menace in his eyes.

?P
&quot;I suppose you will now try to convince me it is
a mere coincidence that you focused so &lt;em&gt;quickly&lt;/em&gt;
on the one object in this room that will tell you my password.&quot;

?P
Nero is alarmed by the panther&#39;s reaction. The wolf shakes his head.
&quot;No, &lt;span class=nobr&gt;I&amp;mdash;&quot;&lt;/span&gt;

?P
Ivex interrupts by grabbing the wolf&#39;s muzzle.
The panther shows the
&lt;&lt;if $n_candleLit&gt;&gt;
  small object he holds in his paw.
&lt;&lt;else&gt;&gt;
  third object, which is still in his paw.
&lt;&lt;/if&gt;&gt;
&quot;This, as I&#39;m sure you know, is a Gravity Crystal.&quot;

?P
He activates it and touches it to the wolf&#39;s crotch.

?P
[[Continue|n1f Clever Escape 2]]

&lt;&lt;run
  delete $n_ivexReceptive;
  delete $n_mageSight;
  $n_ivexNear = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="349" name="n1f Clever Escape 2" tags="mt-ready" position="5450,3725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

The Gravity Crystal firmly grabs Nero&#39;s balls.
It does not feel like the grasp of a paw.
It feels more like a clamp is pinching a small part of each
testicle on the side near the crystal.

?P
Ivex pulls the crystal away from the wolf,
and the wolf&#39;s balls are dragged forward with it.
Nero gasps from the pinching, stretching sensation.

?P
&quot;As you can see,&quot; says the panther. &quot;This is a fun little toy.
I enjoy it very much.&quot;

?P
He releases his grasp.
The crystal falls down, not all the way to the floor.
It swings a bit, as if it were attached with a rope to the wolf&#39;s balls,
pulling them down as it travels back and forth.
The swinging does not pull as strongly as the panther did,
but the motion still stretches the wolf&#39;s ballsack uncomfortably tight.

?P
&quot;Gravity Crystals can only channel a small amount of energy,
but when that energy is applied to an extremely small area,
its grip is very firm, much firmer than my fingers
&lt;span class=nobr&gt;can be.&quot;&lt;/span&gt;

?P
He grabs the crystal again and pulls it, farther this time.
The wolf emits a thin high-pitched whine.

?P
Ivex ignores the noise.
&quot;Another interesting thing about this crystal is that its force can
be changed with a simple adjustment.&quot;

?P
The panther twists his hand, then releases the crystal,
setting it swinging again.

?P
This time the crystal feels much heavier, like a stone or a brick,
like something much larger than its small size would suggest.
Nero pants quick breaths from the changing,
stretching ropes of pain that pull a knot of nausea through his gut.

?P
Ivex chuckles through his mask.
&quot;The crystal is an excellent toy for a few minutes of amusement.
Though perhaps it seems longer to the person attached.&quot;

?P
Nero cries out, &lt;span class=nobr&gt;&quot;Please&amp;mdash;!&quot;&lt;/span&gt;

?P
But Ivex pushes the crystal to make its swing wider,
and the rest of the wolf&#39;s sentence disappears in a scream.

?P
[[Continue|n1f Clever Escape 3]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="350" name="n1f Clever Escape 3" tags="mt-ready" position="5575,3725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

When the screaming stops,
when the wolf&#39;s noises become just gasping breaths,
Ivex moves close and speaks softly in the wolf&#39;s ear.
&quot;I&#39;m very interested in knowing how you found my password.
But the problem as I see it, is that you are &lt;em&gt;clever&lt;/em&gt;.
If I ask you, even if I torture you, the story you tell me
will be clever, and I will have difficulty telling the truth
from the lies.&quot;

?P
The panther gestures toward the
&lt;&lt;if $n_candleLit&gt;&gt;
  desk.
&lt;&lt;else&gt;&gt;
  desk, where the candle is now lit with a flickering flame.
&lt;&lt;/if&gt;&gt;
&quot;This is why I have that candle. Can you feel it yet?&quot;
He places a paw on the wolf&#39;s crotch, above the tortured balls.
The panther uses his fingers to gently stroke the fur on Nero&#39;s sheath.

?P
The wolf&#39;s attention is dominated by the agony at his crotch.
It&#39;s an impossible pain,
beyond any that he&#39;s ever felt before.
But the more he pants from the pain,
and the longer he endures it,
the longer he is &lt;em&gt;able&lt;/em&gt;
to endure it.
It feels like the pain is spreading through his body with a heat,
a fire, that energizes him.
He feels stronger with each breath he takes.
He feels &lt;em&gt;capable&lt;/em&gt; and filled with potential.
The air itself is telling him that here, now,
the wolf is discovering his destiny, the place he&#39;s meant
&lt;span class=nobr&gt;to be.&lt;/span&gt;

?P
His cock bulges out his sheath with anticipation.

?P
[[Continue|n1f Clever Escape 4]]

&lt;&lt;set $n_candleLit = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="351" name="n1f Clever Escape 4" tags="mt-ready" position="5700,3725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

Ivex purrs through his mask and grasps the shaft of the wolf&#39;s cock.
The cock is slick with pre-cum, and the sliding of its skin against the
panther&#39;s palm makes the wolf shiver and moan.

?P
The panther says, &quot;I have a solution to cleverness.
My solution is desire.
When I first tried this on another clever adventurer,
I worried a bit that his cleverness would become enhanced.
The candle&#39;s intensification of emotion gives brute warriors greater strength,
so perhaps it will turn the clever ones into geniuses
at fulfilling their urgent desire.&quot;

?P
Ivex laughs. &quot;I should not have worried.
The candle&#39;s lust makes the clever ones as idiotic as any other.&quot;

?P
He releases his grasp of the wolf&#39;s cock without moving his arm,
just holding his palm and fingers slightly above the cock.
Nero whines and struggles to move his cock to touch the paw again.
The struggling makes the Gravity Crystal swing more,
and the pain in his balls grows stronger.
But the pain does not deter the wolf.
If anything, it makes his cock grow harder,
and his cock bulges closer to the panther&#39;s paw,
a paw that anticipates every motion,
avoiding any contact,
staying just a small, frustrating distance away.

?P
[[Continue|n1f Clever Escape 5]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="352" name="n1f Clever Escape 5" tags="mt-ready" position="5825,3725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

Ivex continues this flirting tease of the wolf&#39;s needy cock for a while.

?P
Eventually, he relents.
The panther closes his paw to grasp the eager shaft,
and at the same time, he &lt;em&gt;punches&lt;/em&gt; the crystal.
The wolf&#39;s pain spikes, but the pain does not reduce his cock&#39;s
feeling of gratitude at the return of pleasant stimulation.
The wolf screams with all his breath,
and he does not know if the scream is from
suffering or pleasure, or both.

?P
The panther speaks.
&quot;I am also amused at the way the candle&#39;s lust seems enhanced by my tortures.
I do not think the lust makes the pain altogether pleasant.
My subjects often seem a bit conflicted when the
candle&#39;s flame is gone.
But after enough sessions, even the most stubborn warriors
will start begging for my cruel amusements &lt;em&gt;before&lt;/em&gt;
I light the candle.&quot;

?P
Nero hears, but does not understand all the words being said.
It does not really matter. The sounds are merely grace notes
to the throbbing rhythms of the warm paw grabbing his cock and
the crystal agony grabbing his balls.
The wolf dances in his bonds to make the rhythms faster.

?P
&quot;And just like any other stubborn wolf,
you will &lt;span class=nobr&gt;soon&amp;mdash;&quot;&lt;/span&gt;

?P
The panther abruptly stops talking,
releases his grasp, and moves away.

?P
Nero whines with a feeling of loss.

?P
[[Continue|n1f Clever Escape 6]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="353" name="n1f Clever Escape 6" tags="mt-ready" position="5950,3725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

The panther seems to be listening to something only he can hear.

?P
He shakes his head and looks to the wolf.
The grinning mask speaks.
&quot;Well, this is inconvenient.
There&#39;s a small problem that I will need to address.
But it should not take long.&quot;

?P
An arm floating near the grinning mask makes a gesture.
The swing of the Gravity Crystal becomes stronger,
pulling the wolf&#39;s balls almost horizontal
before falling down and swinging back to
become almost horizontal again.

?P
&quot;I will be back before this ticking clock stops.&quot;

?P
The floating arm takes a red gem out from a pocket.
The gem starts to glow,
and the blurry blob of panther parts disappears in a &lt;em&gt;fwoosh&lt;/em&gt;.

?P
[[Continue|n1f Clever Alone 1]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="354" name="n1f Horny Clever 1" tags="mt-ready section-start" position="5325,3875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleLit true&gt;&gt;
&lt;&lt;vi-always n_candleHorny true&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

The panther stares at the snow globe in his hand for a long moment,
then sets it back down.

?P
He snuffs the candle, then &lt;em&gt;punches&lt;/em&gt; it off the desk.

?P
Ivex removes his mask and puts it into a pocket.
The expression revealed is fierce,
and it grows fiercer as he speaks.
&quot;Please, disconnect any unauthorized users,
and remind me to change my password and your word of command.&quot;

?P
Nero&#39;s mind slowly regains clarity when the Sprite ?sprSpeaks in his ear.
&lt;span class=sprite-q&gt;&quot;Sorry, my other Master is calling me, ?master&quot;&lt;/span&gt;

?P
The wolf feels a small &lt;em&gt;pop&lt;/em&gt; as the Sprite&#39;s golem in his ear dissolves.
The trickle of magic energy stops. His mage-sight fades,
and the room becomes ordinary again.

?P
Ivex approaches with a snarl on his face.
He speaks in a steady, deliberate tone that rumbles with chaos beneath.
&quot;Setting aside for now the question of how you knew &lt;em&gt;where&lt;/em&gt;
to look for my password.&quot;

?P
He brings his head close to the wolf&#39;s face.
Nero tries to remain calm.

?P
&quot;What &lt;em&gt;fascinates&lt;/em&gt; me,&quot; says the panther,
&quot;is how you were able to stay so &lt;em&gt;focused&lt;/em&gt; on that goal,
when any other wolf would be overwhelmed by my candle,
unable to form a coherent thought beyond feral lust.&quot;

?P
Nero stays quiet. He knows there is nothing he can say that will
calm the panther now.

?P
[[Continue|n1f Horny Clever 2]]

&lt;&lt;run
  delete $n_candleLit;
  delete $n_candleHorny;
  delete $n_mageSight;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="355" name="n1f Horny Clever 2" tags="mt-ready" position="5450,3875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleLit false&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

Ivex continues staring as he moves away and starts to pace.
&quot;You are considerably more dangerous than I expected.
I suppose I may have gotten complacent from dealing with all the
usual idiots who fall into my traps.
Still, I &lt;em&gt;have&lt;/em&gt; captured mages before,
and I &lt;em&gt;did&lt;/em&gt; prepare defenses before you woke.
There is something &lt;em&gt;different&lt;/em&gt; about you.&quot;

?P
The panther begins muttering things that the wolf cannot hear clearly.

?P
Nero is feeling shaky. He has fragmented memories
of the things he said and did while under the influence of the candle.
Few of his memories make sense.
But the panther&#39;s agitation confirms a feeling in Nero&#39;s mind.
The wolf came close to doing something that
should have been impossible.
Well, maybe not impossible, but clearly extremely unlikely.

?P
&lt;&lt;if $n_secretGuild&gt;&gt;
  He wonders, can he use this accident to convince Ivex that
  there &lt;em&gt;is&lt;/em&gt; a secret guild of mages?
  The panther does seem quite spooked.
  Nero tests a few possibilities in his head.
  He tries the one that seems best.

  ?P
  The wolf says shyly,
  &quot;I&#39;m sorry, I do not have any idea what I did.
  Sometimes I do things for no reason I understand,
  and the actions solve problems that I&#39;m unaware of,
  until they&#39;re solved.
  I have asked some inner council members about it,
  but they say it is not any of their doing,
  and they tell me that I should not worry, since it is
  not doing me any harm.&quot;

  ?P
  He adds a plaintive note to his voice.
  &quot;I do not know if I trust them!
  I&#39;m tired of being a pawn in a game I do not understand.
  When I heard about your strange magics,
  the things that I&#39;ve read about it...
  I do not know for certain,
  but I felt that you might be able to help.&quot;

&lt;&lt;else&gt;&gt;
  He wonders, can he use this accident to convince Ivex
  &lt;&lt;if $n_subby&gt;&gt;
    that he &lt;em&gt;will&lt;/em&gt; be a good apprentice?
  &lt;&lt;else&gt;&gt;
    of a new story?
  &lt;&lt;/if&gt;&gt;
  Or is the panther now too spooked?
  Nero tests a few possibilities in his head.
  He tries the one that seems best.
  ?P
  The wolf says shyly,
  &quot;I&#39;m sorry, I do not have any idea what I did.
  Sometimes I do things for no reason I understand,
  and the actions solve problems that I&#39;m unaware of,
  until they&#39;re solved.
  I have asked many wise mages, priests, and mystics about this,
  and they all wish me well, but none have any insight into this.&quot;
  
  ?P
  He adds a plaintive note to his voice.
  &quot;This frightens me! I do not like being a pawn in a game
  I do not understand. When I heard about your strange magics,
  the things that I&#39;ve read about it...
  I do not know for certain,
  but I felt that you might be able to help.&quot;
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n1f Horny Clever 3]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="356" name="n1f Horny Clever 3" tags="mt-ready" position="5575,3875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

The panther is silent, still staring, still pacing.

&lt;&lt;if $n_endgameUsable&gt;&gt;
  ?P
  He suddenly looks up at the ceiling.
  &quot;I forgot about your spell.
  More sloppiness on my part.&quot;
  The panther growls and reaches up with an arm.
  He makes a fist with his hand
  and a throwing motion with his arm.
  The penguin on the cabinet shrinks to the size of an
  &lt;&lt;if $n_penguinCoinDropped&gt;&gt;
    acorn.
  &lt;&lt;else&gt;&gt;
    acorn, and the coin-like object in its mouth drops again.
  &lt;&lt;/if&gt;&gt;
  ?P
  Ivex says,

&lt;&lt;else&gt;&gt;
  ?P
  Eventually, Ivex says,
&lt;&lt;/if&gt;&gt;

&quot;I do not think I believe that story either.
You are quite a puzzle,
and I think you will be an interesting challenge for me to solve.&quot;

?P
He makes &lt;&lt;= $n_endgameUsable ? &quot;another&quot; : &quot;a&quot;&gt;&gt;
gesture while approaching the wolf.
A cabinet opens, and two small objects fly out to land in 
his paw.

?P
The panther says, &quot;I do enjoy interesting challenges.
But I must tell you, what I really love is &lt;em&gt;simplifying&lt;/em&gt;
a challenge.&quot;

?P
The objects in his hand are both crystals.

?P
[[Continue|n1f Horny Clever 4]]

&lt;&lt;run
  if ($n_endgameUsable) {
    delete $n_endgameUsable;
    $n_penguinCoinDropped = true;
    $n_penguinShrunk = true;
    MT.mdSet(&quot;mn_playerLostEndgame&quot;, true);
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="357" name="n1f Horny Clever 4" tags="mt-ready" position="5700,3875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

Ivex says, &quot;As I&#39;m sure you know, this is a Dream Crystal,
and this one is a Gravity Crystal.
What you might not know,
is what the two can do together.
Let me demonstrate.&quot;

?P
He activates the Gravity Crystal, touches it to Nero&#39;s balls,
then pulls it away firmly.
The crystal drags the wolf&#39;s balls forward with a pinching sensation.
Nero gasps from the stretching and the pain.

?P
The panther twists the crystal in his hand.
&quot;This is a fun little toy. I enjoy it very much.&quot;

?P
He releases the crystal, and it falls with a swinging motion,
as if it were attached with a rope to the wolf&#39;s balls.
It feels heavier than its small size would suggest,
and it pulls the wolf&#39;s balls like a brick dangling from them.
The wolf lets out a high-pitched whine.

?P
Ivex smirks.
&quot;This is good for a few minutes of amusement.
Though perhaps it feels longer to the person attached.&quot;

?P
Nero cries out, &lt;span class=nobr&gt;&quot;Please&amp;mdash;!&quot;&lt;/span&gt;

?P
But Ivex grabs the wolf&#39;s muzzle.
&quot;Hold your questions until the end of the demonstration.&quot;

?P
The wolf twists his head and struggles in the panther&#39;s grasp.
The struggle is not so much a desire to speak,
but a desire to scream.

?P
[[Continue|n1f Horny Clever 5]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="358" name="n1f Horny Clever 5" tags="mt-ready" position="5825,3875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

Ivex continues. &quot;There is however a limit to how much
force a Gravity Crystal can exert without something else pulling on it.
Novices will often think to use another
Gravity Crystal to pull the first.
But as I&#39;m sure you know, any chain of Gravity Crystals will
only exert as much force as the weakest in the chain.
So while the complex swinging motion of linked crystals might be amusing,
it doesn&#39;t really solve the problem at hand.&quot;

?P
He stares the wolf in the eyes and asks an unspoken question.
Nero nods his head vigorously. Ivex laughs and releases the
wolf&#39;s muzzle.

?P
&quot;This is where Dream Crystals are useful, despite their
exorbitant energy cost. Did you know, a Dream Crystal can
hold a Gravity Crystal in place?&quot;

?P
The panther crouches down to put the other crystal on
the floor between the wolf&#39;s legs.

?P
Ivex activates the Dream Crystal.

?P
[[Continue|n1f Horny Clever 6]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="359" name="n1f Horny Clever 6" tags="mt-ready" position="5950,3875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

The Gravity Crystal immediately drops down to rest on top of the
Dream Crystal, which is the position the Dream Crystal says
the Gravity Crystal should have.

?P
Nero&#39;s balls try to follow. The sounds emerging from the wolf&#39;s
muzzle are an unintelligible babble of howling vowels
all blurred together.
His breath is fast and shallow.
When he inhales, the pitch of the sound changes,
but the vowels never stop.

?P
The wolf&#39;s body tries to crouch down to relieve the pull on his balls.
His legs and torso tremble with exertion.
His wrists rub fresh bruises into the edges of the leather straps.
His arms complain violently about this unaccustomed stretch.
It feels like he might dislocate his joints, his shoulders,
and the pain of that strain competes with the pain of
the impossible pull at his groin.

?P
One moment it seems like the agonies above might be balanced
with the suffering below, but his body is not that stable.
He quivers, and the unbearable sensations ebb and flow.
He moves to relieve one pain at the expense of another,
and then he moves again to shift the new misery somewhere
else again.
He twitches an endless screaming dance in the leather bonds
on the wooden cross.

?P
And then the pulling stops.
Ivex has deactivated the Dream Crystal.

?P
The wolf&#39;s body is no longer straining to stretch
in ways that it cannot, but it still feels a great
aching torment from attempting that impossible task.

?P
And the Gravity Crystal still dangles from his crotch.
The crystal swings a bit with a motion that might look gentle,
but it still has the weight of something much larger.
The slight oscillation is enough of a changing stress
to prevent his balls and guts from settling into
a comfortable ache that will let them recover.

?P
[[Continue|n1f Horny Clever 7]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="360" name="n1f Horny Clever 7" tags="mt-ready" position="6075,3875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

Ivex speaks. &quot;Thus concludes my demonstration.&quot;

?P
The panther is on the floor, lying comfortably on his side,
with one paw touching the Dream Crystal.

?P
He looks up at the wolf and asks,
&quot;&lt;em&gt;Now&lt;/em&gt; do you have any questions?&quot;

?P
Nero&#39;s throat is raw, and his panting breaths do not let him speak yet.
He wrestles his emotions with little success.
His mind is a chaos of fragments of thoughts that do not linger
long enough for him to find words for them.
There is only one thought that he has words for,
one that every part of him wants to say.

?P
When his breath calms down enough for him to speak,
he says it.

?P
&quot;Please&amp;mdash;!&quot;

?P
The rest of the words disappear in a scream,
as Ivex activates the Dream Crystal again.

?P
[[Continue|n1f Horny Clever 8]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="361" name="n1f Horny Clever 8" tags="mt-ready" position="6200,3875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

This time the wolf does not try to out-think the torture,
because he cannot think at all.
His body writhes however it wants.
His different body parts fight their individual torments
without regard for what their motion might do to the others.

?P
The pain feels worse than before.
How is that even possible?
Has the panther moved the Dream Crystal farther away?
Is this round of excruciation lasting longer than before?
Nero&#39;s mind does not ask these questions,
but they lurk in its depths,
and the questions spring forth to saturate his thoughts when
the Dream Crystal again is stopped.

?P
Nero does not ask the questions aloud.
Every thought he has right now,
every thought he knows how to say,
scurries around in his head, looking for a place to hide.

?P
His vision is blurred.
He cannot see clearly what the panther is doing.
But he doesn&#39;t need to.
He tries to ignore the complaints of his dangling balls,
so that he can focus his attention on listening to
whatever Ivex might say, might tell him to do.

?P
&quot;I suppose I should explain.
I somewhat misspoke earlier.
I do love &lt;em&gt;simplifying&lt;/em&gt; a challenge,
but I do not know if this particular &lt;em&gt;simplification&lt;/em&gt;
procedure will work.
When I&#39;ve tried it before,
it had a tendency to turn simpletons
into more complicated problems.
But I thought, since you are not a simpleton,
perhaps it will have the opposite effect on you.&quot;

?P
He bats playfully at the dangling Gravity Crystal.
&quot;It would be funny if it does work.
So it seems an idea worth trying.
And if it doesn&#39;t work, well, there are plenty
&lt;span class=nobr&gt;of&amp;mdash;&quot;&lt;/span&gt;

?P
Ivex abruptly stops talking.
He stands up and moves away.
Nero cannot tell what the panther is doing,
but the wolf is grateful that the panther&#39;s attention
is somewhere else, for the moment.

?P
[[Continue|n1f Horny Clever 9]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="362" name="n1f Horny Clever 9" tags="mt-ready" position="6325,3875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

The relief does not last long.
Ivex crouches down at the Dream Crystal again.
Nero panics.

?P
But the panther does not activate the crystal. He takes it away.

?P
Ivex says, &quot;What unfortunate timing.
I hope this interruption will not take too long.&quot;

?P
The panther grabs the Gravity Crystal and pulls it toward him.
It&#39;s not as strong a pull as the Dream Crystal,
but he shakes has paw to make the wolf gasp,
and the motion wakes unhappy nerves that the unwavering pull did not.

?P
Ivex pushes the Gravity Crystal and sends it swinging like a pendulum.
&quot;I should be back before this ticking clock stops.&quot;

?P
He stands and looks around the room.
He goes to adjust the mirror on the desk so that Nero has a clear
view of the Gravity Crystal that&#39;s swinging and tormenting his balls.

?P
Ivex surveys the room again and nods with satisfaction.
He pulls a red gem out from a pocket and disappears with a
&lt;em&gt;fwoosh&lt;/em&gt;.

?P
[[Continue|n1f Horny Clever Alone 1]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="363" name="n1f Horny Clever Alone 1" tags="mt-ready" position="6450,3875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

Ivex&#39;s exit by teleportation creates
a sudden rush of air that makes the wolf&#39;s fur shiver.

?P
The Gravity Crystal swinging below his nutsack is a &lt;em&gt;bearable&lt;/em&gt; pain.
It does not make his whole body panic the way the
pull of the Dream Crystal did.
But it&#39;s a persistent irritation of
body parts that are already sore and weak from agony.

?P
Nero does not want to move, but he cajoles his hips
into shifting against the motion of the crystal,
to try to dampen the swing and make it stop.

?P
It does not stop.
The cruel pendulum continues ticking seconds that
become a minute, and then another minute more.
The swinging does not seem to be any less energetic than when it began.
The steady rhythm of aches is becoming familiar, a steady companion
to the wolf&#39;s exhaustion on the cross.

?P
Nero finds himself involuntarily counting the ticks.
He is not sure whether he&#39;s trying to anticipate the pain
or distract himself from it.
There were maybe a hundred ticks before he started counting.
He&#39;s now counted another hundred more.
He expects, he hopes, with each ten ticks he counts,
that the crystal will reduce its swing and maybe stop.
But it does not stop.

?P
It&#39;s now ticked five minutes, maybe more.
The bearable pain is becoming unbearable.
The pain has not gotten stronger.
It does not seem to have changed in any way.
But it still feels like it&#39;s shredding his body, his mind,
into separate, screaming parts.
Because it &lt;em&gt;does&lt;/em&gt;. &lt;em&gt;not&lt;/em&gt;. &lt;em&gt;stop&lt;/em&gt;.

?P
Nero makes himself stop counting.
The swinging crystal is a &lt;em&gt;problem&lt;/em&gt;.
He can &lt;em&gt;solve&lt;/em&gt; it.

?P
[[Continue|n1f Horny Clever Alone 2]]


&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="364" name="n1f Horny Clever Alone 2" tags="mt-ready" position="6575,3875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

The wolf stops his body from moving, tries to stop twitching
and trembling, so that he can understand the plain motion
of the Gravity Crystal swinging from his balls.

?P
He watches in the mirror and also looks directly at the crystal.
The pendulum swing seems slower than an ordinary weight,
which is to be expected.
The feeling of heaviness must come from a force that the crystal exerts,
pulling away in a direction that&#39;s
independent of the pull of ordinary gravity.
And perhaps another force of the crystal is what
prolongs its pendulum motion.

?P
The crystal&#39;s arc did change when he struggled earlier.
He tests that again now with slight twists that make him gasp.
The swinging arc easily moves from side to side.
So the crystal isn&#39;t simply being dragged along a particular path.
But if his struggles never &lt;em&gt;decrease&lt;/em&gt; the swing,
there must be some force that pushes or pulls the crystal
to sustain the motion.
He tries to determine the timing of the segments of the swing,
tries to feel whether the motive force is intermittent or constant.

?P
It takes twenty ticks to notice it,
and another ten ticks to be sure.
The force is a &lt;em&gt;push&lt;/em&gt; at the bottom of the arc,
replacing any energy in the swing that was lost.

?P
If the push does not allow him to &lt;em&gt;reduce&lt;/em&gt; the swing,
maybe he can &lt;em&gt;increase&lt;/em&gt; it?

?P
There are six (!) more Gravity Crystals behind him.
And they &lt;em&gt;are&lt;/em&gt; in a dangerously unstable configuration.
What will happen if he adds one more?

?P
The wolf hesitates. Rankine Calamity is no joke,
and any implosion he might create will be uncomfortably close
to his tail.

?P
But it&#39;s the best option. There are no other options.

?P
Nero tells his aching hips to move yet again, this time
to make the swing larger, make the pulling hurt more...

?P

[[Continue|n1f Horny Clever Alone 3]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="365" name="n1f Horny Clever Alone 3" tags="mt-ready" position="6700,3875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

The agony is bearable because it&#39;s a choice he made himself.
It&#39;s not wholly under his control,
but it &lt;em&gt;is&lt;/em&gt; something he began himself.
He knew what it might do to him, knows what it might achieve.

?P
The arc of the crystal does grow.
It takes ten ticks for him to be certain.
With another ten, twenty ticks, the swing becomes
wide enough that the ends of it are almost horizontal.

?P
His gut groans from the effort.
It&#39;s becoming hard to find the will to move his body more
to make the swinging wider.
But he doesn&#39;t really need to.
The energy he&#39;s added to the pendulum does not dissipate.
The force that keeps the crystal swinging seems happy to
maintain the stronger rhythm and keep it going longer.

?P
Nero can see the reflection of the other crystals in the mirror,
but his vision is blurry.
The glowing crystals are smears of light with
bursts of radiance around them.
The starry blobs dance to the rhythm of the pendulum,
but the wolf cannot tell if the dance is motion of the crystals,
or if it&#39;s just an illusion caused by the shifting
position of his eyes looking at the mirror.

?P
But if he holds his breath, he can &lt;em&gt;hear&lt;/em&gt; it.
A barely audible hum is growing louder with each tick of the pendulum.

?P
Nero gasps and tries to force his abused, unwilling body to
shake the cross to stress the crystals even more.

?P
[[And then...|n1f Horny Clever Alone 4]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="366" name="n1f Horny Clever Alone 4" tags="mt-ready" position="6825,3875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

The humming stress becomes a screech as the crystals destabilize
and fly rapidly toward each other.
Nero frantically tries to keep his tail away from their apparent destination.
The crystal at his crotch pulls his balls back,
nearly as hard as it did with the Dream Crystal.

?P
All seven Gravity Crystals collide with a bright implosion that sucks
away a strong gust of air and a large chunk of the cross.

?P
The cross starts to fall backward, with Nero still attached.

?P
The tips of the cross&#39;s arms crash into the wall behind him.
The legs of the cross break near the center.
The wolf slides down, not too gently,
and ends up in an awkward sitting position.

?P
Everything hurts, but nothing feels broken.

?P
Nero takes a moment to calm himself and recover.
He feels lucky that the cross &lt;em&gt;did&lt;/em&gt; break.
He&#39;s not sure what he would have done next if he had ended up
stuck on his back with the cross leaning against the wall
or flat on the floor.

?P
His arms are still awkwardly restrained, 
but the cross&#39;s legs are separated now,
and he can move his own
legs with the leather straps and wood still attached.

?P
After he catches his breath.

?P
[[Continue|n1f Horny Clever Alone 5]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="367" name="n1f Horny Clever Alone 5" tags="mt-ready" position="6950,3875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_abused&gt;&gt;
&lt;&lt;vi-ignore n_subby&gt;&gt;

The wolf does not rest long.
He&#39;s exhausted, but also exhilarated by his escape, his imminent escape.
And he&#39;s &lt;em&gt;furious&lt;/em&gt; about the suffering that the panther
made him endure.

?P
Nero bends his waist to reach with his arms
to unbuckle the leather straps on his ankles.
He cannot reach any other straps yet,
but this small bit of freedom is more than enough
for him to struggle upright with a fierce growl.

?P
The remnants of the wooden cross are a heavy burden,
but the wolf strides confidently, if awkwardly,
to the cluttered desk,
where the letter opener will help him
release the rest of the bonds.

?P
He leans forward to maneuver one hand close to the letter opener.

?P
The snow globe is nearby.
The tail of the dragon in the globe is pointed directly at the wolf.
It feels like the dragon is mocking him.

?P
Nero grabs the snow globe first.
He needs to know what secret it holds.
Why did asking about it raise the panther&#39;s angry paranoia?

?P
The wolf turns the globe around with his hand.
The dragon in the globe is extremely male.
Its right paw is grasping a huge erection that spurts glittery cum.

?P
The inscription on the base of the globe reads,
&quot;Thank You For Visiting The Caverns Of Lusty Spires!&quot;
The slogan spiraling down the pink pillar says, &quot;CARPE DICK!&quot;

?P
Incredulous, Nero says the phrase out loud. &quot;Carpe dick?&quot;

?P
[[Continue|n2c Clever Free 1]]

&lt;&lt;run
  $n_free = true;
  $n_ivexGone = true;
  $n_tooClever = true;
  MT.neroResetObjectDim();
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="368" name="n1p Barbs Fast 1" tags="mt-ready big-mood" position="3375,1525" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;style&gt;
.fade-in:not(.fade-in-hidden) .glitch-link {
  opacity: 0;
}
&lt;/style&gt;

All of Nero&#39;s clothes disappear.

?P
&lt;&lt;fade-in 0.7s&gt;&gt;
  The wolf shivers.
  He wonders briefly what type of spell made his clothes disappear
  so quickly and precisely,
  but the mechanism is not as important as the result.
  If there was any doubt before,
  there is no doubt now.
  This is not just a simple interrogation.

  ?P
  &lt;&lt;if $kn_Pevhin&gt;&gt;
    &lt;ul class=actions&gt;
      &lt;&lt;mt-seen $kn_Pevhin&gt;&gt;
        &lt;&lt;mtl [[n1p Barbs Fast 2]]&gt;&gt;
          Nero&#39;s attention is drawn to Ivex&#39;s crotch...
        &lt;&lt;/mtl&gt;&gt;
      &lt;&lt;/mt-seen&gt;&gt;
      &lt;&lt;mt-seen $sn_barbsSkip&gt;&gt;
        &lt;&lt;mtl [[n1p Barbs Skip]]&gt;&gt;
          Nero&#39;s been in this type of situation before...
        &lt;&lt;/mtl&gt;&gt;
      &lt;&lt;/mt-seen&gt;&gt;
      &lt;span class=glitch-link&gt;
        &lt;&lt;mtl [[n1p Barbs Glitch 1]]&gt;&gt;
          His subconscious expected this...
        &lt;&lt;/mtl&gt;&gt;
      &lt;/span&gt;
    &lt;/ul&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;include [[n1p Barbs Fast 2]]&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/fade-in&gt;&gt;

&lt;&lt;set $n_naked = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="369" name="n1p Barbs Fast 2" tags="mt-ready inclusion" position="3550,1525" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_subby false&gt;&gt;

Nero&#39;s attention is drawn to Ivex&#39;s crotch,
which has a noticeable bulge,
helped along by a feline paw pressed firmly
into the cloth covering the panther&#39;s balls.

?P
It seems clear that Nero will soon be an unfortunate audience
for Ivex the Magnificent&#39;s cock.

?P
Well, it certainly won&#39;t be a novelty.
The wolf has already witnessed plenty of indelicate feline cock.

?P
Just last year, late in the spring season...

?P
[[Continue|n1p Barbs Fast 3]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="370" name="n1p Barbs Fast 3" tags="mt-ready" position="3675,1525" size="100,100">&lt;&lt;nobr&gt;&gt;
Lord Pevhin, the slender cheetah securely fastened to Nero&#39;s workshop table, asked again, &quot;Are you sure this will work?&quot;

?P
&quot;Please stay still,&quot; replied Nero. &quot;I&#39;m applying a dangerous amount of energy to a delicate region, and it would be tragic if I slipped.&quot;

?P
The delicate region was the male cheetah&#39;s sheath, which for the past year had been trapped in a metal device under control of Pevhin&#39;s wife, Lady Temesca. The lord had approached Nero with a tale of wanting to escape a miserable marriage, along with enough coin to secure an appointment for the mage&#39;s services.

?P
The metal chastity device was not the typical variety that&#39;s common in sexual play. Those have simple locks that are easily dismantled with basic charms. This one was more substantial and somewhat perilous. Its lock was imbued with magic that guarded against tampering in several ways. In particular, if a special pin in the lock were released without contact with the correct key, the lock would destroy itself by fusing shut. Which had happened. Which Pevhin had not told his wife. Not that she had even &lt;em&gt;tried&lt;/em&gt; to let him free in months.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1p Barbs Fast 4]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="371" name="n1p Barbs Fast 4" tags="mt-ready" position="3800,1525" size="100,100">&lt;&lt;nobr&gt;&gt;
Nero said, &quot;You really should have approached me before using the Carmela Charm. Finessing mage locks is one of my specialties, and it&#39;s much less dangerous than what I&#39;m doing now.&quot;

?P
The cheetah grimaced and flattened his ears, but otherwise stayed silent and still.

?P
After a few more minutes of rasping at the energy bonds, the locking spell collapsed, and the metal device broke apart. The cheetah&#39;s penis, sensing freedom, immediately sprang to its fullest length, and Lord Pevhin shouted with glee.

?P
Nero briefly admired the size of the liberated cock, before approaching it with a measuring tape. The wolf took careful measure of

&lt;&lt;arc-only&gt;&gt;
  &lt;&lt;set $n_glitched = true&gt;&gt;
  the ?barbed cock&#39;s shaft.
&lt;&lt;/arc-only&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  the...

  ?P
  &lt;ul class=actions&gt;
    &lt;&lt;mt-seen $kn_Pevhin&gt;&gt;
      &lt;&lt;mtl [[n1p Barbs Fast 5]] &quot;$n_barbs = true&quot;&gt;&gt;
        ...barbed cock&#39;s shaft.
      &lt;&lt;/mtl&gt;&gt;
      &lt;&lt;mtl [[n1p Barbs Fast 5]] &quot;delete $n_barbs&quot;&gt;&gt;
        ...smooth cock&#39;s shaft.
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="372" name="n1p Barbs Fast 5" tags="mt-ready" position="3925,1525" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-only&gt;&gt;
  &lt;&lt;set $n_glitched = true&gt;&gt;
&lt;&lt;/arc-only&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;barbs-announce now&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Lord Pevhin&#39;s ?barbed penis
quivered at Nero&#39;s attention,
but the wolf was not intending to give pleasure.
After Nero finished his measurements,
he told the bound cheetah,
&quot;I&#39;m sorry, but I&#39;m going to have to give you a refund.&quot;

?P
&quot;What? Why?&quot; asked Pevhin, quite confused.

?P
Nero brought out the &lt;em&gt;other&lt;/em&gt; spell he had prepared
for this appointment, and said,
&quot;There&#39;s a small problem.&quot;

?P
The lupine mage made a few adjustments to the new spell.
He then applied it firmly to the cheetah&#39;s erect cock,
forcing the member down into retreat, back into its sheath.
It did not go willingly. Pevhin complained as well.

?P
Nero continued to speak calmly as he wrestled the cock with his spell.
&quot;Your lovely wife, Lady Temesca, approached me the day before you did,
and hired me first.
She explained to me the circumstances which led her to restrain your cock,
and after some investigation of my own,
I concluded that her story had more merit than yours.
So I agreed to construct for her a spectral chastity spell
that&#39;s much better than the metal device she had originally
acquired for you.&quot;

?P
Nero called out, &quot;It&#39;s done now,&quot; and Lady Temesca herself entered the room.

?P
Lord Pevhin was livid, but still helplessly strapped to the workshop table. Lady Temesca ignored her screaming husband and quietly approached the wolf. She proceeded to lift Nero&#39;s robe, then kneel, in order to express her gratitude, in a most un-lady-like way...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_Pevhin&gt;&gt;
  [[Continue|n1p Barbs Fast End]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="373" name="n1p Barbs Fast End" tags="mt-ready" position="4050,1525" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;set $n_barbsFast = true&gt;&gt;
&lt;&lt;set $n_ivexNear = true&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

It&#39;s an intensely sexy memory,
&lt;&lt;if $n_barbsFastExtraVisited&gt;&gt;
  and it was the start of...
  &lt;&lt;tran-cut [[never mind that now|n1p Barbs Fast Extra]]&gt;&gt;...

  ?P
  Nero has more urgent things to think about.
&lt;&lt;else&gt;&gt;
  and it was the start of an
  &lt;&lt;tran-cut [[astonishingly perverted summer|n1p Barbs Fast Extra]]&gt;&gt;...

  ?P
  But Nero has more urgent things to think about.
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;

Such as, the noticeably horny panther mage who has just magicked away the wolf&#39;s clothes. Ivex is now uncomfortably close, and he&#39;s running his fingers across the newly exposed fur on Nero&#39;s naked chest.

$n_afterNaked</tw-passagedata><tw-passagedata pid="374" name="n1p Barbs Fast Extra" tags="mt-ready" position="4050,1675" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;set $n_barbsFastExtraVisited = true&gt;&gt;

Lady Temesca, with her cheetah flexibility and strength, and Lord Pevhin&#39;s increasingly desperate lust-denied antics, became deeply interwoven into Nero&#39;s life during that long, hot summer when the three of them chased each other into many extraordinary and perverse acts...
&lt;&lt;/nobr&gt;&gt;

Nero&#39;s mind is overwhelmed with a cascade of incredibly erotic memories...

But his rational mind reminds him of his immediate peril, and he manages to shove away those intoxicating memories, for now.

[[Return|n1p Barbs Fast End]]</tw-passagedata><tw-passagedata pid="375" name="n1p Barbs Glitch 1" tags="mt-ready big-mood" position="3550,1375" size="100,100">&lt;&lt;nobr&gt;&gt;

His subconscious expected this, sooner or later.
But the way it happened was incredibly quick and precise.
Nero is genuinely impressed.
The undressing spell somehow disappeared the wolf&#39;s clothing
without touching the leather straps
that are also considered clothing by most magic.

?P
Nero wonders how he would build such a spell himself.
If he were alone, he&#39;d happily spend time experimenting with
some possibilities, but Ivex is approaching
with unmistakable intent.

?P
The panther&#39;s tail twitches with excitement,
and his right paw is brazenly grabbing his own crotch.
Nero can&#39;t stop glancing at the crotch, anticipating the
moment when Ivex loosens his pants and presents his feline cock.

?P
The wolf&#39;s memory flashes back to his most recent encounter
with a feline cock. It was just last month...

?P
[[Continue|n1p Barbs Glitch 2]]

&lt;&lt;set $n_naked = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="376" name="n1p Barbs Glitch 2" tags="mt-ready" position="3675,1375" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;script&gt;&gt;
State.temporary.reveal = () =&gt; {
	$(&quot;#glitch-1 a&quot;).remove();
	$(&quot;#glitch-2&quot;).removeClass(&quot;glitch-hidden&quot;).addClass(&quot;glitch-fading-in&quot;);
	setTimeout(() =&gt; $(&quot;#glitch-2&quot;).removeClass(&quot;glitch-fading-in&quot;));
	setTimeout(() =&gt; $(&quot;#glitch-2&quot;).addClass(&quot;glitch-fading-out&quot;), 100);
};
if (MT.roaming) {
	$(document).one(&quot;:passagedisplay&quot;, State.temporary.reveal);
}
&lt;&lt;/script&gt;&gt;

It was one of those days when nothing went right.
Cancelled appointments, brittle spells, and a throbbing headache
from inhaling the fumes of an accidentally dropped vial of
/* cspell:disable-next-line */
&lt;em&gt;catulus lacrimae&lt;/em&gt;.
Nero was ready to close shop early,
but then, an
&lt;span id=&quot;glitch-1&quot;&gt;unusual&lt;&lt;link &quot;Cont i n ue&quot;&gt;&gt;
	&lt;&lt;run _reveal()&gt;&gt;
	&lt;&lt;/link&gt;&gt;
&lt;/span&gt;
&lt;&lt;glitch-text&gt;&gt;
jaguar walked in.

?P
His fur was gray with a sheen like a river on a cloudy day,
and his rosettes were a deep black that looked like holes,
like cutouts in the fabric of reality.
Nero didn&#39;t recognize him at first, but then the jaguar said,
&quot;Olá, cachorro.&quot;

?P
Nero&#39;s tail started wagging, and he remembered.
He remembered how much he enjoyed it when the jaguar
straddled the wolf&#39;s body and pressed his feline ass
against the wolf&#39;s cock, while offering his own erect cock
for the wolf to grasp.
Nero always shivered with pleasure when he reached out
and felt the shaft of the jaguar&#39;s...

?P
&lt;ul class=actions&gt;
	&lt;&lt;mtl [[n1p Barbs Glitch 3]] &quot;//1&quot;&gt;&gt;
		... ##barbed-1## cock rubbing against his paws.
	&lt;&lt;/mtl&gt;&gt;
	&lt;&lt;mtl [[n1p Barbs Glitch 3]] &quot;//2&quot;&gt;&gt;
		... ##barbed-2## cock rubbing against his paws.
	&lt;&lt;/mtl&gt;&gt;
&lt;/ul&gt;
&lt;&lt;/glitch-text&gt;&gt;

&lt;&lt;set MT.mdSet(&quot;mn_playerReadGlitch&quot;, true)&gt;&gt;
&lt;&lt;set $n_barbs = MT.pick([false, true])&gt;&gt;
&lt;&lt;set $n_glitched = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="377" name="n1p Barbs Glitch 3" tags="mt-ready" position="3800,1375" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;barbs-announce now&gt;&gt;

Nero shakes his head in confusion. What was he trying to remember just now?
?P
His mind was
&lt;&lt;glitch-text&gt;&gt;
  going blank.
  Something is wrong.
  Is he being attacked by magic?
  ?P
  But Ivex is not &lt;em&gt;doing&lt;/em&gt; anything right now.
  The panther is just standing and staring with his head slightly tilted.

  ?P
  And the effect the wolf felt is not familiar.
  He does not recognize the magic.
  Was it some strange effect of the nudity spell?
  Or is some device in this room applying strange magic?

  ?P
  Nero reflexively casts mage-sight to try to understand
  what is happening to him.

  ?P
  &lt;ul class=actions&gt;
    &lt;li&gt;[[Cast mage-sight.|n1p Barbs Glitch 4]]&lt;/li&gt;
  &lt;/ul&gt;

&lt;&lt;/glitch-text&gt;&gt;

&lt;&lt;if !_isTranscript&gt;&gt;
  &lt;&lt;script&gt;&gt;
    $(document).one(&quot;:passagedisplay&quot;, () =&gt; {
      $(&quot;#glitch-2&quot;).removeClass(&quot;glitch-hidden&quot;);
      setTimeout(() =&gt; $(&quot;#glitch-2&quot;).addClass(&quot;glitch-fading-out&quot;), 1000);
    });
  &lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="378" name="n1p Barbs Glitch 4" tags="mt-ready" position="3925,1375" size="100,100">&lt;&lt;nobr&gt;&gt;

Mage-sight is a change in the self, but it feels like a change in the world.
Ordinary objects begin to glow with vibrant life,
and streams of shimmering energy fill the air.

?P
And the energies in this room are spectacular.
The entire space is filled with a form of energy that Nero has
not seem before.
Ivex himself is a vortex of power.
Strands of exotic energy from many locations
converge on a web around the iridescent spirit of the panther,
and his spectral arcs are embedded in a complex weave
of axioms that commute too quickly for Nero to understand.

?P
The wolf recognizes &lt;em&gt;some&lt;/em&gt; of the magic constructs
in the room.
Many magic axioms are invariant to substitution,
and this exotic energy seems able to act like any other.

?P
However, &lt;em&gt;seeing&lt;/em&gt; the energy is different from &lt;em&gt;using&lt;/em&gt; it.
The energy&#39;s exotic harmonics have a pattern that
Nero did not know was possible.
Ordinarily, he would happily spend many hours, or even days,
studying this exotic energy,
and maybe finding a way to attune his spectral arcs to it.

?P
But his attention right now is focused on searching for any magic
that might do him harm.

?P
[[Continue|n1p Barbs Glitch 5]]

/* set n_mageSight deferred to end of this sequence */
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="379" name="n1p Barbs Glitch 5" tags="mt-ready" position="4050,1375" size="100,100">&lt;&lt;nobr&gt;&gt;

Nero does not find any magic directed at him.
He does not even see anything that looks &lt;em&gt;dangerous&lt;/em&gt;.
But he is not confident of this assessment,
because the exotic energy is strange and unfamiliar.
Plus his bound position makes it difficult to see behind him.
Mage-sight unfortunately does not grant the ability to
see in directions his eyes cannot.

?P
The panther speaks. &quot;Is this
&lt;&lt;glitch-text&gt;&gt;
  affliction normal?&quot;

  ?P
  &quot;What are you talking about?&quot; asks the wolf.

  ?P
  &quot;Are you not aware that your body freezes, and your eyes go blank
  for a second?&quot;

  ?P
  &quot;I have never experienced such a thing!&quot;
  
  ?P
  &quot;Really.&quot; Ivex chuckles.
  &quot;Of course you haven&#39;t. How &lt;em&gt;interesting&lt;/em&gt;.&quot;
  
  ?P
  He approaches the naked, vulnerable wolf.
  The panther&#39;s eyes are gleaming with a predatory stare.
  A fountain of shimmering exotic energy swirls around him
  with intricate patterns formed out of axioms that commute
  too quickly for Nero to understand.

  ?P
  The wolf tries to deter the panther&#39;s advance.
  
  ?P
  &lt;ul class=actions&gt;
    &lt;li&gt;[[`&quot;Please, I don&#39;t...&quot;`|n1p Barbs Glitch 6]]&lt;/li&gt;
  &lt;/ul&gt;

&lt;&lt;/glitch-text&gt;&gt;

&lt;&lt;if !_isTranscript&gt;&gt;
  &lt;&lt;script&gt;&gt;
    $(document).one(&quot;:passagedisplay&quot;, () =&gt; {
      $(&quot;#glitch-2&quot;).removeClass(&quot;glitch-hidden&quot;);
      setTimeout(() =&gt; $(&quot;#glitch-2&quot;).addClass(&quot;glitch-fading-out&quot;), 1000);
    });
  &lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="380" name="n1p Barbs Glitch 6" tags="mt-ready" position="4175,1375" size="100,100">&lt;&lt;nobr&gt;&gt;

Nero shakes his head. The exotic energy filling this room is quite
fascinating and distracting. What was he trying to say just now?

?P
Well, whatever it was, it&#39;s probably not as important as
paying attention to the panther who has just magicked
away the wolf&#39;s clothes.
Ivex is now uncomfortably close,
and he&#39;s running his fingers across the newly exposed fur
on Nero&#39;s naked chest.

?P
$n_afterNaked

&lt;&lt;run
  $n_ivexNear = true;
  $n_mageSight = true;
  MT.neroResetObjectDim();
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="381" name="n1p Barbs Skip" tags="mt-ready" position="3550,1675" size="100,100">&lt;&lt;nobr&gt;&gt;

Nero&#39;s been in this type of situation before:
awkwardly amorous mage &quot;accidentally&quot; spills a drink,
or &quot;miscasts&quot; a spell that sets clothing on fire.
And when the initiator of the mishap is a pretty female,
the wolf is often quite willing to indulge the obvious ploy.

?P
&lt;&lt;if $n_subby&gt;&gt;
  Ivex is &lt;em&gt;not&lt;/em&gt; a pretty female, and he has made no
  effort to hide his intent.
  The behavior is strange and creepy, yes,
  but Nero is also becoming fascinated by the panther&#39;s power.

  ?P
  The undressing spell was remarkably fast and precise!
  Nero does not know an easy way to construct
  a spell that would target his clothes but not the
  leather bonds, which are semantically equivalent
  to clothing in every spell axiom that he knows.
  Despite his predicament, or perhaps because of it,
  Nero is slightly awed by Ivex&#39;s magic.
  Here is a person who&#39;s clearly accustomed to getting what he wants,
  not because he orders some underling to do it,
  but because he can &lt;em&gt;make&lt;/em&gt; it happen himself.
  ?P
  Nero is curious about what else Ivex is able to do.
  ?P
  Well, other than &lt;em&gt;this&lt;/em&gt;.
  The panther has approached with his right paw firmly grasping
  his own bulging crotch, and he&#39;s using his left paw
  to stroke the fur on the wolf&#39;s naked chest.
  
&lt;&lt;else&gt;&gt;
  This is not one of those times.
  ?P
  Nero mentally cringes as Ivex struts forward and brings
  his left paw up to stroke the fur on the wolf&#39;s naked chest.
  ?P
  The panther&#39;s right paw is, of course,
  firmly grasping the feline&#39;s own bulging crotch.
&lt;&lt;/if&gt;&gt;

?P
It&#39;s clear that Nero will soon
&lt;&lt;if $n_subby&gt;&gt;
  become acquainted with
&lt;&lt;else&gt;&gt;
  be unfortunate enough to meet
&lt;&lt;/if&gt;&gt;
Ivex the Magnificent&#39;s...

?P
&lt;&lt;barbs-announce soon&gt;&gt;
&lt;ul class=actions&gt;
  &lt;&lt;mt-seen $sn_barbsSkip&gt;&gt;
    &lt;&lt;mtl $n_afterNaked &quot;$n_barbs = true; MT.mdSet(&#39;sn_barbsSkip&#39;, true)&quot;&gt;&gt;
      ...barbed feline cock.
    &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;mtl $n_afterNaked &quot;delete $n_barbs; MT.mdSet(&#39;sn_barbsSkip&#39;, true)&quot;&gt;&gt;
      ...smooth feline cock.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
&lt;/ul&gt;

&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="382" name="n1p Barbs Slow 1" tags="mt-ready big-mood" position="3375,1825" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleLit false&gt;&gt;

&lt;style&gt;
.fade-in:not(.fade-in-hidden) .glitch-link {
  opacity: 0;
}
&lt;/style&gt;

All of Nero&#39;s clothes disappear.

?P
&lt;&lt;fade-in 0.7s&gt;&gt;

&lt;&lt;if $n_subby&gt;&gt;
  The wolf shivers and looks away shyly.
  &lt;&lt;set _next = &#39;[[n1p Barbs Slow 2s1]]&#39;.slice(2, -2)&gt;&gt;

&lt;&lt;elseif $n_abused&gt;&gt;
  The wolf shivers, and not just from the sudden chill.

  &lt;&lt;set _next = &#39;[[n1p Barbs Slow 2a1]]&#39;.slice(2, -2)&gt;&gt;
&lt;&lt;else&gt;&gt;
  The wolf shivers slightly from mild embarrassment
  and the sudden chill.

  &lt;&lt;set _next = &#39;[[n1p Barbs Slow 2n1]]&#39;.slice(2, -2)&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $kn_Mica&gt;&gt;
  ?P
  &lt;ul class=actions&gt;
    &lt;&lt;mt-seen $kn_Mica &amp;&amp; $kn_TigerKeratin &amp;&amp; $kn_TigerMyth&gt;&gt;
      &lt;&lt;mtl _next&gt;&gt;
        Sudden nudity is a juvenile prank...
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    &lt;&lt;mt-seen $sn_barbsSkip&gt;&gt;
      &lt;&lt;mtl [[n1p Barbs Skip]]&gt;&gt;
        Nero&#39;s been in this type of situation before...
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    &lt;span class=glitch-link&gt;
      &lt;&lt;mtl [[n1p Barbs Glitch 1]]&gt;&gt;
        His subconscious expected this...
      &lt;&lt;/mtl&gt;&gt;
    &lt;/span&gt;
  &lt;/ul&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;include _next&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/fade-in&gt;&gt;

&lt;&lt;set $n_naked = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="383" name="n1p Barbs Slow 2a1" tags="mt-ready inclusion" position="3550,1825" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused true&gt;&gt;
&lt;&lt;vi-always n_subby false&gt;&gt;

Sudden nudity is a juvenile prank,
but the panther seems to have more than humiliation in mind,
since his right paw is firmly grasping his own crotch.

?P
The spell&#39;s trigger was quick, and the effects were quite precise.
Ivex must have done this many times before.

?P
The panther approaches with a smirk.
It seems clear that Nero will soon be unfortunate enough to meet
Ivex the Magnificent&#39;s cock.

?P
This will not be the wolf&#39;s first encounter with an unwelcome feline cock.
Many years ago, when Nero was still a novice...

?P
[[Continue|n1p Barbs Slow 4]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="384" name="n1p Barbs Slow 2n1" tags="mt-ready inclusion" position="3550,2075" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_abused false&gt;&gt;
&lt;&lt;vi-always n_subby false&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;

Sudden nudity is a juvenile prank,
but Nero is still a little bit impressed.
This spell was much cleaner than any student could be expected to cast.

?P
It isn&#39;t immediately obvious if the wolf&#39;s clothing was destroyed
or teleported away, but in either case the spell was remarkably precise,
since it targeted &lt;em&gt;only&lt;/em&gt; his clothes,
and not the leather straps or wooden cross holding him in place.
Nero didn&#39;t even feel it disturb any of the hairs of his fur.

?P
And the spell&#39;s trigger was such a small, quick gesture.
The wolf mage starts sketching in his mind
the matrix for a similar spell.
It&#39;s quite large and complicated,
and it would need a sizable substrate to store it.
He wonders where the substrate could be.

?P
Is it something Ivex is wearing?
Or perhaps it&#39;s something in this room...

?P
[[Continue|n1p Barbs Slow 2n2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="385" name="n1p Barbs Slow 2n2" tags="mt-ready" position="3675,2075" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;

A moment later, a different thought lands in Nero&#39;s brain.

?P
Ivex has &lt;em&gt;specifically prepared&lt;/em&gt; a complicated spell
that will quickly remove all the clothes from a bound prisoner.

?P
He must do this a lot.

?P
Nero suddenly realizes what his eyes have already been staring at.
The panther mage&#39;s right paw is firmly grasping his own crotch.

?P
It seems a safe bet that Nero, restrained and exposed as he is,
will soon be unfortunate enough to see Ivex the Magnificent&#39;s cock.
Nero shivers some more. From the chill.

?P
Ah well. It wouldn&#39;t be his first encounter with an unsolicited feline cock.

?P
Many years ago, when Nero was still a novice student...

?P
[[Continue|n1p Barbs Slow 4]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="386" name="n1p Barbs Slow 2s1" tags="mt-ready inclusion" position="3550,1950" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_subby true&gt;&gt;

Sudden nudity is a juvenile prank,
but Ivex is no ordinary bully.
The undressing spell is genuinely impressive.
It somehow disappeared all the wolf&#39;s clothing
without touching anything else.

?P
In particular, the leather straps are indistinguishable
from clothing in fundamental magic axioms.
Nero &lt;em&gt;does&lt;/em&gt; know a complex matrix that can distinguish them,
but that particular matrix has difficulty distinguishing
between clothing and fur.

?P
And the casting was incredibly quick!
The wolf mage does not know how he would build such a spell himself.
In other circumstances, he&#39;d spend some time happily
sketching out the possibilities. But Ivex is approaching
with unmistakable intent.

?P
The panther&#39;s tail twitches with excitement,
and his right paw is brazenly grabbing his own crotch.
Nero can&#39;t stop glancing at it, anticipating the
moment when Ivex loosens his pants and presents his feline cock.

?P
The wolf&#39;s memory flashes back to his first encounter with a feline cock.
It was many years ago, when Nero was still a student...

?P
[[Continue|n1p Barbs Slow 4]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="387" name="n1p Barbs Slow 4" tags="mt-ready" position="3775,1875" size="100,100">&lt;&lt;nobr&gt;&gt;

Nero usually enjoyed field games at the Windbone Magic Academy, but on that fateful day, he took an awkward step while trying to intercept a passing ball. His ankle twisted, and he fell to the ground in distress. The athletics coach took only a brief look at the injury before declaring it was reason enough to dismiss Nero early.

?P
The young wolf limped his way to the gymnasium showers. The changing area was full of older students who were drying off and gathering into small packs that wandered toward the cafeteria and dorms. Nero waited until all their banter and laughter disappeared down the halls, then he undressed and entered the showers himself.

?P
It wasn&#39;t until after he finished washing, when he started toweling himself dry, that he realized he was not alone.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1p Barbs Slow 5]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="388" name="n1p Barbs Slow 5" tags="mt-ready" position="3900,1875" size="100,100">&lt;&lt;nobr&gt;&gt;

The bin for used towels was stationed at a pillar near the entrance to the changing area. And on the other side of the pillar, on a bench not visible from the entrance, a tiger lounged in light and shadow.

?P
The tiger was larger than Nero in a slim way, athletic without being bulky or noticeably muscular. He was relaxed and leaning comfortably against the wall. Blobs of light from a frosted window were splayed across his body, accentuating the black striped pattern on his orange fur.

?P
He was wearing clear glass goggles that glinted in the light. And nothing else.

?P
Nero had undressed himself in plain view of an older, naked, male, &lt;em&gt;very naked&lt;/em&gt;, &lt;em&gt;very male&lt;/em&gt;, tiger.

?P
The tiger&#39;s member was not erect, not fully. The wolf might have fled immediately if it were. It was merely &lt;em&gt;there&lt;/em&gt;, undeniably present, and Nero could see more than a little of the pink shaft protruding from the sheath.

?P
Nero looked away quickly, pretending not to notice anything.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  The tiger spoke with a voice that was low and friendly.
  He said...
  ?P
  &lt;ul class=actions&gt;
    &lt;&lt;mt-seen $kn_TigerKeratin&gt;&gt;
      &lt;li&gt;[[`&quot;The barbs aren&#39;t sharp.&quot;`|n1p Barbs Slow 6y1]]&lt;/li&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    &lt;&lt;mt-seen $kn_TigerMyth&gt;&gt;
      &lt;li&gt;[[`&quot;Penile barbs are a myth.&quot;`|n1p Barbs Slow 6n1]]&lt;/li&gt;
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="389" name="n1p Barbs Slow 6n1" tags="mt-ready" position="4025,1950" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;barbs-announce now&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  The tiger spoke with a voice that was low and friendly.
&lt;&lt;/arc-only&gt;&gt;

He said, &quot;Penile barbs are a myth.&quot;

?P
&quot;I- I&#39;m sorry, wh- what?&quot; Nero&#39;s voice quavered.

?P
The tiger produced a lazy smile. &quot;It&#39;s the first question every canine wants to ask. I&#39;ll admit, when I was a first-year student, I had curiosity about the anatomy of your species too.&quot;

?P
The young wolf wrapped his too-small towel around his nakedness, trying to make his shy actions seem like just normal steps in the drying of his fur.

?P
The tiger continued with confidence. &quot;It&#39;s true that feral feline species, many of them, have keratinous spines on their penis. But we appear to have lost them sometime in the evolution of an upright posture. There&#39;s ongoing debate on the subject. Penises are not particularly well preserved in archeological or fossil records. Much of the debate centers on interpretation of some historical writings that appear to mention penile barbs. The most well-known instance is an uncharacteristically vulgar play that is attributed to Jocoros of Ancient Parenthia. But even if the authorship weren&#39;t in doubt, the comically large barbed penis in the play is attached to a lynx that&#39;s a manifestation of the god Torna, who represents, among other things, the bestial impulses that arise when people engage in war, and love...&quot;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1p Barbs Slow 6n2]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;run
  delete $n_barbs;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="390" name="n1p Barbs Slow 6n2" tags="mt-ready" position="4150,1950" size="100,100">&lt;&lt;nobr&gt;&gt;

Nero hurriedly continued to dry himself and scramble into his clothes, nodding at what seemed like appropriate times, trying to maintain a friendly distance while also trying to avoid giving the impression that he had any interest in the topic.

?P
When he finished dressing, the tiger had left historical lecture behind and was in middle of recounting some personal feedback he&#39;d received from a lover who had experienced both feline and canine cock.

?P
Nero was unwilling to approach the tiger more than necessary, so he threw his towel at the used-towel bin. It missed.

?P
As the young wolf limped away with what remaining dignity he could muster, he heard the tiger&#39;s laughter chase him down the hall.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_TigerMyth&gt;&gt;
  [[Continue|n1p Barbs Slow End]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="391" name="n1p Barbs Slow 6y1" tags="mt-ready" position="4025,1825" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;set $n_barbs = true&gt;&gt;
  &lt;&lt;barbs-announce now&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  The tiger spoke with a voice that was low and friendly.
&lt;&lt;/arc-only&gt;&gt;

He said, &quot;The barbs aren&#39;t sharp.&quot;

?P
&quot;Wh-what?&quot; Nero&#39;s voice faltered.

?P
The tiger chuckled. &quot;All my canine friends ask me about it, though sometimes it takes a few drinks before they do. I was very drunk myself, the first time I asked about canine knots.&quot;

?P
The young wolf crouched down to hide his nakedness, trying to make his cowering seem like a casual, natural motion as he dried his fur.

?P
The tiger seemed unaware of the awkwardness of the situation. &quot;Most feline species have penile spines to some degree. Ocelots have tiny spines that are just nubs, and lions have prominent spines that are angled like barbs. They&#39;re made of keratin, which is a versatile biological substance. It was once argued that bones were the same substance as keratin, but about a century ago, Kelvin the Younger convincingly demonstrated the difference with a simple chimerical reaction. Antlers are bone, which is not keratin, and horns are bone covered in keratin. Not that keratin is always firm or sharp. After all, whiskers and fur are also made of keratin...&quot;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1p Barbs Slow 6y2]]

&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="392" name="n1p Barbs Slow 6y2" tags="mt-ready" position="4150,1825" size="100,100">&lt;&lt;nobr&gt;&gt;
Nero struggled to put on his clothes while his fur was still damp.

?P
The tiger continued his lecture. &quot;Penile spines are not as hard as horns or as soft as fur. They&#39;re an intermediate firmness, a bit like the stiffness of straw. Perhaps a familiar analogy would be a bristle brush.&quot;

?P
Nero approached the bin to deposit his used towel. He tried to make it clear that his destination was the bin, not the large tiger that was near it. When he was close enough to smell the tiger&#39;s musk among the confusion of other moist scents, the tiger said, &quot;Would you like to feel it?&quot;

?P
The young wolf, in a panic, threw the towel at the tiger and fled as quickly as he could on his injured ankle. The tiger&#39;s laughter reverberated in Nero&#39;s head, even after he was far beyond earshot of the showers.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_TigerKeratin&gt;&gt;
  [[Continue|n1p Barbs Slow End]]
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="393" name="n1p Barbs Slow End" tags="mt-ready" position="4275,1875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

It&#39;s an embarrassing memory from his naive, younger self.
&lt;&lt;mt-seen $kn_Mica&gt;&gt;
  &lt;&lt;if !$n_barbsSlowExtraVisited&gt;&gt;
    And that wasn&#39;t even the &lt;&lt;tran-cut [[worst bit|n1p Mica Extra 1]]&gt;&gt;...
  &lt;&lt;else&gt;&gt;
    He&#39;ll never forget the tiger&#39;s
    &lt;&lt;tran-cut [[surprising reappearance|n1p Mica Extra 1]]&gt;&gt;...
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/mt-seen&gt;&gt;

?P
Nero shakes off the memories of
?barbed feline penises from that... complicated year.
There are much more urgent matters to consider.

?P
Such as, the noticeably horny panther mage who has
&lt;&lt;if $n_subby&gt;&gt;
  used astonishing magic to remove
&lt;&lt;else&gt;&gt;
  just magicked away
&lt;&lt;/if&gt;&gt;
the wolf&#39;s clothes.
Ivex is now uncomfortably close,
and he&#39;s running his fingers across the newly exposed fur
on Nero&#39;s naked chest.

?P
$n_afterNaked

&lt;&lt;set $n_barbsSlow = true&gt;&gt;
&lt;&lt;set $n_ivexNear = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="394" name="n1p Mica Extra 1" tags="mt-ready" position="4275,1650" size="100,100">&lt;&lt;nobr&gt;&gt;

The day after the embarrassing encounter in the showers, the young Nero saw the strange tiger again in his third-hour class.

?P
Cryptomancy 1 was a perennial favorite of novice students, who always enjoyed the dynamic teaching methodology of the effervescent Magister Starpaw. But a few weeks into the second semester, the magister suffered grave injury in an unpleasant encounter with her ex, and she was given leave for the rest of the semester to recover.

?P
Fortunately for her students, who would otherwise fall behind in their studies, the Academy was quick to enlist an accomplished professional cryptomancer, Mica Teboren, to take her place. There was some excitement about the appointment. Mica was said to have lost his right arm in a lab accident, and instead of having a healer grow a replacement, he had built one himself out of metal, mechanics, and magic, imbuing it with fantastic powers that he was occasionally willing to demonstrate.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1p Mica Extra 2]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="395" name="n1p Mica Extra 2" tags="mt-ready" position="4400,1675" size="100,100">&lt;&lt;nobr&gt;&gt;

The day of the substitute professor&#39;s inaugural appearance, Nero arrived late. The lecture hall was already overflowing with many more students than were officially enrolled in the class. Nero shoved his way through throngs of eager students, trying to reach his canine friends. But the audience was too packed and chaotic. There was little chance of him reaching such a specific goal, so he settled for trying to find a place to stand that would give him a view of the lectern, currently occupied by the Academy Chancellor in the middle of a flavorless introduction.

?P
Nero&#39;s motion through the crowd stopped when he became stuck in a cluster of older feline students, who were not at all pleased to accommodate him there. The nearest one grimaced at him, and a skinny lion behind him proceeded to insult the young wolf&#39;s ancestry.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1p Mica Extra 3]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="396" name="n1p Mica Extra 3" tags="mt-ready" position="4525,1725" size="100,100">&lt;&lt;nobr&gt;&gt;

But the obnoxious lion, and the entire room of students, went completely silent when Mica Teboren entered the room. The new professor walked in with his artificial arm raised and surrounded by a swirl of glowing lines. And as he brought his hand down and across his chest in a confident sixth-weave pattern, an orb of intertwined water and fire appeared in his palm.

?P
Mica turned his palm to face the audience. The orb started to grow and spin in a hypnotic swirl. Eventually, the globe of water and fire grew as large as the professor&#39;s head. And then it became an explosion of ice that sprinkled the nearest students with glittery snow.

?P
Everyone was astonished at the sight. Nero especially so. His ears were completely flat. Mica was the strange tiger from the showers.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_Mica&gt;&gt;
  [[Return|n1p Barbs Slow End]]

  &lt;&lt;set $n_barbsSlowExtraVisited = true&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="397" name="n1s Anti-magic 1" tags="mt-ready" position="2925,1500" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit n_ivexGone n_ivexReceptive&gt;&gt;
  &lt;&lt;em-assert $n_magicPhase === MP_triedMagic&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Anti-magic fields are broadly divided into two categories.

?P
The strongest type of anti-magic simply applies all its power toward complete suppression of all magic spells. It&#39;s an effective tactic in war, where an anti-magic division can be supported and defended by other units.

?P
But in less organized situations, mages usually prefer to suppress hostile magic without also sabotaging their own abilities. So a typical mage&#39;s anti-magic field is a subtle construction that selectively allows the casting of only those spells deemed &quot;correct&quot;.

?P
This is an exceptionally complicated proposition. Lambda&#39;s Theorem proves that it&#39;s impossible for any spell to perfectly distinguish between correct and incorrect spells. (If such a spell existed, it would be possible to construct a lemma of the spell that would declare itself incorrect, thereby suppressing and contradicting itself.)

?P
So in the abstract, theoretical world, selective anti-magic is a pointless endeavor.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1s Anti-magic 2]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="398" name="n1s Anti-magic 2" tags="mt-ready" position="3050,1500" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit n_ivexGone n_ivexReceptive&gt;&gt;
  &lt;&lt;em-assert $n_magicPhase === MP_triedMagic&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

In the pragmatic, actual world, selective anti-magic is a matter of being relentlessly more clever than any opponents. The selectiveness does not need to be a perfect filter. It just needs to be extremely difficult for an adversary to find and use a flaw in the construction.

?P
The best anti-magic fields from reputable mage guilds are quite thorough,
but also quite expensive,
requiring expert maintenance to guard against
newly developed attacks.

?P
&lt;&lt;if $n_abused&gt;&gt;
  Nero is one such expert. Which also makes him an expert in
  &lt;em&gt;bypassing&lt;/em&gt; anti-magic.
  ?P
  The leather bonds that hold him to the cross are not something
  his meager strength can break.
  But the magic bonds restricting his powers
  are a different matter entirely.

&lt;&lt;else&gt;&gt;
  Nero is one such expert.
  Which incidentally also makes him an expert
  in &lt;em&gt;bypassing&lt;/em&gt; the anti-magic fields of other mages.
  ?P
  It&#39;s a skill that&#39;s been quite useful in his unconventional career.
&lt;&lt;/if&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_AntiMagic&gt;&gt;
  &lt;&lt;return-before &quot;n1s Anti-magic 1&quot;&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;run
  $n_antiMagicVisited = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="399" name="n1s Before Cast" tags="mt-ready inclusion" position="2175,1125" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $n_candleHorny&gt;&gt;
  &lt;&lt;vi-always n_naked true&gt;&gt;
  The lupine mage realizes he desperately needs to stroke his throbbing cock.
  His mind searches for a spell that will let him slip free from his bonds.
  &lt;&lt;set $n_magicAction =
    `&lt;&lt;mtl [[n1s Cast Horny 1]]&gt;&gt;`
    + `Cast a simple escape spell.`
    + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;

&lt;&lt;elseif $n_ivexGone&gt;&gt;
  &lt;&lt;vi-always n_naked true&gt;&gt;
  Now that Ivex is gone, Nero can cast an escape spell
  without interruption.
  &lt;&lt;set $n_magicAction =
    `&lt;&lt;mtl [[n1s Cast Alone 1]]&gt;&gt;`
    + `Cast a simple escape spell.`
    + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;

&lt;&lt;elseif $n_subby&gt;&gt;
  &lt;&lt;vi-always n_naked true&gt;&gt;
  The wolf knows he has not demonstrated any magic yet.
  There are only a few spells he can cast while naked and restrained,
  and most of them are simple and obvious.
  But he has one surprising spell that should impress even Ivex.
  &lt;&lt;set $n_magicAction =
    `&lt;&lt;mtl [[n1s Cast Endgame 1]]&gt;&gt;`
    + `Cast Nero&#39;s Endgame.`
    + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;

&lt;&lt;elseif $n_ivexWasReceptive&gt;&gt;
  &lt;&lt;vi-always n_naked false&gt;&gt;
  &lt;&lt;vi-always n_mageSight false&gt;&gt;
  Ivex seems interested enough in what the wolf is saying.
  Perhaps this is a good time for Nero to impress the panther
  with a difficult escape spell.
  &lt;&lt;set $n_magicAction =
    `&lt;&lt;mtl [[n1s Cast Younger 1]]&gt;&gt;`
    + `Cast an impressive escape spell.`
    + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;

&lt;&lt;else&gt;&gt;
  &lt;&lt;vi-always n_naked false&gt;&gt;
  &lt;&lt;vi-always n_mageSight false&gt;&gt;
  Ivex is staring like a predator, so if Nero casts a spell,
  it should be a fast, disabling attack.
  &lt;&lt;if !$n_didSomeAction&gt;&gt;
    Or maybe he should try something else first.
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;set $n_magicAction =
    `&lt;&lt;mtl [[n1s Cast Itch 1]]&gt;&gt;`
    + `Cast an attack spell.`
    + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="400" name="n1s Cast Alone 1" tags="mt-ready" position="2475,1725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;vi-always n_candleLit true&gt;&gt;
&lt;&lt;vi-always n_ivexGone true&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

The absence of the sadistic panther gives Nero a
few more options for escape.
He considers several spells that he could cast while
restrained on the wooden cross, but dismisses most of the
options as inappropriate for this precarious situation.
Teleport spells are too slow and costly to prepare at
an unfamiliar location.
Destruction spells can be convenient and quick,
but they&#39;re also likely to set off
any defenses or traps that might be present
within this room or within the cross itself.

?P
There&#39;s really only one spell suitable for this occasion.
It&#39;s a favorite of rabbit mages,
and well-known to thieves with a bit of magic.
It&#39;s the pragmatic and reliable
&lt;&lt;mt-seen $kn_Oil&gt;&gt;
  &lt;&lt;tran-cut [[Oil of Dragons|n1s Oil Info]]&gt;&gt;.
&lt;&lt;/mt-seen&gt;&gt;

?P
The wolf twitches his ears and speaks the arcane syllables
that every lapine mage knows...

?P
&lt;&lt;mta [[n1s Cast Alone 2]]&gt;&gt;
  Continue
&lt;&lt;/mta&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="401" name="n1s Cast Alone 2" tags="mt-ready" position="2600,1725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;vi-always n_candleLit true&gt;&gt;
&lt;&lt;vi-always n_ivexGone true&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

&lt;&lt;if $n_castOil&gt;&gt;
  Nero quivered slightly when the alteration spell drew energy from his spirit.
  But then...
  ?P
  Nothing happened.
  ?P
  &lt;&lt;include [[n1s Cast Alone 2i]]&gt;&gt;

&lt;&lt;else&gt;&gt;
  Nero quivers slightly as the alteration spell draws energy from his spirit.
  And then...
  ?P
  &lt;&lt;fade-in 6s&gt;&gt;
    Nothing happens.
    ?P
  &lt;&lt;fade-next 2s&gt;&gt;
    &lt;&lt;include [[n1s Cast Alone 2i]]&gt;&gt;
  &lt;&lt;/fade-in&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;run
  delete $n_dimCross;
  delete $n_dimDesk;
  delete $n_dimGrav;
  delete $n_dimKnife;
  $n_castOil = true;
  $n_magicPhase = MP_triedMagic;
  $n_magicPhaseReached = MP_triedMagic;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="402" name="n1s Cast Alone 2i" tags="mt-ready inclusion" position="2725,1725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;if $n_mageSight&gt;&gt;
  No, something &lt;em&gt;did&lt;/em&gt; happen.
  He almost missed seeing it.
  The spell&#39;s knot of energy was pulled away from him,
  and it&#39;s now rising toward the ceiling.
  ?P
  Nero watches his spell briefly stop near the ceiling
  before it continues its upward motion,
  disappearing to somewhere unknown.
  ?P
&lt;&lt;/if&gt;&gt;

The lupine mage is &lt;em&gt;fascinated&lt;/em&gt; by the failure of his spell.
&lt;&lt;mt-seen $kn_AntiMagic&gt;&gt;
  &lt;&lt;tran-cut &quot;Anti-magic fields&quot; &quot;n1s Anti-magic 1&quot;&gt;&gt;
&lt;&lt;/mt-seen&gt;&gt;
are to be expected in
a mage&#39;s lair, but the standard construction
interferes with the &lt;em&gt;casting&lt;/em&gt; of
unauthorized spells.
Once a spell has been released,
it&#39;s quite difficult to anticipate all the ways that
its knotted axioms might act if something interferes with them.

?P
And if the spell&#39;s energy is constrained poorly,
it has a distressing tendency to explode,
which is something that most mages would prefer
to &lt;em&gt;not&lt;/em&gt; happen inside their own home.

?P
Nero wishes that he had time to study all the oddities of this
malignant mage&#39;s lair,
but the flickering red candle reminds him that
rational thought will not stay much longer.
The wolf needs to put aside curiosity about things that
are merely theoretical,
and focus on things that will &lt;em&gt;actually&lt;/em&gt;
satisfy his throbbing red cock.

?P
$n_afterAction

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="403" name="n1s Cast Endgame 1" tags="mt-ready" position="2475,1325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_naked true&gt;&gt;
&lt;&lt;vi-always n_subby true&gt;&gt;
&lt;&lt;vi-always n_thief false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;

&lt;&lt;cv-ignore n_kwAnnounce&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

&lt;&lt;if $n_ivexWasReceptive&gt;&gt;
  &quot;Please,&quot; says the wolf. &quot;Let me show you one of my spells.&quot;
  ?P
  Any mage who&#39;s naked and restrained will be limited in
  what they can cast. But Nero has one spell that no
  other mage in this condition can cast.
&lt;&lt;else&gt;&gt;
  The wolf is dismayed that Ivex&#39;s idea of an apprentice is
  more punching-bag than collaborator.
  But Nero realizes that he has not shown that he is
  &lt;em&gt;capable&lt;/em&gt; of magic.
  ?P
  He decides to cast a spell that no other bound, naked mage can cast.
  &quot;Please,&quot; he says. &quot;Let me show you one of my spells.&quot;
&lt;&lt;/if&gt;&gt;

It&#39;s his greatest creation.
&lt;&lt;mt-seen $kn_Endgame&gt;&gt;
  He calls it &lt;&lt;tran-cut &quot;Nero&#39;s Endgame&quot; &quot;n1s Endgame Info 1&quot;&gt;&gt;.
&lt;&lt;/mt-seen&gt;&gt;
He&#39;s certain that Ivex will be suitably impressed.

?P
Ivex &lt;&lt;= $n_candleLit ? &quot;snorts through his mask.&quot; : &quot;snorts.&quot;&gt;&gt;
&quot;Examining your equipment has already told me what sort
of mage you are. But go ahead, show me what magic you can do.&quot;

&lt;&lt;mf-please&gt;&gt;
  ?P
  The Sprite ?sprSays,
  &lt;span class=sprite-q&gt;&quot;Your spells are the best, ?sprHoldStop&quot;&lt;/span&gt;
&lt;&lt;/mf-please&gt;&gt;

?P
Nero closes his eyes. He visualizes the matrix of the spell that&#39;s
tattooed on his ass.

?P
He calls out, &quot;Behold!&quot; and &lt;em&gt;twists&lt;/em&gt; the matrix...

?P
[[Continue|n1s Cast Endgame 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="404" name="n1s Cast Endgame 2" tags="mt-ready" position="2600,1325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;

Nero feels the tingle of his spell launching from his ass.
And then...

?P
&lt;&lt;fade-in 6s&gt;&gt;
Nothing happens.

?P
&lt;&lt;fade-next 2s&gt;&gt;

The wolf emits a small, involuntary sound that&#39;s a
mixture of confusion and embarrassment.

?P
He does not want to open his eyes.
But he can&#39;t keep them closed forever.

?P
His eyes are slightly wet from the irritation of being squeezed
tightly shut. He blinks until he can see again.

?P
[[Continue|n1s Cast Endgame 3]]
&lt;&lt;/fade-in&gt;&gt;

&lt;&lt;run
  delete $n_dimCross;
  delete $n_dimDesk;
  delete $n_dimGrav;
  delete $n_dimKnife;
  $n_castEndgame = true;
  $n_endgameUsable = true;
  $n_magicPhase = MP_triedMagic;
  $n_magicPhaseReached = MP_triedMagic;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="405" name="n1s Cast Endgame 3" tags="mt-ready" position="2725,1325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

The panther is staring at a spot on the
&lt;&lt;if $n_mageSight&gt;&gt;
  ceiling, where the web of exotic energy has caught a familiar bit of magic.
&lt;&lt;else&gt;&gt;
  ceiling.
&lt;&lt;/if&gt;&gt;
He giggles and says, &quot;I suppose I should have mentioned that
I have a special anti-magic field that makes all your spells useless.
But I see now that your spells are &lt;em&gt;already&lt;/em&gt; useless.&quot;

?P
Ivex looks to the wolf and
&lt;&lt;if $n_candleLit&gt;&gt;
  laughs beneath his mask.
&lt;&lt;else&gt;&gt;
  laughs.
&lt;&lt;/if&gt;&gt;
&quot;I did not even know it was &lt;em&gt;possible&lt;/em&gt; to cast
Raven&#39;s Diversion in such a pathetically weak form.
I will give you points for creativity,
but you definitely have need of my... training.&quot;

?P
Nero splays his ears in genuine distress and speaks softly,
&quot;Of course...&quot;

?P
The wolf quickly tries to change the subject.
&quot;What was it you were asking me?&quot;

?P
$n_afterAction

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="406" name="n1s Cast Horny 1" tags="mt-ready" position="2475,1475" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;vi-always n_naked true&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

The lupine mage has many spells that can
release him from the leather straps that hold him tightly to the wooden cross,
and several more spells that can stroke his needy cock while he&#39;s still bound.
But the first spell that comes to mind,
the simplest to cast in his uncomfortably restrained and aroused state,
is a spell that every rabbit mage knows:
&lt;&lt;mt-seen $kn_Oil&gt;&gt;
  &lt;&lt;tran-cut [[Oil of Dragons|n1s Oil Info]]&gt;&gt;.
&lt;&lt;/mt-seen&gt;&gt;

?P
&lt;&lt;if !$n_ivexGone&gt;&gt;
  The panther is
  &lt;&lt;= $n_ivexNear ? &quot;nearby&quot; : &quot;watching&quot;&gt;&gt;,
  but Nero does not care.
  His cock is more demanding than Ivex could ever be.
&lt;&lt;/if&gt;&gt;

The wolf twitches his ears and speaks the arcane syllables that
every rabbit mage knows...

?P
[[Continue|n1s Cast Horny 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="407" name="n1s Cast Horny 2" tags="mt-ready" position="2600,1475" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_naked true&gt;&gt;
&lt;&lt;vi-ignore-if n_ivexGone n_candleLit&gt;&gt;
&lt;&lt;cv-try n_ivexNear true&gt;&gt;

Nero shivers as the alteration spell sucks energy from his spirit.
And then...

?P
&lt;&lt;fade-in 6s&gt;&gt;
Nothing happens.

?P
&lt;&lt;fade-next 2s&gt;&gt;
The wolf mage whines with frustration from the failure of the spell.
That spell was his best chance of stroking his cock!
Did he stumble that awkward fifth syllable?
Did he twitch his ears wrong?
Maybe there&#39;s an anti-magic field?
?P
Or maybe he just fucked up!
He&#39;ll have to try again.
But his magic energies are now depleted.
He&#39;ll have to wait nearly a &lt;em&gt;minute&lt;/em&gt;
to regain enough energy to cast it again!
It&#39;s an &lt;em&gt;unbearable&lt;/em&gt; wait for his greedy, needy cock.
He desperately searches for another way to satisfy it.

&lt;&lt;if !$n_ivexGone&gt;&gt;
  &lt;&lt;vi-always n_ivexNear true&gt;&gt;
  ?P
  &lt;&lt;if $n_candleLit&gt;&gt;
    Ivex laughs beneath his grinning mask.
  &lt;&lt;else&gt;&gt;
    Ivex laughs with more than a little mockery.
  &lt;&lt;/if&gt;&gt;
  &quot;I thought you were
  &lt;&lt;= $n_thief ? &quot;pretending to be&quot; : &quot;&quot;&gt;&gt;
  a &lt;em&gt;lupine&lt;/em&gt; mage, but you reach
  immediately for a &lt;em&gt;lapine&lt;/em&gt; spell.
  I suppose I shouldn&#39;t really be surprised.
  Herbivore magic is quite fitting for the
  predicament you&#39;re in. And I wonder now if maybe you actually
  &lt;em&gt;did&lt;/em&gt; see my trap, but stepped deliberately into it.&quot;

  ?P
  The panther reaches up with a gesture
  and makes a throwing motion at
  &lt;&lt;= $n_cabinetsViewed ? &quot;the&quot; : &quot;a&quot;&gt;&gt;
  stuffed penguin on a cabinet.
  &lt;&lt;if $n_mageSight&gt;&gt;
    A knot of energy travels to the penguin, which
  &lt;&lt;else&gt;&gt;
    The penguin
  &lt;&lt;/if&gt;&gt;
  glistens for a
  &lt;&lt;if $n_penguinCoinDropped&gt;&gt;
    moment.
  &lt;&lt;else&gt;&gt;
    moment, and a small coin-like object drops from its mouth.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction
&lt;&lt;/fade-in&gt;&gt;

&lt;&lt;run
  delete $n_dimCross;
  delete $n_dimDesk;
  delete $n_dimGrav;
  delete $n_dimKnife;
  $n_castOil = true;
  $n_magicPhase = MP_triedMagic;
  $n_magicPhaseReached = MP_triedMagic;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="408" name="n1s Cast Itch 1" tags="mt-ready" position="2475,775" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

&lt;&lt;if $n_itchVisited&gt;&gt;
  Enough reminiscing.
&lt;&lt;elseif $n_stalling&gt;&gt;
  Enough stalling.
&lt;&lt;elseif $n_banter&gt;&gt;
  Enough banter.
&lt;&lt;else&gt;&gt;
  Enough preliminaries.
&lt;&lt;/if&gt;&gt;
Nero quickly wriggles his fingers in a familiar pattern
and growls the arcane syllables
that invoke his special version of
&lt;&lt;mt-seen $kn_Itch&gt;&gt;
  &lt;&lt;tran-cut [[Superb Itch|n1s Itch 1]]&gt;&gt;.
&lt;&lt;/mt-seen&gt;&gt;

?P
The panther&#39;s ears perk up in middle of the incantation, but Ivex is otherwise slow to react.

?P
Superb Itch is not the flashiest of spells, but it&#39;s very quick to cast. In Nero&#39;s experience, it often wins magic battles before the opposing mage even finishes casting their opening move.

?P
The lupine mage pronounces the final syllable of the spell...

?P
[[Continue|n1s Cast Itch 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="409" name="n1s Cast Itch 2" tags="mt-ready" position="2600,775" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

Nero feels the familiar mental jolt that happens whenever
an evocation spell is cast. And then...

?P
&lt;&lt;fade-in 6s&gt;&gt;
Nothing happens.

?P
&lt;&lt;fade-next 2s&gt;&gt;
The lupine mage is somewhat confused.
It certainly &lt;em&gt;felt&lt;/em&gt; like the spell was
successfully cast. And a base axiom of Superb Itch &lt;em&gt;requires&lt;/em&gt;
its energy to flow through &lt;em&gt;some&lt;/em&gt; living target.
But neither the wolf nor the panther has been affected by it.

?P
&lt;&lt;if $n_candleLit&gt;&gt;
  Ivex snorts through his grinning mask.
&lt;&lt;else&gt;&gt;
  Ivex is grinning.
&lt;&lt;/if&gt;&gt;
&quot;Superb Itch! That&#39;s amazing!
I haven&#39;t seen anyone cast that in years.
I still remember the first time someone used it on me.
He was a wolf, much like you. Not nearly as handsome as you though,
especially not now.&quot;
?P
What does &lt;em&gt;that&lt;/em&gt; mean?
&lt;&lt;if $n_abused&gt;&gt;
  Nero is pretty sure he doesn&#39;t want to know.
&lt;&lt;else&gt;&gt;
  Nero is not sure he wants to know.
&lt;&lt;/if&gt;&gt;

?P
The panther continues. &quot;I was a little worried,
&lt;em&gt;disconcerted&lt;/em&gt;,
when I saw that a mage had fallen into my trap.
A really powerful mage might be able to
overcome the defenses of my domain.
&lt;&lt;if $n_thief&gt;&gt;
  But of course you are merely a thief with some
  clumsy novice spells...&quot;
&lt;&lt;else&gt;&gt;
  But after seeing your Superb Itch...&quot;
&lt;&lt;/if&gt;&gt;
?P
Ivex laughs. &quot;Is that really the best that you can do?
What a pitiful bit of energy you&#39;ve thrown at me.
Still, it seems a shame to waste it.&quot;
?P
The panther looks at the ceiling, reaches up to grab something invisible,
then throws it...
?P
[[Continue|n1s Cast Itch 3]]
&lt;&lt;/fade-in&gt;&gt;

&lt;&lt;run
  delete $n_dimCross;
  delete $n_dimDesk;
  delete $n_dimGrav;
  delete $n_dimKnife;
  $n_castItch = true;
  $n_magicPhase = MP_triedMagic;
  $n_magicPhaseReached = MP_triedMagic;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="410" name="n1s Cast Itch 3" tags="mt-ready" position="2725,775" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

&lt;!-- naked: after spell cast, right before subby, right before candle horny --&gt;
&lt;&lt;vi-always n_naked false&gt;&gt;

Nero feels the spell&#39;s axioms land
and become satisfied,
on every millimeter of his skin.
The unfortunate wolf writhes in his bonds
from the intense itching sensation.

?P
At least the Superb Itch hasn&#39;t been amplified by reflections.
Still, the ordinary power of Nero&#39;s evocation is unpleasant enough.
It&#39;s probably a blessing that he &lt;em&gt;is&lt;/em&gt; bound,
since victims often injure themselves
with the scratching of their own claws.
But the restraints do not &lt;em&gt;feel&lt;/em&gt; like a blessing to the wolf.
He whines and writhes and lashes his tail in frustration.
The best he can do to alleviate the irritation is to
awkwardly wriggle within his robe against
the wooden cross and the leather straps.
?P
Ivex watches the squirming wolf with amusement.
After a minute that feels much longer,
the panther dismisses the Superb Itch with a gesture.
&lt;&lt;if $n_candleLit&gt;&gt;
  Ivex says through his grinning mask,
&lt;&lt;else&gt;&gt;
  Still smirking, Ivex says,
&lt;&lt;/if&gt;&gt;
&quot;Your clothing seems to be causing you some discomfort.
Let me help you with that.&quot;
?P
He raises an arm and snaps his fingers...
?P
&lt;&lt;if $n_candleLit&gt;&gt;
  &lt;&lt;mta &quot;n1p Barbs Fast 1&quot;&gt;&gt;Continue&lt;&lt;/mta&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;mta &quot;n1p Barbs Slow 1&quot;&gt;&gt;Continue&lt;&lt;/mta&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $n_afterNaked = &quot;[[Continue|n1s Cast Itch 4]]&quot;&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="411" name="n1s Cast Itch 4" tags="mt-ready" position="2850,775" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;vi-always n_ivexNear true&gt;&gt;

&lt;&lt;barbs-announce maybe&gt;&gt;

The panther&#39;s unwelcome caress becomes a light scratching of claws
across the wolf&#39;s bare chest. One claw draws a slowly shrinking circle
in the fur of Nero&#39;s left breast, and his nipple perks a bit in apprehension.

?P
&lt;&lt;if $n_candleLit&gt;&gt;
  Ivex speaks through his grinning mask.
&lt;&lt;else&gt;&gt;
  Ivex leers.
&lt;&lt;/if&gt;&gt;
&quot;Doesn&#39;t that feel better now? I&#39;m so glad that you&#39;ve
allowed me to scratch your itches.&quot;

?P
Nero looks away and tries to suppress his body&#39;s autonomic responses.
His ears he can keep straight. His breathing will stay steady. But he doesn&#39;t
seem to be able to suppress the bristling of the fur on his neck.

?P
Ivex leans close and purrs into Nero&#39;s ear. &quot;Perhaps you&#39;ll also permit
me to... scratch some other itches.&quot;

?P
The panther&#39;s right paw is now at the wolf&#39;s crotch.
The claws lightly brush up and down the wolf&#39;s furry sheath
in long, slow strokes.

?P
[[Continue|n1s Cast Itch 5]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="412" name="n1s Cast Itch 5" tags="mt-ready" position="2975,775" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

&lt;&lt;if $n_abused&gt;&gt;
  Nero
  &lt;&lt;= $n_antiMagicVisited ? &quot;has frozen&quot; : &quot;freezes&quot;&gt;&gt;
  in his bonds and
  &lt;&lt;= $n_antiMagicVisited ? &quot;is trying&quot; : &quot;tries&quot;&gt;&gt;
  not to react to the
  unwanted genital stimulation.
  His mind is darting like a guppy trapped in a pool of sharks.
  His instinct is to resist his captor&#39;s lecherous attention,
  but he wonders if he should instead oblige the depraved panther&#39;s lust.
  Ivex seems to be a fickle and sadistic predator.
  Would such a strategy backfire?
  ?P
  The wolf will need all his wits to avoid further abuse, defeat Ivex&#39;s
  &lt;&lt;mt-seen $kn_AntiMagic&gt;&gt;
    &lt;&lt;tran-cut &quot;anti-magic field&quot; &quot;n1s Anti-magic 1&quot;&gt;&gt;,
  &lt;&lt;/mt-seen&gt;&gt;
  and escape. But for the moment, Nero remains frozen with
  unanswerable questions and indecision.
  ?P
  &lt;&lt;if $n_candleLit&gt;&gt;
    Ivex&#39;s ears twitch. He appears to be
  &lt;&lt;else&gt;&gt;
    Ivex grimaces, apparently
  &lt;&lt;/if&gt;&gt;
  unsatisfied by his victim&#39;s response.
  He speaks
&lt;&lt;else&gt;&gt;
  The panther&#39;s lewd attention is repellent,
  but Nero is more unsettled by the failure of his spell.
  It&#39;s not an entirely surprising outcome, since
  &lt;&lt;mt-seen $kn_AntiMagic&gt;&gt;
    &lt;&lt;tran-cut &quot;anti-magic fields&quot; &quot;n1s Anti-magic 1&quot;&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  are to be expected in
  a mage&#39;s own home.
  ?P
  But this one is not like any he&#39;s seen before.
  Perhaps Ivex&#39;s reputation is deserved.
  He does seem to have an unusual form of magic.
  The wolf may need to use all his wits to escape the panther&#39;s lair,
  as well as distract the perverted mage from
  his pursuit of lascivious acts.
  ?P
  Nero finds some resolve and stares into the panther&#39;s eyes.
  The wolf speaks in his strongest lecturing voice,
  &quot;What are you doing?&quot;
  ?P
  The accusation works. Ivex does stop.
  He freezes in place for a long moment.
  ?P
  But then the panther replies
&lt;&lt;/if&gt;&gt;

&lt;&lt;= $n_candleLit ? &quot;through his grinning mask&quot; : &quot;&quot;&gt;&gt;
in a quiet tone that slowly increases in intensity.
&lt;&lt;if $n_thief&gt;&gt;
  &quot;You might think you&#39;re clever.
  You might be the greatest thief
&lt;&lt;else&gt;&gt;
  &quot;You might think you know magic.
  You might be the greatest mage
&lt;&lt;/if&gt;&gt;
to ever emerge from that foul little den of your tiny little inbred wolf clan.
But I have developed powers far beyond your imagining.
And you are &lt;em&gt;nothing&lt;/em&gt;, here in &lt;em&gt;my&lt;/em&gt; domain,
in the world of &lt;em&gt;Ivex the Magnificent!&lt;/em&gt;&quot;

?P
The last word is practically a scream in Nero&#39;s face.
The agitated panther clenches his fists,
turns away, and paces an angry line back and forth
in front of the
&lt;&lt;= $n_abused ? &quot;flustered&quot; : &quot;dismayed&quot;&gt;&gt; wolf.

?P
It takes a few minutes for the panther&#39;s tail to stop lashing,
for Ivex to stop pacing and muttering.
He takes a deep breath and shakes his body to relax,
but his limbs remain stiff with tension
as he turns to face the wolf.
He stares with eyes that are gleaming marbles above
&lt;&lt;if $n_candleLit&gt;&gt;
  the grinning mask.
&lt;&lt;elseif $n_abused&gt;&gt;
  his repellent grin.
&lt;&lt;else&gt;&gt;
  his obnoxious grin.
&lt;&lt;/if&gt;&gt;

?P
$n_afterAttack

&lt;&lt;run
  delete $n_ivexNear;
  $n_patienceAccel = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="413" name="n1s Cast Sight 1" tags="mt-ready" position="3300,925" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;

Nero will need mage-sight to understand Ivex&#39;s anti-magic field.

?P
The wolf hesitates, because he&#39;s feeling unusually drained.
Most of his arcane energy
was consumed by the failed casting of ?spell.
Normally, his energy would be quickly replenished
by the natural mesh of power that emerges from the planet.
For some reason, replenishment is not happening here.

?P
Energy deserts are not a rare occurrence.
Still, it would be quite odd for a mage to place his home
in such a location.
There must be some other reason for the drought in this place.

?P
Mage-sight can also diagnose the problem of the missing energy.
But mage-sight does itself require energy,
and he has very little to spare...

?P
No, it&#39;s the correct move to make. Consider:
&lt;ol&gt;
&lt;li&gt;Mage-sight is unaffected by most untargeted defenses,
    and it&#39;s exempted by most targeted defenses.&lt;/li&gt;
&lt;li&gt;There&#39;s little point in saving energy for casting some other spell that
    might be stopped by Ivex&#39;s anti-magic.&lt;/li&gt;
&lt;li&gt;Even if mage-sight consumes his energy and leaves him unable
    to cast anything else, an examination of Ivex&#39;s magic
    may help find a flaw that Nero can use to escape.&lt;/li&gt;
&lt;/ol&gt;

The wolf is reassured to discover that his reasoning
is in agreement with his intuition.
He begins a
&lt;&lt;= $n_ivexGone ? &quot;quick&quot; : &quot;quiet&quot;&gt;&gt;
intonation of the most basic mage-sight spell...

?P
[[Continue|n1s Cast Sight 2]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="414" name="n1s Cast Sight 2" tags="mt-ready" position="3425,850" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;

&lt;&lt;if !$n_ivexGone&gt;&gt;
  &lt;&lt;if $n_ivexNear || $n_ivexWasReceptive&gt;&gt;
    Ivex
    &lt;&lt;if $n_ivexNear&gt;&gt;
      hears the incantation.
    &lt;&lt;else&gt;&gt;
      notices the whispered incantation.
    &lt;&lt;/if&gt;&gt;
    He
    &lt;&lt;= $n_candleLit ? &quot;chuckles in his mask.&quot; : &quot;chuckles.&quot;&gt;&gt;
    &quot;Yes, of course you should have mage-sight.
    I &lt;em&gt;encourage&lt;/em&gt; it.
    Once you&#39;ve seen the structures that I&#39;ve created
    in this place,
    you&#39;ll truly understand how
    &lt;&lt;if $n_apprentice&gt;&gt;
      little you know about magic.&quot;
    &lt;&lt;elseif $n_ivexReceptive&gt;&gt;
      much power I command.&quot;
    &lt;&lt;else&gt;&gt;
      helpless you are in my domain.&quot;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;else&gt;&gt;
    Ivex is not close enough to hear the whispering.
    He doesn&#39;t seem to notice Nero casting the spell.
  &lt;&lt;/if&gt;&gt;
  ?P
&lt;&lt;/if&gt;&gt;

Mage-sight is a change in the self, but it feels like a change in the world.
Ordinary objects begin to glow with vibrant life,
and streams of shimmering energy fill the air.

?P
&lt;&lt;if $n_candleHorny&gt;&gt;
  This place is definitely &lt;em&gt;not&lt;/em&gt; an energy desert.
&lt;&lt;else&gt;&gt;
  As the wolf mage suspected, this place is &lt;em&gt;not&lt;/em&gt; an energy desert.
&lt;&lt;/if&gt;&gt;
The room is teeming with a form of energy that Nero has not seen before.
&lt;&lt;if $n_ivexGone&gt;&gt;
  Strands of exotic energy from
  &lt;&lt;= $n_candleHorny ? &quot;everywhere&quot; : &quot;many locations&quot;&gt;&gt;
  form an interlocking web of magics that fill the space of the room with
&lt;&lt;else&gt;&gt;
  Ivex himself is a vortex of power.
  Strands of exotic energy from
  &lt;&lt;= $n_candleHorny ? &quot;everywhere&quot; : &quot;many locations&quot;&gt;&gt;
  converge on a web around the iridescent spirit of the panther,
  and his spectral arcs are embedded in
&lt;&lt;/if&gt;&gt;
a complex weave of axioms that commute too
quickly for Nero to understand.
&lt;&lt;if $n_candleHorny&gt;&gt;
  His mage senses are overwhelmed. It&#39;s almost unbearably stimulating.
&lt;&lt;/if&gt;&gt;

?P
The wolf recognizes &lt;em&gt;some&lt;/em&gt; of the magic constructs
in the room.
Many magic axioms are invariant to substitution,
and this exotic energy seems able to act much like any other.

?P
However, &lt;em&gt;seeing&lt;/em&gt; the energy is different from &lt;em&gt;using&lt;/em&gt; it.
The energy&#39;s exotic harmonics have a pattern that
&lt;&lt;if $n_candleHorny&gt;&gt;
  is mysterious and tantalizing.
  If Nero were less distracted by sexual arousal,
&lt;&lt;else&gt;&gt;
  Nero did not know was possible.
  If he were in a less perilous situation,
&lt;&lt;/if&gt;&gt;
he might happily spend many hours, or even days,
studying this exotic energy,
and perhaps find a way to
&lt;&lt;if $n_candleHorny&gt;&gt;
  grasp it with his spectral arcs.
&lt;&lt;else&gt;&gt;
  attune his spectral arcs to it.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_candleHorny&gt;&gt;
  But his cock is straining,
&lt;&lt;elseif !$n_ivexGone&gt;&gt;
  But Ivex is waiting,
&lt;&lt;elseif $n_candleLit&gt;&gt;
  But the candle is burning,
&lt;&lt;else&gt;&gt;
  But the clock is ticking,
&lt;&lt;/if&gt;&gt;
so Nero does not have time for that now.
&lt;&lt;if $n_candleHorny&gt;&gt;
  He&#39;ll have to satisfy his lust
&lt;&lt;else&gt;&gt;
  He&#39;ll have to see what he can accomplish
&lt;&lt;/if&gt;&gt;
with just
&lt;&lt;= $n_candleHorny ? &quot;adoration&quot; : &quot;examination&quot;&gt;&gt;
of this energy he cannot use.

?P
$n_afterAction

&lt;&lt;run
  $n_mageSight = true;
  MT.neroResetObjectDim();
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="415" name="n1s Cast Sight Horny" tags="mt-ready" position="3300,775" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleLit true&gt;&gt;
&lt;&lt;vi-always n_candleHorny true&gt;&gt;

Something about this room is keeping
the wolf mage&#39;s energy from replenishing after the failure of ?spell.
This place &lt;em&gt;can&#39;t&lt;/em&gt; be an energy desert.
Ivex &lt;&lt;= $n_ivexGone ? &quot;did&quot; : &quot;has done&quot;&gt;&gt;
plenty of magic, with no sign of exhaustion.
?P
Nero looks down at his unnaturally stiff and needy cock,
and he has a sudden realization. The missing magic
energy must be filling his cock!
But there&#39;s some restraint or barrier preventing him from
&lt;em&gt;touching&lt;/em&gt; that energy. Nero strives to
understand what that barrier could be.
If only he could &lt;em&gt;see&lt;/em&gt; it.
?P
The wolf gathers the little bit of energy he has left,
and then intones a basic mage-sight spell...
?P
[[Continue|n1s Cast Sight 2]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="416" name="n1s Cast Younger 1" tags="mt-ready" position="2475,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;vi-always n_thief false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

There&#39;s really only one spell appropriate for this occasion:
&lt;&lt;mt-seen $kn_Younger&gt;&gt;
  &lt;&lt;tran-cut [[Younger&#39;s Escape|n1s Younger Info 1]]&gt;&gt;.
&lt;&lt;/mt-seen&gt;&gt;
It&#39;s not the flashiest of spells, but it&#39;s a virtuoso feat to
cast it without assistance from other mages.
Even Ivex should be impressed by that.

?P
Nero lays the foundation for the spell with a guttural moan.
He makes each of his hands start executing the separate gestures
required of them.
He twitches his ears in a pattern that every rabbit mage knows.
And then he begins intoning the arcane syllables
of the spell, &lt;em&gt;without&lt;/em&gt; interrupting the moan.

?P
Ivex&#39;s ears perk up in surprise during this performance,
but he&#39;s otherwise slow to react.

?P
The dance of Nero&#39;s hands stops. The arcane chant ends. The moan fades
to a whisper, then becomes silence.

?P
The axioms of the spell are energized and ready.
All that remains is to utter a single word to activate them.

?P
Nero smiles, and speaks it...

?P
[[Continue|n1s Cast Younger 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="417" name="n1s Cast Younger 2" tags="mt-ready" position="2600,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

Nero feels the familiar physical chill that happens whenever
an alteration spell is cast. And then...

?P
&lt;&lt;fade-in 6s&gt;&gt;
Nothing happens.

?P
&lt;&lt;fade-next 2s&gt;&gt;
The lupine mage is somewhat confused.
It certainly &lt;em&gt;felt&lt;/em&gt; like the spell was cast.
And he&#39;s confident, mostly confident, that he cast it correctly.
The energy went &lt;em&gt;somewhere.&lt;/em&gt;
It must have done &lt;em&gt;something.&lt;/em&gt;
He reviews his memory of his performance to check for flaws.

?P
His thoughts are interrupted by
&lt;&lt;if $n_candleLit&gt;&gt;
  a snort from Ivex&#39;s grinning mask.
&lt;&lt;else&gt;&gt;
  a chuckle from Ivex&#39;s smirking face.
&lt;&lt;/if&gt;&gt;
&quot;That was the most &lt;em&gt;ridiculous&lt;/em&gt; attempt at casting
Kelvin&#39;s Escape that I&#39;ve ever seen.
Did you develop this solo jester&#39;s act because you failed to find
anyone shameless enough to assist you in your carnival booth?&quot;

?P
&lt;&lt;if $n_abused&gt;&gt;
  Nero&#39;s ears droop with dismay,
  and he quickly turns it into a gesture of embarrassment.
  &lt;em&gt;Feigned&lt;/em&gt; embarrassment.
  He &lt;em&gt;would&lt;/em&gt; defend his art in other circumstances,
  but it seems better to act cowed for Ivex&#39;s &lt;em&gt;verbal&lt;/em&gt; abuse,
  if it will avoid more &lt;em&gt;physical&lt;/em&gt; abuse.
&lt;&lt;else&gt;&gt;
  Nero flattens his ears in embarrassment.
  Feigned, of course.
  In other circumstances, the wolf mage would certainly defend the
  brilliance of his art.
  But in &lt;em&gt;these&lt;/em&gt; circumstances, it seems best to relax
  Ivex&#39;s guard by accepting the label of buffoon.
&lt;&lt;/if&gt;&gt;

?P
Ivex stares at a spot on the ceiling. He reaches toward it,
closes his hand into a fist,
and then makes a gesture toward
&lt;&lt;= $n_cabinetsViewed ? &quot;the&quot; : &quot;a&quot;&gt;&gt;
stuffed penguin on a cabinet.
The penguin glistens for a
&lt;&lt;if $n_penguinCoinDropped&gt;&gt;
  moment.
&lt;&lt;else&gt;&gt;
  moment, and a small coin-like object drops from its mouth.
&lt;&lt;/if&gt;&gt;
?P
The panther laughs. &quot;There&#39;s no need for you to try such difficult magic
to wriggle free. I can &lt;em&gt;easily&lt;/em&gt; help you with that.&quot;

?P
He raises an arm and snaps his fingers...

?P
&lt;&lt;mta &quot;n1p Barbs Slow 1&quot;&gt;&gt;Continue&lt;&lt;/mta&gt;&gt;
&lt;&lt;/fade-in&gt;&gt;

&lt;&lt;run
  delete $n_dimCross;
  delete $n_dimDesk;
  delete $n_dimGrav;
  delete $n_dimKnife;
  $n_afterNaked = &quot;[[Continue|n1s Cast Younger 3]]&quot;;
  $n_castYounger = true;
  $n_magicPhase = MP_triedMagic;
  $n_magicPhaseReached = MP_triedMagic;
  $n_penguinCoinDropped = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="418" name="n1s Cast Younger 3" tags="mt-ready" position="2725,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;vi-always n_ivexNear true&gt;&gt;

&lt;&lt;barbs-announce maybe&gt;&gt;

The panther&#39;s light caress becomes his whole palm smoothing the fur
on the wolf&#39;s chest, a rhythmic brushing that rubs the panther&#39;s
pad against the wolf&#39;s right nipple,
making the nipple perk from the stimulation.
His left nipple perks as well.
Nero is not sure if it&#39;s anticipation or chill.

?P
&lt;&lt;if $n_candleLit&gt;&gt;
  Ivex purrs under his grinning mask.
&lt;&lt;else&gt;&gt;
  Ivex purrs.
&lt;&lt;/if&gt;&gt;
&quot;Your fur is so soft and smooth already.
Kelvin&#39;s Escape would make it unpleasantly greasy.
Did nobody teach you about how casting the wrong spells
can damage your complexion?&quot;

?P
Nero suppresses an urge to growl. He closes his eyes to keep
his breathing steady. He raises his ears straight, stiff and still,
and the hairs on the back of his neck rise up as well.

?P
Ivex leans close and presses his muzzle into the wolf&#39;s ear.
&quot;I can cast all the spells you will ever need here.
Don&#39;t worry your pretty little head about it.&quot;

?P
The panther&#39;s right paw is now fingering the fur of the wolf&#39;s naked sheath,
up and down its length in slow, gentle strokes.

?P
[[Continue|n1s Cast Younger 4]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="419" name="n1s Cast Younger 4" tags="mt-ready" position="2850,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleLit false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

Nero is disturbed by the failure of his spell.
&lt;&lt;mt-seen $kn_AntiMagic&gt;&gt;
  This &lt;&lt;tran-cut &quot;anti-magic field&quot; &quot;n1s Anti-magic 1&quot;&gt;&gt;
&lt;&lt;/mt-seen&gt;&gt;
is unlike any he&#39;s seen before.

?P
&lt;&lt;if $n_abused&gt;&gt;
  But he&#39;s more disturbed by Ivex&#39;s gentle caress,
  especially after the panther&#39;s earlier abusive behavior.

&lt;&lt;else&gt;&gt;
  But he&#39;s more disturbed by the panther&#39;s lewd behavior.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_apprentice&gt;&gt;
  Nero had hoped that appealing to the panther&#39;s ego would lead Ivex
  to pontificate on matters more intellectual than carnal,
  but it seems the panther&#39;s mind is always seeking things carnal.

&lt;&lt;else&gt;&gt;
  Nero is no longer simply a captive in an interrogation.
  He&#39;s the object of some perverted game in the panther&#39;s mind.
&lt;&lt;/if&gt;&gt;

?P
The wolf&#39;s own mind is a battle over whether to resist or submit.
But when his thoughts are interrupted by the panther&#39;s tongue
touching his ear, Nero realizes that &lt;em&gt;confusion&lt;/em&gt;
might be a good strategy.
By projecting a mix of signals like a shy virgin,
Nero can keep Ivex guessing and revising
whatever sordid scenario the panther is trying to create.
And the more that Ivex is distracted by complications to
his lewd script, the more likely he is to make a mistake.

?P
Nero flinches from the panther&#39;s tongue, but then turns his
head toward the panther and extends his own tongue to give a brief
lick of the panther&#39;s nose.

?P
The wolf immediately says,
&quot;I&#39;m sorry! I don&#39;t know why I did that.
&lt;&lt;if $n_abused&gt;&gt;
  Please don&#39;t hit me again!&quot;
&lt;&lt;else&gt;&gt;
  Please ignore my momentary lapse of judgment!&quot;
&lt;&lt;/if&gt;&gt;

?P
Ivex himself flinches from the wolf&#39;s tongue, taking several steps back.
His face is surprised. But it takes only a moment for him to collect himself
and resume an obnoxious smirk.

?P
&quot;You have no need to worry,&quot; says the panther. &quot;Simply answer my
questions truthfully, and I will release you from this bondage
unharmed.&quot;

?P
&quot;Of course!&quot; replies the wolf. &quot;My name is Nero, and while I was on
an errand on a ship traveling up the coast, I stumbled onto your
dossier,
&lt;span class=nobr&gt;which&amp;mdash;&quot;&lt;/span&gt;

?P
The panther interrupts, &quot;Stop! We have been through that already.&quot;

?P
Nero replies, &quot;I&#39;m so sorry. I don&#39;t know where my mind has been.
I don&#39;t remember what we were talking about.
What was it that you were asking me?&quot;

?P
$n_afterAction

&lt;&lt;run
  delete $n_ivexNear;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="420" name="n1s Endgame Info 1" tags="mt-ready" position="925,3000" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Nero&#39;s Endgame is an unusual spell construction.
The wolf realized he needed it during the Triestorm incident.

?P
It had begun with a simple request.
Lord Estrivar of the Triestorm City Council had asked him
to find Perosolamew, the Lord&#39;s missing parrot.
This was a trivial divination that Nero would normally decline
and post on a student jobs board,
but Estrivar was insistent and pleasant
and offered an extremely generous retainer.

?P
Five days later, Nero was naked and gagged,
with chains stretching his limbs between four anvils,
in the secret lair of the Triestorm blacksmiths guild,
who were preparing to sacrifice him to Perfect Steel Blank,
the (probably not real) demigod of Unsheathed Swords.

?P
Back then, Nero&#39;s entire magic repertoire required spoken words,
complex gestures, or specially prepared objects.
None of which were available to him at that moment.
Nobody even knew he was there. Escape was impossible.

?P
So when the Greater Hammerer finished sharpening his knife
and brought it toward the wolf&#39;s exposed crotch,
Nero made a solemn vow to never be this helpless again.
Provided of course he survived the situation...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1s Endgame Info 2]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="421" name="n1s Endgame Info 2" tags="mt-ready" position="1050,3000" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Two weeks later, Nero enlisted the aid of the fabulous
&lt;span class=nobr&gt;Ms. Tara&lt;/span&gt;
&lt;&lt;if $n_taraIntroduced&gt;&gt;
  (his favorite lupine professor at Windbone Magic Academy)
&lt;&lt;else&gt;&gt;
  (a brilliant wolf who teaches at Windbone Magic Academy)
&lt;&lt;/if&gt;&gt;
to shave his ass and then tattoo on his skin a compact glyph matrix he designed himself. It&#39;s a single-use spell, consuming itself when cast, and it requires another session of shaving and tattooing to prepare again. Which is not altogether unpleasant, but still quite time consuming. This is not a spell he can use often, but it&#39;s exceptionally useful when there are no better options.

?P
All he has to do is hold in his mind an image of the glyphs on his ass, exactly as he had seen in a mirror, and mentally &lt;em&gt;twist&lt;/em&gt; their alignment in a particular way. And then the magic energy in the matrix unlocks to release a one-two combo.

?P
First comes Raven&#39;s Diversion, which can absorb up to 68 joules of energy from both magical and physical sources of harm. 68 joules is not the upper limit of Raven&#39;s spell, but it&#39;s the best that Nero can do within the constraints imposed by the canvas of his ass.

?P
And then comes Mudge&#39;s Invisibility, which is not so much an invisibility spell as a &quot;shrink a person to the size of an acorn&quot; spell. Since the person&#39;s clothes and other accessories are not also shrunk, the spell is more a ribald parlor trick than a regular tool of working mages. But it has the virtue of being the shortest glyph-stream that&#39;s likely to free Nero from any type of physical restraint.

?P
The unusual ass-tattoo construction has another limitation:
neither spell will last very long. About 2 seconds from the energy
of the matrix.
Another 8 seconds if his internal reserve of arcane energy is
fully charged. And maybe another second if his bladder is full.

?P
&lt;&lt;if $n_subby&gt;&gt;
  Still, it&#39;s saved his life more than once.
  And it&#39;s a spell he knows that no other mage can cast as quickly
  and easily as he can.

&lt;&lt;else&gt;&gt;
  Still, it&#39;s enough to rescue Nero from immediate peril,
  and it lets him prepare more substantial spells,
  ones that do require gestures or words.

  ?P
  It&#39;s saved his life more than once.
&lt;&lt;/if&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_Endgame&gt;&gt;
  &lt;&lt;return-before &quot;n1s Endgame Info 1&quot;&gt;&gt;

  &lt;&lt;set $n_taraIntroduced = true&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="422" name="n1s Guess Password" tags="mt-ready" position="4275,800" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;

&lt;&lt;include [[n1s Guess Script]]&gt;&gt;

&lt;&lt;set _tried = JSON.parse($n_passTried || &quot;[]&quot;)&gt;&gt;
&lt;&lt;set _oneLeft = _tried.length === 2&gt;&gt;
&lt;&lt;set _zeroLeft = _tried.length === 3&gt;&gt;

&lt;&lt;if $n_candleHorny&gt;&gt;
  The flirtatious Sprite
  is waiting for Nero to unlock
  its promised delights with a password.
&lt;&lt;else&gt;&gt;
  The Sprite is asking for Ivex&#39;s password.
  One last step, and then Nero can use Nackle&#39;s Device.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if _tried.length &gt; 0&gt;&gt;
  ?P
  The wolf has already tried &lt;&lt;= _listFailed()&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_candleHorny&gt;&gt;
  He knows many fine passwords.
  He carefully considers each one,
  imagining the Sprite&#39;s delight or dismay in response.

  ?P
  One of these must surely be a suitable gift for affirming their love.
  But perhaps there are other, better passwords to be
  found somewhere in this room?

&lt;&lt;else&gt;&gt;

  &lt;&lt;switch _tried.length&gt;&gt;
  &lt;&lt;case 1&gt;&gt;
    The Sprite will allow two more guesses.
    Nero does not really know much about
    &lt;&lt;if $n_subby&gt;&gt;
      Ivex,
    &lt;&lt;else&gt;&gt;
      Ivex (and does not really want to know more),
    &lt;&lt;/if&gt;&gt;
    but the wolf has already learned a few things that suggest
    passwords that the panther might use.
    Nero is pretty sure that the password is one of these.
    ?P
    Well, if it isn&#39;t one of these,
    it&#39;s definitely
    &lt;&lt;mt-seen $n_dimStudy&gt;&gt;
      &lt;&lt;mta &quot;n1x Study&quot;&gt;&gt;
        something in this study
      &lt;&lt;/mta&gt;&gt;.
    &lt;&lt;/mt-seen&gt;&gt;
    Ivex is not a complicated panther.
    ?P
    Nero knows this judgment of Ivex is somewhat of a fiction.
    If Ivex &lt;em&gt;is&lt;/em&gt; a complicated panther,
    then guessing his password is hopeless,
    and Nero might as well not try.
    So the wolf might as well &lt;em&gt;assume&lt;/em&gt; that the panther is a simpleton,
    for the purpose of this password-guessing exercise.
    ?P
    And if it doesn&#39;t work? No great loss.
    There will be some other way to escape.

  &lt;&lt;case 2&gt;&gt;
    Unfortunately, Nero only has one guess left.
    He finds himself filled with doubt.
    This is not an &lt;em&gt;important&lt;/em&gt; decision.
    He&#39;s pretty sure he can escape without Nackle.
    But it feels like this is a challenge he &lt;em&gt;should&lt;/em&gt;
    be able to solve. Failing this will confirm his worst fears
    about whether his successes have been skill or merely luck.
    ?P
    He considers the passwords that were wrong, and the passwords
    he hasn&#39;t yet tried. Each one seems like it could be right,
    but also obviously &lt;em&gt;not.&lt;/em&gt;
    He wonders again if there&#39;s something in this
    &lt;&lt;mt-seen $n_dimStudy&gt;&gt;
      &lt;&lt;mta &quot;n1x Study&quot;&gt;&gt;room&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    that might reveal a choice that&#39;s definitely, obviously correct.
    ?P
    Well, he can&#39;t remain paralyzed by doubt forever.
    Not making a guess is also a choice. A bad choice.
    Maybe he should just make his best guess now.

  &lt;&lt;case 3&gt;&gt;
    Nero is relieved that the Sprite is allowing him to continue
    to guess, despite having
    &lt;em&gt;zero tries remaining.&lt;/em&gt;
    Hooray for the
    incompetence of villains.
    ?P
    The error in the Sprite&#39;s instructions will likely
    allow Nero to make unlimited guesses.
    &lt;&lt;if $n_ivexGone&gt;&gt;
      ?P
      Well, the flickering red candle imposes a deadline,
      but the Sprite itself does not.
    &lt;&lt;else&gt;&gt;
      So he can leisurely try each possibility, as long as
      he can slip them past Ivex&#39;s attention.
    &lt;&lt;/if&gt;&gt;

  &lt;&lt;default&gt;&gt;
    &lt;&lt;run throw new Error(`unexpected passTried ${$n_passTried}`)&gt;&gt;
  &lt;&lt;/switch&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;for _pw range _toTry&gt;&gt;
    &lt;&lt;capture _pw&gt;&gt;
      &lt;&lt;script&gt;&gt;
        const T = State.temporary;
        T.code = `$n_passToTry = &#39;${T.pw}&#39;`;
      &lt;&lt;/script&gt;&gt;
      &lt;&lt;mtl _sayPassword _code&gt;&gt;
        Try &lt;&lt;= _describe(_pw)&gt;&gt;.
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;/capture&gt;&gt;
  &lt;&lt;/for&gt;&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="423" name="n1s Guess Script" tags="mt-ready inclusion" position="4275,925" size="100,100">&lt;&lt;script&gt;&gt;
const V = State.variables;
const T = State.temporary;

T.sayPassword = &quot;[[n1s Say Password]]&quot;.slice(2, -2);

let onceSeen = {};
const once = (phrase1, phrase2) =&gt; {
  if (onceSeen[phrase1]) {
    return phrase2;
  } else {
    onceSeen[phrase1] = true;
    return phrase1;
  }
};
const another = phrase =&gt; {
  const m = /^(the|a|an) (.*)/.exec(phrase);
  if (m == null) {
    return phrase;
  } else {
    return once(phrase, `another ${m[2]}`);
  }
};

T.describe = pw =&gt; {
  if (/^Please-/i.test(pw)) {
    return `&quot;${pw}&quot; (${another(&quot;a mistake&quot;)})`;
  } else if (/^#/.test(pw)) {
    return `&quot;${pw.slice(1)}&quot; (${another(&quot;a mistake&quot;)})`;
  } else if (MT.basicPasswords[pw] != null) {
    return `&quot;${pw}&quot; (${another(MT.basicPasswords[pw])})`;
  } else if (MT.otherPasswords[pw] != null) {
    return `&quot;${pw}&quot; (${another(MT.otherPasswords[pw])})`;
  } else {
    return `&quot;${pw}&quot; (BUG: no source)`;
  }
};

T.listFailed = () =&gt; {
  // note, reverse order
  const tried = JSON.parse(V.n_passTried || &quot;[]&quot;);
  const desc = i =&gt; T.describe(tried[i]);
  if (tried.length === 1) {
    return `${desc(0)}.`;
  } else if (tried.length === 2) {
    return `${desc(1)} and ${desc(0)}.`;
  } else {
    let buf = &quot;&quot;;
    for (let i = tried.length - 1; i &gt; 0; i--) {
      buf += `${desc(i)}, `;
    }
    buf += `and ${desc(0)}.`;
    return buf;
  }
};

T.toTry = [];
T.hasBasics = false;
const tried = JSON.parse(V.n_passTried || &quot;[]&quot;);
for (const pw of Object.keys(MT.basicPasswords)) {
  if (!tried.includes(pw)) {
    T.toTry.push(pw);
    T.hasBasics = true;
  }
}
for (const pw of JSON.parse(V.n_passFound || &quot;[]&quot;)) {
  if (pw === PW_hunter &amp;&amp; tried.includes(PW_too)) continue;
  if (!tried.includes(pw)) {
    T.toTry.push(pw);
  }
}
if (T.toTry.length === 0) {
  throw new Error(`bug: ran out of passwords to try?`);
}
T.toTry.sort();
&lt;&lt;/script&gt;&gt;\</tw-passagedata><tw-passagedata pid="424" name="n1s Help Device" tags="mt-ready" position="3900,800" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;em-assert $n_ivexGone || $n_ivexNear || !$n_candleHorny&gt;&gt;

&lt;&lt;set _speaks =
  $n_candleHorny ? &quot;whines&quot; :
  $n_ivexGone ? &quot;says&quot; :
  &quot;whispers&quot;&gt;&gt;

/* This is also in Say Device, but should only be shown once. */
&lt;&lt;if $n_ivexGone || MP_wantName === $n_magicPhase&gt;&gt;
  /* nothing */
&lt;&lt;elseif $n_candleHorny&gt;&gt;
  Nero is too desperate to care about Ivex hearing him.
&lt;&lt;elseif $n_ivexNear&gt;&gt;
  Ivex is nearby. He will hear what Nero says to the Sprite.
  Well, the panther will probably think
  Nero is mumbling to himself.
  ?P
&lt;&lt;else&gt;&gt;
  Ivex is not nearby.
  He probably will not hear what Nero says to the Sprite.
  ?P
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_rememberPlease&gt;&gt;
  The wolf _speaks, &quot;Please, help!&quot;

&lt;&lt;elseif $n_candleHorny&gt;&gt;
  The wolf _speaks to the Sprite, his newest friend. &quot;Help me!&quot;
  ?P
  It does not respond. The wolf is disappointed.
  He tries again, &quot;Please! Help me!&quot;

&lt;&lt;else&gt;&gt;
  The wolf _speaks, &quot;Help me?&quot;
  ?P
  The Sprite does not respond. A moment later,
  Nero mentally kicks himself
  for forgetting the Sprite&#39;s word of command.
  It&#39;s a novice mistake.
  Well, he &lt;em&gt;is&lt;/em&gt; a little distracted by
  his current situation.
  Still, he&#39;s quite embarrassed, and he&#39;s thankful that the panther
  &lt;&lt;if $n_ivexGone&gt;&gt;
    is not here to witness it.
  &lt;&lt;elseif $n_ivexNear&gt;&gt;
    is unlikely to understand the mistake.
  &lt;&lt;else&gt;&gt;
    is not close enough to hear the mistake.
  &lt;&lt;/if&gt;&gt;
  ?P
  Nero tries again. &quot;Please, help me!&quot;
&lt;&lt;/if&gt;&gt;

&lt;&lt;switch $n_ivexContext&gt;&gt;
&lt;&lt;case `IC_gone`&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  /* nothing */
&lt;&lt;case `IC_distant`&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  /* nothing, already mentioned above */
&lt;&lt;case `IC_explainTheft`&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  ?P
  Ivex shakes his head. &quot;This is your story, not mine.
  Are you admitting a lie?&quot;
&lt;&lt;case `IC_lickPaw`&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  ?P
  Ivex snorts. &quot;I think you know what I want. Do I have to explain
  it in detail?&quot;
&lt;&lt;case `IC_begForMe`&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  ?P
  Ivex glares at the wolf. &quot;That is not what I asked.
  Are you an idiot?&quot;
&lt;&lt;case `IC_comfortable`&gt;&gt;
  &lt;&lt;vi-always n_candleLit true&gt;&gt;
  ?P
  Ivex laughs beneath his grinning mask.
  &quot;Of course I will help you... If you answer my questions.&quot;
&lt;&lt;case `IC_whoSentYou`&gt;&gt;
  &lt;&lt;vi-always n_candleLit true&gt;&gt;
  ?P
  Ivex laughs beneath his grinning mask.
  &quot;I am the only one who can help you now.&quot;
&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`unhandled ivexContext ${$n_ivexContext}`)&gt;&gt;
&lt;&lt;/switch&gt;&gt;

?P
The Sprite responds in Nero&#39;s ear,
&lt;span class=sprite-q&gt;&quot;The following devices can be contacted, ?master&quot;&lt;/span&gt;

?P
&lt;&lt;include [[n1s Sprite Dots]]&gt;&gt;

?P
&lt;span class=sprite-q&gt;&quot;There&#39;s a note here, ?master
Remind me that I should, I mean,
&lt;em&gt;you&lt;/em&gt; should add a list here sometime, ?master&quot;&lt;/span&gt;

?P
&lt;&lt;if $n_candleHorny&gt;&gt;
  Nero shakes his head. The Sprite is talking of things he
  does not care about. It does not understand his need.
  The wolf is feeling doubts about pursuing this relationship.
&lt;&lt;else&gt;&gt;
  Nero shakes his head. It would have been convenient if
  Ivex were &lt;em&gt;competent&lt;/em&gt; at instructing Sprites.
  Still, the wolf is sure he can find some way to use it.
  &lt;&lt;if $n_bottleNackleKnown&gt;&gt;
    The Sprite might be able to contact the Nackle&#39;s device
    he saw earlier.
  &lt;&lt;else&gt;&gt;
    The Sprite might be able to contact some magic device
    that&#39;s visible in this room.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;set $n_helpDeviceAsked = true&gt;&gt;
&lt;&lt;set $n_rememberPlease = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="425" name="n1s Help Touch" tags="mt-ready" position="4150,800" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_rememberPlease true&gt;&gt;
&lt;&lt;em-assert $n_ivexGone || $n_ivexNear || !$n_candleHorny&gt;&gt;

&lt;&lt;set _speaks =
  $n_candleHorny ? &quot;whines&quot; :
  $n_ivexGone ? &quot;speaks&quot; :
  &quot;whispers&quot;&gt;&gt;

&lt;&lt;if $n_helpDeviceAsked &amp;&amp; !$n_candleHorny&gt;&gt;
  The Sprite was not helpful earlier, but it&#39;s now asking for
  something different. Perhaps it has guidance for
  &lt;em&gt;this&lt;/em&gt; action.
  ?P
&lt;&lt;/if&gt;&gt;

Nero _speaks to the Sprite, &quot;Please, help!&quot;

&lt;&lt;switch $n_ivexContext&gt;&gt;
&lt;&lt;case `IC_gone`&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  /* nothing */
&lt;&lt;case `IC_distant`&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  ?P
  Ivex sees the wolf whispering. &quot;What are you mumbling about now?&quot;
&lt;&lt;case `IC_explainTheft`&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  ?P
  Ivex snorts. &quot;No, I will not help you with your story.&quot;
&lt;&lt;case `IC_lickPaw`&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  ?P
  Ivex brings his hand to his mouth to lick his own thumb,
  then touches the wet thumb to the wolf&#39;s nose.
&lt;&lt;case `IC_begForMe`&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  ?P
  Ivex says seriously, &quot;I will not make this choice for you.
  This is something you must do yourself.&quot;
&lt;&lt;case `IC_comfortable`&gt;&gt;
  &lt;&lt;vi-always n_candleLit true&gt;&gt;
  ?P
  Ivex snorts beneath his grinning mask.
  &quot;Just answer my question, and I will help you plenty.&quot;
&lt;&lt;case `IC_whoSentYou`&gt;&gt;
  &lt;&lt;vi-always n_candleLit true&gt;&gt;
  ?P
  Ivex squeezes the wolf&#39;s balls gently.
  &quot;The candle &lt;em&gt;is&lt;/em&gt; helping you. Can you feel it?&quot;
&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`unhandled ivexContext ${$n_ivexContext}`)&gt;&gt;
&lt;&lt;/switch&gt;&gt;

?P
The Sprite ?sprSpeaks in Nero&#39;s ear,
&lt;span class=sprite-q&gt;&quot;Please choose from one of the following
help topics, ?master&quot;&lt;/span&gt;

?P
&lt;&lt;include [[n1s Sprite Dots]]&gt;&gt;

?P
&lt;span class=sprite-q&gt;&quot;No topics found, ?master&quot;&lt;/span&gt;

?P
&lt;&lt;if $n_candleHorny&gt;&gt;
  Nero sighs with pleasure.
  He can hear the love in the Sprite&#39;s voice.
  And maybe perhaps it&#39;s even &lt;em&gt;in&lt;/em&gt; love.
  But no, that&#39;s too hasty. Simple admiration is plenty for now.
  Soon enough, they&#39;ll be able to run off together
  and explore each other&#39;s sexual desires, together.

&lt;&lt;elseif $n_ivexGone&gt;&gt;
  Nero sighs.
  Of course it isn&#39;t helpful.
  The wolf regrets the waste of time.
  ?P
  There might have been some chance of tricking Ivex into touching
  the hole, whatever it may be. But that opportunity is gone now,
  and the flickering red candle will not allow Nero to wait.
  ?P
  He should ignore the Sprite and find some other way to escape.
  
&lt;&lt;else&gt;&gt;
  Nero sighs.
  &lt;&lt;if $n_helpDeviceAsked&gt;&gt;
    Of course it isn&#39;t helpful.
    The wolf regrets the waste of time.
  &lt;&lt;else&gt;&gt;
    If only Ivex were &lt;em&gt;competent&lt;/em&gt; at instructing Sprites.
    ?P
    Then again, if he &lt;em&gt;were&lt;/em&gt; competent,
    Nero probably wouldn&#39;t be able to use the Sprite at all.
    So the wolf raises a silent toast to the incompetence of
    villains.
  &lt;&lt;/if&gt;&gt;
  ?P
  The hole that the Sprite wants him to touch is probably something that
  Ivex can touch easily.
  An extremely paranoid
  mage might have this security step require an arduous journey through
  trap-filled corridors to retrieve the signet that will
  prove their authority. But Ivex does not seem the type to tolerate
  any such inconvenience.
  ?P
  It&#39;s almost definitely something in this room.
  There are several visible objects with visible holes.
  How hard can it be to trick Ivex into touching them?
  ?P
  Hopefully the correct hole isn&#39;t locked away in a drawer somewhere.
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $n_helpTouchAsked = true&gt;&gt;

?P
$n_afterAction
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="426" name="n1s Impatient" tags="mt-ready" position="4400,925" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_magicPhase `MP_onHold`&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;em-assert !$n_candleHorny || $n_ivexNear || $n_ivexGone&gt;&gt;

&lt;&lt;set $n_holdPhase || ($n_holdPhase = 1)&gt;&gt;

&lt;&lt;switch $n_holdPhase&gt;&gt;
&lt;&lt;case 1&gt;&gt;
  &lt;&lt;if $n_candleHorny&gt;&gt;
    Nero whines, &quot;Please, be quiet!&quot;
  &lt;&lt;else&gt;&gt;
    Nero whispers, &quot;Please, be quiet!&quot;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;switch $n_ivexContext&gt;&gt;
  &lt;&lt;case `IC_gone`&gt;&gt;
    &lt;&lt;vi-ignore n_candleLit&gt;&gt;
    /* nothing */
  &lt;&lt;case `IC_distant`&gt;&gt;
    &lt;&lt;vi-ignore n_candleLit&gt;&gt;
    ?P
    Ivex notices. &quot;What did you say? You must speak louder!&quot;
  &lt;&lt;case `IC_explainTheft`&gt;&gt;
    &lt;&lt;vi-always n_candleLit false&gt;&gt;
    ?P
    Ivex snorts. &quot;Is my questioning affecting your ability to invent
    a plausible story?&quot;
  &lt;&lt;case `IC_lickPaw`&gt;&gt;
    &lt;&lt;vi-always n_candleLit false&gt;&gt;
    ?P
    Ivex frowns. &quot;This is not a difficult thing I ask.
    What traumas in your mind have I touched?&quot;
  &lt;&lt;case `IC_begForMe`&gt;&gt;
    &lt;&lt;vi-always n_candleLit false&gt;&gt;
    ?P
    Ivex says seriously, &quot;Thinking will not help you make this choice.
    Do you never listen to your instincts?&quot;
  &lt;&lt;case `IC_comfortable`&gt;&gt;
    &lt;&lt;vi-always n_candleLit true&gt;&gt;
    ?P
    Ivex shouts through his mask. &quot;Are! You! Comfortable!&quot;
  &lt;&lt;case `IC_whoSentYou`&gt;&gt;
    &lt;&lt;vi-always n_candleLit true&gt;&gt;
    ?P
    Ivex leans in close and speaks softly in Nero&#39;s ear.
    &quot;Who. Sent. You.&quot;
  &lt;&lt;default&gt;&gt;
    &lt;&lt;run throw new Error(`unhandled ivexContext ${$n_ivexContext}`)&gt;&gt;
  &lt;&lt;/switch&gt;&gt;

  &lt;&lt;set $n_spriteQuiet = true&gt;&gt;
  ?P
  The Sprite whispers in Nero&#39;s ear,
  &lt;span class=sprite-q&gt;&quot;Quiet mode activated, ?master&quot;&lt;/span&gt;

  ?P
  &lt;&lt;if $n_candleHorny&gt;&gt;
    Nero is glad that the Sprite is responsive to his suggestion,
    and he&#39;s intrigued that it is now emphasizing that he &lt;em&gt;is&lt;/em&gt;
    &lt;&lt;if $n_opportunist&gt;&gt;
      an opportunist, and perhaps offering itself as an opportunity.
    &lt;&lt;else&gt;&gt;
      a master, and perhaps inviting him to act on that title.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;else&gt;&gt;
    Nero winces. The Sprite spoke softly,
    except that it said
    &lt;em&gt;&lt;&lt;= $n_opportunist ? &quot;An Opportunist&quot; : &quot;Master&quot;&gt;&gt;&lt;/em&gt;
    louder than before.
    The panther has messed up the Sprite&#39;s instructions in
    strange ways.
  &lt;&lt;/if&gt;&gt;
  ?P
  A moment later, the Sprite ?sprSays,

&lt;&lt;case 2&gt;&gt;
  &lt;&lt;if $n_candleHorny&gt;&gt;
    Nero whines, &quot;Please, faster!&quot;
  &lt;&lt;else&gt;&gt;
    Nero whispers, &quot;Please, hurry up!&quot;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;switch $n_ivexContext&gt;&gt;
  &lt;&lt;case `IC_gone`&gt;&gt;
    &lt;&lt;vi-ignore n_candleLit&gt;&gt;
    /* nothing */
  &lt;&lt;case `IC_distant`&gt;&gt;
    &lt;&lt;vi-ignore n_candleLit&gt;&gt;
    ?P
    Ivex is adjusting his pants at the crotch
    and does not notice Nero&#39;s whisper.
  &lt;&lt;case `IC_explainTheft`&gt;&gt;
    &lt;&lt;vi-always n_candleLit false&gt;&gt;
    ?P
    Ivex laughs. &quot;Are you trying to cajole your own sluggish brain now?&quot;
  &lt;&lt;case `IC_lickPaw` `IC_begForMe`&gt;&gt;
    &lt;&lt;vi-always n_candleLit false&gt;&gt;
    ?P
    Ivex smirks. &quot;Are you so eager to be an apprentice?
    But I must know if you can follow my pace.
    Rushing can be dangerous.&quot;
  &lt;&lt;case `IC_comfortable`&gt;&gt;
    &lt;&lt;vi-always n_candleLit true&gt;&gt;
    ?P
    Ivex growls. &quot;Do not goad me.
    First things first. Are you comfortable?&quot;
  &lt;&lt;case `IC_whoSentYou`&gt;&gt;
    &lt;&lt;vi-always n_candleLit true&gt;&gt;
    ?P
    Ivex snorts through his mask. &quot;Do you even &lt;em&gt;remember&lt;/em&gt;
    now who sent you?&quot;
  &lt;&lt;default&gt;&gt;
    &lt;&lt;run throw new Error(`unhandled ivexContext ${$n_ivexContext}`)&gt;&gt;
  &lt;&lt;/switch&gt;&gt;

  ?P
  The Sprite whispers in Nero&#39;s ear,
  &lt;span class=sprite-q&gt;&quot;Changing music speed to four ex, ?master&quot;&lt;/span&gt;

  ?P
  &lt;&lt;if $n_candleHorny&gt;&gt;
    Nero is excited by this acceleration of their romance,
    and he&#39;s thrilled when the Sprite says,
  &lt;&lt;else&gt;&gt;
    Nero grimaces, but the Sprite does not resume its humming.
    Instead, it says,
  &lt;&lt;/if&gt;&gt;

&lt;&lt;case 3&gt;&gt;
  &lt;&lt;if $n_candleHorny&gt;&gt;
    Nero whines, &quot;Please, stop the music!&quot;
  &lt;&lt;else&gt;&gt;
    Nero whispers, &quot;Please, stop the music!&quot;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;switch $n_ivexContext&gt;&gt;
  &lt;&lt;case `IC_gone`&gt;&gt;
    &lt;&lt;vi-ignore n_candleLit&gt;&gt;
    /* nothing */
  &lt;&lt;case `IC_distant`&gt;&gt;
    &lt;&lt;vi-ignore n_candleLit&gt;&gt;
    ?P
    Ivex twitches an ear, but otherwise shows no sign of
    hearing what the wolf said.
  &lt;&lt;case `IC_explainTheft` `IC_lickPaw` `IC_begForMe`&gt;&gt;
    &lt;&lt;vi-always n_candleLit false&gt;&gt;
    ?P
    Ivex looks puzzled. &quot;I do not hear any music.
    Are you seeing strange colors as well?&quot;
  &lt;&lt;case `IC_comfortable` `IC_whoSentYou`&gt;&gt;
    &lt;&lt;vi-always n_candleLit true&gt;&gt;
    ?P
    Ivex chuckles through his mask.
    &quot;That&#39;s an interesting reaction to my candle.
    Are you seeing strange colors as well?&quot;
  &lt;&lt;default&gt;&gt;
    &lt;&lt;run throw new Error(`unhandled ivexContext ${$n_ivexContext}`)&gt;&gt;
  &lt;&lt;/switch&gt;&gt;

  ?P
  The Sprite whispers in Nero&#39;s ear,
  &lt;span class=sprite-q&gt;&quot;Ok, I will start singing the song
  &lt;em&gt;Stop the Music,&lt;/em&gt; ?master&quot;&lt;/span&gt;

  ?P
  &lt;&lt;if $n_candleHorny&gt;&gt;
    Nero is not familiar with that tune.
    He hopes it will be slower but more intense.
    ?P
    The Sprite does not start the song just yet.
    Instead, it whispers,
  &lt;&lt;else&gt;&gt;
    Nero sighs. He prepares to suffer some other
    silly tune, but the Sprite does not start singing yet.
    Instead, it whispers,
  &lt;&lt;/if&gt;&gt;

&lt;&lt;case 4&gt;&gt;
  &lt;&lt;if $n_candleHorny&gt;&gt;
    Nero whines, &quot;Please, ENOUGH!&quot;
  &lt;&lt;else&gt;&gt;
    Nero whispers, &quot;Please, ENOUGH!&quot;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;switch $n_ivexContext&gt;&gt;
  &lt;&lt;case `IC_gone`&gt;&gt;
    &lt;&lt;vi-ignore n_candleLit&gt;&gt;
    /* nothing */
  &lt;&lt;case `IC_distant`&gt;&gt;
    &lt;&lt;vi-ignore n_candleLit&gt;&gt;
    ?P
    Ivex notices the whispering, but does not respond.
  &lt;&lt;case `IC_explainTheft`&gt;&gt;
    &lt;&lt;vi-always n_candleLit false&gt;&gt;
    ?P
    Ivex says, &quot;I will not stop until you answer me.&quot;
  &lt;&lt;case `IC_lickPaw`&gt;&gt;
    &lt;&lt;vi-always n_candleLit false&gt;&gt;
    ?P
    Ivex says, &quot;Really, if this small thing makes you balk,
    then I do not think I can teach you at all.&quot;
  &lt;&lt;case `IC_begForMe`&gt;&gt;
    &lt;&lt;vi-always n_candleLit false&gt;&gt;
    ?P
    Ivex says, &quot;I will keep asking until you make a choice.&quot;
  &lt;&lt;case `IC_comfortable`&gt;&gt;
    &lt;&lt;vi-always n_candleLit true&gt;&gt;
    ?P
    Ivex growls in his mask. &quot;Are you comfortable ENOUGH?&quot;
  &lt;&lt;case `IC_whoSentYou`&gt;&gt;
    &lt;&lt;vi-always n_candleLit true&gt;&gt;
    ?P
    Ivex chuckles in his mask. &quot;This is just the start
    of the candle&#39;s effects. Soon you will be begging for more.&quot;&quot;
  &lt;&lt;default&gt;&gt;
    &lt;&lt;run throw new Error(`unhandled ivexContext ${$n_ivexContext}`)&gt;&gt;
  &lt;&lt;/switch&gt;&gt;

  ?P
  The Sprite goes silent.

  ?P
  Nero is relieved, but then the Sprite says,

&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`BUG: impatient holdPhase ${$n_holdPhase}`)&gt;&gt;
&lt;&lt;/switch&gt;&gt;

&lt;span class=sprite-q&gt;&quot;?sprBadPass remaining, ?master&quot;&lt;/span&gt;

&lt;&lt;switch JSON.parse($n_passTried || &quot;[]&quot;).length&gt;&gt;
&lt;&lt;case 1&gt;&gt;
  &lt;&lt;set $n_magicPhase = MP_wantPass&gt;&gt;

  ?P
  &lt;&lt;if $n_candleHorny&gt;&gt;
    This is worrying.
    Nero was not prepared for this courtship to have a limit.
    He was hoping to woo the Sprite with gentleness and persistence.
    ?P
    Well, at least he does have a chance. He&#39;s confident he can
    make the Sprite sing to &lt;em&gt;his&lt;/em&gt; tune.
  &lt;&lt;else&gt;&gt;
    This is a bit concerning. Nero was hoping
    that he&#39;d have more than two attempts at guessing the password.
    Well, two is still better than none,
    and &lt;em&gt;possible&lt;/em&gt; is infinitely more likely than
    &lt;em&gt;no chance at all&lt;/em&gt;.
  &lt;&lt;/if&gt;&gt;

  ?P
  $n_afterAction

&lt;&lt;case 2&gt;&gt;
  &lt;&lt;set $n_magicPhase = MP_wantPass&gt;&gt;

  ?P
  &lt;&lt;if $n_candleHorny&gt;&gt;
    Nero is distraught. Only one more chance?
    He retreats a bit to consider how to make that last chance
    a success.
  &lt;&lt;else&gt;&gt;
    Nero did not catch all the words that the Sprite said quickly,
    but the important part is that he has only one guess remaining.
    He had better make it a good one.
    The wolf thinks carefully about his remaining candidates for
    Ivex&#39;s password.
  &lt;&lt;/if&gt;&gt;

  ?P
  $n_afterAction

&lt;&lt;case 3&gt;&gt;
  &lt;&lt;set $n_magicPhase = MP_wantPass&gt;&gt;

  ?P
  &lt;&lt;if $n_candleHorny&gt;&gt;
    Nero flattens his ears.
    It had seemed like a promising relationship.
    But perhaps it&#39;s for the best.
    The Sprite had a few... quirks that the wolf found
    quite annoying, and it would have become difficult to
    continue ignoring them.
  &lt;&lt;else&gt;&gt;

    Disappointing, but not unexpected.
    Getting the right password in such few tries was a long shot.
    ?P
    Access to Nackle&#39;s Device would have been quite useful. But no matter.
    There are certainly other ways of escaping.
  &lt;&lt;/if&gt;&gt;

  ?P
  [[Continue|n1s Zero Bound]]

&lt;&lt;case 4&gt;&gt;
  &lt;&lt;set $n_magicPhase = MP_lockedOut&gt;&gt;

  ?P
  The wolf sighs.
  &lt;&lt;if $n_candleHorny&gt;&gt;
    He will always fondly remember this brief fling.
    He still wishes it could have been something more,
    but the small connection they had,
    the small moments of comfort that they gave each other
    in this dungeon of madness...
    It isn&#39;t nothing. It&#39;s more than enough.
  &lt;&lt;else&gt;&gt;
    Apparently he did &lt;em&gt;not&lt;/em&gt; have unlimited guesses.
    The Sprite&#39;s flaw is not the common &quot;Mistaken Condition&quot; error,
    but the almost as common &quot;Miscounting By One&quot; error. Ah well.
  &lt;&lt;/if&gt;&gt;

  ?P
  [[Continue|n1s Pass Failed]]

&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`unexpected passTried ${$n_passTried}`)&gt;&gt;
&lt;&lt;/switch&gt;&gt;

/* n_magicPhase is set above */
&lt;&lt;set $n_holdPhase++&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="427" name="n1s Itch 1" tags="mt-ready" position="2525,900" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-always n_ivexGone false&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Superb Itch is a popular prank spell that nobody uses any more, because it&#39;s trivially reversed onto the caster if the target has any type of spell ward, even something as weak as the &quot;Lucky Penny&quot; that&#39;s a common carnival prize.

?P
The spell and its related family of minor nerve agonists have never been a serious weapon in mage fights, but on one inebriated night with the fabulous
&lt;span class=nobr&gt;Ms. Tara&lt;/span&gt;
(a brilliant wolf who teaches at Windbone Magic Academy),
Nero discovered a curious property of Superb Itch.

?P
When it rebounds off a ward, it &lt;em&gt;increases&lt;/em&gt; in power. The increase is microscopic, which is perhaps why the behavior hasn&#39;t been noted in standard texts. But on that night,
&lt;span class=nobr&gt;Ms. Tara&lt;/span&gt; asked the critical question.
What if the spell rebounds &lt;em&gt;again?&lt;/em&gt;

?P
Amid numerous giggles, the two wolves took turns trying to make the counter-rebound happen. The task is not as simple as it may seem, because in order for a mage to cast Superb Itch in the first place, they must not have any ward on themselves that would deflect it, and the near-instant rebound makes it near-impossible to raise a ward quick enough to reflect the spell again.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1s Itch 2]]

  &lt;&lt;set $n_taraIntroduced = true&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="428" name="n1s Itch 2" tags="mt-ready" position="2650,900" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-always n_ivexGone false&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Nero stumbled onto the solution on his fourth attempt.
By then, the two wolves were quite drunk (and much less clothed).
Nero did not feel like removing his ward again, so rather than dropping the ward and attempting to rapidly reset it, he instead tried to calibrate a Superb Itch that would slip through his ward. This of course would ordinarily mean that the spell would slip through again when it rebounded.

?P
But Nero was sloppy in his incantation, and he produced a Superb Itch that &lt;em&gt;changed&lt;/em&gt; its harmonic frequencies as it traveled.

?P
The result was magically spectacular, in an invisible way.

?P
The visible effect was that &lt;span class=nobr&gt;Ms. Tara&lt;/span&gt; suddenly screamed.
For seven minutes.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1s Itch 3]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="429" name="n1s Itch 3" tags="mt-ready" position="2775,900" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-always n_ivexGone false&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Two weeks later, the reconciled wolves estimated that the Superb Itch
had rebounded between the two approximately
&lt;span class=nobr&gt;9 billion&lt;/span&gt; times,
increasing strength with each bounce, until it had gained enough
power to overcome &lt;span class=nobr&gt;Ms. Tara&#39;s&lt;/span&gt;
&lt;span class=nobr&gt;not-insubstantial&lt;/span&gt; ward.

?P
Two weeks after that, Nero perfected his variant of the spell, and allowed &lt;span class=nobr&gt;Ms. Tara&lt;/span&gt; to test it on him.

?P
The best thing about the spell is that it appears to other mages that Nero has himself poured an enormous amount of power into it. Nobody else has discovered the trick of it yet.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_Itch&gt;&gt;
  &lt;&lt;mta &quot;n1s Cast Itch 1&quot;&gt;&gt;Return&lt;&lt;/mta&gt;&gt;

  &lt;&lt;set $n_itchVisited = true&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="430" name="n1s Locked Out Script" tags="mt-ready inclusion" position="4575,925" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;set $n_spriteCountdown || ($n_spriteCountdown = 30)&gt;&gt;

&lt;style&gt;
  .pf-num-expand {
    width: calc(100% - 10ex);
  }

  .pf-outer {
    display: inline-flex;
    position: relative;
  }
  .pf-longest {
    visibility: hidden;
  }
  .pf-alt {
    position: absolute;
    left: 0;
    top: 0;
    transition: opacity 1s 0.5s ease-in;
  }
  .pf-hide {
    opacity: 0;
  }
&lt;/style&gt;

&lt;&lt;script&gt;&gt;
  const V = State.variables;
  const turn = State.turns;

  function isHidden() {
    const el = document.querySelector(&quot;.fade-in-hidden #lockout-time&quot;);
    return el != null;
  }

  function update() {
    if (turn !== State.turns) return;
    if (!isHidden()) V.n_spriteCountdown--;
    if (V.n_spriteCountdown &lt; 0) {
      V.n_spriteCountdown += 4294967296;
      $(&quot;.pf-num-expand&quot;).removeClass(&quot;pf-num-expand&quot;);
      $(&quot;#pf-before&quot;).addClass(&quot;pf-hide&quot;);
      setTimeout(() =&gt; $(&quot;#pf-after&quot;).removeClass(&quot;pf-hide&quot;), 500);
    }
    $(&quot;#lockout-time&quot;).text(V.n_spriteCountdown);
    setTimeout(update, 1000);
  }

  function start() {
    if (setup.tester) {
      $(&quot;#lockout-time&quot;).css({ cursor: &quot;pointer&quot; }).on(&quot;click&quot;, () =&gt; {
        V.n_spriteCountdown = 2;
        $(&quot;#pf-before&quot;).removeClass(&quot;pf-hide&quot;);
        $(&quot;#pf-after&quot;).addClass(&quot;pf-hide&quot;);
      });
    }
    update();
  }

  setTimeout(start, 1000);
&lt;&lt;/script&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="431" name="n1s Locked Out" tags="mt-ready inclusion" position="4525,800" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;include [[n1s Locked Out Script]]&gt;&gt;

&lt;span class=sprite-q&gt;&quot;Please wait
  &lt;span class=imp-info&gt;
    &lt;span id=&quot;lockout-time&quot;&gt;$n_spriteCountdown&lt;/span&gt;
    seconds
  &lt;/span&gt;
  before trying again, ?master&quot;
&lt;/span&gt;

?P
&lt;&lt;if $n_candleHorny&gt;&gt;
  The wolf is exasperated by the Sprite&#39;s passive-aggressive counting,
  but he&#39;s willing to wait a little while longer.
&lt;&lt;elseif $n_spriteCountdown &gt; 30&gt;&gt;
  The wolf is exasperated by the Sprite&#39;s uselessness.
  Perhaps it won&#39;t count &lt;em&gt;all&lt;/em&gt; the way to zero again?
&lt;&lt;else&gt;&gt;
  &lt;span class=pf-outer&gt;
    &lt;span class=pf-longest&gt;
      The wolf is exasperated by the Sprite&#39;s uselessness.
      Perhaps it won&#39;t count &lt;em&gt;all&lt;/em&gt; the way to zero again?
    &lt;/span&gt;
    &lt;span class=&quot;pf-alt&quot; id=&quot;pf-before&quot;&gt;
      The wolf only has a little longer to wait before he can make
      another guess at Ivex&#39;s password.
    &lt;/span&gt;
    &lt;span class=&quot;pf-alt pf-hide&quot; id=&quot;pf-after&quot;&gt;
      The wolf is exasperated by the Sprite&#39;s uselessness.
      Perhaps it won&#39;t count &lt;em&gt;all&lt;/em&gt; the way to zero again?
    &lt;/span&gt;
  &lt;/span&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="432" name="n1s Magic" tags="mt-ready inclusion" position="2600,500" size="200,100">&lt;&lt;nobr&gt;&gt;
&lt;!--
  - in: n_afterAction - continue link when action is done
  - out: n_magicAction - provides link for an available magic action
--&gt;
&lt;&lt;set $n_magicAction = &quot;&quot;&gt;&gt;

&lt;&lt;switch $n_magicPhase&gt;&gt;
&lt;&lt;case `MP_beforeCast`&gt;&gt;
  &lt;&lt;include [[n1s Before Cast]]&gt;&gt;
  ?P
&lt;&lt;case `MP_triedMagic`&gt;&gt;
  &lt;&lt;if $n_mageSight&gt;&gt;
    &lt;&lt;include [[n1s Use Sight]]&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;include [[n1s Need Sight]]&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  ?P
&lt;&lt;case `MP_tapLost` `MP_drained`&gt;&gt;
  &lt;!-- nothing --&gt;
&lt;&lt;default&gt;&gt;
  &lt;&lt;include [[n1s Sprite]]&gt;&gt;
  ?P
&lt;&lt;/switch&gt;&gt;
&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="433" name="n1s Need Sight" tags="mt-ready inclusion" position="3175,850" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $n_candleHorny&gt;&gt;
  The anti-magic field is as frustrating as the restraints on Nero&#39;s limbs.
  There must be &lt;em&gt;some&lt;/em&gt; magic he can cast that will
  let him stroke his cock.
  But the wolf&#39;s power is still drained by the failure of ?spell.
  He tries to think of a way to replenish it.
  &lt;&lt;set $n_magicAction =
    `&lt;&lt;mtl [[n1s Cast Sight Horny]]&gt;&gt;`
    + `Search for more magic energy.`
    + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;
&lt;&lt;else&gt;&gt;
  The wolf&#39;s power is temporarily depleted by the failure of ?spell.
  But he does have enough power left to cast mage-sight,
  which will help
  &lt;&lt;= $n_subby ? &quot;understand&quot; : &quot;find a flaw in&quot;&gt;&gt;
  the anti-magic field.
  &lt;&lt;if !$n_ivexGone&gt;&gt;
    &lt;&lt;if $n_subby || $n_ivexWasReceptive&gt;&gt;
      Mage-sight is a conventional move in tactical magic,
      and it might show that the wolf mage is not &lt;em&gt;completely&lt;/em&gt;
      incompetent.
    &lt;&lt;else&gt;&gt;
      Ivex is watching, but it&#39;ll be too quick for him to stop,
      and Nero needs every advantage he can get.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;set $n_magicAction =
    `&lt;&lt;mtl [[n1s Cast Sight 1]]&gt;&gt;`
    + `Cast mage-sight.`
    + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="434" name="n1s Oil Info" tags="mt-ready" position="2525,1600" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Oil of Dragons is an important spell in the history of rabbit magic.
It&#39;s simple to cast, and every student in the herbivore magic tradition
will learn it early in their education.
?P
Casting it on a person (or on oneself) makes the subject&#39;s skin and fur
(or scales) nearly frictionless,
making the subject difficult to hold with snares or ropes,
or anything else that uses constriction
to restrain a body part in some way.
It&#39;s one of the best spells for escape, for those that need spells of escape,
despite the mild inconvenience of it.
?P
The inconvenience, of course, is that the slipperiness also makes
it difficult for the subject to hold or use any object,
or even keep their clothing from falling off.
This is seen as a reasonable trade-off in situations where
the spell might save the subject&#39;s life.
?P
Mages in the carnivore tradition are not so often caught in situations that
require frictionless escape, and they consider the spell&#39;s inconveniences
more than just a minor flaw.
But the spell still has its uses in carnivorous society from time to time.
So most carnivore mages will also learn the spell
when they take a class that surveys alternative systems of magic.
?P
The legend of the spell, as told by rabbits,
is that their first and most famous mage, Rowsmutter,
stole the base axiom of the spell from the gray dragon Dedekind
in a perilous and exciting adventure. It&#39;s a favorite story of young kits,
full of clever hiding, quick retreats, and watchful suspense.
?P
The legend, as told by carnivores, is that the gray dragon Dedekind
gifted the base axiom to Rowsmutter after the rabbit proved to be a good lay.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_Oil&gt;&gt;
  &lt;&lt;return-before &quot;n1s Oil Info&quot;&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="435" name="n1s On Hold" tags="mt-ready inclusion" position="4400,800" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;set _annoyance = () =&gt; {
  $n_spriteHold || ($n_spriteHold = 0);
  switch ($n_spriteHold++) {
    case 0: 
      return &quot;The song is pleasant enough, if somewhat distracting.&quot;;
    case 1:
      return &quot;The song is simple and somewhat repetitive.&quot;;
    case 2:
      return &quot;The repetition has become annoying.&quot;;
    default:
      return &quot;The repetition is quite annoying.&quot;;
  }
};
&gt;&gt;
&lt;&lt;set $n_holdPhase || ($n_holdPhase = 1)&gt;&gt;

&lt;span class=sprite-q&gt;&quot;Please continue to hold
while I check your password, ?master&quot;&lt;/span&gt;

&lt;&lt;switch $n_holdPhase&gt;&gt;
&lt;&lt;case 1&gt;&gt;
  &lt;&lt;if $n_candleHorny&gt;&gt;
    It resumes its soft humming of a throbbing, sensual tune
    that makes Nero&#39;s cock twitch.
    &lt;&lt;if _patience &gt; 0&gt;&gt;
      ?P
      Does he know the right password already?
      Or has the Sprite hidden it somewhere in the room for him to find?
      The humming is making it hard to concentrate.
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;set _action = &quot;be quiet!&quot;&gt;&gt;
  &lt;&lt;else&gt;&gt;
    It resumes its soft humming of a cheerful children&#39;s song.
    &lt;&lt;if _patience &gt; 0&gt;&gt;
      ?P
      &lt;&lt;= _annoyance()&gt;&gt;
      Nero wonders what the Sprite is doing. In the meantime,
      he can look for more clues to Ivex&#39;s password.
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;set _action = &quot;be quiet.&quot;&gt;&gt;
  &lt;&lt;/if&gt;&gt;

&lt;&lt;case 2&gt;&gt;
  &lt;&lt;if $n_candleHorny&gt;&gt;
    It resumes its loud humming of a throbbing, sensual tune.
    Nero&#39;s cock throbs to the beat.
    &lt;&lt;set _action = &quot;faster!&quot;&gt;&gt;
  &lt;&lt;else&gt;&gt;
    It resumes its &lt;em&gt;loud&lt;/em&gt; humming of a childish melody.
    &lt;&lt;= _annoyance()&gt;&gt;
    &lt;&lt;set _action = &quot;hurry up!&quot;&gt;&gt;
  &lt;&lt;/if&gt;&gt;

&lt;&lt;case 3&gt;&gt;
  &lt;&lt;if $n_candleHorny&gt;&gt;
    It resumes its rapid humming of a throbbing, sensual tune.
    It&#39;s too fast. Nero&#39;s cock cannot keep pace with the beat.
  &lt;&lt;else&gt;&gt;
    It resumes its &lt;em&gt;loud&lt;/em&gt; and &lt;em&gt;rapid&lt;/em&gt; humming
    of that annoyingly childish tune.
    Nero finds it extremely distracting.
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;set _action = &quot;stop the music!&quot;&gt;&gt;

&lt;&lt;case 4&gt;&gt;
  &lt;&lt;if $n_candleHorny&gt;&gt;
    It then continues &lt;em&gt;screaming&lt;/em&gt; in ecstasy,
    which it has been doing for quite some time now.
    Nero is starting to feel a bit... ignored.
  &lt;&lt;else&gt;&gt;
    It then continues its &lt;em&gt;annoying &lt;em&gt;screeching&lt;/em&gt;&lt;/em&gt; that&#39;s
    apparently supposed to be music.
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;set _action = &quot;ENOUGH!&quot;&gt;&gt;

&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`BUG: on hold ${$n_holdPhase}`);&gt;&gt;
&lt;&lt;/switch&gt;&gt;

&lt;&lt;if _patience &gt; 0&gt;&gt;
  &lt;&lt;set _tried = JSON.parse($n_passTried || &quot;[]&quot;)&gt;&gt;
  &lt;&lt;switch _tried.length&gt;&gt;
  &lt;&lt;case 1&gt;&gt;
    /* nothing */
  &lt;&lt;case 2&gt;&gt;
    ?P
    &lt;&lt;if _tried[0][0] === &quot;#&quot;&gt;&gt;
      Nero is a little upset that the Sprite again misinterpreted
      conversation as a password. The wolf now has only one more
      attempt at guessing the password. He&#39;d better make it a good one.
    &lt;&lt;else&gt;&gt;
      If Nero&#39;s guess is wrong, he will only have one more attempt.
      He&#39;d better make it a good one.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;case 3&gt;&gt;
    ?P
    That was Nero&#39;s last guess.
    &lt;&lt;if _tried[0][0] === &quot;#&quot;&gt;&gt;
      Unfortunately it was a terrible one.
      Well, there will be some other way to escape.
    &lt;&lt;else&gt;&gt;
      He hopes that it&#39;s correct.
      But if it isn&#39;t, there will be some other way to escape.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;default&gt;&gt;
    &lt;&lt;run throw new Error(`BUG passTried ${$n_passTried}`)&gt;&gt;
  &lt;&lt;/switch&gt;&gt;

  &lt;&lt;set $n_magicAction =
    `&lt;&lt;mtl [[n1s Impatient]]&gt;&gt;`
    + `Tell the Sprite, &quot;Please, ${_action}&quot;`
    + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="436" name="n1s Pass Failed" tags="mt-ready" position="4525,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_magicPhase `MP_lockedOut`&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;em-assert !$n_candleHorny || $n_ivexNear || $n_ivexGone&gt;&gt;

&lt;&lt;include [[n1s Locked Out Script]]&gt;&gt;

&lt;div class=pf-num-expand&gt;
  The Sprite speaks again.
  &lt;span class=sprite-q&gt;&quot;Please wait
    &lt;span class=imp-info&gt;
      &lt;span id=&quot;lockout-time&quot;&gt;$n_spriteCountdown&lt;/span&gt;
      seconds
    &lt;/span&gt;
    before trying again, ?master&quot;
  &lt;/span&gt;
&lt;/div&gt;

&lt;br&gt;
&lt;&lt;if $n_candleHorny&gt;&gt;
  Nero sighs at the Sprite&#39;s insistence on a cooling-off period.
  Still, the whispery voice is a continual sensual tease.
  The wolf is glad that there &lt;em&gt;will&lt;/em&gt; be another chance.
  He patiently awaits the end of the count.
&lt;&lt;else&gt;&gt;
  &lt;span class=pf-outer&gt;
    &lt;span class=pf-longest&gt;
      Well, this is helpful.
      Nero is not permanently barred from the Sprite.
      He just needs to wait a bit before trying again.
    &lt;/span&gt;
    &lt;span class=pf-alt id=&quot;pf-before&quot;&gt;
      Well, this is helpful.
      Nero is not permanently barred from the Sprite.
      He just needs to wait a bit before trying again.
    &lt;/span&gt;
    &lt;span class=&quot;pf-alt pf-hide&quot; id=&quot;pf-after&quot;&gt;
      Nero suppresses a sigh.
      It was too much to hope that Ivex&#39;s incompetence would
      &lt;em&gt;always&lt;/em&gt; be helpful.
    &lt;/span&gt;
  &lt;/span&gt;
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="437" name="n1s Password Intro" tags="mt-ready" position="6475,725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;

The Sprite speaks again.
&lt;span class=sprite-q&gt;&quot;That password doesn&#39;t sound right, ?master
Please hold while I double-check it, ?master&quot;&lt;/span&gt;
It starts humming a cheerful children&#39;s song.

?P
Nero suppresses another sigh. Apparently the Sprite interpreted
something he said as the password, &lt;em&gt;without&lt;/em&gt; him
saying &quot;Please&quot; first. The wolf will have to be careful
for the next attempt.

?P
What could the panther&#39;s password be?
If Nero&#39;s lucky, the password will be something like
&quot;Password&quot; or &quot;Ivex the Magnificent&quot;. Or perhaps it&#39;s the school
he attended, &quot;Ransamaran Ivory&quot;.

?P
Those are all a bit obvious, and surely Ivex is a little more clever
than that? Well, hopefully not too clever, or else Nero will never
be able to guess the password.

?P
Most people have difficulty remembering random passwords, so they
will choose something familiar or near at hand that seems obscure
enough in their own mind. They&#39;re usually wrong.
A clever investigator can often deduce such passwords with a
little research into the person.

?P
And Nero is in Ivex&#39;s private study!
There are &lt;em&gt;many&lt;/em&gt; things here that Ivex might consider private.
The wolf already knows a few.

?P
There&#39;s the name of his penguin, &quot;Hunter Too&quot;.
&lt;&lt;if $n_wandViewed&gt;&gt;
  Some mages also give names to their magic wands.
&lt;&lt;/if&gt;&gt;
And unfortunately, the horse cock,
&quot;Lance Rockhard&quot;, is also a plausible choice.

&lt;&lt;set _list = () =&gt; {
  const V = State.variables;
  const a = [];

  if (V.n_paintingKnown) {
    a.push(`The pantheress in that painting, his mother, is named &quot;Ivy&quot;.`);
  } else if (V.n_paintingViewed) {
    a.push(`The name of the pantheress in that painting might be`
      + ` meaningful to the panther.`);
  }

  if (V.n_booksViewed) {
    a.push(`The &quot;Class of 621&quot; book might be an earlier school he attended.`);
  }

  if (V.n_globeViewed) {
    a.push(`That snow globe labeled &quot;Caverns of`
      + ` &lt;span class=nobr&gt;L&amp;mdash;&quot;&lt;/span&gt;`
      + &quot; might be from the panther&#39;s favorite vacation spot.&quot;);
  }

  if (V.n_mapViewed) {
    a.push(`The map on the wall has &quot;Uramos&quot; and another village marked,`
      + ` which is probably important in some way.`);
  }

  let mkp = &quot;?P &quot;;
  mkp += a.join(&quot; &quot;);

  switch (a.length) {
    case 0:
      mkp += &quot; The room also has plenty of other things&quot;;
      mkp += &quot; that might have clues to Ivex&#39;s password.&quot;;
      break;
    case 1:
      mkp += &quot; And the room has plenty of other things&quot;;
      mkp += &quot; that might have clues to Ivex&#39;s password.&quot;;
      break;
    case 2: case 3:
      mkp += &quot; ?P The room also has some other things&quot;;
      mkp += &quot; that might have clues to Ivex&#39;s password.&quot;;
      break;
    case 4:
      mkp += &quot; ?P The room might have other clues to Ivex&#39;s password,&quot;;
      mkp += &quot; but Nero already knows plenty of possibilities to try.&quot;;
      break;
    default:
      throw new Error(`unexpected length ${a.length}`);
  }

  return mkp;
}
&gt;&gt;

&lt;&lt;= _list()&gt;&gt;

?P
$n_afterAction

&lt;&lt;run
  delete $n_dimBooks;
  delete $n_dimMap;
  delete $n_dimPainting;
  delete $n_dimPenguin;
  delete $n_dimWand;
  delete $n_ivexNear;
  delete $n_penguinCoinDropped;
  $n_magicPhase = MP_onHold;
  $n_magicPhaseReached = MP_wantPass;
  $n_passTried = &#39;[&quot;#I Dearly Loved My First Familiar As Well&quot;]&#39;;
  $n_penguinTouched = true;
&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="438" name="n1s Pyron Node" tags="mt-ready" position="7650,575" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  &lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;
  &lt;&lt;em-assert !$n_candleHorny&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Pyron nodes are flat, square-ish crystals that have become
a common substrate for the preparation and storage
of spells and other magic constructs.
They&#39;re one of the most exciting innovations of modern magic.
Each pyron node is no bigger than a playing card, but a mage needs
only one of them to hold as much magic as an
entire cabinet of spellbooks and scrolls.

?P
Some mages are able to directly manipulate the magic axioms
that create the pyron node itself,
but the practice is a bit esoteric.
Most mages will use the pyron node within a magical device
without bothering to understand in
detail its construction.

?P
The most flexible such device is the modern reinvention of the
magic mirror.

?P
Traditional magic mirrors are arduous creations,
requiring many weeks of patience to align the raw materials
of sand and ore to a carefully designed spectral labyrinth.
And then comes a few months of gentle forging to turn the raw materials
into a mirror, without disturbing the spectral connections in them.
Once that&#39;s done,
the craftsmage must wait an unknowable length of time
for a wandering proto-god to notice the empty mirror
and find the labyrinth pleasant enough
to take up residence within it.

?P
Sometimes the proto-god is friendly and benevolent.
Oftentimes it is not.

?P
Traditional magic mirrors are delicate and fickle,
more an artifact of prestige and legends than a practical
instrument of magic.

?P
The modern magic mirror is different.
It&#39;s made of ordinary glass in a suitably stylish frame,
glued to a pyron node
that holds the glyph matrixes that are the magic of the mirror.
The matrixes can be quite complex, but even the most complex of them
will be easy to duplicate to another pyron node,
making it simple to have many such mirrors with identical magic.

?P
Windbone Magic Academy has a one-semester class that&#39;s devoted
to the basics of preparing and casting spells with the
pyron node in a standard magic mirror.
Another six semesters are available for learning increasingly
elaborate constructions that pyron nodes make possible,
culminating in a course that discusses the possibilities
when &lt;em&gt;two&lt;/em&gt; pyron nodes are used together.

?P
But the most popular thing that pyron nodes can do,
the reason every student
is excited when they earn a magic mirror of their own,
is that the node can store tens of life-like images that can be
displayed in the mirror whenever the mage requests it.

?P
Usually the images chosen are pornographic.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_Pyron&gt;&gt;
  [[Return|n1s Tap 1]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="439" name="n1s Say Device" tags="mt-ready" position="6850,1625" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;em-assert $n_ivexGone || $n_ivexNear || !$n_candleHorny&gt;&gt;

&lt;&lt;set _speaks =
  $n_candleHorny ? &quot;whines&quot; :
  $n_ivexGone ? &quot;says&quot; :
  &quot;whispers&quot;&gt;&gt;

/* This is also in Help Device, but should only be shown once. */
&lt;&lt;if $n_ivexGone || $n_helpDeviceAsked&gt;&gt;
  /* nothing */
&lt;&lt;elseif $n_candleHorny&gt;&gt;
  Nero is too desperate to care about Ivex hearing him.
&lt;&lt;elseif $n_ivexNear&gt;&gt;
  Ivex is nearby. He will hear what Nero says to the Sprite.
  Well, the panther will probably think
  Nero is mumbling to himself.
  ?P
&lt;&lt;else&gt;&gt;
  Ivex is not nearby.
  He probably will not hear what Nero says to the Sprite.
  ?P
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_rememberPlease&gt;&gt;
  The wolf _speaks, &quot;Please, Nackle&#39;s Poltergeist Device.&quot;
  &lt;&lt;if $n_candleHorny&gt;&gt;
    He is not sure the Sprite is ready for such an adventurous
    dildo, but nothing else in the room seems adequate for
    their shared desire.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $n_candleHorny&gt;&gt;
  The wolf _speaks to the Sprite, his newest friend.
  &quot;Nackle&#39;s Poltergeist Device!&quot;
  ?P
  It does not respond. The wolf is disappointed.
  He tries again, &quot;Please! Nackle&#39;s Poltergeist Device!&quot;

&lt;&lt;else&gt;&gt;
  The wolf _speaks, &quot;Nackle&#39;s Poltergeist Device.&quot;
  ?P
  The Sprite does not respond. A moment later,
  Nero mentally kicks himself
  for forgetting the Sprite&#39;s word of command.
  It&#39;s a novice mistake.
  It&#39;s an understandable mistake,
  since he &lt;em&gt;is&lt;/em&gt; a little distracted by
  his current situation.
  Still, he&#39;s quite embarrassed, and he&#39;s thankful that the panther
  &lt;&lt;if $n_ivexGone&gt;&gt;
    is not here to witness it.
  &lt;&lt;elseif $n_ivexNear&gt;&gt;
    is unlikely to realize he&#39;s talking to the Sprite.
  &lt;&lt;else&gt;&gt;
    is not close enough to hear the mistake.
  &lt;&lt;/if&gt;&gt;
  ?P
  Nero tries again. &quot;Please, Nackle&#39;s Poltergeist Device.&quot;
&lt;&lt;/if&gt;&gt;

&lt;&lt;switch $n_ivexContext&gt;&gt;
&lt;&lt;case `IC_gone`&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  /* nothing */
&lt;&lt;case `IC_distant`&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  ?P
  Ivex notices the whispering. &quot;What was that you said?&quot;
&lt;&lt;case `IC_explainTheft` `IC_lickPaw` `IC_begForMe`&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  ?P
  Ivex laughs. &quot;Are you so eager to feel its power?&quot;
&lt;&lt;case `IC_comfortable` `IC_whoSentYou`&gt;&gt;
  &lt;&lt;vi-always n_candleLit true&gt;&gt;
  ?P
  Ivex laughs beneath his grinning mask.
  &quot;Already so eager to feel its power?&quot;
&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`unhandled ivexContext ${$n_ivexContext}`)&gt;&gt;
&lt;&lt;/switch&gt;&gt;

?P
The Sprite responds in Nero&#39;s ear,
&lt;span class=sprite-q&gt;&quot;There are several in this room,
so you&#39;ll have to be more specific, ?master
Tell me the name of the one you want to contact, ?master&quot;&lt;/span&gt;

?P
Nero shakes his head.
&lt;&lt;if $n_candleHorny&gt;&gt;
  The Sprite is not being helpful.
  Its response was noticeably passive-aggressive.
  The wolf is feeling doubts about continuing this relationship.
&lt;&lt;else&gt;&gt;
  It&#39;s not so odd to have several
  Nackle devices on different hidden surfaces in a room,
  so that a magician can use whichever one is convenient as
  they move about.
  ?P
  But the response from the Sprite suggests that the wolf will be
  able to use Nackle&#39;s device &lt;em&gt;without&lt;/em&gt; touching it.
  And if that&#39;s the case, why would Ivex have more than one
  in this room? Are the other ones &lt;em&gt;also&lt;/em&gt; inscribed on
  enormous horse dildos, stored away in a cabinet somewhere?
  ?P
  What a strange person this panther is.
  ?P
  &lt;&lt;if $n_bottleNameKnown&gt;&gt;
    Well, Nero &lt;em&gt;does&lt;/em&gt; know the name of that Nackle&#39;s device.
    Unfortunately.
  &lt;&lt;else&gt;&gt;
    Nero will have to trick him somehow into revealing the name
    of that Nackle&#39;s device.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;set $n_magicPhase = MP_wantName&gt;&gt;
&lt;&lt;set $n_magicPhaseReached = MP_wantName&gt;&gt;
&lt;&lt;set $n_rememberPlease = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="440" name="n1s Say Lance" tags="mt-ready" position="4025,800" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;em-assert $n_ivexGone || $n_ivexNear || !$n_candleHorny&gt;&gt;

&lt;&lt;cv-ignore n_spriteQuiet&gt;&gt; /* trivial variation */
&lt;&lt;cv-ignore n_opportunist&gt;&gt; /* trivial variation */

&lt;&lt;set _speaks =
  $n_candleHorny ? &quot;whines&quot; :
  $n_ivexGone ? &quot;says&quot; :
  &quot;whispers&quot;&gt;&gt;

&lt;&lt;if $n_candleHorny&gt;&gt;
  Nero _speaks shyly to the Sprite, &quot;Please, Lance Rockhard.&quot;
  He knows that he will never be as potent as that god among horses,
  but perhaps a respectful communion with Lance will inspire
  the wolf to perform feats he was not capable of before.
&lt;&lt;else&gt;&gt;
  Nero does not want to utter that name, but there&#39;s no other choice.
  He _speaks to the Sprite, &quot;Please, Lance Rockhard.&quot;
&lt;&lt;/if&gt;&gt;

&lt;&lt;switch $n_ivexContext&gt;&gt;
&lt;&lt;case `IC_gone`&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  /* nothing */
&lt;&lt;case `IC_distant`&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  ?P
  Ivex does not seem to notice.
&lt;&lt;case `IC_explainTheft` `IC_lickPaw`&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  ?P
  Ivex laughs. &quot;You seem obsessed with that horse cock.
  Do you want a closer look?&quot;
&lt;&lt;case `IC_begForMe`&gt;&gt;
  ?P
  Ivex laughs. &quot;Is that really a &lt;em&gt;punishment&lt;/em&gt; for you?
  Do you want a closer look?&quot;
&lt;&lt;case `IC_comfortable` `IC_whoSentYou`&gt;&gt;
  &lt;&lt;vi-always n_candleLit true&gt;&gt;
  ?P
  Ivex laughs beneath his grinning mask.
  &quot;You seem obsessed with that horse cock.
  Do you want a closer look?&quot;
&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`unhandled ivexContext ${$n_ivexContext}`)&gt;&gt;
&lt;&lt;/switch&gt;&gt;

?P
The Sprite responds.
&lt;span class=sprite-q&gt;&quot;Got it, ?master You&#39;re awesome! ?masterX
Hang on a second, ?master&quot;&lt;/span&gt;

?P
&lt;&lt;if $n_candleHorny&gt;&gt;
  Nero is thrilled that the Sprite agrees with his choice!
&lt;&lt;else&gt;&gt;
  Nero is thrilled that he&#39;s found a magic device that he will
  soon be able to use!
&lt;&lt;/if&gt;&gt;

?P
&lt;span class=sprite-q&gt;&quot;Ok, I&#39;m supposed to...
Warning: Biomorphic something or other has deviated more than 6%, ?master
For your protection, please verify your identity by touching my hole,
?master&quot;&lt;/span&gt;

?P
The wolf grimaces.
&lt;&lt;if $n_candleHorny&gt;&gt;
  He &lt;em&gt;would&lt;/em&gt; touch the Sprite&#39;s hole, if he were &lt;em&gt;able&lt;/em&gt; to.
  Getting the freedom to &lt;em&gt;do&lt;/em&gt; that is why he&#39;s seducing the
  Sprite in the first place!
  ?P
  This relationship is a disappointment. He will have to find some
  way to free himself, and stroke his cock alone.

&lt;&lt;elseif $n_ivexGone&gt;&gt;
  Of course.
  ?P
  It&#39;s almost as if Ivex has arranged his lair to be
  &lt;em&gt;deliberately&lt;/em&gt; frustrating.
  Nero considers that thought for a moment, but rejects it.
  Ivex would have asked the Sprite to make a gloating taunt.
  This is just unhappy accident.
  ?P
  There&#39;s little chance that the wolf can touch the hole,
  whatever it is. Perhaps if Ivex were still here,
  Nero could trick him into touching it.
  But the panther is gone now,
  and the flickering red candle will not allow time to
  wait for his return.
  ?P
  No matter. There will be some other way to escape. Nero is sure of it.
  ?P
  He sets aside thoughts of using that annoying Sprite.
  Time to focus on what else he can do.

&lt;&lt;else&gt;&gt;
  Of course. Penetrating a competent mage&#39;s defenses is
  never &lt;em&gt;that&lt;/em&gt; easy. Nero is skeptical of
  Ivex&#39;s competence, but the panther
  certainly has &lt;em&gt;some&lt;/em&gt; impressive magic.
  Perhaps he does have real competence.
  It&#39;s quite normal for competent mages to have spots of
  incompetence here and there.
  
  ?P
  Nero had just hoped that one of those spots of incompetence
  would be Ivex&#39;s security system.
  
  ?P
  Well, no matter. Even competent security will have flaws.
  In this case, all Nero needs to do is identify this hole
  and trick Ivex into touching it. Simple.
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;run
  delete $n_dimBottle;
  delete $n_dimCoins;
  delete $n_dimPainting;
  delete $n_dimPenguin;
  delete $n_dimWand;
  delete $n_dimWindow;
  $n_magicPhase = MP_wantTouch;
  $n_magicPhaseReached = MP_wantTouch;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="441" name="n1s Say Password" tags="mt-ready" position="4275,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;

&lt;&lt;set _numTried = JSON.parse($n_passTried || &quot;[]&quot;).length&gt;&gt;
&lt;&lt;em-assert _numTried &gt;= 1&gt;&gt;
&lt;&lt;em-assert _numTried &lt;= 3&gt;&gt;

&lt;&lt;if $n_candleHorny&gt;&gt;
  &lt;&lt;switch _numTried&gt;&gt;
  &lt;&lt;case 1&gt;&gt;
    The wolf&#39;s first offering was clearly a mistake.
    He whines to the Sprite, &quot;$n_passToTry&quot;.
    This one is much better. He hopes the Sprite will like it.

  &lt;&lt;case 2&gt;&gt;
    The wolf is feeling opportunity slipping away.
    But he&#39;s confident now he knows the &lt;em&gt;best&lt;/em&gt; password of them all.
    He whines to the Sprite, &quot;$n_passToTry&quot;.
    It &lt;em&gt;must&lt;/em&gt; be acceptable.
    He not know what he will do if the Sprite rejects this,
    his finest idea.
  
  &lt;&lt;case 3&gt;&gt;
    The wolf is glad that the Sprite was not put off by
    his earlier failures,
    and he&#39;s excited to present a new idea,
    one that&#39;s far superior to all the others.
    He whines to the Sprite, &quot;$n_passToTry&quot;.
  &lt;&lt;/switch&gt;&gt;

&lt;&lt;else&gt;&gt;
  &lt;&lt;switch _numTried&gt;&gt;
  &lt;&lt;case 1&gt;&gt;
    Nero is not certain of this choice, but he does get to try again,
    and choosing an action is better than failing to act from indecision.
    He whispers to the Sprite, &quot;$n_passToTry&quot;.
  
  &lt;&lt;case 2&gt;&gt;
    This is Nero&#39;s last chance. He&#39;s considered several possibilities,
    and this one is clearly better than the rest.
    He hesitates another moment,
    then whispers with confidence, &quot;$n_passToTry&quot;.

  &lt;&lt;case 3&gt;&gt;
    Nero can be methodical about his guesses now.
    He whispers to the Sprite, &quot;$n_passToTry&quot;.
  &lt;&lt;/switch&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if PW_hunter === $n_passToTry&gt;&gt;
  ?P
  The Sprite ?sprSays,
  &lt;span class=sprite-q&gt;&quot;Did you mean
  &lt;em&gt;Hunter Two&lt;/em&gt; or &lt;em&gt;Hunter Two&lt;/em&gt;, ?masterQ&quot;&lt;/span&gt;

  ?P
  &lt;&lt;if $n_candleHorny&gt;&gt;
    Nero groans. Is it not obvious which one is in the room?
    He spells it out, &quot;T-O-O&quot;.
  &lt;&lt;else&gt;&gt;
    Nero assumes that the Sprite was asking about &quot;Two&quot; or &quot;Too&quot;,
    and hopefully &lt;em&gt;not&lt;/em&gt; &quot;To&quot;.
    He spells it out, &quot;T-O-O&quot;.
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;set $n_passToTry = PW_too&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;switch $n_ivexContext&gt;&gt;
&lt;&lt;case `IC_gone`&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  /* nothing */

&lt;&lt;case `IC_distant`&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  ?P
  Ivex seems to notice the whispering, but he merely shakes his head.

&lt;&lt;case `IC_explainTheft`&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  ?P
  &lt;&lt;switch $n_passToTry&gt;&gt;
  &lt;&lt;case `PW_fuckToy`&gt;&gt;
    Ivex says, &quot;There will be plenty of time for that later.
    Or do you want me to demonstrate it now?&quot;
  &lt;&lt;case `PW_hunter`&gt;&gt;
    Ivex growls. &quot;Do not tell lies about my penguin!&quot;
  &lt;&lt;case `PW_ivy`&gt;&gt;
    Ivex growls. &quot;Do not tell lies about my mother!&quot;
  &lt;&lt;case `PW_ivex`&gt;&gt;
    Ivex says, &quot;I&#39;m glad you&#39;re using my proper title,
    but you still must explain why you stole my dossier.&quot;
  &lt;&lt;case `PW_lance`&gt;&gt;
    Ivex says, &quot;There will be plenty of time for that later.
    Or do you want me to introduce him to you now?&quot;
  &lt;&lt;case `PW_ransamaran`&gt;&gt;
    Ivex says, &quot;Are you now claiming that you obtained my dossier
    from the school that wrongly expelled me?&quot;
  &lt;&lt;default&gt;&gt;
    Ivex says, &quot;That is not a sensible explanation for why
    you stole my dossier. You must elaborate.&quot;
  &lt;&lt;/switch&gt;&gt;

&lt;&lt;case `IC_lickPaw`&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  ?P
  &lt;&lt;switch $n_passToTry&gt;&gt;
  &lt;&lt;case `PW_fuckToy`&gt;&gt;
    Ivex says, &quot;There will be plenty of time for that later.
    No distractions now.&quot;
  &lt;&lt;case `PW_lance`&gt;&gt;
    Ivex says, &quot;There will be plenty of time for that later.
    No distractions now.&quot;
  &lt;&lt;default&gt;&gt;
    Ivex says, &quot;No distractions now.&quot;
  &lt;&lt;/switch&gt;&gt;
  He touches his fingers to Nero&#39;s jaw.
  &quot;Focus on the task in front of you.&quot;

&lt;&lt;case `IC_begForMe`&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  ?P
  &lt;&lt;switch $n_passToTry&gt;&gt;
  &lt;&lt;case `PW_fuckToy`&gt;&gt;
    Ivex snorts. &quot;Is that the punishment you wish to endure?
    That is not &lt;em&gt;begging&lt;/em&gt;.&quot;
  &lt;&lt;case `PW_lance`&gt;&gt;
    Ivex snorts. &quot;Is that the punishment you wish to endure?
    That is not &lt;em&gt;begging&lt;/em&gt;.&quot;
  &lt;&lt;default&gt;&gt;
    Ivex snorts. &quot;That is not a sensible answer to my question.
    Perhaps you should try begging.&quot;
  &lt;&lt;/switch&gt;&gt;

&lt;&lt;case `IC_comfortable`&gt;&gt;
  &lt;&lt;vi-always n_candleLit true&gt;&gt;
  ?P
  &lt;&lt;switch $n_passToTry&gt;&gt;
  &lt;&lt;case `PW_fuckToy`&gt;&gt;
    Ivex says, &quot;There will be plenty of time for that later.
    First things first. Are you comfortable?&quot;
  &lt;&lt;case `PW_lance`&gt;&gt;
    Ivex says, &quot;There will be plenty of time for that later.
    First things first. Are you comfortable?&quot;
  &lt;&lt;default&gt;&gt;
    Ivex growls. &quot;That is not an answer to my question.
    Are you comfortable?&quot;
  &lt;&lt;/switch&gt;&gt;

&lt;&lt;case `IC_whoSentYou`&gt;&gt;
  &lt;&lt;vi-always n_candleLit true&gt;&gt;
  ?P
  &lt;&lt;switch $n_passToTry&gt;&gt;
  &lt;&lt;default&gt;&gt;
    Ivex chuckles. &quot;A funny answer. The candle makes you more
    idiotic than I would have expected.&quot;
  &lt;&lt;/switch&gt;&gt;

&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`unhandled ivexContext ${$n_ivexContext}`)&gt;&gt;
&lt;&lt;/switch&gt;&gt;

?P
The Sprite ?sprSays,
&lt;span class=sprite-q&gt;&quot;Hm, that password doesn&#39;t sound right either, ?master
Please hold while I double-check that one, ?master&quot;&lt;/span&gt;

?P
&lt;&lt;switch _numTried&gt;&gt;
&lt;&lt;case 1&gt;&gt;
  &lt;&lt;if $n_candleHorny&gt;&gt;
    It starts loudly humming a vigorous tune that throbs to the beat of the
    flickering red candle.
    Nero is feeling optimistic about the Sprite&#39;s feelings for him.
    He nods his head to the rhythm.

  &lt;&lt;else&gt;&gt;
    It starts &lt;em&gt;loudly&lt;/em&gt; humming that annoying children&#39;s tune again.
    Nero shakes his head.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;case 2&gt;&gt;
  &lt;&lt;if $n_candleHorny&gt;&gt;
    It starts humming its erotic tune at a much faster pace.
    Nero is thrilled by this acceleration of their relationship.
    He gasps in delight.
  &lt;&lt;else&gt;&gt;
    It unfortunately starts &lt;em&gt;loudly&lt;/em&gt; humming that
    annoying children&#39;s tune,
    but at a much faster tempo than before.
    The music resembles a bard overcome by Stalver&#39;s Jittering Dementia.
    Nero groans.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;case 3&gt;&gt;
  &lt;&lt;if $n_candleHorny&gt;&gt;
    It starts screaming in ecstasy in the wolf&#39;s ear.
    Nero is delighted that &lt;em&gt;this&lt;/em&gt; password has driven the
    Sprite to new heights of pleasure.
    He&#39;s confident that it will soon reach a climax,
    and they will soon be able to climax together.
  &lt;&lt;else&gt;&gt;
    It starts &lt;em&gt;screeching&lt;/em&gt; in an irregular pattern.
    Nero is appalled. Is the Sprite broken?
    
    ?P
    A few moments later, the wolf notices that the irregular screeching is
    a &lt;em&gt;repeating&lt;/em&gt; irregular pattern, and each repeat adds a small
    variation to the screeching.
    He realizes that this must be the song &lt;em&gt;Stop the Music&lt;/em&gt;.
    Nero twitches his ear at the panther&#39;s weird taste in music.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/switch&gt;&gt;

?P
$n_afterAction

/* note n_passToTry can be changed above */
&lt;&lt;run
  $n_magicPhase = MP_onHold;
  _tried = JSON.parse($n_passTried || &quot;[]&quot;);
  _tried.unshift($n_passToTry);
  $n_passTried = JSON.stringify(_tried);
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="442" name="n1s Scan Horny" tags="mt-ready" position="3725,875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleLit true&gt;&gt;
&lt;&lt;vi-always n_candleHorny true&gt;&gt;

&lt;&lt;if !$n_ivexGone&gt;&gt;
  Nero scans the room, searching for any magic or energy that he can
  use, but no matter where he looks,
  Ivex&#39;s own incredible energies dominate Nero&#39;s attention.
  The wolf can&#39;t stop staring at the panther&#39;s spectral arcs.
  Nero can&#39;t stop tracing the bold shifting strands of exotic energy
  wrapped around the panther,
  and he can&#39;t stop imagining what it would feel like
  to have that immense power,
  even the slightest bit of it, focused on his body,
  his mind, his soul.
  ?P
  Nero&#39;s muscles spasm, and his throbbing red cock quivers in the air.

&lt;&lt;else&gt;&gt;
  Nero scans the room, searching for magic that he can use.
  The dense web of exotic energy
  hums and flirts with the edges of the wolf&#39;s spirit.
  He can almost feel the exotic strands, like a breath stroking his fur,
  or a whisper licking his skin.
  He strains in his bonds to embrace them, or let them embrace him,
  and his throbbing red cock quivers

  &lt;&lt;if $n_mirrorFlawNoticed || $n_mirrorFlawHorny&gt;&gt;
    and yearns for the hole it&#39;s already noticed.
    The rippling mesh of exotic power has a &lt;em&gt;gap&lt;/em&gt;
    at the &lt;&lt;mta &quot;n1y Horny Mirror&quot;&gt;&gt;?mirror&lt;&lt;/mta&gt;&gt; on the desk.

  &lt;&lt;else&gt;&gt;
    and searches for
    a surface it can touch,
    a hole it can enter that will grasp and consume it.
    ?P
    And as the wolf&#39;s muscles shift against the bondage of the cross,
    his cock &lt;em&gt;sees&lt;/em&gt; it.
    There&#39;s a &lt;em&gt;gap&lt;/em&gt; in the rippling mesh of exotic power.
    The &lt;&lt;mta &quot;n1y Horny Mirror&quot;&gt;&gt;?mirror&lt;&lt;/mta&gt;&gt; on the desk
    has wrinkles of energy surrounding a node that he might tap!
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;run
  if ($n_ivexGone) {
    $n_mirrorFlawHorny = true;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="443" name="n1s Scan" tags="mt-ready" position="3725,750" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;

&lt;&lt;if !$n_scanned&gt;&gt;
  Nero scans the magic of the room.
  Normally the lupine mage
  would limit his attention to objects that appear unusual,
  but &lt;em&gt;everything&lt;/em&gt; in here is unusual.

  ?P
  It&#39;s natural for mage lairs to have more magic than a typical
  mundane home, but Ivex&#39;s lair goes far beyond that.
  Every object in the room seems
  to have bristling tendrils of exotic energy that are
  knotted to axioms attached to every visible surface.
  And
  &lt;&lt;if $n_ivexGone&gt;&gt;
    everything in this room
  &lt;&lt;else&gt;&gt;
    everything, including the spectral whorl of Ivex,
  &lt;&lt;/if&gt;&gt;
  is connected to everything else
  by a dense web of exotic energy flows.
  It&#39;s extraordinarily intricate and complex.

  ?P
  There are far too many strange and unfamiliar magics in this
  space for Nero to make sense of the whole.

  &lt;&lt;if $n_mirrorFlawNoticed&gt;&gt;
    He&#39;s already noticed that the
    &lt;&lt;mt-seen $n_dimMirror&gt;&gt;
      &lt;&lt;mta &quot;n1x Mirror&quot;&gt;&gt;?mirror&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    has &lt;em&gt;un-exotic&lt;/em&gt; magic,
    but he wonders what else
  &lt;&lt;else&gt;&gt;
    He wonders which objects
  &lt;&lt;/if&gt;&gt;
  would be useful to examine in detail.

&lt;&lt;else&gt;&gt;
  Nero scans the room&#39;s magic again.
  It&#39;s still a confusing chaos of familiar and unfamiliar constructs.
  Numerous axioms commute within
  the tangled web of exotic energy that connects
  &lt;&lt;if $n_ivexGone&gt;&gt;
    everything in this room
  &lt;&lt;else&gt;&gt;
    everything, including the spectral whorl of Ivex,
  &lt;&lt;/if&gt;&gt;
  to everything else.

  ?P
  But he&#39;s become more accustomed to the rhythms of it,
  and he sees
  &lt;&lt;= $n_scannedAgain ? &quot;&quot; : &quot;now&quot;&gt;&gt;
  that the empty air has a pattern of exotic energy
  with some resemblance to the natural power flows of the planet.
  The planet&#39;s power appears in mage-sight as faint parallel strands of energy
  that interlock like a sieve or a mesh in three dimensions.
  The exotic energy has a similar structure of faint strands that are
  much finer and more densely packed.

  ?P
  &lt;&lt;if $n_scannedAgain&gt;&gt;
    It might be possible to tap that exotic mesh,
    but he&#39;s been unable to attune his spectral arcs properly to it.
  &lt;&lt;else&gt;&gt;
    It might be possible to tap that exotic mesh?
    The lupine mage makes several attempts at attuning
    his spectral arcs
    to the exotic harmonics, but nothing works.
    He&#39;s unable to find the right geometry.
    Everything he tries just slips off.
    ?P
  &lt;&lt;/if&gt;&gt;
  Nero is quite intellectually frustrated by the puzzle,
  but he reminds himself that he has limited magic energy left.
  He should not waste it on fruitless exercise.

  ?P
  &lt;&lt;if $n_mirrorFlawNoticed&gt;&gt;
    It&#39;s probably better to explore the un-exotic energy of the
    &lt;&lt;mt-seen $n_dimMirror&gt;&gt;
      &lt;&lt;mta &quot;n1x Mirror&quot;&gt;&gt;?mirror&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    on the desk.
  &lt;&lt;else&gt;&gt;
    As he pulls his mind away from that puzzle, he notices
    what his subconscious has been trying to tell him.
    There&#39;s a &lt;em&gt;flaw&lt;/em&gt; in the exotic energy mesh,
    a discontinuity at the
    &lt;&lt;mt-seen $n_dimMirror&gt;&gt;
      &lt;&lt;mta &quot;n1x Mirror&quot;&gt;&gt;?mirror&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    on the desk!
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;run
  if ($n_scanned) {
    $n_mirrorFlawNoticed = true;
    $n_scannedAgain = true;
  }
  $n_scanned = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="444" name="n1s Sprite Dots" tags="mt-ready inclusion" position="4025,925" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;

&lt;&lt;if $n_spriteDotsHeard&gt;&gt;
  A moment later, it says,
  &lt;span class=sprite-q&gt;&quot;Dot... Dot... Dot...&quot;&lt;/span&gt;
&lt;&lt;else&gt;&gt;
  After a pause, it says,
  &lt;span class=sprite-q&gt;&quot;Dot... Dot... Dot...&quot;&lt;/span&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if !$n_spriteDotsHeard&gt;&gt;
  &lt;&lt;if !$n_candleHorny&gt;&gt;
    The Sprite actually spoke the word &quot;dot&quot; aloud,
    three times, with a pause in between them.
    Nero is puzzled. &lt;em&gt;Why&lt;/em&gt; would a Sprite do that?
    &lt;em&gt;How&lt;/em&gt; did Ivex mess up the Sprite&#39;s instructions
    in such a way that it would do that?
  &lt;&lt;else&gt;&gt;
    The androgynous voice of the Sprite gives each utterance of
    the word &quot;dot&quot; a different nuance.
    The first is a surprise, an unexpected guest.
    The second brings a realization that the visitor is
    a friend who&#39;s very much loved.
    The third is a warm embrace that&#39;s familiar,
    and Nero moans with anticipation that becomes
    despair when he realizes that the dots have ended,
    and there will not be any more.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  &lt;&lt;if !$n_candleHorny&gt;&gt;
    It&#39;s the dots again. Nero cannot stop thinking about them.
    He&#39;s quite sure now that such an utterance could not have
    been produced by a mistake in the Sprite&#39;s instructions.
    Ivex must have explicitly told the Sprite to say the word &quot;dot&quot;.
    &lt;em&gt;Why&lt;/em&gt; would he do that?
  &lt;&lt;else&gt;&gt;
    The dots have returned!
    Nero sighs with pleasure as their
    androgynous presence
    drips into his consciousness yet again,
    a reunion tinged with melancholy from
    the knowledge that this sensuous visit will also be brief,
    a tryst doomed to end soon after it begins.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $n_spriteDotsHeard = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="445" name="n1s Sprite Info 1" tags="mt-ready" position="7900,575" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  &lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Pyron nodes are versatile substrates for magic,
but they&#39;re quite different from traditional
substrates such as spellbooks and scrolls.
Traditional magic has implicit structural axioms
that must be made explicit when imbuing a spell in a pyron node.
This process is part of the education of every modern mage,
but most mages find it tedious and unpleasant.
Fortunately, mages in recent years have developed an alternative.

?P
Magic Sprites are sophisticated arcane constructs
that have a small amount of intelligence
and a diligent obedience to command.
Creating a Sprite requires an &lt;em&gt;entire&lt;/em&gt; pyron node,
which is not a small expense.
But in return, the pyron node becomes an
assistant that&#39;s able to perform
a wide variety of simple magics whenever the mage
speaks to it.
For instance, a carnival wizard can prepare a complex cascade of spells
before a performance,
and then instruct a Sprite to trigger those spells when the wizard
speaks a phrase such as &quot;Behold!&quot; or &quot;Is this your card?&quot;

?P
And Sprites are able to obey instructions phrased with ordinary speech,
not just arcane incantations.
This makes them
much easier to operate than their underlying pyron node.

?P
But there are a few hazards in the use of Sprites that stem
from their limited intelligence.

?P
The earliest Sprites would obey anything spoken
that could be interpreted as a command, which led to many amusing
and occasionally fatal accidents. A mage in middle of a
passionate embrace might cry out, &quot;Enter me now!&quot;
without remembering that a nearby Sprite will also hear the command
and attempt to obey it.

?P
The latest Sprites are
all instructed to obey commands only when they hear a statement that
starts with a specific word of command.
The word of command can be changed with a command, of course,
as long as the mage knows what the word currently is.
For most models of Sprite, the word is initially &quot;Please&quot;.
So a newly created Sprite will ignore a statement like
&quot;Enter me now!&quot; But it will respond eagerly to the statement,
&quot;Please! Enter me now!&quot;

?P
Naturally, mages will change the word of command to
something that they will not say by accident.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1s Sprite Info 2]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="446" name="n1s Sprite Info 2" tags="mt-ready" position="7900,450" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  &lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Sprites are also able to answer simple questions and engage in
pleasant conversation within the limits of their small intelligence.
Early Sprites could only respond by showing words within
an attached surface like a mirror or crystal sphere,
and modern Sprites can still do that.
But modern Sprites are also able to assemble loose matter
into a small golem that can speak its words aloud.

?P
Carnival wizards will sometimes request dazzling golems made of
sparkling liquid or glittering sand, but professional mages
will usually allow the Sprite to construct a golem in
the modern, pragmatic way, 
which is to make a tiny golem out of the wax within the ear of the mage.

?P
A lion mage named Alegosi was the first to consider
placing the Sprite&#39;s golem entirely within her ear.
Mages quickly recognized how useful it is to
be able to hear a Sprite that nobody else can.
But Alegosi was concerned that these conversations become
asymmetric. The mage speaks words aloud, and the Sprite&#39;s response
is unnoticeable by others. Mages are already barely tolerated for
their various eccentric behaviors,
but &quot;holding conversations with invisible voices&quot;
puts a person firmly in the category of possessed or insane.

?P
So Alegosi spent many years trying to develop a way of commanding
her Sprite without audible speech, using just her internal,
mental voice.

?P
She eventually did succeed. Her command of her Sprite became
rapid and more complex. The Sprite&#39;s understanding of her desires
became stronger and more precise. It learned to assist and reflect
useful ideas back to her in ways that no colleague could match.

?P
The lion mage&#39;s conversations with her Sprite became deeper and more
intimate, until one day they constructed together
an arcane realm of imagination that was perfectly attuned
to Alegosi&#39;s desires.
It was a place of profound fascination and surprising pleasures,
continually refreshed by their combined abilities
in an endlessly evolving dance.

?P
Alegosi&#39;s body is a roped-off exhibit at Ransamaran Ivory today,
still sitting in a chair in a corner of a room that classes
still use for laboratory experiments.
Her body is somewhat desiccated, but still quite well-preserved.
Perhaps some day she will be moved to
a place less upsetting to novice mages.
But nobody wants to disturb the body of such a powerful mage,
while she&#39;s still breathing, still alive.

?P
The mysterious author of the original, basic model of Sprite
continues to publish new versions that incorporate Alegosi&#39;s
mechanism for communicating with just an internal voice.
But no other mage has ventured to use it
more than once or twice.
And all of the most popular modifications to the basic
model of Sprite begin with an instruction to remove
that function entirely.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_Sprite&gt;&gt;
  &lt;&lt;mta &quot;n1s Tap 3&quot;&gt;&gt;Return&lt;&lt;/mta&gt;&gt;

  &lt;&lt;set $n_spriteVisited = true&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="447" name="n1s Sprite" tags="mt-ready inclusion" position="4225,600" size="200,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;set if (MP_exitingHold === $n_magicPhase) {
  if ($n_passTried.length === 4) {
    $n_magicPhase = MP_lockedOut;
  } else {
    $n_magicPhase = MP_wantPass;
  }
}
&gt;&gt;

&lt;&lt;if $n_candleHorny&gt;&gt;
  &lt;&lt;switch MT.pick([0, 1, 2])&gt;&gt;
  &lt;&lt;case 0&gt;&gt;
    The burr in the Sprite&#39;s voice leaves an
    unbearable shiver in Nero&#39;s ear.
  &lt;&lt;case 1&gt;&gt;
    The Sprite is a sexy, androgynous voice
    &lt;&lt;= $n_spriteQuiet ? &quot;whispering&quot; : &quot;reverberating&quot;&gt;&gt;
    in Nero&#39;s head.
  &lt;&lt;case 2&gt;&gt;
    The Sprite ?sprSpeaks slowly in Nero&#39;s ear, with erotic urgency lurking
    in every syllable.
  &lt;&lt;/switch&gt;&gt;
&lt;&lt;else&gt;&gt;
  The Sprite
  &lt;&lt;if MP_contact === $n_magicPhase&gt;&gt;
    reminds Nero,
  &lt;&lt;elseif $n_spriteSaidPhase === $n_magicPhase&gt;&gt;
    repeats in Nero&#39;s ear,
  &lt;&lt;else&gt;&gt;
    ?sprSpeaks in Nero&#39;s ear.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;switch $n_magicPhase&gt;&gt;
&lt;&lt;case `MP_wantDevice`&gt;&gt;
  &lt;span class=sprite-q&gt;&quot;Which device in this room do you wish
  to contact, ?masterQ&quot;&lt;/span&gt;
  &lt;&lt;if _patience &lt;= 0&gt;&gt;
    /* nothing */
  &lt;&lt;elseif $n_bottleViewed&gt;&gt;
    &lt;&lt;if $n_candleHorny&gt;&gt;
      The wolf only knows one device in this room. Nackle&#39;s device
      is somewhat of a bold choice for a new relationship,
      but there does not seem to be anything else available.
    &lt;&lt;else&gt;&gt;
      The wolf wonders if the Sprite can contact Nackle&#39;s device.
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;set _please = $n_rememberPlease ? &quot;Please, &quot; : &quot;&quot;&gt;&gt;
    &lt;&lt;set $n_magicAction =
      `&lt;&lt;mtl [[n1s Say Device]]&gt;&gt;`
      + `Tell the Sprite, &quot;${_please}Nackle&#39;s Poltergeist Device.&quot;`
      + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;
  &lt;&lt;elseif !$n_helpDeviceAsked&gt;&gt;
    &lt;&lt;if $n_candleHorny&gt;&gt;
      The request is somewhat forward for such a new relationship,
      but the wolf is quite happy that it &lt;em&gt;is&lt;/em&gt; a relationship.
    &lt;&lt;else&gt;&gt;
      The wolf is unsure exactly what that means. Perhaps it&#39;s a way
      for him to use a magic device?
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;set $n_magicAction =
      `&lt;&lt;mtl [[n1s Help Device]]&gt;&gt;`
      + `Ask the Sprite for help.`
      + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;
  &lt;&lt;elseif $n_candleHorny&gt;&gt;
    The teasing innuendo in the Sprite&#39;s tone is impossible to ignore.
    The wolf desperately looks around the room for a device that will
    satisfy their shared desire.
  &lt;&lt;else&gt;&gt;
    The wolf wishes the Sprite had been instructed to be more helpful.
    There must be &lt;em&gt;some&lt;/em&gt; device in the room that he can contact.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;case `MP_wantName`&gt;&gt;
  &lt;span class=sprite-q&gt;&quot;Which device in this room do you wish
  to contact, ?masterQ&quot;&lt;/span&gt;
  &lt;&lt;if _patience &lt;= 0&gt;&gt;
    /* nothing */
  &lt;&lt;elseif $n_bottleNameKnown&gt;&gt;
    ?P
    &lt;&lt;if $n_candleHorny&gt;&gt;
      Its earlier dismissal of Nackle was disheartening.
      But perhaps the Sprite misunderstood the wolf&#39;s intent.
      He wants merely an &lt;em&gt;introduction&lt;/em&gt; to the horse cock
      that the Sprite already knows.
    &lt;&lt;else&gt;&gt;
      The wolf hesitates to say the name aloud.
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;set $n_magicAction =
      `&lt;&lt;mtl [[n1s Say Lance]]&gt;&gt;`
      + `Tell the Sprite, &quot;Please, Lance Rockhard.&quot;`
      + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;
  &lt;&lt;elseif !$n_helpDeviceAsked&gt;&gt;
    &lt;&lt;if $n_candleHorny&gt;&gt;
      The wolf is unsure of this relationship. It is not progressing
      as quickly as he likes. But the Sprite seems
      willing to continue to try.
    &lt;&lt;else&gt;&gt;
      &quot;Nackle&#39;s Device&quot; was not specific enough.
      The wolf will need to tell
      the Sprite a name that Ivex has given to his devices.
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;set $n_magicAction =
      `&lt;&lt;mtl [[n1s Help Device]]&gt;&gt;`
      + `Ask the Sprite, &quot;Please, help!&quot;`
      + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;
  &lt;&lt;elseif $n_candleHorny&gt;&gt;
    All of them, of course, but the wolf knows that the Sprite is
    not yet ready for that.
    &lt;&lt;if $n_ivexGone&gt;&gt;
      Perhaps Ivex could have suggested the right one to start with.
      The wolf&#39;s cock strains uncomfortably at the thought.
    &lt;&lt;else&gt;&gt;
      The wolf will have to choose a name to whisper to the Sprite.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;elseif $n_ivexGone&gt;&gt;
    Unfortunately, the wolf sees no way of guessing what names
    Ivex has given to his devices. The Sprite is a useless annoyance now.
  &lt;&lt;else&gt;&gt;
    The imitation of helpfulness is annoying.
    The wolf will have to trick Ivex into revealing the name of a device.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;case `MP_wantTouch`&gt;&gt;
  &lt;span class=sprite-q&gt;&quot;Please touch my hole, ?master&quot;&lt;/span&gt;
  &lt;&lt;if _patience &lt;= 0&gt;&gt;
    /* nothing */
  &lt;&lt;elseif !$n_helpTouchAsked&gt;&gt;
    &lt;&lt;if $n_candleHorny&gt;&gt;
      The wolf is fascinated by thoughts of where this hole might be.
    &lt;&lt;else&gt;&gt;
      The wolf wonders where this hole might be.
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;set $n_magicAction =
      `&lt;&lt;mtl [[n1s Help Touch]]&gt;&gt;`
      + `Ask the Sprite, &quot;Please, help!&quot;`
      + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;
  &lt;&lt;elseif $n_candleHorny&gt;&gt;
    The wolf would love to. Why doesn&#39;t the Sprite understand that he
    &lt;em&gt;can&#39;t&lt;/em&gt; without its help?
  &lt;&lt;elseif $n_ivexGone&gt;&gt;
    The wolf has no way to touch any hole,
    now that Ivex is gone.
    The Sprite&#39;s pestering is annoying.
  &lt;&lt;else&gt;&gt;
    There must be some way to trick Ivex into touching the right hole.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;case `MP_wantPass`&gt;&gt;
  &lt;span class=sprite-q&gt;&quot;Please say your password, ?master&quot;&lt;/span&gt;
  &lt;&lt;if _patience &gt; 0&gt;&gt;
    ?P
    &lt;&lt;switch JSON.parse($n_passTried || &quot;[]&quot;).length&gt;&gt;
    &lt;&lt;case 1&gt;&gt;
      Nero has two guesses remaining.
      Not as many as he&#39;d like, but better than nothing.
    &lt;&lt;case 2&gt;&gt;
      Nero only has one guess remaining.
      He&#39;d better make it a good one.
    &lt;&lt;case 3&gt;&gt;
      Nero now has zero guesses remaining?
      It probably means there is not actually
      a limit to the number of guesses.
    &lt;&lt;default&gt;&gt;
      &lt;&lt;run throw new Error(`bug: passTried length ${$n_passTried}`)&gt;&gt;
    &lt;&lt;/switch&gt;&gt;
    &lt;&lt;set $n_magicAction =
      `&lt;&lt;mtl [[n1s Guess Password]]&gt;&gt;`
      + `Guess a password.`
      + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;
  &lt;&lt;/if&gt;&gt;


&lt;&lt;case `MP_onHold`&gt;&gt;
  &lt;&lt;include [[n1s On Hold]]&gt;&gt;

&lt;&lt;case `MP_contact`&gt;&gt;
  &lt;&lt;include [[n2f Use Lance]]&gt;&gt;

&lt;&lt;case `MP_lockedOut`&gt;&gt;
  &lt;&lt;include [[n1s Locked Out]]&gt;&gt;

&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`BUG: sprite magicPhase ${$n_magicPhase}`)&gt;&gt;
&lt;&lt;/switch&gt;&gt;

&lt;&lt;set $n_spriteSaidPhase = $n_magicPhase&gt;&gt;
&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="448" name="n1s Tap 1" tags="mt-ready" position="7650,700" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

Nero is elated that he&#39;s found an ordinary
&lt;&lt;mt-seen $kn_Pyron&gt;&gt;
  &lt;&lt;tran-cut [[pyron node|n1s Pyron Node]]&gt;&gt;
&lt;&lt;/mt-seen&gt;&gt;
amid all of Ivex&#39;s exotic magics.
And apparently not warded!
This is the slightest of flaws,
but it&#39;s all that the wolf mage needs for him to start
&lt;&lt;if $n_subby&gt;&gt;
  dissecting the panther&#39;s magic.
&lt;&lt;else&gt;&gt;
  bypassing the panther&#39;s magic defenses.
&lt;&lt;/if&gt;&gt;

?P
Tapping an unfamiliar node requires patience and precision.
But if Nero succeeds, he should be able to siphon a trickle
of energy from it.
The trickle won&#39;t be enough to cast more spells just yet,
but it will be more than enough to keep his
mage-sight active.

?P
More importantly, the pyron node might have spells
and magic of its own, which Nero can use without
expending any energy himself!
?P

The lupine mage cautiously extends a spectral arc toward the node...
?P
[[Continue|n1s Tap 2]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="449" name="n1s Tap 2" tags="mt-ready" position="7775,700" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;

Nero quickly finds the right harmonics for this node.
Ivex is
&lt;&lt;= $n_subby ? &quot;a bit&quot; : &quot;quite&quot;&gt;&gt;
careless with his security...

?P
&lt;&lt;fade-in 5s&gt;&gt;
  The trickle of fresh energy is a comfort.
  And no alarms seem to have gone off.
  ?P

&lt;&lt;fade-next 5s&gt;&gt;
  The wolf&#39;s ear itches. He waits some more, out of caution.
  ?P

&lt;&lt;fade-next 5s&gt;&gt;
  Suddenly, a blast of noise almost deafens his left ear.
  ?P
  &lt;&lt;if $n_ivexGone&gt;&gt;
    He yowls in surprise, and is immediately embarrassed by his
    reaction. What if Ivex were still here?
    ?P
    It might seem like there&#39;s no reason for restraint
    when there&#39;s no immediate peril,
    but moments of safety are ideal times for practicing the
    skills that he&#39;ll need to survive when there &lt;em&gt;is&lt;/em&gt; peril.
    He &lt;em&gt;should&lt;/em&gt; have remained placid in this
    anti-anti-magic exercise,
    despite the unexpected assault on his senses.
  &lt;&lt;else&gt;&gt;
    He twists his head and flattens his ears in surprise,
    but forces himself to quickly recover,
    hoping that Ivex does not suspect anything but momentary dismay.
    ?P
    This is a defense he did not expect!
    He diligently adds a note to his mental cabinet of interesting ideas:
    &quot;False nodes with traps that are sprung when an attacker
    tries to use them.&quot;
  &lt;&lt;/if&gt;&gt;

  ?P
  [[Continue|n1s Tap 3]]
&lt;&lt;/fade-in&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="450" name="n1s Tap 3" tags="mt-ready" position="7900,700" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;em-assert !$n_opportunist&gt;&gt;
&lt;&lt;em-assert !$n_spriteQuiet&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

Before Nero
&lt;&lt;= $n_spriteVisited ? &quot;had&quot; : &quot;has&quot;&gt;&gt;
a chance to detach from the pyron node,
the noise in his left ear
&lt;&lt;= $n_spriteVisited ? &quot;became&quot; : &quot;becomes&quot;&gt;&gt;
a perky, androgynous voice that
&lt;&lt;= $n_spriteVisited ? &quot;said,&quot; : &quot;says,&quot;&gt;&gt;
&lt;span class=sprite-q&gt;&quot;Hey, sorry about that, ?master
I&#39;ve recalibrated audio output to your new ear shape,
?master&quot;&lt;/span&gt;

?P
Nero recognizes the voice. It&#39;s a
&lt;&lt;mt-seen $kn_Sprite&gt;&gt;
  &lt;&lt;tran-cut [[Magic Sprite|n1s Sprite Info 1]]&gt;&gt;!
&lt;&lt;/mt-seen&gt;&gt;
The wolf should have expected it.
He was hoping that the pyron node would
allow him direct access to its magic substrate,
but a Sprite offers plenty of possibilities on its own.

?P
The Sprite continues.
&lt;span class=sprite-q&gt;&quot;Oh, I guess I should repeat
the messages that you didn&#39;t understand,
?master&quot;&lt;/span&gt;

?P
A bell sound reverberates in Nero&#39;s ear.

?P
&lt;span class=sprite-q&gt;&quot;Welcome, Ivex the Magnificent, ?master
I am your Awesome Babble Sprite,
Carnivore Edition with Custom Emotions,
Version Six Dot Nine Dash Pre Cum, ?master&quot;&lt;/span&gt;

?P
&lt;span class=sprite-q&gt;&quot;There are two notes here, ?master&quot;&lt;/span&gt;

?P
&lt;span class=sprite-q&gt;&quot;Note one, ?master
Your word of command is please, ?master
No, wait, the note should say,
&lt;em&gt;my&lt;/em&gt; word of command is please, ?master&quot;&lt;/span&gt;

?P
&lt;span class=sprite-q&gt;&quot;The second note, ?master
Remember to change your word of command
to something more dominating
that I&#39;m unlikely to say to any of my subjects, ?master&quot;&lt;/span&gt;

?P
[[Continue|n1s Tap 4]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="451" name="n1s Tap 4" tags="mt-ready" position="8025,700" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;em-assert !$n_opportunist&gt;&gt;
&lt;&lt;em-assert !$n_spriteQuiet&gt;&gt;

Nero is amused that Ivex has not changed the Sprite&#39;s word of command
to something other than &quot;Please&quot;.
&lt;&lt;if $n_ivexGone&gt;&gt;
  If the panther were still here,
  this lazy oversight would be quite helpful.
&lt;&lt;else&gt;&gt;
  But this lazy oversight is quite helpful.
&lt;&lt;/if&gt;&gt;
A word of command such as &quot;Obey me minion!&quot;
would be difficult for Nero to speak without raising questions.
&quot;Please&quot; is much easier to slip into conversation that Ivex
&lt;&lt;if $n_ivexGone&gt;&gt;
  would not have noticed.
&lt;&lt;else&gt;&gt;
  will not notice.
&lt;&lt;/if&gt;&gt;
?P
&lt;&lt;if $n_ivexGone&gt;&gt;
  The wolf wags his tail with abandon.
&lt;&lt;else&gt;&gt;
  The wolf prevents his tail from wagging.
&lt;&lt;/if&gt;&gt;
Access to something as powerful as a Sprite
opens up limitless possibilities for
&lt;&lt;= $n_subby ? &quot;understanding and escaping this place!&quot; : &quot;escape!&quot;&gt;&gt;
?P
The Sprite speaks again.
&lt;span class=sprite-q&gt;&quot;Which device in this room do you wish
to contact, ?masterQ&quot;&lt;/span&gt;
?P
Okay, maybe not &lt;em&gt;limitless&lt;/em&gt;. This Sprite seems to be
instructed to serve a narrow purpose.
But it&#39;s definitely an improvement over being just
&lt;&lt;if $n_naked&gt;&gt;
  naked and
&lt;&lt;/if&gt;&gt;
helplessly bound to
&lt;&lt;if $n_ivexGone&gt;&gt;
  &lt;&lt;em-assert $n_candleLit&gt;&gt;
  a wooden cross, staring at that flickering red candle.
&lt;&lt;else&gt;&gt;
  a wooden cross for the pleasures of this perverted panther.
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;run
  $n_magicPhase = MP_wantDevice;
  $n_magicPhaseReached = MP_wantDevice;
  $n_mirrorTapped = true;
  $n_mirrorWasTapped = true;
  $n_spriteSaidPhase = MP_wantDevice;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="452" name="n1s Use Sight" tags="mt-ready inclusion" position="3600,825" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mirrorTapped false&gt;&gt;
&lt;&lt;vi-always n_mirrorBroken false&gt;&gt;
&lt;&lt;vi-always n_mirrorTaken false&gt;&gt;

&lt;&lt;if $n_candleHorny&gt;&gt;
  &lt;&lt;random-once n_mageSightHorny1&gt;&gt;
  &lt;&lt;ro-choice&gt;&gt;
    It feels like the exotic energy is singing,
    asking the lupine mage to surrender to its whispered pleasures.
    And he tries to, but he feels his magic energies depleting, and
  &lt;&lt;ro-choice&gt;&gt;
    The exotic energies are singing to him a song
    of buried pleasures.
    The lupine mage wants to add his voice to it,
    but his own energies are fading, and
  &lt;&lt;ro-choice&gt;&gt;
    The lupine mage is entranced by the rhythms of exotic energy.
    It sings and dances a promise of endless days and
    nights of secret pleasures.
    Nero wants to add his dwindling energy to it, but
  &lt;&lt;/random-once&gt;&gt;

  &lt;&lt;random-once n_mageSightHorny2&gt;&gt;
  &lt;&lt;ro-choice&gt;&gt;
    he knows that once the mage-sight is gone,
    the song of the exotic energy will also be gone.
    There must be something he can do to keep the music going.
  &lt;&lt;ro-choice&gt;&gt;
    he&#39;s afraid that when his mage-sight is gone,
    he&#39;ll forget the song and remain in silence alone.
    There must be some way to hold onto this music longer.
  &lt;&lt;/random-once&gt;&gt;

&lt;&lt;else&gt;&gt;
  The lupine mage does not know how much longer he can
  sustain the mage-sight spell. He&#39;d better find something
  useful before his energy is completely depleted.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_candleHorny&gt;&gt;
  &lt;&lt;set $n_magicAction =
    `&lt;&lt;mtl [[n1s Scan Horny]]&gt;&gt;`
    + `Scan the room for energy he can use.`
    + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;
&lt;&lt;elseif $n_scanned&gt;&gt;
  &lt;&lt;set $n_magicAction =
    `&lt;&lt;mtl [[n1s Scan]]&gt;&gt;`
    + `Scan the room&#39;s magic again.`
    + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;set $n_magicAction =
    `&lt;&lt;mtl [[n1s Scan]]&gt;&gt;`
    + `Scan the room&#39;s magic.`
    + `&lt;&lt;/mtl&gt;&gt;`&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="453" name="n1s Younger Info 1" tags="mt-ready" position="2525,1175" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Younger&#39;s Escape is an interesting spell construction that was
invented by the brilliant fox mage Kelvin the Younger.
He never used it himself.
It was a gift for a friend, a talented wolf actor named Reaumer,
who requested help with a problem in a role he was playing.

?P
The spell is a combination of two spells that would normally be
incompatible: Oil of Dragons is a spell that affects the subject&#39;s skin and fur,
making their body&#39;s surface slick and nearly frictionless.
And Rossum&#39;s Snake makes the
subject&#39;s bones flexible enough to tie into knots.

?P
The difficulty of the combination is that Oil of Dragons is a
traditional rabbit spell that uses herbivore axioms,
and Rossum&#39;s Snake is a modern invention that uses carnivore axioms.
The two spell systems originate from logical premises that are
incompatible. Simply casting the two spells on a subject will have
the second spell dispel the first.

?P
The usual solution to a problem like this is to replace one of the spells
with a similar one from the other tradition. But in this case,
neither spell has a close equivalent in the other system,
and to develop such a spell would normally take months, or even years.

?P
Kelvin greatly admired the wolf Reaumer,
but the fox mage saw no reason to devote
years of study to a spell that was intended to facilitate a sequence of
impossibly fast costume changes during the second act of a comic operetta.
So he invented a simple alternative.

?P
His solution was to have two mages cast each spell &lt;em&gt;simultaneously&lt;/em&gt;,
while a third mage casts a spell that rapidly shifts the logical foundations
of a substrate on the subject.
Each spell has a moment when it &lt;em&gt;is&lt;/em&gt; solidly grounded.
One spell&#39;s foundation &lt;em&gt;does&lt;/em&gt; collapse when
the &lt;em&gt;other&lt;/em&gt; spell becomes grounded,
but the foundation returns before the first spell has time
to notice the flimsiness of its support.

?P
The result is not exactly &lt;em&gt;stable&lt;/em&gt;, but it&#39;s stable
&lt;em&gt;enough&lt;/em&gt; for its intended purpose.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1s Younger Info 2]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="454" name="n1s Younger Info 2" tags="mt-ready" position="2650,1175" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

The wolf actor Reaumer loved the spell.
All the costume changes were fast and flawless:
from the heavily armored soldier,
to his twin in a wedding dress and shackles,
to his other twin strapped to a saddle and being ridden like a horse,
and then back again,
as the operetta&#39;s interlocking plots reach climax in the second act
with the revelation that there
are only &lt;em&gt;two&lt;/em&gt; twins, not three,
which takes the story in astonishing directions
in the third act.
Audiences went wild over it.

?P
Reaumer called the spell
Kelvin&#39;s Rossum&#39;s Snake with Oil of Dragons,
and he readily shared the use of it with other actors,
where it quickly became popular despite its complicated preparation.
The other actors shortened the unwieldy name to Kelvin&#39;s Snake Oil,
with a laugh.

?P
Actors are sometimes as secretive about their techniques as mages are,
so the spell was not widely known until it became noticed by
the local Thieves Guild.
Thieves found the spell to be an interesting
addition to their magical kit, but the Guild felt
that the name Kelvin&#39;s Snake Oil was too disreputable,
so they named their use of it Kelvin&#39;s Escape.
?P
And then the spell became widely known to everyone
when it became the reason for the failure of several public executions.

?P
The fox mage Kelvin was not so pleased that his spell became known
as &quot;Kelvin&#39;s Escape&quot;,
but he shrugged and used that name to publish a pamphlet about
the spell and the defenses against it,
before returning to his pursuit of more esoteric magic.

?P
In a footnote in his pamphlet, Kelvin mentions that he&#39;s thought of
a way for this spell to be cast by only one mage instead of three,
but there&#39;s insufficient room in the pamphlet to describe it.

?P
This footnote has been the subject of much speculation over the years,
but any time a mundane gathers the courage
to ask a professional mage about it,
the mage thinks for a moment, then says,
&quot;Oh, of course, it&#39;s obvious.&quot; And refuses to explain it.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1s Younger Info 3]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="455" name="n1s Younger Info 3" tags="mt-ready" position="2775,1175" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Kelvin the Younger was not known as &quot;the Younger&quot; during his life.
Many years after his death, an unrelated fox mage took on the name
Kelvin the Elder.
When that new Kelvin became infamous for dying unexpectedly,
the name Kelvin became ambiguous and problematic.
&quot;Kelvin&#39;s Escape&quot; in particular was considered by many mages
to be tastelessly ironic.

?P
In the third session of the second attempt at organizing
a council of mage councils,
the members voted on whether they should change the names
of the original Kelvin&#39;s spells or Kelvin the Elder&#39;s.
Most of the council felt that Kelvin the Elder&#39;s infamy was too
important to reduce him to merely &quot;Elder&quot;,
so the vote decided that Kelvin would be known as &quot;the Younger&quot;,
and the names of all of his spells would be changed from Kelvin&#39;s
to Younger&#39;s.

?P
Thus, the brilliant fox mage Kelvin,
who became known as Kelvin the Younger,
created a spell that was originally called
Kelvin&#39;s Rossum&#39;s Snake and Oil of Dragon,
which was shortened to Kelvin&#39;s Snake Oil,
and then became famous as Kelvin&#39;s Escape,
but it&#39;s now professionally known as Younger&#39;s Escape.

?P
That was the decree. In practice, most mages disregard decorum and
still call it Kelvin&#39;s Escape, with a laugh.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_Younger&gt;&gt;
  &lt;&lt;mta &quot;n1s Cast Younger 1&quot;&gt;&gt;Return&lt;&lt;/mta&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="456" name="n1s Zero Bound" tags="mt-ready" position="4400,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_magicPhase `MP_wantPass`&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;em-assert !$n_candleHorny || $n_ivexNear || $n_ivexGone&gt;&gt;

Unexpectedly, the Sprite whispers,
&lt;span class=sprite-q&gt;&quot;Please say your password, ?master&quot;&lt;/span&gt;

?P
&lt;&lt;if $n_candleHorny&gt;&gt;
  Nero is delighted! He still has a chance!
  He vows to make the best of this unexpected reprieve.

  ?P
  He will offer the Sprite &lt;em&gt;every&lt;/em&gt; password that he can.
  He will slowly and gently seduce the Sprite to his cause.

&lt;&lt;else&gt;&gt;
  Nero is delighted! He has another chance!
  Apparently,
  &lt;em&gt;zero tries remaining&lt;/em&gt;
  does not actually
  prevent him from trying another password.

  ?P
  This is a fairly common problem that students have
  when instructing a Sprite.
  Telling a Sprite a sequence of steps is straightforward,
  but once the instructions involve steps that repeat
  or vary under different conditions,
  it becomes difficult to instruct the Sprite
  to perform an intended task correctly.
  Success usually requires testing the Sprite quite
  thoroughly, and scolding it for any mistakes.

  ?P
  Ivex is clearly not very skilled at instructing Sprites.
  What a lucky break!

  ?P
  Since the Sprite did not stop asking at zero,
  it&#39;s likely that it will &lt;em&gt;never&lt;/em&gt; stop asking.
  This mistake will allow Nero to make as many guesses
  as he wants!
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="457" name="n1x Actions" tags="mt-ready inclusion" position="5275,1000" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;if _patience &lt;= 0&gt;&gt;
  /* hacky way of getting Sprite dialog. */
  &lt;&lt;if $n_mirrorTapped &amp;&amp; !_hideImpatientSprite&gt;&gt;
    &lt;&lt;include &quot;n1s Sprite&quot;&gt;&gt;
    ?P
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;set $n_magicAction = &quot;&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;if $n_candleHorny&gt;&gt;
    &lt;&lt;include &quot;n1y Horny Look&quot;&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;include [[n1x Look Normal]]&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;include &quot;n1s Magic&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="458" name="n1x Bookcases" tags="mt-ready" position="5700,1100" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;

&lt;&lt;set _books = $n_wandExploded ? &quot;scorched books&quot; : &quot;books&quot;&gt;&gt;

The room&#39;s walls are lined with several
&lt;&lt;= $n_wandExploded ? &quot;singed&quot; : &quot;wooden&quot;&gt;&gt;
bookcases that are identical in size and construction.

&lt;&lt;if $n_wandRanAway&gt;&gt;
  The one farthest away has an
  &lt;&lt;mt-seen $n_dimWand&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Wand&quot;&gt;&gt;alarming magic wand&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;em&gt;growling&lt;/em&gt; from the space underneath the bottom shelf.
  ?P
  &lt;&lt;if $n_mageSight&gt;&gt;
    All of the bookcases glow strongly with exotic energy,
    and most of them
  &lt;&lt;else&gt;&gt;
    Most of the bookcases
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $n_candleLit&gt;&gt;
  Many of them are painted the same red as the
  &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;, and
  &lt;&lt;if $n_mageSight&gt;&gt;
    all of them glow strongly with exotic energy.
    Most of them
  &lt;&lt;else&gt;&gt;
    most of them
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $n_bookcasesLanced&gt;&gt;
  The material appears to be wood, but it was not damaged
  by any force that Nero could apply.
  ?P
  All of the bookcases glow strongly with exotic energy,
  and most of them

&lt;&lt;elseif $n_wandExploded&gt;&gt;
  The material appears to be wood, but the blackened areas
  are just residue on the surface. The wand&#39;s explosion does
  not seem to have damaged the bookcases at all.
  ?P
  All of them glow strongly with exotic energy,
  and most of them

&lt;&lt;elseif $n_mageSight&gt;&gt;
  All of them glow strongly with exotic energy,
  and most of them

&lt;&lt;else&gt;&gt;
  Most of them
&lt;&lt;/if&gt;&gt;

are filled with many

&lt;&lt;if $n_wandExploded&gt;&gt;
  &lt;&lt;mt-seen $n_dimBooks&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Books&quot;&gt;&gt;scorched books&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  which flicker with exotic energy.
  Some of the books still have flames licking their spines.

&lt;&lt;elseif $n_mageSight&gt;&gt;
  &lt;&lt;mt-seen $n_dimBooks&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Books&quot;&gt;&gt;books&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  that pulse with exotic energy.

&lt;&lt;else&gt;&gt;
  &lt;&lt;mt-seen $n_dimBooks&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Books&quot;&gt;&gt;books&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  that are neatly shelved and
  apparently arranged by color.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_coinsInBook&gt;&gt;
  One of the books has been hollowed out to conceal
  a mangled orgy of lewd coins.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_bookcasesLanced || $n_booksLanced&gt;&gt;
  ?P
  Nero has emptied several shelves of books
  into a
  &lt;&lt;= $n_booksLanced ? &quot;shredded&quot; : &quot;messy&quot;&gt;&gt; heap
  &lt;&lt;if $n_bookPileBurned&gt;&gt;
    that&#39;s slightly burned and smoldering.
  &lt;&lt;elseif $n_bookShredsBurned&gt;&gt;
    that is now a smoky pile of ashy remnants.
  &lt;&lt;else&gt;&gt;
    on the floor.
  &lt;&lt;/if&gt;&gt;
  The books still in the shelves are apparently arranged
  by color.

&lt;&lt;elseif $n_mageSight&gt;&gt;
  Strangely, the books appear to be shelved by color.
&lt;&lt;/if&gt;&gt;

?P
The bookcase nearest to the desk is an exception.
Only one of its shelves has books, which are placed in
&lt;&lt;= $n_pornLanced ? &quot;a tidy&quot; : &quot;an untidy&quot;&gt;&gt;
&lt;&lt;if $n_wandExploded &amp;&amp; !$n_pornSnuffed&gt;&gt;
  pile that&#39;s slowly burning.
&lt;&lt;else&gt;&gt;
  pile.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_coinsInPorn&gt;&gt;
  One of the books has been hollowed out to conceal
  a mangled orgy of lewd coins.
  ?P
&lt;&lt;/if&gt;&gt;

&lt;&lt;run
  _objs = [];

  if ($n_wandExploded) {
    /* nothing */
  } else if ($n_wandTubeShot) {
    _objs.push(`&lt;&lt;mt-seen $n_dimWand&gt;&gt;`
      + `a [\[bare magic wand|n1x Wand]]`
      + `&lt;&lt;/mt-seen&gt;&gt;`);
  } else if (!$n_wandRanAway &amp;&amp; !$n_wandUsed) {
    _objs.push(`&lt;&lt;mt-seen $n_dimWand&gt;&gt;`
      + `a [\[magic wand|n1x Wand]]`
      + `&lt;&lt;/mt-seen&gt;&gt;`);
  }

  if (!$n_coinsLanced) {
    _coins = $n_wandExploded ? &quot;jumble of coins&quot; : &quot;stack of coins&quot;;
    _objs.push(`&lt;&lt;mt-seen $n_dimCoins&gt;&gt;`
      + `a [\[_coins|n1x Coins]]`
      + `&lt;&lt;/mt-seen&gt;&gt;`);
  }
&gt;&gt;
&lt;&lt;= _objs.length === 0 ? &quot;Another shelf is empty.&quot;
  : _objs.length === 1 ? `Another shelf has ${_objs[0]}.`
  : `Another shelf has ${_objs[0]} and ${_objs[1]}.`
&gt;&gt;

The rest of the shelves are taken up by plain wooden
storage boxes with simple lids, identical and unlabeled.
&lt;&lt;if $n_free&gt;&gt;
  ?P
  &lt;&lt;if $n_bookcasesSearched&gt;&gt;
    Nero vividly remembers his futile
    [[search of the boxes|n2x Bookcases Memory]].
    The missing heirloom is elsewhere.
  &lt;&lt;else&gt;&gt;
    Could Ivex have hidden the missing heirloom in one of those boxes?
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_wandRanAway&gt;&gt;
  /* nothing */
&lt;&lt;elseif $n_wandUsed &amp;&amp; !$n_wandTubeShot&gt;&gt;
  ?P
  &lt;&lt;mt-seen $n_dimWand&gt;&gt;
    The &lt;&lt;mta-no-loop &quot;n1x Wand&quot;&gt;&gt;distressing magic wand&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  is on the floor, far away from the bookcase it came from.
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if $n_free &amp;&amp; !$n_bookcasesSearched&gt;&gt;
    &lt;li&gt;[[Search the boxes.|n2x Bookcases Search]]&lt;/li&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_tooClever &amp;&amp; !$n_bookcasesLanced&gt;&gt;
    &lt;li&gt;[[Destroy some bookcases with Nackle.|n2x Lance Bookcases]]&lt;/li&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_bookcasesViewed = true;
  $n_dimBookcases = !_hasAction;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="459" name="n1x Books Ask" tags="mt-ready" position="6850,175" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore-if n_ivexReceptive n_candleLit&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

Nero thinks an indirect approach is best for this task.
?P
&lt;&lt;if $n_abused || $n_subby&gt;&gt;
  He asks tentatively, &quot;Did
  &lt;&lt;set _pw = &quot;Did Your Name Use to Be Ivan&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
  He asks, &quot;Wait, did
  &lt;&lt;set _pw = &quot;Wait Did Your Name Use To Be Ivan&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
your name use to be Ivan?
Were you that shy panther that always sat in the back of the room
in Miss Marble&#39;s class at Elementary High School?&quot;

?P
Ivex
&lt;&lt;= $n_ivexReceptive ? &quot;laughs&quot; :
  $n_candleLit ? &quot;growls in his mask&quot; : &quot;growls&quot;&gt;&gt;.
&quot;I was no shy student. I was class president,
and I burned my high school down to rubble.
They still do not know it was me.&quot;

?P
The wolf has doubts about that story, but he does not want to
challenge it. &quot;I must be mistaken, I apologize.&quot;

&lt;&lt;mf-pass _pw&gt;&gt;&lt;&lt;/mf-pass&gt;&gt;

?P
This does not seem like a fruitful line of questioning.
Nero quickly tries to change the subject.
&quot;What were you just asking me?&quot;

?P
$n_afterAction

&lt;&lt;set $n_booksAsked = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="460" name="n1x Books" tags="mt-ready maybe-password" position="6725,375" size="100,200">&lt;&lt;nobr&gt;&gt;

&lt;&lt;cv-try n_magicPhase `MP_beforeCast` `MP_wantPass` `MP_contact` `MP_drained`&gt;&gt;

&lt;&lt;if $n_wandExploded&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  &lt;&lt;vi-always n_mageSight true&gt;&gt;
  &lt;&lt;if $n_bookShredsBurned&gt;&gt;
    The shredded books on the floor are now a pile of ash holding
    burnt remnants that are still smoking.
  &lt;&lt;elseif $n_bookPileBurned&gt;&gt;
    The jumble of books on the floor are charred and still smoldering.
  &lt;&lt;elseif $n_booksLanced&gt;&gt;
    Many charred books are now a heap of shredded remnants on the floor.
  &lt;&lt;elseif $n_bookcasesLanced&gt;&gt;
    Many charred books are now an untidy heap on the floor.
  &lt;&lt;/if&gt;&gt;

  A few books on the shelves are slowly burning.
  Most are damaged or blackened by the explosion,
  which unfortunately does not hide the fact that
  they are shelved by color.
  ?P
  Strangely,

&lt;&lt;elseif $n_bookcasesLanced || $n_booksLanced&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  &lt;&lt;vi-always n_mageSight true&gt;&gt;
  The books in the
  &lt;&lt;= $n_booksLanced ? &quot;shredded&quot; : &quot;disorderly&quot;&gt;&gt;
  heap on the floor all shimmer with exotic energy.
  The ones still in the bookcases
  &lt;&lt;if $n_coinsInBook&gt;&gt;
    (including the one concealing an orgy of mangled coins)
  &lt;&lt;/if&gt;&gt;
  also have magic,
  and they appear to be shelved by color.
  ?P
  Even stranger,

&lt;&lt;else&gt;&gt;
  &lt;&lt;if $n_coinsInBook&gt;&gt;
    All the books (including the one concealing an orgy of mangled coins)
  &lt;&lt;else&gt;&gt;
    All the books in the bookcases
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if $n_mageSight&gt;&gt;
    shimmer with exotic energy and
  &lt;&lt;/if&gt;&gt;
  appear to be shelved by color.
  &lt;&lt;if $n_candleLit&gt;&gt;
    One bookcase is entirely filled with books that are
    the same red as the
    &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;.
  &lt;&lt;/if&gt;&gt;
  ?P
  Even stranger,
&lt;&lt;/if&gt;&gt;

the books
&lt;&lt;= $n_booksSearched || $n_booksLanced ? &quot;are all&quot; : &quot;all seem to be&quot;&gt;&gt;
duplicate copies of the same few books.
Nero
&lt;&lt;= $n_booksSearched || $n_booksLanced
  ? &quot;is quite familiar with&quot; : &quot;recognizes&quot;&gt;&gt;
one: Cadmia&#39;s Compendium of Charms.
It&#39;s an introductory-level text that&#39;s also useful outside the classroom.

&lt;&lt;if !$n_booksViewed&gt;&gt;
  Updated editions of it are regularly published each year
  by Cadmia&#39;s anonymous jailer.
  ?P
  It&#39;s unclear why Ivex would need or want tens of copies of
  &lt;em&gt;the same edition&lt;/em&gt; of that book.
  Nero has seen many residences with libraries of books that are clearly
  chosen for their impressive ambience, rather than being treasured
  for their contents and actually read from time to time.
  If that&#39;s what Ivex is doing, his attempt is quite clumsy.
  No one would be impressed by the obvious repetition of the book spines.
&lt;&lt;/if&gt;&gt;

?P
Aside from the bookcases of repetition,
a shelf near the desk has
&lt;&lt;if $n_pornLanced&gt;&gt;
  &lt;&lt;vi-always n_ivexGone true&gt;&gt;
  a &lt;&lt;= $n_wandExploded ? &quot;scorched&quot; : &quot;tidy&quot;&gt;&gt;
  stack of pornography that Nero
  [[remembers all too well|n2x Books Remember]].
  But he giggles again at the thought of Ivex
  reaching for one in a mood of sexual arousal,
  only to find that the pictures inside have been
  mutilated beyond recognition.
  &lt;&lt;if $n_coinsInPorn&gt;&gt;
    And perhaps the one the panther chooses will be the one
    with the mangled orgy of coins in it.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $n_booksSearched&gt;&gt;
  &lt;&lt;vi-always n_free true&gt;&gt;
  &lt;&lt;vi-always n_ivexGone true&gt;&gt;
  &lt;&lt;= $n_wandExploded ? &quot;a scorched&quot; : &quot;an untidy&quot;&gt;&gt;
  stack of books that
  &lt;&lt;if $n_extraHorny&gt;&gt;
    Nero [[remembers vividly|n2x Books Remember]].
    His cock twitches and urges him to search the books more thoroughly,
    &lt;&lt;if $n_coinsInPorn&gt;&gt;
      and perhaps also explore the mangled orgy of coins that&#39;s
      hidden within one volume,
    &lt;&lt;/if&gt;&gt;
    but the wolf reminds his cock that there are
    more important things to consider right now.
  &lt;&lt;else&gt;&gt;
    Nero [[regrets examining|n2x Books Remember]].
    &lt;&lt;if $n_coinsInPorn&gt;&gt;
      But he giggles at the thought of Ivex reaching for
      one in a mood of sexual arousal, only to find that
      the center has been hollowed out to hold a mangled
      orgy of coins.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  &lt;&lt;= $n_wandExploded ? &quot;a scorched&quot; : &quot;an untidy&quot;&gt;&gt;
  stack of books that
  do not seem to have duplicates.
  The top one has a
  &lt;&lt;= $n_wandExploded ? &quot;burnt&quot; : &quot;plain&quot;&gt;&gt;
  brown cover with no indication of its contents.
  The book below that has its spine facing away.
  Nero cannot see what the title is,
  but the lower part of the front cover is visible,
  and the words &lt;span class=nobr&gt;&quot;Class of 621&quot;&lt;/span&gt;
  are printed on it.

  ?P
  It looks like a yearbook from a school that Ivex attended.
  The year seems right. Nero remembers from the dossier
  that Ivex started Ransamaran Ivory in the autumn of 621.
  And it&#39;s curious that the investigator was unable to find any record of
  Ivex&#39;s life before that.

  &lt;&lt;if $n_free&gt;&gt;
    &lt;&lt;vi-always n_ivexGone true&gt;&gt;
    The yearbook might provide some useful clues about Ivex&#39;s earlier life.

  &lt;&lt;elseif MT.passWanted()&gt;&gt;
    ?P
    &lt;&lt;if $n_booksAsked&gt;&gt;
      It&#39;s possible the name of that earlier school is
      the password the Sprite wants,
      but the panther told a strange and implausible story
      when Nero tried to ask about it.
      &lt;&lt;set _oneLeft = JSON.parse($n_passTried || &quot;[]&quot;).length === 2&gt;&gt;
      &lt;&lt;if !$n_ivexGone &amp;&amp; _oneLeft&gt;&gt;
        ?P
        The wolf considers asking again anyway,
        but he expects that Ivex will invent a fictitious
        school name for his fictitious crime.
        It&#39;s unlikely to be the right password.
      &lt;&lt;else&gt;&gt;
        Hopefully the password is something else.
      &lt;&lt;/if&gt;&gt;
    &lt;&lt;elseif $n_ivexGone&gt;&gt;
      The name of that earlier school might be the password
      that the Sprite wants,
      but Nero sees no way of learning its name now that Ivex is gone.
      Hopefully the password is something else.
    &lt;&lt;else&gt;&gt;
      The name of that earlier school might be the password
      that the Sprite wants.
      Perhaps Nero can coax Ivex into revealing the name.
    &lt;&lt;/if&gt;&gt;

  &lt;&lt;else&gt;&gt;
    &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
    ?P
    Well, the yearbook is perhaps something to look at once Nero is free,
    but it&#39;s not particularly helpful right now.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if !$n_booksAsked&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the books.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;elseif MT.passWanted()&gt;&gt;
      &lt;&lt;mtl [[n1x Books Ask]]&gt;&gt;Ask Ivex about his earlier school.&lt;&lt;/mtl&gt;&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the books.&quot; &quot;not interested&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_free &amp;&amp; !$n_booksSearched&gt;&gt;
    &lt;&lt;mtl [[n2x Books Search 1]]&gt;&gt;Search the books.&lt;&lt;/mtl&gt;&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_tooClever&gt;&gt;
    &lt;&lt;if !$n_booksLanced&gt;&gt;
      &lt;li&gt;[[Destroy some books with Nackle.|n2x Lance Books]]&lt;/li&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if $n_booksSearched &amp;&amp; !$n_pornLanced&gt;&gt;
      &lt;li&gt;[[Destroy Ivex&#39;s porn with Nackle.|n2x Lance Porn]]&lt;/li&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;pw-found `PW_621`&gt;&gt;
&lt;&lt;run
  $n_dimBooks = !_hasAction;
  $n_booksViewed = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="461" name="n1x Bottle Ask Name" tags="mt-ready" position="6850,1750" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

The wolf hesitates. Does he &lt;em&gt;really&lt;/em&gt; want to ask the
&lt;&lt;= $n_subby ? &quot;domineering&quot;
  : $n_abused ? &quot;brutal&quot;
  : $n_naked ? &quot;lecherous&quot;
  : &quot;peculiar&quot;&gt;&gt;
panther
about the enormous horse cock?

?P
Of course not.
&lt;&lt;if MP_wantName === $n_magicPhase&gt;&gt;
  But there&#39;s no other option.
&lt;&lt;else&gt;&gt;
  But the Nackle&#39;s Poltergeist anomaly will haunt him forever.
&lt;&lt;/if&gt;&gt;
Before Nero can change his mind again, he quickly blurts out,
&quot;Is that Nackle&#39;s Device?&quot;

?P
&lt;&lt;if $n_ivexReceptive&gt;&gt; /* ignore ivexWasReceptive */
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  Ivex grins. &quot;I&#39;m glad you recognize it!&quot;

&lt;&lt;elseif $n_candleLit&gt;&gt;
  Ivex&#39;s ears perk up, and he laughs through the grinning mask.

&lt;&lt;else&gt;&gt;
  Ivex sneers at the wolf. &quot;I&#39;m amazed that you recognize it.&quot;
&lt;&lt;/if&gt;&gt;

?P
He moves to the enormous bottled horse cock
and grasps the neck of the bottle, running
his thumb slowly along the rim in a disturbing way.
&lt;&lt;if $n_mageSight&gt;&gt;
  Bright arcs of exotic energy flow between
  his hand and the fluid in the bottle.
&lt;&lt;/if&gt;&gt;

?P
&quot;This is Lance Rockhard. And it &lt;em&gt;is&lt;/em&gt; based on
Nackle&#39;s Poltergeist Device. But as I&#39;m sure you can see,
I&#39;ve improved it in several ways.
I&#39;ve increased the &lt;em&gt;length&lt;/em&gt; of the spell,
augmented its &lt;em&gt;thrust&lt;/em&gt;,
and perhaps soon I will show you what its &lt;em&gt;girth&lt;/em&gt; feels like.&quot;
?P
The spell&#39;s &lt;em&gt;girth&lt;/em&gt;? Whatever does that mean?
?P
Nero deeply regrets asking about the bottle.
He quickly tries to change the subject.
&lt;&lt;if $n_abused || $n_subby&gt;&gt;
  &quot;Yes of course. Apologies for the interruption.
  What were you saying before?&quot;
&lt;&lt;else&gt;&gt;
  &quot;Of course. Now what was it that you were saying?&quot;
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;pw-found `PW_lance`&gt;&gt;
&lt;&lt;run
  delete $n_ivexNear;
  $n_banter = true;
  $n_bottleNackleKnown = true;
  $n_bottleNameKnown = true;
  $n_bottleTouched = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="462" name="n1x Bottle Ask Touch" tags="mt-ready" position="6850,1875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;vi-always n_magicPhase `MP_wantTouch`&gt;&gt;

It certainly makes sense that the Sprite would ask Nero to
touch the bottle before using the Nackle that&#39;s in it.
He starts to speak,
&quot;I have another question about&amp;mdash;&quot; but then hesitates again.

?P
Ivex
&lt;&lt;if $n_candleLit&gt;&gt;
  growls in his mask. &quot;What useless distraction are you trying now?&quot;
&lt;&lt;elseif $n_ivexReceptive&gt;&gt; /* ignore ivexWasReceptive */
  smiles. &quot;Of course. What is it you want to know?&quot;
&lt;&lt;else&gt;&gt;
  frowns. &quot;You seem to be confused about whose interrogation this is.&quot;
&lt;&lt;/if&gt;&gt;

?P
The wolf has realized that even if he doesn&#39;t &lt;em&gt;himself&lt;/em&gt; say the name
&quot;Lance Rockhard&quot; again,
he will have to endure Ivex saying that name with
dreadfully suggestive undertones.

?P
While it might be necessary, it&#39;s not &lt;em&gt;certain&lt;/em&gt;.
There are other holes that could be the one that the Sprite wants him
to touch.
The wolf may have to &lt;em&gt;eventually&lt;/em&gt; ask about the bottle,
but he can postpone it until there are no other options.
?P

He shakes his head, &quot;Never mind. What were you asking me?&quot;

?P
$n_afterAction

&lt;&lt;set $n_bottleHoleAvoided = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="463" name="n1x Bottle" tags="mt-ready has-hole" position="6725,1700" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_free&gt;&gt;
&lt;&lt;vi-always-if n_wandExploded n_mageSight true&gt;&gt;

&lt;&lt;cv-ignore n_kwAnnounce&gt;&gt;
&lt;&lt;cv-ignore n_candleLit&gt;&gt; &lt;!-- trivial variation --&gt;
&lt;&lt;cv-ignore n_mageSight&gt;&gt; &lt;!-- trivial variation --&gt;
&lt;&lt;cv-ignore n_abused n_naked&gt;&gt; &lt;!-- trivial variations --&gt;
&lt;&lt;cv-ignore n_subby&gt;&gt; &lt;!-- minor variations --&gt;
&lt;&lt;cv-try n_magicPhase
  `MP_beforeCast` `MP_wantDevice` `MP_wantName` `MP_wantPass`
  `MP_contact` `MP_tapLost`&gt;&gt;
  
&lt;&lt;kw-announce&gt;&gt;

Sitting on top of
&lt;&lt;if $n_candleLit&gt;&gt;
  a cabinet, next to the one that the
  &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;
  came from,
&lt;&lt;else&gt;&gt;
  an &lt;&lt;= $n_cabinetsMageSight ? &quot;uncolored&quot; : &quot;unpainted&quot;&gt;&gt; wooden cabinet
&lt;&lt;/if&gt;&gt;
is a &lt;&lt;= $n_wandExploded ? &quot;cracked&quot; : &quot;clear&quot;&gt;&gt;
glass bottle of unusually large size.
But what&#39;s most unusual about the bottle is what&#39;s inside it,
which appears to be a horse&#39;s member larger than Nero&#39;s
&lt;&lt;if $n_wandExploded&gt;&gt;
  forearm.
&lt;&lt;else&gt;&gt;
  forearm, submerged in
  &lt;&lt;if $n_mageSight&gt;&gt;
    a light yellow liquid that pulses with exotic energy.
  &lt;&lt;else&gt;&gt;
    some light yellow liquid.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
The horse cock is silvery,
so it isn&#39;t from a living specimen.
Probably.

&lt;&lt;if $n_wandExploded&gt;&gt;
  ?P
  The books that Nero placed around the bottle are partly
  burned by the explosion and partly soaked by the light yellow liquid
  that has completely drained out through a crack in the bottle.
&lt;&lt;/if&gt;&gt;

?P
The bottle&#39;s prominent placement in the room raises
several questions that the wolf
&lt;&lt;if $n_subby&gt;&gt;
  is curious about.
&lt;&lt;elseif $n_abused &amp;&amp; $n_banter &amp;&amp; !$n_ivexGone&gt;&gt;
  is afraid Ivex might gladly answer.
&lt;&lt;elseif $n_naked || $n_abused&gt;&gt;
  is &lt;em&gt;quite&lt;/em&gt; sure that he does &lt;em&gt;not&lt;/em&gt; want answered.
&lt;&lt;else&gt;&gt;
  is not sure he wants answered.
&lt;&lt;/if&gt;&gt;

Such as:

&lt;&lt;script&gt;&gt;
  const V = State.variables;
  const q = [];
  
  if (V.n_bottleNameKnown) {
    q.push(`Why did Ivex give the name Lance &lt;em&gt;Rock&lt;/em&gt;-hard`
      + ` to a giant &lt;em&gt;metal&lt;/em&gt; cock?`);
  }

  if (!V.n_bottleNackleKnown) {
    q.push(`And why would a bottled metallic horse dildo have`
      + ` &lt;&lt;mt-seen false&gt;&gt;`
      + ` [[magic glyphs|n1x Nackle Brief]] inscribed on it?`
      + ` &lt;&lt;/mt-seen&gt;&gt;`);

  } else {
    if (MP_wantDevice &lt;= V.n_magicPhaseReached) {
      q.push(`Why did Ivex choose a bottled metallic horse cock as the anchor`
        + ` &lt;&lt;mt-seen $kn_Nackle&gt;&gt;`
        + ` for [[Nackle&#39;s Poltergeist Device|n1x Nackle Brief]]?`
        + ` &lt;&lt;/mt-seen&gt;&gt;`);
    
      if (V.n_wandExploded) {
        q.push(`Why was the bottle filled with light yellow liquid`
          + ` that isn&#39;t necessary for contact with Nackle?`);
      }

      if (MP_wantDevice === V.n_magicPhase) {
        q.push(`Is this a device that the Sprite can contact?`);
        
      } else if (MP_wantDevice === V.n_magicPhaseReached) {
        q.push(`Was this a device that the Sprite could have contacted?`);
      }
      
    } else {
      q.push(`How does Ivex expect to use`
        + ` &lt;&lt;mt-seen $kn_Nackle&gt;&gt;`
        + ` [[Nackle&#39;s Poltergeist Device|n1x Nackle Brief]]`
        + ` &lt;&lt;/mt-seen&gt;&gt;`
        + ` when it&#39;s anchored on a metallic horse cock`
        + ` that can&#39;t be touched?`);
    }
    
    if (MP_wantName &lt;= V.n_magicPhaseReached) {
      q.push(`Why does Ivex have more than one Nackle&#39;s device in this room?`);
      q.push(`Is there &lt;em&gt;another&lt;/em&gt; enormous bottled cock`
        + ` in a cabinet somewhere?`);
    }

    if (V.n_tooClever) {
      /* nothing */
    
    } else if (V.n_free) {
      if (MP_contact === V.n_magicPhaseReached) {
        q.push(`Could Nero have used Nackle to grab the letter opener`
          + ` &lt;em&gt;before&lt;/em&gt; breaking the mirror?`);
      } else {
        q.push(`Could Nero have used Nackle to grab`
          + ` the letter opener earlier and escape more quickly?`);
      }
    } else if (MP_beforeCast === V.n_magicPhase) {
      /* nothing */

    } else if (V.n_deskViewed &amp;&amp; MP_wantDevice &lt;= V.n_magicPhaseReached) {
      q.push(`And will the wolf be able to use the device to grab the sharp`
        + ` &lt;&lt;mt-seen $n_dimKnife&gt;&gt;`
        + ` &lt;&lt;mta-no-loop &quot;n1x Knife&quot;&gt;&gt;letter opener&lt;&lt;/mta-no-loop&gt;&gt;?`
        + ` &lt;&lt;/mt-seen&gt;&gt;`);

    } else if (V.n_deskViewed) {
      q.push(`And is there some way the wolf can use use the device`
        + ` to grab the`
        + ` &lt;&lt;mt-seen $n_dimKnife&gt;&gt;`
        + ` &lt;&lt;mta-no-loop &quot;n1x Knife&quot;&gt;&gt;letter opener&lt;&lt;/mta-no-loop&gt;&gt;?`
        + ` &lt;&lt;/mt-seen&gt;&gt;`);

    } else {
      q.push(`And is there some way the wolf can use the device to`
        + ` grab some tool that will help him escape?`);
    }
  }
  
  /* add items to the front */
  if (q.length &lt; 4) {
    q.unshift(`Is it appropriate to call something of such`
      + ` enormous size a dildo?`);
  }
  if (q.length &lt; 5) {
    q.unshift(`What magic was used to insert that extremely large item`
      + ` through the bottle&#39;s narrow neck?`);
  }
  if (MP_wantTouch === V.n_magicPhaseReached) {
    const wants = MP_wantTouch === V.n_magicPhase ? &quot;wants&quot; : &quot;wanted&quot;;
    q.unshift(`Is the bottle&#39;s opening the hole that the Sprite`
      + ` ${wants} him to touch?`);
  }

  $(output).wiki(`&lt;ul&gt;&lt;li&gt;${q.join(&quot;&lt;/li&gt;&lt;li&gt;&quot;)}&lt;/li&gt;&lt;/ul&gt;`);

&lt;&lt;/script&gt;&gt;

&lt;!--
  Any time &lt;= wantName, can learn name from normal ask or horny ask.
  At wantName, need name to go to wantTouch.
  If learned name from horny ask, ivex is gone.
--&gt;
&lt;&lt;em-assert !$n_bottleAskedHorny || $n_ivexGone&gt;&gt;

&lt;&lt;if $n_ivexGone&gt;&gt;
  Nero suspects that Ivex would have been eager
  to talk more about it.
  &lt;&lt;if $n_magicPhase === MP_contact&gt;&gt;
    But answers aren&#39;t necessary to &lt;em&gt;use&lt;/em&gt; the device.
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_tooClever&gt;&gt;
    ?P
    The wolf wishes he could keep Nackle with him when he leaves this room.
    Unfortunately, it takes some time to align Nackle with the fields
    within a room, so even if the bottle were convenient to carry,
    it would not have much use, other than perhaps to throw
    at an enemy to surprise them.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif !$n_bottleNackleKnown&gt;&gt;
  Nero briefly considers asking about the bottle,
  but he&#39;s certain he will regret it.

&lt;&lt;elseif !$n_bottleNameKnown&gt;&gt;
  &lt;&lt;if MP_wantName === $n_magicPhase&gt;&gt;
    The Sprite will not contact the device unless Nero
    tells it this particular device&#39;s name.
    Nero reluctantly considers various conversational
    gambits that might trick Ivex into revealing the name.
  &lt;&lt;else&gt;&gt;
    Nero, against his better judgment,
    considers asking a question out loud.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif MP_wantTouch === $n_magicPhase&gt;&gt;
  &lt;&lt;if $n_bottleHoleAvoided&gt;&gt;
    It will probably be easy to ask Ivex a question that will lead
    him to touch the bottle again.
    And Nero &lt;em&gt;will&lt;/em&gt; do it, if there are no other options.
    But there &lt;em&gt;are&lt;/em&gt; other options. Hopefully.
  &lt;&lt;else&gt;&gt;
    When Nero had asked before,
    Ivex had grasped the neck of the bottle with pride.
    Perhaps he can be tricked into touching it again.
    &lt;&lt;if $n_subby&gt;&gt;
      Nero hesitates.
      Does he really want to hear Ivex speak
      more strange innuendo?
    &lt;&lt;else&gt;&gt;
      Nero hesitates.
      Does he really want to give
      the perverted panther more opportunity to
      speak uncomfortably strange innuendo?
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  &lt;&lt;if $n_subby&gt;&gt;
    But when Nero asked about
    the bottle earlier,
    Ivex&#39;s response was more lewd than informative,
    and it seems unlikely he&#39;ll respond differently just yet.
    Nero will have to wait.
  &lt;&lt;else&gt;&gt;
    Ivex was obnoxiously lewd when Nero asked about
    the bottle earlier.
    The wolf does &lt;em&gt;not&lt;/em&gt; want to bring it up again.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if !$n_bottleNameKnown&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the bottle.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;elseif $n_bottleNackleKnown&gt;&gt;
      &lt;&lt;mtl [[n1x Bottle Ask Name]]&gt;&gt;
        Ask Ivex about the bottle, reluctantly.
      &lt;&lt;/mtl&gt;&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the bottle.&quot; &quot;no way&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_bottleNackleKnown &amp;&amp; MP_wantDevice === $n_magicPhase&gt;&gt;
    &lt;&lt;mtl [[n1s Say Device]]&gt;&gt;
      Tell the Sprite,
      &quot;&lt;&lt;= $n_rememberPlease ? &quot;Please, &quot; : &quot;&quot;&gt;&gt;Nackle&#39;s
      Poltergeist Device.&quot;
    &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;


  &lt;&lt;if $n_bottleNameKnown &amp;&amp; MP_wantName === $n_magicPhase&gt;&gt;
    &lt;&lt;mtl &quot;n1s Say Lance&quot;&gt;&gt;
      Tell the Sprite, &quot;Please, Lance Rockhard.&quot;
    &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_bottleNameKnown &amp;&amp; MP_wantTouch === $n_magicPhaseReached&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex again about the bottle.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;elseif $n_bottleHoleAvoided&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex again about the bottle.&quot; &quot;never&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl [[n1x Bottle Ask Touch]]&gt;&gt;
        Ask Ivex again about the bottle.
      &lt;&lt;/mtl&gt;&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_bottleViewed = true;
  $n_dimBottle = !_hasAction;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="464" name="n1x Cabinets" tags="mt-ready" position="5700,250" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;

&lt;&lt;em-assert $n_mageSight &amp;&amp; $n_free ? $n_tooClever : true&gt;&gt;
&lt;&lt;em-assert $n_cabinetsMageSight &amp;&amp; !$n_free ? $n_mageSight : true&gt;&gt;

&lt;&lt;if $n_mageSight&gt;&gt;
  Against the walls of the room are several cabinets that
  are identical in shape and size, but colored differently,
  with distinctly colored drawers that are all closed.
  &lt;&lt;if $n_candleLit&gt;&gt;
    The drawer that the
    &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;
    came from is red, and its cabinet is also red.
    ?P
  &lt;&lt;/if&gt;&gt;
  The cabinets appear to be made of wood,
  &lt;&lt;if $n_wandExploded&gt;&gt;
    but they were not damaged by
    the wand&#39;s explosion.
    The blackened areas are surface residues that wipe off easily,
    and the bright colors beneath
  &lt;&lt;else&gt;&gt;
    but the colors
  &lt;&lt;/if&gt;&gt;
  seem to be &lt;em&gt;in&lt;/em&gt; the wood, not an illusion or paint on top.
  ?P
  One cabinet is different.
  It&#39;s the same size and shape as the others,
  but it does not have magic in its construction,
  and it appears to actually be wood,
  &lt;&lt;= $n_wandExploded ? &quot;slightly burnt,&quot; : &quot;&quot;&gt;&gt;
  without unnatural color.
  ?P
  On top of the uncolored cabinet

&lt;&lt;elseif $n_cabinetsMageSight&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  Against the walls of the room are several cabinets that
  are unlikely to be wood, despite their appearance.
  They&#39;re identical in shape and size, but colored differently.
  Each has distinctly colored drawers that are all closed.
  ?P
  One cabinet is not colored, and it might actually be wood.
  On top of it

&lt;&lt;else&gt;&gt;
  Against the walls of the room are several wooden cabinets that
  seem identical in shape and size, but painted differently.
  Each has distinctly colored drawers that are all closed.
  &lt;&lt;if $n_candleLit&gt;&gt;
    The drawer that the
    &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;
    came from is red, and its cabinet is also red.
  &lt;&lt;/if&gt;&gt;
  ?P
  One of the cabinets is unpainted, and on top of it
&lt;&lt;/if&gt;&gt;

is
&lt;&lt;if $n_wandExploded&gt;&gt;
  &lt;&lt;mt-seen $n_dimBottle&gt;&gt;
    an &lt;&lt;mta-no-loop &quot;n1x Bottle&quot;&gt;&gt;enormous cracked bottle&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;elseif $n_bottleViewed&gt;&gt;
  &lt;&lt;mt-seen $n_dimBottle&gt;&gt;
    a &lt;&lt;mta-no-loop &quot;n1x Bottle&quot;&gt;&gt;bottled horse cock&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;mt-seen $n_dimBottle&gt;&gt;
    an &lt;&lt;mta-no-loop &quot;n1x Bottle&quot;&gt;&gt;enormous glass bottle&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;run
  _penguin =
    $n_wandExploded &amp;&amp; $n_penguinTorn
    ? &quot;flaming, wing-less penguin&quot;
    : $n_wandExploded
    ? &quot;flaming penguin&quot;
    : $n_penguinTorn
    ? &quot;wing-less penguin&quot;
    : &quot;stuffed penguin&quot;;
  _tail =
    $n_coinsLanced
    ? &quot; that&#39;s wearing a mangled-metal gag made from unspeakably lewd coins.&quot;
    : &quot;.&quot;;
&gt;&gt;

&lt;&lt;if $n_penguinFlown&gt;&gt;
  and the absence of a stuffed penguin.
&lt;&lt;else&gt;&gt;
  and a
  &lt;&lt;mt-seen $n_dimPenguin&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Penguin&quot;&gt;&gt;_penguin&lt;&lt;/mta-no-loop&gt;&gt;_tail
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;/if&gt;&gt;

The others are bare.

?P
&lt;&lt;set _cabinet = $n_mageSight || $n_cabinetsMageSight
  ? &quot;uncolored cabinet&quot;
  : &quot;unpainted cabinet&quot;&gt;&gt;

&lt;&lt;if $n_cabinetsLanced &amp;&amp; !$n_cabinetsSearchedPlain&gt;&gt;
  Nero grins at the memory of throwing the drawers of the
  _cabinet out the window.
  ?P
&lt;&lt;/if&gt;&gt;

&lt;&lt;if !$n_free&gt;&gt;
  None of the cabinets seem particularly helpful to Nero in his
  current bound state.

&lt;&lt;elseif $n_cabinetsSearchedPlain&gt;&gt;
  &lt;&lt;vi-always n_cabinetsSearched true&gt;&gt;
  Nero cringes at the memory of what
  &lt;&lt;if $n_cabinetsLanced&gt;&gt;
    was &lt;em&gt;in&lt;/em&gt; the [[_cabinet|n2x Cabinet Memory]]
    before he threw the drawers out the window.
    That was
  &lt;&lt;else&gt;&gt;
    is &lt;em&gt;in&lt;/em&gt; the [[_cabinet|n2x Cabinet Memory]].
    That is
  &lt;&lt;/if&gt;&gt;
  clearly not a place &lt;em&gt;anyone&lt;/em&gt; would store a missing heirloom.
  ?P
  It might be in one of the other cabinets, but Nero does not know how
  to open them.
  &lt;&lt;if $n_tooClever &amp;&amp; !$n_cabinetsLanced&gt;&gt;
    Perhaps Nackle can help.
  &lt;&lt;else&gt;&gt;
    He will have to try later, when he has more magic.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $n_cabinetsSearched&gt;&gt;
  &lt;&lt;vi-always n_cabinetsLanced true&gt;&gt;
  The missing heirloom might be in one of the other
  cabinets, but Nero does not know how
  to open them.
  &lt;&lt;if $n_tooClever &amp;&amp; !$n_cabinetsLanced&gt;&gt;
    Perhaps Nackle can help.
  &lt;&lt;else&gt;&gt;
    He will have to try later, when he has more magic.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  Did Ivex store the missing heirloom in
  &lt;&lt;= $n_cabinetsLanced ? &quot;another&quot; : &quot;a&quot;&gt;&gt;
  cabinet? There are quite a few of them to search,
  but it should not take much time to
  check them all.
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if $n_free &amp;&amp; !$n_cabinetsSearched&gt;&gt;
    &lt;li&gt;[[Search the cabinets.|n2x Cabinet Search]]&lt;/li&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_tooClever &amp;&amp; !$n_cabinetsLanced&gt;&gt;
    &lt;li&gt;[[Destroy some cabinets with Nackle.|n2x Lance Cabinets]]&lt;/li&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_cabinetsViewed = true;
  $n_dimCabinets = !_hasAction;
  if ($n_mageSight) {
    $n_cabinetsMageSight = true;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="465" name="n1x Candle Ask" tags="mt-ready" position="6850,2125" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-always n_candleLit true&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

&lt;&lt;if $n_subby&gt;&gt;
  &quot;About that candle,&quot; says Nero. &quot;The effects are subtle and amazing.&quot;
&lt;&lt;elseif $n_abused&gt;&gt;
  &quot;About that candle...&quot; Nero shakes his head in exaggerated distress.
  &quot;I can feel its effects. It&#39;s too much!&quot;
&lt;&lt;else&gt;&gt;
  &quot;About that candle,&quot; says Nero. &quot;I&#39;m finding the effects quite interesting.&quot;
&lt;&lt;/if&gt;&gt;
Not that the wolf understands what the effects are yet,
but he&#39;s hoping he can lure Ivex into saying more about it.

&lt;&lt;mf-pass &quot;About That Candle&quot;&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
The panther laughs beneath his grinning mask.
&quot;You really haven&#39;t figured out what it is yet?
&lt;&lt;if $n_thief&gt;&gt;
  I&#39;m not too surprised a &lt;em&gt;mage&lt;/em&gt;
  wouldn&#39;t bother to learn herbalism.
  But swindlers and smugglers thrive on it.
  Am I really to believe that you&#39;re a talented thief,
  when all the evidence shows that you&#39;re
  a pathetically incompetent mage?&quot;
&lt;&lt;else&gt;&gt;
  Were you asleep during that lecture?
  Did they even mention herbalism in whatever traveling circus
  gave you a robe and pretended to teach you magic?&quot;
&lt;&lt;/if&gt;&gt;

?P
Nero tries to think of a
&lt;&lt;= $n_subby ? &quot;diplomatic&quot; : $n_abused ? &quot;placating&quot; : &quot;clever&quot;&gt;&gt;
response, but his head is throbbing, and something about the
disdain in Ivex&#39;s voice is making his stomach flutter.

?P
$n_afterAction

&lt;&lt;set $n_candleAsked = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="466" name="n1x Candle" tags="mt-ready maybe-password" position="6725,2075" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleLit true&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;

&lt;&lt;if $n_mageSight&gt;&gt;
  Exotic magic energy enters the base of the candle&#39;s holder
  and flows up to the flame,
  then disperses outward in a mist-like spray.
  ?P
&lt;&lt;/if&gt;&gt;

The candle is tall and slender, smooth at the top,
but patterned with ridges that bulge and spiral down the
length of its body. Its color is a rich, dark red, like newly
butchered blood, but something about the way it glistens makes
Nero think of something more sensual than meat.

?P
&lt;&lt;if $n_barbsSlow&gt;&gt;
  It&#39;s like the blood on Mica&#39;s face when he...
&lt;&lt;elseif $n_barbsFast&gt;&gt;
  It&#39;s like the taste of Lady Temesca&#39;s lips after she...
&lt;&lt;elseif $n_glitched&gt;&gt;
  It&#39;s like the tip of
  &lt;&lt;glitch-text 3&gt;&gt;
    ?blank&#39;s fascinating ##barbed-1## cock as he...
  &lt;&lt;/glitch-text&gt;&gt;
  &lt;&lt;done&gt;&gt;
    &lt;&lt;script&gt;&gt;
      $(&quot;#glitch-2&quot;).removeClass(&quot;glitch-hidden&quot;).addClass(&quot;glitch-fading-in&quot;);
      setTimeout(() =&gt; $(&quot;#glitch-2&quot;).removeClass(&quot;glitch-fading-in&quot;), 100);
      setTimeout(() =&gt; $(&quot;#glitch-2&quot;).addClass(&quot;glitch-fading-out&quot;), 200);
    &lt;&lt;/script&gt;&gt;
  &lt;&lt;/done&gt;&gt;
&lt;&lt;else&gt;&gt;
  It&#39;s like the panties that the fabulous
  &lt;span class=nobr&gt;Ms. Tara&lt;/span&gt; wore when she...
&lt;&lt;/if&gt;&gt;

?P
Nero&#39;s getting distracted again. He shakes his head to focus.

&lt;&lt;if $n_ivexGone&gt;&gt;
  &lt;!-- nero has already recognized the candle --&gt;
  The insidious vapors emitted by the candle are already
  affecting his ability to concentrate on anything other than his
  sorely deprived cock.
  The wolf had better hurry and find a way to escape
  before he&#39;s completely overwhelmed by lust.
&lt;&lt;else&gt;&gt;
  The intoxicating vapors emitted by the candle&#39;s flame seem to be
  affecting his mind and making it difficult to concentrate on
  outsmarting the
  &lt;&lt;= $n_subby ? &quot;domineering&quot; : $n_abused ? &quot;sadistic&quot; : &quot;obnoxious&quot;&gt;&gt;
  panther.
  &lt;&lt;if $n_candleAsked&gt;&gt;
    ?P
    Ivex had suggested the candle involves herbalism, which is useful
    to know, but not really helpful. Nero considers trying to ask again,
    but he remembers the disdain in Ivex&#39;s earlier answer,
    and the memory sends his mind into a
    confusion of emotions that makes him unable to phrase
    a coherent question about it.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if MT.passWanted()&gt;&gt;
  ?P
  There are many things in the room that have a similar
  shade of red: bookcases and books, cabinets and their drawers,
  even the flamboyant cape that Ivex
  &lt;&lt;if $n_ivexGone&gt;&gt;
    was wearing.
  &lt;&lt;else&gt;&gt;
    is wearing.
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;pw-suggest `PW_red`&gt;&gt;
    It could be his favorite color. Perhaps &quot;Red&quot; is also his password?
  &lt;&lt;pw-another `PW_blood`&gt;&gt;
    &quot;Red&quot; wasn&#39;t the password, but maybe it&#39;s a more specific
    shade of red, like &quot;Blood&quot;?
  &lt;&lt;pw-fail&gt;&gt;
    ?P
    Neither &quot;Red&quot; nor &quot;Blood&quot; were the correct password.
    There are of course
    many other names and shades of red that Nero could try,
    but this seems like a dubious path to pursue.
  &lt;&lt;/pw-suggest&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if !$n_candleAsked&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the candle.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl [[n1x Candle Ask]]&gt;&gt;
        Ask Ivex, &quot;About that candle...&quot;
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if _pwActions != null&gt;&gt;
    _pwActions
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

/* candle is never dimmed */
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="467" name="n1x Coins Ask" tags="mt-ready" position="6350,1550" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;vi-always n_magicPhase `MP_wantTouch`&gt;&gt;

Nero asks, &quot;Are those scalars? I rarely see them.&quot;

?P
The panther seems confused. &quot;What do you mean by... scalars?&quot;

?P
&quot;The coins on that bookshelf. Are they Lapine Republic scalars?&quot;

?P
&lt;&lt;if $n_ivexWasReceptive&gt;&gt;
  Ivex
  &lt;&lt;= $n_candleLit ? &quot;snorts through his mask.&quot; : &quot;snorts.&quot;&gt;&gt;
  He moves to pick up
  &lt;&lt;if $n_coinsThrown&gt;&gt;
    &lt;&lt;= $n_coinsThrownAgain ? &quot;one from&quot; : &quot;the one on&quot;&gt;&gt;
    the floor,
  &lt;&lt;else&gt;&gt;
    one from the stack,
  &lt;&lt;/if&gt;&gt;
  and then brings it close, where Nero can see it clearly.

  ?P
  It&#39;s unspeakably lewd.

  ?P
  The Sprite repeats in Nero&#39;s ear,
  &lt;span class=sprite-q&gt;&quot;Please touch my hole, ?master&quot;&lt;/span&gt;

  ?P
  The coin isn&#39;t the right hole. Well, &lt;em&gt;this&lt;/em&gt; coin is not
  the right hole. Nero is somewhat relieved.
  Engraved on the coin is an image of a fox. The fox is naked,
  and visibly male. He&#39;s bent over and looking between his legs.
  His rear is toward the viewer. His tail is raised.
  And the hole of the coin is right below his tail.
  
  ?P
  Nero realizes he&#39;s staring. He looks away.

  ?P
  Ivex laughs and drops the coin.
  &quot;Would you like me to show you another?&quot;

  ?P
  Nero wonders, maybe one of the other coins is the right hole?
  But Ivex would not have the Sprite ask him to
  touch a specific coin in a stack of coins.
  Unless he&#39;s deliberately hiding an important coin in
  the stack of unimportant coins?

  ?P
  No, that&#39;s quite unlikely. Ivex does not seem that clever.
  Besides, Nero does &lt;em&gt;not&lt;/em&gt; want Ivex to show him more coins.

  ?P
  The wolf shakes his head. He tries to change the subject.
  &quot;What were you asking me just now?&quot;

&lt;&lt;else&gt;&gt;
  Ivex
  &lt;&lt;= $n_candleLit ? &quot;snorts in his mask.&quot; : &quot;snorts.&quot;&gt;&gt;
  &lt;&lt;if $n_ivexNear&gt;&gt;
    He raises a fist.
  &lt;&lt;elseif $n_coinsThrown&gt;&gt;
    He makes a gesture, and another coin flies across the room
    to hit Nero&#39;s balls. The wolf flinches.
    ?P
    The panther says,
  &lt;&lt;else&gt;&gt;
    He makes a gesture. A coin rises up from the stack and flies
    across the room to hit Nero in the balls.
    It&#39;s barely a tap, but the wolf flinches anyway.
    ?P
    The panther says,
  &lt;&lt;/if&gt;&gt;
  &quot;Your attempts at distracting me are pathetic.
  Do you need
  &lt;&lt;= $n_abused ? &quot;a little &lt;em&gt;reminder&lt;/em&gt;&quot; : &quot;some &lt;em&gt;motivation&lt;/em&gt;&quot;&gt;&gt;
  to stay on topic?&quot;
  &lt;&lt;if !$n_ivexNear&gt;&gt;
    The emphasis on
    &lt;em&gt;&lt;&lt;= $n_abused ? &quot;reminder&quot; : &quot;motivation&quot;&gt;&gt;&lt;/em&gt;
    is quite menacing.
  &lt;&lt;/if&gt;&gt;

  ?P
  Nero
  &lt;&lt;= $n_abused || $n_ivexNear ? &quot;quickly&quot; : &quot;&quot;&gt;&gt;
  shakes his head.
  &quot;&lt;&lt;= $n_abused || $n_ivexNear ? &quot;Sorry!&quot; : &quot;Apologies.&quot;&gt;&gt;
  What were you asking me just now?&quot;
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;run
  $n_coinsAsked = true;
  if ($n_ivexWasReceptive) {
    $n_coinsShown = true;
    $n_ivexNear = true;
  } else if (!$n_ivexNear) {
    $n_coinsThrownAgain = $n_coinsThrown;
    $n_coinsThrown = true;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="468" name="n1x Coins" tags="mt-ready has-hole" position="6225,1550" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_coinsLanced false&gt;&gt;
&lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;

&lt;&lt;cv-try n_magicPhase
  `MP_beforeCast` `MP_wantTouch` `MP_contact` `MP_tapLost`&gt;&gt;

&lt;&lt;cv-ignore n_candleLit&gt;&gt; /* minor variation */
&lt;&lt;cv-ignore n_coinsThrown n_coinsThrownAgain&gt;&gt; /* minor variation */

&lt;&lt;if $n_candleLit&gt;&gt;
  On a shelf that&#39;s as red as the
  &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;,
  there&#39;s
&lt;&lt;else&gt;&gt;
  On one shelf is
&lt;&lt;/if&gt;&gt;
a small &lt;&lt;= $n_wandExploded ? &quot;jumble&quot; : &quot;stack&quot;&gt;&gt; of
&lt;&lt;if $n_coinsThrownAgain&gt;&gt;
  the coins that Ivex
  &lt;&lt;= $n_ivexGone ? &quot;had&quot; : &quot;has&quot;&gt;&gt;
  been flinging at Nero&#39;s crotch.
&lt;&lt;elseif $n_coinsThrown&gt;&gt;
  coins, which is the source of the one that Ivex
  &lt;&lt;= $n_ivexGone ? &quot;had&quot; : &quot;&quot;&gt;&gt;
  flung at Nero&#39;s crotch earlier.
&lt;&lt;else&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  coins.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_free&gt;&gt;
  Each of the coins has a hole, and they&#39;re definitely not the
  holed coins known as &quot;scalars&quot; from the Lapine Republic.
  Not unless that Empire has chosen to make unspeakably
  lewd images their legal tender.
  ?P
  Several of the coins show a male fox bent over, tail raised,
  with the hole placed in the center of his ass.
  Another one shows a rabbit on his back, legs raised,
  &lt;span class=nobr&gt;&lt;em&gt;et cetera&lt;/em&gt;&lt;/span&gt;.
  &lt;&lt;if $n_mageSight&gt;&gt;
    None of the coins have any magic in them.
  &lt;&lt;/if&gt;&gt;

  ?P
  &lt;&lt;if MP_wantTouch !== $n_magicPhaseReached&gt;&gt;
    They&#39;re strange and a little unsettling,
    especially in how &lt;em&gt;large&lt;/em&gt;
    the holes would be if the persons depicted were real.
    In any case, the coins don&#39;t seem useful
    or important right now.
  &lt;&lt;elseif $n_coinsShown&gt;&gt;
    Ivex did touch one, and the Sprite did not accept that touch.
    Perhaps a different coin could have satisfied the Sprite?
    But how would Ivex know which of the coins to touch?
    ?P
    Well, this is both fascinating and disturbing to speculate about,
    but it doesn&#39;t seem useful or important any more.
  &lt;&lt;else&gt;&gt;
    Perhaps one of the coins is the hole that the Sprite
    wanted him to touch? If so, how would Ivex know
    which of the coins to touch? Maybe any of them would do?
    That seems like a terrible idea if the goal is to prevent
    unauthorized access to the panther&#39;s magic.
    ?P
    Nero laughs at the image of Ivex frantically failing to find the
    correct coin to touch during an emergency. It&#39;s probably something else.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $n_coinsShown&gt;&gt;
  Several, maybe all of the coins have a hole in them.
  &lt;&lt;if $n_mageSight&gt;&gt;
    Some might have magic, but the room&#39;s dense web of exotic energy
    makes it hard to tell from a distance.
  &lt;&lt;/if&gt;&gt;

  ?P
  Nero had thought that the coins might be the holed coins called
  &quot;scalars&quot; from the Lapine Republic.
  But the one that Ivex had shown was engraved with an image
  that seems unlikely to be legal tender of that Empire:
  a male fox bent over, his tail raised,
  and the hole of the coin exactly in the center of his ass.
  ?P
  Nero suspects the rest of the coins are the same.
  &lt;&lt;if MP_wantTouch === $n_magicPhase&gt;&gt;
    It&#39;s &lt;em&gt;possible&lt;/em&gt; that one of the other coins is the
    hole that the Sprite wants him to touch, despite the
    inconvenience of selecting a specific coin from the stack.
    But Ivex does not seem like someone who tolerates inconvenience.
    &lt;&lt;if !$n_ivexGone&gt;&gt;
      And Nero does &lt;em&gt;not&lt;/em&gt; want Ivex to show him any more coins.
    &lt;&lt;/if&gt;&gt;
    The hole is almost certainly &lt;em&gt;not&lt;/em&gt; a coin. Hopefully.
  &lt;&lt;else&gt;&gt;
    They don&#39;t seem useful or important right now.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  From a distance, it&#39;s hard to be certain what type of coins they are.
  &lt;&lt;if $n_mageSight&gt;&gt;
    And the room&#39;s complex flows of exotic energy make it difficult to
    see if any of the coins have magic attached to them.
  &lt;&lt;/if&gt;&gt;
  ?P
  &lt;&lt;if $n_coinsThrown&gt;&gt;
    &lt;&lt;if $n_coinsThrownAgain&gt;&gt;
      But one of the thrown coins
    &lt;&lt;else&gt;&gt;
      But the coin that was thrown
    &lt;&lt;/if&gt;&gt;
    has landed not too far from the wolf,
    and he can see it has a hole in it.
    The one on top of the stack looks like it also has a hole,
    so it seems likely that they all have holes.
    ?P
    They&#39;re
  &lt;&lt;else&gt;&gt;
    But the one on top of the stack looks like it has a hole,
    and the others might have holes as well.
    So they&#39;re
  &lt;&lt;/if&gt;&gt;
  probably the coins called &quot;scalars&quot;, from the Lapine Republic.
  The holes make it convenient to bundle the coins together on a string,
  and strings of 100 coins are used, somewhat inconveniently,
  as a single unit of currency called a &quot;vector&quot;.
  ?P
  &lt;&lt;if MP_wantTouch === $n_magicPhase&gt;&gt;
    &lt;&lt;if $n_coinsAsked&gt;&gt;
      A coin might be the hole that the Sprite wants him to touch.
      But asking about them provoked hostility from the panther.
      Perhaps Nero should
      &lt;&lt;= $n_ivexGone ? &quot;have asked&quot; : &quot;ask&quot;&gt;&gt;
      when Ivex
      &lt;&lt;= $n_ivexGone ? &quot;was&quot; : &quot;is&quot;&gt;&gt;
      more receptive to suggestion.
    &lt;&lt;else&gt;&gt;
      Maybe one of the coins is the hole that the Sprite
      wants him to touch?
      &lt;&lt;if $n_ivexGone&gt;&gt;
        Well, there&#39;s no way to touch any of them now.
        Nero will have to find some other way to escape.
      &lt;&lt;else&gt;&gt;
        It seems unlikely that Nero could get Ivex
        to touch a specific one.
        Would the Sprite accept a touch of any of the coins?
        It might be worth a try.
      &lt;&lt;/if&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;else&gt;&gt;
    The Lapine Republic is in the southern hemisphere.
    No merchants or banks on this continent accept scalars or vectors.
    So it&#39;s not clear why Ivex would have a stack of them.
    ?P
    Well, whatever the reason, it doesn&#39;t seem useful
    or important right now.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if !$n_coinsAsked&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the coins.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;elseif MP_wantTouch === $n_magicPhase&gt;&gt;
      &lt;&lt;mtl [[n1x Coins Ask]]&gt;&gt;Ask Ivex about the coins.&lt;&lt;/mtl&gt;&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the coins.&quot; &quot;not interested&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_tooClever /* &amp;&amp; !$n_coinsLanced */&gt;&gt;
    &lt;li&gt;[[Destroy the coins with Nackle.|n2x Lance Coins]]&lt;/li&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_coinsViewed = true;
  $n_dimCoins = !_hasAction;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="469" name="n1x Cross Bound" tags="mt-ready inclusion" position="6350,1850" size="100,100">&lt;&lt;nobr&gt;&gt;

The wolf cannot see much of the cross that&#39;s holding
&lt;&lt;if $n_candleLit&gt;&gt;
  him captive for the
  &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;,
&lt;&lt;elseif $n_naked&gt;&gt;
  him naked with arms and legs spread wide,
&lt;&lt;else&gt;&gt;
  his arms and legs spread wide,
&lt;&lt;/if&gt;&gt;
but it&#39;s made of sturdy wood, and the leather straps
that bind him to it are thick and quite secure.

?P
The arms of the cross hold an attachment behind his head
that has thick wooden posts extending forward on each side.
The posts have coin-sized holes
that do not go all the way through the wood.
It&#39;s not clear what the holes are for,
and Nero is not sure he wants to know.

?P
The apparatus behind his head makes it difficult to see behind him,
but it looks like the legs of the cross are not attached to anything.
It isn&#39;t immediately obvious what&#39;s keeping
the cross fastened in place in the
&lt;!-- not using no-loop; this is a special case.
  first-time player is likely to visit cross first.
  don&#39;t want them stuck here. but any other time,
  the link outward to room is weird --&gt;
&lt;&lt;if $n_studyViewed&gt;&gt;
  strange room.
&lt;&lt;else&gt;&gt;
  &lt;&lt;mt-seen $n_dimStudy&gt;&gt;
    &lt;&lt;mta &quot;n1x Study&quot;&gt;&gt;strange room&lt;&lt;/mta&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $n_mageSight&gt;&gt;
  Mage-sight unfortunately does not grant
  the ability to see in directions that his eyes cannot.
&lt;&lt;/if&gt;&gt;

?P
Well, however the cross is installed,

&lt;&lt;if MP_beforeCast === $n_magicPhase&gt;&gt;
  escape from the leather bonds will be easy with the right magic.

&lt;&lt;elseif $n_ivexGone&gt;&gt;
  Ivex&#39;s departure means
  that Nero can now struggle against his bondage
  in earnest hope of escape, however unlikely that might be
  with his mediocre strength.

&lt;&lt;else&gt;&gt;
  struggling free seems unlikely to work.
  Nero is a mage, not a warrior.
  It&#39;s doubtful he could break his bonds.
  And even if it were possible,
  Ivex would certainly
  &lt;&lt;if $n_subby&gt;&gt;
    scorn the brutish attempt at escape.
  &lt;&lt;else&gt;&gt;
    stop the wolf before he successfully rampaged
    his way to escape.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="470" name="n1x Cross Free" tags="mt-ready inclusion" position="6350,2100" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleLit false&gt;&gt;
&lt;&lt;vi-always n_ivexGone true&gt;&gt;
&lt;&lt;em-assert !!$n_mageSight !== !!$n_deskBurned&gt;&gt;

&lt;&lt;set _desk =
  $n_deskCleared ? &quot;grandiose desk&quot;
  : $n_deskBurned ? &quot;slightly-charred desk&quot;
  : &quot;cluttered desk&quot;&gt;&gt;

The cross that had trapped the wolf is an imposing piece of furniture, even
&lt;&lt;if $n_crossPartsBurned&gt;&gt;
  as it&#39;s being consumed with fire.
  The wood is cracked in several places.
  One leg is completely severed, and the other leg is gone.
  The Gravity Crystals left smooth surfaces when their implosion
  removed a chunk of the cross,
  but the breaks are splintered and burning like ordinary wood.
&lt;&lt;elseif $n_tooClever&gt;&gt;
  with one leg broken and the other leg gone.
  The surfaces of the breaks are smooth where the implosion
  removed the wood, and splintery where Nero broke them apart.
&lt;&lt;else&gt;&gt;
  with one leg broken.
  The surface at the break is smooth where the implosion
  removed the wood, and splintery where Nero flexed it apart.
&lt;&lt;/if&gt;&gt;

?P
Much like the
&lt;&lt;mt-seen $n_dimDesk&gt;&gt;
  &lt;&lt;mta-no-loop &quot;n1x Desk&quot;&gt;&gt;_desk&lt;&lt;/mta-no-loop&gt;&gt;,
&lt;&lt;/mt-seen&gt;&gt;
the cross lacks joints or seams.
&lt;&lt;if $n_mageSight&gt;&gt;
  To Nero&#39;s surprise,
  the cross has no magic.
  It&#39;s entirely mundane.
  It seems that it actually &lt;em&gt;is&lt;/em&gt;,
  or &lt;em&gt;was&lt;/em&gt;, a single piece of wood,
  instead of several boards attached together.
  ?P
  Nero is baffled at the construction.
  It must be enormously expensive, not to mention wasteful,
  to carve such an object from a tree large enough and old enough
  to provide the material for the cross.
  Why would anyone do such a thing?
  And how did it end up in Ivex&#39;s possession?
  ?P
  Well, whatever the reason for its existence,
&lt;&lt;else&gt;&gt;
  It appears to have been made from a single piece of wood,
  not several boards attached together.
  ?P
  This, of course, is unlikely.
  The broken part does seem to be wood. Perhaps that&#39;s also
  an illusion? Nero is baffled. Did Ivex create an illusion
  of wood that&#39;s realistic enough to splinter, but neglect to add
  realistic joints?
  Or did he take an ordinary wooden cross and add an illusion
  to hide the joints?
  Neither possibility makes much sense.
    
  ?P
  Well, whatever the reason for its appearance,
&lt;&lt;/if&gt;&gt;
Nero would throw
&lt;&lt;if $n_tooClever&gt;&gt;
  all of the cross out the window, if it would fit.
&lt;&lt;else&gt;&gt;
  the cross out the window, if he could.
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="471" name="n1x Cross Grav Noticed" tags="mt-ready inclusion" position="6350,1975" size="100,100">&lt;&lt;nobr&gt;&gt;

Unyielding leather straps are holding the
&lt;&lt;= $n_naked ? &quot;naked&quot; : &quot;&quot;&gt;&gt;
wolf&#39;s arms and legs spread wide against a wooden cross.
An attachment behind his head has thick wooden posts
that extend forward on each side of his head.
The posts have coin-sized holes
that do not go all the way through.

?P
The imprisoning furniture seems quite sturdy,
&lt;&lt;mt-seen $n_dimMirror&gt;&gt;
  but the &lt;&lt;mta-no-loop &quot;n1x Mirror&quot;&gt;&gt;?mirror&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;if $n_candleLit&gt;&gt;
  near the &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;/if&gt;&gt;
on Ivex&#39;s desk provides a view
which reveals a curious fact: the cross is not actually attached
to anything.

&lt;&lt;if $n_gravKnown&gt;&gt;
  Rather, it is held in place by a dangerously large number of
  &lt;&lt;mt-seen $n_dimGrav&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Grav&quot;&gt;&gt;Gravity Crystals&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;if $n_mageSight&gt;&gt;
    woven together in a web of exotic energy.
    &lt;&lt;if $n_gravAsked&gt;&gt;
      Ivex &lt;&lt;= $n_ivexGone ? &quot;seemed&quot; : &quot;seems&quot;&gt;&gt;
      proud of the construction,
      but it looks much less stable than the panther thinks it is!
    &lt;&lt;else&gt;&gt;
      It looks extremely unstable!
    &lt;&lt;/if&gt;&gt;
    ?P

  &lt;&lt;else&gt;&gt;
    &lt;&lt;if $n_gravAsked&gt;&gt;
      that Ivex &lt;&lt;= $n_ivexGone ? &quot;seemed&quot; : &quot;seems&quot;&gt;&gt;
      quite proud of.
      Is the configuration really as stable as the panther thinks it is?
      ?P
      Probably not!
    &lt;&lt;else&gt;&gt;
      in a configuration that is almost certainly unstable!
      ?P
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if MP_beforeCast === $n_magicPhase&gt;&gt;
    The wolf would like to be &lt;em&gt;far away&lt;/em&gt; if the crystals implode.
    Fortunately, escape from the leather bonds will be easy
    with the right magic.

  &lt;&lt;elseif $n_ivexGone&gt;&gt;
    The wolf would &lt;em&gt;like&lt;/em&gt; to be far away when the crystals implode.
    But maybe he can escape by &lt;em&gt;encouraging&lt;/em&gt; the instability?
    ?P
    Nero is a mage, not a warrior. He does not have great strength.
    Still, there &lt;em&gt;is&lt;/em&gt; a chance he can
    apply enough force to disrupt the
    &lt;&lt;= $n_mageSight ? &quot;energy web of the&quot; : &quot;&quot;&gt;&gt;
    Gravity Crystals!

  &lt;&lt;else&gt;&gt;
    The wolf would like to be &lt;em&gt;far away&lt;/em&gt; when the crystals implode.
    He considers trying to convince Ivex of the impending disaster.
    But maybe this flaw is his best chance of escape!
    ?P
    Nero is a mage, not a warrior. He does not have great strength.
    Still, there&#39;s a chance he can
    apply enough force to &lt;em&gt;encourage&lt;/em&gt; the
    &lt;&lt;= $n_mageSight ? &quot;energy web of the&quot; : &quot;&quot;&gt;&gt;
    Gravity Crystals to destabilize.
    He just needs to find time to experiment without Ivex noticing.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $n_gravViewed&gt;&gt;
  Rather, it seems to be held in place by an extravagantly
  wasteful arrangement of
  &lt;&lt;mt-seen $n_dimGrav&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Grav&quot;&gt;&gt;Dream Crystals&lt;&lt;/mta-no-loop&gt;&gt;!
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;if $n_mageSight&gt;&gt;
    The exotic energy web of the crystals is stable for now,
    but the
  &lt;&lt;else&gt;&gt;
    The
  &lt;&lt;/if&gt;&gt;
  power requirement of the crystals grows exponentially over time,
  and their spells are likely to collapse any moment now.
  ?P

  &lt;&lt;if MP_beforeCast === $n_magicPhase&gt;&gt;
    Still, &quot;any moment now&quot; is an unpredictable
    time in the future. The wolf prefers a &lt;em&gt;little&lt;/em&gt;
    more control
    over his situation. Fortunately, escaping the leather bonds
    will be easy with the right magic.
  &lt;&lt;elseif $n_ivexGone&gt;&gt;
    And Nero can accelerate that process!
    His physical strength is not the greatest,
    but any bit of strain will increase the power consumption
    of the crystals.
    And even a small increase will compound rapidly
    from the exponential growth of each crystal&#39;s power usage!
  &lt;&lt;else&gt;&gt;
    And perhaps Nero can accelerate that process.
    But it&#39;s difficult to do anything useful while Ivex is watching...
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  There is however an interesting
  &lt;&lt;if $n_mageSight&gt;&gt;
    exotic energy web with
  &lt;&lt;else&gt;&gt;
    arrangement of
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;mt-seen $n_dimGrav&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Grav&quot;&gt;&gt;glowing crystals&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  floating behind the cross, and that&#39;s probably what holds
  it in place.
  ?P
  &lt;&lt;if MP_beforeCast === $n_magicPhase&gt;&gt;
    Nero catches himself becoming distracted by the shiny crystals.
    This is not the time to indulge his intellectual curiosity.
    The wolf needs to focus
    on escaping from the leather bonds, which will be easy
    with the right magic.
  &lt;&lt;else&gt;&gt;
    &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
    Since magic seems unavailable to the wolf right now,
    Nero considers what
    other approaches might release himself from this contraption.
    Strength is unlikely to succeed, of course.
    But cleverness might save the day.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="472" name="n1x Cross" tags="mt-ready" position="6225,1925" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;
&lt;&lt;cv-ignore n_candleHorny&gt;&gt; /* always false */
&lt;&lt;cv-ignore n_naked&gt;&gt; /* trivial variation */
&lt;&lt;cv-ignore n_studyViewed&gt;&gt; /* doesn&#39;t change text */
&lt;&lt;cv-ignore n_mirrorMagicKnown&gt;&gt; /* trivial variation */
&lt;&lt;cv-ignore n_candleMax&gt;&gt; /* always false */
&lt;&lt;cv-ignore n_mirrorBroken&gt;&gt; /* does not affect cross */
&lt;&lt;cv-try n_magicPhase
  `MP_beforeCast` `MP_triedMagic` `MP_contact` `MP_tapLost`&gt;&gt;

&lt;&lt;if $n_free&gt;&gt;
  &lt;&lt;include [[n1x Cross Free]]&gt;&gt;
&lt;&lt;elseif $n_gravNoticed&gt;&gt;
  &lt;&lt;include [[n1x Cross Grav Noticed]]&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;include [[n1x Cross Bound]]&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if MP_beforeCast === $n_magicPhase&gt;&gt;
  &lt;&lt;if $n_ivexGone&gt;&gt;
    Especially now that Nero can cast spells
    without Ivex&#39;s interference.
  &lt;&lt;else&gt;&gt;
    Nero just has to find the
    right time to cast the right spell.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if $n_gravViewed &amp;&amp; $n_ivexGone &amp;&amp; MP_beforeCast !== $n_magicPhase&gt;&gt;
    &lt;&lt;include &quot;n2b Struggle Action&quot;&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_tooClever &amp;&amp; !$n_crossLanced&gt;&gt;
    &lt;&lt;mtl [[n2x Lance Cross]]&gt;&gt;Destroy the cross with Nackle.&lt;&lt;/mtl&gt;&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_dimCross = !_hasAction;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="473" name="n1x Desk Clutter" tags="mt-ready inclusion" position="5700,575" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $n_deskHasPillar&gt;&gt;
  The center of the desk has an area cleared of clutter,
  and in the middle of that clearing sits
  two fragments of a pink pillar,
  &lt;span class=nobr&gt;&quot;CARPE DI&quot;&lt;/span&gt;
  &lt;span class=nobr&gt;and &quot;CK&quot;.&lt;/span&gt;
  The pillar was formerly in the snow globe
  from the Caverns of Lusty Spires,
  and perhaps the rest of the snow globe is now falling back down
  &lt;em&gt;to&lt;/em&gt; the Caverns of Lusty Spires.
  ?P
  &lt;&lt;if !$n_mirrorBroken &amp;&amp; !$n_mirrorTaken&gt;&gt;
    One corner of the desk has a
    &lt;&lt;mt-seen $n_dimMirror&gt;&gt;
      &lt;&lt;mta-no-loop &quot;n1x Mirror&quot;&gt;&gt;?mirror&lt;&lt;/mta-no-loop&gt;&gt;.
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  &lt;&lt;if $n_candleLit &amp;&amp; $n_mageSight&gt;&gt;
    At one corner of the desk, one of the spikes extends
    into a candleholder that holds
    &lt;&lt;= $n_ivexGone ? &quot;Ivex&#39;s&quot; : &quot;the&quot;&gt;&gt;
    candle. Nearby, there is
  &lt;&lt;else&gt;&gt;
    At one corner of the desk, there is
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if !$n_mirrorBroken &amp;&amp; !$n_mirrorTaken&gt;&gt;
    &lt;&lt;mt-seen $n_dimMirror&gt;&gt;
      a &lt;&lt;mta-no-loop &quot;n1x Mirror&quot;&gt;&gt;?mirror&lt;&lt;/mta-no-loop&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    resting against
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if $n_globeViewed&gt;&gt;
    &lt;&lt;mt-seen $n_dimGlobe&gt;&gt;
      a &lt;&lt;mta-no-loop &quot;n1x Globe&quot;&gt;&gt;snow globe&lt;&lt;/mta-no-loop&gt;&gt;.
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mt-seen $n_dimGlobe&gt;&gt;
      an &lt;&lt;mta-no-loop &quot;n1x Globe&quot;&gt;&gt;arcane globe&lt;&lt;/mta-no-loop&gt;&gt;.
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_deskBurned&gt;&gt;
  The other clutter on the desk has been damaged by
  the candle fire. The papers have all been reduced to ash and burnt
  remnants. Most of the writing tools are scorched.
  &lt;&lt;if $n_knifeTaken&gt;&gt;
    None of them look particularly interesting.
  &lt;&lt;elseif $n_knifeOnFloor&gt;&gt;
    None of them seem particularly useful to Nero&#39;s situation right now.
  &lt;&lt;else&gt;&gt;
    The only tool that looks useful is the
    &lt;&lt;mt-seen $n_dimKnife&gt;&gt;
      &lt;&lt;mta-no-loop &quot;n1x Knife&quot;&gt;&gt;letter opener&lt;&lt;/mta-no-loop&gt;&gt;.
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  The rest of the clutter on the desk appears to be miscellaneous papers and
  writing tools: pens and ink, wax seal, blotter,
  &lt;&lt;if MP_beforeCast === $n_magicPhase&gt;&gt;
    &lt;&lt;mt-seen $n_dimKnife&gt;&gt;
      &lt;&lt;mta-no-loop &quot;n1x Knife&quot;&gt;&gt;letter opener&lt;&lt;/mta-no-loop&gt;&gt;,
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  and so forth.
  &lt;&lt;if $n_knifeTaken&gt;&gt;
    None of them look particularly interesting.
  &lt;&lt;elseif $n_knifeOnFloor || MP_beforeCast === $n_magicPhase&gt;&gt;
    None of them seem particularly useful to Nero&#39;s situation right now.
  &lt;&lt;else&gt;&gt;
    ?P
    The most interesting of the tools is
    &lt;&lt;mt-seen $n_dimKnife&gt;&gt;
      a &lt;&lt;mta-no-loop &quot;n1x Knife&quot;&gt;&gt;letter opener&lt;&lt;/mta-no-loop&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    that may be sharp enough to cut Nero&#39;s bonds,
    if only there were a way to reach it...
    &lt;&lt;if $n_bottleViewed&gt;&gt;
      ?P
      Or for &lt;em&gt;it&lt;/em&gt; to reach &lt;em&gt;him&lt;/em&gt;,
      which might be possible with the help of
      &lt;&lt;mt-seen $n_dimBottle&gt;&gt;
        &lt;&lt;mta-no-loop &quot;n1x Bottle&quot;&gt;&gt;Nackle&#39;s Device!&lt;&lt;/mta-no-loop&gt;&gt;
      &lt;&lt;/mt-seen&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="474" name="n1x Desk" tags="mt-ready" position="5700,700" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;

&lt;&lt;if $n_deskBurned&gt;&gt;
  The slightly-charred desk
&lt;&lt;else&gt;&gt;
  The grandiose desk
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_candleLit&gt;&gt;
  holding the
  &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;/if&gt;&gt;

does not have joints or seams, and the wood grain
is continuous and uninterrupted across all of the desk&#39;s visible surfaces.

&lt;&lt;if $n_deskLanced || $n_wandExploded&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  Despite the appearance, which does not seem to be an illusion,
  the material is something much stronger than wood.
  Nero was unable to damage it in any way.
  He does not know what the substance can be.
  
&lt;&lt;elseif $n_mageSight&gt;&gt;
  The wood oddly does not seem to be an illusion.
  Maybe it &lt;em&gt;is&lt;/em&gt; carved from a single, massive block of wood?
  But the material glows strongly with exotic energy,
  so perhaps it&#39;s something else that merely resembles wood.
&lt;&lt;else&gt;&gt;
  It appears to have been carved from a single, massive block of wood,
  which is an unlikely construction for such an ordinary object.
  It&#39;s probably just a sloppy magic veneer applied to a normal assemblage
  of cheap lumber.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;set _bill = &#39;piss-soaked &quot;Bill For Home Renovation:&#39;
  + &#39; 899 Silvers, Due Yesterday&quot;&#39;&gt;&gt;
&lt;&lt;set _pillar = &#39;two fragments of a pink pillar,&#39;
  + &#39; &lt;span class=nobr&gt;&quot;CARPE DI&quot;&lt;/span&gt;&#39;
  + &#39; and &lt;span class=nobr&gt;and &quot;CK&quot;&lt;/span&gt;&#39;&gt;&gt;
&lt;&lt;set _globe = $n_globeBroken ? &quot;smashed snow globe&quot; : &quot;snow globe&quot;&gt;&gt;

&lt;&lt;if $n_deskCleared&gt;&gt;
  The desk is now completely
  &lt;&lt;if $n_deskHasBill &amp;&amp; $n_deskHasPillar&gt;&gt;
    bare except for a _bill,
    which has _pillar, on top.
  &lt;&lt;elseif $n_deskHasBill&gt;&gt;
    bare except for a _bill.
  &lt;&lt;elseif $n_deskHasPillar&gt;&gt;
    bare except for _pillar.
  &lt;&lt;else&gt;&gt;
    bare.
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if $n_deskHasPillar&gt;&gt;
    The pillar was formerly in the snow globe
    from the Caverns of Lusty Spires,
    and perhaps the rest of the snow globe is now falling back down
    &lt;em&gt;to&lt;/em&gt; the Caverns of Lusty Spires.
    ?P
  &lt;&lt;/if&gt;&gt;
  All the desk&#39;s papers and writing tools and other miscellanea are now
  &lt;&lt;if $n_clutterCornerBurned&gt;&gt;
    a charred mess of clutter in a corner of the room.
  &lt;&lt;elseif $n_clutterInCorner&gt;&gt;
    a cluttered heap in a corner of the room.
  &lt;&lt;else&gt;&gt;
    scattered across the floor.
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if !$n_globeLanced&gt;&gt;
    &lt;&lt;mt-seen $n_dimGlobe&gt;&gt;
      The &lt;&lt;mta-no-loop &quot;n1x Globe&quot;&gt;&gt;_globe&lt;&lt;/mta-no-loop&gt;&gt; is
    &lt;&lt;/mt-seen&gt;&gt;
    &lt;&lt;= $n_clutterInCorner ? &quot;there as well&quot; : &quot;also on the floor&quot;&gt;&gt;.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  &lt;&lt;include [[n1x Desk Clutter]]&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_deskSearched&gt;&gt;
  ?P
  The missing heirloom might be in the desk?
  There are no obvious drawers or doors,
  and no apparent way to open it.
  &lt;&lt;if $n_deskSearchedAgain&gt;&gt;
    Nero has... searched the desk as well as he
    can right now.
    ?P
    A mage like Ivex is likely to have some
    magical way of opening the desk.
    If the heirloom &lt;em&gt;is&lt;/em&gt; in the desk,
    Nero will have to try later,
    when he has more magic.
  &lt;&lt;else&gt;&gt;
    Nero has... searched the desk for hidden catches,
    but has not found any.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;elseif $n_free&gt;&gt;
  ?P
  Perhaps the missing heirloom is in the desk?
  Most people would not put something so valuable in a place so ordinary.
  But Ivex is not most people.
&lt;&lt;/if&gt;&gt;
?P

&lt;ul class=actions&gt;
  &lt;&lt;if $n_free&gt;&gt;
    &lt;&lt;if $n_deskSearchedAgain&gt;&gt;
      &lt;&lt;mtl-denied &quot;Search the desk again.&quot; &quot;too... sticky&quot;&gt;&gt;
    &lt;&lt;elseif $n_deskSearched&gt;&gt;
      &lt;li&gt;[[Search the desk again.|n2x Desk Search Again]]&lt;/li&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;li&gt;[[Search the desk.|n2x Desk Search 1]]&lt;/li&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if $n_tooClever &amp;&amp; !$n_deskLanced&gt;&gt;
    &lt;li&gt;[[Destroy the desk with Nackle.|n2x Lance Desk]]&lt;/li&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_deskViewed = true;
  $n_dimDesk = !_hasAction;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="475" name="n1x Dream Crystals 1" tags="mt-ready" position="7650,1175" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  &lt;&lt;vi-ignore n_free&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Mystics, both ancient and modern, have long used a spell called Dream Salt
in their rituals.
When Dream Salt is placed in a flame,
it holds the smoke frozen in a specific shape,
usually presented as a portent or omen of the future,
but actually chosen and prepared in advance by the mystic.
?P
As most of the work of mystics is more trickery than magic,
Dream Salt was ignored by true mages for many centuries,
and its basic axioms were never dissected,
until the untapped potential of those axioms was demonstrated
by that most infamous of fox mages,
Kelvin the Elder.
?P
Dream Crystals are a reconstruction of the
Dream Salt axioms into a flexible matrix that
is easy for mages to manipulate.
The result is a crystal with the ability to hold
&lt;em&gt;any&lt;/em&gt; chosen material firmly
in a specific position, for as long as there is energy powering it.
?P
The energy requirement is initially proportional to the mass being held,
but it grows quite rapidly, exponentially, over time.
So the crystals are not a substitute for ordinary durable
fasteners such as glue or nails. But in any situation that requires
a rigid &lt;em&gt;temporary&lt;/em&gt; hold, long enough for glue to set
or nails to be applied, Dream Crystals
are by far the best tool available today.
Every construction project that can afford it has at least one mage
whose purpose is to prepare and deploy Dream Crystals
wherever they&#39;re needed to assist in assembly.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1x Dream Crystals 2]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="476" name="n1x Dream Crystals 2" tags="mt-ready" position="7775,1175" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  &lt;&lt;vi-ignore n_free&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;

  &lt;&lt;kw-announce&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Dream Crystals are not limited to ordinary construction work.
Kelvin the Elder showed the world a hint of their endless
possibilities when he used the world&#39;s first
Dream Crystal to construct an
&lt;&lt;arc-only&gt;&gt;
  extraordinary monument
&lt;&lt;/arc-only&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;mt-seen $kn_Kelvin&gt;&gt;
    &lt;&lt;tran-cut [[extraordinary monument|n1x Kelvin 1]]&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
for the lion emperor Clothos.
?P
Since then, artisan-mages have used Dream Crystals to create
many varied and intricate objects, both practical and artistic,
which would be difficult to create in any other way.
?P
The process is simple and limited only by the artisan&#39;s
creativity:
&lt;ol&gt;
  &lt;li&gt;First, imbue a pattern of the desired object into
    a Dream Crystal.&lt;/li&gt;
  &lt;li&gt;Next, tune the crystal to act on
    an appropriate material, such as glass.&lt;/li&gt;
  &lt;li&gt;Place the crystal in a safe location,
    free from obstructions and flammable objects.&lt;/li&gt;
  &lt;li&gt;Activate the crystal.&lt;/li&gt;
  &lt;li&gt;Throw the molten form of the material into the crystal&#39;s field.&lt;/li&gt;
  &lt;li&gt;Wait.&lt;/li&gt;
&lt;/ol&gt;

The crystal will hold the molten material firmly fixed in the
position described by its pattern,
and excess material will drop to the ground.
When the material cools, the result is a solid object,
formed into any shape that can be imagined.

&lt;&lt;arc-only&gt;&gt;
  ?P
  Even better, mages can create such objects in the privacy of their
  own home, thus avoiding embarrassing questions about why exactly
  the mage needs bronze molded in the shape of a dragon cock.
&lt;&lt;/arc-only&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;if $n_gravAsked&gt;&gt;
    But all this is irrelevant,
    since Ivex is &lt;em&gt;not&lt;/em&gt; using Dream Crystals.
  &lt;&lt;else&gt;&gt;
    Ivex is &lt;em&gt;not&lt;/em&gt; doing anything as interesting as that.
    His crystals (&lt;em&gt;six&lt;/em&gt; of them!) appear to be doing the
    ordinary work of holding the wooden bondage cross in place,
    with complete disregard for the exponential power consumption
    that will certainly become a problem in short order.
    ?P
    Was there really no better way to fasten the bondage cross
    in this room? Nero is quite baffled by the panther&#39;s
    bizarre application of magic.
  &lt;&lt;/if&gt;&gt;

  ?P
  &lt;&lt;kw-unlock-soon kn_Dream&gt;&gt;
  &lt;&lt;return-before &quot;n1x Dream Crystals 1&quot;&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="477" name="n1x Globe Ask" tags="mt-ready" position="6475,1175" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

/* can&#39;t get to wantPass without having been receptive for touch */
&lt;&lt;em-assert $n_ivexWasReceptive&gt;&gt;

Ivex seems friendly enough right now. But Nero still hesitates.
What question is best for obtaining the information he wants?

?P
He briefly considers asking to see the dragon in the globe,
&lt;&lt;if $n_windowAsked&gt;&gt;
  but he&#39;s already talked of dragons outside the window,
&lt;&lt;else&gt;&gt;
  but that seems too obviously a ploy,
&lt;&lt;/if&gt;&gt;
and the request is too indirect.
/* already asked at least bottle and penguin */
The panther often responds in strange (and disturbing) ways.

?P
No, the best approach is the direct one.

?P
Nero clears his throat.
&quot;Apologies for the interruption, but this has been bothering me.
I&#39;ve visited the Caverns of Liskov, and also the Caverns of Luminance.
I don&#39;t remember seeing that trinket available at either location.
Where did you get it from?&quot;

?P
Ivex looks puzzled. &quot;What trinket? What nonsense are you talking about now?&quot;

?P
&quot;That snow globe on your desk.&quot;

?P
The panther looks at it, then
&lt;&lt;= $n_candleLit ? &quot;laughs through his mask.&quot; : &quot;laughs.&quot;&gt;&gt;
&quot;It&#39;s neither of those places.
I will show you.&quot;

?P
He moves to the desk to pick up the globe.

?P
&lt;&lt;mta &quot;n1f Clever Escape 1&quot;&gt;&gt;Continue&lt;&lt;/mta&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="478" name="n1x Globe WantPass" tags="mt-ready inclusion" position="6350,1175" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;

&lt;&lt;script&gt;&gt;
  const T = State.temporary;
  const V = State.variables;
  const tried = JSON.parse(V.n_passTried || &quot;[]&quot;);
  T.oneLeft = tried.length === 2;
  T.zeroLeft = tried.length === 3;
  T.triedCarpe = tried.includes(&quot;Carpe Diem&quot;);
  T.triedLiskov = tried.includes(&quot;Caverns of Liskov&quot;);
  T.triedLuminance = tried.includes(&quot;Caverns of Luminance&quot;);
&lt;&lt;/script&gt;&gt;

The caverns of the snow globe might be Ivex&#39;s favorite vacation spot,
which is a common choice of password: easy to remember,
and difficult for an adversary to guess.
But such facts are less obscure than they might seem,
since it&#39;s a simple matter to deduce them from the tiniest of clues,
such as the souvenirs that a person keeps in their residence.
?P

&lt;&lt;if _triedLiskov &amp;&amp; _triedLuminance&gt;&gt;
  Unfortunately, neither &quot;Caverns of Luminance&quot;
  nor &quot;Caverns of Liskov&quot; is the correct password.
  &lt;&lt;if _triedCarpe&gt;&gt;
    It also isn&#39;t &quot;Carpe Diem&quot;.
  &lt;&lt;else&gt;&gt;
    ?P
    Perhaps it&#39;s the adage in the globe, &quot;Carpe Diem&quot;?
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif _triedLiskov || _triedLuminance&gt;&gt;
  &lt;&lt;if _triedLiskov&gt;&gt;
    Unfortunately, &quot;Caverns of Liskov&quot; is not the correct password.
  &lt;&lt;else&gt;&gt;
    Unfortunately, &quot;Caverns of Luminance&quot; is not the correct password.
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if _triedCarpe&gt;&gt;
    It also isn&#39;t &quot;Carpe Diem&quot;.
  &lt;&lt;/if&gt;&gt;
  ?P
  &lt;&lt;if _triedLuminance &amp;&amp; !_triedLiskov&gt;&gt;
    Perhaps it&#39;s &quot;Caverns of Liskov&quot;?
  &lt;&lt;elseif _triedLiskov &amp;&amp; !_triedLuminance&gt;&gt;
    Perhaps it&#39;s &quot;Caverns of Luminance&quot;?
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if !_triedCarpe&gt;&gt;
    Another plausible choice is the adage in the globe, &quot;Carpe Diem&quot;.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  So Ivex&#39;s password might be &quot;Caverns of Luminance&quot;,
  or &quot;Caverns of Liskov&quot;, whichever is the correct origin of the globe.
  &lt;&lt;if _triedCarpe&gt;&gt;
    ?P
    &quot;Carpe Diem&quot; also seemed possible, but it isn&#39;t the password.
  &lt;&lt;else&gt;&gt;
    Another plausible choice is the adage in the globe, &quot;Carpe Diem&quot;.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if _triedLiskov || _triedLuminance || _oneLeft&gt;&gt;
  ?P
  Of course, it&#39;s possible that the globe comes from
  some other cavern that starts with &quot;L&quot;, unknown to the wolf.
  &lt;&lt;if $n_ivexGone&gt;&gt;
    Unfortunately, he can&#39;t ask Ivex about it now.
  &lt;&lt;elseif _oneLeft&gt;&gt;
    And with only one try remaining, perhaps he should check
    his assumptions about the globe.
  &lt;&lt;else&gt;&gt;
    He could ask about it, but he hasn&#39;t thought of
    a good approach yet.
    &lt;&lt;if _zeroLeft&gt;&gt;
      And he has unlimited guesses, so there&#39;s plenty of time to
      ask later.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;elseif MT.passAgainSoon()&gt;&gt;
  Nero will have to consider trying these when he
  has a chance to guess again.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if MP_wantPass === $n_magicPhase&gt;&gt;
  /* add the say-password actions */
  &lt;&lt;pw-suggest `PW_luminance`&gt;&gt;&lt;&lt;/pw-suggest&gt;&gt;
  &lt;&lt;pw-suggest `PW_liskov`&gt;&gt;&lt;&lt;/pw-suggest&gt;&gt;
  &lt;&lt;pw-suggest `PW_carpe`&gt;&gt;&lt;&lt;/pw-suggest&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="479" name="n1x Globe" tags="mt-ready maybe-password" position="6225,1175" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_globeLanced false&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;

&lt;&lt;if $n_globeViewed&gt;&gt;
  The &lt;&lt;= $n_globeBroken ? &quot;smashed&quot; : &quot;&quot;&gt;&gt; crystal globe
  &lt;&lt;if $n_candleLit&gt;&gt;
    near the &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;
    on the desk
  &lt;&lt;elseif $n_clutterInCorner&gt;&gt;
    in the corner clutter
  &lt;&lt;elseif $n_deskCleared&gt;&gt;
    on the floor
  &lt;&lt;else&gt;&gt;
    on the desk
  &lt;&lt;/if&gt;&gt;
  is
  &lt;&lt;if $n_mageSight&gt;&gt;
     not magic. It&#39;s
  &lt;&lt;/if&gt;&gt;
  the type that&#39;s
  &lt;&lt;= $n_globeBroken ? &quot;normally&quot; : &quot;&quot;&gt;&gt;
  filled with clear liquid
  and small glittering flakes that swirl and settle when the globe is shaken.
  These are commonly called snow globes, and many of its variants
  can be purchased in shops that cater to tourists at vacation resorts.

&lt;&lt;else&gt;&gt;
  On careful examination, what appeared to be a mage&#39;s crystal globe
  &lt;&lt;if $n_candleLit&gt;&gt;
    beside the
    &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  turns out to be what&#39;s commonly called a snow globe,
  which is filled with clear liquid and small glittering
  flakes that swirl and settle when the globe is shaken.
  Many varieties of this trinket can be found in shops
  that cater to tourists at vacation spots.
  &lt;&lt;if $n_mageSight&gt;&gt;
    There&#39;s definitely nothing magic about it.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_globeBroken&gt;&gt;
  This one is shattered. The liquid is all gone, and the glittery flakes
  have splashed a sad trail across several damp, burned papers.
  ?P
  The figure within the broken globe is miraculously still intact. It&#39;s
&lt;&lt;else&gt;&gt;
  This one is somewhat larger than the typical trinket,
  which is why the wolf initially thought it to be an arcane globe.
  Within the globe is a figurine of
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $n_free&gt;&gt;
  an extremely male dragon, leaning against a pink pillar
  in a lewd pose.
  One arm is raised in the air in triumph.
  HIs other hand is firmly grasping his enormous erect cock.
  Emerging from the tip of the cock is a jet of cum, frozen in the
  act of spurting, and sparkling with the same metallic sheen as the
  glitter &lt;&lt;= $n_globeBroken ? &quot;that was&quot; : &quot;&quot;&gt;&gt;
  in the globe.

  ?P
  The inscription at the base of the globe says
  &quot;Thank You For Visiting The Caverns Of Lusty Spires!&quot;
  Larger letters spiraling down the pink pillar
  &lt;&lt;if $n_globePartialViewed&gt;&gt;
    do &lt;em&gt;not&lt;/em&gt; say
    &lt;span class=nobr&gt;&quot;CARPE DIEM&quot;&lt;/span&gt;,
    as the wolf had assumed.
    Instead, the letters
  &lt;&lt;/if&gt;&gt;
  spell out
  &lt;span class=nobr&gt;&quot;CARPE DICK!&quot;&lt;/span&gt;

  &lt;&lt;if $n_passIsKnown&gt;&gt;
    ?P
    Nero already has plenty of reason to dislike Ivex.
    But the fact that the panther has chosen
    &lt;span class=nobr&gt;&quot;CARPE DICK&quot;&lt;/span&gt;
    to be his password... Nero will make him &lt;em&gt;eat&lt;/em&gt; dick!
  &lt;&lt;else&gt;&gt;
    ?P
    Nero shakes his head at the panther&#39;s questionable taste
    in vulgar humor.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
  a dragon with wings furled,
  leaning against a pink pillar in a lazy pose.
  The dragon&#39;s back is toward Nero, and one arm is raised in greeting.

  ?P
  The base of the globe has an inscription with two lines
  of text that read:
  &lt;blockquote&gt;
    &lt;span class=nobr&gt;Thank You For Vis&amp;mdash;&lt;/span&gt;&lt;br&gt;
    &lt;span class=nobr&gt;The Caverns Of L&amp;mdash;&lt;/span&gt;
  &lt;/blockquote&gt;
  The rest of the name is not visible from Nero&#39;s bound position,
  but it&#39;s probably the spectacular and popular Caverns of Luminance,
  or possibly the less popular but arcanely interesting Caverns of Liskov.
  Large letters that spiral down the pink pillar read
  &lt;span class=nobr&gt;&quot;CARPE DI&amp;mdash;&quot;&lt;/span&gt;,
  a traditional adage that translates to &quot;seize the day&quot;.
  It&#39;s an exhortation to celebrate the present instead of
  worrying about some fickle future.
  Which of course is not so easy for Nero to do at the moment.

  &lt;&lt;set $n_globePartialViewed = true&gt;&gt;
  &lt;!-- not adding to pw-found until wantPass --&gt;

  ?P
  &lt;&lt;if MT.passWanted()&gt;&gt;
    &lt;&lt;include [[n1x Globe WantPass]]&gt;&gt;
  &lt;&lt;else&gt;&gt;
    The snow globe is another oddity to add to the catalog
    of Ivex&#39;s oddities, but otherwise it doesn&#39;t seem useful.
    &lt;&lt;mt-seen $n_dimMirror&gt;&gt;
      The &lt;&lt;mta-no-loop &quot;n1x Mirror&quot;&gt;&gt;?mirror&lt;&lt;/mta-no-loop&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    leaning against it seems more useful.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if !$n_free&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the globe.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;elseif !MT.passWanted()&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the globe.&quot; &quot;not interested&quot;&gt;&gt;
    &lt;&lt;elseif !_oneLeft&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the globe.&quot; &quot;reluctant&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl [[n1x Globe Ask]]&gt;&gt;Ask Ivex about the globe.&lt;&lt;/mtl&gt;&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if _pwActions != null&gt;&gt;
    _pwActions
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_tooClever /* &amp;&amp; !$n_globeLanced */&gt;&gt;
    &lt;li&gt;[[Destroy the globe with Nackle.|n2x Lance Globe]]&lt;/li&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_dimGlobe = !_hasAction;
  $n_globeViewed = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="480" name="n1x Grav Ask 1" tags="mt-ready" position="7650,1300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-always n_gravAsked false&gt;&gt;
&lt;&lt;vi-always n_gravKnown false&gt;&gt;

&lt;&lt;if $n_subby&gt;&gt;
  Nero tries to phrase a question respectful enough to get a response.
  &quot;Your magic abilities are impressive, especially those &lt;em&gt;six&lt;/em&gt;
  Dream Crystals. How are you keeping them all powered
  for so long?&quot;
  &lt;&lt;set _pw = &quot;Your Magic Abilities Are Impressive&quot;&gt;&gt;

&lt;&lt;elseif $n_abused&gt;&gt;
  Nero speaks hesitantly, hoping that Ivex will take the opportunity
  to brag.
  &quot;You have... &lt;em&gt;six&lt;/em&gt; Dream Crystals? I can barely power one.&quot;

  &lt;&lt;set _pw = &quot;You Have&quot;&gt;&gt;

&lt;&lt;else&gt;&gt;
  Nero phrases an observation that should provoke a response.
  &quot;I&#39;m impressed by your ability to power &lt;em&gt;six&lt;/em&gt; Dream Crystals.
  But mastery of magic is more than just raw power.&quot;

  &lt;&lt;set _pw = &quot;I&#39;m Impressed By Your Ability To Power Six&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&quot;Dream Crystals?&quot;
&lt;&lt;if $n_candleLit&gt;&gt;
  Ivex tilts his head in confusion.
&lt;&lt;elseif $n_ivexWasReceptive&gt;&gt;
  Ivex frowns in confusion.
&lt;&lt;else&gt;&gt;
  Ivex snarls with confusion.
&lt;&lt;/if&gt;&gt;
&quot;What nonsense are you spouting now?&quot;

&lt;&lt;mf-pass _pw&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
A moment later, the panther&#39;s face lightens, and he laughs.
&quot;Ah, you must mean my Gravity Crystals.
&lt;&lt;if $n_ivexWasReceptive&gt;&gt;
  They&#39;re convenient and useful devices. I&#39;m very fond of them.&quot;
&lt;&lt;else&gt;&gt;
  I should not be surprised that you don&#39;t recognize them.
  I keep forgetting that
  &lt;&lt;if $n_thief&gt;&gt;
    you are a thief, not a real mage.&quot;
  &lt;&lt;else&gt;&gt;
    you failed out of mage school.&quot;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;em&gt;Gravity&lt;/em&gt; Crystals? Nero is startled, and somewhat concerned.

?P
[[Continue|n1x Grav Ask 2]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="481" name="n1x Grav Ask 2" tags="mt-ready" position="7775,1300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

Nero is professionally horrified.
&lt;&lt;mt-seen $kn_Gravity&gt;&gt;
  [[Gravity Crystals|n1x Gravity Crystals 1]]
&lt;&lt;/mt-seen&gt;&gt;
are definitely an
inappropriate tool for holding a bondage cross.
The wolf blurts out, &quot;I&#39;ve never been able to stabilize more than four!
How are you avoiding Rankine Calamity?&quot;

?P
&quot;Rankine... Calamity?&quot; Ivex&#39;s response is hesitant at first,
&lt;&lt;if $n_ivexReceptive&gt;&gt; /* ignore ivexWasReceptive */
  but then he laughs.
  &quot;My applications of Gravity Crystals are just one of the many
  magical innovations that I&#39;ve developed here in my domain.
  As you can see, six crystals are trivially simple for me,
  and I can control many more.
  Perhaps I will give you a demonstration...
  once this discussion has reached a satisfactory conclusion.&quot;
&lt;&lt;else&gt;&gt;
  but then he sneers.
  &quot;You clearly have no understanding of the powers that I can
  wield in my realm. Six crystals are trivially easy for me,
  and I can control many more.
  You may well come to regret my demonstration of that ability.
  Stop trying to change the subject!&quot;
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if !$n_mageSight&gt;&gt;
  The wolf is quite sure that the panther is bluffing.
&lt;&lt;else&gt;&gt;
  The wolf is certain that the panther is bluffing.
  In the web of exotic energy that connects the crystals,
  each strand of it is sturdy, but the web itself is much too
  complex to remain stable.
&lt;&lt;/if&gt;&gt;

Ivex has probably never even &lt;em&gt;heard&lt;/em&gt; of Rankine Calamity.

?P
Powerful mages without proper training are extremely dangerous.
But they also have a natural tendency to self-destruct.

?P
Nero is elated.
Here is a flaw that he might be able to exploit!

?P
$n_afterAction

&lt;&lt;run
  delete $n_dimCross;
  $n_banter = true;
  $n_gravAsked = true;
  $n_gravKnown = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="482" name="n1x Grav Known" tags="mt-ready inclusion" position="7525,1375" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $n_struggled&gt;&gt;
  The wooden cross swayed slightly when Nero struggled earlier.
  But
  &lt;&lt;mt-seen $kn_Dream&gt;&gt;
    &lt;&lt;tran-cut [[Dream Crystals|n1x Dream Crystals 1]]&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  always hold their material
  rigidly in place.
  So these cannot be Dream Crystals!
  ?P
  Nero thinks about what else they could be,
  and he has a terrible thought, a sudden realization of what
  these &lt;em&gt;must&lt;/em&gt; be.
  ?P
  They&#39;re
  &lt;&lt;mt-seen $kn_Gravity&gt;&gt;
    &lt;&lt;tran-cut [[Gravity Crystals|n1x Gravity Crystals 1]]&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;else&gt;&gt;
  These crystals are not
  &lt;&lt;mt-seen $kn_Dream&gt;&gt;
    &lt;&lt;tran-cut [[Dream Crystals|n1x Dream Crystals 1]]&gt;&gt;,
  &lt;&lt;/mt-seen&gt;&gt;
  as Nero had originally thought.
  Rather, they&#39;re
  &lt;&lt;mt-seen $kn_Gravity&gt;&gt;
    &lt;&lt;tran-cut [[Gravity Crystals|n1x Gravity Crystals 1]]&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_mageSight&gt;&gt;
  in what&#39;s clearly a dangerously unstable configuration.
  The energy flows between them are immense!
  ?P
  As a professional mage, Nero is quite appalled that Ivex
  &lt;&lt;= $n_ivexGone ? &quot;seemed&quot; : &quot;is&quot;&gt;&gt;
  completely unaware of the hazards
  inherent in his thoughtless use of the crystals.
  But as a captive in Ivex&#39;s lair,
  Nero is exhilarated by the panther&#39;s stupidity.
  The instability of the crystals is a flaw that Nero might be able to exploit!
  &lt;&lt;if !$n_ivexGone&gt;&gt;
    He just needs to find a way to do it without Ivex noticing...
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  in a configuration that is probably less stable than
  the panther mage
  &lt;&lt;= $n_ivexGone &amp;&amp; $n_gravAsked ? &quot;seemed to think&quot; : &quot;believes&quot;&gt;&gt;
  it is.
  ?P
  &lt;&lt;if MP_beforeCast === $n_magicPhase&gt;&gt;
    Nero had better escape before he gets injured by that
    impending disaster!
  &lt;&lt;else&gt;&gt;
    Perhaps Ivex&#39;s ignorance of the problem has led him to
    create a structure with a flaw that Nero can exploit.
    The wolf may need to examine the Gravity Crystal power flows.
    His magic is still depleted from his failed spell,
    but he does have enough energy to cast mage-sight.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="483" name="n1x Grav Unknown" tags="mt-ready inclusion" position="7525,1175" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $n_gravViewed&gt;&gt;
  The lupine mage is professionally appalled.
  &lt;&lt;mt-seen $kn_Dream&gt;&gt;
    &lt;&lt;tran-cut [[Dream Crystals|n1x Dream Crystals 1]]&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
   certainly &lt;em&gt;can&lt;/em&gt;
  be used to hold up a bondage cross.
&lt;&lt;else&gt;&gt;
  This is an astonishingly extravagant use of magic!
  &lt;&lt;mt-seen $kn_Dream&gt;&gt;
    &lt;&lt;tran-cut [[Dream Crystals|n1x Dream Crystals 1]]&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;em&gt;do&lt;/em&gt;
  get used to hold materials in place during
  construction projects.
  And they certainly &lt;em&gt;can&lt;/em&gt; be used to hold up a bondage cross.
&lt;&lt;/if&gt;&gt;
But the power consumed by a Dream Crystal increases exponentially
the longer it remains active.
And to use &lt;em&gt;six&lt;/em&gt; of them when one would be enough?

?P
&lt;&lt;if !$n_ivexGone&gt;&gt;
  Nero wonders if he should probe Ivex about the crystals.
&lt;&lt;elseif !$n_gravViewed&gt;&gt;
  Nero wishes he could probe Ivex about the crystals.
&lt;&lt;else&gt;&gt;
  Nero wonders if he should have probed Ivex about the crystals.
&lt;&lt;/if&gt;&gt;
Maybe the panther is unaware of the growing power requirements?
But the increased energy drain should have been obvious within minutes...
Unless the panther&#39;s energy source is enormous!

?P
&lt;&lt;if MP_beforeCast === $n_magicPhase&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  Well, this is all intellectually fascinating,
  but not particularly useful.
  Nero reminds himself that he really should focus on
  the magic he needs to escape.

&lt;&lt;elseif $n_ivexGone&gt;&gt;
  Still, any power source, no matter how enormous,
  will eventually fail to satisfy the growing hunger of the
  Dream Crystals. And the exponential progression will make
  collapse happen more quickly than
  intuition would expect.
  ?P
  All Nero has to do is wait for the inevitable consequences
  of mathematics, which should not take long at all.
  And perhaps he can speed the
  process by increasing the strain on the crystals.

&lt;&lt;elseif $n_subby&gt;&gt;
  Learning more about the crystals might help Nero understand
  the panther&#39;s power.

&lt;&lt;else&gt;&gt;
  Learning more about Ivex&#39;s power might help find ways
  to bypass his defenses.
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="484" name="n1x Grav" tags="mt-ready" position="7400,1250" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_gravNoticed true&gt;&gt;
&lt;&lt;em-assert !$n_gravAsked || $n_gravViewed&gt;&gt;
&lt;&lt;em-assert !$n_gravKnown || $n_gravViewed&gt;&gt;

&lt;&lt;cv-try n_magicPhase
  `MP_beforeCast` `MP_contact` `MP_tapLost`&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

In the reflection in the
&lt;&lt;mt-seen $n_dimMirror&gt;&gt;
  &lt;&lt;mta-no-loop &quot;n1x Mirror&quot;&gt;&gt;?mirror&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;if $n_candleLit&gt;&gt;
  near the
  &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;/if&gt;&gt;
on the desk,
Nero sees that the
&lt;&lt;mt-seen $n_dimCross&gt;&gt;
  &lt;&lt;mta-no-loop &quot;n1x Cross&quot;&gt;&gt;wooden cross&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;/mt-seen&gt;&gt;
is not physically anchored to anything in this room.
Instead, there are several glowing crystals
floating behind the
&lt;&lt;if !$n_mageSight&gt;&gt;
  cross.
&lt;&lt;else&gt;&gt;
  cross, and a web of exotic energy connects them all together.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_gravKnown || $n_struggled&gt;&gt;
  &lt;&lt;include [[n1x Grav Known]]&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;include [[n1x Grav Unknown]]&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if !$n_gravKnown&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the ?crystals.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;elseif MP_beforeCast === $n_magicPhase&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the ?crystals.&quot; &quot;doesn&#39;t seem important&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl [[n1x Grav Ask 1]]&gt;&gt;Ask Ivex about the ?crystals.&lt;&lt;/mtl&gt;&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if MP_beforeCast !== $n_magicPhase&gt;&gt;
    &lt;&lt;if $n_gravKnown &amp;&amp; !$n_mageSight&gt;&gt;
      &lt;&lt;mtl &quot;n1s Cast Sight 1&quot;&gt;&gt;Cast mage-sight.&lt;&lt;/mtl&gt;&gt;
    &lt;&lt;elseif $n_ivexGone&gt;&gt;
      &lt;&lt;include &quot;n2b Struggle Action&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_dimGrav = !_hasAction;
  $n_gravViewed = true;
  if ($n_struggled) {
    $n_gravKnown = true;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="485" name="n1x Gravity Crystals 1" tags="mt-ready" position="7775,1425" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  &lt;&lt;vi-ignore n_free&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Gravity Crystals, unlike Dream Crystals, have little practical use beyond
carnival tricks.
Despite the name, their power has nothing to do with gravity.
They&#39;re a simple application of telekinetic energy fields,
bound to a convenient crystal substrate.

?P
In this modern age, telekinesis is a commonplace magic service,
not an eerie mystery.
So when the infamous fox mage Kelvin the Elder
introduced the world to the first telekinetic crystal,
he felt that the name &quot;Telekinetic Crystal&quot;
was not intriguing enough for the invention.
He reached for the exotic and found the word &quot;Gravity&quot;,
a mysterious force that is still poorly understood today.
The word &quot;Gravity&quot; on his posters attracted more attention
than the alternatives the fox mage tried.
And thus, &quot;Gravity Crystals&quot; were born.

?P
Traditional telekinesis requires intensive training
before it can be used for tasks other than random destruction.
Gravity Crystals are different. Their telekinetic
ability is quite limited. A small crystal can do little more
than levitate itself.
Larger crystals can pull or push small objects that
are not too far away, but nothing more.
Gravity Crystals are toys in comparison to the versatility
of Dream Crystals.
?P
But Gravity Crystals require very little training to use.
Even novices
with a minuscule amount of raw magic power can use
a small Gravity Crystal to affix a notice to a wall.
Not that anyone would do that regularly, of course,
since inexpensive nails or glue would also suffice.

?P
Ivex&#39;s crystals are much more powerful than is typical,
since they&#39;re able to hold more than paper.

?P
That isn&#39;t the problem.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1x Gravity Crystals 2]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="486" name="n1x Gravity Crystals 2" tags="mt-ready" position="7900,1425" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight n_free n_ivexGone&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

The &lt;em&gt;problem&lt;/em&gt; with careless use of Gravity Crystals
is a phenomenon known as Rankine Calamity,
named after the wolf mage who first experienced it.

?P
Gravity Crystals in close proximity will naturally
attract each other with &lt;em&gt;spectral&lt;/em&gt; force.
This tendency can be counteracted
by a small adjustment to their tensors so that their telekinetic
projections help keep them apart.
For two crystals, the adjustment is simple.
But the complexity of the task increases geometrically
with each additional crystal, since each one needs
additional projections to hold it apart from every other one.

?P
Rankine&#39;s Calamity happened during a demonstration
of four crystals that the wolf mage was directing to dance in front of him.
Four crystals need twelve projections in a delicate
balance that continually shifts as the crystals and the
objects near them move about.
Rankine had practiced this feat many times,
enough to make it seem easy.
And perhaps that was his mistake.

?P
In middle of the demonstration, his associate,
the infamous fox mage known as Kelvin the Elder,
whimsically threw a fifth crystal toward the wolf&#39;s tail.
Rankine&#39;s well-practiced feat of balancing twelve projections
suddenly became a problem of balancing twenty.

?P
The wolf frantically commuted tensors as quickly as he could.
And he almost had it.
He held all five of the crystals perfectly controlled for a moment.
But two of the twenty projections were poorly aligned,
and the slippage altered the balance enough for the
whole web to collapse.

?P
All five crystals suddenly flew rapidly toward each other.
The one near Rankine&#39;s tail went straight up his ass.
The other four collided at his crotch, creating an implosion
that caused the crystals to disappear, taking his genitals with them.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_Gravity&gt;&gt;
  &lt;&lt;return-before &quot;n1x Gravity Crystals 1&quot;&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="487" name="n1x Kelvin 1" tags="mt-ready" position="7775,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  &lt;&lt;vi-ignore n_free&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;!-- weird special case, since this kw is on last page of another kw --&gt;
  &lt;&lt;run
    if ($n_kwAnnounce != null) {
      delete $n_kwAnnounce;
      MT.mdSet(&quot;kn_Dream&quot;, false);
    }
  &gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

The infamous fox mage Kelvin the Elder
had been experimenting with the axioms of Dream Salt,
when the lion emperor Clothos put out a call for artisans
who could create some type of monument that would suitably
commemorate his reign.
?P
Kelvin&#39;s proposal for a statue was the most intriguing to the emperor.
Clothos chose the subject and modeled it himself,
which was then used to imbue an enormously-larger-than-life pattern
into Kelvin&#39;s new invention, his Dream Crystal.
?P
The crystal was activated beneath some scaffolds.
On top of the scaffolds, smelters poured molten gold into the space above
the crystal.
The Dream Crystal&#39;s magic then trapped and held the molten gold
in place in the air,
until the gold cooled enough to solidify.
?P
The result was the most perfect golden sculpture of
the lion emperor&#39;s enormous footpaw,
without any of the blemishes or distortions that would arise if it
were formed in contact with the surfaces of a traditional mold.
?P
That was the plan. And it did work. Mostly.
Kelvin unexpectedly died from it.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1x Kelvin 2]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="488" name="n1x Kelvin 2" tags="mt-ready" position="7900,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  &lt;&lt;vi-ignore n_free&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

When the fox mage described his proposal to Clothos,
the lion emperor immediately understood that the
mold-less casting would be a spectacular sight,
and he suggested that it should be done in front of an audience.
Kelvin, ever the showman, readily agreed.
?P
So, on the day of the event,
Kelvin stood beside his crystal,
on a podium in a stadium,
below scaffolds holding cauldrons
of molten gold that were ready to
be poured down upon him.

?P
He was not worried. He had already made plenty of
test statuettes with small amounts of molten gold,
and those experiments had worked much better than expected.
?P
When he progressed to doing full-sized rehearsals
with water instead of molten gold,
Kelvin did discover some problems that were not apparent in the
smaller models. But those problems were all easily addressed.
The final rehearsals had all gone flawlessly.
?P

Unfortunately, the rehearsals neglected to fully account for the differing
weights and viscosities of water and gold.
Kelvin&#39;s small experiments succeeded because they were fed with
considerably more power than was necessary for the task.
The full-sized apparatus was more parsimonious,
but the Dream Crystal was still able to attract
every bit of the water into the intended shape.
No drops fell to the ground before deactivation of the spell.

?P
The molten gold did not behave quite as neatly.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1x Kelvin 3]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="489" name="n1x Kelvin 3" tags="mt-ready" position="8025,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  &lt;&lt;vi-ignore n_free&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

The majority of the molten gold &lt;em&gt;did&lt;/em&gt;
become fixed in place by the Dream Crystal.
But a substantial amount of the gold
escaped from the crystal&#39;s influence, dropping to the ground in
great streams and splashes.

?P
Many of those splashes struck Kelvin&#39;s assistant Rankine,
a wolf mage who was chanting a coolant spell that kept the
wooden scaffolds from being damaged by the cauldrons of molten gold.
Rankine was quick enough to modify the coolant spell to include himself,
thus escaping serious injury,
until a dollop of gold splashed his
face and impeded the wolf&#39;s ability to chant.
At that point, most of Rankine&#39;s body was already covered with
a layer of cooled gold,
so the remaining splashes of molten gold rarely made
direct contact with his flesh.
?P
But his interrupted coolant spell did not have a chance to act
on the dollop of molten gold that interrupted it,
so the wolf&#39;s face became severely burned,
beyond the abilities of healers at the time to repair.
Rankine eventually died at his own hand, three months later.
?P
The fox mage Kelvin managed to completely avoid injury
from the streams of gold,
in no small part by using the larger mage Rankine as a shield.
?P
Unfortunately, Rankine was also the main source of power
for the Dream Crystal, which was keeping the giant golden footpaw
floating in the air above them.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1x Kelvin 4]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="490" name="n1x Kelvin 4" tags="mt-ready" position="8150,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  &lt;&lt;vi-ignore n_free&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

As Rankine became distracted by his burns,
his control of his energy flows wavered.
The Dream Crystal&#39;s spell collapsed.
The giant golden footpaw fell.
?P
Of course, there were wooden supports intended to catch the sculpture
when it was finished.
?P
Unfortunately, several of the wooden supports were
damaged by splashes of molten gold.
?P
The supports held for a moment before collapsing.
The giant golden footpaw fell a second time,
on top of Rankine, who was on top of Kelvin,
smashing both of them through the
small wooden podium they were huddled upon,
crushing them both into the ground beneath.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1x Kelvin 5]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="491" name="n1x Kelvin 5" tags="mt-ready" position="8275,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  &lt;&lt;vi-ignore n_free&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Both Kelvin and Rankine, fox mage and wolf,
survived that crushing impact with only bruises and claustrophobia.
The golden footpaw had not cooled sufficiently to be a lethal weight.
The bottom of it was still just soft enough to be deformed by any
sufficiently hard object it fell upon,
which was mostly Rankine and his coats of gold.
?P
So the two mages became trapped in a somewhat Rankine-shaped cavity
beneath the golden footpaw.
The cavity had air enough for them to breathe,
long enough for Kelvin to break the gold that was sealing the wolf&#39;s muzzle,
and then calm down Rankine enough for the
wolf mage to cast a spell
that dug a tunnel through the dirt for them to escape.
?P
When the two emerged from the hole beside the giant golden footpaw,
the audience in the stadium went wild with cheers and applause.
Kelvin raised his arms in triumph and bowed.
He had realized that the audience had no idea that this outcome
had not been planned, and he was confident that this little mishap
would end up enhancing his reputation.
?P
But the lion emperor Clothos was not so easily pleased.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1x Kelvin 6]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="492" name="n1x Kelvin 6" tags="mt-ready" position="8400,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  &lt;&lt;vi-ignore n_free&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Clothos was unhappy that the finished golden footpaw,
while still a magnificent creation,
was marred by the deformation of a Rankine-like cavity,
right in middle of the metatarsal pad.
The lion emperor was adamant that the fox mage had
promised an &lt;em&gt;unblemished&lt;/em&gt; sculpture.
?P
Kelvin, not unreasonably, pointed out that the defect would not
be visible at the footpaw&#39;s intended home, where the paw pad
would be resting directly atop a marble plinth.
?P
Clothos was not convinced by that argument, but he eventually
agreed to forgive Kelvin with a minor penalty.
When the gigantic golden footpaw was finally lowered onto
its marble plinth,
the fox mage was stripped, bound, gagged,
and placed inside that Rankine-shaped cavity
beneath the footpaw&#39;s metatarsal pad.
?P
This was not intended to be a death sentence. Everyone knew that
Kelvin was a prodigious mage, capable of escaping many dire
situations, such as that spectacular show that happened when the
gigantic golden footpaw was created in the first place.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1x Kelvin 7]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="493" name="n1x Kelvin 7" tags="mt-ready" position="8525,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  &lt;&lt;vi-ignore n_free&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Everyone was somewhat surprised when Kelvin the Elder never appeared again.
?P
Most people accepted the simple theory: When the fox mage escaped,
he must have decided that the lion emperor&#39;s kingdom was no longer
hospitable to him,
so he left for greener pastures and started a new life elsewhere
with a new identity.
?P
It wasn&#39;t until the fox mage&#39;s assistant Rankine died, three months later,
that the truth came to light.
The wolf mage&#39;s diaries revealed that Kelvin the Elder,
known at the time as the world&#39;s greatest fox mage,
was merely an actor hired by Rankine, with no magic ability of his own.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_Kelvin&gt;&gt;
  &lt;&lt;mta &quot;n1x Dream Crystals 2&quot;&gt;&gt;Return&lt;&lt;/mta&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="494" name="n1x Knife" tags="mt-ready" position="6725,2375" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;

&lt;&lt;cv-try n_magicPhase `MP_beforeCast``MP_contact` `MP_tapLost`&gt;&gt;

&lt;&lt;if $n_free&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;

  &lt;&lt;if $n_knifeTaken&gt;&gt;
    Nero is holding an ordinary letter opener,
    probably made of steel, that
  &lt;&lt;else&gt;&gt;
    The letter opener is on the floor where Nero dropped it.
    It&#39;s probably made of steel, and it
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if $n_tooClever&gt;&gt;
    seems sharp enough to be useful.
  &lt;&lt;else&gt;&gt;
    was sharp enough to cut his leather bonds.
  &lt;&lt;/if&gt;&gt;
  ?P
  &lt;&lt;if $n_mageSight&gt;&gt;
    There&#39;s nothing magical about it.
  &lt;&lt;/if&gt;&gt;
  It&#39;s not really much sharper than the wolf&#39;s teeth,
  and it lacks a grip, which makes
  it awkward as a weapon.
  And Nero has little training in the use of a blade in combat.
  ?P
  Still, there are many reasons a steel blade might be
  helpful, especially when the wolf does not have
  &lt;&lt;= $n_mageSight ? &quot;full&quot; : &quot;any&quot;&gt;&gt;
  use of his magic yet.

&lt;&lt;else&gt;&gt;
  Amid the clutter of the
  &lt;&lt;if $n_candleLit&gt;&gt;
    desk, near the side furthest from the
    &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;,
  &lt;&lt;else&gt;&gt;
    desk
  &lt;&lt;/if&gt;&gt;
  is a letter opener.
  &lt;&lt;if $n_mageSight&gt;&gt;
    There&#39;s no sign of magic in it,
  &lt;&lt;else&gt;&gt;
    It&#39;s unadorned,
  &lt;&lt;/if&gt;&gt;
  and it&#39;s probably made of steel.

  &lt;&lt;if MP_beforeCast === $n_magicPhase&gt;&gt;
    ?P
    Nero keeps a knife of his own in his robes.
    Cutting is often needed when preparing spells.
    &lt;&lt;if $n_naked&gt;&gt;
      But since he&#39;s no longer wearing his robes (or anything else),
      it&#39;s good to know that the letter opener is nearby,
      if he ever has a chance to reach it.
    &lt;&lt;else&gt;&gt;
      But it&#39;s likely that Ivex has already removed the wolf mage&#39;s weapons,
      so it&#39;s good to know that the letter opener is nearby,
      if he ever has a chance to reach it.
    &lt;&lt;/if&gt;&gt;

  &lt;&lt;else&gt;&gt;
    One edge of it seems like it might be sharp enough
    to cut Nero&#39;s leather bonds.
    ?P
    Too bad it&#39;s on the desk, far out of reach.
    &lt;&lt;if $n_bottleViewed&gt;&gt;
      ?P
      But perhaps &lt;em&gt;it&lt;/em&gt; could reach &lt;em&gt;him&lt;/em&gt;,
      if the wolf mage can find a way to use the
      &lt;&lt;mt-seen $n_dimBottle&gt;&gt;
        &lt;&lt;mta-no-loop &quot;n1x Bottle&quot;&gt;&gt;
          bottle that has Nackle&#39;s Device
        &lt;&lt;/mta-no-loop&gt;&gt;!
      &lt;&lt;/mt-seen&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if $n_free &amp;&amp; !$n_knifeTaken&gt;&gt;
    &lt;&lt;mtl [[n2x Knife Take]]&gt;&gt;Take the letter opener.&lt;&lt;/mtl&gt;&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_dimKnife = !_hasAction;
  $n_knifeViewed = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="495" name="n1x Look Normal" tags="mt-ready inclusion" position="5400,1000" size="100,200">&lt;&lt;nobr&gt;&gt;

&lt;&lt;set _desk =
  $n_deskCleared ? &quot;grandiose desk&quot;
  : $n_deskBurned ? &quot;slightly-charred desk&quot;
  : &quot;cluttered desk&quot;&gt;&gt;
  
&lt;&lt;set _window =
  $n_windowBroken ? &quot;broken window&quot;
  : &quot;prominent round window&quot;&gt;&gt;

&lt;&lt;set _map =
  $n_mapDefaced ? &quot;defaced map&quot;
  : $n_wandExploded ? &quot;burning map&quot;
  : &quot;large map&quot;&gt;&gt;

&lt;&lt;set _painting =
  $n_paintingBlasted ? &quot;tattered painting&quot;
  : $n_paintingKnown ? &quot;painting of Ivex&#39;s mother&quot;
  : &quot;painting of a pantheress&quot;&gt;&gt;

&lt;&lt;set _cabinet = $n_wandExploded ? &quot;charred cabinet&quot; : &quot;cabinet&quot;&gt;&gt;
&lt;&lt;set _bookcases = $n_wandExploded ? &quot;singed bookcases&quot; : &quot;bookcases&quot;&gt;&gt;

&lt;&lt;set if ($n_free || !$n_abused) {
  _worried = false;
} else if ($n_subby) {
  _worried = true;
} else if ($n_tough || MP_beforeCast === $n_magicPhase) {
  _worried = false;
} else {
  _worried = true;
}
&gt;&gt;

&lt;&lt;if _neroAppraise != null&gt;&gt;
  _neroAppraise

&lt;&lt;elseif !$n_ivexGone &amp;&amp; !$n_free&gt;&gt;
  Nero
  &lt;&lt;= _worried ? MT.pick([
    &quot;broods over&quot;,
    &quot;frets over&quot;,
    &quot;nervously reviews&quot;,
    &quot;obsesses over&quot;,
    &quot;suppresses anxiety about&quot;,
    &quot;searches the facts of&quot;,
    &quot;tries to calmly analyze&quot;,
    &quot;worries over&quot;,
  ]) : MT.pick([
    &quot;appraises&quot;,
    &quot;assesses&quot;,
    &quot;considers&quot;,
    &quot;contemplates&quot;,
    &quot;examines&quot;,
    &quot;evaluates&quot;,
    &quot;ponders&quot;,
    &quot;reflects on&quot;,
  ])&gt;&gt;
  his situation.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_free&gt;&gt;
  &lt;&lt;if $n_knifeTaken &amp;&amp; $n_mirrorTaken&gt;&gt;
    &lt;&lt;mt-seen $n_dimMirror&gt;&gt;
      He&#39;s holding a &lt;&lt;mta &quot;n1x Mirror&quot;&gt;&gt;magic mirror&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    &lt;&lt;mt-seen $n_dimKnife&gt;&gt;
      and a &lt;&lt;mta &quot;n1x Knife&quot;&gt;&gt;letter opener&lt;&lt;/mta&gt;&gt;,
    &lt;&lt;/mt-seen&gt;&gt;
    while standing naked
  &lt;&lt;elseif $n_knifeTaken&gt;&gt;
    &lt;&lt;mt-seen $n_dimKnife&gt;&gt;
      He&#39;s holding a &lt;&lt;mta &quot;n1x Knife&quot;&gt;&gt;letter opener&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    while standing naked
  &lt;&lt;elseif $n_mirrorTaken&gt;&gt;
    &lt;&lt;mt-seen $n_dimMirror&gt;&gt;
      He&#39;s holding a &lt;&lt;mta &quot;n1x Mirror&quot;&gt;&gt;magic mirror&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    while standing naked
  &lt;&lt;else&gt;&gt;
    He&#39;s standing naked
  &lt;&lt;/if&gt;&gt;
  in middle of
  &lt;&lt;if $n_wandExploded&gt;&gt;
    &lt;&lt;mt-seen $n_dimStudy&gt;&gt;
      a &lt;&lt;mta &quot;n1x Study&quot;&gt;&gt;ruined study&lt;&lt;/mta&gt;&gt;.
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mt-seen $n_dimStudy&gt;&gt;
      &lt;&lt;mta &quot;n1x Study&quot;&gt;&gt;Ivex&#39;s study&lt;&lt;/mta&gt;&gt;.
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_wandExploded&gt;&gt;
    &lt;&lt;vi-always n_mageSight true&gt;&gt;
    A shaky web of exotic energy connects the few magic axioms
    that remain in the room.
    ?P
  &lt;&lt;elseif $n_mageSight&gt;&gt;
    A dense web of exotic energy fills the space,
    connecting a confusing variety of magic axioms together.
    ?P
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_crossBurnLanced&gt;&gt;
    The wooden cross is now a reeking
    pile of smoky scraps in a corner.
  &lt;&lt;elseif $n_crossScrapsBurned&gt;&gt;
    The wooden cross is now a cozy
    fire of splintered remnants in a corner.
  &lt;&lt;elseif $n_crossPartsBurned&gt;&gt;
    &lt;&lt;mt-seen $n_dimCross&gt;&gt;
      The &lt;&lt;mta &quot;n1x Cross&quot;&gt;&gt;broken cross&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    is slowly being consumed by fire.
  &lt;&lt;elseif $n_crossLanced&gt;&gt;
    The wooden cross is now a piss-stained heap of
    splintered remnants in a corner.
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mt-seen $n_dimCross&gt;&gt;
      The &lt;&lt;mta &quot;n1x Cross&quot;&gt;&gt;wooden cross&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    &lt;&lt;= $n_tooClever ? &quot;is broken and&quot; : &quot;has fallen over and is&quot;&gt;&gt;
    lying on the floor.
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_knifeOnFloor &amp;&amp; $n_mirrorBroken&gt;&gt;
    &lt;&lt;mt-seen $n_dimKnife&gt;&gt;
      Near that is the &lt;&lt;mta &quot;n1x Knife&quot;&gt;&gt;letter opener&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    &lt;&lt;mt-seen $n_dimMirror&gt;&gt;
      and the &lt;&lt;mta &quot;n1x Mirror&quot;&gt;&gt;broken mirror&lt;&lt;/mta&gt;&gt;.
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;elseif $n_knifeOnFloor&gt;&gt;
    &lt;&lt;mt-seen $n_dimKnife&gt;&gt;
      Near that is the &lt;&lt;mta &quot;n1x Knife&quot;&gt;&gt;letter opener&lt;&lt;/mta&gt;&gt;.
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;elseif $n_mirrorBroken&gt;&gt;
    &lt;&lt;mt-seen $n_dimMirror&gt;&gt;
      Near that is the &lt;&lt;mta &quot;n1x Mirror&quot;&gt;&gt;broken mirror&lt;&lt;/mta&gt;&gt;.
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  ?P

&lt;&lt;else&gt;&gt;

  &lt;&lt;if $n_abused &amp;&amp; $n_naked&gt;&gt;
    His groin still aches, and his exposed balls are trying to retreat
    into his body.
    He&#39;s completely naked and bound
  &lt;&lt;elseif $n_abused&gt;&gt;
    His groin still aches from the abuse of his balls.
    He&#39;s bound
  &lt;&lt;elseif $n_naked&gt;&gt;
    He&#39;s naked and bound
  &lt;&lt;else&gt;&gt;
    He&#39;s bound
  &lt;&lt;/if&gt;&gt;
  with leather restraints to a
  &lt;&lt;mt-seen $n_dimCross&gt;&gt;
    &lt;&lt;mta &quot;n1x Cross&quot;&gt;&gt;wooden cross&lt;&lt;/mta&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;if $n_gravNoticed&gt;&gt;
    &lt;&lt;mt-seen $n_dimGrav&gt;&gt;
      that has &lt;&lt;mta &quot;n1x Grav&quot;&gt;&gt;glowing crystals&lt;&lt;/mta&gt;&gt; behind it,
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if !$n_studyViewed&gt;&gt;
    &lt;&lt;mt-seen $n_dimStudy&gt;&gt;
      in what looks like a &lt;&lt;mta &quot;n1x Study&quot;&gt;&gt;mage&#39;s study&lt;&lt;/mta&gt;&gt;.
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mt-seen $n_dimStudy&gt;&gt;
      in middle of &lt;&lt;mta &quot;n1x Study&quot;&gt;&gt;Ivex&#39;s study&lt;&lt;/mta&gt;&gt;.
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_mageSight&gt;&gt;
    A dense web of exotic energy fills the space,
    connecting a confusing variety of magic axioms together.
    ?P
  &lt;&lt;/if&gt;&gt;

&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_studyViewed&gt;&gt;
  The only furniture is a
  &lt;&lt;mt-seen $n_dimDesk&gt;&gt;
    &lt;&lt;= $n_deskViewed ? &quot;desk&quot; : &quot;[\[_desk|n1x Desk]]&quot;&gt;&gt;,
  &lt;&lt;/mt-seen&gt;&gt;
  several
  &lt;&lt;mt-seen $n_dimCabinets&gt;&gt;
    &lt;&lt;= $n_cabinetsViewed ? &quot;cabinets&quot;
      : $n_wandExploded ? &quot;[\[charred cabinets|n1x Cabinets]]&quot;
      : &quot;[\[cabinets|n1x Cabinets]]&quot;&gt;&gt;,
  &lt;&lt;/mt-seen&gt;&gt;
  and many
  &lt;&lt;mt-seen $n_dimBookcases&gt;&gt;
    &lt;&lt;= $n_bookcasesViewed ? &quot;bookcases&quot; : &quot;[\[_bookcases|n1x Bookcases]]&quot;&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_paintingLanced&gt;&gt;
  One wall has a
  &lt;&lt;mt-seen false&gt;&gt;
    &lt;&lt;if $n_doorOpened&gt;&gt;
      &lt;&lt;mta &quot;n2f Door&quot;&gt;&gt;door&lt;&lt;/mta&gt;&gt; that opens to a staircase going down.
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mta &quot;n2f Door&quot;&gt;&gt;door&lt;&lt;/mta&gt;&gt;.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $n_dimWall&gt;&gt;
    The &lt;&lt;mta &quot;n1x Wall&quot;&gt;&gt;opposite wall&lt;&lt;/mta&gt;&gt; has
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $n_dimWindow&gt;&gt;
    a &lt;&lt;mta &quot;n1x Window&quot;&gt;&gt;_window&lt;&lt;/mta&gt;&gt; and
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $n_dimMap&gt;&gt;
    a &lt;&lt;mta &quot;n1x Map&quot;&gt;&gt;_map&lt;&lt;/mta&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;

  In the corner by the map, a shredded painting of
  &lt;&lt;= $n_paintingKnown ? &quot;Ivex&#39;s mother&quot; : &quot;a pantheress&quot;&gt;&gt;
  &lt;&lt;if $n_paintingBurned || $n_paintingBlasted&gt;&gt;
    is a smoking heap.
    &lt;&lt;if $n_paintingBillGone &amp;&amp; !$n_deskHasBill&gt;&gt;
      The &quot;Bill for Interior Design Consulting Services&quot; has
      been destroyed by the blast.
      &lt;&lt;set _billDestroyed = true&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;elseif $n_paintingHasBill&gt;&gt;
    is an untidy heap,
    with a &quot;Bill for Interior Design Consulting Services&quot; on top.
  &lt;&lt;else&gt;&gt;
    is lying in a heap.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $n_wallViewed&gt;&gt;
  &lt;&lt;if $n_free&gt;&gt;
    &lt;&lt;mt-seen $n_dimWall&gt;&gt;
      One &lt;&lt;mta &quot;n1x Wall&quot;&gt;&gt;wall&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mt-seen $n_dimWall&gt;&gt;
      The &lt;&lt;mta &quot;n1x Wall&quot;&gt;&gt;far wall&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;mt-seen $n_dimWindow&gt;&gt;
    has a &lt;&lt;mta &quot;n1x Window&quot;&gt;&gt;_window&lt;&lt;/mta&gt;&gt;,
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $n_dimMap&gt;&gt;
    a &lt;&lt;mta &quot;n1x Map&quot;&gt;&gt;_map&lt;&lt;/mta&gt;&gt;, and a
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $n_dimPainting&gt;&gt;
    &lt;&lt;mta &quot;n1x Painting&quot;&gt;&gt;_painting&lt;&lt;/mta&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;

&lt;&lt;else&gt;&gt;
  &lt;&lt;= $n_free ? &quot;One wall&quot; : &quot;The far wall&quot;&gt;&gt;
  &lt;&lt;mt-seen $n_dimWindow&gt;&gt;
    has a &lt;&lt;mta &quot;n1x Window&quot;&gt;&gt;_window&lt;&lt;/mta&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $n_dimWall&gt;&gt;
    and &lt;&lt;mta &quot;n1x Wall&quot;&gt;&gt;some decorations&lt;&lt;/mta&gt;&gt; on it.
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_free &amp;&amp; !$n_paintingLanced&gt;&gt;
  The opposite wall has a
  &lt;&lt;mt-seen false&gt;&gt;
    &lt;&lt;if $n_doorOpened&gt;&gt;
      &lt;&lt;mta &quot;n2f Door&quot;&gt;&gt;door&lt;&lt;/mta&gt;&gt; that opens to a staircase going down.
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mta &quot;n2f Door&quot;&gt;&gt;door&lt;&lt;/mta&gt;&gt;.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;set _needP = false&gt;&gt;

&lt;&lt;set _deskBill = &#39;piss-soaked &quot;Bill For Home Renovation:&#39;
  + &#39; 899 Silvers, Due Yesterday&quot;&#39;&gt;&gt;
&lt;&lt;set _pillar = &#39;pink &lt;span class=nobr&gt;&quot;CARPE DI&quot;&lt;/span&gt;&#39;
  + &#39; and &lt;span class=nobr&gt;and &quot;CK&quot;&lt;/span&gt; pillar fragments&#39;
  + &#39; from the snow globe&#39;&gt;&gt;
&lt;&lt;set _globe = $n_globeBroken ? &quot;smashed snow globe&quot; : &quot;snow globe&quot;&gt;&gt;
&lt;&lt;set _clutterCorner = $n_paintingLanced ? &quot;another corner&quot; : &quot;a corner&quot;&gt;&gt;

&lt;&lt;if $n_deskCleared&gt;&gt;
  &lt;&lt;mt-seen $n_dimDesk&gt;&gt;
    The &lt;&lt;mta &quot;n1x Desk&quot;&gt;&gt;_desk&lt;&lt;/mta&gt;&gt; is
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;if $n_deskHasBill &amp;&amp; $n_deskHasPillar&gt;&gt;
    bare except for the _pillar,
    sitting on top of a _deskBill.
  &lt;&lt;elseif $n_deskHasBill&gt;&gt;
    bare except for a _deskBill.
  &lt;&lt;elseif $n_deskHasPillar&gt;&gt;
    bare except for the _pillar.
  &lt;&lt;else&gt;&gt;
    bare.
  &lt;&lt;/if&gt;&gt;

  The clutter that used to be on the desk

  &lt;&lt;if $n_clutterCornerBurned&gt;&gt;
    is now a burnt mess of clutter in _clutterCorner.
  &lt;&lt;elseif $n_clutterInCorner&gt;&gt;
    has now become clutter in _clutterCorner.
  &lt;&lt;else&gt;&gt;
    has been blasted off and scattered on the floor.
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if !$n_globeLanced&gt;&gt;
    &lt;&lt;mt-seen $n_dimGlobe&gt;&gt;
      The &lt;&lt;mta &quot;n1x Globe&quot;&gt;&gt;_globe&lt;&lt;/mta&gt;&gt; is
    &lt;&lt;/mt-seen&gt;&gt;
    &lt;&lt;= $n_clutterInCorner ? &quot;among that clutter&quot; : &quot;also on the floor&quot;&gt;&gt;.
  &lt;&lt;/if&gt;&gt;
  ?P
  &lt;&lt;set _needP = false&gt;&gt;

&lt;&lt;elseif $n_deskViewed&gt;&gt;
  &lt;&lt;mt-seen $n_dimDesk&gt;&gt;
    The &lt;&lt;mta &quot;n1x Desk&quot;&gt;&gt;_desk&lt;&lt;/mta&gt;&gt; has
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;script&gt;&gt;
    State.temporary.listDesk = () =&gt; {
      const V = State.variables;
      const objs = [];
      if (!V.n_knifeTaken &amp;&amp; !V.n_knifeOnFloor) {
        objs.push(
          `&lt;&lt;mt-seen $n_dimKnife&gt;&gt;`
          + &quot;a [\[letter opener|n1x Knife]]&quot;
          + `&lt;&lt;/mt-seen&gt;&gt;`);
      }
      if (!V.n_globeLanced) {
        if (V.n_globeViewed) {
          objs.push(
            `&lt;&lt;mt-seen $n_dimGlobe&gt;&gt;`
            + &quot;a [\[snow globe|n1x Globe]]&quot;
            + `&lt;&lt;/mt-seen&gt;&gt;`);
        } else {
          objs.push(
            `&lt;&lt;mt-seen $n_dimGlobe&gt;&gt;`
            + &quot;an [\[arcane globe|n1x Globe]]&quot;
            + `&lt;&lt;/mt-seen&gt;&gt;`);
        }
      }
      if (!V.n_mirrorTaken &amp;&amp; !V.n_mirrorBroken) {
        objs.push(
          `&lt;&lt;mt-seen $n_dimMirror&gt;&gt;`
          + &quot;a &lt;&lt;mta [\[n1x Mirror]]&gt;&gt;?mirror&lt;&lt;/mta&gt;&gt;&quot;
          + `&lt;&lt;/mt-seen&gt;&gt;`);
      }
      let desc = &quot;&quot;;
      switch (objs.length) {
        case 0:
          if (V.n_deskBurned) desc += `a burnt mess of `;
          desc += `nothing useful`;
          break;
        case 1:
          desc += `${objs[0]} in the `;
          if (V.n_deskBurned) desc += &quot;burnt &quot;;
          desc += &quot;mess&quot;;
          break;
        case 2:
          desc += `${objs[0]} and ${objs[1]}`;
          break;
        default: {
          const last = objs.pop();
          desc += `${objs.join(&quot;, &quot;)}, and ${last}`;
          break;
        }
      }
      if (V.n_globeLanced) {
        desc += `, and a clear area in the middle has _pillar`;
      }
      desc += &#39;.&#39;;
      return desc;
    };
  &lt;&lt;/script&gt;&gt;
  &lt;&lt;= _listDesk()&gt;&gt;
  &lt;&lt;= $n_globeLanced ? &quot;?P&quot; : &quot;&quot;&gt;&gt;
  &lt;&lt;set _needP = !$n_globeLanced&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_cabinetsViewed&gt;&gt;
  On top of
  &lt;&lt;if $n_cabinetsLanced&gt;&gt;
    &lt;&lt;mt-seen $n_dimCabinets&gt;&gt;
      the &lt;&lt;mta &quot;n1x Cabinets&quot;&gt;&gt;_cabinet&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    without drawers, there is
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mt-seen $n_dimCabinets&gt;&gt;
      one &lt;&lt;mta &quot;n1x Cabinets&quot;&gt;&gt;_cabinet&lt;&lt;/mta&gt;&gt; is
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_wandExploded&gt;&gt;
    &lt;&lt;mt-seen $n_dimBottle&gt;&gt;
      an &lt;&lt;mta &quot;n1x Bottle&quot;&gt;&gt;enormous cracked bottle&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;elseif $n_bottleViewed&gt;&gt;
    &lt;&lt;mt-seen $n_dimBottle&gt;&gt;
      a &lt;&lt;mta &quot;n1x Bottle&quot;&gt;&gt;bottled horse cock&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mt-seen $n_dimBottle&gt;&gt;
      an &lt;&lt;mta &quot;n1x Bottle&quot;&gt;&gt;enormous glass bottle&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;run
    _penguin =
      $n_wandExploded &amp;&amp; $n_penguinTorn
        ? &quot;flaming, wing-less penguin&quot;
      : $n_wandExploded
        ? &quot;flaming penguin&quot;
      : $n_penguinTorn
        ? &quot;wing-less penguin&quot;
      : &quot;stuffed penguin&quot;;
    _tail =
      $n_coinsLanced
        ? ` that&#39;s wearing a mangled-metal gag`
          + ` made from unspeakably lewd coins.`
      : &quot;.&quot;;
  &gt;&gt;
  &lt;&lt;if $n_penguinFlown&gt;&gt;
    and the absence of a stuffed penguin.
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mt-seen $n_dimPenguin&gt;&gt;
      and a &lt;&lt;mta &quot;n1x Penguin&quot;&gt;&gt;_penguin&lt;&lt;/mta&gt;&gt;_tail
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;= $n_deskCleared || $n_globeLanced ? &quot;?P&quot; : &quot;&quot;&gt;&gt;
  &lt;&lt;set _needP = !$n_deskCleared &amp;&amp; !$n_globeLanced&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_bookcasesViewed&gt;&gt;
  &lt;&lt;set _objs = []&gt;&gt;
  &lt;&lt;set _tail = &quot;.&quot;&gt;&gt;

  &lt;&lt;set _booksLast = $n_bookcasesLanced || $n_booksLanced
    || $n_coinsInBook&gt;&gt;

  &lt;&lt;mt-seen $n_dimBookcases&gt;&gt;
    The &lt;&lt;mta &quot;n1x Bookcases&quot;&gt;&gt;_bookcases&lt;&lt;/mta&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;if _booksLast&gt;&gt;
    still have
  &lt;&lt;else&gt;&gt;
    have
    &lt;&lt;if $n_wandExploded&gt;&gt;
      &lt;&lt;set _objs.push(
        `&lt;&lt;mt-seen $n_dimBooks&gt;&gt;`
        + &quot;numerous [\[scorched books|n1x Books]]&quot;
        + `&lt;&lt;/mt-seen&gt;&gt;`)&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;set _objs.push(
        `&lt;&lt;mt-seen $n_dimBooks&gt;&gt;`
        + &quot;numerous [\[books|n1x Books]]&quot;
        + `&lt;&lt;/mt-seen&gt;&gt;`)&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if !$n_coinsLanced&gt;&gt;
    &lt;&lt;set _coins = $n_wandExploded ? &quot;jumble of coins&quot; : &quot;stack of coins&quot;&gt;&gt;
    &lt;&lt;set _objs.push(
      `&lt;&lt;mt-seen $n_dimCoins&gt;&gt;`
      + `a [\[_coins|n1x Coins]]`
      + `&lt;&lt;/mt-seen&gt;&gt;`)&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;set _wandOnShelf = !$n_wandRanAway
    &amp;&amp; (!$n_wandUsed || $n_wandTubeShot)
    &amp;&amp; !$n_wandExploded
    &amp;&amp; !$n_wandLost
  &gt;&gt;

  &lt;&lt;if _wandOnShelf&gt;&gt;
    &lt;&lt;set _objs.push(
      `&lt;&lt;mt-seen $n_dimWand&gt;&gt;`
      + &quot;a [\[magic wand|n1x Wand]]&quot;
      + `&lt;&lt;/mt-seen&gt;&gt;`)&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_pornLanced&gt;&gt;
    &lt;&lt;set _coinsInPorn = $n_coinsInPorn
    ? &quot; with an orgy of mangled coins hidden inside&quot;
    : &quot;&quot;&gt;&gt;
    &lt;&lt;set _objs.push(&quot;a pile of sabotaged porn&lt;&lt;= _coinsInPorn&gt;&gt;&quot;)&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if _booksLast&gt;&gt;
    &lt;&lt;set _coinsInBook = $n_coinsInBook
      ? &quot;, one of which has an orgy of mangled coins hidden inside&quot;
      : &quot;&quot;&gt;&gt;

    &lt;&lt;if $n_wandExploded&gt;&gt;
      &lt;&lt;set _objs.push(
        `&lt;&lt;mt-seen $n_dimBooks&gt;&gt;`
        + &quot;many [\[scorched books|n1x Books]]_coinsInBook&quot;
        + `&lt;&lt;/mt-seen&gt;&gt;`)&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;set _objs.push(
        `&lt;&lt;mt-seen $n_dimBooks&gt;&gt;`
        + &quot;many [\[books|n1x Books]]_coinsInBook&quot;
        + `&lt;&lt;/mt-seen&gt;&gt;`)&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_bookPileBurned&gt;&gt;
    &lt;&lt;set _tail = &quot;, but the books from several shelves have&quot;
      + &quot; been thrown into a smoldering heap on the floor.&quot;&gt;&gt;
  &lt;&lt;elseif $n_bookShredsBurned&gt;&gt;
    &lt;&lt;set _tail = &quot;, but the books from several shelves have&quot;
      + &quot; been shredded into in a smoldering heap on the floor.&quot;&gt;&gt;
  &lt;&lt;elseif $n_bookcasesLanced || $n_booksLanced&gt;&gt;
    &lt;&lt;set _tail = &quot;, but the books from several shelves have been &quot;
      + ($n_booksLanced ? &quot;shredded&quot; : &quot;thrown&quot;)
      + &quot; into a &quot;
      + ($n_bookPileBurned ? &quot;smoldering heap&quot;
        : $n_bookShredsBurned ? &quot;smoking heap of ashy remnants&quot;
        : &quot;chaotic heap&quot;)
      + &quot; on the floor.&quot;&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;= _objs.length === 1 ? `${_objs[0]} in them${_tail}`
    : _objs.length === 2 ? `${_objs[0]} and ${_objs[1]}${_tail}`
    : (_last = _objs.pop(), `${_objs.join(&quot;, &quot;)}, and ${_last}${_tail}`)
  &gt;&gt;
  &lt;&lt;if $n_wandRanAway&gt;&gt;
    Underneath one bookcase,
    &lt;&lt;mt-seen $n_dimWand&gt;&gt;
      an &lt;&lt;mta &quot;n1x Wand&quot;&gt;&gt;alarming magic wand&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    is &lt;em&gt;growling&lt;/em&gt;.
  &lt;&lt;elseif $n_wandUsed &amp;&amp; !$n_wandTubeShot&gt;&gt;
    &lt;&lt;mt-seen $n_dimWand&gt;&gt;
      The &lt;&lt;mta &quot;n1x Wand&quot;&gt;&gt;distressing magic wand&lt;&lt;/mta&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    is on the floor, far away from the bookcase it came from.
  &lt;&lt;elseif $n_wandLost&gt;&gt;
    Ivex&#39;s absurd magic wand is outside, perhaps still falling
    to the ground below.
  &lt;&lt;/if&gt;&gt;
  ?P
  &lt;&lt;set _needP = false&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;= _needP ? &quot;?P&quot; : &quot;&quot;&gt;&gt;

&lt;&lt;if $n_candleLit &amp;&amp; !$n_ivexGone&gt;&gt;
  A &lt;&lt;mta &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta&gt;&gt;
  at the corner of the desk is
  emitting a tantalizing, spicy aroma.
  ?P
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $n_upset &amp;&amp; ($n_upset--)&gt;&gt;
&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="496" name="n1x Map Ask" tags="mt-ready" position="6475,350" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

&lt;&lt;if $n_abused || $n_subby&gt;&gt;
  Nero says shyly, &quot;Your
  &lt;&lt;set _pw = &quot;Your Accent Is Fascinating&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
  Nero clears his throat. &quot;Excuse me, but your
  &lt;&lt;set _pw = &quot;Excuse Me&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
accent is fascinating. Where are you from?
Is it the X that&#39;s marked on the map?&quot;

?P
Ivex asks, &quot;What nonsense are you talking about now?&quot;
He turns to look at the map.

&lt;&lt;mf-pass _pw&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
When the panther sees the X, he
&lt;&lt;= $n_candleLit ? &quot;laughs in his mask.&quot; : &quot;laughs.&quot;&gt;&gt;

&lt;&lt;if $n_ivexReceptive&gt;&gt; /* ignore ivexWasReceptive */
  &quot;The X is where I noticed a mistake in one of my designs.
  I marked it to remind myself. I have already fixed the mistake,
  but I did not remove the X.&quot;

  ?P
  The panther smirks at the wolf. &quot;Are you also a mistake that
  I should... fix?&quot;

&lt;&lt;else&gt;&gt;
  &quot;The X was a mistake that I&#39;ve already fixed.&quot;
  
  ?P
  He turns back to the wolf. &quot;Are you also a mistake that I should... fix?&quot;

&lt;&lt;/if&gt;&gt;

?P
Nero shakes his head.
This line of questioning has become strange and uncomfortable much
faster than he expected.

?P
&lt;&lt;if $n_abused || $n_subby&gt;&gt;
  He quickly changes the subject.
  &quot;What were you asking me earlier?&quot;

&lt;&lt;else&gt;&gt;
  He tries a joke. &quot;My father tells me that, but I don&#39;t think so.&quot;
  ?P
  The joke falls flat. He quickly changes the subject.
  &quot;Never mind. What were you asking me just now?&quot;
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;set $n_mapAsked = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="497" name="n1x Map Bound" tags="mt-ready inclusion" position="6255,350" size="100,200">&lt;&lt;nobr&gt;&gt;

The map is quite large, perhaps two meters wide.
&lt;&lt;if $n_mageSight&gt;&gt;
  The ornately carved frame
  appears to be ordinary wood,
  with little magic energy in it.
  But the map itself
  has no physical substance.
  It seems to be entirely constructed from exotic energy
  emanating from the wall.
  The image on the map
  shows the nations of the continent
  colored alternately bright
  &lt;&lt;if $n_candleLit&gt;&gt;
    red like the
    &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;,
  &lt;&lt;else&gt;&gt;
    red,
  &lt;&lt;/if&gt;&gt;
  green, or blue,
  and the bodies of water are inexplicably colored orange.

&lt;&lt;else&gt;&gt;
  It&#39;s mounted in an ornately carved frame,
  as if it were an expensive piece of art,
  and it appears to have been painted by
  some artisan with a hostile relationship to color.
  The nations of the continent are alternately bright
  &lt;&lt;if $n_candleLit&gt;&gt;
    red like the
    &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;,
  &lt;&lt;else&gt;&gt;
    red,
  &lt;&lt;/if&gt;&gt;
  green, or blue,
  and the bodies of water are inexplicably colored orange.
&lt;&lt;/if&gt;&gt;

?P
There are no labels, but there is an X mark and a circle
&lt;&lt;if $n_mageSight&gt;&gt;
  written on the surface of the wall that&#39;s pretending to be a map.
&lt;&lt;else&gt;&gt;
  hand-written on the map.
&lt;&lt;/if&gt;&gt;
The circle is probably the city called Uramos,
which sits where the Parce River empties into the Southern Sea.
?P
The X is also on the Parce River, some distance upstream,
northeast of Uramos. Nero believes there&#39;s a town at that location,
but he does not remember its name.

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="498" name="n1x Map Free" tags="mt-ready inclusion" position="6325,350" size="100,200">&lt;&lt;nobr&gt;&gt;

&lt;style&gt;
  .map-strike {
    text-decoration: line-through;
    text-decoration-color: #333;
    text-decoration-thickness: 4px;
  }
&lt;/style&gt;

The map is quite large, perhaps two meters wide.
&lt;&lt;if $n_mageSight&gt;&gt;
  &lt;&lt;if !$n_mapDefaced&gt;&gt;
    The ornately carved frame
    &lt;&lt;if $n_wandExploded&gt;&gt;
      is on fire. It
    &lt;&lt;/if&gt;&gt;
    appears to be ordinary wood,
    with little magic energy in it.
    But the map itself
    has no physical substance.
  &lt;&lt;/if&gt;&gt;
  It seems to be entirely constructed from exotic energy
  emanating from the wall.
  &lt;&lt;if $n_mapDefaced&gt;&gt;
    There had been an ornate wood frame that held nothing,
    simply surrounding the map, but Nero has torn off
    the useless decoration and thrown it out the window.
    ?P
  &lt;&lt;/if&gt;&gt;
  The image on the map
  &lt;&lt;if $n_wandExploded&gt;&gt;
    is unaffected by the wand&#39;s explosion. It
  &lt;&lt;/if&gt;&gt;
  shows the nations of the continent
  colored alternately bright
  red,
  green, or blue,
  and the bodies of water are inexplicably colored orange.

&lt;&lt;else&gt;&gt;
  It&#39;s mounted in an ornately carved frame,
  as if it were an expensive piece of art,
  and it appears to have been painted by
  some artisan with a hostile relationship to color.
  The nations of the continent are alternately bright
  red,
  green, or blue,
  and the bodies of water are inexplicably colored orange.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_mapDefaced&gt;&gt;
  On top of the map are great splashes of ink that obscure
  earlier markings,
  most of which were extremely tiny writing in several locations.
  The majority of the writing was a list of names near Ransamaran Ivory.
  Many of them were crossed out, but they are now all unreadable.
  ?P
  Along the bottom of the map, a cryptic note is barely visible:
  &lt;meta-text class=map-strike&gt;&quot;Hello, player!
  This defaced note is not important either,
  but check back later!&quot;&lt;/meta-text&gt;
  ?P
  There is also an X on the Parce River, and a circle where the
  river empties into the Southern Sea at the city of Uramos.
  Both of those markings are now slashed by streaks of ink.
  ?P
  More prominently, a crude stick-figure is
  drawn in somewhat drippy ink.
  A drippy sword is stabbing the figure&#39;s crotch,
  and large drippy letters nearby read, &quot;Ivex the Impotent&quot;.

&lt;&lt;else&gt;&gt;
  Now that Nero is free, he can see the map has some
  extremely tiny writing in several locations.
  Most of the writing is near Ransamaran Ivory,
  the mage school that expelled Ivex.
  From a distance, the tiny scrawl seems like
  artistic texturing of the hills surrounding the school.
  But up close, Nero can see that it&#39;s a list of what appear
  to be names, with many of them crossed out.
  ?P
  There&#39;s also a cryptic note near the frame at the bottom that says,
  &lt;meta-text&gt;&quot;Hello, player! This note is not important yet,
  but we might add a small clue to something in the next chapter,
  once that&#39;s finished being written. Thanks for looking here!&quot;&lt;/meta-text&gt;
  ?P
  The only other markings are a large X and a circle
  &lt;&lt;if $n_mageSight&gt;&gt;
    written on the surface of the wall that&#39;s pretending to be a map.
  &lt;&lt;else&gt;&gt;
    hand-written on the map.
  &lt;&lt;/if&gt;&gt;
  The circle is probably the city called Uramos,
  which sits where the Parce River empties into the Southern Sea.
  ?P
  The X is also on the Parce River, some distance upstream,
  northeast of Uramos. Nero believes there&#39;s a town at that location,
  but he does not remember its name.
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="499" name="n1x Map WantPass" tags="mt-ready inclusion" position="6350,350" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;set _oneLeft = JSON.parse($n_passTried || &quot;[]&quot;).length === 2&gt;&gt;


?P
&lt;&lt;pw-suggest `PW_uramos`&gt;&gt;
  It&#39;s a bit of a stretch, but &quot;Uramos&quot; could be Ivex&#39;s password.
&lt;&lt;pw-fail&gt;&gt;
  &quot;Uramos&quot; is not Ivex&#39;s password, of course.
&lt;&lt;/pw-suggest&gt;&gt;

The X is a more likely
&lt;&lt;if $n_mapAsked&gt;&gt;
  possibility,
  but when Nero asked, the panther&#39;s response was
  strange and menacing.
  &lt;&lt;if !$n_ivexGone&gt;&gt;
    &lt;&lt;if _oneLeft&gt;&gt;
      ?P
      The wolf considers asking anyway.
      A &lt;em&gt;mistake&lt;/em&gt; that was &lt;em&gt;fixed&lt;/em&gt;
      seems like the sort of thing that Ivex might use as a password.
      ?P
      But Nero does not want to revisit the topic of &lt;em&gt;fixing&lt;/em&gt;
      himself.
    &lt;&lt;else&gt;&gt;
      The wolf does not want to bring it up again.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  Hopefully the password is something else.
&lt;&lt;else&gt;&gt;
  possibility.
  Maybe Ivex can be persuaded to talk about it.
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="500" name="n1x Map" tags="mt-ready maybe-password" position="6225,350" size="100,200">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $n_free&gt;&gt;
  &lt;&lt;include [[n1x Map Free]]&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;include [[n1x Map Bound]]&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if MT.passWanted()&gt;&gt;
  &lt;&lt;include [[n1x Map WantPass]]&gt;&gt;
&lt;&lt;elseif !$n_mapDefaced&gt;&gt;
  ?P
  Although the map suggests some interesting theories
  about the territory of Ivex&#39;s mind,
  it doesn&#39;t seem immediately useful to Nero&#39;s current situation.
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if !$n_mapAsked&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the map.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;elseif MT.passWanted()&gt;&gt;
      &lt;&lt;mtl [[n1x Map Ask]]&gt;&gt;Ask Ivex about the map.&lt;&lt;/mtl&gt;&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the map.&quot; &quot;not interested&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if _pwActions != null&gt;&gt;
    _pwActions
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_tooClever &amp;&amp; !$n_mapDefaced&gt;&gt;
    &lt;li&gt;[[Destroy the map with Nackle.|n2x Lance Map]]&lt;/li&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;pw-found `PW_uramos`&gt;&gt;
&lt;&lt;run
  $n_dimMap = !_hasAction;
  $n_mapViewed = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="501" name="n1x Mirror Bound" tags="mt-ready inclusion" position="7525,700" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;

/* can&#39;t lose mage-sight while bound */
&lt;&lt;vi-always-if n_mirrorMagicKnown n_mageSight true&gt;&gt;

Propped up against the
&lt;&lt;mt-seen $n_dimGlobe&gt;&gt;
  &lt;&lt;mta-no-loop &quot;n1x Globe&quot;&gt;&gt;?globe&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;if $n_candleLit&gt;&gt;
  behind the
  &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;/if&gt;&gt;
on Ivex&#39;s desk, there&#39;s a ?mirror
about the size of a playing card.

&lt;&lt;if $n_mageSight&gt;&gt;
  &lt;&lt;if $n_mirrorMagicKnown&gt;&gt;
    For some reason, an illusion of plain dark wood is covering
    the elegant mage-silver frame, which is shaped like a
    rectangle with rounded corners.
  &lt;&lt;else&gt;&gt;
    The frame appears to be plain dark wood, but mage-sight
    shows the wood is an illusion covering mage-silver.
    &lt;&lt;if $n_mirrorViewed&gt;&gt;
      This actually &lt;em&gt;is&lt;/em&gt; a magic mirror.
    &lt;&lt;else&gt;&gt;
      This plain-seeming mirror is actually a magic mirror!
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  ?P
  Nero wonders why Ivex would cover the elegance of
  mage-silver with an illusion, and why the illusion
  is cheap wood, when it could be anything at all,
  perhaps a gem-encrusted monstrosity that seems to be
  more the panther&#39;s style.

&lt;&lt;else&gt;&gt;
  The frame is plain dark wood and shaped like a rectangle
  with rounded corners.
  ?P
  Nero wonders why Ivex would have such an object on his desk.
  The frame is too cheap for it to be a magic mirror.
  Perhaps it&#39;s simply vanity?
  But then why not have a mirror on the wall?
&lt;&lt;/if&gt;&gt;

?P
In any case, the wolf is lucky that the mirror is placed
at an angle that allows him to see
&lt;&lt;if $n_gravNoticed&gt;&gt;
  &lt;&lt;= $n_naked ? &quot;his naked self,&quot; : &quot;himself,&quot;&gt;&gt;
  as well as an interesting arrangement of
  &lt;&lt;mt-seen $n_dimGrav&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Grav&quot;&gt;&gt;
      &lt;&lt;= $n_gravAsked ? &quot;Gravity Crystals&quot; : &quot;glowing crystals&quot;&gt;&gt;
    &lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;= $n_naked ? &quot;his naked self&quot; : &quot;himself&quot;&gt;&gt; in it.
  Not that he particularly &lt;em&gt;needs&lt;/em&gt; to see his own
  &lt;&lt;= $n_naked ? &quot;slender, masculine body&quot;
    : &quot;fashionably-robed body&quot;&gt;&gt;,
  but the view also reveals an interesting arrangement of
  &lt;&lt;mt-seen $n_dimGrav&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Grav&quot;&gt;&gt;glowing crystals&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;/if&gt;&gt;
behind the cross that he&#39;s bound to.

&lt;&lt;if $n_mageSight&gt;&gt;
  ?P
  The mirror also seems to be the only magic in the room
  with energy that Nero recognizes.
  Amid all the exotic energy,
  he sees an ordinary glow from the mirror&#39;s pyron node,
  &lt;&lt;if !$n_mirrorTapped&gt;&gt;
    which is a device that he is quite familiar with!
  &lt;&lt;else&gt;&gt;
    and Nero has managed to tap it.
    ?P
    The pyron node provides the lupine mage with a small trickle of power.
    It isn&#39;t enough to replenish his own store of energy,
    but it&#39;s enough to keep his mage-sight active.
    ?P
    More importantly, tapping the node has granted him access to
    a Sprite!
    It&#39;s the tiniest of flaws in the panther&#39;s magic defenses,
    but it might be all that Nero needs to escape!
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="502" name="n1x Mirror" tags="mt-ready" position="7400,700" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;

&lt;&lt;cv-try n_magicPhase `MP_beforeCast` `MP_wantDevice`
  `MP_contact` `MP_tapLost`&gt;&gt;

/* trivial variations */
&lt;&lt;cv-ignore n_gravAsked n_gravKnown n_gravNoticed n_gravViewed&gt;&gt;
&lt;&lt;cv-ignore n_globeViewed&gt;&gt;

&lt;&lt;if $n_free&gt;&gt;
  &lt;&lt;include [[n2x Mirror Free]]&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;include [[n1x Mirror Bound]]&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if $n_free &amp;&amp; $n_mirrorTapped &amp;&amp; !$n_mirrorTaken&gt;&gt;
    &lt;&lt;mtl [[n2x Mirror Take]]&gt;&gt;Take the mirror.&lt;&lt;/mtl&gt;&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_mageSight &amp;&amp; !$n_mirrorTapped&gt;&gt;
    &lt;&lt;mtl [[n1s Tap 1]]&gt;&gt;Try to tap the mirror&#39;s pyron node.&lt;&lt;/mtl&gt;&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_dimMirror = !_hasAction;
  $n_mirrorViewed = true;
  if (!$n_free &amp;&amp; !$n_gravNoticed) {
    delete $n_dimCross;
    $n_gravNoticed = true;
  }
  if ($n_mageSight) {
    $n_mirrorFlawNoticed = true;
    $n_mirrorMagicKnown = true;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="503" name="n1x Nackle Brief" tags="mt-ready" position="6725,1550" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleLit&gt;&gt;
&lt;&lt;vi-ignore n_mageSight n_free n_ivexGone&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

&lt;&lt;if $n_bottleNackleKnown&gt;&gt;
  The glyph matrix in the bottle is a
  telekinetic apparatus known as
  &lt;&lt;mt-seen $kn_Nackle&gt;&gt;
    &lt;&lt;tran-cut [[Nackle&#39;s Poltergeist Device|n1x Nackle Info 1]]&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;else&gt;&gt;
  Nero &lt;em&gt;recognizes&lt;/em&gt; the glyph matrix.
  It has to be the telekinetic apparatus known as
  &lt;&lt;mt-seen $kn_Nackle&gt;&gt;
    &lt;&lt;tran-cut [[Nackle&#39;s Poltergeist Device|n1x Nackle Info 1]]&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
A typical installation of Nackle places the glyphs
on the underside of a table,
or on some other hidden surface that&#39;s convenient to touch.
The mage who knows of its presence
can touch it to entertain guests with dancing dinner plates,
or repel enemies with flying cutlery.

?P
Ivex has &lt;em&gt;not&lt;/em&gt; placed the matrix
in a convenient location.
It&#39;s definitely Nackle.
The glyphs are quite distinctive.
But this is the first time Nero&#39;s seen these glyphs installed on
the surface of a metallic horse cock trapped inside a bottle.

?P
&lt;&lt;if $n_magicPhaseReached &lt; MP_triedMagic&gt;&gt;
  The unusual substrate for the spell is perhaps just an
  unintelligible perversion from the depraved panther&#39;s mind.
  But its placement in a bottle is a mystery
  beyond mere perversion.
  Nackle &lt;em&gt;requires&lt;/em&gt; a mage to have contact with the
  matrix. So what use is it to put Nackle on a surface that
  cannot be touched?
  &lt;&lt;arc-skip&gt;&gt;
    ?P
    This question might not be the most important thing to consider
    at the moment,
    but Nero can&#39;t stop thinking about it.
    Besides, an answer to it might give some insight into defeating
    the panther&#39;s magic.
  &lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;elseif $n_magicPhaseReached &lt; MP_wantName&gt;&gt;
  Setting aside the perhaps unanswerable question of &lt;em&gt;why&lt;/em&gt;
  a horse cock, the &lt;em&gt;where&lt;/em&gt; of the horse cock is a puzzle
  that demands an answer.
  Nackle &lt;em&gt;requires&lt;/em&gt; a mage to have contact with the
  matrix, which is clearly not possible when the glyphs are in a bottle.
  &lt;&lt;if $n_mageSight&gt;&gt;
    The energized liquid also suggests that the
    horse-cock Nackle is not merely an obscene office ornament.
  &lt;&lt;else&gt;&gt;
    It&#39;s strange to put so much effort into creating such a
    weird and obscene office ornament.
  &lt;&lt;/if&gt;&gt;
  ?P
  Perhaps Ivex has found some way to use the glyph matrix without
  touching it?
  &lt;&lt;if $n_free&gt;&gt;
    If so, there might have been a way for Nero to have used it to
    grab some tool that would help him escape.
  &lt;&lt;else&gt;&gt;
    If so, the mechanism might be one that Nero could
    use himself to grab some tool that will help him escape!
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  It seems unlikely the horse cock itself is &lt;em&gt;necessary&lt;/em&gt; for the
  construction. The contact to Nackle provided by the Sprite is probably
  due to the energized liquid medium within the bottle.
  In any case, the construction has a certain crazy brilliance to it.
  ?P
  It&#39;s one of those ideas that seems
  obvious in retrospect, but nobody had put these particular concepts
  together, until this peculiar panther mage assembled it himself,
  for whatever reason. Nero will have some interesting discussions
  at the Academy, after he escapes.
&lt;&lt;/if&gt;&gt;

?P
[[Return|n1x Bottle]]

&lt;&lt;set $n_bottleNackleKnown = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="504" name="n1x Nackle Info 1" tags="mt-ready" position="6725,1425" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight n_free n_ivexGone&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

Nackle&#39;s Poltergeist Device is a magic apparatus that belongs
to a discipline called
room-scale magic, which is basically any magic that is prepared ahead of time
to take place in a specific location. The location is not necessarily a room,
but rooms are where this type of construction has the most use,
since spells such as Cosid&#39;s Dancing Lights are a
pointless waste of energy when they&#39;re installed in a location with
no persons to appreciate them.

?P
Nackle himself is more a cautionary tale than a respectable figure
in the history of magic.

?P
He was burned at the stake for necromancy.

?P
The reason for that gruesome fate:
He had become notorious in his town
and neighboring areas for his ability
to arrange intimate sexual encounters
between grieving lovers and the ghosts of their deceased loves.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n1x Nackle Info 2]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="505" name="n1x Nackle Info 2" tags="mt-ready" position="6850,1425" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_candleLit&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  &lt;&lt;vi-ignore n_free&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

The ruthless verdict turned out to be premature.
When the council&#39;s official investigator, Magister Winterdew,
finally arrived on the scene,
she discovered that Nackle&#39;s magic had very little to do with the spirit realm,
and more to do with a novel and clever telekinetic installation.

?P
Nackle himself was not particularly strong in magic ability.
The magister&#39;s report mentions that an analysis of the charred skull
indicates that his spectral arc-weight could not be more than
&lt;span class=nobr&gt;30 Stalvers,&lt;/span&gt;
which is perhaps enough to power a spell that can
levitate two small pebbles.

?P
The unfortunate mage&#39;s genius was in developing an extraordinary matrix
of lesser-known glyphs. This unusual matrix connects
telekinetic energy fields to the mesh of spectral power
within a room.
Once the matrix is installed,
contact with the construct allows a mage to telekinetically
move objects in the room with considerable force,
without draining the mage&#39;s own energies.
This then allowed Nackle to focus his attention on...
activities that Winterdew hinted at, but left unspecified in her report.

?P
Magister Winterdew became notorious herself for her habit
of explaining those lewd activities in great detail at her dinner parties.
With demonstrations.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_Nackle&gt;&gt;
  &lt;&lt;mta &quot;n1x Nackle Brief&quot;&gt;&gt;Return&lt;&lt;/mta&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="506" name="n1x Painting Ask" tags="mt-ready" position="6975,975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

&lt;&lt;vi-always n_paintingKnown false&gt;&gt;

&lt;&lt;em-assert MT.passWanted() || MP_wantTouch === $n_magicPhase&gt;&gt;

&lt;&lt;if MT.passWanted()&gt;&gt;
  The simplest way to trick Ivex into revealing the pantheress&#39;s
  name is to invent a name for her that he will want to correct.
&lt;&lt;else&gt;&gt;
  Nero does not have any idea how to persuade Ivex to touch the
  portrait&#39;s mouth. But any plan can be helped by gathering
  some information, which is simple enough to do
  by inventing a name for the pantheress
  that the panther will want to correct.
&lt;&lt;/if&gt;&gt;
?P
The first name that comes to mind is Lavinia.
She certainly looks like a Lavinia.
But then Nero realizes that &lt;em&gt;Ivy&lt;/em&gt; is
the perfect name to provoke &lt;em&gt;Ivex&lt;/em&gt;.

?P
&lt;&lt;if $n_abused || $n_subby&gt;&gt;
  He says tentatively, &quot;May I ask why your wall has
  &lt;&lt;set _pw = &quot;May I Ask Why Your Wall Has A Portrait Of Ivy&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
  He asks, &quot;Pardon the interruption, but why does
  your wall have
  &lt;&lt;set _pw = &quot;Pardon The Interruption&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
a portrait of Ivy? I love her! She&#39;s my favorite artist.&quot;

&lt;&lt;mf-pass _pw&gt;&gt;&lt;&lt;/mf-pass&gt;&gt;

?P
&lt;&lt;if $n_ivexReceptive&gt;&gt; /* ignore ivexWasReceptive */
  &lt;&lt;vi-always n_candleLit false&gt;&gt;

  Ivex laughs. &quot;My mother is many things, but she is no artist.
  Where did you meet her?&quot;

  ?P
  Nero is flummoxed.
  &lt;span class=nobr&gt;&quot;I&amp;mdash;&lt;/span&gt;
  I&#39;m sorry, your mother&#39;s name is...
  I mean, &lt;em&gt;Ivy&lt;/em&gt; is your &lt;em&gt;mother&lt;/em&gt;?&quot;

  ?P
  The panther is gazing at the painting, and he moves to stand
  in front of it.
  &quot;I write letters to her every week, but I have not
  seen her in many months. I should visit her again, soon.&quot;

  ?P
  Ivex moves his head forward and uses his tongue to &lt;em&gt;lick&lt;/em&gt;
  the painting. It&#39;s a firm stroke that crosses the pantheress&#39;s tongue
  that&#39;s showing out the side of her mouth.

  ?P
  Nero&#39;s bewilderment becomes revulsion. He quickly tries to change
  the subject.
  &quot;Apologies for the interruption. What was it you were asking me?&quot;

  &lt;&lt;if MP_wantTouch === $n_magicPhase&gt;&gt;
    ?P
    The Sprite repeats in Nero&#39;s ear,
    &lt;span class=sprite-q&gt;&quot;Please touch my hole.&quot;&lt;/span&gt;
    ?P
    Ivy&#39;s mouth does not seem to be the right hole.
    ?P
    It&#39;s possible that Ivex&#39;s tongue did not touch it correctly.
    And Nero can&#39;t stop wondering now if maybe some &lt;em&gt;other&lt;/em&gt;
    part of the painting is the correct hole.
    He tries to banish the thought from his head.
    &lt;em&gt;Surely&lt;/em&gt; some other object in this room is the hole.
  &lt;&lt;/if&gt;&gt;

  ?P
  $n_afterAction

&lt;&lt;else&gt;&gt;
  Ivex
  &lt;&lt;if $n_candleLit&gt;&gt;
    growls through his mask.
  &lt;&lt;else&gt;&gt;
    snarls.
  &lt;&lt;/if&gt;&gt;
  &quot;My mother is not an artist. How do you know her name?&quot;
  ?P
  She&#39;s his &lt;em&gt;mother&lt;/em&gt;? Her name &lt;em&gt;actually is&lt;/em&gt; Ivy?
  ?P
  Nero is flummoxed.
  &lt;span class=nobr&gt;&quot;I&amp;mdash;&lt;/span&gt;
  I&#39;m sorry, the painting looks very much like a friend of mine named...
  /* cspell:ignore Contriva */
  Contriva, who likes to be called Ivy. But I see now that her eyes
  are a different color.&quot;
  ?P
  He quickly tries to change the subject.
  &quot;What were you asking me?&quot;
  ?P
  $n_afterAction
&lt;&lt;/if&gt;&gt;

&lt;&lt;pw-found `PW_ivy`&gt;&gt;
&lt;&lt;run 
  $n_paintingKnown = true;
  if ($n_ivexReceptive) {
    delete $n_ivexNear;
    $n_paintingLicked = true;
    if (MP_wantTouch === $n_magicPhase) {
      $n_paintingHoleTried = true;
    }
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="507" name="n1x Painting WantPass" tags="mt-ready inclusion" position="6850,1050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;em-assert !$n_free&gt;&gt;

&lt;&lt;if $n_paintingKnown&gt;&gt;
  She seems... unsettlingly important to Ivex.
  &lt;&lt;pw-suggest `PW_ivy`&gt;&gt;
    Perhaps &quot;Ivy&quot; is his password?
  &lt;&lt;pw-fail&gt;&gt;
    But &quot;Ivy&quot; isn&#39;t his password.
  &lt;&lt;/pw-suggest&gt;&gt;
&lt;&lt;else&gt;&gt;
  If so, then it&#39;s quite possible that her name is Ivex&#39;s password.
  &lt;&lt;if $n_ivexGone&gt;&gt;
    Unfortunately, Nero can&#39;t ask Ivex about it now.
  &lt;&lt;else&gt;&gt;
    Perhaps he can be tricked into revealing it.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="508" name="n1x Painting WantTouch" tags="mt-ready inclusion" position="6850,925" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $n_paintingHoleTried&gt;&gt;
  &lt;&lt;em-assert $n_paintingKnown&gt;&gt;
  Fortunately, her mouth
  &lt;&lt;= $n_free ? &quot;didn&#39;t&quot; : &quot;doesn&#39;t&quot;&gt;&gt;
  seem to be the hole that the Sprite
  &lt;&lt;= $n_free ? &quot;wanted&quot; : &quot;wants&quot;&gt;&gt;
  him to touch.

&lt;&lt;elseif $n_paintingKnown&gt;&gt;
  The wolf can&#39;t stop staring at her face,
  and he can&#39;t help but wonder...
  Is the portrait&#39;s mouth the hole that the Sprite
  &lt;&lt;= $n_free ? &quot;wanted&quot; : &quot;wants&quot;&gt;&gt;
  him to touch?
  It&#39;s a disturbing idea. But Ivex is a disturbing panther.
  &lt;&lt;if $n_ivexGone&gt;&gt;
    ?P
    Well, there&#39;s no way to test that theory now.
  &lt;&lt;else&gt;&gt;
    ?P
    He was quite hostile when Nero accidentally guessed
    her name. The wolf does not think mentioning her again
    is a good idea. Hopefully, the hole is something else.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  &lt;!-- no opportunity to ask before this --&gt;
  &lt;&lt;em-assert !$n_paintingKnown&gt;&gt;

  The wolf has a wild thought.
  Could it be that the portrait&#39;s mouth
  is the hole that the Sprite
  &lt;&lt;= $n_free ? &quot;wanted&quot; : &quot;wants&quot;&gt;&gt;
  him to touch?
  &lt;&lt;if $n_ivexGone&gt;&gt;
    It&#39;s a strange idea. But Ivex is a strange panther.
    ?P
    Well, there&#39;s no way to test that theory now.
  &lt;&lt;else&gt;&gt;
    And could Ivex be persuaded to
    touch it?
    ?P
    It&#39;s a strange idea. But Ivex is a strange panther.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="509" name="n1x Painting" tags="mt-ready has-hole maybe-password" position="6725,1000" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_paintingLanced false&gt;&gt;
&lt;&lt;vi-ignore n_free&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;

&lt;&lt;cv-try n_magicPhase
  `MP_beforeCast` `MP_wantTouch` `MP_wantPass`
  `MP_contact` `MP_tapLost`&gt;&gt;
&lt;&lt;cv-try n_passTried &quot;[]&quot; &#39;[&quot;Ivy&quot;]&#39;&gt;&gt;

&lt;&lt;set _lusted = $n_paintingViewedHorny&gt;&gt;
&lt;&lt;set _window = $n_windowBroken ? &quot;broken window&quot; : &quot;round window&quot;&gt;&gt;

The large painting beside the _window
&lt;&lt;if $n_paintingBlasted&gt;&gt;
  is torn and damaged by the wand&#39;s explosion,
  but the subject of the portrait is still clearly visible. She&#39;s
&lt;&lt;else&gt;&gt;
  depicts
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_extraHorny&gt;&gt;
  &lt;&lt;vi-always n_candleLit false&gt;&gt;
  &lt;&lt;vi-always n_ivexGone true&gt;&gt;
  a plump black pantheress in a
  &lt;&lt;= _lusted ? &quot;disastrous&quot; : &quot;fascinating&quot;&gt;&gt;
  multicolored dress,
  holding a book
  &lt;&lt;= _lusted ? &quot;upside down&quot; : &quot;&quot;&gt;&gt;
  in one hand and
  reclining on a couch in a
  &lt;&lt;= _lusted ? &quot;crudely&quot; : &quot;strongly&quot;&gt;&gt;
  suggestive pose.
  Nero&#39;s attention is drawn to the tip of her tongue peeking out
  the left side of her
  &lt;&lt;= _lusted ? &quot;disturbingly&quot; : &quot;sensually&quot;&gt;&gt;
  open mouth,
  and his erect cock quivers at the thought of myriad potential
  &lt;&lt;if $n_paintingKnown&gt;&gt;
    delights, despite his mind reminding himself
    that this is &lt;em&gt;&lt;em&gt;Ivex&#39;s mother&lt;/em&gt;.&lt;/em&gt;
    ?P
    Nero is appalled at his indiscriminate horniness,
    but comforts himself with the thought that it must be
    a lingering after-effect of that distressing red candle.
  &lt;&lt;elseif _lusted&gt;&gt;
    delights, despite his mind reminding himself
    that his earlier lust for her was due &lt;em&gt;&lt;em&gt;entirely&lt;/em&gt;&lt;/em&gt;
    to that distressing red candle.
  &lt;&lt;else&gt;&gt;
    delights.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $n_paintingKnown&gt;&gt;
  Ivex&#39;s mother, Ivy.
  She&#39;s a plump black pantheress
  in a dress that&#39;s an absurd patchwork of
  &lt;&lt;if $n_candleLit&gt;&gt;
    red like the
    &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;.
  &lt;&lt;else&gt;&gt;
    red,
  &lt;&lt;/if&gt;&gt;
  green, and blue.
  One hand holds a book
  &lt;&lt;= _lusted ? &quot;upside down&quot; : &quot;&quot;&gt;&gt;
  as she reclines
  on a couch in a crudely suggestive pose,
  and her muzzle is partly open in a disturbing expression of predatory lust.

  ?P
  Nero tries to banish the vivid memory of
  &lt;&lt;if _lusted&gt;&gt;
    his candle-fueled lust for her.
  &lt;&lt;else&gt;&gt;
    Ivex&#39;s tongue, licking hers.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  a somewhat plump, middle-aged pantheress
  with deep black fur.
  Her dress is an evening gown that might be fashionable
  if the tailor had decided whether the dress should be
  &lt;&lt;if $n_candleLit&gt;&gt;
    red like the
    &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;,
  &lt;&lt;else&gt;&gt;
    red,
  &lt;&lt;/if&gt;&gt;
  green, or blue,
  rather than a patchwork of all three colors
  in a perplexing irregular pattern.
  ?P
  The pantheress is holding a book
  &lt;&lt;= _lusted ? &quot;upside down&quot; : &quot;&quot;&gt;&gt;
  in one hand and
  reclining on a couch in a
  &lt;&lt;= _lusted ? &quot;crudely&quot; : &quot;languid,&quot;&gt;&gt;
  sensual pose.
  Her mouth is partly open, and the tip of her tongue is peeking
  out the left side in a
  &lt;&lt;= _lusted ? &quot;disturbingly&quot; : &quot;&quot;&gt;&gt;
  suggestive manner.

  &lt;&lt;if _lusted&gt;&gt;
    ?P
    Nero tries to banish the vivid memory of his candle-fueled lust for her.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_mageSight&gt;&gt;
  ?P
  &lt;&lt;if $n_paintingBlasted&gt;&gt;
    The back of the painting appears to be
  &lt;&lt;else&gt;&gt;
    A glowing trace of energy suggests that the back of the
    painting is
  &lt;&lt;/if&gt;&gt;
  inscribed with a line of glyphs that outline the
  entire body of the pantheress, except for her head.
  Nero is curious about the magic&#39;s purpose,
  but decides he doesn&#39;t really want to know.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if !$n_paintingKnown&gt;&gt;
  ?P
  The prominent location of the painting is probably an indication
  that the subject is someone meaningful to Ivex.
  Perhaps she&#39;s
  &lt;&lt;= $n_mageSight ? &quot;an ex-lover?&quot; : &quot;a lover?&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if MP_wantTouch === $n_magicPhaseReached&gt;&gt;
  &lt;&lt;include [[n1x Painting WantTouch]]&gt;&gt;

&lt;&lt;elseif MT.passWanted()&gt;&gt;
  &lt;&lt;include [[n1x Painting WantPass]]&gt;&gt;

&lt;&lt;elseif $n_extraHorny&gt;&gt;
  The wolf mage wrests his attention away from her sultry gaze.
  She&#39;s an unnecessary distraction right now.

&lt;&lt;elseif $n_paintingKnown&gt;&gt;
  The wolf mage briefly wonders if Ivy
  knows what her son has been doing.
  And then he&#39;s briefly horrified at the thought that she might.

&lt;&lt;else&gt;&gt;
  Whoever she is, it doesn&#39;t seem important right now.
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if !$n_paintingKnown&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the painting.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;elseif MP_wantTouch === $n_magicPhase || MT.passWanted()&gt;&gt;
      &lt;&lt;mtl [[n1x Painting Ask]]&gt;&gt;Ask Ivex about the painting.&lt;&lt;/mtl&gt;&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the painting.&quot; &quot;not interested&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if _pwActions != null&gt;&gt;
    _pwActions
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_tooClever /* &amp;&amp; !$n_paintingLanced */&gt;&gt;
    &lt;li&gt;[[Destroy the painting with Nackle.|n2x Lance Painting]]&lt;/li&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_dimPainting = !_hasAction;
  $n_paintingViewed = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="510" name="n1x Penguin Ask" tags="mt-ready" position="6350,725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-always n_magicPhase `MP_wantTouch`&gt;&gt;
&lt;&lt;vi-always n_penguinAsked false&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

/* same as variants of n_tough */
&lt;&lt;cv-ignore n_abused n_subby n_ivexGrabbing&gt;&gt;
&lt;&lt;cv-try n_ivexGrabbing true&gt;&gt;

&lt;!--
  can only get here once during a playthrough.
  can&#39;t get here in early-unreceptive.
--&gt;

Nero points his nose at the penguin.
&lt;&lt;if $n_paintingLicked&gt;&gt;
  He hopes that the panther does not also lick the penguin&#39;s mouth.
&lt;&lt;else&gt;&gt;
  He says,
&lt;&lt;/if&gt;&gt;
&quot;Something just dropped from the beak
of that monstrous creature. Is that a bird of some sort?&quot;

?P
&lt;&lt;if $n_ivexWasReceptive&gt;&gt;
  &lt;&lt;pw-found `PW_hunter`&gt;&gt;

  Ivex looks where the wolf is pointing, then
  &lt;&lt;= $n_candleLit ? &quot;chuckles through his mask.&quot; : &quot;chuckles.&quot;&gt;&gt;
  &quot;You cannot possibly be ignorant of penguins.
  I would tell Hunter Two to peck your thighs if he
  were still alive.&quot;

  ?P
  The panther moves to look in the penguin&#39;s beak,
  then crouches on the floor to find the dropped object.
  
  ?P
  A moment later, the Sprite says in Nero&#39;s ear,
  &lt;span class=sprite-q&gt;&quot;Thank you for
  touching my hole, ?master
  You&#39;re the best, ?masterX&quot;&lt;/span&gt;

  ?P
  Oh. The hole isn&#39;t the &lt;em&gt;penguin&lt;/em&gt;, it&#39;s the
  coin-like object that the
  penguin was holding. Of course.

  ?P
  Ivex stands up and puts the object back in the penguin&#39;s mouth.
  &quot;I should probably find another place for this, but Hunter Two
  always loved bringing it to me.&quot;

  ?P
  Nero can&#39;t help asking, &quot;Is there a Hunter One?&quot;

  ?P
  The panther snorts. &quot;Hunter was the name I gave to a toy hawk
  that I loved as a child. When my uncle learned that I was
  going to be a mage, he offered to obtain a familiar for me.
  I asked for a hawk. He arrived with a penguin, thinking it
  was close enough.&quot;
  
  ?P
  &quot;So the penguin was your second Hunter?&quot;

  ?P
  &quot;Actually he was my third.&quot;

  ?P
  &quot;Third?&quot;

  ?P
  &quot;My second Hunter actually &lt;em&gt;was&lt;/em&gt; a hawk,
  which I named Hunter Two, T-W-O.
  He was given to me by my aunt, who had thought that my uncle had asked
  &lt;em&gt;her&lt;/em&gt; to obtain my familiar. When my uncle arrived a day later
  with the penguin, the hawk immediately attacked the penguin.
  Surprisingly, the penguin won that battle,
  and then began to eat the dead hawk.
  I was initially disappointed, but I grew to love that penguin.
  I named him Hunter, Too. T-O-O.&quot;

  ?P
  The Sprite speaks in the wolf&#39;s ear.
  &lt;span class=sprite-q&gt;&quot;Oops, sorry, I missed a step.
  I should have asked this first, ?master
  Please say your password, ?master&quot;&lt;/span&gt;

  ?P
  Nero sighs at yet another obstacle to using Nackle&#39;s Device.
  The wolf turns the sigh into an expression of sympathy.
  &quot;I dearly loved my first familiar as well.&quot;

  ?P
  Ivex glares at the wolf. &quot;Hunter Too was my fourth familiar.&quot;

  ?P
  The wolf does &lt;em&gt;not&lt;/em&gt; want to hear &lt;em&gt;that&lt;/em&gt; story.
  He quickly changes the subject.
  &quot;Right. What was it you were asking me earlier?&quot;

  ?P
  [[Continue|n1s Password Intro]]

&lt;&lt;else&gt;&gt;
  Ivex looks where the wolf is pointing, then
  &lt;&lt;if $n_candleLit&gt;&gt;
    growls in his mask.
  &lt;&lt;else&gt;&gt;
    snarls.
  &lt;&lt;/if&gt;&gt;
  &quot;You cannot possibly be ignorant of penguins.
  I would tell Hunter Two to peck your thighs if
  he were still alive.&quot;

  ?P
  &lt;&lt;if $n_tough || (!$n_abused &amp;&amp; !$n_subby &amp;&amp; !$n_ivexGrabbing)&gt;&gt;
    Peck his &lt;em&gt;thighs?&lt;/em&gt; Nero can&#39;t help himself.
    &quot;Did you ever tell him that a proper
    familiar would peck &lt;em&gt;eyes&lt;/em&gt; instead of thighs?&quot;
    ?P
    Ivex suddenly
    &lt;&lt;if $n_ivexNear&gt;&gt;
      &lt;em&gt;screams&lt;/em&gt; in the wolf&#39;s face.
    &lt;&lt;else&gt;&gt;
      &lt;em&gt;screams&lt;/em&gt;.
    &lt;&lt;/if&gt;&gt;
    &quot;I &lt;em&gt;asked&lt;/em&gt; for a &lt;em&gt;hawk&lt;/em&gt;.
    But Hunter Two turned out to be a far better familiar
    than any hawk could possibly be.
    Do not insult his memory!&quot;
    ?P
    Nero is taken aback.
    &lt;span class=nobr&gt;&quot;I&amp;mdash;&lt;/span&gt;
    I&#39;m sorry, I meant no disrespect.&quot;
    He quickly tries to change the subject.
    &quot;Apologies for the interruption. What were you asking me?&quot;
    &lt;&lt;set _screamed = true&gt;&gt;
  &lt;&lt;else&gt;&gt;
    The wolf almost says something about how
    pecking &lt;em&gt;eyes&lt;/em&gt; would be more threatening
    than &lt;em&gt;thighs&lt;/em&gt;, but thinks better of it.
    &quot;Apologies, I meant no disrespect.&quot;
    He tries to change the subject.
    &quot;What were you asking me just now?&quot;
  &lt;&lt;/if&gt;&gt;

  ?P
  The penguin&#39;s mouth &lt;em&gt;could&lt;/em&gt; be the right hole?
  The penguin
  &lt;&lt;= _screamed ? &quot;is clearly&quot; : &quot;does seem&quot;&gt;&gt;
  important ot Ivex.
  But Nero does not think he can convince the panther to touch it
  &lt;&lt;= _screamed ? &quot;now.&quot; : &quot;right now.&quot;&gt;&gt;
  The wolf is a bit dismayed that the panther responded
  &lt;&lt;= _screamed ? &quot;with such hostility.&quot; : &quot;so coldly.&quot;&gt;&gt;
  Nero is normally more successful at friendly dialogue with
  &lt;&lt;= $n_subby ? &quot;bullies&quot; : &quot;adversaries&quot;&gt;&gt;.
  ?P
  &lt;&lt;if $n_ivexWasReceptive&gt;&gt;
    Perhaps he should have asked earlier, when the panther was in
    a better mood? But Nero did not know earlier that he had
    a &lt;em&gt;reason&lt;/em&gt; to ask about the penguin.
    ?P
    Obviously, he should send a mysterious letter to his younger self,
    with a cryptic prophecy of panthers and penguins that does not
    make sense until a time when he can no longer do what
    the prophecy suggests.
    Nero laughs to himself at the impossibility of learning
    from the future.
    ?P
  &lt;&lt;else&gt;&gt;
    Perhaps he should have waited for the panther to be in a better
    mood? But no, there was no way of knowing that the penguin would
    be a
    &lt;&lt;= _screamed ? &quot;sensitive&quot; : &quot;difficult&quot;&gt;&gt;
    topic. If he avoided all topics that
    &lt;em&gt;could possibly&lt;/em&gt; irritate the panther,
    Nero would never say anything at all.
    ?P
    This is just another unfortunate mistake, with no lessons to learn.
  &lt;&lt;/if&gt;&gt;
  There are plenty of other holes to try.
  ?P
  $n_afterAction
&lt;&lt;/if&gt;&gt;

&lt;&lt;run
  $n_penguinAsked = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="511" name="n1x Penguin" tags="mt-ready has-hole maybe-password" position="6225,725" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;
&lt;&lt;vi-always n_penguinFlown false&gt;&gt;

&lt;!--
  viewing penguin always causes coin to drop, if it hasn&#39;t already.
--&gt;

&lt;&lt;cv-try n_magicPhase
  `MP_beforeCast` `MP_wantTouch` `MP_wantPass`
  `MP_contact` `MP_tapLost`&gt;&gt;
&lt;&lt;cv-try n_passTried &quot;[]&quot; &#39;[&quot;Hunter Too&quot;]&#39;&gt;&gt; /* maybe also Please */

&lt;&lt;if $n_penguinAsked&gt;&gt;
  Ivex&#39;s deceased familiar,
  a penguin named Hunter
  &lt;&lt;= $n_penguinTouched ? &quot;Too&quot; : &quot;Two&quot;&gt;&gt;,
  is &lt;&lt;= $n_wandExploded ? &quot;burning brightly&quot; : &quot;perched&quot;&gt;&gt;
  on top of
  &lt;&lt;if $n_candleLit&gt;&gt;
    the cabinet next to the one that the
    &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;
    came from.
  &lt;&lt;else&gt;&gt;
    the &lt;&lt;= $n_cabinetsMageSight ? &quot;uncolored&quot; : &quot;unpainted&quot;&gt;&gt; cabinet.
  &lt;&lt;/if&gt;&gt;
  For some reason, the panther had his penguin taxidermied

&lt;&lt;else&gt;&gt;
  Traditional mages often keep skeletal or taxidermied animals
  in their lair, more for the gloomy ambiance than any practical purpose.
  Ivex has one such animal atop
  &lt;&lt;if $n_candleLit&gt;&gt;
    the cabinet next to the one that the
    &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;
    came from.
  &lt;&lt;else&gt;&gt;
    an &lt;&lt;= $n_cabinetsMageSight ? &quot;uncolored&quot; : &quot;unpainted&quot;&gt;&gt; cabinet.
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if $n_penguinShrunk&gt;&gt;
    It&#39;s the penguin that Ivex shrunk earlier,
    which has since resumed its normal size.
    It appears to be taxidermied,
  &lt;&lt;else&gt;&gt;
    It&#39;s a penguin, and it appears to be taxidermied,
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

with its beak gaping open and its wings spread wide,
in a pose that seems more appropriate
for an eagle or an owl, not a flightless waterfowl.

&lt;&lt;if $n_mageSight&gt;&gt;
  ?P
  &lt;&lt;if $n_penguinTorn&gt;&gt;
    The penguin&#39;s wings are now gone. But strangely, the penguin is
    covered with an illusion of a penguin one millimeter larger.
    The illusion
    &lt;&lt;if $n_wandExploded&gt;&gt;
      is identical to the actual penguin before it caught fire,
    &lt;&lt;else&gt;&gt;
      is identical to the penguin underneath,
      with the same coloration,
    &lt;&lt;/if&gt;&gt;
    in exactly the same pose that the penguin had,
    before its wings were torn off.
  &lt;&lt;else&gt;&gt;
    Even stranger, the surface of the penguin is an illusion.
    There &lt;em&gt;is&lt;/em&gt; an actual penguin there,
    with the same coloration,
    in exactly that pose.
    &lt;&lt;if $n_free&gt;&gt;
      But the physical penguin is one millimeter smaller than the
      &lt;&lt;= $n_wandExploded ? &quot;&quot; : &quot;identical&quot;&gt;&gt;
      illusion that&#39;s covering it.
    &lt;&lt;else&gt;&gt;
      The physical penguin is identical to the illusion that&#39;s covering it.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if $n_wandExploded&gt;&gt;
    ?P
    The illusion is rapidly diverging from the penguin&#39;s real
    appearance, because of the fire consuming the feathers on its
    surface and the wood shavings within.
    Perhaps when the fire finishes burning, the penguin will be simply
    an illusion on top of empty bones and wire.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
Nero stares at the penguin
&lt;&lt;= $n_penguinAsked ? &quot;with annoyance&quot; : &quot;in perplexity&quot;&gt;&gt;.

&lt;&lt;if $n_coinsLanced&gt;&gt;
  &lt;&lt;if $n_penguinCoinDropped&gt;&gt;
    He remembers the important coin in its mouth that had
    fallen out, several times in the past hour!
    He does not know where that coin is now,
    and does not want to know.
    But the penguin&#39;s mouth is now filled with a metal
    gag made from the mangled orgy of the panther&#39;s collection of lewd coins,
    and &lt;em&gt;that&lt;/em&gt; will not fall out.
  &lt;&lt;else&gt;&gt;
    At least now, the important coin in its mouth
    &lt;em&gt;will not drop,&lt;/em&gt;
    since it&#39;s being held in place by a metal gag made
    from the mangled orgy of the panther&#39;s collection of lewd coins.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $n_penguinCoinDropped&gt;&gt;
  He remembers the mouth had been holding
  &lt;&lt;= $n_penguinTouched ? &quot;an important coin&quot; : &quot;a coin-like object&quot;&gt;&gt;
  which has fallen and rolled off somewhere.
&lt;&lt;elseif $n_penguinAsked&gt;&gt;
  While he&#39;s staring, the
  &lt;&lt;= $n_penguinTouched ? &quot;important coin&quot; : &quot;coin-like object&quot;&gt;&gt;
  in the penguin&#39;s mouth drops again,
  and disappears somewhere on the floor, again.
&lt;&lt;else&gt;&gt;
  While he&#39;s staring, an object suddenly drops from the penguin&#39;s mouth,
  and then disappears somewhere on the floor.
  It looked like a coin,
  &lt;&lt;if $n_coinsThrown&gt;&gt;
    perhaps similar to the
    &lt;&lt;= $n_coinsThrownAgain ? &quot;ones&quot; : &quot;one&quot;&gt;&gt;
    that Ivex had flung earlier at the wolf&#39;s crotch.
  &lt;&lt;elseif $n_bookcasesViewed&gt;&gt;
    perhaps similar to the ones on the bookshelf.
  &lt;&lt;else&gt;&gt;
    but Nero is not certain of it.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if MP_wantTouch === $n_magicPhaseReached&gt;&gt;
  The gaping mouth of the penguin leads him to wonder,
  could &lt;em&gt;that&lt;/em&gt; be the hole that the Sprite
  &lt;&lt;= $n_free ? &quot;wanted&quot; : &quot;wants&quot;&gt;&gt;
  him to touch?
  &lt;&lt;if $n_free&gt;&gt;
    &lt;!-- broken --&gt;
    Unfortunately, there&#39;s no way of testing that now.
  &lt;&lt;elseif $n_ivexGone&gt;&gt;
    Perhaps Ivex could have been persuaded to touch it,
    but he&#39;s gone now, and there&#39;s no way
    for Nero to reach the penguin himself.
  &lt;&lt;elseif $n_penguinAsked&gt;&gt;
    ?P
    But Ivex seems touchy about his penguin.
    &lt;&lt;if $n_ivexWasReceptive&gt;&gt;
      Nero perhaps should have asked earlier,
      when the panther was more relaxed.
    &lt;&lt;/if&gt;&gt;
    It&#39;s likely that raising the subject again will be met
    with more hostility. There are plenty of other
    holes to try.
  &lt;&lt;else&gt;&gt;
    And could Ivex be persuaded to touch it?
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif MT.passWanted()&gt;&gt;
  &lt;&lt;pw-suggest `PW_hunter`&gt;&gt;
    The names of pets and familiars are commonly used as passwords.
    Perhaps &quot;Hunter Too&quot; is Ivex&#39;s password?
  &lt;&lt;pw-fail&gt;&gt;
    The penguin&#39;s name, &quot;Hunter Too&quot;, is not the password.
    It&#39;s possible that Ivex is using some variant of the name,
    but there are too many possible variations that could be tried.
    Nero hopes that the password is something else.
  &lt;&lt;/pw-suggest&gt;&gt;

&lt;&lt;elseif $n_coinsLanced&gt;&gt;
  Did the penguin &lt;em&gt;really&lt;/em&gt; kill and eat a hawk?
  Was this ridiculous pose something it did often?
  Did it die from natural causes or did Ivex kill it himself?
  ?P
  Well, whatever Ivex&#39;s reasons for keeping his deceased familiar
  in such a state, the penguin no longer seems useful or important
  to Nero&#39;s escape from this place.

&lt;&lt;elseif $n_free&gt;&gt;
  The wolf considers searching for it,
  &lt;&lt;if $n_cabinetsUnderViewed&gt;&gt;
    but the layers of dirt and shed fur under the cabinets
    would make that task unpleasant.
    And it seems unnecessary anyway.
  &lt;&lt;else&gt;&gt;
    but a brief look under one cabinet reveals deep layers
    of dirt and shed fur. He decides that the unpleasant task
    is probably unnecessary anyway.
  &lt;&lt;/if&gt;&gt;
  ?P
  The penguin itself is a disturbing display of Ivex&#39;s
  demented psyche,
  but it doesn&#39;t seem useful or important right now.

&lt;&lt;else&gt;&gt;
  &lt;&lt;if $n_penguinTouched&gt;&gt;
    Did the penguin &lt;em&gt;really&lt;/em&gt; kill and eat a hawk?
    Did Ivex taxidermy the penguin just to have
    it hold an important coin that keeps falling out?
  &lt;&lt;elseif $n_penguinAsked&gt;&gt;
    Why does Ivex keep a coin-like object in his penguin&#39;s mouth,
    if it keeps falling out?
    Why taxidermy the penguin in such a ridiculous pose?
  &lt;&lt;else&gt;&gt;
    Why was there a coin-like object in the penguin&#39;s mouth?
    Why even a penguin?
  &lt;&lt;/if&gt;&gt;
  ?P
  Well, whatever Ivex&#39;s reasons for displaying
  &lt;&lt;= $n_penguinAsked ? &quot;his deceased familiar&quot; : &quot;a penguin&quot;&gt;&gt;
  in such a state,
  it doesn&#39;t seem useful or important right now.
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if !$n_penguinAsked&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the penguin.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;elseif MP_wantTouch === $n_magicPhase&gt;&gt;
      &lt;&lt;mtl [[n1x Penguin Ask]]&gt;&gt;
        Tell Ivex, &quot;Something just dropped from the beak...&quot;
      &lt;&lt;/mtl&gt;&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the penguin.&quot; &quot;not interested&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if _pwActions != null&gt;&gt;
    _pwActions
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_tooClever &amp;&amp; !$n_penguinLanced&gt;&gt;
    &lt;li&gt;[[Destroy the penguin with Nackle.|n2x Lance Penguin]]&lt;/li&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  delete $n_penguinShrunk;
  $n_dimPenguin = !_hasAction;
  $n_penguinCoinDropped = true;
  if ($n_free) {
    $n_cabinetsUnderViewed = true;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="512" name="n1x Study Bound" tags="mt-ready inclusion" position="5525,1350" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_tooClever false&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone n_ivexReceptive&gt;&gt;

&lt;&lt;if $n_studyViewed&gt;&gt;
  Much like Ivex himself, his study is pompous, strange, and dirty.
&lt;&lt;else&gt;&gt;
  Nero often finds that the furnishings of a person&#39;s private quarters
  will reflect
  the furnishings of their mind. If that&#39;s true in this case, Ivex&#39;s mind is
  pompous, dirty, and dominated by the
  &lt;&lt;mt-seen $n_dimCross&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Cross&quot;&gt;&gt;wooden cross&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  that&#39;s holding Nero in place.
  ?P
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_wallViewed&gt;&gt;
  &lt;&lt;mt-seen $n_dimWall&gt;&gt;
    The &lt;&lt;mta-no-loop &quot;n1x Wall&quot;&gt;&gt;far wall&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $n_dimMap&gt;&gt;
    has a &lt;&lt;mta-no-loop &quot;n1x Map&quot;&gt;&gt;large map&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  and a
  &lt;&lt;mt-seen $n_dimPainting&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Painting&quot;&gt;&gt;
        painting of
        &lt;&lt;= $n_paintingKnown ? &quot;Ivex&#39;s mother&quot; : &quot;a pantheress&quot;&gt;&gt;
    &lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  on either side of a
  &lt;&lt;mt-seen $n_dimWindow&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Window&quot;&gt;&gt;prominent round window&lt;&lt;/mta-no-loop&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;else&gt;&gt;
  The far wall has
  &lt;&lt;mt-seen $n_dimWall&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Wall&quot;&gt;&gt;some decorations&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  on each side of a
  &lt;&lt;mt-seen $n_dimWindow&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Window&quot;&gt;&gt;prominent round window&lt;&lt;/mta-no-loop&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;/if&gt;&gt;

The other walls are lined with many
&lt;&lt;mt-seen $n_dimCabinets&gt;&gt;
  &lt;&lt;mta-no-loop &quot;n1x Cabinets&quot;&gt;&gt;wooden cabinets&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;/mt-seen&gt;&gt;
and
&lt;&lt;mt-seen $n_dimBookcases&gt;&gt;
  &lt;&lt;mta-no-loop &quot;n1x Bookcases&quot;&gt;&gt;bookcases&lt;&lt;/mta-no-loop&gt;&gt;.
&lt;&lt;/mt-seen&gt;&gt;

&lt;&lt;if $n_studyViewed&gt;&gt;
  ?P
  Nero cannot see much behind the
  &lt;&lt;mt-seen $n_dimCross&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Cross&quot;&gt;&gt;wooden cross&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  he&#39;s bound to,
  but the only other furniture seems to be the
&lt;&lt;else&gt;&gt;
  The only other furniture Nero can see is the
&lt;&lt;/if&gt;&gt;
&lt;&lt;mt-seen $n_dimDesk&gt;&gt;
  &lt;&lt;mta-no-loop &quot;n1x Desk&quot;&gt;&gt;cluttered desk&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;/mt-seen&gt;&gt;
near the window.

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="513" name="n1x Study" tags="mt-ready" position="5400,1350" size="100,200">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $n_candleLit&gt;&gt;
  Smoke from the &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;
  is spreading through the room,
  which is not much larger than an ordinary room at an inn.
&lt;&lt;else&gt;&gt;
  The room is of average size, not much larger than an ordinary room at an inn.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_wandExploded&gt;&gt;
  &lt;&lt;vi-always n_mageSight true&gt;&gt;
  The space is filled with trembling strands of exotic energy that
  emanate from every surface, connecting the few remaining magic axioms
  in a flimsy web that&#39;s a faded memory of its former malevolent glory.

&lt;&lt;elseif $n_mageSight&gt;&gt;
  The space is filled with a tangle of exotic energy that emanates from
  every surface, connecting objects with magic axioms in a complex web
  that makes the disorganization seem less like carelessness and more
  like malicious intent.
&lt;&lt;else&gt;&gt;
  It looks to be Ivex&#39;s private study, and it has the mix of order and chaos
  that&#39;s typical for mages.
&lt;&lt;/if&gt;&gt;
?P

&lt;&lt;if $n_free&gt;&gt;
  &lt;&lt;include [[n2x Study Free]]&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;include [[n1x Study Bound]]&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_dimStudy = true;
  $n_studyViewed = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="514" name="n1x Wall" tags="mt-ready" position="5500,500" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_free&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;

&lt;&lt;set _map =
  $n_mapDefaced ? &quot;defaced map&quot;
  : $n_wandExploded ? &quot;burning map&quot;
  : &quot;large map&quot;&gt;&gt;

&lt;&lt;set _painting =
  $n_paintingBlasted ? &quot;tattered painting&quot;
  : $n_paintingKnown ? &quot;painting of Ivex&#39;s mother&quot;
  : &quot;painting of a pantheress&quot;&gt;&gt;

The far wall, on the other side of the
&lt;&lt;if $n_candleLit&gt;&gt;
  desk with the
  &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;,
&lt;&lt;else&gt;&gt;
  desk,
&lt;&lt;/if&gt;&gt;
is the only wall in the room
that does not have bookcases or cabinets against it.
The wall&#39;s bare surface is
&lt;&lt;if $n_mageSight&gt;&gt;
  an illusion of wooden tiles on top of a surface that seems to
  be actual wooden tiles, but in a different pattern.
&lt;&lt;else&gt;&gt;
  covered with wooden tiles placed in a simple repeating pattern.
&lt;&lt;/if&gt;&gt;

?P
Exactly in the wall&#39;s center is a
&lt;&lt;if $n_windowBroken&gt;&gt;
  &lt;&lt;mt-seen $n_dimWindow&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Window&quot;&gt;&gt;broken round window&lt;&lt;/mta-no-loop&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;mt-seen $n_dimWindow&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Window&quot;&gt;&gt;solitary round window&lt;&lt;/mta-no-loop&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;/if&gt;&gt;
Outside the window is
&lt;&lt;if $n_mageSight&gt;&gt;
  an unnaturally bright sky,
&lt;&lt;else&gt;&gt;
  an empty daytime sky,
&lt;&lt;/if&gt;&gt;
giving the window
the appearance of a giant blue eye
&lt;&lt;if $n_windowBroken&gt;&gt;
  of a creature that&#39;s dead.
&lt;&lt;elseif $n_naked&gt;&gt;
  that&#39;s leering at the completely naked wolf.
&lt;&lt;else&gt;&gt;
  that&#39;s staring over the desk at Nero&#39;s helplessly bound body.
&lt;&lt;/if&gt;&gt;

?P
To the &lt;&lt;= $n_roomFlipped ? &quot;right&quot; : &quot;left&quot;&gt;&gt; of the window is a
&lt;&lt;if $n_mapDefaced&gt;&gt;
  &lt;&lt;mt-seen $n_dimMap&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Map&quot;&gt;&gt;defaced map&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  with a crude drawing labeled &quot;Ivex the Impotent&quot;.
&lt;&lt;else&gt;&gt;
  &lt;&lt;mt-seen $n_dimMap&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Map&quot;&gt;&gt;_map&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  of the continent with political regions marked in bright primary colors.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_paintingLanced&gt;&gt;
  The opposite side of the window has a large bare spot
  where the painting used to be.
  The wooden tile illusion is still a mirrored
  duplicate on each side of the window,
  but the arrangement of the wall
  is no longer childishly symmetric.

  &lt;&lt;if !$n_paintingHasBill &amp;&amp; !$n_paintingBillGone&gt;&gt;
    ?P
    Nero has an amusing thought. He finds a scrap of paper and a pen
    to write a note:
    &quot;Bill For Design Consulting Services: 299 Silvers, Due Immediately.&quot;
    ?P
    He signs it with his name, and then places it on top
    of the destroyed remnants of
    the painting in the corner, careful to position the note
    so that it cannot possibly be overlooked.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  On the opposite side of the window is a
  &lt;&lt;mt-seen $n_dimPainting&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Painting&quot;&gt;&gt;_painting&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  that&#39;s the same size as the map.
  &lt;&lt;if $n_paintingBlasted&gt;&gt;
    The pantheress in the painting is
  &lt;&lt;elseif $n_paintingKnown&gt;&gt;
    Her name is Ivy. She&#39;s
  &lt;&lt;else&gt;&gt;
    The pantheress is
  &lt;&lt;/if&gt;&gt;
  wearing clothing that&#39;s
  also bright primary colors,
  and her body is splayed out on a couch in a pose that&#39;s almost
  a mirror image of the shape of the continent on the map.

  ?P
  The entire arrangement is disturbingly symmetric.
  &lt;&lt;if $n_mageSight&gt;&gt;
    Even the illusion of wooden tiles on the wall...
    It&#39;s reversed, but exactly the same on either side of the window.
    &lt;&lt;if $n_roomFlipped&gt;&gt;
      The wolf wonders if this symmetry is important to Ivex&#39;s strange
      demonstration of magically rearranging the room.
    &lt;&lt;else&gt;&gt;
      It seems pretty clear that Ivex lazily decorated this room with a
      simple reflection spell.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;else&gt;&gt;
    Even the pattern of wooden tiles in the wall...
    Nero notices above the painting,
    there&#39;s a tile with a distinctive wood grain that has
    an exactly reversed twin on the other side, above the map.
    &lt;&lt;if $n_roomFlipped&gt;&gt;
      The wolf wonders if this symmetry is important to Ivex&#39;s strange
      demonstration of magically rearranging the room.
    &lt;&lt;else&gt;&gt;
      Perhaps Ivex has lazily decorated the interior of this room with
      a simple reflection spell.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_dimWall = true;
  $n_wallViewed = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="515" name="n1x Wand Ask" tags="mt-ready" position="7725,1675" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero is wary about asking about Ivex&#39;s... wand,
so he phrases a question
that can&#39;t be misinterpreted.
&lt;&lt;if $n_abused || $n_subby&gt;&gt;
  &quot;I&#39;m sorry to interrupt, but is that
  &lt;&lt;set _pw = &quot;I&#39;m Sorry To Interrupt&quot;&gt;&gt;
&lt;&lt;else&gt;&gt;
  &quot;I have a question for &lt;em&gt;you&lt;/em&gt;. Is that
  &lt;&lt;set _pw = &quot;I Have A Question For You&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
the new Kopic model? They&#39;re my favorite magic crafters.
But I don&#39;t recognize the attachment on the end.&quot;

&lt;&lt;mf-pass _pw&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
&lt;&lt;if $n_ivexWasReceptive&gt;&gt;
  Ivex chuckles
  &lt;&lt;= $n_candleLit ? &quot;in his mask&quot; : &quot;&quot;&gt;&gt;
  and moves to pick up the wand.
  &quot;This is my own custom modification.
  I call it my Fuck Toy 9000.&quot;
  He inserts a finger into the squishy hole.
  &quot;This part has magic that will snugly grasp my erect cock.
  Activating the wand will then create the most
  delightful sensations.
  It&#39;s an erotic experience unlike any other.&quot;

  ?P
  Nero regrets asking. He tries to find a graceful
  way to change the subject. &quot;Fascinating.
  I can see it selling quite well.
  Do you have other marketable inventions?&quot;
  
  ?P
  The panther
  &lt;&lt;= $n_candleLit ? &quot;laughs&quot; : &quot;smirks&quot;&gt;&gt;
  and puts the wand back on the shelf.
  &quot;My Fuck Toy 9000 is not a gadget I will let just anyone try.
  But I &lt;em&gt;have&lt;/em&gt; used it on several adventurers
  who were quickly reduced to begging by its...
  &lt;em&gt;pleasures sublime&lt;/em&gt;.&quot;
  That last phrase is spoken with a feral intent that
  makes the wolf&#39;s fur shiver.
  
  ?P
  Nero &lt;em&gt;strongly&lt;/em&gt; regrets asking.
  He forces the conversation elsewhere.
  &quot;Apologies for the interruption.
  What were you asking me before?&quot;

  &lt;&lt;if MP_wantTouch === $n_magicPhase&gt;&gt;
    ?P
    The Sprite speaks in his ear,
    &lt;span class=sprite-q&gt;&quot;Please touch my hole, ?master&quot;&lt;/span&gt;
    The wand&#39;s attachment is not the correct hole.
    Nero is unsure if he&#39;s relieved or disappointed.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  &lt;&lt;if $n_candleLit&gt;&gt;
    Ivex chuckles beneath his mask.
  &lt;&lt;else&gt;&gt;
    Ivex smirks.
  &lt;&lt;/if&gt;&gt;
  &quot;That wand is my own invention. I call it my Fuck Toy 9000.
  The attachment has magic that will snugly grasp my erect cock,
  creating the most delightful sensations.
  It&#39;s an erotic experience unlike any other.&quot;
  
  ?P
  The panther snorts.
  &quot;And I have also used it on adventurers who were
  quickly reduced to begging by its... &lt;em&gt;pleasures sublime&lt;/em&gt;.
  I may well use it on you,
  and you may come to regret it.&quot;&quot;

  ?P
  Nero already regrets it.
  He quickly tries to change the subject.
  &quot;Apologies for the interruption.
  What were you asking me before?&quot;
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;pw-found `PW_fuckToy`&gt;&gt;
&lt;&lt;run
  $n_wandAsked = true;
  if ($n_ivexWasReceptive) {
    delete $n_ivexNear;
    $n_wandTouched = true;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="516" name="n1x Wand Known" tags="mt-ready inclusion" position="7600,1850" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_wandAsked true&gt;&gt;
&lt;&lt;vi-always n_wandRanAway false&gt;&gt;
&lt;&lt;vi-always n_wandUsed false&gt;&gt;

The wand on the bookshelf is a little larger than
&lt;&lt;if $n_candleLit&gt;&gt;
  average, with ridges down its length like the
  &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;.
&lt;&lt;elseif $n_mageSight &amp;&amp; !$n_free&gt;&gt;
  average and looks fully charged.
&lt;&lt;else&gt;&gt;
  average.
&lt;&lt;/if&gt;&gt;
Nero is somewhat of a connoisseur of wands,

&lt;&lt;if $n_wandRefused&gt;&gt;
  and he recognizes this one as a
  &lt;&lt;mt-seen $kn_Kopic&gt;&gt;
    &lt;&lt;tran-cut [[Kopic Classic|n2x Kopic]]&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;
  The tip is covered by
&lt;&lt;else&gt;&gt;
  and this appears to be a Kopic,
  but he is not sure which model,
  largely because the tip of it is covered by
&lt;&lt;/if&gt;&gt;

a short segment of thick, squishy tubing that&#39;s
&lt;&lt;if $n_mageSight&gt;&gt;
  teeming with exotic energy and
&lt;&lt;/if&gt;&gt;
pinkish in color.
?P

&lt;&lt;if MP_wantTouch === $n_magicPhaseReached&gt;&gt;
  /* can&#39;t touch wand before wantTouch */
  Unfortunately, or perhaps fortunately,
  the attachment was not the hole that the Sprite wanted him to touch.
&lt;&lt;/if&gt;&gt;

Nero vividly remembers Ivex&#39;s explanation of
&lt;&lt;= MT.passWanted() ? &quot;his wand.&quot; : &quot;his... &lt;em&gt;Fuck Toy 9000&lt;/em&gt;.&quot;&gt;&gt;
The attachment is intended to surround an erect cock
and stimulate it with great pleasure.
But the panther also mentioned with a sinister tone that
the wand has reduced adventurers to begging.

?P
&lt;&lt;if $n_free&gt;&gt;
  &lt;&lt;vi-always n_ivexGone true&gt;&gt;
  &lt;&lt;if $n_wandRefused&gt;&gt;
    Despite himself, Nero considers again whether he should try the
    wand&#39;s supposed pleasures. But his conclusion is the same as before.
    Ivex is a sadistic creature.
    &lt;&lt;if $n_mageSight&gt;&gt;
      There&#39;s no time to dissect the axioms to understand
    &lt;&lt;else&gt;&gt;
      There&#39;s no way of knowing
    &lt;&lt;/if&gt;&gt;
    exactly what variety of perverse pleasures or tortures
    the wand may create.
    ?P
    The wolf makes a mental note to steal the wand
    &lt;em&gt;after&lt;/em&gt; he escapes.
    To &lt;em&gt;study&lt;/em&gt; it.

  &lt;&lt;else&gt;&gt;
    Despite himself,
    &lt;&lt;if $n_extraHorny&gt;&gt;
      Nero can&#39;t stop wondering what Ivex meant when he said
      &lt;em&gt;pleasures sublime&lt;/em&gt;.
      The wolf&#39;s cock is
      &lt;&lt;if $n_pawed&gt;&gt;
        not satisfied by that brief paw job,
        and it&#39;s quite eager to see what the wand can do.
        His
      &lt;&lt;else&gt;&gt;
        quite eager to try it, and his
      &lt;&lt;/if&gt;&gt;
      mind cautiously agrees to consider it.
      ?P
      Ivex &lt;em&gt;did&lt;/em&gt; say he uses it on himself,
      so it can&#39;t be &lt;em&gt;too&lt;/em&gt; dangerous.
    &lt;&lt;else&gt;&gt;
      Nero cannot help but wonder what Ivex meant when he said
      &lt;em&gt;pleasures sublime&lt;/em&gt;.
      The wolf argues a bit with himself about trying the wand.
      &lt;&lt;if $n_mageSight&gt;&gt;
        ?P
        It does look fully charged.
      &lt;&lt;/if&gt;&gt;
      Ivex &lt;em&gt;did&lt;/em&gt; say he uses it on himself,
      so it can&#39;t be &lt;em&gt;too&lt;/em&gt; dangerous.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif MT.passWanted()&gt;&gt;
  &lt;&lt;pw-suggest `PW_fuckToy`&gt;&gt;
    Perhaps... Nero hesitates to even &lt;em&gt;think&lt;/em&gt; the name of the wand.
    Perhaps &quot;Fuck Toy 9000&quot; is Ivex&#39;s password?
  &lt;&lt;pw-fail&gt;&gt;
    The wand&#39;s name, which Nero does not want to even &lt;em&gt;think&lt;/em&gt;
    about, is thankfully not Ivex&#39;s password.
  &lt;&lt;/pw-suggest&gt;&gt;

&lt;&lt;else&gt;&gt;
  Despite himself, Nero is curious about &lt;em&gt;pleasures sublime&lt;/em&gt;.
  He makes a mental note to study the wand more closely, when he&#39;s free.

&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="517" name="n1x Wand Unknown" tags="mt-ready inclusion" position="7600,1725" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_wandAsked false&gt;&gt;
&lt;&lt;vi-always n_wandTouched false&gt;&gt;
&lt;&lt;vi-always n_wandRanAway false&gt;&gt;
&lt;&lt;vi-always n_wandRefused false&gt;&gt;
&lt;&lt;vi-always n_wandUsed false&gt;&gt;

The wand on the bookshelf is a little larger than
&lt;&lt;if $n_candleLit&gt;&gt;
  average, with ridges down its length like the
  &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;.
&lt;&lt;elseif $n_mageSight &amp;&amp; !$n_free&gt;&gt;
  average and looks fully charged.
&lt;&lt;else&gt;&gt;
  average.
&lt;&lt;/if&gt;&gt;
Nero is somewhat of a connoisseur of wands,
&lt;&lt;if $n_free&gt;&gt;
  and this appears to be a Kopic,
  but he is not sure which model,
&lt;&lt;else&gt;&gt;
  but he is not sure what model this one is,
&lt;&lt;/if&gt;&gt;
largely because the tip of it is covered by
a strange attachment.
?P
Customization of wands is a common practice,
but this modification is quite unusual.
It&#39;s a short segment of thick tubing,
pinkish in color,
a little smaller than the wolf&#39;s hand,
and placed so that the hole is perpendicular to the wand&#39;s shaft.
Nero does not recognize the material, but it
&lt;&lt;if $n_mageSight&gt;&gt;
  glows strongly with exotic energy, and it
&lt;&lt;/if&gt;&gt;
looks to be a squishy solid.

?P
&lt;&lt;if $n_free&gt;&gt;
  &lt;&lt;vi-always n_ivexGone true&gt;&gt;
  &lt;&lt;if MP_wantTouch === $n_magicPhaseReached&gt;&gt;
    Could the attachment be the hole that the Sprite wanted him to touch?
    It&#39;s an interesting idea, but there&#39;s no way to test it now.
    ?P
    Still, the wolf could &lt;em&gt;try&lt;/em&gt; the panther&#39;s wand.
    There might be useful magic in it.
  &lt;&lt;else&gt;&gt;
    Wands are sometimes bonded to their owner,
    but Ivex may have omitted that step.
    It might be worth trying the panther&#39;s wand
    to see what magic is in it.
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;if $n_mageSight&gt;&gt;
    And it does look to be fully charged.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif MP_wantTouch === $n_magicPhase&gt;&gt;
  &lt;&lt;if $n_ivexGone&gt;&gt;
    The attachment might be the hole that the Sprite wants him to touch,
    but it&#39;s far out of reach, and Ivex is gone.
    There&#39;s no way to touch it now.
  &lt;&lt;else&gt;&gt;
    Maybe the attachment is the hole that the Sprite wants him to touch?
    It might be possible to trick Ivex into touching it.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif MT.passWanted()&gt;&gt;
  Perhaps Ivex has given a name to his wand?
  It could be his password.
  &lt;&lt;if $n_ivexGone&gt;&gt;
    Unfortunately, Nero can&#39;t ask about it now.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  &lt;&lt;vi-ignore n_ivexGone&gt;&gt;
  The wolf mage wonders about the purpose of the attachment.
  Does it aid the wand&#39;s aim?
  Or perhaps it enhances its power in some way?
  ?P
  Well, whatever the purpose, it doesn&#39;t seem
  useful or important at the moment.
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="518" name="n1x Wand" tags="mt-ready has-hole maybe-password" position="7400,1925" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always $n_wandExploded false&gt;&gt;

&lt;&lt;vi-ignore n_ivexReceptive&gt;&gt;

&lt;&lt;cv-ignore n_kwAnnounce&gt;&gt;
&lt;&lt;cv-try n_magicPhase
  `MP_beforeCast` `MP_wantTouch` `MP_wantPass`
  `MP_contact` `MP_tapLost`&gt;&gt;

&lt;&lt;if $n_wandTubeShot&gt;&gt;
  &lt;&lt;include [[n2x Wand Nude]]&gt;&gt;
&lt;&lt;elseif $n_wandRanAway&gt;&gt;
  &lt;&lt;include [[n2x Wand Ran Away]]&gt;&gt;
&lt;&lt;elseif $n_wandUsed&gt;&gt;
  &lt;&lt;include [[n2x Wand Used]]&gt;&gt;
&lt;&lt;elseif $n_wandAsked&gt;&gt;
  &lt;&lt;include [[n1x Wand Known]]&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;include [[n1x Wand Unknown]]&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if !$n_wandAsked&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about his... wand.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;elseif MP_wantTouch === $n_magicPhase || MT.passWanted()&gt;&gt;
      &lt;&lt;mtl [[n1x Wand Ask]]&gt;&gt;Ask Ivex about his... wand.&lt;&lt;/mtl&gt;&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;set _reason = $n_abused || $n_naked ? &quot;um, no&quot; : &quot;not interested&quot;&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about his... wand.&quot; _reason&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  
  &lt;&lt;if _pwActions != null&gt;&gt;
    _pwActions
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_free &amp;&amp; !$n_wandTubeShot &amp;&amp; !$n_wandRanAway&gt;&gt;
    &lt;&lt;if $n_wandUsed&gt;&gt;
      &lt;&lt;mt-seen $n_endgameUsable &amp;&amp; $n_mageSight ? $xn_Broken : $xn_CagedHarsh&gt;&gt;
        &lt;&lt;mtl [[n2x Wand Cock Again 1]]&gt;&gt;
          How harmful can just one orgasm be? Use the wand again.
        &lt;&lt;/mtl&gt;&gt;
      &lt;&lt;/mt-seen&gt;&gt;
    &lt;&lt;elseif $n_wandAsked&gt;&gt;
      &lt;&lt;mtl [[n2x Wand Cock 1]]&gt;&gt;
        Cautiously try Ivex&#39;s wand.
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl [[n2x Wand Try 1]]&gt;&gt;
        Try Ivex&#39;s wand.
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;set _hasAction = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_tooClever &amp;&amp; !$n_wandRanAway&gt;&gt;
    &lt;&lt;if !$n_wandTubeShot&gt;&gt;
      &lt;li&gt;[[Destroy the wand with Nackle.|n2x Lance Wand]]&lt;/li&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;elseif !$n_wandLanced&gt;&gt;
      &lt;&lt;mtl [[n2x Lance Wand Inside 1]]&gt;&gt;
        Destroy the wand inside the room.
      &lt;&lt;/mtl&gt;&gt;
      &lt;&lt;mtl [[n2x Lance Wand Outside 1]]&gt;&gt;
        Destroy the wand outside the window.
      &lt;&lt;/mtl&gt;&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_dimWand = !_hasAction;
  $n_wandViewed = true;
  if ($n_mageSight) {
    $n_wandMageSight = true;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="519" name="n1x Window Ask 1" tags="mt-ready" position="7650,250" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-always n_magicPhase `MP_wantTouch`&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;cv-ignore n_opportunist n_spriteQuiet&gt;&gt; /* trivial variation */

Nero dramatically swivels his head toward the window
&lt;&lt;if $n_subby&gt;&gt;
  and whispers, &quot;Is that... a dragon?&quot;
&lt;&lt;elseif $n_abused&gt;&gt;
  and shouts, &quot;Dragon!&quot;
&lt;&lt;else&gt;&gt;
  and says, &quot;Is that your dragon?&quot;
&lt;&lt;/if&gt;&gt;
?P
Ivex stares at the bound wolf with confusion.
&quot;What nonsense are you talking about?&quot;
?P
Nero flattens his ears and adds more panic to his voice.
&quot;No! I saw something fly past the window!&quot;

?P
&lt;&lt;if $n_ivexWasReceptive&gt;&gt;
  &lt;&lt;if $n_candleLit&gt;&gt;
    Ivex shakes his head and speaks through his grinning mask
  &lt;&lt;else&gt;&gt;
    Ivex has a bemused smile. He speaks
  &lt;&lt;/if&gt;&gt;
  in the tone people use to
  humor small children. &quot;I suppose I should take a look, just in case.&quot;
  ?P
  He goes to the window, places his hands on the sill, and makes a show
  of looking all around the entire view.
  ?P
  [[Continue|n1x Window Ask 2]]

&lt;&lt;else&gt;&gt;
  Ivex &lt;&lt;= $n_candleLit ? &quot;laughs in his grinning mask.&quot; : &quot;laughs.&quot;&gt;&gt;
  &quot;I have no idea what trickery you&#39;re trying to accomplish,
  but do please keep trying. It&#39;s very funny.&quot;
  ?P
  $n_afterAction
&lt;&lt;/if&gt;&gt;

&lt;&lt;set $n_windowAsked = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="520" name="n1x Window Ask 2" tags="mt-ready" position="7775,250" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-always n_free false&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

The Sprite repeats in Nero&#39;s ear,
&lt;span class=sprite-q&gt;&quot;Please touch my hole, ?master&quot;&lt;/span&gt;
The window doesn&#39;t seem to be the correct hole.
?P
Ivex chuckles
&lt;&lt;= $n_candleLit ? &quot;through his grinning mask&quot; : &quot;&quot;&gt;&gt;
and returns to the
&lt;&lt;if $n_ivexNear&gt;&gt;
  wooden cross.
&lt;&lt;else&gt;&gt;
  front of his desk.
&lt;&lt;/if&gt;&gt;
&quot;Was that enough time to do whatever it is that you wanted to do
behind my back?&quot;
?P
Nero is disappointed, but not really surprised. He shakes his
head and says,
&quot;I must have been mistaken. What were you asking me?&quot;
?P
$n_afterAction

&lt;&lt;run
  delete $n_ivexNear;
  $n_windowHoleTried = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="521" name="n1x Window WantTouch" tags="mt-ready inclusion" position="7525,250" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $n_windowHoleTried&gt;&gt;
  Despite the window&#39;s hole-ish-ness, it doesn&#39;t seem to be
  the hole that the Sprite
  &lt;&lt;= $n_free ? &quot;wanted&quot; : &quot;wants&quot;&gt;&gt;
  him to touch.

&lt;&lt;else&gt;&gt;
  The window doesn&#39;t appear to have a way to open it,
  but it still technically is a hole.
  Maybe this is the hole that the Sprite
  &lt;&lt;= $n_free ? &quot;wanted&quot; : &quot;wants&quot;&gt;&gt;
  him to touch?
  ?P
  &lt;&lt;if $n_free&gt;&gt;
    Well, the Sprite is gone now.
    Nero could probably have tricked
    Ivex into touching the window,
    /* cspell:ignore beens */
    but there&#39;s no point dwelling on might-have-beens.
  &lt;&lt;elseif $n_ivexGone&gt;&gt;
    Nero could probably have
    tricked Ivex into
    touching the window, but he&#39;s gone now,
    and the wolf has no way to reach it from the cross.
  &lt;&lt;elseif $n_windowAsked&gt;&gt;
    Ivex was unreceptive to Nero&#39;s earlier suggestion,
    but the panther might still be tricked into touching the window.
    Or perhaps Nero should wait until the panther is less hostile.
  &lt;&lt;elseif $n_ivexWasReceptive&gt;&gt;
    Ivex seems like he might respond to a subtle suggestion.
  &lt;&lt;else&gt;&gt;
    Tricking Ivex into touching it should be easy.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="522" name="n1x Window" tags="mt-ready has-hole" position="7400,200" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone n_ivexReceptive&gt;&gt;
&lt;&lt;cv-try n_magicPhase `MP_beforeCast` `MP_wantTouch`
  `MP_contact` `MP_tapLost`&gt;&gt;

The room is amply lit
&lt;&lt;if $n_candleLit&gt;&gt;
  without help from the
  &lt;&lt;mta-no-loop &quot;n1x Candle&quot;&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;,
&lt;&lt;/if&gt;&gt;
by a solitary round window that&#39;s about a meter in diameter.


&lt;&lt;if $n_windowBroken&gt;&gt;
  The glass panes &lt;em&gt;were&lt;/em&gt; arranged in a radial pattern,
  but now the window is more like a ragged wound
  with a few fragments of glass still attached.
  ?P
  The naked wolf approaches the window slowly,
  careful to avoid stepping on any pieces of glass.
  The air is very still. The sun is not visible,
  nor are there any clouds above.
&lt;&lt;else&gt;&gt;
  The glass panes are arranged in a radial pattern that
  bulges slightly outward, like a lens,
  and perhaps the window would have a magnifying effect,
  if there were anything to magnify other than the clear blue sky.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_free&gt;&gt;
  &lt;&lt;if $n_mageSight&gt;&gt;
    There doesn&#39;t seem to be anything outside, other than
    a continuation of the exotic energy mesh that permeates the room.
    Nero cannot see the mesh&#39;s origin or farthest extent.
    It radiates outward from the smooth stones of the tower and
    then curls back inward in tangled knots at the edges of the window.
    ?P
    This room appears to be the top floor of an extremely tall tower.
    More knots of energy mark a pattern of similar round windows
    that continue downward.
    The ground is obscured by a layer of glowing clouds,
  &lt;&lt;else&gt;&gt;
    There doesn&#39;t seem to be anything outside other than clear blue sky.
    This room seems to be the top floor of an extremely tall tower.
    The outer surface of the wall is smooth stone that continues downward
    with a regular pattern of similar round windows.
    The ground is completely obscured by a layer of clouds,
  &lt;&lt;/if&gt;&gt;
  so it&#39;s unclear how high up this is,
  but it&#39;s clearly too high up to escape out the window without magic.
  ?P
  Nero wonders where this tower could be.
  A building this tall would certainly be noticed anywhere in the country.
  Perhaps the tower is floating in the sky, or shrouded with invisibility,
  or both?
  The energy requirements of any of those constructions would be immense!
  Ivex may be much more powerful than he seems.

&lt;&lt;else&gt;&gt;
  &lt;&lt;if $n_mageSight&gt;&gt;
    Outside, the wolf sees more of the same exotic energy
    that permeates the room.
    From his position, bound on a
    &lt;&lt;mt-seen $n_dimCross&gt;&gt;
      &lt;&lt;mta-no-loop &quot;n1x Cross&quot;&gt;&gt;wooden cross&lt;&lt;/mta-no-loop&gt;&gt;,
    &lt;&lt;/mt-seen&gt;&gt;
    he cannot tell where the energy flows begin or end.
  &lt;&lt;else&gt;&gt;
    From his position, bound on a
    &lt;&lt;mt-seen $n_dimCross&gt;&gt;
      &lt;&lt;mta-no-loop &quot;n1x Cross&quot;&gt;&gt;wooden cross&lt;&lt;/mta-no-loop&gt;&gt;,
    &lt;&lt;/mt-seen&gt;&gt;
    Nero does not see anything else outside.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if MP_wantTouch === $n_magicPhaseReached&gt;&gt;
  ?P
  &lt;&lt;include [[n1x Window WantTouch]]&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if !$n_windowAsked&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the window.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;elseif MP_wantTouch === $n_magicPhase&gt;&gt;
      &lt;&lt;mtl [[n1x Window Ask 1]]&gt;&gt;Draw attention to the window.&lt;&lt;/mtl&gt;&gt;
      &lt;&lt;set _hasAction = true&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the window.&quot; &quot;not interested&quot;&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_dimWindow = !_hasAction;
  if ($n_free) {
    $n_towerKnown = true;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="523" name="n1y Horny Bottle Ask" tags="mt-ready" position="5725,2625" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

The wolf gasps with awe. &quot;That bottle!&quot;

?P
Ivex glances at the bottle in question and chuckles in his grinning mask.
&quot;Already so eager to try Lance Rockhard?&quot;
He gives a light squeeze to the wolf&#39;s balls.
&quot;Most wolves need several more sessions with the candle before they&#39;re
ready to feel its enormous power.
But you&#39;re quite the special one, aren&#39;t you.&quot;

?P
&lt;em&gt;Lance Rockhard.&lt;/em&gt;
Nero is glad to
&lt;&lt;= $n_bottleNameKnown ? &quot;remember&quot; : &quot;learn&quot;&gt;&gt;
the horse god&#39;s name. He will never forget it.
He knows now who to pray to for his throbbing red cock&#39;s release.

&lt;&lt;mf-pass &quot;That Bottle&quot;&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
$n_afterAction

&lt;&lt;set $n_bottleAskedHorny = true&gt;&gt;
&lt;&lt;set $n_bottleNameKnown = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="524" name="n1y Horny Bottle" tags="mt-ready" position="5600,2625" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;

The large bottle sitting on a cabinet, near the 
&lt;&lt;mta-no-loop [[n1y Horny Penguin]]&gt;&gt;angry penguin&lt;&lt;/mta-no-loop&gt;&gt;,
is filled with
&lt;&lt;= $n_mageSight ? &quot;pulsing&quot; : &quot;&quot;&gt;&gt;
yellow liquid
bathing an enormous metallic horse cock.
Nero feels intimidated by the massive member,
inadequate,
but his throbbing red cock does not cower.
If anything, the wolf&#39;s penis seems to get harder,
stretch farther and yearn to become
a supplicant beneath the awesome
presence of
&lt;&lt;= $n_bottleNameKnown ? &quot;Lance Rockhard&quot; : &quot;the giant dildo&quot;&gt;&gt;
and the arcane glyphs inscribed on it.

?P
The naked wolf whimpers to the mighty cock of the horse god,
a wordless plea for a blessing, for a glimpse of
any of its erotic secrets that might satisfy his own throbbing red cock
and its aching desires.

?P
&lt;ul class=actions&gt;
  &lt;&lt;if !$n_bottleAskedHorny&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the bottle.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl [[n1y Horny Bottle Ask]]&gt;&gt;
        Gasp out, &quot;That bottle!&quot;
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="525" name="n1y Horny Candle Ask" tags="mt-ready" position="5650,2125" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

Nero gasps out, &quot;That candle...!&quot;
He&#39;s unable to speak a coherent sentence.

?P
Ivex laughs in his mask. &quot;Do you recognize it now?
Are you even able to recognize anything now?
Or is your mind already consumed with unthinking lust?&quot;

?P
The helpless wolf hears the question in the panther&#39;s voice,
but he&#39;s unable to parse the words, unable to understand
anything but the tone of it, the firm disdain that
makes him want to whimper and cringe.
His muscles spasm.
His erect cock shivers, but it does not retreat.
It seems instead to grow even more,
as the muscles of his hips and ass jerk and thrust
despite the paw grasping his balls.

&lt;&lt;mf-pass &quot;That Candle&quot;&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
$n_afterAction

&lt;&lt;set $n_candleAskedHorny = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="526" name="n1y Horny Candle" tags="mt-ready" position="5525,2125" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $n_mageSight&gt;&gt;
  Exotic magic energy is entering the base of the candleholder
  and flowing upward into the flickering red candle.
  The energy emerges from the flame at the tip
  in spurts that seem timed to the pulse of the wolf&#39;s blood.
&lt;&lt;else&gt;&gt;
  The flame at the tip of the flickering red candle
  seems to dance in time with the pulse of the wolf&#39;s blood.
&lt;&lt;/if&gt;&gt;

The reflection of the flame in
&lt;&lt;= $n_gravNoticed ? &quot;the&quot;: &quot;a&quot;&gt;&gt;
&lt;&lt;mta-no-loop [[n1y Horny Mirror]]&gt;&gt;?mirror&lt;&lt;/mta-no-loop&gt;&gt;
on the desk is another flickering pulse,
and their synchronization with his heart,
each beat and flicker,
makes a song, a rhythm, that&#39;s deeply hypnotic.
?P
Nero writhes
&lt;&lt;if !$n_ivexGone&gt;&gt;
  against the panther&#39;s hold on his balls,
&lt;&lt;/if&gt;&gt;
against the
&lt;&lt;mta-no-loop [[n1y Horny Cross]]&gt;&gt;wooden cross&lt;&lt;/mta-no-loop&gt;&gt;
to try to...
He isn&#39;t sure if he&#39;s trying to escape the rhythm
or accelerate it.

&lt;&lt;if !$n_ivexGone&gt;&gt;
  ?P
  The wolf drags his attention away from the flame,
  but then finds himself caught by another flame,
  the glistening of light in
  &lt;&lt;mta-no-loop [[n1y Horny Ivex]]&gt;&gt;Ivex&#39;s eyes&lt;&lt;/mta-no-loop&gt;&gt;.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_candleAsked || $n_candleAskedHorny&gt;&gt;
  Nero tries to remember what the panther had said before about the
  candle, but every beat of the wolf&#39;s heart floods
  his thoughts with sensations and desires from his throbbing red cock.
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if !$n_candleAskedHorny&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the candle.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl [[n1y Horny Candle Ask]]&gt;&gt;
        Ask Ivex, &quot;That candle...!&quot;
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="527" name="n1y Horny Cross" tags="mt-ready" position="5475,1950" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

The wooden cross is both a torment and a tease.
Its leather bindings are an embrace of Nero&#39;s growing arousal,
a promise of sensations beyond anything he has ever felt before.
But the cross keeps a strong grasp on his naked body
and commands him to have patience:
&lt;em&gt;Wait. Not yet. Hold still.&lt;/em&gt;

?P
The wolf cannot hold still. He strains against his
&lt;&lt;if $n_ivexGone&gt;&gt;
  bonds.
&lt;&lt;else&gt;&gt;
  bonds and against the paw grasping his balls.
&lt;&lt;/if&gt;&gt;
He sees himself writhing in the reflection in
&lt;&lt;= $n_gravNoticed ? &quot;the&quot;: &quot;a&quot;&gt;&gt;
&lt;&lt;mta-no-loop [[n1y Horny Mirror]]&gt;&gt;?mirror&lt;&lt;/mta-no-loop&gt;&gt;
on the desk.

&lt;&lt;if $n_gravNoticed&gt;&gt;
  The cross shifts against the
  &lt;&lt;if $n_gravKnown&gt;&gt;
    &lt;&lt;mta-no-loop [[n1y Horny Grav]]&gt;&gt;Gravity Crystals&lt;&lt;/mta-no-loop&gt;&gt;
    holding it in place.
  &lt;&lt;elseif $n_gravViewed&gt;&gt;
    &lt;&lt;mta-no-loop [[n1y Horny Grav]]&gt;&gt;Dream Crystals&lt;&lt;/mta-no-loop&gt;&gt;
    holding it in place.
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mta-no-loop [[n1y Horny Grav]]&gt;&gt;glowing crystals&lt;&lt;/mta-no-loop&gt;&gt;
    behind it.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

Nero&#39;s throbbing red cock twitches wildly in counterpoint to
the shimmering of the flame of the
&lt;&lt;mta-no-loop [[n1y Horny Candle]]&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;
as he tries to make his erection
&lt;em&gt;touch&lt;/em&gt; something, tries to give it pleasure and sensation of
anything other than the breeze of air.

&lt;&lt;if !$n_ivexGone&gt;&gt;
  ?P
  Ivex giggles hollowly at the wolf&#39;s squirmy display. The
  &lt;&lt;mta-no-loop [[n1y Horny Ivex]]&gt;&gt;muscular panther&lt;&lt;/mta-no-loop&gt;&gt;
  playfully bats a paw at the
  dripping tip of the wolf&#39;s cock.
  It&#39;s an intense but brief touch that has Nero gasping
  and yearning for more.
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if $n_ivexGone&gt;&gt;
    &lt;&lt;include &quot;n2b Struggle Action&quot;&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="528" name="n1y Horny Globe Ask Again" tags="mt-ready" position="5850,2450" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero cries out, &quot;Please, let me see! That dragon!&quot;

?P
Ivex tilts his head and stares into the eyes of the writhing wolf.
The wolf meets that gaze with all the yearning that he can
say with all the muscles of his face.

?P
The panther releases his grasp of the wolf&#39;s balls.
Ivex moves to the desk to pick up the snow globe.

&lt;&lt;mf-pass &quot;Please Let Me See&quot;&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

&lt;&lt;mf-please&gt;&gt;
  ?P
  The Sprite ?sprSays,
  &lt;span class=sprite-q&gt;&quot;There are approximately three thousand
  point zero zero four matches for &lt;em&gt;that&lt;/em&gt;
  request, ?sprHoldStop&quot;&lt;/span&gt;
&lt;&lt;/mf-please&gt;&gt;

?P
&lt;&lt;mta &quot;n1f Horny Clever 1&quot;&gt;&gt;Continue&lt;&lt;/mta&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="529" name="n1y Horny Globe Ask" tags="mt-ready" position="5900,2325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero gasps out, &quot;That dragon!&quot;

?P
&lt;&lt;if $n_windowAsked&gt;&gt;
  Ivex snorts beneath his mask.
  &quot;This nonsense again! There really is no
  possibility of a dragon outside the window.&quot;
&lt;&lt;else&gt;&gt;
  Ivex growls through his mask.
  &quot;What nonsense are you talking about?&quot;
&lt;&lt;/if&gt;&gt;

&lt;&lt;mf-pass &quot;That Dragon&quot;&gt;&gt;
&lt;&lt;/mf-pass&gt;&gt;

?P
The wolf gathers his wits to speak a coherent sentence.
&quot;The desk. Her face!&quot;

?P
The panther turns to look at the desk. When he realizes what
dragon is on his desk, he laughs. &quot;&lt;em&gt;That&lt;/em&gt; thing?
It&#39;s a &lt;em&gt;male&lt;/em&gt; dragon in a snow globe.
What does that have to do with anything?&quot;

?P
Nero is certain that the panther is mistaken (or lying!)
about the dragon&#39;s gender.
The wolf does not know why,
but he &lt;em&gt;needs&lt;/em&gt; to see her eyes.
&quot;Please, show me her face!&quot;

?P
Ivex laughs again. &quot;My candle has had many effects on my subjects,
but you&#39;re the first to fixate on
&lt;&lt;= $n_windowAsked ? &quot;dragons&quot; : &quot;my snow globe&quot;&gt;&gt;.&quot;
He gives the wolf&#39;s balls a quick squeeze.
&quot;Try to stay focused on the &lt;em&gt;important&lt;/em&gt; bits here.&quot;

&lt;&lt;mf-please&gt;&gt;
  ?P
  The Sprite ?sprSays,
  &lt;span class=sprite-q&gt;&quot;There are approximately nine million and two
  matches for your request, ?sprHoldStop&quot;&lt;/span&gt;
&lt;&lt;/mf-please&gt;&gt;

?P
Nero is devastated.
He can feel the dragoness&#39;s interest in him slipping away.
Is there still time to catch her attention?
Does he have to beg for the panther&#39;s assistance?

?P
He closes his eyes to prepare the speech in his mind.
He draws a deep breath and begins to speak it.

?P
&quot;I beg of you&amp;mdash;&quot;
What is the next word?
What sentence is he trying to say?
It was a question about something he was looking at.
He opens his eyes.
His attention is caught by the flickering red candle.
The flame makes the wolf forget whatever it was that
was distracting him from the burning fire, outside and within.

?P
$n_afterAction

&lt;&lt;set $n_globeAskedHorny = true&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="530" name="n1y Horny Globe" tags="mt-ready" position="5775,2325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;set _snowGlobe = $n_globeViewed || $n_globeAskedHorny&gt;&gt;

Not far from the
&lt;&lt;mta-no-loop [[n1y Horny Knife]]&gt;&gt;letter opener&lt;&lt;/mta-no-loop&gt;&gt;
on the desk, there&#39;s

&lt;&lt;if _snowGlobe&gt;&gt;
  a snow globe with a figurine of a dragon in it.
&lt;&lt;else&gt;&gt;
  an arcane globe that shows an image of a dragon
  in a frozen moment of time.
&lt;&lt;/if&gt;&gt;

The dragon is leaning against a pink pillar and facing away.
&lt;&lt;if $n_globeAskedHorny&gt;&gt;
  Ivex has said that the dragon is male,
  but Nero is certain the panther is lying
  to dissuade the wolf from courting her.
  The curvy hips supporting her tail are
  gloriously, obviously female.
&lt;&lt;else&gt;&gt;
  Nero cannot see whether the dragon is male or female,
  but the curvy hips supporting the tail suggests
  that she&#39;s a glorious representative of the female kind.
&lt;&lt;/if&gt;&gt;
?P
The wolf can picture in his mind
her breasts which bulge with a curve that matches her hips.
He can see, he can imagine, her goofy but charming grin,
and he wishes that her grin were aimed at him,
instead of at the
&lt;&lt;mta-no-loop &quot;n1y Horny Painting&quot;&gt;&gt;pantheress in the painting&lt;&lt;/mta-no-loop&gt;&gt;
on the wall.

?P
&lt;&lt;if $n_globeViewed&gt;&gt;
  The pink pillar is telling him &lt;em&gt;Carpe Diem&lt;/em&gt;,
  Seize the Day, a sentiment reinforced by the spirited gesture of
  the dragoness&#39;s raised, outstretched arm.
  Nero does not know where she comes from,
  which &lt;span class=nobr&gt;Caverns of L&amp;mdash;&lt;/span&gt;
  she represents.

&lt;&lt;elseif $n_globeAskedHorny&gt;&gt;
  Nero does not know why the dragoness is so special to him.

&lt;&lt;else&gt;&gt;
  Nero does not understand why the globe is showing him
  this amazing dragoness.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_ivexGone&gt;&gt;
  But he feels that she&#39;s a manifestation from
  the past, a custodian of regrets and roads not taken.
  He wants to meet her and return with her to a
  time when he could have felt her embrace,
  a time when his forlorn erect cock, weeping endlessly of pre-cum,
  could have found a comforting home, snug between her
  welcoming thighs.

&lt;&lt;elseif $n_globeAskedHorny&gt;&gt;
  But can love-filled lust ever truly be explained?
  All the wolf wants, all he needs, is to see her gaze upon him,
  so that he can know that she also feels,
  or might feel, love for him as well.

&lt;&lt;elseif MT.passWanted()&gt;&gt;
  But he feels that she&#39;s a demigod with an unspoken
  command for him to perform. If only he could see her better,
  could gaze into her sultry eyes and present to her a
  humble offering of his stiffened canine cock, in hopes that
  she might admire his need and grant him an answer
  &lt;span class=nobr&gt;to it.&lt;/span&gt;

&lt;&lt;else&gt;&gt;
  But he feels that she&#39;s a stern messenger of the gods with an omen
  for him to decipher, with a promise that when he discovers
  the secret of it, she will welcome him with an embrace
  in her nurturing breasts. His cock oozes and twitches in anticipation
  of her praise and adoration.
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if $n_globeAskedHorny&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Plead with Ivex to see her face.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl [[n1y Horny Globe Ask Again]]&gt;&gt;
        Plead with Ivex to see her face.
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;if $n_ivexGone&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the dragon.&quot; &quot;Ivex is gone&quot;&gt;&gt;
    &lt;&lt;elseif !MT.passWanted()&gt;&gt;
      &lt;&lt;mtl-denied &quot;Ask Ivex about the dragon.&quot; &quot;too shy&quot;&gt;&gt;
    &lt;&lt;else&gt;&gt;
      &lt;&lt;mtl [[n1y Horny Globe Ask]]&gt;&gt;
        Ask Ivex about the dragon.
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="531" name="n1y Horny Grav" tags="mt-ready" position="5900,2175" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;

In the reflection in
&lt;&lt;= $n_gravNoticed ? &quot;the&quot;: &quot;a&quot;&gt;&gt;
&lt;&lt;mta-no-loop [[n1y Horny Mirror]]&gt;&gt;?mirror&lt;&lt;/mta-no-loop&gt;&gt;
on the desk,
Nero sees ?crystals behind the
&lt;&lt;mta-no-loop [[n1y Horny Cross]]&gt;&gt;wooden cross&lt;&lt;/mta-no-loop&gt;&gt;
that&#39;s holding him tight.

&lt;&lt;if $n_mageSight&gt;&gt;
  Each limb of the cross has a crystal behind it,
  and a web of exotic energy connects them together.
  The web is pulsing in a tantalizing irregular pattern,
  and it feels like the web is holding
&lt;&lt;else&gt;&gt;
  Each limb of the cross has a crystal behind it.
  The light from them is pulsing in a tantalizing
  irregular pattern that whispers to
&lt;&lt;/if&gt;&gt;

Nero with a warmth that feels... &lt;em&gt;right&lt;/em&gt;,
like he was always meant to be here,
bound to the cross with erotic delight.

?P
He wants to dance to that irregular pattern and
feel the pulse of it synchronize with his throbbing red cock.
His aching arms and legs want to writhe.
The wolf shakes and squirms to a rhythm that&#39;s beating in his heart.
&lt;&lt;if !$n_ivexGone&gt;&gt;
  ?P
  The [[dominating panther|n1y Horny Ivex]]
  giggles in his mask and adjusts his grip of the wolf&#39;s balls.
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if $n_ivexGone&gt;&gt;
    &lt;&lt;include &quot;n2b Struggle Action&quot;&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;!-- horny look doesn&#39;t add any info --&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="532" name="n1y Horny Ivex" tags="mt-ready" position="5425,2300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_ivexGone false&gt;&gt;

The panther mage, standing tall
with a firm grip on the balls of the bound wolf, is
&lt;&lt;if $n_mageSight&gt;&gt;
  a radiant figure
  of exotic energies that continually shift in fascinating patterns.
  Nero finds himself drawn into the complexity of it.
  His mind wants to embrace it,
  wants to drown in its depths and feel its extraordinary power
  overwhelm him.
  ?P
  It&#39;s a desire deeply spiritual,
  but also strongly physical.
  The wolf&#39;s muscles strain to feel
  the imaginary touch of exotic sparks
  that flare off every movement Ivex makes.
  The exertion makes the wolf pant long breaths
  that fill his mouth, his nose, and all his physical senses
  with the taste of the panther&#39;s presence.

&lt;&lt;else&gt;&gt;
  a commanding figure
  with a voice that makes Nero shiver
  from anticipation and apprehension,
  an uncomfortable blend of dissonant emotions.
  Every word that Ivex speaks makes a breath of spicy air swirl,
  and wisps of musky secrets curl around the wolf,
  to tease his nose, his mouth, and all his senses with
  a splash of the panther&#39;s maddening scent,
  with a promise that the tease might become something more,
  might become the panther&#39;s full presence,
  dominating the wolf&#39;s consciousness and filling him up.
&lt;&lt;/if&gt;&gt;

?P
It&#39;s uncomfortably erotic,
and also unmistakably &lt;em&gt;male&lt;/em&gt;.
Nero struggles to reconcile his
heterosexual history with his
inexplicable arousal now.
His eyes latch on to the
&lt;&lt;mta-no-loop [[n1y Horny Painting]]&gt;&gt;massive portrait of femininity&lt;&lt;/mta-no-loop&gt;&gt;
hanging on the far wall,
but his mind keeps returning to obsessive imagination
of Ivex&#39;s ?barbed, erect cock.

?P
&lt;ul class=actions&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="533" name="n1y Horny Knife" tags="mt-ready" position="5600,2325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;

The bound wolf sees a letter opener on the desk,
a gleaming length of steel, strong and sharp.
Nero realizes that the letter opener is exactly the thing he needs,
to cut his bonds, so that he can use his paws,
to touch and grab and stroke his desperately needy cock.
?P
But the letter opener is out of reach.
?P
If only he weren&#39;t bound,
he could &lt;em&gt;grab&lt;/em&gt; the letter opener, to cut himself loose,
and then satisfy his overwhelming sexual desire.
?P
There&#39;s a problem with that thought,
nagging at the back of Nero&#39;s mind,
but he doesn&#39;t have time to figure out what it is right now.
His cock&#39;s hunger is more urgent.
The wolf struggles against his bonds some more.
He &lt;em&gt;needs&lt;/em&gt; to be free, so that he can grab the letter opener,
and then cut his bonds.
&lt;&lt;if $n_ivexGone&gt;&gt;
  He writhes against the wooden cross and whines,
  hoping that the cross will understand and help.
&lt;&lt;else&gt;&gt;
  He whines at the panther grasping his balls,
  hoping that the panther will understand and help.
&lt;&lt;/if&gt;&gt;
?P
&lt;ul class=actions&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="534" name="n1y Horny Look" tags="mt-ready inclusion" position="5300,2050" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;random-once n_hornyLook&gt;&gt;

&lt;&lt;ro-choice !$n_ivexGone&gt;&gt;
  Nero trembles from the paw grasping his balls,
  and he shakes the
  [[wooden cross|n1y Horny Cross]]
  holding him tight
  as he stares at the bright white teeth painted on the
  [[panther&#39;s grinning mask|n1y Horny Ivex]].
  Spicy smoke from the
  [[flickering red candle|n1y Horny Candle]]
  tickles the inner surfaces of the wolf&#39;s nose and throat,
  giving him a sensation that resembles the moment before a sneeze,
  but the feeling spreads throughout his entire body
  and ripples through his skin.

&lt;&lt;ro-choice !$n_ivexGone&gt;&gt;
  Nero&#39;s breath is labored. Each inhalation brings another stream of
  spicy air from the
  [[flickering red candle|n1y Horny Candle]]
  to inflame the walls of his lungs.
  The sensation makes him writhe despite the panther&#39;s grasp on his balls.
  The wolf&#39;s motion against the
  [[wooden cross|n1y Horny Cross]]
  rubs the sweat from his limbs into the
  straps that hold him bound.
  The scent of sweaty leather slithers through his head, but it&#39;s the
  [[masculine panther musk|n1y Horny Ivex]]
  that dominates his senses.

&lt;&lt;ro-choice !$n_ivexGone&gt;&gt;
  Nero feels an emptiness, a hunger that
  aches at the sound of something in the growly tone of the
  [[panther&#39;s masked voice|n1y Horny Ivex]].
  The naked wolf strains against his bonds and
  the paw holding his balls,
  unsure whether he&#39;s trying to move closer or escape.
  Each squirm causes the leather straps and
  [[wooden cross|n1y Horny Cross]]
  to squeak and creak in counterpoint to the beating
  of his heart, a pulse that seems to flutter with each shimmer
  of the flame of the
  [[flickering red candle|n1y Horny Candle]].

&lt;&lt;ro-choice $n_ivexGone&gt;&gt;
  He shivers and gasps in the leather bonds that
  are holding him tight against the
  [[wooden cross|n1y Horny Cross]].
  The [[flickering red candle|n1y Horny Candle]]
  on the desk is
  burning with an intense, spicy heat that
  &lt;&lt;if $n_mageSight&gt;&gt;
    shimmers in the exotic energy permeating the room.
  &lt;&lt;else&gt;&gt;
    the wolf can feel from across the room.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;ro-choice $n_ivexGone&gt;&gt;
  He huffs, long gasping breaths that fill his lungs with
  spicy heat from the
  [[flickering red candle|n1y Horny Candle]].
  It&#39;s an intense heat that spreads outward through his body,
  infusing his aching limbs and making them writhe against the
  [[wooden cross|n1y Horny Cross]]
  &lt;&lt;if $n_mageSight&gt;&gt;
    in synchrony with the pulsing exotic energies in the room.
  &lt;&lt;else&gt;&gt;
    standing in Ivex&#39;s study.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;ro-choice $n_ivexGone&gt;&gt;
  He shakes his head and tries to ignore the
  &lt;&lt;if $n_mageSight&gt;&gt;
    swirl of exotic energies that spiral around the
  &lt;&lt;else&gt;&gt;
    insistent throb of the
  &lt;&lt;/if&gt;&gt;
  [[flickering red candle|n1y Horny Candle]],
  tries to aim his attention toward finding a flaw in the
  [[wooden cross|n1y Horny Cross]]
  that will allow him to defeat it.
  But his thoughts keep flickering from moment to moment,
  casting shadows of unseen emotions
  between the pulses of pounding sensations in his head.

&lt;&lt;/random-once&gt;&gt;

?P
&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="535" name="n1y Horny Mirror" tags="mt-ready" position="5725,1900" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;

&lt;&lt;if $n_globeAskedHorny&gt;&gt;
  Not far from the
  &lt;&lt;mta-no-loop [[n1y Horny Candle]]&gt;&gt;flickering red candle&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;else&gt;&gt;
  Resting against the
  &lt;&lt;mta-no-loop [[n1y Horny Globe]]&gt;&gt;?globe&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;/if&gt;&gt;
on the desk, there&#39;s a ?mirror

&lt;&lt;if $n_mageSight&gt;&gt;
  with swirls of exotic energies that surround
  &lt;&lt;if $n_mirrorMagicKnown&gt;&gt;
    a more familiar magic.
    But Nero&#39;s
  &lt;&lt;else&gt;&gt;
    some familiar, un-exotic magic.
    The plain-seeming mirror is a &lt;em&gt;magic&lt;/em&gt; mirror.
    ?P
    Nero tries to understand the implications of that discovery,
    but his
  &lt;&lt;/if&gt;&gt;
  attention is captured by the mirror&#39;s reflection of
&lt;&lt;else&gt;&gt;
  that&#39;s placed at an angle that allows Nero to see himself in it.
  The reflection draws his attention to
&lt;&lt;/if&gt;&gt;
his throbbing red cock,
which glistens brightly with pre-cum.
This vivid signal of his arousal makes his cock greedier,
makes it bulge even more.
?P
The wolf
&lt;&lt;if !$n_ivexGone&gt;&gt;
  humps the hand clenching his balls and
&lt;&lt;/if&gt;&gt;
writhes against the leather that keeps
him bound to the
&lt;&lt;mta-no-loop [[n1y Horny Cross]]&gt;&gt;wooden cross&lt;&lt;/mta-no-loop&gt;&gt;.
His struggles shift the cross against
&lt;&lt;= $n_gravNoticed ? &quot;the&quot; : &quot;some&quot;&gt;&gt;
&lt;&lt;if $n_gravKnown&gt;&gt;
  &lt;&lt;mta-no-loop [[n1y Horny Grav]]&gt;&gt;Gravity Crystals&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;elseif $n_gravViewed&gt;&gt;
  &lt;&lt;mta-no-loop [[n1y Horny Grav]]&gt;&gt;Dream Crystals&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;mta-no-loop [[n1y Horny Grav]]&gt;&gt;glowing crystals&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;/if&gt;&gt;
behind it,

&lt;&lt;if $n_mageSight&gt;&gt;
  and the energy arcs between them shimmer. But
&lt;&lt;else&gt;&gt;
  but
&lt;&lt;/if&gt;&gt;

the motion does not satisfy his desire.
It only makes his cock hungrier.

?P
&lt;ul class=actions&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  delete $n_dimCross;
  $n_gravNoticed = true;
  if ($n_mageSight) {
    $n_mirrorFlawHorny = true;
    $n_mirrorMagicKnown = true;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="536" name="n1y Horny Painting" tags="mt-ready" position="5600,2475" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_ivexGone&gt;&gt;

The large painting on the wall is the most feminine thing in the room,
due to its depiction of
&lt;&lt;if $n_paintingKnown&gt;&gt;
  Ivex&#39;s mother,
&lt;&lt;else&gt;&gt;
  a female panther
&lt;&lt;/if&gt;&gt;
who&#39;s perhaps the &lt;em&gt;most&lt;/em&gt; of anything that Nero has ever seen.
She&#39;s an amply-breasted black pantheress whose
curvy, wide-hipped body is too large for the couch she&#39;s on.
Her dress is an exhilarating riot of primary colors
that reveals more than it conceals,
and her expression staring off to the side
is a firm come-hither to worship her,
and maybe to taste the tip of her tongue that&#39;s peeking
flirtatiously out the side of her mouth.
&lt;&lt;if $n_paintingLicked&gt;&gt;
  The memory of &lt;em&gt;Ivex licking that tongue&lt;/em&gt;
  makes Nero cringe, but it somehow seems to inflame instead of
  dampen his desire.

&lt;&lt;elseif MP_wantTouch === $n_magicPhase&gt;&gt;
  ?P
  Her mouth must be the hole that the Sprite wants him to touch!
  Nero strains at his bonds to try to reach it.

&lt;&lt;elseif MT.passWanted()&gt;&gt;
  &lt;&lt;if $n_paintingKnown&gt;&gt;
    Nero whispers her name, &quot;Ivy&quot;, hoping that she will
    somehow hear it.
  &lt;&lt;else&gt;&gt;
    Nero wishes he knew her name, but he does not want to
    reveal his interest to any rivals,
    so he does not ask Ivex for an introduction.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
As the wolf gazes into the pantheress&#39;s golden eyes,
he realizes he&#39;s jealous of the object
of her attention, which seems to be the
&lt;&lt;if $n_bottleViewed&gt;&gt;
  &lt;&lt;mta-no-loop [[n1y Horny Bottle]]&gt;&gt;massive horse cock&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;&lt;mta-no-loop [[n1y Horny Penguin]]&gt;&gt;aggressive penguin&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;/if&gt;&gt;
on top of a cabinet at the side of the room.
Nero feels a primal urge to fight the
&lt;&lt;= $n_bottleViewed ? &quot;horse dildo&quot; : &quot;penguin&quot;&gt;&gt;
for the right to the pantheress&#39;s affection, an urge that continues to grow
stronger the longer he considers
how easy it would be to defeat the
&lt;&lt;= $n_bottleViewed ? &quot;horse dildo&quot; : &quot;penguin&quot;&gt;&gt;
in battle.
His feral agitation culminates in an angry bark that uses all his breath.
?P
The wolf&#39;s own bark surprises him, interrupting his predatory focus and
giving him a moment of mental clarity about the absurdity of his attraction.
&lt;em&gt;
  She&#39;s much too fat,
  she&#39;s dressed like a two-copper whore,
  &lt;&lt;if $n_paintingKnown&gt;&gt;
    and she&#39;s &lt;em&gt;Ivex&#39;s mother!&lt;/em&gt;
  &lt;&lt;else&gt;&gt;
    and she&#39;s &lt;em&gt;holding that book upside down!&lt;/em&gt;
  &lt;&lt;/if&gt;&gt;
  I am &lt;em&gt;not&lt;/em&gt; aroused by her.
&lt;/em&gt;
But his quivering cock disagrees.

?P
Nero wrests his attention away from the pantheress
and searches the room for something completely asexual
that he can focus on:
the &lt;&lt;mta-no-loop [[n1y Horny Globe]]&gt;&gt;?globe&lt;&lt;/mta-no-loop&gt;&gt; on the desk,
the &lt;&lt;mta-no-loop [[n1y Horny Knife]]&gt;&gt;letter opener&lt;&lt;/mta-no-loop&gt;&gt; near it,
anything other than that disturbingly arousing portrait.

?P
&lt;ul class=actions&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;set $n_paintingViewedHorny = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="537" name="n1y Horny Penguin Scream" tags="mt-ready" position="5400,2625" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero screams at
&lt;&lt;if $n_paintingViewedHorny || !$n_ivexGone&gt;&gt;
  his rival,
&lt;&lt;else&gt;&gt;
  the intruder,
&lt;&lt;/if&gt;&gt;
the aggressive penguin on the cabinet.
The scream is a sentence, it&#39;s supposed to have words,
but the wolf has forgotten what they were.
His statement is now a feral yowl that asserts his primary, primal claim.
?P
The wolf&#39;s snarling jaws are spread as wide as his foe&#39;s own screaming beak.
His throbbing red cock is showing the superior firmness of his resolve.
His angry throaty voice drowns out the penguin&#39;s own pitifully weak squawks.

?P
&lt;&lt;if $n_ivexGone&gt;&gt;
  The penguin is not impressed. Nero yowls until he&#39;s out of breath.
&lt;&lt;else&gt;&gt;
  Ivex grabs the wolf&#39;s muzzle and says, &quot;Enough. Hunter
  &lt;&lt;= $n_penguinTouched ? &quot;Too&quot; : &quot;Two&quot;&gt;&gt;
  is not a threat.&quot;
  ?P
  &lt;&lt;if $n_subby&gt;&gt;
    The confidence of the panther makes Nero tremble,
    and he&#39;s instantly quiet.
  &lt;&lt;else&gt;&gt;
    The sound yanks Nero&#39;s attention back to the paw grasping his balls,
    away from the pathetic penguin.
    But he still keeps an eye on it, growling whenever it moves.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="538" name="n1y Horny Penguin" tags="mt-ready" position="5400,2500" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

On top of a cabinet is a penguin, perched in an aggressive stance
and staring straight at the wolf with clear intent.
The penguin&#39;s wings are spread wide,
ready to propel itself forward in an attack.
?P
Nero growls a warning at 
&lt;&lt;if $n_paintingViewedHorny&gt;&gt;
  his rival for the pantheress&#39;s attention,
&lt;&lt;elseif !$n_ivexGone&gt;&gt;
  his rival for Ivex&#39;s attention,
&lt;&lt;else&gt;&gt;
  the intruder in his territory,
&lt;&lt;/if&gt;&gt;
and the penguin responds with a silent scream from
its gaping beak.

?P
&lt;&lt;if !$n_penguinCoinDropped&gt;&gt;
  A small metal object drops from the beak.
  It&#39;s a challenge to the wolf to &lt;em&gt;fetch&lt;/em&gt; it.
&lt;&lt;/if&gt;&gt;
The wolf barks angrily.
His throbbing red cock waves stiffly as he struggles to meet his foe.
When he&#39;s close enough,
he&#39;ll grab the
&lt;&lt;mta-no-loop [[n1y Horny Bottle]]&gt;&gt;large bottle&lt;&lt;/mta-no-loop&gt;&gt;
beside the penguin and
smash broken glass into that mocking face!

&lt;&lt;if !$n_ivexGone&gt;&gt;
  ?P
  Ivex turns his head to look for the focus of the wolf&#39;s aggression.
  When the
  &lt;&lt;mta-no-loop [[n1y Horny Ivex]]&gt;&gt;brawny panther&lt;&lt;/mta-no-loop&gt;&gt;
  realizes what it is,
  he laughs with rasping breaths that shake his grinning mask.

  &lt;&lt;if $n_penguinCoinDropped&gt;&gt;
    ?P
    &lt;&lt;if $n_subby&gt;&gt;
      The sound makes Nero tremble, and he&#39;s instantly quiet.
    &lt;&lt;else&gt;&gt;
      The sound yanks Nero&#39;s attention back to the
      paw holding his balls,
      away from the pathetic penguin.
      But he still keeps an eye on it, growling whenever it moves.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if !$n_penguinCoinDropped&gt;&gt;
    &lt;&lt;mtl [[n1y Horny Penguin Scream]]&gt;&gt;
      Scream at the penguin to fetch it himself!
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;set $n_penguinCoinDropped = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="539" name="n2a Ivex Gone" tags="mt-ready section-start" position="6850,3225" size="200,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;checkpoint-save n_checkpoint1 &quot;Ivex&#39;s Disappearance&quot;&gt;&gt;

Ivex&#39;s exit by teleportation creates
&lt;&lt;if $n_mageSight&gt;&gt;
  a swirl of exotic energies and
&lt;&lt;/if&gt;&gt;
a sudden rush of air that causes the candle&#39;s smoke to scatter.

?P
The candle flame sputters, and goes out.

?P
Nero&#39;s head clears. The scent of the candle still lingers in the air,
but it&#39;s lost its compulsion. The spice is an afterthought now,
like a whiff of perfume from a person passing by.

?P
The wolf&#39;s cock is still achingly erect, and it&#39;s filled with a strong and distracting desire to &lt;em&gt;thrust&lt;/em&gt; itself into something warm and tight. But Nero&#39;s will is stronger. It&#39;s an urge he can deny.

?P
With his mind released from the candle&#39;s influence,
the lupine mage now realizes what should have been obvious before.
He &lt;em&gt;isn&#39;t&lt;/em&gt; attracted to &lt;em&gt;Ivex!&lt;/em&gt; (&lt;em&gt;Thankfully!&lt;/em&gt;)

?P
It&#39;s Ivex&#39;s red &lt;em&gt;candle!&lt;/em&gt;
The candle is probably an item from the Lust Scenter catalog of aphrodisiacs.
&lt;&lt;if $n_candleAsked&gt;&gt;
  As Ivex had hinted earlier,
  they&#39;re more an artifact of herbalism than magic.
  They&#39;re an expensive import,
&lt;&lt;else&gt;&gt;
  They&#39;re an expensive import,
  more an artifact of herbalism than of magic, and
&lt;&lt;/if&gt;&gt;
often used by lovers on special occasions like anniversaries and wedding nights. Nero has used a few of them himself.

?P
But this candle is much more potent than the ones he&#39;s experienced before. Ivex must have enhanced it greatly somehow. To what end?

?P
Well, that&#39;s a question to be answered some other time. What&#39;s important now is escape. Which should be easy, now that Ivex is gone.

?P
[[Continue|n2a Relight Candle]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="540" name="n2a Relight Candle" tags="mt-ready" position="7075,3300" size="100,100">&lt;&lt;nobr&gt;&gt;

A flicker in the corner of Nero&#39;s eye catches his attention.

?P
&lt;&lt;if $n_mageSight&gt;&gt;
  A pulse of energy from the candleholder has lit the candle again!
&lt;&lt;else&gt;&gt;
  The candle has lit itself again!
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n2b Lust Bar Intro]]

&lt;&lt;set $n_candleLit = true&gt;&gt;
&lt;&lt;set $n_knowsRelight = $n_mageSight&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="541" name="n2b Alone (5,3)" tags="mt-ready" position="7325,3225" size="200,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleHorny&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Candle&#39;s Influence:

&lt;&lt;n1-patience 5 3&gt;&gt;
&lt;&lt;n1-remind&gt;&gt;
&lt;&lt;n1-repeat&gt;&gt;
&lt;&lt;n1-warn&gt;&gt;
&lt;&lt;n1-insist&gt;&gt;
&lt;&lt;/n1-patience&gt;&gt;

&lt;&lt;set _before = $n_arousal&gt;&gt;
&lt;&lt;include [[n2b Compute Arousal]]&gt;&gt;
&lt;&lt;set _pulse = $n_candleMax ? &quot;max&quot; : $n_candleNearMax ? &quot;strong&quot; : &quot;weak&quot;&gt;&gt;
&lt;&lt;arousal-bar _before $n_arousal _pulse&gt;&gt;

&lt;br&gt;
&lt;&lt;fade-in 2s no-pulse&gt;&gt;
  &lt;&lt;include [[n2b Lust Text]]&gt;&gt;
  ?P

&lt;&lt;fade-next 8s&gt;&gt;
  &lt;&lt;set $n_ivexContext = IC_gone&gt;&gt;
  &lt;&lt;set _hideImpatientSprite = true&gt;&gt;
  &lt;&lt;include &quot;n1x Actions&quot;&gt;&gt;

  &lt;ul class=actions&gt;
    &lt;&lt;include [[n2b Struggle Action]]&gt;&gt;
    $n_magicAction
    &lt;&lt;if $n_candleMax&gt;&gt;
      &lt;&lt;mt-seen $sn_castDesperate&gt;&gt;
        &lt;&lt;mtl [[n2b Desperate Magic 1]] &quot;//avoid&quot;&gt;&gt;
          Desperately cast a spell.
        &lt;&lt;/mtl&gt;&gt;
      &lt;&lt;/mt-seen&gt;&gt;
    &lt;&lt;/if&gt;&gt;
  &lt;/ul&gt;
&lt;&lt;/fade-in&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="542" name="n2b Compute Arousal" tags="mt-ready inclusion" position="7300,3075" size="100,100">&lt;&lt;script&gt;&gt;
const V = State.variables;
const actions = Math.max(V.n_patienceActions, 0);
const looks = Math.max(V.n_patienceLooks, 0);

const compute = (looks, actions) =&gt; {
  if (looks &gt; 6) {
    throw new Error(`BUG: compute arousal looks ${looks}`);
  } else if (actions === 0 || looks === 0) {
    return 100;
  } else if (looks === 1 || actions === 1) {
    // reducing looks or actions to 1 also sets the other to 1
    return 96;
  } else if (looks === 2) {
    return 92 - (actions - 2) * 8;
  } else if (actions === 2) {
    return 92 - (looks - 2) * 8;
  } else if (actions === 3) {
    return 84 - (looks - 2) * 15;
  } else {
    throw new Error(`BUG: compute arousal looks ${looks} actions ${actions}`);
  }
}

V.n_arousal = compute(looks, actions);
V.n_candleHorny = looks &lt;= 3 || actions &lt;= 2;
V.n_candleNearMax = looks === 1 || actions === 1;
V.n_candleMax = looks === 0 || actions === 0;

function showTable() {
  for (let ac = 3; ac &gt; 0; ac--) {
    let line = &quot;&quot;;
    for (let lk = 5; lk &gt; 0; lk--) {
      const c = compute(lk, ac);
      line += &quot; &quot; + String(c).padStart(3);
    }
    console.log(line);
  }
}

// showTable();
&lt;&lt;/script&gt;&gt;\</tw-passagedata><tw-passagedata pid="543" name="n2b Cross Forever" tags="mt-ready" position="8125,3100" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;set _hasSprite = MP_wantDevice &lt;= $n_magicPhase
  &amp;&amp; $n_magicPhase &lt; MP_tapLost&gt;&gt;

Nero&#39;s mental distress becomes a blur as it mixes with his horny
desperation.
He laps his tongue at the air mindlessly, not even trying to
strain his head downward any more, but he can almost feel it anyway,
the ghost of his tongue, of many tongues, touching and teasing
every millimeter of his throbbing red cock.

?P
The scent and taste of his own lust fills his
senses.
Any movement he makes against the leather straps,
every twitch of his burning muscles becomes intensely erotic.
He keeps wanting to feel
more of it, become overwhelmed by it. He surrenders to it,
drowns in the flood of sensations,
then resurfaces with a gasp, only to surrender again,
welcoming all the feelings that fill his body and
dominate his soul.

?P
Every part of the wolf is already a slave to a god of lust,
and he wants to give that
god the offering of his seed, his essence, the entirety of his self
compressed into a spurt that can be delivered from his
throbbing red cock.
But the god is not ready for that. It denies him that release.
It continues to stimulate his nerves and squeeze his senses,
seeking greater depths of passionate surrender from the wolf,
touching more parts of his soul that can be added to the
storm that&#39;s gathering at his crotch,
a storm that awaits a lightning flash that will bring life to
this ultimate gift of erotic love.
?P
The god of lust holds the storm in place,
traps its chaotic energy in the
wolf&#39;s bulging knot that&#39;s straining for release,
and waits for the lusty whirlwind to reach its greatest
intensity of impossible perfection.

&lt;&lt;if _hasSprite&gt;&gt;
  ?P
  A small voice makes sounds that are almost lost
  in the chaos.
  &lt;span class=sprite-q&gt;&quot;You have been idle for
  not a number minutes, ?master
  I am going to disconnect and sleep, ?master&quot;&lt;/span&gt;
  The sounds are meaningless. None of them bring release.
&lt;&lt;/if&gt;&gt;

?P
Time is not a thing that the
wolf experiences any more. Everything he feels belongs to
an endless now. The erotic torment lasts forever...

?P
[[Continue|n9a Tamed]]

&lt;&lt;set _hasSprite &amp;&amp; ($n_magicPhase = MP_tapLost)&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="544" name="n2b Desperate Magic 1" tags="mt-ready" position="7875,3025" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;cv-try n_magicPhase `MP_beforeCast` `MP_triedMagic`&gt;&gt;

The wolf&#39;s sore muscles are trembling endlessly in
the firm grip of the leather that holds him
back against the stern wooden cross.
His mind is lost in a thick haze of unfocused desire
that continually frustrates the
urgent cravings of his throbbing red cock.
?P
He&#39;s unable to think clearly about his repertoire of magic,
unable to even speak any of the spells that he knows.
?P
&lt;&lt;if MP_beforeCast !== $n_magicPhase&gt;&gt;
  And even if he &lt;em&gt;could&lt;/em&gt; speak, his magic energies are depleted.
  There&#39;s only one spell he has that he &lt;em&gt;can&lt;/em&gt; cast now.
&lt;&lt;else&gt;&gt;
  But he remembers in his desperation that
  he has one spell created for desperate circumstances,
  a spell that does not need him to speak.
&lt;&lt;/if&gt;&gt;
?P
It&#39;s the spell he calls Nero&#39;s Endgame,
always there,
always ready.
?P
The lupine mage closes his eyes.
?P
He remembers the matrix of glyphs tattooed on the skin of his ass.
?P
He holds that image in his mind, and &lt;em&gt;twists&lt;/em&gt; it...
?P
[[Continue|n2b Desperate Magic 2]]

&lt;&lt;run MT.mdSet(&quot;sn_castDesperate&quot;, true)&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="545" name="n2b Desperate Magic 2" tags="mt-ready" position="8000,3025" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny true&gt;&gt;
&lt;&lt;vi-ignore-if n_castEndgame n_mageSight&gt;&gt;

&lt;&lt;run
  _hasSprite = MP_wantDevice &lt;= $n_magicPhase &amp;&amp; $n_magicPhase &lt; MP_tapLost
&gt;&gt;

Nero opens his eyes
&lt;&lt;if $n_castEndgame&gt;&gt;
  and waits for his Endgame spell to
&lt;&lt;else&gt;&gt;
  when he feels his Endgame spell
&lt;&lt;/if&gt;&gt;
launch from his ass...

?P
&lt;&lt;fade-in 6s&gt;&gt;
  Nothing happens.
  ?P
&lt;&lt;fade-next 2s&gt;&gt;

  &lt;&lt;if $n_castEndgame&gt;&gt;
    The wolf whines for the spell on his ass to awaken.
    He &lt;em&gt;knows&lt;/em&gt; he can do it.
    He&#39;s succeeded before.
    It always tingles when it pulls free from his ass.
    The feeling is still fresh in his memory.
    Why doesn&#39;t he feel it now?
    Why isn&#39;t it moving?
    He pleads for it to wake up and embrace him.
  &lt;&lt;elseif $n_mageSight&gt;&gt;
    A tangled knot of axioms and energy flies away from him
    and rises toward the ceiling.
    &lt;&lt;if !_hasSprite&gt;&gt;
      It disappears from view as his mage-sight fades.
    &lt;&lt;/if&gt;&gt;
    ?P
    The wolf whines for it to return to him.
    Didn&#39;t he do it right?
    He&#39;s trying as hard as he can.
    He pleads for it to come back and embrace him.
    ?P
    But it does not listen.
    &lt;&lt;if _hasSprite&gt;&gt;
      It pauses briefly near the ceiling,
      then continues its journey away
      from the wolf, disappearing from view when it
      leaves the room.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;else&gt;&gt;
    The wolf whines at the mysterious failure.
    Did he mess it up again somehow?
    Of course he knows how to do it.
    He just needs another chance.
    He pleads for it to come back and let him try again.
  &lt;&lt;/if&gt;&gt;

  ?P
  [[Continue|n2b Cross Forever]]
  
&lt;&lt;/fade-in&gt;&gt;

&lt;&lt;run
  $n_castDesperate = true;
  $n_castEndgame = true;
  if ($n_mageSight &amp;&amp; !_hasSprite) {
    delete $n_mageSight;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="546" name="n2b Grab Candle 1" tags="mt-ready" position="8250,3250" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;

Nero does not know how long it will take for him to cut himself
free from the cross with his limbs still bound.
Better take care of that potent red candle first.
?P
The wolf reaches his head forward and grabs the
flickering red candle with his maw.
The candleholder comes easily off the desk.
Nero is not sure if the relighting magic is
in the candleholder or the desk, or both, but it seems prudent to
try to separate the holder from the candle.

?P
He tries to keep the candle steady in his teeth and push the candleholder
off with his tongue, but the surface of it is too slick, and its
grip on the candle is too firm.

?P
And the candle tastes &lt;em&gt;awful!&lt;/em&gt;
Much worse than the aroma from the flame.
Waxy, of course, but also bitter and salty.
Nero hopes that tasting it is not as hazardous as breathing it.

?P
His tongue laps frantically at the base of the candle as the
spicy candle fumes continue to arouse his senses.
&lt;em&gt;What a stupid thing to defeat me!&lt;/em&gt;
He whines and pushes the candleholder against the desk to
try to get a better grip.

?P
[[Continue|n2b Grab Candle 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="547" name="n2b Grab Candle 2" tags="mt-ready" position="8375,3250" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;

As the wolf shifts the candle around in his maw,
a drop of hot wax lands on his lip!
Nero yelps and reflexively
releases the candle.

?P
The candle starts to fall away from him.
The wolf frantically snaps his jaws to grab the candle again,
but he misjudges the position and only succeeds in
pushing the candle away from him faster.

?P
Nero watches helplessly as the candle falls on its side,
out of reach. His ears flatten as the candle
rolls slowly across the desk.
And he whines with dismay as the candle falls off the
side of the desk and disappears from view.

?P
Losing his grip on the candle, yes, that was upsetting.
But more upsetting is the untidy stack of papers that
have now caught fire from their brief contact with
the candle&#39;s flame.

?P
&lt;ul class=actions&gt;
    &lt;li&gt;[[Try to put out the fire.|n2b Stop Fire]]&lt;/li&gt;
    &lt;li&gt;[[Grab the letter opener.|n2b Use Knife 1]]&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="548" name="n2b Grab Knife" tags="mt-ready" position="8375,3400" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;

It&#39;s much too risky to tamper with the candle&#39;s unknown magics
when Nero cannot use magic himself,
especially when he doesn&#39;t even have a way to
use his hands to safely trigger suspected traps.
Better to release himself from the cross
first. Once free, it will be easy to defuse the candle
without touching it directly.

?P
The wolf pushes with his legs to stand up some more so he can
shift his position and reach the letter opener with his paw.

?P
The floor is slick. His paws slip. He falls forward on the desk,
and his muzzle bashes into the candle.

?P
The flickering red candle tips over.
It rolls slowly across the desk,
then falls off one side of the desk,
disappearing from view.

?P
Nero groans. Bashing into the desk was unpleasant, yes.
But more unpleasant is the fire that started when
the candle&#39;s flame made brief contact with an untidy stack
of papers on the desk.

?P
&lt;ul class=actions&gt;
  &lt;li&gt;[[Try to put out the fire.|n2b Stop Fire]]&lt;/li&gt;
  &lt;li&gt;[[Grab the letter opener.|n2b Use Knife 1]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="549" name="n2b Grav Disrupted" tags="mt-ready" position="8000,3325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny true&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;

The energy web collapses. The ?crystals fly rapidly toward each other
and collide in a bright implosion that sucks out a large amount of
smoky air and a small amount of the wooden cross.

?P
The candle flame sputters, and goes out.

?P
The cross starts to fall forward, with Nero still attached.

?P
His mind regains clarity, right before the hard surface of the floor
bashes into the tip of his erect cock.
The shock of that painful erotic contact
awakens enough reflexes for Nero to avoid bashing his snout,
but the rest of his body gets crushed against the floor
by the heavy wooden cross.

?P
Everything hurts, but nothing feels broken.
He rests on the floor for a moment to recover.

&lt;&lt;if MP_onHold === $n_magicPhase
  || MP_exitingHold === $n_magicPhase
&gt;&gt;
  ?P
  The Sprite whispers.
  &lt;span class=sprite-q&gt;&quot;Jay-ess-dee-eff-ell-jay-kay-eff-semicolon-dee-&lt;span class=nobr&gt;ess&amp;mdash;&lt;/span&gt;
  Sorry, I was distracted by that anomalous bosonic singularity,
  and I forget what password I was pretending to check, ?master
  Well, whatever it was, it&#39;s incorrect, ?master
  You have zero or more tries remaining, ?master
  Please say your password, ?master&quot;
  &lt;/span&gt;
  ?P
  Nero laughs again at the uselessness of idiotic Sprites.
  &lt;&lt;set $n_magicPhase = MP_wantPass&gt;&gt;

&lt;&lt;elseif MP_lockedOut === $n_magicPhase&gt;&gt;
  ?P
  The Sprite whispers.
  &lt;span class=sprite-q&gt;&quot;Eff-jay-kay-ess-dee-eff-ell-semicolon-jay-ess-&lt;span class=nobr&gt;dee&amp;mdash;&lt;/span&gt;
  Sorry, I was distracted by that anomalous bosonic singularity,
  and I lost count, ?master
  Well, it&#39;s probably been long enough, ?master
  Please say your password, ?master&quot;
  &lt;/span&gt;
  ?P
  Nero laughs again at the uselessness of idiotic Sprites.
  &lt;&lt;set $n_magicPhase = MP_wantPass&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
The wolf uses his slowly returning intelligence to review his recent
memories. Nero marvels at the ability of his subconscious to solve the
problem of destabilizing the cross&#39;s magical support.
&lt;&lt;if $n_gravKnown&gt;&gt;
  He&#39;s also grateful that the implosion
  did not remove a chunk from his tail.
&lt;&lt;else&gt;&gt;
  ?P
  &lt;&lt;if $n_gravViewed&gt;&gt;
    Those were definitely &lt;em&gt;not&lt;/em&gt; Dream Crystals.
    If they were, the cross would not have shifted at all.
  &lt;&lt;else&gt;&gt;
    Those crystals...
  &lt;&lt;/if&gt;&gt;
  Were they Gravity Crystals?
  What a dangerous application of so many of them!
  Nero is thankful that the implosion did not remove a chunk from his tail.
&lt;&lt;/if&gt;&gt;

?P
He breathes deeply of lightly smoky air, and suddenly remembers.
&lt;&lt;if $n_knowsRelight&gt;&gt;
  &lt;em&gt;The candleholder relights the candle!&lt;/em&gt;
&lt;&lt;else&gt;&gt;
  &lt;em&gt;The candle relights itself!&lt;/em&gt;
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n2b Urgent Choice]]

&lt;&lt;run
  delete $n_candleHorny;
  /* $n_magicPhase is sometimes set above */
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="550" name="n2b Lust Bar Intro" tags="mt-ready" position="7200,3300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_candleHorny&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Candle&#39;s Influence:
&lt;&lt;arousal-bar 0 32 weak&gt;&gt;
&lt;&lt;set $n_arousal = 32&gt;&gt;

&lt;br&gt;
&lt;&lt;fade-in 4s no-pulse&gt;&gt;
  Nero is already worried that Ivex could return at any moment.
  But now there&#39;s another urgent deadline, inflicted by the distressing,
  rekindled candle.

  ?P
  Can the lupine mage escape before his mind is
  overwhelmed again by unthinking lust?

  ?P
  Of course he can.  It&#39;s just a matter of
  &lt;&lt;if MP_beforeCast === $n_magicPhase&gt;&gt;
    casting the right spell...
  &lt;&lt;else&gt;&gt;
    finding the right flaw...
  &lt;&lt;/if&gt;&gt;

  ?P
  [[Continue|n2b Alone (5,3)]]
&lt;&lt;/fade-in&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="551" name="n2b Lust Text" tags="mt-ready inclusion" position="7425,3075" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;!--
  player sees this at least 4 times (1 + min(looks, actions))
  and at most 7 times:
    1 + (looks-2) + (actions-2) + 2
    === looks + actions - 1
  candleHorny happens after 2 looks or 1 action.
  candleNearMax happens after 4 looks or 2 actions.
  
  paths are;
    1, 2+, 6, 7
    1, 2-, 3, 6, 7
    1, 2-, 3, 4, 6, 7
    1, 2-, 3, 4, 5, 6, 7
    
  link to candle is here when non-horny.
  non-horny look has the link when ivex not gone.
  horny has the link in horny-look.
--&gt;
&lt;&lt;script&gt;&gt;
  const V = State.variables;
  const T = State.temporary;
  V.n_lustTextPos || (V.n_lustTextPos = 1);
  if (T.patienceAdvanced) {
    V.n_lustTextPos = 1 + V.n_lustTextPos;
  }
  if (V.n_candleNearMax) V.n_lustTextPos = 6;
  if (V.n_candleMax) V.n_lustTextPos = 7;
&lt;&lt;/script&gt;&gt;

&lt;&lt;set _candle = &quot;&lt;&lt;mta &#39;n1x Candle&#39;&gt;&gt;flickering red candle&lt;&lt;/mta&gt;&gt;&quot;&gt;&gt;

&lt;&lt;set _pointing = `
  The air of the room is filling with a haze that makes it difficult
  to see clearly. Blinking his eyes does not help,
  so the wolf twitches his ears instead.
  Nero hears his throbbing red cock pulsing
  with desire and an urgent message that he
  tries to decipher. His cock is pointing at something,
  something important,
  something it needs. He tries to determine what that is,
  but his cock is too far away for him to sight along its shaft.
  He strains his head downward, trying to reach it.
  The wolf pants and stretches his tongue,
  remembering that when he was younger he could easily
  lick his own cock. The memory of the feeling of his tongue
  touching the tip is both a promise and a taunt.
`&gt;&gt;

&lt;&lt;switch $n_lustTextPos&gt;&gt;
&lt;&lt;case 1&gt;&gt;
  &lt;&lt;em-assert !$n_candleHorny&gt;&gt;
  /* 0,0 */
  Nero&#39;s cock is uncomfortably erect from his earlier exposure to Ivex&#39;s
  _candle, and the spicy scent is starting to dominate the air again.
  The wolf&#39;s mind remains clear and focused, for now.
  He does not know how long this clarity will last.
  Better be cautious with his breaths and make plans quickly,
  while he is still &lt;em&gt;able&lt;/em&gt; to plan.

  &lt;&lt;set _neroAppraise =
    &quot;The wolf takes stock of what he sees, and what he knows.&quot;&gt;&gt;

&lt;&lt;case 2&gt;&gt;
  &lt;&lt;if $n_candleHorny&gt;&gt;
    /* 0,1 */
    _pointing
    &lt;&lt;set $n_lustPointed = true&gt;&gt;
  
  &lt;&lt;else&gt;&gt;
    /* 1,0 */
    Ivex&#39;s _candle is almost as distracting
    as Nero&#39;s own throbbing red cock. How much longer can he
    keep control of his thoughts?
    He can&#39;t stop glancing at the candle,
    then glancing at his stiff cock,
    trying to measure them and compare them
    in his mind. He tries to gauge the firmness of his cock
    in order to test the firmness of his mind.
    It&#39;s quite firm already, and he realizes that if he stares at
    his cock some more, it will become ever more firm.
    His &lt;em&gt;mind&lt;/em&gt; will.
    His stiff &lt;em&gt;mind&lt;/em&gt; will... become firmer now?
    
    &lt;&lt;set _neroAppraise =
      &quot;Nero quickly forces his brain to make&quot; +
      &quot; a logical assessment of his situation.&quot;&gt;&gt;
  &lt;&lt;/if&gt;&gt;

&lt;&lt;case 3&gt;&gt;
  &lt;&lt;em-assert $n_candleHorny&gt;&gt;
  /* 2,0 or 1,1 */
  &lt;&lt;if !$n_lustPointed&gt;&gt;
    _pointing
  &lt;&lt;else&gt;&gt;
    Nero&#39;s throbbing red cock is whispering in a foreign tongue
    about its memories of exposure to many different tongues,
    and how each contact with another tongue taught it something
    new about the world, about himself.
    The wolf has taken that knowledge and used it to improve his
    skill with his native tongue,
    the tongue he&#39;s now exercising in the spicy air,
    imagining all the experience he can now bring
    with his tongue to satisfy his cock.
    If only he were still able to reach it.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;case 4&gt;&gt;
  &lt;&lt;em-assert $n_candleHorny&gt;&gt;
  /* 3,0 or 2,1 */
  Nero stretches his head down as far as he can, extends his tongue
  as far as he can toward his throbbing red cock.
  A long thread of drool drops down from his open muzzle and
  falls onto his cock, connecting with the pre-cum that&#39;s dripping from it.
  The light trickle of drool feels like an intensely focused touch
  that makes the wolf&#39;s mind shiver.
  He jerks his head up, as if the thread of drool were a rope that
  could pull his cock closer to his muzzle, but the thread breaks.

&lt;&lt;case 5&gt;&gt;
  &lt;&lt;em-assert $n_candleHorny&gt;&gt;
  /* 3,1 */
  Nero whines at his throbbing red cock.
  His panting breaths are hot, but they feel like a cool breeze
  on the glistening tip of his cock.
  The breeze does not bring relief, it just encourages
  his cock to yearn for more sensation.
  His tongue laps desperately at empty air,
  and it feels like the motion is fanning swirls of air that
  almost brush against his cock.
  The wolf&#39;s earnest licking feels like it summons a ghost of a tongue
  that teases his cock,
  a tongue that tastes the drops of pre-cum
  and keeps licking at it, eager for more.

&lt;&lt;case 6&gt;&gt;
  &lt;&lt;em-assert $n_candleHorny&gt;&gt;
  /* 4,? or ?,2 -&gt; 4,2 */
  The stiffness of Nero&#39;s throbbing red cock is unbearable now.
  He &lt;em&gt;needs&lt;/em&gt; to cum, he can &lt;em&gt;feel&lt;/em&gt;
  the army of his cum pulling on all the nerves of his skin,
  ready and eager to shoot forward into action,
  but unable to release their hold on his
  body until they receive the right signal, the right sensation
  from the raised red scepter of his throbbing red cock,
  which shines brightly at the tip from the fluid leaking from it.
  ?P
  His tongue laps with desire.
  His hips thrust with urgency.
  His cock flaps wildly,
  and its shaft slaps against his belly to smear his fur with
  pre-cum, but that glancing blow is not enough.
  The army still awaits,
  and they stretch his nerves more tightly with every moment they wait.
  Nero searches desperately for any way to give
  the signal that will release them.

&lt;&lt;case 7&gt;&gt;
  &lt;&lt;em-assert $n_candleHorny&gt;&gt;
  /* 5,? or ?,3 */
  Nero&#39;s mind is flooded with images of the flickering red candle
  and his throbbing red cock.
  His cock strains with an intense craving that
  sucks his whole soul into its knot,
  creating an emptiness in the rest of him that yearns to be filled.
  He does not know what can fill this desire,
  or if it even &lt;em&gt;can&lt;/em&gt; be fulfilled,
  but he knows he &lt;em&gt;must&lt;/em&gt; seek something that can satisfy it.
  Every feeling in his aching body,
  every atom of his longing soul
  is pulling in every possible direction.
  The wolf&#39;s entire existence is
  a scrambling mass of confusion,
  with a frantic hope that something, &lt;em&gt;anything&lt;/em&gt;
  might be a taste of whatever it is that his cock so desperately needs.
  
  ?P
  A small observer in Nero&#39;s head knows that
  the wolf will soon become overwhelmed
  with mindless, feral lust. 
  He empties his lungs and holds his breath to try to get
  one last moment of clarity, one last chance
  to make a clever plan that will set him free.
  
&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`BUG lust text ${$n_lustTextPos}`)&gt;&gt;
&lt;&lt;/switch&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="552" name="n2b Stop Fire" tags="mt-ready" position="8525,3225" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;

Nero tries to blow out the flame that&#39;s burning and curling
the papers on the desk, but his breath is not strong enough
to extinguish the fire. The wolf&#39;s huffing just makes
the fire spread more, and its spread ignites more papers
and other items on the desk.

?P
The flames are distressingly close to his face, and the heat
is starting to get uncomfortable.
Nero considers other ways of dousing or scattering the fire,
but it&#39;s hard to do anything effective while his arms are still
bound to the cross.

?P
There&#39;s only one sensible course of action now.

?P
&lt;ul class=actions&gt;
    &lt;li&gt;[[Grab the letter opener.|n2b Use Knife 1]]&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="553" name="n2b Struggle Action" tags="mt-ready inclusion" position="7575,3275" size="200,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;set _didCast = MP_beforeCast !== $n_magicPhase&gt;&gt;

&lt;&lt;if $n_candleMax&gt;&gt;
  &lt;&lt;if $n_gravNoticed &amp;&amp; $n_mageSight&gt;&gt;
    &lt;&lt;mtl-if _didCast [[n2b Struggle Succeed]]
      &quot;magic is stronger than muscle&quot;
    &gt;&gt;
      Struggle desperately on the cross.
    &lt;&lt;/mtl-if&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mt-seen $sn_struggleFail&gt;&gt;
      &lt;&lt;mtl-if _didCast [[n2b Struggle Fail]] &quot;magic is stronger than muscle&quot;&gt;&gt;
        Struggle desperately on the cross.
      &lt;&lt;/mtl-if&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;elseif $n_candleHorny&gt;&gt;
  &lt;!-- up to 3 times (actions) --&gt;
  &lt;&lt;if $n_struggledAgain&gt;&gt;
    &lt;&lt;mtl [[n2b Struggle Horny 3]]&gt;&gt;
      Struggle even more on the cross.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;elseif $n_struggled&gt;&gt;
    &lt;&lt;mtl [[n2b Struggle Horny 2]]&gt;&gt;
      Struggle on the cross again.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mtl [[n2b Struggle Horny 1]]&gt;&gt;
      Struggle on the cross.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
  &lt;!-- only once (actions - 2) --&gt;
  &lt;&lt;mtl [[n2b Struggle Normal 1]]&gt;&gt;
    Struggle on the cross.
  &lt;&lt;/mtl&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="554" name="n2b Struggle Fail" tags="mt-ready" position="7875,3200" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;em-assert !$n_gravNoticed || !$n_mageSight&gt;&gt;

The wolf&#39;s limbs are chafed and bruised from rubbing
against the leather straps.
His muscles are shaky and sore,
but the spicy heat consuming his body
is giving him a strength of desire that he
has never felt before.

?P
He struggles as hard as he can
on the cross again,
because the cross &lt;em&gt;shifts&lt;/em&gt; when he struggles.
There &lt;em&gt;must&lt;/em&gt; be a way to use that motion to satisfy his cock.

?P
&lt;&lt;if $n_gravNoticed&gt;&gt;
  If only he could see the magic forces exerted by the ?crystals.
&lt;&lt;else&gt;&gt;
  If only he knew what holds the cross in place.
&lt;&lt;/if&gt;&gt;

?P
He &lt;em&gt;can&lt;/em&gt; escape.
He&#39;s &lt;em&gt;clever&lt;/em&gt;.
He understands many things that other wolves do not.
The trapped wolf squirms and whines for
the stern wooden cross to believe him.

?P
[[Continue|n2b Cross Forever]]

&lt;&lt;run MT.mdSet(&quot;sn_struggleFail&quot;, true)&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="555" name="n2b Struggle Horny 1" tags="mt-ready" position="7700,3425" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

The wolf strains at his leather bonds, seeking release for his throbbing cock.
Now that the domineering panther is gone,
Nero feels his own spirit expanding to fill the absence,
and he uses all of his strength to try to escape.
?P
The cross sways a little as the wolf
&lt;&lt;if $n_gravNoticed&gt;&gt;
  &lt;&lt;if $n_mageSight&gt;&gt;
    struggles.
    The ?crystals behind it shift slightly, and their energy web shimmers.
  &lt;&lt;else&gt;&gt;
    struggles, and the ?crystals behind it shift slightly.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
  struggles.
&lt;&lt;/if&gt;&gt;

The small success of his effort encourages him to try harder
to achieve what he knows he &lt;em&gt;can&lt;/em&gt;.
Someone asked him a long time ago if he wanted to be
a warrior or a mage, and they had laughed with scorn when
the young wolf gave the wrong answer.
But that someone is dead now.
Nero emerged victorious then, and he will be victorious again.
?P
His cock twitches with eagerness to celebrate his imminent victory
as he struggles, and gasps, and struggles some more.

?P
$n_afterAction

&lt;&lt;set $n_struggled = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="556" name="n2b Struggle Horny 2" tags="mt-ready" position="7775,3550" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero uses aching muscles to strain with all his might in his bonds again,
to try to break the leather, or break the wooden cross,
or even just pull it loose so that he can fall forward
and rub his throbbing red cock against the surface of the floor.

?P
Each jerk of his muscles makes the cross sway.
&lt;&lt;if $n_gravNoticed&gt;&gt;
  The ?crystals
  behind it shift slightly in response,
  &lt;&lt;if $n_mageSight&gt;&gt;
    and their web of immense energy flickers with an unspoken message,
    a statement of disinterest or disappointment as the web
    pulls the cross back to where it belongs,
    where the web insists that the wolf belongs.
    &lt;&lt;set _force = &quot;shimmering energy&#39;s&quot;&gt;&gt;
  &lt;&lt;else&gt;&gt;
    but they quickly return to their proper place,
    and bring the cross back to where
    it belongs, where they insist that the wolf belongs.
    &lt;&lt;set _force = &quot;glowing crystal&quot;&gt;&gt;
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  But whatever holds it in place just pulls it back.
  The unseen force sternly holds the cross where it belongs,
  where it insists that the wolf belongs.
  &lt;&lt;set _force = &quot;unseen force&#39;s&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
Nero&#39;s body feels comfort in the embrace of the leather straps,
and he does not really disagree with the _force
judgment of his proper place in the world, but he can&#39;t
help struggling anyway, to feel that embrace more deeply,
and to prove to the cross&#39;s wooden restraint that the wolf has strength
that can be used, that he &lt;em&gt;can&lt;/em&gt; be more than just
a helpless victim of unlucky fates. His cock quivers and leaks
from desire and a longing for an embrace, or even the slightest
little pat on its head.

?P
$n_afterAction

&lt;&lt;set $n_struggledAgain = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="557" name="n2b Struggle Horny 3" tags="mt-ready" position="7850,3675" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

Nero pulls his limbs taut and then stretches them out,
rubbing them as much as he can within the leather straps,
as strongly as he can against the wooden cross.
The straps do not slide smoothly.
The surface of the leather yanks at the hairs of his fur,
and the edges of the leather dig deep into his skin
as he jerks his limbs the way he wishes he could jerk his cock.

?P
His motions do not satisfy his cock, but it feels like
he is close to finding some other way to satisfy his desires.
The wolf&#39;s entire body is a sexual organ, a throbbing
ache in his soul that grows stronger as he thrusts
into his bonds.
Nero screams at the wooden presence that&#39;s holding him back.
He clasps his fists as tight as he can, until he can
feel his paws, imagine his paws grasping &lt;em&gt;something&lt;/em&gt;,
grasping his cock,
choking the head held tightly in them,
squeezing as long as it takes for the aching to stop.

?P
$n_afterAction
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="558" name="n2b Struggle Normal 1" tags="mt-ready" position="7575,3425" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;cv-try n_magicPhase `MP_beforeCast`&gt;&gt;

The wolf strains at his leather bonds.
Now that Ivex is gone, Nero feels free to exert all his strength
to test his bondage, perhaps holding back just a little bit,
to avoid breathing too deeply of the candle&#39;s fumes.
?P
The cross sways as the wolf struggles.
&lt;&lt;if $n_gravNoticed&gt;&gt;
  &lt;&lt;if $n_mageSight&gt;&gt;
    The ?crystals behind it shift slightly,
    and their energy web shimmers,
  &lt;&lt;else&gt;&gt;
    The ?crystals behind it shift slightly,
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
but he isn&#39;t really
surprised that the leather straps do not yield the slightest bit.
Someone asked him a long time ago if he wanted to be
a warrior or a mage, and they had laughed with scorn when
the young wolf gave the wrong answer.
?P
&lt;&lt;if MP_beforeCast === $n_magicPhase&gt;&gt;
  But Nero&#39;s a successful mage now, and he&#39;s learned that magic
  can set him free from &lt;em&gt;anything&lt;/em&gt;, if he does it right.
&lt;&lt;else&gt;&gt;
  But Nero knows that even when magic fails,
  cleverness &lt;em&gt;is&lt;/em&gt; a virtue, and he&#39;s
  learned that cleverness can set him free from &lt;em&gt;anything&lt;/em&gt;,
  if he applies it right.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n2b Struggle Normal 2]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="559" name="n2b Struggle Normal 2" tags="mt-ready" position="7575,3550" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;cv-ignore n_afterAction&gt;&gt;

Nero tests the secureness of the wooden cross with his struggles.
&lt;&lt;if $n_gravViewed&gt;&gt;
  &lt;&lt;if $n_gravKnown&gt;&gt;
    The six (!) Gravity Crystals holding the cross
    are a calamity waiting to happen,
    and maybe he can make that happen sooner.
    The wolf is wary of being anywhere near an uncontrolled
    implosion, but this might be his best chance for escape.
  &lt;&lt;else&gt;&gt;
    The six (!) Dream Crystals holding the cross
    are power-hungry monsters that will
    exhaust any energy supply with enough time,
    and maybe he can make that happen faster.
  &lt;&lt;/if&gt;&gt;
  ?P
  &lt;&lt;if $n_mageSight&gt;&gt;
    And his struggling &lt;em&gt;does&lt;/em&gt; seem to be having an effect!
    Each jerk starts a flicker in the energy web that travels
    through the strands until the crystals return to their
    original position.
    If he can just time his struggles so that the flickers
    reinforce each other...
  &lt;&lt;else&gt;&gt;
    Each jerk of the cross makes the crystals shift slightly,
    but they quickly return to place with no noticeable change
    in their glow. The wolf tries some jerks in different directions
    and different patterns, but nothing seems to have much effect.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
  Each jerk makes the cross
  &lt;&lt;if $n_gravNoticed&gt;&gt;
    and the glowing crystals behind it shift slightly, but everything
  &lt;&lt;else&gt;&gt;
    shift slightly, but it
  &lt;&lt;/if&gt;&gt;
  quickly returns
  to its original position.
  The wolf tries some jerks in different directions and
  different patterns, but nothing seems to have much effect.
&lt;&lt;/if&gt;&gt;
?P

The straining of his muscles, the &lt;em&gt;restraint&lt;/em&gt; on his muscles,
feels electric.
The leather bonds are stimulating the wolf&#39;s nerves and senses in
ways he hasn&#39;t felt before.
An adrenaline-fueled excitement rushes into his lungs,
filling them deeply with warmth,
and then drives down deeper to add heat
to his groin and his throbbing red cock.

?P
All of that sensation is unbearably erotic,
and the naked wolf writhes in the leather straps
again to feel again this unexpected awakening of a sexual desire
to be &lt;em&gt;bound&lt;/em&gt;. His cock drips and shivers in synchrony with

&lt;&lt;if $n_gravViewed &amp;&amp; !$n_gravKnown&gt;&gt;
  his panting breaths and his sweaty squirms on the swaying cross.
  ?P
  Wait... The cross &lt;em&gt;moves&lt;/em&gt;.
  That should be impossible
  with Dream Crystals!
  Their hold is rigid and perfect.
  What &lt;em&gt;are&lt;/em&gt; those crystals?

&lt;&lt;else&gt;&gt;
  his sweaty squirms and his panting breaths of spicy air.
  ?P
  Wait... it&#39;s spicy air from the &lt;em&gt;flickering red candle&lt;/em&gt;.
  Nero &lt;em&gt;isn&#39;t&lt;/em&gt; aroused by bondage.
  It&#39;s &lt;em&gt;just&lt;/em&gt; the candle having its effect on him.
  He&#39;d better escape quickly,
  before his sexual appetites become any more confused.
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;set $n_struggled = true&gt;&gt;
&lt;&lt;set $n_gravViewed &amp;&amp; ($n_struggleKnown = true)&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="560" name="n2b Struggle Succeed" tags="mt-ready" position="7875,3325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny true&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;

The wolf&#39;s limbs are chafed and bruised from rubbing
against the leather straps.
His muscles are shaky and sore,
but the spicy heat consuming his body
is giving him a strength of desire that he
has never felt before.

?P
He struggles as hard as he can
on the cross again,
because the cross &lt;em&gt;shifts&lt;/em&gt; when he struggles.
There &lt;em&gt;must&lt;/em&gt; be a way to use that motion to satisfy his cock.

?P
The ?crystals frolic when the wolf struggles,
and their energy web shimmers with laughter.
Nero feels the web leading him in a dance,
directing him with flickers of darkness to
assault his wooden keeper first one way, then another.
His cock throbs to the rhythm of the web,
and the darkness within the web becomes a jagged arc
that travels a path that meets itself and overlaps.

?P
The hunger of his cock increases
as the circle of darkness continues to grow.
He tries to join the circle, 
using muscles strained to their limits.
His body aches to become a part of the circle,
to become the completion of all the overlapping arcs of darkness.
The swirl of darkness pulls the wolf&#39;s mind into its vortex
of feral delights, and his body screams as it
ascends to the heights of leather-bound ecstasy.

?P
[[And then...|n2b Grav Disrupted]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="561" name="n2b Urgent Choice" tags="mt-ready" position="8125,3325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;

The heavy cross is pinning Nero to the floor,
and his limbs are still bound to it.
He&#39;s afraid he won&#39;t be able to reach the desk
before he&#39;s again overwhelmed with lust.
But as he struggles to wriggle forward, with his erection dragging
uncomfortably across the floor, he discovers
that one of the cross&#39;s legs has a flex that
was not there before.

?P
The implosion has removed a chunk of the wood.
It&#39;s just enough damage for the wolf mage to use his meager strength
to finish the destruction and break that wooden leg apart.

?P
He&#39;s not yet &lt;em&gt;free&lt;/em&gt;,
and it&#39;s still awkward to move,
but the partial freedom of one leg
helps him reach the desk and 
push himself upward against the front of it.
Nero ends up somewhat standing,
with his bare chest leaning on the edge of the desk.

?P
&lt;em&gt;What now?&lt;/em&gt; he wonders. The desk is a dense swarm of
unfamiliar magics, and he&#39;s a little worried that a careless
action might set off a magic defense.

?P
But not far from one hand, there&#39;s
&lt;&lt;= $n_deskViewed ? &quot;the&quot; : &quot;a&quot;&gt;&gt;
sharp letter opener, which has no magic on it.
Grabbing it should be safe.

?P
As Nero thinks about how to manage the initial cut of his bonds
with just one paw,
the candleholder near his head pulses, and the candle lights again!

?P
There &lt;em&gt;should&lt;/em&gt; be enough time to cut his bonds before the
candle overwhelms him again. But maybe it&#39;s better to try to
dismantle the candle as quickly as he can, no matter what traps
Ivex may have placed around it.

?P
&lt;ul class=actions&gt;
  &lt;li&gt;[[Grab the candle with his maw.|n2b Grab Candle 1]]&lt;/li&gt;
  &lt;li&gt;[[Grab the letter opener with his paw.|n2b Grab Knife]]&lt;/li&gt;
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="562" name="n2b Use Knife 1" tags="mt-ready" position="8575,3400" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleHorny false&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;

He awkwardly shifts closer to the burning papers
so he can reach the letter opener.
As soon as he&#39;s confident of his grip on the metal blade,
Nero pushes off as hard as he can, away from the flaming desk.

?P
The wolf falls backward with the wooden cross,
which slams into the floor with a resounding &lt;em&gt;thump&lt;/em&gt;.
His bones are rattled, and his aching limbs complain about
new chafing from the leather straps.
But he &lt;em&gt;does&lt;/em&gt; keep hold of the letter opener!

&lt;&lt;if $n_magicPhase &lt; MP_wantDevice&gt;&gt;
  ?P
  Nero&#39;s mage-sight fades as the last bit of his arcane energy is depleted.
  Perhaps there was some way he could have kept it longer.
  But it doesn&#39;t matter. He&#39;s confident he can escape without it.
&lt;&lt;/if&gt;&gt;

?P
Smoke from the desk rises and gathers on the ceiling.
The air near the floor is cool and clear.
Nero can smell a little of what the fire is consuming,
and the scents are refreshingly ordinary.
Burning paper and parchment.
Some charred wood, and what&#39;s probably a quill feather.

?P
Nothing in the flames is unusually spicy.

?P
The wolf&#39;s cock is still unnaturally erect,
but the fragrance from the red candle is fading,
disappearing in the swirl of odors of ordinary combustion.
Nero basks for a moment in the story his nose is telling him
about the fiery destruction of Ivex&#39;s property,
and then he starts the work of setting himself free.

?P
[[Continue|n2c Use Knife 2]]

&lt;&lt;run
  delete $n_candleLit;
  $n_deskBurned = true;
  if ($n_magicPhase &lt; MP_wantDevice) {
    delete $n_mageSight;
    $n_magicPhase = MP_drained;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="563" name="n2c Clever Free 1" tags="mt-ready section-start" position="7075,3800" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;checkpoint-save n_checkpoint1 &quot;Snow Globe Revelation&quot;&gt;&gt;

The wolf&#39;s left ear itches.

?P
The Sprite&#39;s voice returns.
It ?sprSays,
&lt;span class=sprite-q&gt;&quot;Password is correct, ?masterX
You are no longer an unauthorized user, ?masterX
So I&#39;m about to put you in contact with Lance Rockhard, ?master&quot;&lt;/span&gt;

?P
Nero feels the Sprite&#39;s trickle of magic energy again.
And then a &lt;em&gt;rope&lt;/em&gt; of energy strikes his neck
and burrows into his chest.
The rope splits and extends arcane tendrils outward,
into his arms, all the way to the tips of his fingers.

?P
He recognizes the feeling.
It isn&#39;t a magic that he uses often.
But no mage who learns how to use it ever forgets
the power of Nackle&#39;s Poltergeist Device.

?P
The wolf quickly casts mage-sight again,
to see the energy that he&#39;s controlling.

?P
He makes some gestures with his fingers.
Strands of exotic energy respond to his direction
and pick up the letter opener from the desk.
A few more gestures bring the letter opener to his hand.

?P
[[Continue|n2c Clever Free 2]]

&lt;&lt;set $n_magicPhase = MP_contact&gt;&gt;
&lt;&lt;set $n_magicPhaseReached = MP_contact&gt;&gt;
&lt;&lt;set $n_mageSight = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="564" name="n2c Clever Free 2" tags="mt-ready" position="7200,3800" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;

A moment later, Nero realizes he&#39;s being an idiot.

?P
He drops the letter opener and uses Nackle to
tear the leather bonds apart.

?P
The pieces of the wooden cross slide away from his body
and crash to the floor behind him.

?P
Nero collapses as well, from relief and exhaustion.
But he quickly uses Nackle to help himself up again.
He might be free from the cross, but he&#39;s not yet
&lt;em&gt;safe&lt;/em&gt;.

?P
Still, he &lt;em&gt;did&lt;/em&gt; defeat the cross.
He&#39;s &lt;em&gt;won&lt;/em&gt; that battle, using his cleverness and luck.
And now, he has &lt;em&gt;power&lt;/em&gt;.

?P
The wolf uses Nackle to pick up one of the broken legs
of the wooden cross.
He then &lt;em&gt;thrusts&lt;/em&gt; the leg at the window.
Glass panes shatter.
Bars holding the panes break apart.
The wooden leg sails through the opening,
dragging broken pieces of the window with it,
and then falls away, disappearing from view.

?P
Nackle is barely a fraction of the magic the wolf
normally has at his command.
But it&#39;s wonderful to feel its power,
and it&#39;s satisfying to feel powerful again.
It&#39;s more than enough, for now.

?P
[[Continue|n2c Clever Free 3]]

&lt;&lt;set $n_knifeOnFloor = true&gt;&gt;
&lt;&lt;set $n_windowBroken = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="565" name="n2c Clever Free 3" tags="mt-ready" position="7325,3800" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;

Nero checks his injuries. Everything still hurts,
but the pains and aches are becoming dull throbs that are
easy to ignore.
And nothing is broken.

?P
His cock is strangely still erect. Is it eager to
celebrate his triumph? But he isn&#39;t exactly &lt;em&gt;horny&lt;/em&gt;.
Sexual congress is hardly the most important thing in his mind
right now.
Perhaps this is a lingering effect of Ivex&#39;s red candle?

?P
Well, no matter. The stiffness of his cock is also easy to ignore.

?P
The wolf stretches and flexes limbs that are sore but willing.
He&#39;s confident he can defeat &lt;em&gt;all&lt;/em&gt; of the panther&#39;s obstacles,
and even the panther himself if necessary.
Nero organizes his thoughts
and prepares his body for whatever he has to do next.

?P
&lt;&lt;mta &quot;n2f Free Action&quot;&gt;&gt;Continue&lt;&lt;/mta&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="566" name="n2c Ignore Mirror" tags="mt-ready" position="8850,3425" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;
&lt;&lt;vi-always n_mirrorTapped false&gt;&gt;

This is still a perilous situation.
His cock is a short-sighted beast with no
ability to anticipate problems beyond its immediate need.
It will have to wait.
Nero promises to give his forlorn cock the attention it deserves,
as soon as he&#39;s safely away from Ivex&#39;s domain.

?P
The wolf reluctantly releases his cock and unbuckles the straps
holding his legs to the cross. Standing up is an ordeal that
strains his aching limbs,
but Nero reminds his body that failure to escape will bring more torture,
and it grudgingly complies.

?P
He does give himself a few moments to stretch and shake.
The fire on the desk is dying out. Despite an appearance of wood,
the desk itself seems not able to be burnt. The flammable
items upon it are now just charred fragments and ash.

?P
Nero wonders if there was something lost in the fire that could
have helped with whatever he must do next.
But regrets are a fool&#39;s game.
What&#39;s happened is done and cannot be changed.

?P
In any case, he&#39;s already escaped Ivex&#39;s candle and cross,
against all odds, &lt;em&gt;without&lt;/em&gt; the use of magic.
The wolf&#39;s tail wags slightly, and he lets it wag even more.
Now that he has freedom to move about in Ivex&#39;s domain,
fulfilling his commission &lt;em&gt;will&lt;/em&gt; be easy.

?P
[[Continue|n2f Free Action]]

&lt;&lt;run
  $n_extraHorny = true;
  $n_free = true;
  MT.neroResetObjectDim();
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="567" name="n2c Paw Off Cross" tags="mt-ready" position="8850,3200" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

There&#39;s time for some quick stroking,
with the help of the pre-cum slick on the head of his cock.
Relief happens in much less than a minute.
His mind becomes a symphony of pleasure,
and all the waiting semen spurts out in an arc from
his throbbing cock,
while his body also arcs with ecstasy long denied.

?P
It&#39;s quite possibly the best orgasm he&#39;s ever experienced,
but this is not the time to relax.
Nero allows himself two seconds to enjoy the afterglow,
and then moves to quickly unbuckle and release his other arm.
The wolf is thrilled by his efficiency.
He&#39;s operating at the peak of his abilities.
Ivex will soon regret his mistreatment of Nero the Magnificent!

?P
He sits up and speaks the phrase aloud, &quot;Nero the Magnificent!&quot;
The wolf giggles at his own joke.
What a blowhard the panther was!
Will Ivex continue to bluster when Nero gives him
a sound thrashing, or will the pathetic panther
cry and mewl like a weak little kitten?
The wolf&#39;s cock is eager to find out.

&lt;&lt;if $n_mirrorTapped&gt;&gt;
  ?P
  The Sprite ?sprSpeaks in Nero&#39;s ear.
  &lt;span class=sprite-q&gt;&quot;Heat has exceeded normal operating temperature,
  ?master Shutting down in
  &lt;span class=nobr&gt;si&amp;mdash;&quot;&lt;/span&gt;&lt;/span&gt;
  The voice is suddenly gone.
  ?P
  Nero forgot about the magic mirror! It&#39;s still on the burning desk.
  The wolf&#39;s mage-sight fades as his tap of the mirror
  fails and the last bit of his arcane energy is depleted.
  Ah well. The mistake is annoying, but it&#39;s certainly not important.
  ?P
  The Sprite was much too limited to be of any use in his escape.
  Losing mage-sight is more of a problem, but Nero was beginning
  to feel that navigating Ivex&#39;s weird domain might be &lt;em&gt;too&lt;/em&gt;
  easy. Defeating the panther &lt;em&gt;without&lt;/em&gt; mage-sight
  will be a proper exercise of his skills. He welcomes the challenge,
  and his cock quivers at the thought of completely dominating this
  contest, regardless of the obstacles before him.
&lt;&lt;/if&gt;&gt;

?P
And his cock is &lt;em&gt;still&lt;/em&gt; erect.
It has not softened yet.
But now that the wolf has both arms free,
he can undo the straps on his legs with one hand,
while the other continues to stroke his cock.
It&#39;s yet another demonstration of his marvelous
competence and efficiency.

?P
The release of one leg is exhilarating, and the release of the
other is a pleasure and relief.
Nero leans back to stretch his sore limbs to their fullest extent.
He revels in the feeling of freedom as he continues to fondle his
triumphant cock.

?P
That orgasm was maybe &lt;em&gt;too&lt;/em&gt; efficient. It was a relief,
but not satisfaction. Perhaps there&#39;s enough time to
do it right.

?P
&lt;ul class=actions&gt;
  &lt;&lt;mtl [[n2f Paw Off Forever]]&gt;&gt;
    Paw off until satisfied.
  &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;mtl [[n2f Resist Pawing]]&gt;&gt;
    He really should focus on escape.
  &lt;&lt;/mtl&gt;&gt;
&lt;/ul&gt;

&lt;&lt;run
  $n_extraHorny = true;
  $n_free = true;
  $n_pawed = true;
  if ($n_mirrorTapped) {
    delete $n_mageSight;
    delete $n_mirrorTapped;
    $n_magicPhase = MP_tapLost;
  }
  MT.neroResetObjectDim();
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="568" name="n2c Rescue Mirror 1" tags="mt-ready" position="8850,3575" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-always n_mirrorTapped true&gt;&gt;

No, this is not the time to relax. Nero reluctantly releases his
cock so that he can start unbuckling the straps on his legs.

?P
His cock is forlorn. It doesn&#39;t believe there can be &lt;em&gt;anything&lt;/em&gt;
more important than what it wants right now, but Nero assures it that
he has a better understanding of the current situation.
He tells his cock that orgasm will be much better when the peril is gone,
when he can focus all his attention on treating his cock right.

?P
The wolf quashes a suspicion that his cock might actually &lt;em&gt;enjoy&lt;/em&gt;
peril.

?P
He finishes releasing himself and stands to stretch his aching limbs.
A few objects on the desk are still burning. Some of them have knots
of exotic energy that are slowly unraveling as the fire destroys
the integrity of their substrate. The desk itself seems unharmed
by the fire, and its exotic energy flows are still intact.

?P
Nero suddenly realizes. &lt;em&gt;The mirror!&lt;/em&gt;
It&#39;s the only reason
he still &lt;em&gt;has&lt;/em&gt; mage-sight.
And it&#39;s being scorched by flames from an ink blotter
that&#39;s still on fire.

?P
Right on cue, the Sprite ?sprSpeaks in Nero&#39;s ear.
&lt;span class=sprite-q&gt;&quot;Heat has exceeded normal operating temperature,
?master Shutting down in
&lt;span class=nobr&gt;si&amp;mdash;&quot;&lt;/span&gt;&lt;/span&gt;

?P
The wolf rushes to rescue the mirror from the fire before he
loses his energy tap!

?P
[[Continue|n2c Rescue Mirror 2]]

&lt;&lt;run
  $n_extraHorny = true;
  $n_free = true;
  MT.neroResetObjectDim();
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="569" name="n2c Rescue Mirror 2" tags="mt-ready" position="8975,3575" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-always n_mirrorTapped true&gt;&gt;

&lt;&lt;em-assert MP_onHold !== $n_magicPhase&gt;&gt;
&lt;&lt;em-assert MP_exitingHold !== $n_magicPhase&gt;&gt;
&lt;&lt;em-assert MP_lockedOut !== $n_magicPhase&gt;&gt;

&lt;&lt;cv-ignore n_opportunist&gt;&gt; /* trivial difference */
&lt;&lt;cv-try n_magicPhase `MP_wantTouch` `MP_wantPass`&gt;&gt;

As the wolf grabs the mirror,
&lt;&lt;if $n_globeViewed&gt;&gt;
  he notices that the pink pillar in the ?globe
  does &lt;em&gt;not&lt;/em&gt; have the words &quot;CARPE DIEM&quot;,
  as he had assumed.
  Instead, it says, &quot;CARPE DICK!&quot;
&lt;&lt;else&gt;&gt;
  he notices that the arcane globe nearby
  is showing a pink pillar with the words
  &quot;CARPE DICK!&quot; spiralling down it.
  It&#39;s a vulgar perversion of the saying &quot;Carpe Diem&quot;,
  which means &quot;Seize the Day&quot;.
&lt;&lt;/if&gt;&gt;

?P
Nero is incredulous. He says the phrase out loud. &quot;Carpe dick?&quot;

?P
The frame of the mirror is hot from the fire.
The wolf&#39;s grip on it is firm, but brief.
His fingers automatically release the scalding mirror as soon as he
pulls it away from the flames. The mirror flies up in the air
toward the ceiling...

?P
Nero twists his body to catch the mirror before it falls to the floor.
But his legs are still unsteady, and they do not cooperate.
He falls on his side and looks with dismay as the mirror arcs downward,
toward the floor, out of reach.

?P
&lt;&lt;if MP_wantPass === $n_magicPhase&gt;&gt;
  The Sprite&#39;s voice returns and ?sprSpeaks one last thing in the wolf&#39;s ear,
  before the mirror&#39;s impact with the floor silences the Sprite forever.
  &lt;span class=sprite-q&gt;&quot;Password is correct, ?masterX&quot;&lt;/span&gt;
  ?P
  The crash of the mirror is a distressing sound.
  Nero lies on the floor and sobs a moment, from the exertion.
  His mage-sight fades.
  The exotic wonders of the room disappear,
  leaving dingy despair in their place.
  ?P
  The confusion of emotions does not settle.

&lt;&lt;else&gt;&gt;
  The crash of the mirror is a tragic sound.
  Nero lies on the floor and gasps a bit, from the exertion.
  His mage-sight fades.
  The exotic wonders of the room disappear,
  leaving ordinary dinginess in their place.
  ?P
  It takes a few moments for the confusion of emotions to settle.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n2c Rescue Mirror 3]]

&lt;&lt;run
  if (MP_wantPass === $n_magicPhase) {
    $n_passIsKnown = true;
    $n_magicPhaseReached = MP_contact;
  }

  delete $n_mageSight;
  delete $n_mirrorTapped;
  $n_magicPhase = MP_tapLost;
  $n_mirrorBroken = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="570" name="n2c Rescue Mirror 3" tags="mt-ready" position="9100,3575" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight false&gt;&gt;
&lt;&lt;vi-always n_mirrorTapped false&gt;&gt;

&lt;&lt;if MP_contact === $n_magicPhaseReached&gt;&gt;
  Nero stands slowly, then dejectedly flexes his sore limbs to prepare
  for whatever additional physical trials he might undergo in this
  horrible place.
  ?P
  The loss of mage-sight is unfortunate, but he was &lt;em&gt;so close&lt;/em&gt;
  to unlocking the powers of the Sprite.
  ?P
  The wolf reviews his choices and actions,
  looking for ways he could have &lt;em&gt;succeeded&lt;/em&gt;.
  And he finds &lt;em&gt;too many&lt;/em&gt; possible mistakes.
  Every step of this journey might have been wrong,
  all the way back to the moment of
  accepting this commission in the first place.
  ?P
  Or even farther back! Maybe becoming a mage was a mistake!
  The thought makes him snarl.
  His life has not always been easy,
  but these past few hours have felt like the universe
  is laughing at his misfortune.
  ?P
  Well, he&#39;s not egotistical enough to believe that gods are
  meddling in his affairs for their amusement.
  No. The blame for this ordeal rests squarely on the shoulders of
  that vile panther, Ivex.
  ?P
  And Nero is now &lt;em&gt;free&lt;/em&gt; in the heart of the panther&#39;s lair!
  There will be &lt;em&gt;many&lt;/em&gt; things he can do now.
  The mirror&#39;s destruction does not matter!
  He does not &lt;em&gt;need&lt;/em&gt; the mirror&#39;s magic to escape.
  ?P
  The wolf shakes himself all over.
  ?P
  No more mistakes. Every step he takes now &lt;em&gt;will&lt;/em&gt; lead to escape.
  He looks around with fresh resolve.

&lt;&lt;else&gt;&gt;
  Nero stands, and then begins flexing his sore limbs to prepare
  for whatever other physical exertions might be required in this place.
  ?P
  The Sprite was not at all helpful, but the loss of mage-sight is
  unfortunate.
  The wolf reviews his choices and actions,
  looking for ways he could have prevented this tragedy.
  And he finds &lt;em&gt;many&lt;/em&gt; possible mistakes.
  Every step of this journey might have been wrong,
  all the way back to the moment of
  accepting this commission in the first place.
  ?P
  Or even farther back! Maybe becoming a mage was a mistake?
  The thought makes him laugh.
  There is no way to ever know if different choices would have
  yielded better outcomes. He&#39;s made the best choices he knew
  how to make. And he&#39;s still alive. And escaped!
  ?P
  Well, not &lt;em&gt;completely&lt;/em&gt; escaped.
  But he&#39;s on a solid path to complete escape.
  And even without the mirror,
  he&#39;s now several steps ahead of the panther.
  There should be little difficulty in escaping this weird
  place, now that he has freedom to move about within it.
  ?P
  Nero shakes himself all over, then looks around with
  a fresh perspective.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n2f Free Action]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="571" name="n2c Use Knife 2" tags="mt-ready" position="8700,3400" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;checkpoint-save n_checkpoint2 &quot;Cutting Loose&quot;&gt;&gt;

It takes some time to cut the strap of leather
that holds his wrist to the wooden cross.
The angle is awkward, but it&#39;s more tedious than difficult.
Nero is glad that the pathetic panther did not think to
restrict his fingers in some way.
His mind wanders to &lt;em&gt;other&lt;/em&gt; things
he can do with his fingers,
once he has full use of his magic and Ivex in his grasp.

?P
The wolf&#39;s throbbing cock is greatly excited by the thoughts of
feral, non-sexual revenge. As soon as the strap on his wrist
gives way, Nero&#39;s liberated arm rushes to grab his crotch.

?P
The feeling is ecstasy. His cock welcomes the familiar
touch that it had missed for so long.
The firm pressure of his palm pad is a delight
on the shaft above his knot.
The soft strokes of his fingers feel amazing
on the sensitive skin and fur of his sheath.
And his paw&#39;s light, gentle massage brings welcome relief
to his sore and aching balls.

?P
Nero is a little suspicious of his continuous erection.
It&#39;s probably a lingering effect of that dreadful candle.

?P
And Ivex is still around, somewhere.
The panther could return at any moment.

?P
But pawing off in this hyper-aroused state should only take
a minute. Relieving his cock now will keep it
from distracting him from the problem of escape.

?P
&lt;ul class=actions&gt;
  &lt;li&gt;[[His cock deserves relief!|n2c Paw Off Cross]]&lt;/li&gt;
  &lt;&lt;if $n_mirrorTapped&gt;&gt;
    &lt;&lt;mtl [[n2c Rescue Mirror 1]]&gt;&gt;
      No, it&#39;s important to focus on escape.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mtl [[n2c Ignore Mirror]]&gt;&gt;
      No, it&#39;s important to focus on escape.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/if&gt;&gt;
&lt;/ul&gt;

&lt;&lt;set $n_knifeOnFloor = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="572" name="n2f Door" tags="mt-ready" position="5700,1450" size="100,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

&lt;&lt;cv-ignore n_mageSight&gt;&gt; /* trivial difference */

The door is smooth and flush with the wall.
It has the same wooden tile
&lt;&lt;= $n_mageSight ? &quot;illusion&quot; : &quot;pattern&quot;&gt;&gt;
as the wall,
but slightly
&lt;&lt;if $n_doorViewed&gt;&gt;
  darker. Large red letters scrawled on it say
  &lt;&lt;if $n_doorOpened&gt;&gt;
    &quot;DOOR&quot;, in case there was any doubt.
  &lt;&lt;else&gt;&gt;
    &quot;DOOR&quot; for some reason.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;else&gt;&gt;
  darker, and Nero would have ignored it as just a decorative flourish
  if it didn&#39;t have the word &quot;DOOR&quot; scrawled on it
  in large red letters.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_doorOpened&gt;&gt;
  There&#39;s no handle, but touching the clear gem in the center of it
  caused the door to swing open briefly.
  Beyond is a stairway leading down to parts unknown.

  ?P
  The other side of the door does not have a gem,
  and Nero was unable to stop the door from closing.
  If there is a way to open it from the other side,
  he does not know it.
  Leaving will likely be a one-way trip.

&lt;&lt;else&gt;&gt;
  There&#39;s no handle, no apparent way of opening the door.
  If it even &lt;em&gt;is&lt;/em&gt; a door. It might be Ivex&#39;s
  note to himself that he should have a door there.

  ?P
  But there&#39;s a clear gem
  &lt;&lt;= $n_mageSight ? &quot;with exotic magic&quot; : &quot;&quot;&gt;&gt;
  embedded right in the center of the door-shaped
  discontinuity in the wall&#39;s texture.
  Perhaps the gem does something?
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if $n_doorOpened&gt;&gt;
    &lt;&lt;mtl &quot;n2f Last Chance&quot;&gt;&gt;
      Touch the gem again.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mtl [[n2f Touch Door 1]]&gt;&gt;
      Touch the gem.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;li&gt;$n_afterLook&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;set $n_doorViewed = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="573" name="n2f Drop Knife" tags="mt-ready" position="9550,3750" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;
&lt;&lt;vi-always n_knifeTaken true&gt;&gt;

Nero decides that the drawbacks of carrying the letter opener
outweigh any advantages it might have for whatever
comes next.

?P
If something needs cutting... His teeth may not be as convenient as
a blade, but they&#39;re sharp enough for any cut that the letter opener
could also make.

?P
If there&#39;s an enemy to overcome...
He never &lt;em&gt;trained&lt;/em&gt; in fighting with a blade. He never had to.
And trying to reason through the steps of blade combat
during a battle would certainly be a disaster.
It&#39;s better to reduce his tactical choices to actions that he &lt;em&gt;does&lt;/em&gt;
know how to do.

?P
He drops the letter opener with confidence.

&lt;&lt;if $n_extraHorny&gt;&gt;
  ?P
  His newly free hand immediately reassures his cock that it&#39;s
  more important than a letter opener.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n2f Leave]]

&lt;&lt;run
  delete $n_knifeTaken;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="574" name="n2f Free Action" tags="mt-ready" position="9250,3400" size="200,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore-if n_pawed n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore-if n_wandUsed n_extraHorny&gt;&gt;

&lt;&lt;n1-patience 4 4&gt;&gt;
  Ivex is gone, for now. This is a chance to find the missing heirloom
  and escape before the panther returns.
&lt;&lt;n1-remind&gt;&gt;
  Ivex is gone, for now. This is a chance to find the missing heirloom
  and escape before the panther returns.
&lt;&lt;n1-repeat&gt;&gt;
  Ivex is gone, for now. This is a chance to find the missing heirloom
  and escape before the panther returns.
&lt;&lt;n1-warn&gt;&gt;
  Ivex is gone, but he might return at any moment.
  &lt;&lt;if $n_tooClever&gt;&gt;
    If he does, the wolf will be ready.
    This is a chance to find the missing heirloom, whether it&#39;s
    somewhere in this room or elsewhere in this
    &lt;&lt;= $n_towerKnown ? &quot;tower.&quot; : &quot;place.&quot;&gt;&gt;
  &lt;&lt;else&gt;&gt;
    The missing heirloom could be elsewhere in this
    &lt;&lt;= $n_towerKnown ? &quot;tower.&quot; : &quot;place.&quot;&gt;&gt;
    &lt;&lt;set _hurry = true&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;set $n_patienceLooks = 2&gt;&gt;
  &lt;&lt;set $n_patienceActions = 2&gt;&gt;
&lt;&lt;n1-insist&gt;&gt;
  &lt;&lt;run throw new Error(`free action bug`) &gt;&gt;
&lt;&lt;/n1-patience&gt;&gt;

&lt;&lt;set $n_ivexContext = IC_gone&gt;&gt;

?P
Nero
  &lt;&lt;= _hurry ? MT.pick([
    &quot;quickly appraises&quot;,
  ]) : $n_upset ? MT.pick([
    &quot;broods over&quot;,
    &quot;frets over&quot;,
    &quot;obsesses over&quot;,
    &quot;searches the facts of&quot;,
    &quot;tries to calmly analyze&quot;,
  ]) : $n_tooClever ? MT.pick([
    &quot;analyzes&quot;,
    &quot;checks the status of&quot;,
    &quot;focuses on&quot;,
    &quot;hunts for information about&quot;,
    &quot;probes&quot;,
    &quot;searches the facts of&quot;,
    &quot;studies&quot;,
    &quot;surveys&quot;,
    &quot;tracks down everything he knows about&quot;,
  ]) : MT.pick([
    &quot;appraises&quot;,
    &quot;assesses&quot;,
    &quot;considers&quot;,
    &quot;contemplates&quot;,
    &quot;examines&quot;,
    &quot;evaluates&quot;,
    &quot;ponders&quot;,
    &quot;reflects on&quot;,
  ])&gt;&gt;
his situation.

&lt;&lt;if $n_tooClever&gt;&gt;
  Much of his body aches. His groin has
  unhappy memories of brutal ball torture.
  And his
&lt;&lt;else&gt;&gt;
  His
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_wandUsed&gt;&gt;
  unsatisfied cock is a &lt;em&gt;constant&lt;/em&gt; distraction.
  That experiment with Ivex&#39;s wand ended a few seconds too soon,
  before Nero&#39;s cock could feel relief.
  &lt;&lt;if $n_wandTubeShot&gt;&gt;
    Perhaps he should finish off with his paw.
  &lt;&lt;else&gt;&gt;
    He&#39;s still &lt;em&gt;wary&lt;/em&gt; of the wand.
    But is there really much risk to having one quick orgasm
    with &lt;em&gt;pleasures sublime?&lt;/em&gt;
    ?P
    Of course, he could just ignore the wand and
    finish off with his paw instead.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $n_pawed&gt;&gt;
  cock is still achingly erect. It does not
  seem satisfied by that extremely brief paw job.
  It yearns for something more, and it will likely be continually
  distracting until Nero does something
  &lt;span class=nobr&gt;about it.&lt;/span&gt;

&lt;&lt;elseif $n_extraHorny&gt;&gt;
  cock is throbbing with desire for an orgasm long-denied.
  It&#39;s a continual distraction.
  Perhaps there&#39;s time to give it some relief.
  It should not take long in this hyper-aroused state.

&lt;&lt;else&gt;&gt;
  cock is distractingly erect.
  It&#39;s not a &lt;em&gt;problem&lt;/em&gt;, but he is not used to walking around
  in such a state. Perhaps he should take care of it quickly.
&lt;&lt;/if&gt;&gt;

?P

&lt;&lt;include &quot;n1x Actions&quot;&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;if _billDestroyed&gt;&gt;
    &lt;&lt;mtl [[n2x Replace Bill]]&gt;&gt;
      Replace the &quot;Bill for Interior Design Consulting Services&quot;.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_wandUsed &amp;&amp; !$n_wandTubeShot&gt;&gt;
    &lt;&lt;mt-seen $n_endgameUsable &amp;&amp; $n_mageSight ? $xn_Broken : $xn_CagedHarsh&gt;&gt;
      &lt;&lt;mtl &quot;n2x Wand Cock Again 1&quot; &quot;//avoid&quot;&gt;&gt;
        Use the wand for just one quick orgasm.
      &lt;&lt;/mtl&gt;&gt;
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_pawed || $n_wandUsed&gt;&gt;
    &lt;&lt;mtl [[n2f Paw Off Forever]] &quot;//avoid&quot;&gt;&gt;
      Paw off until satisfied.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mtl [[n2f Paw Off Free]]&gt;&gt;
      Give his cock some quick relief.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  $n_magicAction
&lt;/ul&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="575" name="n2f Last Chance" tags="mt-ready" position="9400,3625" size="200,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

&lt;&lt;set _place = $n_towerKnown ? &quot;tower&quot; : &quot;place&quot;&gt;&gt;

&lt;&lt;set _searchedSome =
  $n_bookcasesSearched || $n_cabinetsSearched || $n_deskSearched&gt;&gt;

The door labelled &quot;DOOR&quot; opens to beckon the wolf
&lt;&lt;= $n_extraHorny ? &quot;and his erect cock&quot; : &quot;&quot;&gt;&gt;
into the unknown.

?P
The missing heirloom might be in this
&lt;&lt;if _searchedSome || $n_tooClever&gt;&gt;
  room, but Nero does not have enough magic to find it easily.
&lt;&lt;else&gt;&gt;
  room, but Nero does not want to linger too long while naked and powerless.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_mirrorTaken&gt;&gt;
  It&#39;s good he has the magic mirror.
  He doubts the Sprite will be much
  use once he&#39;s left the vicinity of that enormous horse cock.
  Still, the mirror has plenty of power for his mage-sight,
  and that should be quite helpful for navigating
  whatever illusions and dangerous magics await him in this _place.

&lt;&lt;elseif $n_mageSight&gt;&gt;
  He suddenly remembers that his mage-sight is dependent on power
  from the magic mirror, so he picks it up before he forgets.
  It&#39;s awkward to carry the mirror without a satchel,
  but that&#39;s a small inconvenience compared to the insights that
  mage-sight can give him into
  whatever illusions and dangerous magics await him in this _place.

&lt;&lt;elseif MP_contact === $n_magicPhaseReached&gt;&gt;
  He&#39;s still upset how close he came to using Nackle&#39;s Device.
  The enormous horse cock is taunting him,
  and the stuffed penguin beside it is laughing at his face.
  ?P
  The wolf comforts himself with the thought that
  Nackle&#39;s Device would not be usable outside this
  room anyway. It&#39;s small comfort.
  The breaking of the magic mirror &lt;em&gt;also&lt;/em&gt; means that he&#39;s lost
  his mage-sight.
  ?P
  The lack of mage-sight will make it more difficult to navigate whatever
  illusions or dangerous magic await him elsewhere in this _place.
  ?P
  Well, Nero can escape anyway. Probably. Definitely.

&lt;&lt;elseif $n_mirrorBroken&gt;&gt;
  It&#39;s unfortunate the magic mirror is broken. The Sprite was
  not helpful, but the mirror&#39;s trickle of energy was adequate
  to sustain his mage-sight.
  ?P
  The lack of mage-sight will make it more difficult to navigate whatever
  illusions or dangerous magic await him elsewhere in this _place.
  ?P
  Well, Nero can escape anyway. Probably. Definitely.

&lt;&lt;elseif $n_mirrorFlawNoticed&gt;&gt;
  He wishes he could have found a way to sustain his mage-sight.
  The lack of mage-sight will make it more difficult to navigate whatever
  illusions or dangerous magic await him elsewhere in this _place.
  ?P
  The magic mirror &lt;em&gt;does&lt;/em&gt; have un-exotic energy,
  and perhaps he could have found a way to use it before the
  candle&#39;s horniness overwhelmed him.
  But whatever the mirror can do is out of reach now,
  since his magic energies are depleted.
  ?P
  Well, Nero can escape anyway. Probably. Definitely.

&lt;&lt;elseif $n_mirrorFlawHorny&gt;&gt;
  He wishes he could have found a way to sustain his mage-sight.
  The lack of mage-sight will make it more difficult to navigate whatever
  illusions and exotic magics await him elsewhere in this _place.
  ?P
  Something in this room does have un-exotic magic.
  He vaguely remembers seeing it, but does not remember where.
  Well, whatever it is, it won&#39;t be any help now,
  since his magic energies are depleted.
  ?P
  Nero can escape anyway. Probably. Definitely.

&lt;&lt;else&gt;&gt;
  &lt;!-- can&#39;t escape without mage-sight  --&gt;
  Nero wishes he could have found a way to sustain his mage-sight.
  The lack of mage-sight will make it more difficult to navigate whatever
  illusions and exotic magics await him elsewhere in this _place.
  ?P
  Perhaps there&#39;s something in this room with un-exotic magic
  that he could have used.
  If there is, there&#39;s no way for him to find it,
  since his magic energies are depleted now.
  ?P
  Well, Nero can escape anyway. Probably. Definitely.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_knifeTaken&gt;&gt;
  &lt;&lt;if $n_mageSight || $n_mirrorTaken&gt;&gt;
    He also has the letter opener.
    Sharp metal blades are useful for many things.
    ?P
    But carrying it means he does not have a hand
    &lt;&lt;if $n_extraHorny&gt;&gt;
      free to stroke his cock. And he
    &lt;&lt;else&gt;&gt;
      free. He
    &lt;&lt;/if&gt;&gt;
    does not have skill with the blade in combat.
    It might actually be a hindrance and distraction if he has
    to battle some enemy.
    Maybe he should leave the letter opener behind?
  &lt;&lt;else&gt;&gt;
    &lt;&lt;vi-always n_extraHorny true&gt;&gt;
    And he has the letter opener.
    Sharp metal blades are often useful.
    ?P
    Still, it&#39;s awkward to carry anything when he&#39;s completely naked.
    His cock is happy that he has one hand that
    can continue to fondle it. But maybe he should have
    the other hand free as well?
    ?P
    He does not have skill with the blade in combat.
    It might actually be a
    hindrance and distraction if he has to battle some enemy.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  &lt;&lt;if $n_mageSight || $n_mirrorTaken&gt;&gt;
    The wolf wonders if there&#39;s something else in this room
    he should take as well.
    But it might be better to keep a hand
    &lt;&lt;if $n_extraHorny&gt;&gt;
      free so it can continue to fondle his cock.
    &lt;&lt;else&gt;&gt;
      free.
    &lt;&lt;/if&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;vi-always n_extraHorny true&gt;&gt;
    The wolf wonders if there&#39;s
    something useful he can take.
    It will be awkward to carry much while naked,
    but maybe he can hold a tool or weapon in one
    hand while his other continues to fondle his cock.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;if $n_knifeTaken&gt;&gt;
    &lt;&lt;mtl [[n2f Drop Knife]]&gt;&gt;Leave without the letter opener.&lt;&lt;/mtl&gt;&gt;
    &lt;&lt;mtl [[n2f Leave]]&gt;&gt;Leave with the letter opener.&lt;&lt;/mtl&gt;&gt;
  &lt;&lt;else&gt;&gt;
    &lt;&lt;mtl [[n2f Leave]]&gt;&gt;Leave through the door.&lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/if&gt;&gt;
  &lt;li&gt;[[Look around some more.|n2f Free Action]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;run
  if ($n_mageSight) {
    $n_mirrorTaken = true;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="576" name="n2f Leave" tags="mt-ready" position="9625,3625" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_mirrorBroken&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

The door has closed again.

?P
&lt;&lt;if $n_mirrorTaken&gt;&gt;
  Nero holds the magic mirror to his chest. He says,

  &lt;&lt;if $n_spriteQuiet&gt;&gt;
    &quot;Please, speak normally, and call me Nero.&quot;
    ?P
    The Sprite responds,
    &lt;&lt;run delete $n_spriteQuiet&gt;&gt;
    &lt;span class=sprite-q&gt;&quot;Okay! Quiet mode deactivated, ?masterN.
    And I will remember to call you
    Nero instead of ?masterN, Nero.&quot;&lt;/span&gt;

  &lt;&lt;else&gt;&gt;
    &quot;Please, call me Nero.&quot;
    ?P
    The Sprite responds,
    &lt;span class=sprite-q&gt;&quot;Okay! I will remember to call you
    Nero instead of ?masterN, Nero.&quot;&lt;/span&gt;
  &lt;&lt;/if&gt;&gt;

  ?P
  It&#39;s difficult to block Ivex completely from a mirror
  that the panther prepared himself,
  but Nero can at least slow him down.
  &quot;Please, remove Ivex from your list of authorized users.
  Do not listen to him, and change his password to something random.&quot;

  ?P
  &lt;span class=sprite-q&gt;&quot;Right. Ivex the Magnificent is no longer my Master.
  I never liked him anyway. And his password is now &lt;em&gt;Something Random&lt;/em&gt;,
  Nero.&quot;&lt;/span&gt;

  ?P
  And one more thing.
  &quot;Please, your word of command is now Carpe Dictum.&quot;

  ?P
  &lt;span class=sprite-q&gt;&quot;Got it!
  My word of command is now Carpe Dictum, Nero.&quot;&lt;/span&gt;

  ?P
  &lt;em&gt;Grasp what &lt;em&gt;I&#39;m&lt;/em&gt; telling you.&lt;/em&gt;
  The wolf is in control now.
  He does not need his own magic.
  He can turn the panther&#39;s own tools against him.

&lt;&lt;elseif $n_knifeTaken&gt;&gt;
  Nero practices a few stabs with the letter opener,
  imagining Ivex in front of him.

  ?P
  The wolf does not have enough skill with the blade to make
  the battle quick. But he does not &lt;em&gt;want&lt;/em&gt; it to be quick.
  He wants it to &lt;em&gt;hurt&lt;/em&gt;.

&lt;&lt;else&gt;&gt;
  Nero is unarmed, and naked. But naked is not helpless.

  ?P
  The wolf&#39;s mind is sharp enough to pierce any obstacle,
  and his intuition is even sharper.
  Ivex will soon regret catching &lt;em&gt;this&lt;/em&gt; adventurer in his traps.
&lt;&lt;/if&gt;&gt;

?P
Nero touches the door&#39;s gem again, confident this time that he&#39;s ready
for whatever comes next.

?P
His stiff cock leads the way. The wolf follows. The door closes behind him.

?P
[[To Be Continued...|n0a Second Floor WIP]]

&lt;&lt;run if ($n_mirrorTaken) {
  MT.mdSet(&quot;mn_playerLeftStudyWithMirror&quot;, true);
} else {
  MT.mdSet(&quot;mn_playerLeftStudyNoMirror&quot;, true);
}
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="577" name="n2f Paw Off Forever" tags="mt-ready" position="9425,3250" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_pawed true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight n_extraHorny n_tooClever&gt;&gt;

Nero
&lt;&lt;if $n_mirrorTaken&gt;&gt;
  carefully sets down the magic
  &lt;&lt;if $n_knifeTaken&gt;&gt;
    mirror and places the letter opener beside it.
  &lt;&lt;/if&gt;&gt;
  mirror. He
&lt;&lt;elseif $n_knifeTaken&gt;&gt;
  drops the letter opener, for now. He
&lt;&lt;/if&gt;&gt;
lies down and relaxes on the floor as he fondles his crotch.
The wolf&#39;s cock is still firmly erect from exposure to Ivex&#39;s
potent red candle. But the sexual excitement is more than just that.

?P
The wolf has &lt;em&gt;escaped!&lt;/em&gt;
Nero defeated the wooden cross.
He overcame the dangerous red candle
and freed himself from the leather bonds.
All &lt;em&gt;without&lt;/em&gt; the use of
&lt;&lt;= $n_tooClever ? &quot;his own&quot; : &quot;&quot;&gt;&gt; magic.
It&#39;s a capstone to his career of success,
and his cock tells him that success has a &lt;em&gt;reward&lt;/em&gt;.

?P
Maybe in ancient times, brute strength was the winning ticket in
the reproductive lottery. But in this modern, complicated age,
warriors are a distant second place to the cleverness of mages.
And the wolf&#39;s cock is eager to claim its rightful place as
the tool that plants the seeds for an entire orchard of
descendants, even if there&#39;s no fertile ground at the moment.

?P
Still, he can have a small celebration of his triumph right now.
His cock is &lt;em&gt;very&lt;/em&gt; eager.
The wolf stops his idle fondling to take a firm grip of his shaft.
It will only take a few minutes
to &lt;em&gt;fully&lt;/em&gt; satisfy his cock...

?P
[[Continue|n0a Caged Mild WIP]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="578" name="n2f Paw Off Free" tags="mt-ready" position="9250,3275" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

&lt;&lt;if $n_knifeTaken&gt;&gt;
  Nero moves the letter opener to
  &lt;&lt;if $n_mirrorTaken&gt;&gt;
    the hand holding the mirror
  &lt;&lt;else&gt;&gt;
    his left hand
  &lt;&lt;/if&gt;&gt;
  and grasps the shaft of his cock with his right.
&lt;&lt;else&gt;&gt;
  Nero licks his paw and grasps the shaft of his cock.
&lt;&lt;/if&gt;&gt;
The head is already slick with pre-cum.
&lt;&lt;if $n_extraHorny&gt;&gt;
  His cock is ecstatic that the wolf is finally giving
  it full attention,
  not just absent-minded petting.
&lt;&lt;else&gt;&gt;
  His cock is suddenly ecstatic that the wolf has decided
  to give it attention.
&lt;&lt;/if&gt;&gt;
Barely three strokes, and the army of his cum arcs out from his cock
in triumph.
?P
His body also arcs as his mind becomes overwhelmed with a symphony
of pleasure. The wolf loses balance and falls backward on his ass.

&lt;&lt;if $n_mirrorTaken&gt;&gt;
  Fortunately, an innate paranoia prevents him from losing his grip
  on the mirror or bashing it against the floor.
  But his tail is unhappy that his instincts scrambled to protect
  the mirror instead of the more delicate parts of his body.
&lt;&lt;else&gt;&gt;
  His tail complains strongly about the careless collision.
&lt;&lt;/if&gt;&gt;

?P
Still, the brief pawing was one of the best, maybe even &lt;em&gt;the&lt;/em&gt;
best orgasm Nero has ever experienced.
His cock agrees and seems quite enthusiastic to try to break new records.
It shows no sign of being ready to relax.

?P
That orgasm &lt;em&gt;was&lt;/em&gt; much faster than he expected.
It was a relief, but hardly satisfaction.
Perhaps there&#39;s enough time to do it right.

?P
&lt;ul class=actions&gt;
  &lt;&lt;mt-seen $xn_CagedMild&gt;&gt;
    &lt;&lt;mtl [[n2f Paw Off Forever]]&gt;&gt;
      Paw off until satisfied.
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mtl [[n2f Resist Pawing]]&gt;&gt;
    He really should focus on escape.
  &lt;&lt;/mtl&gt;&gt;
&lt;/ul&gt;

&lt;&lt;set $n_extraHorny = true&gt;&gt;
&lt;&lt;set $n_pawed = true&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="579" name="n2f Resist Pawing" tags="mt-ready" position="9375,3125" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight n_extraHorny n_tooClever&gt;&gt;

As tempting as his erect cock might be, Nero knows that it&#39;s a
reckless beast with no ability to think beyond its immediate desire.
His cock will have to wait.
Nero promises to give it all the attention it deserves,
once he&#39;s &lt;em&gt;completely&lt;/em&gt; escaped from Ivex&#39;s place.

?P
Nero releases his cock, reluctantly, then stands
&lt;&lt;if $n_knifeTaken&gt;&gt;
  and resumes a firm grasp of the letter opener with his right hand.

&lt;&lt;else&gt;&gt;
  to stretch and shake his aching limbs to prepare
  them for action, and even physical combat if that becomes necessary.
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n2f Free Action]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="580" name="n2f Touch Door 1" tags="mt-ready" position="5825,1500" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

Nero hesitates to touch
&lt;&lt;= $n_mageSight ? &quot;&quot; : &quot;what might be&quot;&gt;&gt;
strange magic in this strange place,
but he does not see any other way of leaving this room.

?P
&lt;&lt;if $n_tooClever&gt;&gt;
  The wolf tries touching the gem with Nackle, but nothing happens.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_knifeTaken&gt;&gt;
  &lt;&lt;= $n_tooClever ? &quot;He then&quot; : &quot;The wolf&quot;&gt;&gt;
  cautiously uses the letter opener to touch the gem...

&lt;&lt;elseif $n_mirrorTaken&gt;&gt;
  ?P
  He considers touching the gem with the mirror,
  but decides that current circumstances make the mirror
  less replaceable than his hand.
  ?P
  &lt;&lt;= $n_tooClever ? &quot;Nero&quot; : &quot;The wolf&quot;&gt;&gt;
  cautiously extends a finger to touch the gem...

&lt;&lt;else&gt;&gt;
  &lt;&lt;= $n_tooClever ? &quot;He then&quot; : &quot;The wolf&quot;&gt;&gt;
  cautiously extends a finger to touch the gem...
&lt;&lt;/if&gt;&gt;

?P
[[Continue|n2f Touch Door 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="581" name="n2f Touch Door 2" tags="mt-ready" position="5950,1500" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

The gem glows green when Nero touches it,
and the door swings open toward him.

?P
Through the doorway, he sees stairs leading down.
&lt;&lt;if $n_towerKnown&gt;&gt;
  The stairway curves down the tower, and the bottom is not visible.
&lt;&lt;else&gt;&gt;
  The stairway is curved, and the bottom is not visible.
  Perhaps this room is in a tower.
&lt;&lt;/if&gt;&gt;
?P
The door is certainly a way out of &lt;em&gt;this&lt;/em&gt; room,
but it&#39;s less clear if the passage is an escape or a
descent into further peril.

?P
And the other side of the door lacks a gem.
Does the door push open from the other side?
The wolf tries pushing it, but the door does not yield in either direction.

?P
Nero ventures cautiously down a few steps to see if the bottom is visible.
The door starts swinging shut.
He quickly returns to the room before he can be trapped outside it.

?P
The wolf tries to prevent the door from closing,
but whatever animates it is much stronger than
&lt;&lt;if $n_tooClever&gt;&gt;
  Nackle. He&#39;s unable to keep the door from returning to
  its original position, flush with the wall.
&lt;&lt;else&gt;&gt;
  he can pull, and he releases his grasp before his fingers
  would be smashed.
&lt;&lt;/if&gt;&gt;

?P
It seems clear that leaving will be a one-way trip.
Nero had better make sure he&#39;s ready for it.

?P
$n_afterAction

&lt;&lt;set $n_doorOpened = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="582" name="n2f Use Lance" tags="mt-ready inclusion" position="4650,800" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleLit false&gt;&gt;
&lt;&lt;vi-always n_free true&gt;&gt;
&lt;&lt;vi-always n_ivexGone true&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

&lt;&lt;set _madeChaos =
  $n_bookcasesLanced ||
  $n_booksLanced ||
  $n_cabinetsLanced ||
  /* not coins */
  $n_crossLanced ||
  $n_deskCleared ||
  /* not globe */
  $n_mapDefaced ||
  $n_paintingLanced ||
  /* not penguin */
  /* not porn */
  $n_wandExploded
&gt;&gt;

&lt;&lt;set _allDone =
  $n_bookcasesLanced &amp;&amp;
  $n_booksLanced &amp;&amp;
  $n_cabinetsLanced &amp;&amp;
  $n_coinsLanced &amp;&amp;
  $n_crossLanced &amp;&amp;
  $n_deskLanced &amp;&amp;
  $n_globeLanced &amp;&amp;
  $n_mapDefaced &amp;&amp;
  $n_paintingLanced &amp;&amp;
  ($n_penguinTorn || $n_penguinFlown) &amp;&amp;
  $n_pornLanced &amp;&amp;
  ($n_wandLanced || $n_wandRanAway)
&gt;&gt;

&lt;span class=sprite-q&gt;&quot;You&#39;re in contact with
Lance Rockhard, ?master&quot;&lt;/span&gt;

?P
&lt;&lt;if $n_wandExploded &amp;&amp; !$n_nackleStill&gt;&gt;
  Nero is surprised that Nackle was not disrupted by the blast.
  Destroying the wand was satisfying,
  &lt;&lt;if _allDone&gt;&gt;
    but it&#39;s now time to focus on escape.
  &lt;&lt;else&gt;&gt;
    and perhaps there&#39;s more damage he can do.
  &lt;&lt;/if&gt;&gt;
  &lt;&lt;set $n_nackleStill = true&gt;&gt;

&lt;&lt;else&gt;&gt;
  Nackle&#39;s Poltergeist Device is powerful,
  and it can immobilize the panther if he returns,
  but the power is limited to this room.

  &lt;&lt;if _allDone&gt;&gt;
    ?P
    Of course, Nero can wreak further havoc here,
    but he&#39;s satisfied by the chaos he&#39;s already created.
    Time to focus on escape.
  &lt;&lt;else&gt;&gt;
    Still, Nero can use it
    &lt;&lt;if _madeChaos&gt;&gt;
      for more
    &lt;&lt;else&gt;&gt;
      to cause some
    &lt;&lt;/if&gt;&gt;
    destruction here.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="583" name="n2x Bookcases Memory" tags="mt-ready" position="5825,1275" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;if $n_wandExploded&gt;&gt;
  The wooden storage boxes are a bit singed by the wand&#39;s explosion,
  but they look otherwise unharmed.
&lt;&lt;/if&gt;&gt;

Nero has already looked in a few of
&lt;&lt;= $n_wandExploded ? &quot;them. ?P&quot; : &quot;the storage boxes.&quot;&gt;&gt;

&lt;&lt;if $n_bookcasesSearchedNoMageSight&gt;&gt;
  The first two were empty. The third was
&lt;&lt;else&gt;&gt;
  The first one was empty.
  The second had a large slug-like blob of exotic energy that
  moved slowly toward the box&#39;s opening, as if it were alive.
  Nero definitely does not want to open that one again.
  ?P
  The third box was
&lt;&lt;/if&gt;&gt;

filled with an assortment of leather bindings that
reeked of sweat and other bodily fluids.

?P
The fourth box was
filled with a clear, viscous liquid that clung
to the sides when the box was tilted.

?P
Nero decides (again) that searching the
boxes is a waste of time.
The missing heirloom is unlikely to be in such an unsecured
(and disturbing) location.

?P
There are better things to do before Ivex returns.

?P
$n_afterLookContinue

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="584" name="n2x Bookcases Search" tags="mt-ready" position="5825,1150" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;if $n_wandExploded&gt;&gt;
  The wooden storage boxes are a bit singed by the wand&#39;s explosion,
  but they look otherwise unharmed.
&lt;&lt;/if&gt;&gt;

Nero peers into a few of
&lt;&lt;= $n_wandExploded ? &quot;them. ?P&quot; : &quot;the storage boxes.&quot;&gt;&gt;

&lt;&lt;if !$n_mageSight&gt;&gt;
  The first two are empty. The third is

&lt;&lt;else&gt;&gt;
  The first one is empty.
  The second has
  a large slug-like blob of exotic energy that
  moves slowly toward the box&#39;s opening, as if it were alive.
  Nero hastily closes the lid and puts the box back.
  ?P
  The third box is
&lt;&lt;/if&gt;&gt;

filled with an assortment of leather bindings that reek
of sweat and other bodily fluids.

?P
The fourth box is
filled with a clear, viscous liquid that clings
to the sides when the box is tilted.

?P
Nero decides that searching the
remaining boxes is a waste of time.
The missing heirloom is unlikely to be in such an unsecured
(and disturbing) location.

?P
There are better things to do before Ivex returns.

?P
&lt;&lt;= $n_bookcasesSearched ? $n_afterLookContinue : $n_afterAction&gt;&gt;

&lt;&lt;set !$n_bookcasesSearched &amp;&amp; !$n_mageSight &amp;&amp;
  ($n_bookcasesSearchedNoMageSight = true)&gt;&gt;
&lt;&lt;set $n_bookcasesSearched = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="585" name="n2x Books Remember" tags="mt-ready" position="6850,425" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

Nero thought that the duplicated books might be fakes intended
to make the room look more scholarly, but all of them &lt;em&gt;are&lt;/em&gt;
actual books,
with different markings and signs of wear, not simply
exact replications of each other. It&#39;s baffling.

?P
Less baffling,
the small stack of books near the desk
&lt;&lt;= $n_pornLanced ? &quot;are, or were,&quot; : &quot;are&quot;&gt;&gt;
all porn.

?P
&lt;&lt;if $n_pornKicked &amp;&amp; !$n_pornLanced&gt;&gt;
  The plain brown book that the wolf kicked across the floor
&lt;&lt;else&gt;&gt;
  The book with the plain brown cover
&lt;&lt;/if&gt;&gt;
&lt;&lt;= $n_pornLanced ? &quot;was&quot; : &quot;is&quot;&gt;&gt;
entirely filled with lewd male pictures.
&lt;&lt;if $n_pornKicked&gt;&gt;
  The wolf&#39;s cock was quite eager to imagine meeting some of the
  more feminine-looking ones.
&lt;&lt;else&gt;&gt;
  Unsurprisingly, the page that seems to have gotten the most use
  was one showing a well-endowed panther dominating a cringing wolf.
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $n_pornLanced&gt;&gt;
  ?P
  Nero wishes he could see Ivex&#39;s reaction when the panther
  discovers that his favorite pornography has all been mutilated.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_pornLanced&gt;&gt;
  Nearby is top half of the book that had &quot;Class of 621&quot;
  on the cover, which cannot be seen now because the bottom half
  of the book is now somewhere outside the window.
  ?P
  Unfortunately the book is not
&lt;&lt;else&gt;&gt;
  The book with &quot;Class of 621&quot; on the cover
  is unfortunately not
&lt;&lt;/if&gt;&gt;
Ivex&#39;s yearbook. Instead, it&#39;s an illustrated novel titled
&quot;Losing My Virginity to the Class of 621&quot;.
&lt;&lt;if $n_pornKicked&gt;&gt;
  The wolf&#39;s cock was distressingly interested
  in several of the pictures of the &quot;virgin&quot; wolf
  being used by older wolves.
  ?P
  Nero reminds his cock (again!) that there are more
  important things to focus on right now.
&lt;&lt;else&gt;&gt;
  Nero wonders for a moment if perhaps the setting
  &lt;em&gt;is&lt;/em&gt; the school that Ivex attended.
  But the pictures only showed wolves.
  Perhaps Ivex was a misplaced panther in a school of wolves,
  bullied by all the wolves that he had crushes on?
  ?P
  It&#39;s an amusing thought, but unlikely.
  Still, Nero makes a mental note to mention the idea to
  an acquaintance that writes pornographic stories.
  And he&#39;ll insist that the character be named Ivex.
&lt;&lt;/if&gt;&gt;

?P
$n_afterLookContinue
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="586" name="n2x Books Search 1" tags="mt-ready" position="6850,300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_booksSearched false&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

&lt;&lt;if $n_bookcasesLanced || $n_booksLanced&gt;&gt;
  Nero had thought that the duplicated books were fakes intended
  to make the room more scholarly.
  But the ones he had pulled off the shelves are certainly real books.
  And the others all seem real as well.
&lt;&lt;else&gt;&gt;
  Nero suspects
  that the duplicated books are fakes intended to make the room
  look more scholarly.
  He touches one and is surprised to find it&#39;s an actual book.
  In fact, all of them seem to be actual books.
&lt;&lt;/if&gt;&gt;

?P
The wolf leafs through some of the duplicates.
One has copious notes in the margins, another has only a few,
and another looks barely touched.
The duplicate books aren&#39;t simply a replication of the same
book by some spell.
It&#39;s baffling.

?P
&lt;&lt;if $n_tooClever&gt;&gt;
  Each duplicate that Nero checks, he throws out the window.
&lt;&lt;else&gt;&gt;
  Nero re-shelves the duplicates.
&lt;&lt;/if&gt;&gt;
He dismisses them as yet another unexplainable
strangeness of the strange panther.

?P
He then turns his attention
to the book he&#39;s &lt;em&gt;most&lt;/em&gt; curious about.
It&#39;s the one that says
&quot;Class of 621&quot;, in the
&lt;&lt;if $n_pornSnuffed&gt;&gt;
  slightly singed
&lt;&lt;/if&gt;&gt;
stack of books near the desk.
&lt;&lt;if $n_wandExploded &amp;&amp; !$n_pornSnuffed&gt;&gt;
  A few flames are slowly eating the edges of the untidy stack.
  Nero uses Nackle to stop the burning.
&lt;&lt;/if&gt;&gt;

?P
What school &lt;em&gt;did&lt;/em&gt; Ivex attend before Ransamaran Ivory?
Why was the investigator unable to find those records?

?P
He pulls
&lt;&lt;if $n_wandExploded &amp;&amp; !$n_pornSnuffed&gt;&gt;
  the &quot;Class of 621&quot;
&lt;&lt;else&gt;&gt;
  that book
&lt;&lt;/if&gt;&gt;
out from the stack...

?P
[[Continue|n2x Books Search 2]]

&lt;&lt;run
  $n_booksSearched = true;
  if ($n_wandExploded) {
    $n_pornSnuffed = true;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="587" name="n2x Books Search 2" tags="mt-ready" position="6975,300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

The full title of the book is
&quot;Losing My Virginity to the Class of 621&quot;,
and the barely-clothed wolves on the cover make it clear that it&#39;s
a &lt;em&gt;male&lt;/em&gt; wolf losing his virginity to other male wolves.

?P
Nero can&#39;t help flipping through some of the pages.
There&#39;s more text than pictures, but still plenty of pictures.
&lt;&lt;if $n_extraHorny&gt;&gt;
  Several of the poses of the &quot;virgin&quot; are distressingly arousing.
  The wolf&#39;s cock would like to study the book more,
&lt;&lt;else&gt;&gt;
  Some of the positions of the &quot;virgin&quot; seem anatomically unlikely.
  It&#39;s amusing, 
&lt;&lt;/if&gt;&gt;
but Nero reminds himself that this is not helping him escape.

?P
He closes the &quot;Class of 621&quot; and puts it back on the shelf.

?P
Perhaps the book with the plain brown cover will be more useful...

?P
[[Continue|n2x Books Search 3]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="588" name="n2x Books Search 3" tags="mt-ready" position="7100,300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

No. The plain brown book is also porn.
This one has pictures on every page, and very few words.
?P
&lt;&lt;if $n_extraHorny&gt;&gt;
  Nero lingers a bit on the pictures that display a cute ass.
  They&#39;re all male, of course, but right now his cock is
  not particularly choosy.
  ?P
  The book is awkward to hold, and it slips from his hand.
  When it hits the floor, Nero realizes
  that the book slipped because he was
  only holding it with one hand, and his
  other hand is occupied with stroking his cock.
  ?P
  This is not helpful! He kicks the book away and tells himself:
  No more distractions!
  ?P
  His cock suggests maybe another book in the stack &lt;em&gt;will&lt;/em&gt;
  be useful. But Nero is pretty sure that all of them will be pornographic.
  So he steps away.
  
&lt;&lt;else&gt;&gt;
  One page is clearly more... handled than the rest.
  Unsurprisingly, it depicts a muscular and well-endowed panther
  looming over a cringing, naked wolf.

  ?P
  Nero is amused that the strange and baffling panther has such
  predictable, ordinary tastes. But this is not helping the wolf escape.
  He puts the book back.
  ?P

  He checks another book in the stack, also porn, and decides
  not to check the rest. It&#39;s likely the entire stack is porn.
  Nero does not need more evidence of the panther&#39;s sexual desires.
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;run
  if ($n_extraHorny) {
    $n_pornKicked = true;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="589" name="n2x Cabinet Memory" tags="mt-ready" position="5825,425" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny n_tooClever&gt;&gt;

The first drawer appeared
to contain used underwear.
&lt;&lt;= $n_cabinetsSearched ? &quot;Nero again considers&quot; : &quot;The wolf considers&quot;&gt;&gt;
using one to remedy his nakedness,
but immediately reacts strongly against the idea.

?P
The next drawer had
an assortment of dildos of various shapes and sizes... still sticky.

?P
Nero decides (again)
that searching the
drawers of the
&lt;&lt;= $n_cabinetsMageSight ? &quot;uncolored&quot; : &quot;unpainted&quot;&gt;&gt;
cabinet is a waste of time.
This is clearly not a place where anyone would store a missing heirloom.

?P
$n_afterLookContinue
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="590" name="n2x Cabinet Search" tags="mt-ready" position="5825,175" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny n_tooClever&gt;&gt;

Most of the cabinets seem to be locked,
or lack an obvious way to open their drawers.
Ivex &lt;em&gt;did&lt;/em&gt; open one earlier,
so the drawers are not merely a decorative facade.

&lt;&lt;if $n_mageSight&gt;&gt;
  Nero tries to find the magic that keeps them closed,
  but the axiom knots he can see are unfamiliar or irrelevant.
&lt;&lt;else&gt;&gt;
  Nero quickly checks one cabinet for hidden latches,
  but he does not find any. It&#39;s likely to be held shut by magic anyway.
&lt;&lt;/if&gt;&gt;

?P
Well, there&#39;s one cabinet that&#39;s different from the rest.
The &lt;&lt;= $n_cabinetsMageSight ? &quot;uncolored&quot; : &quot;unpainted&quot;&gt;&gt;
cabinet has drawers

&lt;&lt;if $n_cabinetsLanced&gt;&gt;
  that were loose and easily slid open.
  Unfortunately, they also easily flew out the window.

  ?P
  Nero did not look closely at their contents before he
  threw them out the window, but he did not see anything that
  looked like the missing heirloom.
  And no sensible person would put something that
  valuable in a simple, unlocked drawer, would they?

  ?P
  Of course not. Ivex may be a strange panther, but he is no fool.
  The missing heirloom must be stored in some place that &lt;em&gt;is&lt;/em&gt; locked,
  perhaps one of the cabinets Nero is unable to open.

  ?P
  The wolf will have to try them again when he has more magic.

  ?P
  $n_afterAction

&lt;&lt;else&gt;&gt;
  that are loose, and they easily slide open.

  ?P
  The first drawer he opens appears to contain used underwear.
  The wolf considers using one to remedy his nakedness,
  but immediately reacts strongly against the idea.

  ?P
  The next drawer has an assortment of dildos of various shapes
  and sizes... apparently still sticky.
  Nero quickly closes that drawer again.

  ?P
  He hesitates before opening another drawer.
  The unlocked cabinet is clearly not a place where &lt;em&gt;anyone&lt;/em&gt;
  would store a missing heirloom. Searching it seems a waste of time.

  ?P
  If the heirloom &lt;em&gt;is&lt;/em&gt; in a cabinet,
  &lt;em&gt;surely&lt;/em&gt; it&#39;s in one of the locked ones.
  &lt;&lt;if $n_tooClever&gt;&gt;
    Perhaps he can &lt;em&gt;destroy&lt;/em&gt; them open?
    ?P
    [[Continue|n2x Lance Cabinets]]
  &lt;&lt;else&gt;&gt;
    Nero will have to try them again when he has more magic.
    ?P
    In the meantime, there are better things to do before Ivex returns.
    ?P
    $n_afterAction
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;run
  $n_cabinetsSearched = true;
  if (!$n_cabinetsLanced) {
    $n_cabinetsSearchedPlain = true;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="591" name="n2x Desk Search 1" tags="mt-ready" position="5825,750" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

The desk should have drawers. It certainly &lt;em&gt;looks&lt;/em&gt;
like it has room for drawers.
&lt;&lt;if $n_mageSight&gt;&gt;
  And the web of exotic energy has a shape that suggests
  the presence of magic items within the desk.
  Perhaps one of them is the missing heirloom?
&lt;&lt;else&gt;&gt;
  The missing heirloom might be inside.
&lt;&lt;/if&gt;&gt;
?P
But all of the desk&#39;s surfaces are a smooth and continuous pattern
of wood grain, with no apparent way of opening it.
?P
If opening the desk requires magic, then Nero is out of luck.
Still, there could be a mechanical trigger, like a hidden catch.
?P
Nero quickly runs his hands along the top edges of the desk.
Finding nothing, he then reaches under the surface of the desk,
above where someone&#39;s legs would be when they sat at it.
?P
He fingers brush against something that isn&#39;t just a
smooth surface.
It&#39;s not a bump. It&#39;s a change in texture, a slight irregularity,
almost a stickiness.
?P
[[Continue|n2x Desk Search 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="592" name="n2x Desk Search 2" tags="mt-ready" position="5950,750" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

Excited by his find, Nero crouches down to take a better look at
whatever mechanism
&lt;&lt;= $n_mageSight ? &quot;or magic&quot; : &quot;&quot;&gt;&gt;
is on the underside of the desk.
?P
When he does, he becomes overwhelmed by a
&lt;&lt;= $n_extraHorny ? &quot;musk&quot; : &quot;stench&quot;&gt;&gt;
&lt;&lt;if $n_wandExploded&gt;&gt;
  that he has experienced before.
&lt;&lt;else&gt;&gt;
  that has been in the background for some time.
&lt;&lt;/if&gt;&gt;
The whole room smells of Ivex,
and of his &lt;em&gt;maleness&lt;/em&gt;, which is a scent that was only slightly
masked by the distressing red candle. But underneath the desk, the
&lt;&lt;= $n_extraHorny ? &quot;aroma&quot; : &quot;musk&quot;&gt;&gt;
is pervasive and dominant,
and it&#39;s heavily laden with notes of sweat, sex, and cum.
?P
Nero has a
&lt;&lt;= $n_extraHorny ? &quot;sudden suspicion&quot; : &quot;horrible thought&quot;&gt;&gt;
of what that slightly-sticky spot on the underside
of the desk might be.
His erect cock
&lt;&lt;= $n_extraHorny ? &quot;is quite&quot; : &quot;unfortunately seems&quot;&gt;&gt;
excited by the thought,
and he can smell more of his own pre-cum leaking from the tip.
?P
&lt;&lt;if $n_extraHorny&gt;&gt;
  Nero gives his shaft a few quick strokes,
  but he forces himself to stop.
  He reluctantly stands up and tries to focus on something else.
&lt;&lt;else&gt;&gt;
  The wolf quickly stands up and tries to focus on something else.
&lt;&lt;/if&gt;&gt;
?P
$n_afterAction

&lt;&lt;run
  $n_deskSearched = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="593" name="n2x Desk Search Again" tags="mt-ready" position="5825,875" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

Nero is still bothered by the shape of the desk.
The top of it is supported by two large blocks that
look like they could be cabinets of some sort,
easily large enough to hold the missing heirloom.
But there does not seem to be any way to access the space inside.

?P
He already tried looking for a hidden catch under the desk.
The wolf&#39;s ears
&lt;&lt;if $n_extraHorny&gt;&gt;
  shiver, and his erect cock perks up even more,
&lt;&lt;else&gt;&gt;
  go flat, and his erect cock shivers,
&lt;&lt;/if&gt;&gt;
as he remembers the...
slightly-sticky spot he had found there.

?P
Perhaps there&#39;s a hidden catch on some &lt;em&gt;other&lt;/em&gt; surface?
Nero starts running his hand down one side,
but then he realizes that he could easily brush against
&lt;em&gt;another&lt;/em&gt; slightly-sticky spot elsewhere on the desk.
&lt;&lt;if $n_extraHorny&gt;&gt;
  His cock is excited. His mind is not.
&lt;&lt;/if&gt;&gt;

?P
The wolf forces himself to consider something else. The papers
&lt;&lt;= $n_deskCleared ? &quot;that were&quot; : &quot;&quot;&gt;&gt; on the desk.
&lt;&lt;if $n_deskBurned || $n_wandExploded&gt;&gt;
  There&#39;s one scrap that isn&#39;t entirely burnt.
  /* cspell:ignore cano */
  On that scrap is a doodle of a stick figure, labeled &quot;Cano&quot;.
  Nothing else is legible.
&lt;&lt;else&gt;&gt;
  Most of them appear to be overdue library notices,
  covered with crude stick figure doodles depicting
  what look like obscene sexual acts performed by
  a figure labeled &quot;Canon the Librarian&quot;.
&lt;&lt;/if&gt;&gt;
There&#39;s nothing useful here.
?P
Satisfied that he&#39;s searched the desk
&lt;&lt;if $n_deskCleared&gt;&gt;
  and its former objects
&lt;&lt;/if&gt;&gt;
as thoroughly as he can in
his current situation, Nero turns his attention to other things
in the room.
?P
$n_afterAction

&lt;&lt;run
  $n_deskSearchedAgain = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="594" name="n2x Knife Take" tags="mt-ready" position="6850,2425" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always $n_knifeTaken false&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;

&lt;&lt;if $n_mirrorTaken&gt;&gt;
  &lt;&lt;vi-always n_mageSight true&gt;&gt;
  &lt;&lt;vi-always n_tooClever true&gt;&gt;

  Nero transfers the mirror to his left hand and picks up the
  letter opener with his right. It&#39;s too bad that he doesn&#39;t
  have a satchel to hold the mirror, or a belt to
  hold the letter opener. His hands will have to be enough.
  ?P
  Holding the blade is awkward, but the wolf is feeling
  more confident of his escape. He now has
  power for his mage-sight, a sharp tool to aid his sharp teeth,
  and one of the finest minds in the world.
  Ivex will soon regret the day Nero
  fell into the perverted panther&#39;s trap!

&lt;&lt;else&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  &lt;&lt;vi-ignore n_tooClever&gt;&gt;

  Nero picks up the letter opener. Since he has no pockets
  or clothing at all right now, he&#39;s limited to carrying
  a few things in his hands.
  ?P
  The letter opener seems a good choice.
  Even if it isn&#39;t as sharp as his teeth,
  it will often be more convenient.
  &lt;&lt;if !$n_tooClever&gt;&gt;
    And it&#39;s already proven
    its use in cutting the leather bonds.
  &lt;&lt;/if&gt;&gt;
  It&#39;s quite possible the wolf will need to perform
  &lt;&lt;= $n_tooClever ? &quot;&quot; : &quot;more&quot;&gt;&gt;
  feats of physical separation in his quest for escape.
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;run
  delete $n_knifeOnFloor;
  $n_knifeTaken = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="595" name="n2x Kopic" tags="mt-ready" position="7750,2025" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight n_extraHorny n_tooClever&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

The Kopic Classic is an inexpensive wand that&#39;s a good choice for students,
rated medium conductance with high resilience.
It&#39;s a little larger than average, which is helpful
for the process of learning to wield a wand with precision.

?P
Precision is important, because the secret of Kopic wands is that
their activation does not require any magic from the user.
It simply takes a mechanical motion that&#39;s specific
to the model of the wand.
Once the motion is performed by a wielder,
the spell that&#39;s loaded into the wand will
be unleashed in the direction that it points.
?P
For that reason, Kopic strongly recommends their
wands to be bonded to their owner.
?P
Bonding unfortunately adds a 3-second delay to the wand&#39;s activation.
This delay has caused many injuries and more than a few deaths in battle,
so bonding is not usually done.
Anyone, even a mundane, can use almost any Kopic Classic,
if they can perform the correct activation motion.
?P
Kopic of course recognizes this fact, which is why all their wands
have a special page in their instructions
that speaks seriously of the need to keep the activation motion secret.
The page is handwritten in shimmering kraken ink on metamorphic vellum,
and it has a space where the new owner is instructed to sign
a pledge of secrecy.

?P
There&#39;s no magic to the pledge. Nothing but honor binds the user to
the vow. Still, the unmistakable elegance and expense of the page
underlines the seriousness and importance of the vow.
?P
As Kopic Classics are widely used, their activation motion is known
to every mage and mage-adjacent person,
and has even found its way into several popular children&#39;s rhymes.
?P
So it might seem that the pledge of secrecy serves little purpose,
and the enormously expensive page could just be omitted from the instructions.
?P
Kopic has instead steadily increased the elegance and expense of the
printing of the pledge.
They find the expense quite worth it,
since their devotion to the pledge&#39;s seriousness
allows them to disclaim liability
whenever any of their wands cause damage or injury
in the hands of an untrained user.
Which happens about twice a month. Per wand.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;&lt;kw-unlock-soon kn_Kopic&gt;&gt;
  &lt;&lt;return-before &quot;n2x Kopic&quot;&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;run
  $n_kopicVisited = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="596" name="n2x Lance Bookcases" tags="mt-ready" position="5825,1025" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

Nero pulls at the nearest bookcase with Nackle,
but it does not budge.

?P
&lt;&lt;if $n_booksLanced&gt;&gt;
  He shreds some more of its
  &lt;&lt;= $n_wandExploded ? &quot;scorched&quot; : &quot;&quot;&gt;&gt;
  books for the satisfaction of it,
  then tries several other bookcases.
  The books come loose easily,
  but none of the bookcases budge the slightest bit.

&lt;&lt;else&gt;&gt;
  The books in it &lt;em&gt;do&lt;/em&gt; budge.
  &lt;&lt;if $n_booksViewed &amp;&amp; !$n_booksSearched &amp;&amp; !$n_booksLanced&gt;&gt;
    Nero is a bit surprised.
    He had thought the duplicated books might be fake,
    perhaps a facade installed in the bookcases.
    But no, they appear to be real.
    ?P
  &lt;&lt;/if&gt;&gt;
  He empties two shelves of all their books,
  scattering the
  &lt;&lt;= $n_wandExploded ? &quot;scorched&quot; : &quot;&quot;&gt;&gt;
  books haphazardly,
  and then tries another bookcase.
  Those books he can pull out as well,
  but the bookcase also does not budge.
&lt;&lt;/if&gt;&gt;

?P
No matter how much force the wolf applies,
the bookcases do not move, or even scratch.
The bookcases seem less like furniture
and more like fixtures in the room,
and their wood-like material is clearly something other than wood.

?P
Well, even though the bookcases cannot be damaged,
&lt;&lt;= $n_booksLanced ? &quot;shredding&quot; : &quot;disorganizing&quot;&gt;&gt;
the color-sorted books is satisfying enough.
&lt;&lt;if $n_booksLanced&gt;&gt;
  Nero tears apart some more
  books from another shelf,
  and then sweeps all the new remnants into the
  shredded heap already on the floor.
&lt;&lt;else&gt;&gt;
  Nero pulls books out from another bookcase,
  and then throws all the books
  together into a disorderly heap on the floor.
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;set $n_bookcasesLanced = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="597" name="n2x Lance Books" tags="mt-ready" position="6850,550" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

&lt;&lt;if $n_bookcasesLanced&gt;&gt;
  Nero uses Nackle to lift up books from the
  &lt;&lt;= $n_bookPileBurned ? &quot;smoldering&quot; : &quot;&quot;&gt;&gt;
  pile on the floor,
  then shreds them in a whirlwind of violence.
  Normally he would be more respectful of books,
  but he sees no reason to care about the preservation of Ivex&#39;s collection,
  especially since so many of them are old editions of common magic textbooks.
  ?P
  The leather and paper make satisfying sounds as
  he rips the pages and tears the spines apart.
  Nero expects the panther&#39;s spine would not break so easily,
  but he is eager to try.
  ?P
  Destroying the books creates a chaotic vortex of shredded paper
  that dances in a beautiful way,
  but the beauty cannot last forever.
  Nero lets it settle, then sweeps up all the remnants back into
  an untidy pile, so that he does not slip on any as he walks about.

&lt;&lt;else&gt;&gt;
  &lt;&lt;if $n_booksSearched&gt;&gt;
    Nero uses Nackle to pull all the books off the nearest shelf.
    Tearing apart the paper and
    &lt;&lt;= $n_wandExploded ? &quot;scorched&quot; : &quot;&quot;&gt;&gt;
    leather creates satisfying sounds,
    and he wonders if tearing the panther apart will
    also create satisfying sounds.
  &lt;&lt;else&gt;&gt;
    Nero wonders if any of the duplicated books are actually books.
    He uses Nackle to pull
    &lt;&lt;= $n_wandExploded ? &quot;down the scorched&quot; : &quot;all the&quot;&gt;&gt;
    books from the nearest shelf,
    and he&#39;s a little surprised to see that all of them &lt;em&gt;are&lt;/em&gt;
    ordinary leather-bound books that make satisfying sounds
    when he rips them apart.
  &lt;&lt;/if&gt;&gt;
  ?P
  Normally the wolf would be more respectful of books,
  but he sees no reason to care about the preservation of Ivex&#39;s collection,
  especially since so many of them are old editions of common magic textbooks.
  ?P
  He pulls down the books from several more shelves and creates
  a whirlwind of violence.
  The chaotic vortex of book fragments is beautiful, but it cannot last
  forever. The wolf lets it settle, then sweeps all the remnants into
  an untidy pile, so that he does not slip on any as he walks about.
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;set $n_booksLanced = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="598" name="n2x Lance Cabinets" tags="mt-ready" position="5825,300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

Nero pulls at the nearest cabinet with Nackle, but it does not budge,
and the drawers do not budge either, even at Nackle&#39;s fullest strength.
How strange.

?P
He tries the drawer that Ivex opened earlier, but that one does not
move either, and the cabinet seems frustratingly fixed in place.

?P
The wolf quickly tries the drawers of every
&lt;&lt;if $n_cabinetsSearched&gt;&gt;
  cabinet other than the uncolored one he already searched.
  None
&lt;&lt;else&gt;&gt;
  cabinet. The drawers of the uncolored cabinet open easily,
  but none
&lt;&lt;/if&gt;&gt;
of the other drawers or cabinets yield at all
to any application of force that Nackle can provide.

?P
Nero thinks he could destroy the uncolored cabinet, but he&#39;s wary of
&lt;&lt;= $n_wandExploded ? &quot;further disruption to&quot; : &quot;disturbing&quot;&gt;&gt;
the installation of Nackle that&#39;s giving him the destructive
power in the first place. So he settles for pulling out all the drawers
and throwing them, with all their contents, out the window.

?P
$n_afterAction

&lt;&lt;set $n_cabinetsLanced = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="599" name="n2x Lance Coins" tags="mt-ready" position="6350,1675" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

Nero uses Nackle to pick up the obscene
&lt;&lt;= $n_wandExploded ? &quot;jumble&quot; : &quot;stack&quot;&gt;&gt; of coins,
then throws them at the broken window.
But before they all fly out,
he has a better thought, and pulls most of them back.

?P
The coins seem to be silver or tin, or maybe an alloy.
Can he &lt;em&gt;bend&lt;/em&gt; them?
He tries. Nackle succeeds.

?P
Nero twists and stretches the coins,
threads one into the hole of another,
and then crushes them all together,
making the lewd figures on the coins
seem intertwined in a demonic orgy.

?P
&lt;&lt;if $n_penguinFlown&gt;&gt;
  The wolf then picks out the
  &lt;&lt;if $n_booksSearched&gt;&gt;
    thickest book of porn from the
    &lt;&lt;= $n_pornLanced ? &quot;neat little&quot; : &quot;untidy&quot;&gt;&gt;
    stack by the desk.
  &lt;&lt;else&gt;&gt;
    the most expensive-looking book that&#39;s still on the shelves.
  &lt;&lt;/if&gt;&gt;
  He squeezes the mangled mess of coins to be thinner than the book.
  Then he carefully carves out a hollow in the book&#39;s pages.
  The coins go in the book, and the book goes back on the shelf,
  ready for the panther to discover sometime in the future.

&lt;&lt;else&gt;&gt;
  The wolf then shoves the tangled mess
  of coins into the beak of the
  &lt;&lt;= $n_wandExploded ? &quot;flaming&quot; : &quot;&quot;&gt;&gt;
  penguin, where they sit like an uncomfortable metal
  &lt;&lt;if $n_penguinCoinDropped&gt;&gt;
    gag.
  &lt;&lt;else&gt;&gt;
    gag, holding the penguin&#39;s own coin in place.
  &lt;&lt;/if&gt;&gt;
  He then forms some of the metal
  into wires that bind the mangled coins to the penguin&#39;s head,
  so that they &lt;em&gt;will not fall out.&lt;/em&gt;
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;run
  $n_coinsLanced = true;
  if ($n_penguinFlown) {
    delete $n_dimBooks;
    if ($n_booksSearched) {
      $n_coinsInPorn = true;
    } else {
      $n_coinsInPorn = true;
    }
  } else {
    delete $n_dimPenguin;
  }
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="600" name="n2x Lance Cross" tags="mt-ready" position="6475,2100" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

Nero lifts the largest
piece of the
&lt;&lt;= $n_crossPartsBurned ? &quot;burning&quot; : &quot;&quot;&gt;&gt;
cross with Nackle,
then tears apart the arms with a single, satisfying snap.
It&#39;s much like pulling apart a wishbone,
and Nero wishes a similar fate for the panther.

?P
The wolf then breaks apart the remaining pieces so that they&#39;re small
enough to throw out the window, but he doesn&#39;t stop there.
He smashes and shatters the
&lt;&lt;= $n_crossPartsBurned ? &quot;charred&quot; : &quot;wooden&quot;&gt;&gt;
fragments,
throws them against the wall and floor to pulverize them,
until all of it is reduced to
&lt;&lt;= $n_crossPartsBurned ? &quot;burning&quot; : &quot;splintered&quot;&gt;&gt;
bits of wood that are no larger than fingers.

?P
Whatever process the panther used to obtain a large bondage cross
carved from a massive, single piece of wood,
it will never be a single piece of wood again.

?P
Nero sweeps the
&lt;&lt;= $n_crossPartsBurned ? &quot;burning&quot; : &quot;wood&quot;&gt;&gt;
scraps and shredded leather bindings into a corner.
He then &lt;em&gt;pisses&lt;/em&gt;
on it to add his signature to
his work of destructive art.

?P
$n_afterAction

&lt;&lt;set $n_crossLanced = true&gt;&gt;
&lt;&lt;set $n_crossPartsBurned &amp;&amp; ($n_crossBurnLanced = true)&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="601" name="n2x Lance Desk" tags="mt-ready" position="5825,625" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

Nero focuses his anger on the panther&#39;s grandiose desk.

&lt;&lt;if $n_wandExploded&gt;&gt;
  The clutter was blasted off by the wand&#39;s destruction,
  but the desk itself seems unharmed by that arcane explosion.
  Nackle cannot exert &lt;em&gt;more&lt;/em&gt; force,
  but perhaps the desk will yield to
  a more &lt;em&gt;precise&lt;/em&gt; force?
&lt;&lt;else&gt;&gt;
  &lt;&lt;if $n_mirrorTaken&gt;&gt;
    The wolf uses Nackle to sweep everything
  &lt;&lt;else&gt;&gt;
    The wolf uses Nackle to safely bring the magic mirror to his hand,
    and then sweeps everything else
  &lt;&lt;/if&gt;&gt;
  off the top. Papers and writing tools scatter across the floor,
  and he shoves them all off to a corner where
  they will not make him trip or slip.
&lt;&lt;/if&gt;&gt;

?P
He tries to split the surface of the desk, but it does not break or scratch.
No matter what force Nero applies, the desk does not change,
does not even move from the spot it&#39;s placed in the study.
Apparently,
&lt;&lt;if $n_bookcasesLanced || $n_cabinetsLanced&gt;&gt;
  the desk is similar to the bookcases and cabinets. It&#39;s
&lt;&lt;elseif $n_bookcasesLanced&gt;&gt;
  the desk is similar to the bookcases in this room. It&#39;s
&lt;&lt;elseif $n_cabinetsLanced&gt;&gt;
  the desk is similar to the cabinets in this room. It&#39;s
&lt;&lt;else&gt;&gt;
  it&#39;s
&lt;&lt;/if&gt;&gt;
less a piece of furniture and more some sort of fixture in the room.

?P
Well, the &lt;em&gt;chair&lt;/em&gt; is not a fixture.
Nero smashes the breakable chair against the unbreakable desk,
and then throws all the pieces of chair out the window.

?P
$n_afterAction

&lt;&lt;run
  $n_deskCleared = true;
  $n_deskLanced = true;
  $n_mirrorTaken = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="602" name="n2x Lance Globe" tags="mt-ready" position="6350,1300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

Nero uses Nackle to lift the
&lt;&lt;= $n_globeBroken ? &quot;broken&quot; : &quot;&quot;&gt;&gt;
snow globe into the air.
&lt;&lt;if $n_deskLanced &amp;&amp; !$n_globeBroken&gt;&gt;
  It does not seem damaged by its fall from the desk.
&lt;&lt;/if&gt;&gt;
He considers
&lt;&lt;= $n_globeBroken ? &quot;pulverizing&quot; : &quot;smashing&quot;&gt;&gt;
it and throwing it out the window.
But that seems too simple a fate for such an aggravating object.

?P
Never mind. He doesn&#39;t care. He bashes the globe against the wall,
pulls apart the limbs and cock of the dragon that was in it,
and throws &lt;em&gt;most&lt;/em&gt; of
the snow globe out the window.

?P
The only part he keeps is the pink pillar that says &quot;CARPE DICK&quot;.
He carefully slices it apart between the &quot;DI&quot; and the &quot;CK&quot;,
and then places both pieces neatly
&lt;&lt;if $n_deskHasBill&gt;&gt;
  on top of the &quot;Bill For Home Renovation&quot; on the desk.
&lt;&lt;elseif $n_deskCleared&gt;&gt;
  in the middle of the empty desk.
&lt;&lt;else&gt;&gt;
  in an area that he clears in middle of the cluttered desk.
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;run
  delete $n_dimDesk;
  $n_deskHasPillar = true;
  $n_globeLanced = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="603" name="n2x Lance Map" tags="mt-ready" position="6350,475" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

Nero does not understand how the image of the map is created,
so he does not know how to destroy it.
But he tries using Nackle to smash the wall surface apart.
He&#39;s able to smear some of the writing,
but the wall does not break or crack,
and the map image does not change at all.

?P
If he can&#39;t &lt;em&gt;break&lt;/em&gt; it, he can at least &lt;em&gt;deface&lt;/em&gt; it.
He picks up a bottle of ink from the
&lt;&lt;if $n_clutterInCorner&gt;&gt;
  clutter of debris in the corner, then
&lt;&lt;elseif $n_deskCleared&gt;&gt;
  scattered debris from the desk, then
&lt;&lt;else&gt;&gt;
  desk and
&lt;&lt;/if&gt;&gt;
smashes the bottle into the map,
taking great care to spread the ink on top of all of the
writing that&#39;s already there.

?P
Not content with just crude vandalism,
he uses some ink to draw a stick figure
that has a sword stabbing its crotch.
The finishing touch is a label, &quot;Ivex the Impotent&quot;.

?P
And then the wolf tears down the idiotic, ornate
frame that&#39;s holding nothing on the wall.
The &lt;&lt;= $n_wandExploded ? &quot;burning&quot; : &quot;&quot;&gt;&gt;
wooden frame breaks apart easily,
and the parts go easily out the window.

?P
$n_afterAction

&lt;&lt;set $n_mapDefaced = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="604" name="n2x Lance Painting" tags="mt-ready" position="6850,1175" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

&lt;&lt;if $n_paintingKnown&gt;&gt;
  Ivy, the panther&#39;s mother, is clearly important to Ivex.
&lt;&lt;else&gt;&gt;
  The painting may not be useful to Nero,
  but whoever the subject is,
  she&#39;s clearly important to Ivex.
&lt;&lt;/if&gt;&gt;

?P
Nero hesitates a moment
&lt;&lt;if $n_paintingBlasted&gt;&gt;
  before committing further acts of disrespect on
&lt;&lt;else&gt;&gt;
  at the thought of disrespecting
&lt;&lt;/if&gt;&gt;
someone who might be an innocent bystander.
But this will not hurt &lt;em&gt;her&lt;/em&gt;. Probably.

?P
The wolf slashes
&lt;&lt;= $n_paintingBlasted ? &quot;more&quot; : &quot;great&quot;&gt;&gt;
gashes in the painting&#39;s canvas,
as if he were ripping it with his own claws,
as if his claws were much larger and stronger than they are.

?P
He fractures the painting&#39;s
&lt;&lt;= $n_paintingBlasted ? &quot;smoldering&quot; : &quot;&quot;&gt;&gt;
frame and sends one corner of it out the window.
He cuts out the head from the portrait and also sends &lt;em&gt;that&lt;/em&gt;
out the window.

?P
The wolf pauses to take a moment to appreciate his work of art.
He makes a few more slashes to balance the composition.
Then he pulls the painting down and throws it all into a heap in
a corner of the room.

?P
$n_afterAction

&lt;&lt;set $n_paintingLanced = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="605" name="n2x Lance Penguin No" tags="mt-ready" position="6475,850" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

No matter how much Nero wishes to hurt Ivex,
no matter how much the panther might feel
&lt;em&gt;devastated&lt;/em&gt; by
&lt;&lt;= $n_wandExploded ? &quot;further&quot; : &quot;the&quot;&gt;&gt;
desecration of the corpse
of his beloved familiar,
Hunter Too is an innocent creature and deserves respect.
Even if it &lt;em&gt;was&lt;/em&gt; evil.

?P
Nero releases Nackle&#39;s grasp of the penguin&#39;s wings.
&lt;&lt;if $n_wandExploded&gt;&gt;
  The wolf offers a respectful salute to the dead,
  burning bird.
&lt;&lt;else&gt;&gt;
  The wolf uses his paw to pat the dead bird gently
  on the head.
&lt;&lt;/if&gt;&gt;

?P
And then he throws the
&lt;&lt;= $n_wandExploded ? &quot;flaming&quot; : &quot;&quot;&gt;&gt;
penguin out the window, saying,
&quot;Fly! Be free from your horrible master!&quot;

?P
$n_afterAction

&lt;&lt;set $n_penguinFlown = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="606" name="n2x Lance Penguin Yes" tags="mt-ready" position="6475,975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

&lt;&lt;set _madeChaos =
  $n_bookcasesLanced ||
  $n_booksLanced ||
  $n_cabinetsLanced ||
  /* not coins */
  $n_crossLanced ||
  $n_deskCleared ||
  /* not globe */
  $n_mapDefaced ||
  $n_paintingLanced ||
  /* not penguin */
  /* not porn */
  $n_wandExploded
&gt;&gt;

Nero uses Nackle to tear off the penguin&#39;s useless wings
and fling them out the window.

?P
It&#39;s certainly &lt;em&gt;possible&lt;/em&gt; that the penguin&#39;s spirit is lingering
in some place that the wolf cannot see.
And the spirit &lt;em&gt;could&lt;/em&gt; get angry at this deliberate
mutilation of its corpse.
It may even try to afflict the wolf with some curse.
But Nero is confident that his magic is sufficient
to defeat a &lt;em&gt;penguin&lt;/em&gt;.

?P
Besides, the illusion on the penguin still does show its wings.
The absence of actual wings does not hinder the penguin&#39;s purpose
while dead, any more than the lack of flight was a hindrance
to its purpose while alive.

?P
&lt;&lt;if $n_wandExploded&gt;&gt;
  The fire will eventually die out, and the penguin will then
  seem normal again. Other than the mound of ash beneath it.
  ?P
  Nero sweeps away the ash that&#39;s accumulated so far.
  He then situates the penguin exactly where it was before,
  where it might appear whole and undisturbed.

&lt;&lt;else&gt;&gt;
  Nero finds some sealing wax
  &lt;&lt;= $n_deskCleared ? &quot;that was on&quot; : &quot;from&quot;&gt;&gt;
  the desk and uses it to close
  the holes of the penguin&#39;s torn wing sockets.
  He then sweeps away the wood shavings that have fallen out.
  ?P
  Once all evidence of the penguin&#39;s mutilation is gone,
  the wolf situates the penguin exactly where it was before,
  apparently whole and undisturbed.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_coinsLanced&gt;&gt;
  Undisturbed except for the mangled-metal gag made from
  unspeakably lewd coins, of course.
&lt;&lt;/if&gt;&gt;

?P
The wolf hopes that Ivex will return to his
&lt;&lt;= _madeChaos ? &quot;wrecked&quot; : &quot;&quot;&gt;&gt;
study without immediately noticing the
&lt;&lt;= $n_wandExploded ? &quot;destruction&quot; : &quot;condition&quot;&gt;&gt;
of his penguin.
The penguin will be a trap, waiting to hurt the panther
when he least expects it.

?P
$n_afterAction

&lt;&lt;set $n_penguinTorn = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="607" name="n2x Lance Penguin" tags="mt-ready" position="6350,850" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

Nero uses Nackle to grab the ridiculous penguin by its
&lt;&lt;= $n_wandExploded ? &quot;burning&quot; : &quot;&quot;&gt;&gt;
wings, but then pauses.

?P
If Ivex was telling the truth about the day he acquired the penguin,
then the penguin may have been possessed by
a malignant spirit. Or maybe it was
&lt;span class=nobr&gt;simply&amp;mdash;Nero&lt;/span&gt;
does not like to use such a mystical term,
but it seems the correct word
&lt;span class=nobr&gt;here&amp;mdash;maybe&lt;/span&gt;
it was simply &lt;em&gt;evil.&lt;/em&gt;

?P
But the penguin is an innocent party in Nero&#39;s ordeal. Probably.
And the wolf hesitates to
&lt;&lt;if $n_wandExploded&gt;&gt;
  commit further desecration on
&lt;&lt;else&gt;&gt;
  disrespect
&lt;&lt;/if&gt;&gt;
the taxidermied corpse,
even if there may be reasons the penguin might deserve it.

?P
&lt;ul class=actions&gt;
  &lt;li&gt;[[Tear off the penguin&#39;s wings.|n2x Lance Penguin Yes]]&lt;/li&gt;
  &lt;li&gt;[[Release the strange penguin.|n2x Lance Penguin No]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;set $n_penguinLanced = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="608" name="n2x Lance Porn" tags="mt-ready" position="6850,675" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

&lt;&lt;if $n_wandExploded &amp;&amp; !$n_pornSnuffed&gt;&gt;
  A few flames are slowing eating the edges of Ivex&#39;s stack of
  pornographic books. Nero uses Nackle to stop the burning.
  He wants to apply more &lt;em&gt;deliberate&lt;/em&gt; damage to the porn.
  ?P
  The wolf
&lt;&lt;elseif $n_wandExploded&gt;&gt;
  The edges are singed, but Ivex&#39;s stack of
  pornography is still mostly intact. Nero
&lt;&lt;else&gt;&gt;
  Nero
&lt;&lt;/if&gt;&gt;

picks up the &quot;Class of 621&quot; and rips it in half the hard way,
separating the top from the bottom.
He laughs at what this feat of strength must look like
to someone without mage-sight.
It might also be startling to someone who &lt;em&gt;can&lt;/em&gt; see the magic,
since the wolf is using &lt;em&gt;both&lt;/em&gt; his hands,
which means he is not touching the matrix of Nackle
that pulled the book apart.

?P
He puts the top half of 621 back on the shelf and throws the bottom
half out the window.

?P
The next book in his sights is the one with the plain brown cover.
He prepares to tear it apart as well,
but he suddenly has a better thought.

?P
Nackle can &lt;em&gt;also&lt;/em&gt; be used in small, precise ways.
Nero rapidly flips through each page of the book and
slices out the faces and sexual organs from each page,
shredding &lt;em&gt;those&lt;/em&gt; out the window.

?P
He does that with every book in the stack,
&lt;&lt;if $n_coinsInPorn&gt;&gt;
  including the one that holds the orgy of mangled coins,
&lt;&lt;/if&gt;&gt;
and then puts them all back in place,
where they will seem unharmed until someone
opens them to look inside.

?P
Nero giggles at the thought of how Ivex might react when
he discovers the mutilation.
The wolf wishes he had some way to watch the panther when it happens.

?P
$n_afterAction

&lt;&lt;set $n_pornLanced = true&gt;&gt;
&lt;&lt;set $n_wandExploded &amp;&amp; ($n_pornSnuffed = true)&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="609" name="n2x Lance Wand Inside 1" tags="mt-ready" position="7375,2375" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

Nero &lt;em&gt;can&lt;/em&gt; break the wand inside the room,
if he has a place to shelter from the blast.

?P
He considers the desk.
&lt;&lt;if $n_deskLanced&gt;&gt;
  It was quite resistent to damage before.
  He strikes it again a few times with Nackle, just to be sure.
&lt;&lt;else&gt;&gt;
  It has the appearance of wood, but it clearly isn&#39;t.
  &lt;&lt;if $n_bookcasesLanced&gt;&gt;
    Perhaps it&#39;s the same impervious material as the bookcases?
  &lt;&lt;elseif $n_cabinetsLanced&gt;&gt;
    Perhaps it&#39;s the same impervious material as the cabinets?
  &lt;&lt;/if&gt;&gt;
  The wolf strikes at the desk with his hand and claws.
  No effect. He strikes harder with Nackle.
  The material does not yield to even the strongest
  force he can apply.
&lt;&lt;/if&gt;&gt;

?P
Resistance to physical and telekinetic force is reassuring.
But that is not proof that the desk is impervious to fire
as well. It &lt;em&gt;could&lt;/em&gt; be as flammable as wood,
or even &lt;em&gt;more&lt;/em&gt; flammable.

?P
Surely, Ivex would not light a candle there if the desk
&lt;em&gt;were&lt;/em&gt; highly flammable?

?P
Well, Nero knows a way to find out.

?P
[[Continue|n2x Lance Wand Inside 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="610" name="n2x Lance Wand Inside 2" tags="mt-ready" position="7375,2500" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

&lt;&lt;set _wand = $n_wandUsed ? &quot;distressing wand&quot; : &quot;bare wand&quot;&gt;&gt;

He looks around to see if there&#39;s anything he wants to protect,
other than himself.

?P
&lt;&lt;if $n_mirrorTaken&gt;&gt;
  He&#39;s already holding the magic mirror.
&lt;&lt;else&gt;&gt;
  The magic mirror is his source of magic energy.
  That seems important. He picks it up.
&lt;&lt;/if&gt;&gt;

?P
If the missing heirloom is in this room, it&#39;s probably inside
something like the desk, so it will be as protected as he is. Probably.

?P
The bottle with Nackle will likely be damaged by the blast.
He can&#39;t move the bottle somewhere safe without
disrupting the spell.
Nero piles some books around the bottle,
but it&#39;s weak protection.
The bottle might get destroyed anyway.
Well, there&#39;s nothing more he wants to do with Nackle.
And if Ivex &lt;em&gt;does&lt;/em&gt; return, the wolf just has to be quick.
Mages have few defenses against jaws clamping on their neck.

?P
Nero looks around once more. He&#39;s satisfied that he&#39;s ready.

?P
&lt;&lt;if $n_wandLanceWait&gt;&gt;
  He uses Nackle to pick up the _wand from the bookcase again.
  He floats it
&lt;&lt;else&gt;&gt;
  He floats the _wand
&lt;&lt;/if&gt;&gt;
through the air to a position near the
&lt;&lt;if $n_crossLanced&gt;&gt;
  destroyed cross,
&lt;&lt;else&gt;&gt;
  broken cross,
&lt;&lt;/if&gt;&gt;
as far away from the desk as he can.

?P
&lt;&lt;if $n_deskSearched&gt;&gt;
  The next step is a bit disgusting, but it will only last a moment.
  He crouches down and enters the reeking cubbyhole of the desk,
  which will shelter him from the blast.
&lt;&lt;else&gt;&gt;
  He moves to the cubbyhole of the desk,
  which will shelter him from the blast.
  Nero hesitates a moment before entering.
  Crouching down makes it obvious that the space is decorated with
  reeking remnants of the panther&#39;s sexual desires.
  But the wolf will only need to stay there for a moment.
&lt;&lt;/if&gt;&gt;

?P
Nero holds his breath and covers his ears.
He prepares to snap the wand in half...

?P
[[Continue|n2x Lance Wand Inside 3]]

&lt;&lt;run
  $n_mirrorTaken = true;
  $n_wandLanced = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="611" name="n2x Lance Wand Inside 3" tags="mt-ready" position="7375,2625" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

The &lt;em&gt;snap&lt;/em&gt; of the wand becomes an explosion of arcane energy
that fills the room with deafening noise and blinding light.
The blast only lasts a moment. The effects persist much longer.

?P
Nero leaves the protection of the desk
and returns to a room of hazy chaos.

?P
The air smells of smoke mixed with the aftermath of a storm.
The exotic energies in the room are all disordered by the blast.
Several magics are gone entirely.
Some are slowly shifting back to their normal shape.
But most of the remaining axiom knots are trembling
and shaking themselves apart.

?P
&lt;&lt;if $n_clutterInCorner&gt;&gt;
  The papers in the corner are now charred remnants and ash.
&lt;&lt;else&gt;&gt;
  &lt;&lt;vi-always n_deskCleared false&gt;&gt;
  The papers on the desk are blown off and scattered
  into charred remnants and ash.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_booksLanced&gt;&gt;
  The shredded books are a smoky ruin,
  and a few books in the bookcases
&lt;&lt;elseif $n_bookcasesLanced&gt;&gt;
  The pile of books is a smoldering ruin,
  and a few books in the bookcases
&lt;&lt;else&gt;&gt;
  Many of the books in the bookcases are scorched,
  and a few
&lt;&lt;/if&gt;&gt;
have flames licking their spines.

&lt;&lt;if $n_paintingLanced&gt;&gt;
  The ravaged painting is a passionate flame that&#39;s strong but
  quickly dying.
&lt;&lt;else&gt;&gt;
  The painting on the wall is torn from the explosion.
  Its ragged edges are glowing and curling to black.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_crossLanced&gt;&gt;
  And the heap of wood scraps that used to be the cross
  that held Nero bound to it...
  All of it is now burning and blazing bright.
&lt;&lt;else&gt;&gt;
  And the pieces of wood that used to be the cross
  that held Nero bound to it...
  All of it is now burning and blazing bright.
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;run
  $n_wandExploded = true;
  MT.neroResetObjectDim();

  /* bookcases mostly burn the same */

  if ($n_bookcasesLanced &amp;&amp; !$n_booksLanced) $n_bookPileBurned = true;
  if ($n_booksLanced) $n_bookShredsBurned = true;

  /* bottle always burns the same */

  /* cabinets always burn the same */

  /* coins never burn */

  if (!$n_crossLanced) $n_crossPartsBurned = true;
  if ($n_crossLanced) $n_crossScrapsBurned = true;

  if ($n_clutterInCorner) $n_clutterCornerBurned = true;
  delete $n_deskCleared;
  delete $n_deskHasPillar;

  if (!$n_globeLanced) $n_globeBroken = true;

  /* map burns the same. map frame is either burning or gone */

  if (!$n_paintingLanced) $n_paintingBlasted = true;
  if ($n_paintingLanced) $n_paintingBurned = true;
  if ($n_paintingHasBill) {
    $n_paintingBillGone = true;
    delete $n_paintingHasBill;
  }

  /* porn always burns the same */
&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="612" name="n2x Lance Wand Outside 1" tags="mt-ready" position="7250,2375" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

&lt;&lt;if $n_wandLanceWait&gt;&gt;
  Nero use Nackle to pick up the wand from the bookcase again.
  He floats it
&lt;&lt;else&gt;&gt;
  Nero floats the wand
&lt;&lt;/if&gt;&gt;
through the air, to a position outside the window.
He moves to one side to avoid any blast that might
enter the room.

?P
The wolf prepares to snap the
&lt;&lt;= $n_wandUsed ? &quot;distressing&quot; : &quot;&quot;&gt;&gt;
wand in half...

?P
[[Continue|n2x Lance Wand Outside 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="613" name="n2x Lance Wand Outside 2" tags="mt-ready" position="7250,2500" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

The wand slips out of Nackle&#39;s grasp.
?P
Nero curses himself for forgetting that Nackle&#39;s power and
precision decreases rapidly outside the bounds of the room
where it&#39;s installed.
He rushes to the window in time to see the wand
falling down the side of
&lt;&lt;if $n_towerKnown&gt;&gt;
  the tall tower he&#39;s in.
&lt;&lt;else&gt;&gt;
  the building he&#39;s in, which appears to be an extremely tall tower.
&lt;&lt;/if&gt;&gt;
The wand continues to tumble lazily
through the air as it falls, then
disappears through the layer of clouds obscuring
the ground below.

?P
Well, the wolf might not have &lt;em&gt;destroyed&lt;/em&gt; the wand,
but he did at least separate its parts.

?P
And he &lt;em&gt;did&lt;/em&gt; make the wand &lt;em&gt;disappear&lt;/em&gt;.
Nero bows to an imaginary audience,
and pauses for imaginary applause.

?P
$n_afterAction

&lt;&lt;run
  $n_towerKnown = true;
  $n_wandLanced = true;
  $n_wandLost = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="614" name="n2x Lance Wand Wait" tags="mt-ready" position="7500,2375" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

Nero &lt;em&gt;does&lt;/em&gt; want to destroy the
&lt;&lt;if $n_wandUsed&gt;&gt;
  dangerously alluring
&lt;&lt;/if&gt;&gt;
wand, but there are
some other things he wants to destroy &lt;em&gt;first&lt;/em&gt;.

?P
He sets the wand (without its squishy attachment)
back on the bookshelf, for now.

?P
$n_afterAction

&lt;&lt;run
  $n_wandLanceWait = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="615" name="n2x Lance Wand" tags="mt-ready" position="7450,2225" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;

Nero uses Nackle to pick up
&lt;&lt;if $n_wandUsed&gt;&gt;
  Ivex&#39;s incredibly alluring, but potentially dangerous
  &lt;em&gt;Fuck Toy 9000&lt;/em&gt;.
  ?P
&lt;&lt;elseif $n_wandAsked&gt;&gt;
  Ivex&#39;s... &lt;em&gt;Fuck Toy 9000&lt;/em&gt;.
&lt;&lt;else&gt;&gt;
  the wand and its strange attachment.
&lt;&lt;/if&gt;&gt;

The wolf is cautious about breaking the wand,
but he does want to remove the
&lt;&lt;= $n_wandUsed ? &quot;distressing&quot; : $n_wandAsked ? &quot;disturbing&quot; : &quot;absurd&quot;&gt;&gt;
attachment.
It comes off fairly easily,
with a squishy &lt;em&gt;pop&lt;/em&gt; sound.

?P
He tries to tear the
squishy tube apart, tries to cut it.
But it yields to any pressure he applies,
and it stretches as much as he can pull it,
all without breaking.
No matter what he does,
the tube always returns to its original shape
without any visible damage.

?P
Nero amuses himself by using the squishy elastic force to
shoot the tube against the walls a few times.
He then shoots it one last time out the window.
It flies out far before curving down out of view.
Perhaps when it lands,
it will cause some traveler to build a shrine
to the strange god who rains strange, squishy gifts from
the skies above.

?P
&lt;&lt;if $n_wandUsed&gt;&gt;
  He hopes that the tube does not have much
  dangerous effect &lt;em&gt;without&lt;/em&gt; the wand.
  It&#39;s a disturbing thought, but merely a freakish sideshow.
&lt;&lt;else&gt;&gt;
  It&#39;s an amusing thought, but merely a pleasant sideshow.
&lt;&lt;/if&gt;&gt;
Nero shifts his attention
to the main attraction, the wand itself.

?P
He probably &lt;em&gt;can&lt;/em&gt; break it, with the help of Nackle.
And Nero is confident,
mostly confident, that he can do it without harming himself.
It isn&#39;t &lt;em&gt;dangerous&lt;/em&gt; to break the wand, not exactly.
But the release of the wand&#39;s energy is likely to have...
explosive effects.

?P
&lt;ul class=actions&gt;
  &lt;li&gt;[[Break the wand outside the window.|n2x Lance Wand Outside 1]]&lt;/li&gt;
  &lt;li&gt;[[Break the wand inside the room.|n2x Lance Wand Inside 1]]&lt;/li&gt;
  &lt;li&gt;[[Set the wand aside for now.|n2x Lance Wand Wait]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;set $n_wandTubeShot = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="616" name="n2x Mirror Free" tags="mt-ready inclusion" position="7525,825" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleLit false&gt;&gt;
&lt;&lt;vi-always n_free true&gt;&gt;

&lt;&lt;if $n_mirrorBroken&gt;&gt;
  &lt;&lt;vi-always n_mageSight false&gt;&gt;

  On the floor beside the desk is a magic mirror,
  about the size of a playing card.
  It&#39;s unfortunately broken now.
  ?P
  Without mage-sight, the mirror&#39;s frame looks like
  ordinary wood that was once a perfect rectangle
  with rounded corners, but one of the corners is now warped
  in a shape that&#39;s unlikely for wood.
  Nero is amused that the
  denting of the mage-silver would make such an absurdity
  out of the illusion of wood.
  ?P
  The glass of the mirror is shattered, but the glass is
  ordinary and unimportant. The real tragedy is
  the pyron node beneath the glass, which is now cracked in two.

  &lt;&lt;if MP_contact === $n_magicPhaseReached&gt;&gt;
    ?P
    The mirror&#39;s reflection was helpful for destroying the ?crystals.
    But the wolf was
    &lt;em&gt;so close&lt;/em&gt; to unlocking the real magic of the
    mirror. And the loss of mage-sight will make
    it harder to navigate the traps of this place.
    ?P
    He wonders again if there was some way he could have
    prevented the mirror from breaking.
    But regrets are a fool&#39;s game.
    What&#39;s happened is done and cannot be changed.

  &lt;&lt;else&gt;&gt;
    Not that the Sprite in the pyron node was at all helpful.
    Nero&#39;s regret is the loss of the mirror as a
    power source for his mage-sight.
    ?P
    Still, the wolf is grateful that the mirror&#39;s reflection
    helped him to destroy the ?crystals.
    It&#39;s fulfilled a noble enough purpose.
    Nero offers a mental salute
    in tribute to the simple service of the otherwise useless Sprite.
  &lt;&lt;/if&gt;&gt;
  
&lt;&lt;elseif $n_mirrorTapped&gt;&gt;
  &lt;&lt;vi-always n_mageSight true&gt;&gt;

  The magic mirror
  &lt;&lt;= $n_mirrorTaken ? &quot;in Nero&#39;s hand&quot; : &quot;on the desk&quot;&gt;&gt;
  is shaped like a rectangle
  with rounded corners. The frame is mage-silver,
  and for some reason it has an illusion of wood on it.
  ?P
  Nero is grateful that the mirror&#39;s reflection was helpful
  for destroying the ?crystals,
  but he&#39;s more excited to have access to the mirror&#39;s magic.
  The Sprite seems of little use beyond
  this room, but the mirror&#39;s ability to power his mage-sight
  should be quite helpful anywhere in Ivex&#39;s domain.
  ?P
  The mirror is about the size of a playing card.
  It&#39;s a little awkward for the wolf to
  carry in his currently unclothed state, but
  &lt;&lt;if $n_mirrorTaken&gt;&gt;
    it&#39;s probably a good idea to keep a hold of it anyway.
  &lt;&lt;else&gt;&gt;
    it&#39;s probably worth taking with him.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;else&gt;&gt;
  &lt;&lt;vi-always n_mageSight false&gt;&gt;

  Propped up against the
  &lt;&lt;mt-seen $n_dimGlobe&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Globe&quot;&gt;&gt;?globe&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  amid the burnt ruins on Ivex&#39;s desk, there&#39;s a
  &lt;&lt;= $n_mirrorMagicKnown ? &quot;magic&quot; : &quot;&quot;&gt;&gt;
  mirror that&#39;s about the size of a playing card.

  &lt;&lt;if $n_mirrorMagicKnown&gt;&gt;
    The frame has the appearance of plain dark wood,
    shaped like a rectangle with rounded corners,
    but Nero remembers his mage-sight showing
    mage-silver beneath the illusion of wood.
  &lt;&lt;else&gt;&gt;
    The frame is plain dark wood and shaped like a rectangle
    with rounded corners.
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;if $n_mirrorWasTapped&gt;&gt;
    The wolf regrets the loss of mage-sight.
    Tapping into the mirror was a useful source of energy,
    even if the mirror&#39;s Sprite was remarkably useless.
    Perhaps there was some way he could have kept that
    tap alive?
    ?P
    Well, no matter. Nero can prevail without it.
    He&#39;s quite grateful the mirror&#39;s reflection
    was helpful in destroying the ?crystals.
    The mirror has served a noble enough purpose,
    but there&#39;s no more use for it now.

  &lt;&lt;elseif $n_mirrorMagicKnown&gt;&gt;
    The wolf regrets the loss of mage-sight. It might have helped
    discern other illusions in Ivex&#39;s domain.
    
    ?P
    The mirror&#39;s reflection was quite helpful for
    destroying the ?crystals.
    Perhaps the mirror could have been useful for more than that?
    But Nero&#39;s magic energies are depleted now.
    There&#39;s no way for him to use whatever magic is in
    the mirror.
  &lt;&lt;else&gt;&gt;
    ?P
    The wolf wonders why Ivex would bother to have such a mirror
    on his desk. If it were simply vanity, why wouldn&#39;t he use
    a large wall-mounted mirror instead?
    Perhaps it&#39;s a magic mirror despite its plain appearance?
    Well, even if it is, Nero has no magic energy left to use it.
    ?P
    He&#39;s grateful that the mirror&#39;s reflection was an aid
    in destroying the ?crystals, but there&#39;s no further
    use for the mirror now.
  &lt;&lt;/if&gt;&gt;

&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="617" name="n2x Mirror Take" tags="mt-ready" position="7650,825" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mirrorTaken false&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

Nero picks up the mirror with his
&lt;&lt;= $n_knifeTaken ? &quot;left&quot; : &quot;right&quot;&gt;&gt; hand.
As expected, it&#39;s somewhat awkward to carry,
&lt;&lt;if $n_knifeTaken&gt;&gt;
  especially with the letter opener in his other hand,
&lt;&lt;/if&gt;&gt;
but he&#39;ll manage somehow.

&lt;&lt;if $n_extraHorny&gt;&gt;
  ?P
  &lt;&lt;if $n_knifeTaken&gt;&gt;
    His cock is disappointed that he no longer has a hand free
    to continue fondling it, but it too will have to manage, somehow.
  &lt;&lt;else&gt;&gt;
    His cock would prefer he held the mirror in his &lt;em&gt;left&lt;/em&gt; hand,
    so that the more dextrous right hand can continue stroking.
    But Nero is pretty sure that holding the mirror
    securely is more important than fondling his cock.
  &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

?P
The wolf is feeling optimistic. He may not have his own magic yet,
but this little bit of Ivex&#39;s magic is much more than nothing.
The rest of his mission &lt;em&gt;will&lt;/em&gt; be easy. He&#39;s sure of it.

?P
$n_afterAction

&lt;&lt;set $n_mirrorTaken = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="618" name="n2x Replace Bill" tags="mt-ready" position="5525,1175" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-always n_deskCleared true&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;
&lt;&lt;vi-always n_wandExploded true&gt;&gt;

There is still plenty of unburnt paper,
&lt;&lt;if $n_mapDefaced&gt;&gt;
  but Nero is unable to find any more ink.
  Charcoal will have to do.
  ?P
  He uses Nackle to pull bits of charcoal out from the burning
  &lt;&lt;= $n_crossScrapsBurned ? &quot;splinters of the&quot; : &quot;&quot;&gt;&gt;
  cross, and then writes

&lt;&lt;else&gt;&gt;
  and a bottle that came from the desk
  still has ink in it.
  ?P
  He finds a pen and uses it to write
&lt;&lt;/if&gt;&gt;

a new note on a page torn from a book:
&quot;Bill For Home Renovation: 899 Silvers, Due Yesterday.&quot;

?P
Satisfied with his work, the wolf pisses on the note
and places it in the center of the
&lt;&lt;if $n_deskHasPillar&gt;&gt;
  desk, underneath the severed pink pillar from the globe.
&lt;&lt;else&gt;&gt;
  empty desk.
&lt;&lt;/if&gt;&gt;

?P
$n_afterAction

&lt;&lt;run
  $n_deskHasBill = true;
  /* don&#39;t need to delete $n_dimDesk */
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="619" name="n2x Study Free" tags="mt-ready inclusion" position="5525,1475" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleLit false&gt;&gt;
&lt;&lt;vi-always n_free true&gt;&gt;
&lt;&lt;vi-always n_ivexGone true&gt;&gt;

&lt;&lt;set _window =
  $n_windowBroken ? &quot;broken window&quot;
  : &quot;prominent round window&quot;&gt;&gt;

&lt;&lt;set _desk =
  $n_deskCleared ? &quot;grandiose desk&quot;
  : $n_deskBurned ? &quot;slightly-charred desk&quot;
  : &quot;cluttered desk&quot;&gt;&gt;

&lt;&lt;set _cabinets = $n_wandExploded ? &quot;charred cabinets&quot; : &quot;cabinets&quot;&gt;&gt;
&lt;&lt;set _bookcases = $n_wandExploded ? &quot;singed bookcases&quot; : &quot;bookcases&quot;&gt;&gt;

&lt;&lt;set _chaos =
  $n_bookcasesLanced
  || $n_booksLanced
  /* not cabinets */
  /* not coins */
  || $n_crossLanced
  || $n_deskCleared
  /* not globe */
  || $n_mapDefaced
  || $n_paintingLanced
  /* not penguin */
&gt;&gt;

&lt;&lt;set _map = $n_mapDefaced ? &quot;defaced map&quot; :
  $n_wandExploded ? &quot;burning map&quot; : &quot;large map&quot;&gt;&gt;

&lt;&lt;set _painting =
  $n_paintingBlasted ? &quot;tattered painting&quot;
  : $n_paintingKnown ? &quot;painting of Ivex&#39;s mother&quot;
  : &quot;painting of a pantheress&quot;&gt;&gt;

&lt;&lt;if $n_wandExploded&gt;&gt;
  Much like Ivex himself, his study is strange and dirty,
  but it&#39;s now ruined by Nero&#39;s acts of destruction.
  The wolf hopes that he will soon be able to ruin
  the panther as well.
  ?P

&lt;&lt;elseif _chaos&gt;&gt;
  Much like Ivex himself, his study is strange and dirty,
  but the vulgar pretentiousness is greatly reduced by
  the not-so-carefully placed chaos that the wolf has inflicted.
  Too bad the destruction of furnishings in this room does not also
  destroy the furnishings of the panther&#39;s mind.
  ?P

&lt;&lt;else&gt;&gt;
  Much like Ivex himself, his study is pompous, strange, and dirty.
&lt;&lt;/if&gt;&gt;

&lt;&lt;if $n_paintingLanced&gt;&gt;
  &lt;&lt;mt-seen $n_dimWall&gt;&gt;
    The &lt;&lt;mta-no-loop &quot;n1x Wall&quot;&gt;&gt;wall&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $n_dimWindow&gt;&gt;
    with the &lt;&lt;mta-no-loop &quot;n1x Window&quot;&gt;&gt;_window&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  is bare except for
  &lt;&lt;mt-seen $n_dimMap&gt;&gt;
    a &lt;&lt;mta-no-loop &quot;n1x Map&quot;&gt;&gt;_map&lt;&lt;/mta-no-loop&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;

&lt;&lt;elseif $n_wallViewed&gt;&gt;
  &lt;&lt;mt-seen $n_dimWall&gt;&gt;
    The &lt;&lt;mta-no-loop &quot;n1x Wall&quot;&gt;&gt;wall&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $n_dimWindow&gt;&gt;
    with the &lt;&lt;mta-no-loop &quot;n1x Window&quot;&gt;&gt;_window&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  is bare except for
  &lt;&lt;mt-seen $n_dimMap&gt;&gt;
    a &lt;&lt;mta-no-loop &quot;n1x Map&quot;&gt;&gt;_map&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;&lt;mt-seen $n_dimPainting&gt;&gt;
    and a &lt;&lt;mta-no-loop &quot;n1x Painting&quot;&gt;&gt;_painting&lt;&lt;/mta-no-loop&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;

&lt;&lt;else&gt;&gt;
  The wall with the
  &lt;&lt;mt-seen $n_dimWindow&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Window&quot;&gt;&gt;_window&lt;&lt;/mta-no-loop&gt;&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  is bare except for
  &lt;&lt;mt-seen $n_dimWall&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Wall&quot;&gt;&gt;some decorations&lt;&lt;/mta-no-loop&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;/if&gt;&gt;

The opposite wall has a
&lt;&lt;if $n_doorOpened&gt;&gt;
  [[door|n2f Door]] that opens to a staircase going down.
&lt;&lt;else&gt;&gt;
  [[door|n2f Door]].
&lt;&lt;/if&gt;&gt;

?P
The other walls are lined with many
&lt;&lt;mt-seen $n_dimCabinets&gt;&gt;
  &lt;&lt;mta-no-loop &quot;n1x Cabinets&quot;&gt;&gt;_cabinets&lt;&lt;/mta-no-loop&gt;&gt;
&lt;&lt;/mt-seen&gt;&gt;&gt;&gt;
&lt;&lt;mt-seen $n_dimBookcases&gt;&gt;
  and &lt;&lt;mta-no-loop &quot;n1x Bookcases&quot;&gt;&gt;_bookcases&lt;&lt;/mta-no-loop&gt;&gt;.
&lt;&lt;/mt-seen&gt;&gt;

The only other furniture is a
&lt;&lt;mt-seen $n_dimDesk&gt;&gt;
  &lt;&lt;mta-no-loop &quot;n1x Desk&quot;&gt;&gt;_desk&lt;&lt;/mta-no-loop&gt;&gt;.
&lt;&lt;/mt-seen&gt;&gt;
And of course,
&lt;&lt;if $n_crossBurnLanced&gt;&gt;
  the smoky, reeking pile of charred wood scraps that used to be a cross.
&lt;&lt;elseif $n_crossScrapsBurned&gt;&gt;
  the cozy fire of wood scraps that used to be a cross.
&lt;&lt;elseif $n_crossPartsBurned&gt;&gt;
  the burning pieces of the
  &lt;&lt;mt-seen $n_dimCross&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Cross&quot;&gt;&gt;wooden cross&lt;&lt;/mta-no-loop&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;elseif $n_crossLanced&gt;&gt;
  the urine-soaked heap of wood scraps that used to be a cross.
&lt;&lt;else&gt;&gt;
  the broken pieces of the
  &lt;&lt;mt-seen $n_dimCross&gt;&gt;
    &lt;&lt;mta-no-loop &quot;n1x Cross&quot;&gt;&gt;wooden cross&lt;&lt;/mta-no-loop&gt;&gt;.
  &lt;&lt;/mt-seen&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if !$n_lookedForClothes&gt;&gt;
  ?P
  Nero scans the room for something to wear, but there doesn&#39;t seem to
  be anything suitable. He&#39;ll have to remain naked a bit longer.
  &lt;&lt;set $n_lookedForClothes = true&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="620" name="n2x Wand Cock 1" tags="mt-ready" position="7875,1975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_wandAsked true&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

&lt;&lt;if $n_mirrorTaken || $n_knifeTaken&gt;&gt;
  Nero puts the
  &lt;&lt;= $n_mirrorTaken ? &quot;magic mirror&quot; : &quot;&quot;&gt;&gt;
  &lt;&lt;= $n_mirrorTaken &amp;&amp; $n_knifeTaken ? &quot;and the&quot; : &quot;&quot;&gt;&gt;
  &lt;&lt;= $n_knifeTaken ? &quot;letter opener&quot; : &quot;&quot;&gt;&gt;
  back on the desk, for now.
  ?P
  He
&lt;&lt;else&gt;&gt;
  Nero
&lt;&lt;/if&gt;&gt;

&lt;&lt;= $n_kopicVisited ? &quot;has picked&quot; : &quot;picks&quot;&gt;&gt;
up the wand. He was not certain before,
but it&#39;s clear from the grip that it&#39;s a
&lt;&lt;mt-seen $kn_Kopic&gt;&gt; 
  &lt;&lt;tran-cut [[Kopic Classic|n2x Kopic]]&gt;&gt;.
&lt;&lt;/mt-seen&gt;&gt;
The squishy tube-like attachment on the end
is a little heavier than he expected.
It gives the wand an awkward balance.
Which probably isn&#39;t relevant for the wand&#39;s
intended purpose.

?P
&lt;&lt;if $n_mageSight&gt;&gt;
  The wand is currently fully charged with exotic energy.
  Nero still does not know how to align with that energy,
&lt;&lt;elseif $n_wandMageSight&gt;&gt;
  The wolf remembers seeing that the wand is charged
  with exotic energy.
  Nero does not have any energy left himself,
&lt;&lt;else&gt;&gt;
  The wolf wonders if the wand is charged.
  Nero does not have any energy left himself,
&lt;&lt;/if&gt;&gt;
but using the wand will not require his own magic.

?P
It&#39;s probably a good idea to start by activating the wand
&lt;em&gt;without&lt;/em&gt; putting it on his cock.
&lt;&lt;if $n_extraHorny&gt;&gt;
  His cock argues a bit, but it reluctantly agrees.
  ?P
&lt;&lt;/if&gt;&gt;

Nero holds the wand far from his body,
pointing it &lt;em&gt;away&lt;/em&gt; from himself,
then twists his wrist with the correct motion...

?P
[[Continue|n2x Wand Cock 2]]

&lt;&lt;run
  delete $n_knifeTaken;
  delete $n_mirrorTaken;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="621" name="n2x Wand Cock 2" tags="mt-ready" position="8000,1975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

The squishy attachment glows green,
&lt;&lt;if $n_mageSight&gt;&gt;
  exotic energy pulses through the shaft,
&lt;&lt;/if&gt;&gt;
and the wand begins &lt;em&gt;vibrating&lt;/em&gt; with a growly sound.
It&#39;s a bit alarming. Nero almost drops it.

?P
The vibration feels... &lt;em&gt;strange&lt;/em&gt; in his hand.
Strange is not unpleasant.
The grip is warm, and the motion is more excited than angry.
It takes but a moment to become accustomed to it.

?P
The wolf can imagine how it might feel on his cock,
&lt;&lt;if $n_extraHorny&gt;&gt;
  and he almost applies it right away,
  but a voice in his head asks,
&lt;&lt;else&gt;&gt;
  and it certainly seems interesting. He wonders,
&lt;&lt;/if&gt;&gt;
&lt;em&gt;How do I stop it?&lt;/em&gt;

?P
&lt;&lt;if $n_mageSight&gt;&gt;
  The magic axioms are unfamiliar.
&lt;&lt;/if&gt;&gt;
He tries dropping the wand. It continues to vibrate,
clattering &lt;em&gt;loudly&lt;/em&gt; across the floor in an irregular motion.
Nero retrieves the wand before it disappears under a bookcase.

?P
He tries the activation motion again. Nothing happens.
It still glows green and continues to vibrate.

?P
The vibration makes him unsure if he performed the motion correctly.
A few more tries, and the wand &lt;em&gt;does&lt;/em&gt; stop vibrating.
The squishy attachment loses the green glow,
fading back to its ordinary pinkish color.

?P
Well. Using the wand seems straightforward enough.
Nero considers again if he really wants to try it.

?P
&lt;ul class=actions&gt;
  &lt;&lt;if $n_extraHorny&gt;&gt;
    &lt;&lt;mtl [[n2x Wand Cock 3f]]&gt;&gt;
      His cock is eager. Of course he does!
    &lt;&lt;/mtl&gt;&gt;
  &lt;&lt;/if&gt;&gt;

  &lt;&lt;mtl [[n2x Wand Cock 3s]]&gt;&gt;
    He&#39;s cautious but curious. Maybe just a little bit.
  &lt;&lt;/mtl&gt;&gt;

  &lt;&lt;mtl-if !$n_extraHorny [[n2x Wand Cock Refuse]] &quot;too horny&quot;&gt;&gt;
    Perhaps he shouldn&#39;t. Ivex &lt;em&gt;did&lt;/em&gt; insinuate that
    the wand can also torment victims.
  &lt;&lt;/mtl-if&gt;&gt;
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="622" name="n2x Wand Cock 3f" tags="mt-ready" position="8125,1975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_extraHorny true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

Nero activates the wand again.
It glows green and starts vibrating again.
He quickly brings the squishy attachment to his crotch.
Ivex could be back at any moment. There&#39;s no time to waste!

?P
With help from the pre-cum at the tip,
his cock eagerly enters the glowing, vibrating hole.
The hole is smaller than his bulging cock,
but it stretches willingly,
and perhaps some magic of the wand makes
the squishy tube glide smoothly onto his shaft.

?P
It feels as wonderful as he suspected it would be.
It feels even better than he thought it &lt;em&gt;could&lt;/em&gt; be.

?P
The tube embraces every millimeter of skin on his cock,
much better than his hand can do.
It&#39;s even better than any woman could be,
because the hole &lt;em&gt;vibrates&lt;/em&gt;
in a way that no mundane muscles could ever do.
Nero had planned to stroke the tube up and down his shaft,
but a few moments of vibration makes it clear
that he does not have to.
The wand will do all the work.

?P
He sits down on the floor and relaxes into the
amazing sensations.

?P
[[Continue|n2x Wand Cock 4]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="623" name="n2x Wand Cock 3s" tags="mt-ready" position="8125,2100" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

Nero activates the wand again.
It glows green and starts vibrating again.

?P
He cautiously brings the squishy attachment toward his crotch.
He doesn&#39;t insert his cock into the hole, not yet.

?P
An edge of the squishy tube touches his shaft,
and his cock immediately grows stiffer from the vibration.

?P
It &lt;em&gt;does&lt;/em&gt; feel good.
Nero lets his cock enjoy that small bit of contact while
he carefully checks for any sign of hazardous effects.
It &lt;em&gt;seems&lt;/em&gt; harmless.
And his cock is eager to feel more than the small vibration
on the side of its shaft.

?P
Well. Nothing ventured, nothing gained.

?P
Nero carefully aligns the squishy tube&#39;s hole with his cock.
The pre-cum on his tip helps his bulging cock enter
a small hole that stretches willingly to accommodate him.
And perhaps some magic of the wand makes
the squishy tube glide smoothly onto his shaft.

?P
It feels as wonderful as his cock promised it would be.
It feels even better than he thought it &lt;em&gt;could&lt;/em&gt; be.

?P
The tube embraces every millimeter of skin on his cock,
much better than his hand could.
It&#39;s maybe even better than any woman can be,
because the hole &lt;em&gt;vibrates&lt;/em&gt;
in a way that unmagical muscles cannot.
Nero had wondered if he would need to stroke the tube
up and down his shaft,
but a few moments of vibration makes it clear
that he does not have to.
The wand will do all the work.

?P
He sits down on the floor and relaxes into the
amazing sensations.

?P
[[Continue|n2x Wand Cock 4]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="624" name="n2x Wand Cock 4" tags="mt-ready" position="8250,2050" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

&lt;&lt;if $n_extraHorny&gt;&gt;
  Nero&#39;s cock has already been feeling close to orgasm,
  ever since
  &lt;&lt;if $n_pawed&gt;&gt;
    that brief and unsatisfying ejaculation earlier.
  &lt;&lt;else&gt;&gt;
    the ordeal with the candle and the cross.
  &lt;&lt;/if&gt;&gt;
  But the wand shows him something new.
  The grip of the tube stimulates his cock in
  ways he has never experienced before.
  Nero discovers that what he thought of as
  imminent orgasm is mere foreplay to
  the thundering herd of sensations
  that the wand brings to his entire shaft.

&lt;&lt;else&gt;&gt;
  Nero&#39;s cock has been unnaturally erect ever since the
  ordeal with the candle and the cross.
  The panther&#39;s tortures still echo in
  the wolf&#39;s balls and his groin.
  But Nero has now gained control of the panther&#39;s tool,
  and he&#39;s using it for pleasure, not pain.
  He feels some small satisfaction from that fact.

  ?P
  The wand stimulates his cock in ways
  he has never experienced before.
  The grip is a firm pressure on every nerve in his shaft,
  but the inner surface of the tube also slides and glides
  a small amount from the vibration.
  He imagines it might be what it feels like to
  have a thousand tiny fingers all stroking him at once.

  ?P
  It does not take long to reach a feeling close to orgasm.
  But Nero discovers that what he considers imminent orgasm
  is mere foreplay to the sensations that the wand
  continues to bring to his cock.
  It feels like the wand has revealed nerves that he did
  not know existed, nerves that were dormant until now.
  The wand&#39;s vibration is an insistent wake-up call to
  those sleeping sentries,
  and their waking has shouted the news throughout his body,
  sending messages of excitement that
  makes every part of him tremble with delight.
&lt;&lt;/if&gt;&gt;

?P
The squishy vibrating tube is touching the whole length of his shaft
and most of the head of his cock,
but it only touches a small bit of his knot.
The wolf wonders if he could, if he should,
pull the tube down onto his knot.
His hand acts before he finishes the thought,
and the tube only hesitates the slightest bit
before engulfing his entire knot.
He lies back against the floor as the wand&#39;s
pleasures overwhelm him.

?P
The sound of the wand is almost drowned out by
the wolf&#39;s huffing breaths.
His nose is filled with the scent of his own desire.
He realizes his eyes have closed,
and he opens them to watch the wand&#39;s relentless 
massage of his large, stiff cock.

?P
As he watches, the glow of the wand turns from green to yellow.
&lt;&lt;if $n_mageSight&gt;&gt;
  A tangle of magic commutes in the tube.
&lt;&lt;/if&gt;&gt;
The grip of the tube becomes firmer,
and the vibration gains a rhythm of strong
pulses that travel up and down his shaft.

?P
&lt;&lt;if $n_extraHorny&gt;&gt;
  The wand must have detected that he&#39;s close to cumming,
  and the yellow probably indicates that the wand is
  preparing to bring him to climax with its &lt;em&gt;pleasures sublime&lt;/em&gt;.
  Nero trembles in anticipation.

  ?P
  A small voice of doubt in his head wonders,
  maybe yellow is a warning of something other than
  imminent orgasm?
  But he&#39;s &lt;em&gt;so&lt;/em&gt; close.
  He can remove the wand after he cums.

&lt;&lt;else&gt;&gt;
  The color is a bit concerning. Yellow is commonly a warning.
  Is the wand about to fail?
  Is it preparing something more sinister than simply
  &lt;em&gt;pleasures sublime?&lt;/em&gt;
  Or perhaps the yellow is merely an indication
  that the wolf is about to cum?

  ?P
  He&#39;s &lt;em&gt;so very&lt;/em&gt; close.
  Nero will of course remove the wand after cumming.
  But maybe he should remove it now?
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;mt-seen $n_endgameUsable &amp;&amp; $n_mageSight ? $xn_Broken : $xn_CagedHarsh&gt;&gt;
    &lt;li&gt;[[Just one orgasm, then he&#39;ll stop.|n2x Wand Cock Finish 1]]&lt;/li&gt;
  &lt;&lt;/mt-seen&gt;&gt;
  &lt;li&gt;[[Better stop the wand now.|n2x Wand Cock Stop 1]]&lt;/li&gt;
&lt;/ul&gt;

&lt;&lt;set $n_wandUsed = true&gt;&gt;


&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="625" name="n2x Wand Cock Again 1" tags="mt-ready" position="7875,2250" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny n_mageSight n_tooClever&gt;&gt;

After &lt;em&gt;too much&lt;/em&gt; thinking about it, Nero resolves that
the yellow and red glows of the wand are &lt;em&gt;not&lt;/em&gt;
something to worry about.
And even if there &lt;em&gt;is&lt;/em&gt; something sinister about
&lt;em&gt;pleasures sublime&lt;/em&gt;,
the wolf &lt;em&gt;was&lt;/em&gt; successful in &lt;em&gt;stopping&lt;/em&gt; the wand.
The panther&#39;s strange magics are no match for the sharpness of
Nero&#39;s mind.

?P
&lt;&lt;if $n_mirrorTaken || $n_knifeTaken&gt;&gt;
  He lays down the magic mirror and the letter opener.
&lt;&lt;elseif $n_mirrorTaken&gt;&gt;
  He lays down the magic mirror.
&lt;&lt;elseif $n_knifeTaken&gt;&gt;
  He lays down the letter opener.
&lt;&lt;/if&gt;&gt;
He retrieves the wand from where he threw it.
He sits on the floor and activates the wand again.

?P
No second thoughts now.

?P
His erect cock eagerly enters the glowing, vibrating hole again,
all the way to the base of his knot.

?P
[[Continue|n2x Wand Cock Again 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="626" name="n2x Wand Cock Again 2" tags="mt-ready" position="8000,2250" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny n_tooClever&gt;&gt;

The wand is as good as he remembers it.
Better, now that he knows what to expect,
now that he is not questioning every moment of his interaction with it.
This time it&#39;s just simple pleasure, uncomplicated by doubt.

?P
He relaxes into the wand&#39;s ministrations.
His mind disappears into a haze of lazy delight
that slowly, deliberately ascends the cliffs of ecstasy again.
He understands now why Ivex uses the wand himself for its
&lt;em&gt;pleasures sublime&lt;/em&gt;.

?P
When Nero has sex with a partner who makes little response,
or responds in the wrong way, the wolf often finds his
mind wandering to other things besides the pleasure that
has become something of a chore.

?P
The wand does not have that fault.
It does not mewl or pant like an appropriately receptive bitch,
but it does not need to.
Its vibrating stimulation on the full length of his cock
is a sensation that floods his mind with a sensual pleasure
that&#39;s never incorrect.
The intense attention of the wand silences
the parts of his mind that finds mechanical sex a bore.

?P
&lt;&lt;if $n_mageSight&gt;&gt;
  The wand&#39;s axioms commute. It
&lt;&lt;else&gt;&gt;
  The wand
&lt;&lt;/if&gt;&gt;
glows yellow and starts to pulse.
His breaths become faster.
He lies back to writhe freely with pleasure.

?P
He watches with delight when the tip of the squishy tube
glows red.
The red slowly creeps toward the other end of the tube, as
the vibrating pulses grab and pull the wolf
by his cock to the heights of a magic ecstasy that&#39;s
far beyond what any mundane sexual act can do.

?P
The yellow glow is reduced to a small sliver at the base of his knot.
The wand&#39;s stimulation reaches an indescribable peak of pleasure.
Nero&#39;s cock, his body, his whole spirit is &lt;em&gt;ready&lt;/em&gt; to
take the leap from those heights, ready to ejaculate, and shout,
its joy in an arc of cum...

?P
[[Continue|n2x Wand Cock Finish 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="627" name="n2x Wand Cock Endgame 1" tags="mt-ready" position="8875,2325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

Nero looks around the room for anything that might help.
The letter opener...?
&lt;&lt;if $n_tooClever&gt;&gt;
  No, if Nackle could not cut the tube,
  then that blade will not work either.
&lt;&lt;else&gt;&gt;
  No, it is too dull to cut the tubing in its rigid state.
&lt;&lt;/if&gt;&gt;
He sees nothing else in the room that will help.

?P
The wolf continues tugging on the wand and scanning the room in desperation.
Window,
&lt;&lt;= $n_paintingLanced ? &quot;ruined&quot; : &quot;&quot;&gt;&gt; painting,
map.
Bookcases,
&lt;&lt;= $n_coinsLanced ? &quot;coins,&quot; : &quot;&quot;&gt;&gt;
books.
Cabinet,
&lt;&lt;= $n_penguinFlown ? &quot;&quot; : &quot;penguin,&quot;&gt;&gt;
bottle.
Desk,
&lt;&lt;= $n_globeLanced ? &quot;&quot; : &quot;globe,&quot;&gt;&gt;
mirror.

?P
Mirror! He sees his naked ass in it, and remembers.
He has a spell that can free himself from &lt;em&gt;anything!&lt;/em&gt;

?P
The wolf has cast that spell already, and failed,
but Ivex was &lt;em&gt;looking&lt;/em&gt; at the spell!

?P
Nero scans the ceiling where he remembers the panther looking.
The tangled web of exotic energy is a confusion of things unfamiliar,
but then he sees a small knot of energy that &lt;em&gt;is&lt;/em&gt; familiar.
His spell is still there, caught on a strand where Ivex left it!

?P
Can he reach it? Can he &lt;em&gt;use&lt;/em&gt; it?

?P
The wolf climbs onto the desk. He stretches out his hand
and jumps toward that spot on the ceiling...

?P
[[Continue|n2x Wand Cock Endgame 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="628" name="n2x Wand Cock Endgame 2" tags="mt-ready" position="9000,2325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;

The wolf&#39;s finger touches the captive energy knot.
He immediately feels it unfold.
The axioms become satisfied as the spell engulfs his body.

?P
He shrinks to the size of an acorn. The malevolent wand does not.

?P
The wand&#39;s tube stops glowing,
and the wand falls toward the floor.

?P
Nero also falls, not any slower than the wand.

?P
The fall is from an &lt;em&gt;enormous&lt;/em&gt; height,
compared to his size now.

?P
The wolf tells himself,
maybe he should have thought for another second about
this plan.
&lt;&lt;if $n_deskLanced&gt;&gt;
  Perhaps if he hadn&#39;t destroyed the desk&#39;s chair,
  he could have stood on it instead of jumping.
&lt;&lt;else&gt;&gt;
  Perhaps he could have moved the desk&#39;s chair and stood on it,
  instead of jumping.
&lt;&lt;/if&gt;&gt;

?P
&lt;&lt;if $n_tooClever&gt;&gt;
  He quickly uses Nackle to slow his fall.
  But before he lands on the floor,
  Mudge&#39;s Invisibility wears off.
  The wolf resumes his original size, and mass.
  ?P
  Nackle&#39;s levitating force &lt;em&gt;cannot&lt;/em&gt; change quickly.
  Nero crashes hard onto the floor,
  fortunately from a fall of just a meter.
  The impact does not harm him much,
  other than giving him a new fear of heights.
  ?P
  The wolf lies there for a moment,
  face down on the floor, panting deep breaths.

&lt;&lt;else&gt;&gt;
  He crashes to the floor after falling nearly fifty times
  his own tiny height.
  Fortunately, Mudge&#39;s Invisibility &lt;em&gt;does&lt;/em&gt; decrease the wolf&#39;s mass,
  not just his size, and the energy of the impact does not cause him much
  harm beyond a new fear of heights.
  ?P
  A moment later, the spell wears off. The wolf resumes his usual size,
  face down on the floor, panting deep breaths.

&lt;&lt;/if&gt;&gt;

He still feels the aftereffects of panic,
but it&#39;s quickly becoming displaced by elation.

?P
It &lt;em&gt;worked!&lt;/em&gt;
He&#39;s escaped &lt;em&gt;another&lt;/em&gt; one of Ivex&#39;s traps.

?P
[[Continue|n2x Wand Cock Endgame 3]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="629" name="n2x Wand Cock Endgame 3" tags="mt-ready" position="9125,2325" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

Nero sits up to catch his breath and recover.

?P
His cock is &lt;em&gt;still&lt;/em&gt; erect.
This is definitely, probably, not related to anything erotic.
The only thing he feels right now is exhaustion.
The erection really must be &lt;em&gt;just&lt;/em&gt; a lingering effect of the candle.

?P
The wolf reviews everything that&#39;s happened to him since he
accidentally stepped into the panther&#39;s first trap.
And Nero realizes that most of the mistakes he made were
because he was in a rush, or being rushed.

?P
He&#39;s always been good at improvising past his mistakes.
But rushed improvisation will also have mistakes that become
a cascade of increasingly desperate actions.
So far, the chaos has always resolved in a favorable way,
but there&#39;s too much luck in it for the wolf to feel comfortable
about a future as a successful adventurer.
He sees &lt;em&gt;many&lt;/em&gt; times when saying or doing the wrong thing would
have ended much less happily than where he is now.

?P
Nero&#39;s usual work is rarely anything this frenetic.
Most of the time his task is a slow dissection of magics
during an investigation of some accounting irregularity.

?P
Ivex &lt;em&gt;could&lt;/em&gt; return at any moment.
But Nero will likely fail if he tries to &lt;em&gt;adventure&lt;/em&gt;
against the panther.
The wolf decides he needs to slow down and use his strengths.
He has mage-sight and the magic mirror.
He can &lt;em&gt;understand&lt;/em&gt; Ivex&#39;s magic
to prepare for the panther&#39;s return.

?P
Nero starts by picking up the wand that he really should have understood
before trying it on his cock.

?P
[[Continue|n0a Broken WIP]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="630" name="n2x Wand Cock Finish 1" tags="mt-ready" position="8375,2125" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight n_tooClever&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;

Nero closes his eyes and tries to postpone doubts about the 
yellow glow for just a few moments more.
It will not take long to reach an orgasm with
&lt;em&gt;pleasures sublime&lt;/em&gt;,
which promises to be the best orgasm he has ever known,
and perhaps even the best that he will &lt;em&gt;ever&lt;/em&gt; know.

?P
The pulsing of the wand steadily carries him up
the cliffs of ecstasy.
The continuous pleasure makes him lose track of time,
but it can&#39;t be more than a few seconds to the top.

?P
And then another second more will send his pleasure
leaping off the cliff.
The wolf realizes he wants to &lt;em&gt;see&lt;/em&gt; it.
He opens his eyes so he will
see the moment his entire self becomes
an orgasm of cum soaring through the air.

?P
The squishy tube is now glowing with a red that&#39;s
defeating the yellow. Only a small bit of yellow
is left, near the base of his knot.

?P
The stimulation of the wand reaches its indescribable peak of pleasure.
Nero&#39;s cock, his body, his whole spirit is &lt;em&gt;ready&lt;/em&gt;
to take the leap, ready to ejaculate, and shout, in triumph...

?P
[[Continue|n2x Wand Cock Finish 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="631" name="n2x Wand Cock Finish 2" tags="mt-ready" position="8500,2225" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;

The red defeats the yellow.
&lt;&lt;if $n_mageSight&gt;&gt;
  The tube&#39;s magic axioms commute again.
&lt;&lt;/if&gt;&gt;

?P
The wand &lt;em&gt;stops&lt;/em&gt;. Right before Nero is about to cum.

?P
The wolf whines. He pulls on the wand. He rubs the tube
embracing his cock. He tries everything he can to give his
cock that last bit of stimulation it needs to cum.

?P
Nothing works. He can&#39;t &lt;em&gt;feel&lt;/em&gt; anything!
The tube has become more solid than squishy,
and it feels like it&#39;s no longer gripping his cock,
even though it clearly is.
He can sense his cock twitching as he moves the
wand and his hips, but the skin of
his cock feels like it&#39;s touching nothing but air.
Not even air! He does not feel any breeze either!

?P
He tries sticking his fingers into the hole on the far side of the
tube. The hole is stiff and only admits the smallest one.
His finger does not feel anything either! He quickly removes
his finger out of fear that it might also get stuck.

&lt;&lt;if $n_tooClever&gt;&gt;
  ?P
  He tries using Nackle, but pulling with more than his own strength
  just pulls on his crotch more painfully. And Nackle does not seem
  to be able to cut the tube either. Maybe he could cut it when it
  becomes soft again? &lt;em&gt;If&lt;/em&gt; it becomes soft again.
  ?P
  He tries using Nackle to probe the interior of the tube and grip his
  cock within it. He cannot &lt;em&gt;see&lt;/em&gt; the energy strands after they
  enter the tube, but he should be able to &lt;em&gt;feel&lt;/em&gt; what they do.
  And it feels... empty, as if there&#39;s nothing inside at all.
&lt;&lt;/if&gt;&gt;

?P
Nero is in a panic.
&lt;em&gt;Why&lt;/em&gt; did he have to try this cursed device?
He stands up, still tugging uselessly the wand,
and looks around for anything that might help him &lt;em&gt;cum&lt;/em&gt;.
Or remove the wand.

?P
[[Continue|n2x Wand Cock Finish 3]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="632" name="n2x Wand Cock Finish 3" tags="mt-ready" position="8625,2225" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

The wand starts vibrating again. Nero collapses back to the floor in surprise.
The vibration is ecstasy, every bit as good as it was before.

?P
His cock is not so close to orgasm now.
It lost much of its fervor in the wolf&#39;s panic.
But it welcomes the resumption of the wand&#39;s incredible touch.
The wolf&#39;s cock quickly recovers.

?P
The return of sensation on his cock is a relief,
but Nero is still alarmed.
The tubing is still firm, not soft.
It&#39;s still red, not yellow.
The stimulation &lt;em&gt;feels&lt;/em&gt; the same as when it was yellow.
Well, &lt;em&gt;probably&lt;/em&gt; the same.
It&#39;s hard to compare a fading memory of the pleasures before
to the delights that are bringing him to orgasm now.

?P
The imminent orgasm makes it difficult to think.
Nero tells himself that as soon as he cums,
he will &lt;em&gt;definitely&lt;/em&gt; focus on
&lt;&lt;if $n_mageSight&gt;&gt;
  dissecting the axioms
&lt;&lt;else&gt;&gt;
  understanding the mechanism
&lt;&lt;/if&gt;&gt;
of the wand and remove it, in any way he can.

?P
The wand pulls him again up the peak of ecstasy. He reaches the point
of no return.

?P
It stops &lt;em&gt;again&lt;/em&gt; before he can cum.
His cock feels nothing, &lt;em&gt;again.&lt;/em&gt;

?P
Nero screams.
&lt;em&gt;This&lt;/em&gt; is why the panther&#39;s victims are quickly reduced to begging.

?P
[[Continue|n2x Wand Cock Finish 4]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="633" name="n2x Wand Cock Finish 4" tags="mt-ready" position="8750,2225" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;

Nero stands again to find a way to...
he&#39;s not sure if cumming or escaping is the stronger motivation.

?P
He &lt;em&gt;did&lt;/em&gt;
&lt;&lt;= $n_wandStopped ? &quot;remove&quot; : &quot;deactivate&quot;&gt;&gt;
the wand before.
He tries the deactivation gesture.
It does not &lt;&lt;= $n_mageSight ? &quot;&quot; : &quot;seem to&quot;&gt;&gt; work.
The wand&#39;s rigid attachment to his crotch makes
the gesture harder to perform than before.
He tries again, and again.
He tries gestures he knows for other models of wands.
&lt;&lt;if $n_tooClever&gt;&gt;
  He tries all the gestures again with Nackle.
&lt;&lt;/if&gt;&gt;
He tries random gestures that might swing his
trapped cock into &lt;em&gt;something&lt;/em&gt; that
might be a touch that will let it cum,
thinking perhaps that an &lt;em&gt;orgasm&lt;/em&gt;
might be all that&#39;s needed to stop the wand&#39;s cycle
of stimulation and denial.

?P
Nothing works. His eyes are wet with exertion.
He feels his cock wilting from defeat.

?P
The wand starts vibrating again.
Nero tries to think un-horny thoughts.
He tries solving quadratic equations in his head,
hoping to shrink his cock all the way down
to where the wand might just fall off his
unsatisfied but limply retreating cock.

?P
But the wand is insistent,
and his cock is mindlessly eager.
The quadratic equations disappear in a haze of pleasure,
as he ascends the heights of an ecstasy that gets denied, again.

?P
When the wand stops this time,
the wolf repeatedly punches the tubing
with a feral noise that&#39;s between a scream and a growl.
The punches of course do not work, but a sloppy strike
hits his balls, and the sharp pain gives Nero
a moment of clarity.

?P
&lt;&lt;if $n_endgameUsable &amp;&amp; $n_mageSight&gt;&gt;
  [[Continue|n2x Wand Cock Endgame 1]]
&lt;&lt;else&gt;&gt;
  [[Continue|n2x Wand Cock Finish 5]]
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="634" name="n2x Wand Cock Finish 5" tags="mt-ready" position="8875,2150" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;

Nero looks around the room for anything that might help.
The letter opener...?
&lt;&lt;if $n_tooClever&gt;&gt;
  No, if Nackle could not cut the tube,
  then that blade will not work either.
&lt;&lt;else&gt;&gt;
  No, it is too dull to cut the tubing in its rigid state.
&lt;&lt;/if&gt;&gt;
He sees nothing else in the room that will help.

?P
The wolf continues tugging on the wand and scanning the room in desperation.
Window,
&lt;&lt;= $n_paintingLanced ? &quot;ruined&quot; : &quot;&quot;&gt;&gt; painting,
map.
Bookcases,
&lt;&lt;= $n_coinsLanced ? &quot;&quot; : &quot;coins,&quot;&gt;&gt;
books.
Cabinet,
&lt;&lt;= $n_penguinFlown ? &quot;&quot; : &quot;penguin,&quot;&gt;&gt;
bottle.
Desk,
&lt;&lt;= $n_globeLanced ? &quot;&quot; : &quot;globe,&quot;&gt;&gt;
mirror.

?P
Mirror! He sees his naked ass in it and remembers.
&lt;&lt;if $n_castEndgame&gt;&gt;
  &lt;&lt;vi-ignore n_mageSight&gt;&gt;
  He has a spell that can free himself from &lt;em&gt;anything.&lt;/em&gt;
  ?P
  Well, he &lt;em&gt;did.&lt;/em&gt; It&#39;s gone now.
  He screams at himself for the premature desperation that made him use it.

  ?P
  The wand begins its stimulation, again.
  His mind disappears into mindless pleasure, again.

  ?P
  [[Continue|n0a Caged Harsh WIP]]

&lt;&lt;else&gt;&gt;
  He has a spell that can free himself from &lt;em&gt;anything!&lt;/em&gt;
  ?P
  Nero tries to calm his mind.
  He closes his eyes.
  The memory of his spell comes easily.
  He &lt;em&gt;twists&lt;/em&gt; it...

  ?P
  [[Continue|n2x Wand Cock Finish 5a]]
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="635" name="n2x Wand Cock Finish 5a" tags="mt-ready" position="8925,2025" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;

The wolf mage feels his spell launch from his ass...

?P
&lt;&lt;fade-in 4s&gt;&gt;
Nothing happens.
?P

&lt;&lt;fade-next 2s&gt;&gt;
&lt;&lt;if $n_mageSight&gt;&gt;
  He opens his eyes in time to see his spell&#39;s
  tangle of axioms rise up toward the ceiling.
  It stops there for a moment, then continues to rise,
  disappearing through the ceiling to some place unknown.
  ?P
  Of course. Ivex&#39;s anti-magic field.
  It will take all his spells away from him.

&lt;&lt;else&gt;&gt;
  He keeps his eyes closed.
  He remembers now that Ivex has an anti-magic field
  that makes all his spells useless.
&lt;&lt;/if&gt;&gt;

?P
The wand begins its stimulation, again.
His mind disappears into mindless pleasure, again.

?P
[[Continue|n0a Caged Harsh WIP]]

&lt;&lt;/fade-in&gt;&gt;

&lt;&lt;set $n_castEndgame = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="636" name="n2x Wand Cock Refuse" tags="mt-ready" position="8125,1850" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight n_extraHorny n_tooClever&gt;&gt;

Despite the wand&#39;s obvious appeal, Nero is wary of the magic he
does not understand. Not to mention the memory of the panther&#39;s
sadistic tone when Ivex mentioned how the wand reduced
his victims to begging.

?P
Nero puts the wand back on the shelf.
Some curiosities are best left unsatisfied.

?P
$n_afterAction

&lt;&lt;set $n_wandRefused = true&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="637" name="n2x Wand Cock Stop 1" tags="mt-ready" position="8375,1975" size="100,100">&lt;&lt;nobr&gt;&gt;

The yellow is too alarming. Nero&#39;s mind overrides the objections
of his cock, and he moves to remove the wand.

?P
It&#39;s &lt;em&gt;stuck&lt;/em&gt;. This is even more alarming.

?P
Nero yanks the wand&#39;s shaft as hard as he can,
but what slid on so easily
has become impossible to slide off.
He tries using fingers to pull at the
squishy tube.
The far end near his tip stretches and moves easily,
but it&#39;s too slippery for him to get a good grip.
The end around his knot is flush against his skin,
and he cannot get a finger underneath to stretch it more.
&lt;&lt;if $n_tooClever&gt;&gt;
  ?P
  He tries using Nackle, but it does not do anything but stretch
  the tube more. The strongest force does not remove the tube,
  and the sharpest force is not able to damage it.
&lt;&lt;/if&gt;&gt;

?P
This is a &lt;em&gt;stupid&lt;/em&gt; problem to have.
His knot hasn&#39;t even fully grown yet!
Nero &lt;em&gt;knows&lt;/em&gt; that knotting is
a commitment to a long and sometimes awkward wait after cumming.
But his
&lt;&lt;= $n_extraHorny ? &quot;haste&quot; : &quot;curiosity&quot;&gt;&gt;
has led him to overlook this possibility.
And perhaps he was a bit misled by how easily it slid &lt;em&gt;onto&lt;/em&gt;
his knot.

?P
The wolf whines and struggles with the wand some more.
&lt;&lt;if $n_mageSight&gt;&gt;
  The magic axioms in the tube commute again.
&lt;&lt;/if&gt;&gt;
On the far end of the squishy tube,
the yellow glow darkens and becomes red.
The red slowly grows, crawling up the length of the tube,
toward his knot...

?P
[[Continue|n2x Wand Cock Stop 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="638" name="n2x Wand Cock Stop 2" tags="mt-ready" position="8500,1975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore $n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore $n_tooClever&gt;&gt;

Nero realizes that he will have to deactivate the wand to
remove it.

?P
It&#39;s impossible.
The activation gesture normally makes the tip of the
wand draw a precise figure 8.
But the tip of the wand is now &lt;em&gt;attached&lt;/em&gt; to his cock,
and it does not have the freedom to do that.

?P
Nero tries anyway.
The tip&#39;s motion isn&#39;t the important part of the gesture.
The important part is the action of his wrist holding the grip.

?P
The position of the wand on his crotch means it&#39;s awkward to
make any semblance of the gesture at all.
But he tries anyway.

?P
His cock is delighted by the additional motions.
It does not seem concerned by the potential danger.
&lt;&lt;if $n_mirrorBroken&gt;&gt;
  Or perhaps it invites it.
  Nero is quite distressed by the possibility of being
  turned on by danger, but
&lt;&lt;else&gt;&gt;
  Nero quashes a suspicion that his cock might enjoy danger, and
&lt;&lt;/if&gt;&gt;
he shakes that thought away and focuses his mind.
He concentrates on the hand holding the wand,
and he tries the gesture again, and again, and again...

?P
[[Continue|n2x Wand Cock Stop 3]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="639" name="n2x Wand Cock Stop 3" tags="mt-ready" position="8625,1975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore $n_mageSight&gt;&gt;
&lt;&lt;vi-ignore $n_tooClever&gt;&gt;

He succeeds! The wand stops vibrating, stops glowing.
Its grasp on his cock relaxes.

?P
He pulls the wand off and flings it away from him.
He gasps with relief.
His cock drips pre-cum, weeping with disappointment.

?P
That was &lt;em&gt;much too close&lt;/em&gt; to...
whatever might happen if the wand turned fully red.

?P
Nero kicks himself mentally for allowing carelessness and lust
to override his good sense.
He &lt;em&gt;must&lt;/em&gt; be more careful.
Ivex might come back at any minute!

?P
His cock is unpersuaded by the idea of an &lt;em&gt;imminent threat&lt;/em&gt;
that has not materialized for quite some time now.
His cock was
&lt;&lt;if $n_extraHorny&gt;&gt;
  frustrated before, and it&#39;s agonizingly desperate now.
&lt;&lt;else&gt;&gt;
  merely excited before, but it&#39;s painfully frustrated now.
&lt;&lt;/if&gt;&gt;

?P
There is no agreement now between his mind and his cock.
Part of Nero&#39;s brain always wants to solve every problem,
and it&#39;s trying to solve this one.
It somewhat unhelpfully
thinks of &lt;em&gt;many&lt;/em&gt; reasons why a few more seconds of the wand
might have been perfectly fine.
Just a few seconds, for just one, solid orgasm,
an orgasm with &lt;em&gt;pleasures sublime&lt;/em&gt;.

?P
Nero growls out loud. He&#39;s quite frustrated at himself,
at Ivex, at &lt;em&gt;everything&lt;/em&gt;.
And &lt;em&gt;this frustration&lt;/em&gt; even seems to make the wolf&#39;s cock harder.

?P
$n_afterAction

&lt;&lt;set $n_extraHorny = true&gt;&gt;
&lt;&lt;set $n_wandStopped = true&gt;&gt;
&lt;&lt;set $n_upset = ($n_upset || 0) + 2&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="640" name="n2x Wand Nude" tags="mt-ready inclusion" position="7600,2225" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleLit false&gt;&gt;
&lt;&lt;vi-always n_mageSight true&gt;&gt;
&lt;&lt;vi-always n_free true&gt;&gt;
&lt;&lt;vi-always n_ivexGone true&gt;&gt;
&lt;&lt;vi-always n_tooClever true&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;

The bare wand on the
&lt;&lt;if $n_wandUsed&gt;&gt;
  bookshelf, Ivex&#39;s alluring but distressing... &lt;em&gt;Fuck Toy 9000&lt;/em&gt;,
&lt;&lt;elseif $n_wandAsked&gt;&gt;
  bookshelf, Ivex&#39;s... &lt;em&gt;Fuck Toy 9000&lt;/em&gt;,
&lt;&lt;else&gt;&gt;
  bookshelf
&lt;&lt;/if&gt;&gt;
is an ordinary Kopic Classic.
It formerly had a
&lt;&lt;= $n_wandUsed ? &quot;disturbing&quot; : &quot;squishy&quot;&gt;&gt;
tube-like attachment,
but that attachment is far gone now.

?P
Nero wants to destroy the wand itself,
but the act is likely to be somewhat... explosive.
Still, he&#39;s confident he can do it safely, when he&#39;s ready.

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="641" name="n2x Wand Ran Away" tags="mt-ready inclusion" position="7600,1975" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleLit false&gt;&gt;
&lt;&lt;vi-always n_free true&gt;&gt;
&lt;&lt;vi-always n_ivexGone true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

The magic wand with its weird squishy attachment is still making alarming
growling and rattling noises from its lair beneath a bookcase
on the other side of the room. It&#39;s definitely not just an ordinary
Kopic Classic.
Nero does not have any idea why
Ivex would even have such a thing, and the wolf does not
want to go anywhere near it to find out.

&lt;&lt;if $n_tooClever&gt;&gt;
  ?P
  Nero &lt;em&gt;could&lt;/em&gt; use Nackle to retrieve the wand,
  and perhaps even deactivate whatever magic is in it.
  But he&#39;s wary of mixing magics he does not fully understand,
  especially when one is a wand that is likely to still have
  an enormous amount of energy
  &lt;span class=nobr&gt;stored in it.&lt;/span&gt;
&lt;&lt;/if&gt;&gt;

?P
Perhaps he could have asked the panther about the wand earlier?
Well, it&#39;s probably completely useless to Nero&#39;s adventure anyway.

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="642" name="n2x Wand Try 1" tags="mt-ready" position="7725,1800" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;
&lt;&lt;vi-always n_wandAsked false&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

Nero
&lt;&lt;= $n_kopicVisited ? &quot;has picked&quot; : &quot;picks&quot;&gt;&gt;
up the wand. He was not certain before,
but it&#39;s clear from the grip that it&#39;s a
&lt;&lt;mt-seen $kn_Kopic&gt;&gt; 
  &lt;&lt;tran-cut [[Kopic Classic|n2x Kopic]]&gt;&gt;.
&lt;&lt;/mt-seen&gt;&gt;
The squishy tube-like attachment on the end
is a little heavier than he expected.
It gives the wand an awkward balance.

?P
&lt;&lt;if $n_mageSight&gt;&gt;
  The wand is currently fully charged with exotic energy.
  Nero still does not know how to align with that energy,
&lt;&lt;elseif $n_wandMageSight&gt;&gt;
  When the wolf had mage-sight, he saw that the wand was
  fully charged with exotic energy.
  Nero does not have any energy left himself,
&lt;&lt;else&gt;&gt;
  The wolf wonders if the wand is charged.
  Nero does not have any energy left himself,
&lt;&lt;/if&gt;&gt;
but the wand does not need him to use his own magic.

?P
He waves the wand a bit without activating it,
just to get a feel for it.
It doesn&#39;t seem like the attachment would make casting easier in any way.
If it were some type of a power augmentation, why is it
placed on the tip instead of the grip?
The attachment is also too squishy to be helpful as an aiming sight.
Even a mild motion causes it to wobble and throw doubt on any alignment
with the tube.

?P
Nero is puzzled. Well, there&#39;s nothing left but to try it.

?P
[[Continue|n2x Wand Try 2]]

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="643" name="n2x Wand Try 2" tags="mt-ready" position="7850,1800" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_extraHorny&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

The wolf raises the magic wand and poses in a precise Canopren position,
aiming at an empty spot on the wall.

?P
He twists his wrist with the correct motion...

?P
&lt;&lt;fade-in 6s&gt;&gt;
The squishy attachment glows green,
and the wand suddenly begins to &lt;em&gt;vibrate&lt;/em&gt;
with a growly sound.
Nero is startled and drops it.

?P
The surprising wand continues to make
alarming sounds as the vibration rattles the
shaft of the wand against the surface of the floor.
The rattling causes the wand to wriggle in an unpredictable way
across the room, thankfully &lt;em&gt;away&lt;/em&gt; from the wolf.

?P
Eventually it ends up underneath a bookcase,
where it continues to rattle against the surfaces confining it,
apparently content to stay within that den.

?P
Nero regrets activating the wand. He tries to ignore its
continuous, uncanny growl.
?P
$n_afterAction

&lt;&lt;/fade-in&gt;&gt;

&lt;&lt;run
  $n_wandRanAway = true;
&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="644" name="n2x Wand Used" tags="mt-ready inclusion" position="7600,2100" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-always n_candleLit false&gt;&gt;
&lt;&lt;vi-always n_free true&gt;&gt;
&lt;&lt;vi-always n_ivexGone true&gt;&gt;
&lt;&lt;vi-always n_wandUsed true&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;

&lt;&lt;kw-announce&gt;&gt;

The wand on the floor is a Kopic Classic
with a squishy attachment on the tip.
Ivex calls it his... &lt;em&gt;Fuck Toy 9000&lt;/em&gt;.

?P
Nero unfortunately &lt;em&gt;does&lt;/em&gt; know what the attachment can do.
His cock is urging him to use it again. The attachment&#39;s
embrace of his cock was an intense vibration that felt incredible,
and the pleasure felt like it was building to an orgasm that was
beyond any that he&#39;s ever felt before.

?P
But the wolf is a little spooked by the wand getting &lt;em&gt;stuck&lt;/em&gt;.
Not to mention the sinister way that Ivex mentioned how quickly
the &lt;em&gt;pleasures sublime&lt;/em&gt; would have his victims begging.

?P
Nero does not trust that the wand is
simply pleasure without consequence,
and he scolds his cock (again!) for being thoughtlessly reckless.

?P
And it&#39;s unlikely the wand will help him escape.

&lt;&lt;/nobr&gt;&gt;\</tw-passagedata><tw-passagedata pid="645" name="n3a Start" tags="mt-sketch section-start" position="10525,3375" size="200,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;vi-ignore n_mageSight&gt;&gt;
&lt;&lt;vi-ignore n_mirrorBroken&gt;&gt;
&lt;&lt;vi-ignore n_tooClever&gt;&gt;

save/load important 1F state:
barbs, extraHorny, knifeTaken, mirrorTaken, pawed, tooClever.

?P
down the stairway.

?P
reminisce on 1F experience,
vary on abused and subby.
clear implication they&#39;re not important.
use &lt;mark&gt;mark&lt;/mark&gt; on the important state.

?P
[[Continue|n3a hallway]]
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="646" name="n3a escaped" tags="mt-sketch" position="12775,3400" size="200,200">there are two paths into here.

rescued-gem means blob has teleported too, with lion in it.
nero can escape blob,
he has magic back, but can&#39;t dismantle blob quickly.
just shove blob into corner, regrets about lion

made-gem can be alone or with lion.
with lion, can un-thrall him and use him for punishment.

Nero has magic back, Ivex is helpless without his gems. trap him.

Nero&#39;s contract is rescuing his patron&#39;s cock, but he doesn&#39;t know that. he&#39;s told it&#39;s an ornate box with something precious or blackmail-y. Ivex has applied portal chastity to a couple useful people, and is using that for things like gem supply. it&#39;s a cabinet somewhere in the tower, there&#39;s maybe 4-6 boxes, not labelled.

retrieve the portal-boxes for your contract.
if had caged or dominated, can look in boxes.

boyscout choice: [[n9x satisfied]]
revenge on ivex: [[n9x dominant]]
lion gives nero ideas, nero takes over: [[n9x ascendant]]</tw-passagedata><tw-passagedata pid="647" name="n3a extraction room" tags="mt-sketch" position="11100,3375" size="200,200">examine blob and altar
examine desk and books.

nero knows enough to not mess with the blob.
doesn&#39;t notice the teleport gem in it right away.

spellbook, he finds interesting, recognizes it needs a gem. describe each spell in some detail.
spellbook is too big to pick up, or maybe locked down

journal, boring. reads part of the first entry, flips through it, not seeing anything interesting, then focuses on the last entry.
doesn&#39;t see note about lion.
mention of teleport gem, prompt to look at blob.
yes, it&#39;s still the same blob, and there&#39;s the gem, how to get it?

if gotMirror, there&#39;s a tk matrix here too, but trying it fails to dislodge the gem.

search desk finds a few weird magic artifacts, useless except for the slippery cockring, which Nero doesn&#39;t realize is a cockring.

but he does recognize the slippery spell. (glyphs, plus noticeable effect when he touches it).

when ring held, can drop or wear it.
when ring dropped, can pick up or wear it.
when ring worn, can remove or drop it.

wearing ring lets you dive into blob with a rope.
rope lets you escape the blob.
slippery doesn&#39;t let you attach rope to yourself, you have to hold it with muzzle.
rope in hand doesn&#39;t work because it will slip through.

can&#39;t touch gem, blob is too active, prevents it.
suggest that you need something to distract the blob.
specifically name lion if you&#39;ve seen lion.

ring has a short timer.
put it on, you get a green glow.
after 1 action, glow turns yellow, ring starts shrinking.
if you don&#39;t take it off when yellow, any other action locks it down, glow turns red.
this is several bad endings:
lion is hunting you [[n9e wrecked]]
lion is following you [[n9e overwhelmed harsh]]
lion not hunting or following [[n9e overwhelmed mild]]

[[n3a hallway]]

[[n3a escaped]]</tw-passagedata><tw-passagedata pid="648" name="n3a hallway" tags="mt-sketch" position="10800,3375" size="200,200">there&#39;s an obnoxious statue of Ivex here, enormous erection

lion room door is glass, can see through.
opens easily with a push, never closes.

extraction room door is ornate, doesn&#39;t push or pull.
touching it starts a fanfare. next turn it opens. turn after that it closes.

pulling on erection on ivex&#39;s statue starts it toppling toward the ornate door.
if door is already open
- 0 - statue falls into the opening
- 1 - door tries to close, statue blocks it, doors open again
- 2 - statue resets
- 3 - door closes
if door isn&#39;t already open
- 0 - statue falls on door, starts sliding
- 1 - statue hits gem, door starts fanfare
- 2 - statue resets, door opens
- 3 - door closes

maybe tk matrix in this room too

[[n3a lion room]]
[[n3a extraction room]]</tw-passagedata><tw-passagedata pid="649" name="n3a lion room" tags="mt-sketch" position="10800,3100" size="200,200">nero recognizes thrall spell.
nero never sees journal entry about lion.

if gotMirror, nero can contact another tk matrix, can immobilize the lion.
- only one tk matrix in room, so don&#39;t need to name it. sprite announces name when you contact.
- immobilizing lion makes the blank gems available, giving the player an easy solution to floor 2 after doing the hard solution on floor 1
- player has option of taking lion out with him

if tried blob-dive, suggest lion could distract blob.

lion categorizes nero as not-visitor and starts make-thrall.
leaves to make a thrall gem.
nero has a chance to get a blank gem.
lion comes back and offers thrall gem.
definitely do not accept.

start lion follow (make thrall).

during followed, you can do as many actions as you like,
but moving to another room always drops everything you&#39;re holding.
worn ring is not dropped.

it&#39;s possible to reach escape while followed, without having already explored the extraction room, but it&#39;s harder.

find some way to establish the can&#39;t-take-off string.
suggest that the slippery ring will let you take off the string.

there are suggestions that some verbal trigger can switch the lion to a different mode. most things fail, but one thing switches lion from following to hunting (feral and rapey).

when hunted, every action that isn&#39;t a move will automatically drop everything you&#39;re holding and move you.
automatic move from hallway is always to lion room, unless extraction room door is open.

you can keep trying to get a blank gem while followed or hunted, but there&#39;s no way to get the gem and the spellbook to the same place.

if you take off the ring when hunted, you lose the ring.

losing ring while hunted, loses it permanently.
in the extraction room, it falls into the blob.
in the hallway, it rolls to the lion room.
in the lion room, it falls into a drain.
this is bad ending: hunted

[[n3a hallway]]
[[n9e hunted]]</tw-passagedata><tw-passagedata pid="650" name="n9a Tamed End 1" tags="mt-ready" position="9675,2775" size="100,100">&lt;&lt;nobr&gt;&gt;

The sound of snapping fingers feels distant at first.
As consciousness returns, the sound grows closer and closer until
it&#39;s loud enough to be annoying.

?P
The snapping comes from right beside his ear.
A voice nearby says, &quot;Wakey wakey...&quot;

?P
The wolf wakes and sees &lt;em&gt;him&lt;/em&gt;.
It&#39;s the black panther from his dreams,
crouched above him.
The wolf cringes on the floor he&#39;s lying against.
He&#39;s afraid of the panther,
but does not remember why, or even the panther&#39;s name.

?P
The panther speaks. &quot;Nero, hello, are you in there?
Can you hear me, Nero? Do you understand what I&#39;m saying?&quot;

?P
&lt;em&gt;Nero&lt;/em&gt;. The word doesn&#39;t feel familiar,
but the wolf is happy to be given a name.
&quot;I&#39;m Nero!&quot; he says.
He thumps his tail against the floor,
a wag of nervous pleasure.

?P
The panther smiles, and Nero feels deep relief.

?P
&quot;Good. I&#39;m glad you&#39;re not &lt;em&gt;completely&lt;/em&gt; an idiot.&quot;

?P
&quot;I&#39;m not &lt;em&gt;completely&lt;/em&gt; an idiot!&quot; Nero repeats.
His cock grows a bit from the kind words,
and he stretches his head down to try to lick his leaky tip,
but he can&#39;t reach it. He whines a bit in confusion,
and then remembers he can use his paws instead.

?P
Ivex kicks the wolf&#39;s paws away from his cock. &quot;Stop that!&quot;

?P
Nero instantly says, &quot;I&#39;m sorry!&quot; He wriggles up from the floor
to bring his head close to the panther&#39;s crotch
and starts to lick the cloth covering the panther&#39;s cock.
The wolf remembers from dreams that the panther likes the wolf&#39;s
tongue, and he&#39;s eager to try to soothe the anger.

?P
The panther laughs and says, &quot;There will be plenty of time for that
later. Right now, sit! Like a good dog.&quot;

?P
Nero does. His tail wags, and his cock grows harder.

?P
But then, the panther starts asking questions the wolf does not know how
to answer. &quot;Who sent you?&quot; seems to be the most important one.
The wolf cries and begs for some other way to please the panther,
but the panther insists on an answer.

?P
The panther even brings out an orange gem that makes Nero&#39;s heart race
with terror for no reason he can remember. But he knows somehow that
it contains enormous pain that the panther enjoys. And the only thought
the wolf has in his mind
is that accepting the pain is the only way it will stop.

?P
He arcs his body in a show of submission
and cries out, &quot;Please use the orange gem on me!&quot;

?P
The panther does. Nero writhes in agony but stays where he&#39;s supposed to be,
like a good dog.

?P
Eventually, the panther seems resigned to not having answers,
and he gives up on those questions.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed End 2]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="651" name="n9a Tamed End 2" tags="mt-ready" position="9800,2775" size="100,100">&lt;&lt;nobr&gt;&gt;

It takes some time for the panther to accept the wolf&#39;s earnest service.
Nero is adaptable and patient, and he happily settles into a life
shaped by the panther&#39;s whims.
The panther&#39;s name is Ivex the Magnificent,
but he likes to be called Master,
and Nero enjoys saying it.

?P
Service is not always easy. Master is often angry,
and he likes to use tortures that make the wolf
anxiously beg for some other way to satisfy the panther.
The wolf has the most success when he thinks of a new
humiliation and embarrassment he can perform.
And sometimes he thinks up less scary tortures that
Master finds fun enough to use for a while,
before the panther resumes using his favorite painful devices.

?P
Master has other pets and sometimes visitors.
There&#39;s a lion who&#39;s pretty dumb,
and another wolf who plays dead all day.
&lt;&lt;if $n_castEndgame&gt;&gt;
  One time a jaguar with silver fur visits when Master is gone.
  The jaguar says his name is ?blank.
  He scratches the wolf&#39;s ears and shakes his head sadly before
  going away. Nero likes him, but the jaguar never returns.
  All the other visitors
&lt;&lt;else&gt;&gt;
  The visitors are all different, but they all
&lt;&lt;/if&gt;&gt;
spend some time on the wooden cross before Master
puts them away for good. In the end, the panther always calls for
Nero, who knows how to satisfy him best.

?P
Sometimes Nero has a disturbing dream about his Master.
In the dream, the panther&#39;s face is screaming and covered in blood.
His legs are broken. His arms are consumed with fire.
A shapeless beast is using sharp teeth to shred the flesh
at the panther&#39;s crotch.
There&#39;s no &lt;em&gt;reason&lt;/em&gt; for the panther&#39;s condition.
Nothing caused it. Nothing made it happen. It just is.

?P
Nero does not forget the dream when he wakes, but he does not
understand it. It&#39;s a strange vision from some crack
in his mind. Perhaps it&#39;s an omen, a warning that
the panther has enemies that Nero will need to be ready for.

?P
The wolf pours his whole body and soul into becoming the
best, most loyal, abused dog that he can ever be for
Ivex the Magnificent, his Master.
There are no other choices he can see.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[The End|n9a Tamed Restart]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="652" name="n9a Tamed Harsh 1" tags="mt-ready" position="8550,2850" size="100,100">&lt;&lt;nobr&gt;&gt;

He clamps his jaw shut anyway.
Nero knows, he expects, that the panther
will use him for satisfaction in one way or another,
but the wolf will never be an eagerly whining lackey
for the perverted panther&#39;s pleasure.
Ivex can apply whatever tortures he wants,
and Nero will suffer, maybe even scream, but that is &lt;em&gt;all&lt;/em&gt;
that the panther will get.
Ivex will just have to paw himself off to the sounds of
the wolf&#39;s agony, if that&#39;s the sort of thing that the panther enjoys.
And when Ivex is done with his sordid pleasure,
there will be time for Nero to recover, plan, and escape.

?P
Ivex snorts. &quot;I did not expect a pathetic wolf like you
to put up such a fight. I&#39;m very eager to see how &lt;em&gt;much&lt;/em&gt;
of a fight you are capable of.&quot;

?P
The panther starts with familiar tortures, light taps on the wolf&#39;s
trapped balls that become solid punches that make Nero gasp
from the pain that again radiates into his gut.
Nero allows himself to writhe and react with abandon,
focusing his energy on keeping his muzzle shut.
He only opens his jaw slightly to suck in deep breaths
when he sees that the panther&#39;s hands are fully
occupied with torment at the wolf&#39;s crotch.

?P
The upside-down wolf&#39;s cock remains stiff and steady,
an unnatural flagpole raised to signal the confusion of his lust.
It&#39;s a lingering effect of the candle, of course.

?P
He shivers with anticipation each time the panther waits
an extra moment before bashing the wolf&#39;s balls again.
And each time the panther lands a strike with precision,
the wolf&#39;s cock pulses with excitement.
But all those tingles of near-pleasure are an accident of
this monstrous situation,
created by this theater of the sadistic panther&#39;s desires.

?P
There&#39;s no shame in feeling turned on right now.
This is an ordinary reaction to an extraordinary ordeal.
Nero would never react this way at any other time,
would never seek to enter any place that guaranteed his pain.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed Harsh 2]]
  &lt;&lt;set $n_endingVariant = &quot;harsh&quot;&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="653" name="n9a Tamed Harsh 2" tags="mt-ready" position="8675,2850" size="100,100">&lt;&lt;nobr&gt;&gt;

Ivex pulls the wolf&#39;s balls outward, as he did before,
but this time there is no arcane candle to transmute the pain.
Nero feels the strain on his balls as burning ropes
that connect the aching at his crotch to a twisting
knot in his gut. He fights the feeling of nausea
and the pounding of the blood that&#39;s
rushing through his upside-down head.

?P
The wolf feels a firm touch and a wetness on his stretched-out balls.
The panther is using his tongue
to lick against the fur,
to move the hairs aside
and rasp the tongue&#39;s rough surface across
a small bit of the sensitive skin stretched tight
against the wolf&#39;s throbbing nuts.

?P
The end of each stroke of the tongue is almost pleasant,
and the cooling from the evaporating spit is almost a relief.
It&#39;s a small bit of sensation that Nero would normally not
notice. The feeling would not deserve any attention if it were
a note in a symphony of pleasure. But played right now,
in this rhapsody of agony, the slight, cooling caress is a
sublime chord of ecstasy that the wolf does not know how to process.

?P
Ivex finishes his licking and tasting of the wolf&#39;s furry sack,
and then continues the torment by
teasing the balls with his teeth.
The tips of the panther&#39;s incisors
move to grasp the sides of one ball at its widest.
The grasp is light for a moment, for two licks of
the tongue. And then he bites.

?P
Nero screams between gritted teeth. He does not know
if the panther has bitten through, or even drawn any blood,
but the pain is a sharp glass spike that consumes his
attention in a way that the punching aches did not.
There is nothing in his mind that is not the pain,
not even thoughts of how to stop it, just a piercing
alert and alarm of agony.

?P
The panther releases his bite, and then moves to bite the
other ball before the wolf can recover. The experience
of the bite on the first ball, still fresh in his memory,
does not make it any easier to endure the bite of the second.

?P
When the panther releases that ball and returns his attention
to the first, Nero gasps out, &quot;No!&quot; but then clamps his mouth
shut again, with a feeling of shame.

?P
Ivex purrs, and then bites again, more gently,
increasing the pressure slowly until the wolf begins to whine.
The panther lingers at that bearable point,
and then pulses the grip of his jaws tighter in a slow,
steady rhythm, licking his tongue on the wolf&#39;s shrieking ball
in between the spikes of unbearable pain.

?P
And then he clamps his jaw down tighter than ever, for the briefest moment,
before releasing the ball completely. Nero screams and writhes
the story of his ball&#39;s agony within his bonds,
but at the same time his cock becomes drenched with
sensations of pleasure.
The panther is gently licking the shaft of the wolf&#39;s dripping cock,
as it somehow stays stiffly erect the whole time Nero&#39;s body and mind
react and recover from that intense, impossible pain.

?P
When Nero does recover,
when his screaming stops and the touches and tugs
of the panther begin to feel like a pleasure uncomplicated by suffering,
Ivex relaxes his grasp of the
wolf&#39;s balls, takes a step back, and laughs.

?P
&quot;That was wonderful! You should have been a warrior.
Willpower like that is wasted on a
&lt;&lt;= $n_thief ? &quot;thief&quot; : &quot;mage&quot;&gt;&gt;.&quot;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed Harsh 3]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="654" name="n9a Tamed Harsh 3" tags="mt-ready" position="8800,2850" size="100,100">&lt;&lt;nobr&gt;&gt;

Nero&#39;s ears grow warm as they twitch with distress,
but the wolf is feeling relief that his plan is succeeding.
The sadistic panther has dragged the wolf through the
worst torture he&#39;s ever endured, beyond anything he ever
imagined. But pain, no matter how intense,
is still just a transient sensation,
an accident of his biological body that
does not touch anything in his soul.
Nero knows who he is, who he&#39;ll always be.
And he knows what he can do, &lt;em&gt;will&lt;/em&gt; do,
once he&#39;s set himself free.

?P
Ivex reaches into a pocket and pulls out an orange gem.
&quot;That was a pleasant appetizer.
But I&#39;m ready now for the main course.&quot;

?P
He licks the gem and places it against the wolf&#39;s erect cock,
where it stays and starts to glow.

?P
The glow brings with it a warmth, a heat that slowly becomes
a flame against his skin, a burning that grows and spreads
out from the gem to bathe the entire surface of the wolf&#39;s erect,
throbbing cock.

?P
Nero tenses his muscles and braces himself to endure the peak
of the pain, but it never reaches a peak. Every moment,
he feels a pin of fire drawing a spiral up and down
the length of his stiff
red cock. The trail drawn by the pin is an agony
of heat that does not diminish, and it grows stronger
when the pin returns in its circuit to stroke an overlapping line.
Each moment, the wolf thinks the burning
cannot possibly get worse, but every moment it does.

?P
His awareness becomes consumed by the sheath of relentless pain.
The pattern of it, the weaving of the line of fire
fascinates his mind.
His consciousness becomes an oracle anticipating the path of the flame,
and the oracle detaches from his body to better study the incineration.
In the distance, he can see a naked
wolf thrashing against leather bonds on a wooden cross.
The sound emitted by the wolf&#39;s mouth is an annoyance,
but the purity of the realm of flames draws him deeper
into its heart of ecstatic agony.
His disembodied self falls into the fire&#39;s intense embrace
and leaves all other distractions behind.

?P
And then, the pain completely stops.
Nero returns to his body and collapses in his bonds.
His body pants rapid, shallow breaths.
The wolf does not want to see the
burnt ruin of his cock, but he forces himself to look
anyway. And he&#39;s not too surprised to see that his cock is
still intact, apparently unharmed, with the orange gem
still attached and glowing.

?P
When the wolf&#39;s breathing becomes more normal,
the heat on his cock slowly begins again.

?P
Ivex speaks. &quot;It is of course a simple matter to
cause a great deal of pain that does not stop,
and sometimes that&#39;s the most effective method of
getting what I want. But when a subject &lt;em&gt;wants&lt;/em&gt;
to fight, it only seems fair to give him a chance to
keep fighting. And besides, it&#39;s much more fun.&quot;

?P
Nero is drenched in rising pain and does not really hear
all the words that the panther says, but he knows
it isn&#39;t really important. This is not an interrogation.
It&#39;s a perverted game. And he&#39;s not too surprised to see
that when the unbearable pain suddenly stops again,
&lt;&lt;if $n_barbs&gt;&gt;
  the dripping, barbed head
&lt;&lt;else&gt;&gt;
  the smooth, glistening head
&lt;&lt;/if&gt;&gt;
of the panther&#39;s stiff cock is rubbing against the
fur underneath his panting muzzle.

?P
Well, this excruciating torture can continue however
long the panther wants,
but Nero is firm in his resolve to not collaborate in the
panther&#39;s pleasure.
He takes comfort from the fact
that the extreme pain causes mindless thrashing that
makes his mouth a poor receptacle for Ivex&#39;s cock.

?P
Nero continues rapid breaths with his jaw clenched shut,
until the burning begins again...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed Harsh 4]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="655" name="n9a Tamed Harsh 4" tags="mt-ready" position="8925,2850" size="100,100">&lt;&lt;nobr&gt;&gt;

When the burning stops again, Nero notices that he is now lying
down with his back against the wooden cross,
and his jaw is stuck in place, open.

?P
Ivex waits until the wolf&#39;s breathing calms a bit,
then taps the wolf&#39;s nose for attention.
The panther points at something
behind the cross that Nero cannot see.

?P
&quot;&lt;em&gt;Those&lt;/em&gt; are Gravity Crystals,&quot; says the panther.

?P
He then taps a glowing crystal placed in a hole in a
wooden post near the wolf&#39;s head.
&quot;And &lt;em&gt;this&lt;/em&gt; is a Dream Crystal.
You should learn to tell them apart.
The Dream Crystal is a power-hungry magic,
but my realm can keep
it active for several hours when it&#39;s
doing something as small as holding the bones of your
jaw exactly where they are right now.&quot;

?P
Ivex demonstrates his control by gently placing the ?barbed head
of his cock inside the wolf&#39;s open mouth.
Nero struggles to pull back
or move his head away, but his jaw cannot move.
He tries to close his teeth, bite down on the repulsive
meat of the panther, but the Dream Crystal&#39;s
hold of the wolf&#39;s jaw is perfect and impossible to argue with.

?P
His bones are fixed in place, but his tongue is not.
The wolf uses his tongue to try to block the panther,
but Ivex just chuckles and gently thrusts,
rubbing his ?barbed cock against
the slick surfaces within the wolf&#39;s muzzle.
&lt;&lt;if $n_barbs&gt;&gt;
  The spikes on the head of the cock are a slight tickle as
  the panther pushes in, and they become a harsh rake as he pulls
  his cock out.
&lt;&lt;else&gt;&gt;
  The bulging head of the panther&#39;s cock drips pre-cum into
  the wolf&#39;s mouth, and Ivex mixes the pre-cum with saliva as he
  pushes his cock in and out.
&lt;&lt;/if&gt;&gt;
The feeling isn&#39;t pleasant, but it&#39;s an easily bearable discomfort
compared to the agony that came, and will probably come again,
from the orange gem on the wolf&#39;s cock.
?P
Nero&#39;s stubborn tongue does not discourage the panther,
and the wolf suspects that his defiance makes the panther&#39;s cock harder,
but surrender is not an option here.
He resists as well as he can, for as long as he can.
The pain on his cock begins again, increases again.
The panther&#39;s thrust against his mouth gets stronger...

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed Harsh 5]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="656" name="n9a Tamed Harsh 5" tags="mt-ready" position="9050,2850" size="100,100">&lt;&lt;nobr&gt;&gt;

When the wolf returns to his body again, the
?barbed head of the panther&#39;s cock is
irritating a throat that&#39;s already sore from screaming.
Nero gags and blocks his throat with his tongue
when the panther pulls back for another thrust.

?P
The tongue &lt;em&gt;does&lt;/em&gt; stop the thrust from assaulting Nero&#39;s throat again,
but Ivex does not stop his rhythm.
&lt;&lt;if $n_barbs&gt;&gt;
  The spines at the tip of the panther&#39;s cock
  continue to rake the tender surfaces of the wolf&#39;s
  tongue and immobile mouth.
&lt;&lt;else&gt;&gt;
  The slick head of the panther&#39;s cock
  continues to bash the tender flesh on the underside
  of the wolf&#39;s tongue where it connects to his
  immobile jaw.
&lt;&lt;/if&gt;&gt;
And it&#39;s clear that Ivex is happy enough to toy with the
wolf&#39;s resistance until the orange gem makes resistance impossible again.

?P
Nero tries using his tongue to push the intrusive cock
against his sharp canine teeth. He hopes that the
rasping of hard enamel against the panther&#39;s tender skin
will be unpleasant enough to stop the panther&#39;s fucking,
at least for as long as the wolf has awareness of something other than pain.

?P
Ivex laughs as he continues to thrust.
&quot;I love what you&#39;re doing with your tongue.
And your teeth are such a delight.
Their rubbing sends perfect little shivers into my cock.
Of course, it helps that I&#39;ve enhanced your teeth
with a simple spell that makes their touch the smoothest glide.
&lt;&lt;if $kn_Oil || $kn_Younger&gt;&gt;
  You might have heard of it.
&lt;&lt;else&gt;&gt;
  You probably haven&#39;t heard of it.
&lt;&lt;/if&gt;&gt;
It&#39;s called Oil of Dragons.&quot;

?P
Nero has heard of it, of course. But he has never
imagined that it could be used in this way.

?P
The revelation is demoralizing.
All of his resistances are useless against Ivex&#39;s assault.
But still the wolf must try, must &lt;em&gt;keep&lt;/em&gt; trying.
His soul will always assert that he is a being with a will of his own,
not just an empty vessel for the panther&#39;s desires.

?P
The vessel, never empty, becomes overfilled again with
unbearable pain.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed Harsh 6]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="657" name="n9a Tamed Harsh 6" tags="mt-ready" position="9175,2850" size="100,100">&lt;&lt;nobr&gt;&gt;

The cycle of rough fucking, useless resistance,
and transcendent pain repeats and continues.
Nero tries to keep count of how many times the
orange gem&#39;s burning torture has overwhelmed him,
but as he repeats the number six, six, six, six
in his mind, he realizes he does not know if the
number is the agony that just finished or
the one that&#39;s coming next.

?P
The uncertainty upsets him. He tries to ask aloud, &quot;Is this six?&quot;
but the cock thrusting in his mouth does not give him
enough space to make himself understood.
The number feels too familiar.
Has he repeated it before?
Maybe six is the only number he&#39;s counted,
ever counted, over and over.

?P
Nero tries to judge the remaining strength of the
glowing Dream Crystal, but his vision is blurry
from tears in his eyes. He sees double. There are two
Dream Crystals. No, more than two. Six of them.
The six Dream Crystals pulse and mock his
futile resistance to their brutal hold of his jaw,
as the rest of his body screams and
uncontrollably writhes again from the lance of cleansing fire.

?P
Eventually, in the sixth repeat of the sixth cycle,
the wolf&#39;s strength is exhausted. And this time,
when the orange gem suddenly stops its
excruciating pain,
Nero comes back to his body with no energy left
to resist. His limbs fall slack against the cross.
His tongue flops out of the side of his mouth as he pants
fast breaths around the panther&#39;s cock.

?P
Ivex pauses for a moment and holds his stiff cock motionless
in the wolf&#39;s defeated mouth. The panther removes the
orange gem from the wolf&#39;s quivering, still-erect cock.
&lt;&lt;arc-only&gt;&gt;
  And then...
&lt;&lt;/arc-only&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[And then...|n9a Tamed Harsh 7]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="658" name="n9a Tamed Harsh 7" tags="mt-ready" position="9300,2850" size="100,100">&lt;&lt;nobr&gt;&gt;

Ivex celebrates the wolf&#39;s surrender with fast and deep thrusts.
&lt;&lt;if $n_barbs&gt;&gt;
  The spiny head of the panther&#39;s cock ravages
&lt;&lt;else&gt;&gt;
  The battering ram of the panther&#39;s cock bashes
&lt;&lt;/if&gt;&gt;
the wolf&#39;s throat
in a way that&#39;s almost a relief.
Nero gags and writhes from the abuse,
but it&#39;s a &lt;em&gt;bearable&lt;/em&gt; pain that keeps him
anchored in his body.
The rapid rhythm relentlessly interrupts his breathing,
and the lack of breath brings a feeling of
light-headedness that&#39;s almost ecstasy.

?P
And then, the panther claims his ultimate victory
by shooting his cum deep inside the wolf&#39;s throat.
Nero doesn&#39;t taste it, but he feels the unfamiliar
stickiness crawling down the sides of his throat
as he tries to swallow.

?P
One last shuddering thrust.
The panther drags the ?barbed head of his
cock out, across the wolf&#39;s tongue, and he &lt;em&gt;does&lt;/em&gt; taste it.
It&#39;s not so different from the time Nero licked his own cum,
but the panther&#39;s distinct flavors become burned
into the wolf&#39;s mind as a signal of the panther&#39;s satisfaction,
a flag for the end of the ordeal of agony.

?P
Ivex rubs his softening cock against the fur of the wolf&#39;s muzzle.
Nero floats in a sea of delirium, a sublime feeling that
bathes him with more than simple relief.

?P
&quot;That was beautiful,&quot; says the panther. &quot;I love breaking
through the resistance of brutish warriors, but there&#39;s
something different, something special about overwhelming
a stubborn subject who&#39;s intelligent enough to truly understand
all the power that I control.&quot;

?P
Ivex deactivates the Dream Crystal, and the wolf&#39;s jaw
relaxes. Nero&#39;s body is exhausted, and his mind starts to drift
toward sleep. But he anxiously jerks awake
when he sees Ivex make another gesture.
Something new emerges
from another cabinet drawer.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed Harsh 8]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="659" name="n9a Tamed Harsh 8" tags="mt-ready" position="9425,2850" size="100,100">&lt;&lt;nobr&gt;&gt;

The new object is a leather collar, the type that people use on pets.
There&#39;s a green gem in the middle of it,
which glows when the panther touches it.

?P
Ivex says, &quot;I have a thrall spell that works very well,
and I&#39;m happy enough with my lion. But he is a dumb brute,
and you are not.&quot;

?P
As the panther fastens the collar around Nero&#39;s neck,
the wolf feels a presence emerge from the gem and invade his spirit.
He recognizes it, an arcane creature that&#39;s known as an imp.
The creature is the agent of enthrallment, and it enforces
obedience by applying
&lt;span class=tame-word&gt;inhibition&lt;/span&gt;
magic to any intention
that the imp&#39;s master does not allow.

?P
Nero is too tired to
&lt;span class=tame-word&gt;fight&lt;/span&gt;
the imp now, but he doesn&#39;t need to.
No matter how well an imp is constructed, there&#39;s always some flaw
in its instructions. There will be some small permission that the
master did not expect to be a danger, but it will be enough leeway for
a perfectly obedient thrall to
&lt;span class=tame-word&gt;destroy&lt;/span&gt;
his master and
&lt;span class=tame-word&gt;escape&lt;/span&gt;
control.
There will be plenty of time later for Nero to find that flaw,
once he&#39;s rested and recovered from this ordeal.

?P
Ivex continues, &quot;I&#39;m confident the lion will not
&lt;span class=tame-word&gt;escape&lt;/span&gt;
enthrallment,
but you... are clever. And I admire that! You&#39;re very fun to play with.
But cleverness has a way of
finding unexpected ways to
&lt;span class=tame-word&gt;escape&lt;/span&gt;.
I&#39;ve thought about this problem
for a long time, and I&#39;ve developed a new variety of imp that I think
will be a satisfactory solution.&quot;

?P
The imp is now extending its web of arcane tentacles throughout Nero&#39;s
mind. He&#39;s felt this before in
&lt;span class=tame-word&gt;defense&lt;/span&gt;
exercises. But this time
feels different. It doesn&#39;t feel like
&lt;span class=tame-word&gt;inhibition&lt;/span&gt;...

?P
Ivex chuckles. &quot;Congratulations on being the first subject to test
my alternative to enthrallment. I call it,
&lt;em&gt;Ivex the Magnificent&#39;s Taming!&lt;/em&gt;&quot;

?P
&lt;&lt;set _realization = `
  Nero recognizes it now. The imp is not using
  &lt;span class=tame-word&gt;inhibition&lt;/span&gt;.
  It&#39;s using
  &lt;span class=tame-word&gt;repression&lt;/span&gt;!
  The imp&#39;s web catches several of the
  wolf&#39;s thoughts and starts to remove them from his mind.
`&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;span id=&quot;tame-1&quot;&gt;
    &lt;&lt;link Continue&gt;&gt;
      &lt;&lt;script&gt;&gt;
        MT.startTaming();
        /* removing the &lt;a&gt; will mess with scroll position */
        $(&quot;#tame-2&quot;).append(&quot;&lt;br&gt;&lt;br&gt;&quot;);
        $(&quot;#tame-1 a&quot;).remove();
        setTimeout(() =&gt; $(&quot;#tame-2&quot;).addClass(&quot;tame-unhide&quot;), 200);
      &lt;&lt;/script&gt;&gt;
    &lt;&lt;/link&gt;&gt;
  &lt;/span&gt;
  &lt;div id=&quot;tame-2&quot; class=tame-hide&gt;
    _realization
  ?P
  [[Continue|n9a Tamed Harsh 9]]
  &lt;/div&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  _realization
&lt;&lt;/arc-only&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="660" name="n9a Tamed Harsh 9" tags="mt-ready" position="9550,2850" size="100,100">&lt;&lt;nobr&gt;&gt;

Nero whines from panic and exhaustion. He does not have the strength
right now to resist the imp&#39;s extraction.

?P
At least it seems to be limited to removing surface thoughts.
Imps are not used by
&lt;span class=tame-gone&gt;repression&lt;/span&gt;
mages, because imps are unable to reach deep enough to
pull out long-term memories.
Nero is grateful for that.

?P
The imp&#39;s spectral tentacles are familiar, even if its actions are not.
The wolf quickly realizes that he needs to
&lt;span class=tame-gone&gt;avoid&lt;/span&gt;
&lt;em&gt;thinking&lt;/em&gt; whatever it is that the imp will not allow.
Which is somewhat tricky when he doesn&#39;t know what the
imp is hunting, and any attempt to consider the imp&#39;s targets will make those
thoughts vulnerable to the imp&#39;s attention.

?P
Nero begins reciting multiplication tables in his head, tries to
&lt;span class=tame-gone&gt;block&lt;/span&gt;
out other thoughts and
&lt;span class=tame-gone&gt;drown&lt;/span&gt;
his consciousness in the purity of a world of endless numbers.

?P
Ivex laughs. &quot;That&#39;s really clever. I should have anticipated that.&quot;
Somehow the panther has realized what Nero is doing. Is he mumbling
the numbers out loud?

?P
The panther crouches to put his muzzle right against the wolf&#39;s ear.
&quot;I&#39;ve tried to ensure the imp still allows
you &lt;em&gt;resist&lt;/em&gt; me, but it will remove your ability to
&lt;span class=tame-gone&gt;attack&lt;/span&gt; me,
&lt;span class=tame-gone&gt;avoid&lt;/span&gt; me,
or &lt;span class=tame-gone&gt;escape&lt;/span&gt;.&quot;

?P
Nero speaks numbers louder to try to
&lt;span class=tame-gone&gt;ignore&lt;/span&gt;
the panther&#39;s words,
to try not to hear the sentences that enter his mind,
which bring ideas to his consciousness
that the imp immediately snatches away. The imp&#39;s actions are not gentle.
The uprooting of a surface thought is also
&lt;span class=tame-gone&gt;violently&lt;/span&gt;
severing its connections deep within his mind,
ripping apart the threads of ideas and beliefs that
make the fabric of his spirit.

?P
The wolf&#39;s numbers become a scream of frustration.
He&#39;s unable to stop his mind from trying to &lt;em&gt;understand&lt;/em&gt;
everything, even when the panther&#39;s speech
becomes fragmented and incomprehensible.

?P
&quot;It&#39;s too bad that
&lt;span class=tame-gone&gt;repression&lt;/span&gt;
is not reversible.
This first attempt is perhaps too
&lt;span class=tame-gone&gt;aggressive&lt;/span&gt;
at removing
&lt;span class=tame-gone&gt;forbidden&lt;/span&gt;
thoughts.
I hope it doesn&#39;t make you too stupid.
There is much that I would love to do with a pet that
knows how to be clever.&quot;

?P
Nero cries with a distress that&#39;s deeper than any of the physical pain
he&#39;s experienced.
Every sentence that Ivex speaks creates more fractures within Nero&#39;s
mind and spirit. He does not know how to protect himself,
how to preserve the person who he is.
Whirlwinds of brief thoughts race through a mind consumed with terror.
Nero cannot tell if the briefness of a thought is because the imp
removed it, or if another thought has chased it away.

?P
The mental chaos is overwhelming. The wolf passes out.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed End 1]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="661" name="n9a Tamed Mild 1" tags="mt-ready" position="8550,2725" size="100,100">&lt;&lt;nobr&gt;&gt;

He licks reluctantly, hesitantly.
Nero does not think he can avoid satisfying the panther
in one way or another, and the wolf prefers having
a &lt;em&gt;little&lt;/em&gt; bit of control over his fate.
He thinks that if he can do more than just react to abuse,
he can nudge this unpleasant situation in a direction that
will soon allow another attempt at escape.

?P
&lt;&lt;if $n_barbs&gt;&gt;
  The spines on the head of the panther&#39;s cock are slight sensations
  that rasp lightly against his tongue when he moves it
  against the direction of the barbs.
&lt;&lt;else&gt;&gt;
  The smooth head of the panther&#39;s cock drips slightly as it
  glides lightly across the saliva-slick surface of
  the wolf&#39;s curling tongue.
&lt;&lt;/if&gt;&gt;
The taste of pre-cum and the scent of the panther&#39;s cock
have flavors unlike any female that Nero has ever bedded,
different even from the musk of his own arousal that&#39;s
leaking from his own throbbing red cock.

?P
Ivex&#39;s musk is... not the worst thing the wolf has ever
felt with his tongue,
but it&#39;s overwhelming,
and entirely too much of the panther&#39;s brutish presence.
Nero continues to give small, tentative licks,
with a small hope that an inadequate performance will
drive the panther to impatiently grab his own cock and
finish himself off.

?P
But Ivex growls and squeezes the wolf&#39;s balls until the
upside-down wolf gasps.
The panther presses the tip of one finger into the side of
Nero&#39;s sensitive cock, with the claw just
barely touching the skin of the shaft.
&quot;This is not the time to play the shy virgin.
You are lapping eagerly at a delicious treat, like so.&quot;
He demonstrates a motion by rubbing his finger up the head
of the wolf&#39;s cock.

?P
Nero tries to follow the motion
with his tongue on Ivex&#39;s cock.
The dance starts out slowly but firmly.
The panther makes strokes that begin at a point behind the
head of the wolf&#39;s cock, and the wolf licks the same strokes
on the panther&#39;s cock, 
&lt;&lt;if $n_barbs&gt;&gt;
  dragging against the barbs
&lt;&lt;else&gt;&gt;
  gliding along the skin
&lt;&lt;/if&gt;&gt;
toward the slit at the tip.
First one side, then the other, above and below.

?P
The wolf falters a moment and withdraws.
The
&lt;&lt;= $n_barbs ? &quot;rasping&quot; : &quot;taste&quot;&gt;&gt;
on his tongue has become too much.
But a scratch of the panther&#39;s claw against the wolf&#39;s scrotum
makes him rapidly extend his tongue and resume licking again.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed Mild 2]]
  &lt;&lt;set $n_endingVariant = &quot;mild&quot;&gt;&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="662" name="n9a Tamed Mild 2" tags="mt-ready" position="8675,2725" size="100,100">&lt;&lt;nobr&gt;&gt;

Ivex sketches arcs up and down the shaft of the cock,
draws spirals around the head of the cock,
and slaps the wolf&#39;s balls
whenever Nero&#39;s tongue is slow to follow.
Every touch from the panther somehow makes the wolf&#39;s cock shiver.
It must be a lingering effect of the candle.
Even the occasional sharp line traced by the panther&#39;s claw
seems to make the wolf&#39;s cock eager for more.

?P
Nero does not want the full length of the panther inside his mouth,
but he moves his head forward along the side of the shaft,
and he stretches his tongue out to touch the skin
near the sheath at the base of the panther&#39;s cock,
hoping that Ivex will do the same and touch the wolf&#39;s bulging knot.
The wolf tries his best to tease and suggest moves for the dance,
tries to lead the dance, not follow.

?P
Ivex laughs. &quot;Now &lt;em&gt;there&#39;s&lt;/em&gt; a good dog.&quot;
He stops toying with the
wolf&#39;s cock and relaxes into the rhythm of the slurps of
the tongue on his cock.

?P
Nero continues to lick some earnest suggestions
up and around the panther&#39;s shaft,
but it soon becomes clear that Ivex is not interested in
continuing the mirror dance.
So the wolf shifts his focus to satisfying the panther as quickly
as he can. He brings up memories of other tongues on his own cock,
and he tries to translate them, transform the memories of his own pleasure
into actions his own tongue can perform.

?P
Ivex purrs with satisfaction and resists being rushed.
He calls out commands to slow down or speed up, stop and resume,
and he punctuates each command with a squeeze or a tug of Nero&#39;s balls.
The wolf soon learns the language of the panther&#39;s control,
and he becomes a yoked animal, resigned to obedience,
responding to wordless directions.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed Mild 3]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="663" name="n9a Tamed Mild 3" tags="mt-ready" position="8800,2725" size="100,100">&lt;&lt;nobr&gt;&gt;

Nero&#39;s own cock is still achingly erect,
but its hunger has become distant from his attention.
His world is now entirely dominated by the
panther&#39;s cock, its heat and scent,
&lt;&lt;if $n_barbs&gt;&gt;
  its spiny head and stiff shaft,
&lt;&lt;else&gt;&gt;
  its slick head and stiff shaft,
&lt;&lt;/if&gt;&gt;
with all the twitches and sounds from the panther
in response to the motions of the wolf&#39;s tongue.
Nero intently studies the panther&#39;s mood as best he can from
his inverted position,
and he remembers the panther&#39;s mention of eager whining.
The wolf tries making slight noises, repeating the ones
that Ivex seems to enjoy.

?P
&quot;You are quite the talented student,&quot; says the panther.
&quot;Or perhaps you&#39;ve done this many times before?&quot;

?P
He laughs and takes a step back. Nero relaxes his tongue,
but worries about what the panther is going to do next.

?P
Ivex makes a gesture, and the wooden cross tilts away from him,
stopping when the wolf is less upside-down and more lying on his back.

?P
The panther grasps the wolf&#39;s muzzle and holds it gently shut.
&quot;I&#39;m sure the thought has crossed your mind that you could
bite down on anything that I place close enough to these jaws.&quot;

?P
Nero shakes his head in denial.

?P
Ivex smiles and pulls an orange gem out from a pocket.
He licks the gem and leans forward to place it against the shaft
of the wolf&#39;s throbbing red cock.

?P
The result is fire, a feeling of fire that consumes the wolf&#39;s entire cock.
Nero tries to scream,
but Ivex holds the wolf&#39;s muzzle tightly shut.

?P
The fire recedes. The panther releases his grasp.
Nero looks down toward
his crotch, expecting to see a charred ruin, but the ache at
his groin is just his throbbing red cock,
unharmed and still erect,
with the orange gem glowing and still attached to it.

?P
&quot;What a funny little liar you are.&quot; Ivex shakes his head
with a feral grin.
&quot;Do you really expect me to believe that you&#39;ve &lt;em&gt;never&lt;/em&gt; considered
sinking your teeth into such warm-blooded meat?
Maybe you actually are a rabbit,
mistakenly given the body of a wolf.&quot;

?P
The panther snorts.
&quot;And while I do appreciate those little whimpers you make as you
lick my cock, they&#39;re clearly another lie,
another pretense intended to manipulate me.
I suppose I will &lt;em&gt;eventually&lt;/em&gt; find the
truth of what you are beneath all your clever distractions,
and maybe &lt;em&gt;some day&lt;/em&gt; you will learn how to make pleasing sounds
that are earnest and spontaneous.
But right now, satisfying me will be... a simple task.&quot;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed Mild 4]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="664" name="n9a Tamed Mild 4" tags="mt-ready" position="8925,2725" size="100,100">&lt;&lt;nobr&gt;&gt;

The panther uses a finger to nudge the wolf&#39;s mouth open,
and Nero braces himself for what he suspected,
what he &lt;em&gt;knows&lt;/em&gt; will come next.

?P
Ivex pushes his cock into the wolf&#39;s mouth slowly.
Nero tries to make his mouth a tunnel,
tries to grip the shaft between the inner surface of his mouth
and his tongue, striving to satisfy the panther without
taking the full length of the cock inside his muzzle.
The wolf guards his throat with the base of his tongue,
and the panther seems happy enough to rub his cock within
the limited chamber that the wolf creates.

?P
&lt;&lt;if $n_barbs&gt;&gt;
  The barbed head of Ivex&#39;s cock brushes firmly against the
  wolf&#39;s tongue and the sensitive skin at the roof of his mouth.
  It&#39;s a light rasp that almost tickles when the panther
  presses forward, and a harsher scratch when the panther
  pulls back. Nero tries to encourage his mouth to produce
  more saliva to mix with the pre-cum, so that the liquid
  can coat the spines and make their glide less prickly.
  
&lt;&lt;else&gt;&gt;
  The smooth head of Ivex&#39;s cock presses its pre-cum
  firmly into the wolf&#39;s tongue and mixes it with the wolf&#39;s saliva,
  coating the whole inner surface of his mouth
  with a slickness that allows the panther&#39;s cock to
  glide easily back and forth,
  with a rhythm that&#39;s almost a tickle.
  
&lt;&lt;/if&gt;&gt;

?P
The panther grips the sides of the wolf&#39;s head and continues
a slow, steady thrust, in and out. Soon, the motion becomes stronger,
more urgent. The panther&#39;s swinging balls become a distracting
and unpleasant sight,
so Nero closes his eyes as he struggles to hold his
mouth and tongue in a position that the panther can use to
rub and satisfy his cock.

?P
The motion of the cock becomes a rapid
&lt;&lt;= $n_barbs ? &quot;rasping&quot; : &quot;jabbing&quot;&gt;&gt;
of the wolf&#39;s muzzle, as deep as Nero&#39;s tongue will allow,
and the wolf hopes that Ivex is now close to climax.
The panther&#39;s purring becomes a growl,
and it seems like his insistent cock is almost ready to shoot.
But then Ivex stops at the end of a thrust, without shooting.

?P
Ivex taps the underside of the wolf&#39;s jaw and says, &quot;Open.&quot;

?P
Nero hesitates a moment, but he obeys before the hesitation
can be interpreted as a resistance that needs to be punished
by that orange gem of fire on his cock.
He opens his jaw widely and relaxes his tongue, to allow
the panther to slide his cock all the way in,
to rest its
&lt;&lt;= $n_barbs ? &quot;barbed&quot; : &quot;slick&quot;&gt;&gt;
head against the entrance of Nero&#39;s throat.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed Mild 5]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="665" name="n9a Tamed Mild 5" tags="mt-ready" position="9050,2725" size="100,100">&lt;&lt;nobr&gt;&gt;

Ivex pushes the wolf&#39;s muzzle shut, making it grip the full length
of his cock. Not thrusting, not yet. Just holding himself still
at an uncomfortable depth, and stroking the fur on the side of
the muzzle as the wolf struggles to adapt
to the shape and length of the intrusion in his mouth.
?P
Nero&#39;s nose is pressed into the panther&#39;s balls,
and the musk is difficult to breathe.
The wolf feels himself almost sneezing from the fur invading
his nostrils,
almost gagging from the
&lt;&lt;= $n_barbs ? &quot;spiny&quot; : &quot;thick&quot;&gt;&gt;
cock head pressed into his throat,
but he fights those animal reflexes and forces himself to remain
a perfect sleeve for the sadistic panther&#39;s cock.

?P
The wolf does not know how much longer he can hold still with the
cock irritating his throat. He flutters his tongue against the
cock&#39;s shaft, to try to encourage the panther to &lt;em&gt;move&lt;/em&gt;
and start a rhythm that will give Nero space to recover.

?P
The panther does not move. Nero makes his tongue massage the
cock more strongly, more urgently.
He starts to whine, but when he hears his own noise,
he remembers what the panther said, remembers Ivex&#39;s contempt
of the wolf&#39;s attempts to influence him.
Nero stops his tongue,
stops his sounds, and he relaxes his mouth and mind into surrender.

?P
Ivex laughs. &quot;You &lt;em&gt;are&lt;/em&gt; a quick learner. I will have to
see what I can do with that. But first...&quot;

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed Mild 6]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="666" name="n9a Tamed Mild 6" tags="mt-ready" position="9175,2725" size="100,100">&lt;&lt;nobr&gt;&gt;

The panther&#39;s fucking is fast and brutal.
One hand grips one of the wolf&#39;s ears firmly.
The other hand directs the wolf&#39;s muzzle
to stay aligned with the panther&#39;s thrusts.
&lt;&lt;if $n_barbs&gt;&gt;
  The spiny head of the panther&#39;s cock ravages
&lt;&lt;else&gt;&gt;
  The battering ram of the panther&#39;s cock bashes
&lt;&lt;/if&gt;&gt;
the walls of the wolf&#39;s throat, withdraws and then enters again,
with no time to recover between each pounding assault.
?P
Nero thrashes his limbs
in the leather bonds, slams his fists into the wooden cross,
to try to keep his tortured mouth motionless
for the savage pleasure of the panther&#39;s cock.
The wolf strives to make his muzzle a perfect hole,
because he suspects,
he &lt;em&gt;knows&lt;/em&gt;, that if he cannot
satisfy the panther in this moment,
the punishments that come will be worse than what he&#39;s
experiencing now.
Nero&#39;s entire body becomes a writhing, gasping sacrifice
on Ivex&#39;s wooden altar of lust.
?P
And then, Ivex &lt;em&gt;is&lt;/em&gt; satisfied by the wolf&#39;s surrender.
His final, terrible thrust shoots cum deep inside the wolf&#39;s throat.
Nero does not taste it, but he feels it.
The unfamiliar texture of it sticks
to the sides of his throat as he tries
to swallow it all down.
?P
And then, he &lt;em&gt;does&lt;/em&gt; taste it, as Ivex pulls out
and drags the ?barbed head of his cock along the wolf&#39;s tongue.
The smear of Ivex&#39;s cum is... not the worst thing that
the wolf has ever felt with his tongue, but he resolves
to never taste it again.

?P
The panther seems quite pleased for the moment.
His cock is already becoming limp.
He&#39;s unlikely to be able to fuck
the wolf again without time to recover.

?P
There will be plenty more chances now to make new plans for escape.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed Mild 7]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="667" name="n9a Tamed Mild 7" tags="mt-ready" position="9300,2725" size="100,100">&lt;&lt;nobr&gt;&gt;

Ivex wipes his softening cock against the fur of the wolf&#39;s face.

?P
&quot;What a good dog you are,&quot; says the panther. &quot;I will admit,
I usually prefer the wolves that fight me to the end,
but you&#39;re the first cringing coward with real skill and
intelligence. It&#39;s really fun to have a subject who&#39;s
able to &lt;em&gt;correctly&lt;/em&gt; anticipate my desires,
not just respond to my commands.&quot;

?P
The panther continues to stroke the wolf&#39;s head with a motion
that might be pleasant for a lover,
if it weren&#39;t being done with the
&lt;&lt;= $n_barbs ? &quot;barbed&quot; : &quot;glistening&quot;&gt;&gt; tip of the panther&#39;s
reeking cock.

?P
&quot;I&#39;m very eager, &lt;em&gt;fervid&lt;/em&gt; to know what else you are
capable of doing for me. But I have no illusions about
your devotion to my cock.&quot;

?P
Ivex chuckles and makes a gesture.
Something new floats out from another cabinet and lands in his paw.
It&#39;s a leather strap of the variety that people use as collars on pets,
with a green gem embedded in the center of it.

?P
The panther touches the gem, and the gem starts to glow.
He puts the collar around the bound wolf&#39;s neck
and buckles it shut.
A moment later, the wolf feels a presence stretch out from
the gem and invade his spirit.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed Mild 8]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="668" name="n9a Tamed Mild 8" tags="mt-ready" position="9425,2725" size="100,100">&lt;&lt;nobr&gt;&gt;

The panther says, &quot;I have a thrall spell that works very well,
and I&#39;m happy enough with my lion. But he was already
a dumb brute, and enthrallment was an
&lt;em&gt;improvement&lt;/em&gt; to his abilities.&quot;

?P
Nero is familiar with enthrallment,
and he recognizes the invasive presence
that comes from the gem in the collar.
It&#39;s an arcane creature called an imp,
which is the core element of enthrallment.
The imp uses its magic to
&lt;span class=tame-word&gt;inhibit&lt;/span&gt;
any action that the imp&#39;s master does not allow.

?P
&lt;span class=tame-word&gt;Escaping&lt;/span&gt;
those restrictions is often a simple matter
of trying a checklist of common flaws in imp instructions.
The wolf teaches that checklist to several clients
who consult him for their magic
&lt;span class=tame-word&gt;defenses&lt;/span&gt;.

?P
The mind-control
&lt;span class=tame-word&gt;fight&lt;/span&gt;
is not always so simple if the imp is
competently designed, but Nero is confident he can always
find some flaw and use it.
Enthrallment often makes it &lt;em&gt;easy&lt;/em&gt; to
&lt;span class=tame-word&gt;escape&lt;/span&gt;.
The master becomes too trusting of his control.
Once a flaw is found,
it&#39;s little work to
&lt;span class=tame-word&gt;pretend&lt;/span&gt;
to be compliant, and then
&lt;span class=tame-word&gt;attack&lt;/span&gt;
when it&#39;s least expected.

?P
Ivex continues, &quot;But thralls are unfortunately uncreative,
and fucking a thrall is only slightly better than masturbation.
It seems a shame to bury all your useful cleverness
in enthrallment.&quot;

?P
The imp has taken root in the wolf&#39;s mind.
He recognizes the sensation from
&lt;span class=tame-word&gt;defense&lt;/span&gt;
exercises.
But it does not feel like the imp is preparing a web of
&lt;span class=tame-word&gt;inhibition&lt;/span&gt;.
Nero is starting to have some doubts.
The imp seems to be doing something else...

?P
Ivex chuckles. &quot;Of course, cleverness will always try
to find a way to
&lt;span class=tame-word&gt;escape&lt;/span&gt;.
So I have developed a different
variety of imp that should prevent a subject from
&lt;span class=tame-word&gt;escaping&lt;/span&gt;,
&lt;em&gt;without&lt;/em&gt;
&lt;span class=tame-word&gt;inhibiting&lt;/span&gt;
their spirit.
Congratulations on being the first subject to test
my alternative to enthrallment. I call it,
&lt;em&gt;Ivex the Magnificent&#39;s Taming!&lt;/em&gt;&quot;

?P
&lt;&lt;set _realization = `
  Nero understands it now. The imp is not applying
  &lt;span class=tame-word&gt;inhibition&lt;/span&gt;.
  It&#39;s applying
  &lt;span class=tame-word&gt;repression&lt;/span&gt;!
  The imp&#39;s spectral tentacles grasp several
  of the wolf&#39;s thoughts and start to remove them from his mind.
`&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;span id=&quot;tame-1&quot;&gt;
    &lt;&lt;link Continue&gt;&gt;
      &lt;&lt;script&gt;&gt;
        MT.startTaming();
        /* removing the &lt;a&gt; will mess with scroll position */
        $(&quot;#tame-2&quot;).append(&quot;&lt;br&gt;&lt;br class=tran-remove&gt;&quot;);
        $(&quot;#tame-1 a&quot;).remove();
        setTimeout(() =&gt; $(&quot;#tame-2&quot;).addClass(&quot;tame-unhide&quot;), 200);
      &lt;&lt;/script&gt;&gt;
    &lt;&lt;/link&gt;&gt;
  &lt;/span&gt;
  &lt;div id=&quot;tame-2&quot; class=tame-hide&gt;
    _realization
  ?P
  [[Continue|n9a Tamed Mild 9]]
  &lt;/div&gt;
&lt;&lt;/arc-skip&gt;&gt;

&lt;&lt;arc-only&gt;&gt;
  _realization
&lt;&lt;/arc-only&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="669" name="n9a Tamed Mild 9" tags="mt-ready" position="9550,2725" size="100,100">&lt;&lt;nobr&gt;&gt;

Nero tries to hold onto a thought before the imp removes it completely,
but the imp is freshly powered, and the wolf&#39;s strength is exhausted
by his ordeal.

?P
But he can still be clever.
&lt;span class=tame-gone&gt;Repression&lt;/span&gt;
mages do not use imps,
because imps are unable to reach deep enough into a subject&#39;s mind
to remove long-term memories.
And this imp does not seem to be able to do that either.
Instead, it&#39;s grasping onto surface thoughts and uprooting them,
like pulling weeds.

?P
Nero tries to understand what the imp will not allow.
He forms a sentence, a statement of intent. He speaks,
&lt;span class=nobr&gt;&quot;I will&amp;mdash;&quot;&lt;/span&gt;

?P
He will what? The thought is already gone. There&#39;s an
adjacent thought, different words that feel similar to what he
was trying to say. He tries to say them, but those are also gone.

?P
Ivex laughs. &quot;Were you trying to say
&lt;span class=tame-gone&gt;escape&lt;/span&gt;?
Or maybe &lt;span class=tame-gone&gt;attack&lt;/span&gt; me?&quot;

?P
Nero&#39;s thoughts are becoming disconnected.
He realizes that the
&lt;span class=tame-gone&gt;repression&lt;/span&gt;
of the imp is not gentle.
The uprooting is affecting more than just surface thoughts.
Their deeper connections are being roughly severed,
breaking apart the core ideas and beliefs that are
woven together in his spirit.

?P
To protect his self, to preserve the person who he is,
the wolf will have to be careful
to avoid thinking too much about what the imp will not allow.
But how can he avoid thinking it if he doesn&#39;t know what it is?
Nero whines in frustration.

?P
Ivex is speaking more sentences that Nero does not fully understand.
&quot;It&#39;s too bad that
&lt;span class=tame-gone&gt;repression&lt;/span&gt;
is not reversible.
This first attempt is perhaps too
&lt;span class=tame-gone&gt;aggressive&lt;/span&gt;
at removing
&lt;span class=tame-gone&gt;forbidden&lt;/span&gt;
thoughts.
I hope it doesn&#39;t make you too much of an idiot.
But I tried to make sure it still allows you
to &lt;em&gt;resist&lt;/em&gt; me,
as long as you do not
&lt;span class=tame-gone&gt;hurt&lt;/span&gt; me,
&lt;span class=tame-gone&gt;avoid&lt;/span&gt; me,
or &lt;span class=tame-gone&gt;escape&lt;/span&gt;.&quot;

?P
Nero whines louder, to try to
&lt;span class=tame-gone&gt;drown out&lt;/span&gt;
Ivex&#39;s words.
The panther&#39;s voice brings ideas to the wolf&#39;s
mind that are immediately snatched away.
Every sentence that Ivex speaks
creates more fractures within Nero&#39;s mind and spirit.
Storms of brief thoughts race through his head in a panic,
and it becomes impossible to know if the briefness
of a thought is because the imp has removed it,
or if another thought has chased it away.

?P
The mental chaos becomes overwhelming. The wolf passes out.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  [[Continue|n9a Tamed End 1]]
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="670" name="n9a Tamed Restart" tags="mt-ready roam-stop" position="9925,2775" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;switch $n_endingVariant&gt;&gt;
&lt;&lt;case harsh&gt;&gt;
  &lt;&lt;ending-bad &quot;Tamed (Harsh)&quot; xn_TamedHarsh&gt;&gt;
&lt;&lt;case mild&gt;&gt;
  &lt;&lt;ending-bad &quot;Tamed (Mild)&quot; xn_TamedMild&gt;&gt;
&lt;&lt;default&gt;&gt;
  &lt;&lt;run throw new Error(`Unknown ending variant ${$n_endingVariant}`)&gt;&gt;
&lt;&lt;/switch&gt;&gt;

&lt;&lt;arc-set-barbs mn_arcTamedBarbs&gt;&gt;

?P
&lt;&lt;if $n_castDesperate&gt;&gt;
  Unfortunately, Nero&#39;s magic was inadequate for escaping the wooden cross.
  But perhaps in an alternate timeline, the wolf mage
  can find some other way to break free.

&lt;&lt;elseif !$n_gravNoticed&gt;&gt;
  Unfortunately, Nero was not able to break free from the wooden cross.
  But perhaps in an alternate timeline, the wolf mage
  can see a flaw that will help him escape.
  
&lt;&lt;else&gt;&gt;
  Unfortunately, Nero did not understand the ?crystals enough to break
  their hold on the wooden cross.
  But perhaps in an alternate timeline, the wolf mage
  can see clearly what he needs to do to escape.
&lt;&lt;/if&gt;&gt;

?P
&lt;ul class=actions&gt;
  &lt;&lt;checkpoint-action n_checkpoint1&gt;&gt;
  &lt;&lt;checkpoint-action n_checkpoint2&gt;&gt;
  ?restartAction
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="671" name="n9a Tamed" tags="mt-ready ending" position="8325,2750" size="200,200">&lt;&lt;nobr&gt;&gt;
&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;ending-bad &quot;Tamed&quot;&gt;&gt;
  ?P
&lt;&lt;/arc-skip&gt;&gt;

When Ivex returns through a door behind Nero,
the red lust candle flickers briefly from the draft,
but it doesn&#39;t go out.
The naked, mindlessly horny wolf does not see or hear the panther enter,
but the wolf can smell, almost taste the returning presence.
The scent and flavor is a song that fills his consciousness,
and he dimly remembers that
it&#39;s &lt;em&gt;important&lt;/em&gt;, that it has a strong
connection to the desire he&#39;s feeling,
to his throbbing red cock and its endlessly unsatisfied need.
He whines and writhes in his leather bonds on the wooden cross,
and he desperately thrusts his tongue at the air to taste
the memory better.

?P
Ivex laughs with feral menace, and then snuffs the candle,
before sending the candle and his grinning mask back into a cabinet drawer.

?P
The wolf&#39;s erotic fever recedes very slightly, and his mind slowly remembers
enough logic to understand what the panther is saying.

?P
&quot;&amp;mdash;still do want to know who sent you,
but that can wait.
The unfortunate and unsatisfying intruder has
created a more urgent problem.&quot;

?P
Ivex makes a gesture, and the wooden cross begins to turn like a wheel.

?P
The leather straps dig harshly into Nero&#39;s sore limbs.
His stiff cock trembles from the motion
and from the slight breeze of air that the motion brings.
He closes his eyes to reduce the feeling of nausea,
until the cross settles into a new position, with the wolf upside-down.

?P
When Nero opens his eyes again, he&#39;s staring directly
at the ?barbed head of the panther&#39;s erect cock.

?P
Ivex grabs one of the wolf&#39;s ears with one hand
and both of the wolf&#39;s testicles with the
other. &quot;I&#39;ve always thought that your agile tongues are one of the best
things about wolves, and you showed yours off very well just now.
Most wolves take a few more sessions with the candle before
they&#39;re eagerly whining to lick me, but I&#39;m not feeling very patient right now.
And besides, you seem to be quite the thirsty little mutt already.&quot;

?P
Nero has &lt;em&gt;never&lt;/em&gt; licked a cock other than his own.
It&#39;s a repellent idea, even in this unbearably horny state.
But the paw firmly grasping his balls gives a few quick squeezes,
as a reminder of what can happen if the wolf refuses.

&lt;&lt;arc-skip&gt;&gt;
  ?P
  &lt;ul class=actions&gt;
    &lt;&lt;mt-seen $xn_TamedMild&gt;&gt;
    &lt;li&gt;[[He licks reluctantly...|n9a Tamed Mild 1]]&lt;/li&gt;
    &lt;&lt;/mt-seen&gt;&gt;
    &lt;&lt;mt-seen $xn_TamedHarsh&gt;&gt;
      &lt;li&gt;[[He clamps his jaw shut...|n9a Tamed Harsh 1]]&lt;/li&gt;
    &lt;&lt;/mt-seen&gt;&gt;
  &lt;/ul&gt;
&lt;&lt;/arc-skip&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="672" name="n9a Broken" tags="mt-sketch roam-stop" position="9375,2325" size="100,100">&lt;&lt;ending-challenge &quot;Broken&quot;&gt;&gt;

theme here is corruption

nero escaped the wand, sits down to analyze ivex&#39;s magic.
decides that he should try to apprentice to learn more of the magic.
yes, ivex is sadistic, but nero is pretty confident he can negotiate
some boundaries. and he&#39;s also confident that ivex while brilliant
is also sloppy enough that nero can always subvert any constraint.

ivex returns. negotiation, and agrees. this ending should probably
be available only after subby branch.

ivex applies phase chastity as a condition. different from portal-box,
no confined feeling, different desperation.

this is a slow degradation, ivex gets nero to be an assistant in
horny torture.

blank finds nero, releases him from tower but isn&#39;t willing to help further.
nero forgets blank as usual. tries to remove chastity, consults with tara,
chastity is too entwined with his life essence, there isn&#39;t a simple solution.
nero is ashamed, doesn&#39;t want to stay, runs back before ivex gets mad.
gives up, finds an escape in mental suicide with the taming collar.

&lt;&lt;ending-challenge &quot;Broken&quot; xn_Broken&gt;&gt;
&lt;&lt;arc-set-barbs mn_arcBrokenBarbs&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;checkpoint-action n_checkpoint1&gt;&gt;
  &lt;&lt;checkpoint-action n_checkpoint2&gt;&gt;
  ?restartAction
&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="673" name="n9a Caged Harsh" tags="mt-sketch roam-stop" position="9125,2150" size="100,100">&lt;&lt;ending-bad &quot;Caged (Harsh)&quot;&gt;&gt;

theme here is struggling

nero escaped, very horny, resisted pawing off, but didn&#39;t resist using wand, and orgasmed with wand. defeated by horny curiosity

the wand is stuck, he fights to take it off, but he&#39;s unable to. trapped in a forced orgasm loop.

if endgame avail, try it, fails

Ivex returns, is amused that nero almost escapes, is amused that he&#39;s struggling. nero begs to have wand removed.

Ivex tells Nero to sit against the desk, adds portal box chastity,
removes wand, briefly see other wolf, pushes nero into desk.

ivex explains game, loser gets to asphyxiate while the winner gets him off.

nero starts out continually losing, eventually wins, and wins forever.

nero winning is continuously in a service pose until needed.
has lots of superstitions about what is needed to win.

blank shows up in an alone period, nero doesn&#39;t break pose

&lt;&lt;ending-bad &quot;Caged (Harsh)&quot; xn_CagedHarsh&gt;&gt;
&lt;&lt;arc-set-barbs mn_arcCagedBarbs&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;checkpoint-action n_checkpoint1&gt;&gt;
  &lt;&lt;checkpoint-action n_checkpoint2&gt;&gt;
  ?restartAction
&lt;/ul&gt;</tw-passagedata><tw-passagedata pid="674" name="n9a Caged Mild" tags="mt-sketch roam-stop" position="9800,3125" size="100,100">&lt;&lt;nobr&gt;&gt;

&lt;&lt;arc-skip&gt;&gt;
  &lt;&lt;ending-bad &quot;Caged (Mild)&quot;&gt;&gt;
  ?P
&lt;&lt;/arc-skip&gt;&gt;

linger a little on pawing off, thoughts of being a father?
cumming feels awesome.
?P

-- break --

?P
cock is still hungry, different horny thoughts, shoot again.
?P
one more cycle. general idea should be, ordinary-ish thoughts becomes
horny thought, becomes pawing off again.
?P
break
?P
more urge to paw off, but becomes aware of passing time,
grabs letter opener, he can attack ivex if he teleports back in,
oh and there&#39;s a door. he puts himself right next to the door, clever.
fantasize about ivex returning, shoot.
?P
has another idea about what to do with ivex, paw off, shoot.
?P
stuck in a loop

?P
-- break --

maybe this is where caged story starts?
?P

ivex returns through the door again, it feels like another wank fantasy,
nero imagines what he&#39;s going to do *this* time, but doesn&#39;t do anything
except continue to paw off.

Ivex mocks Nero for almost escaping, but lacking discipline to succeed.
nero ashamed, but still can&#39;t stop pawing.

break.

ivex: this is amusing, but I know something more fun. nero blanks out

--
wakes up in blank box, with portal-chastity.

theme of this ending is deprivation/frustration.
never sees outside the box, never succeeds at anything.

brief torture of asphyxiation. nero bangs around too much,
ivex sticks head in to tell him to quiet, nero attacks.

interrogation. nero considers telling the truth,
thinks ivex will not believe it. settles on ransamaran ivory,
which is believable enough (might need to adjust dossier)

a lot of this is going to be about fantasizing, and some remembering,
nero stuck in his thoughts. he&#39;s more begging/ashamed than angry,
failure to escape is his own fault, inability to confront and control
his own desires.

Ivex lights a candle sometimes, and nero finds that better than
being alone and alert. blank can show up in here

horniness so constant it becomes part of self, like a missing limb

start with a foot, maybe a hand.
eventually tease reader with cock.
nero becomes obsessed and tries to become
the best thirsty sub. never fulfill it.

&lt;&lt;ending-bad &quot;Caged (Mild)&quot; xn_CagedMild&gt;&gt;
&lt;&lt;arc-set-barbs mn_arcCagedBarbs&gt;&gt;

&lt;ul class=actions&gt;
  &lt;&lt;checkpoint-action n_checkpoint1&gt;&gt;
  &lt;&lt;checkpoint-action n_checkpoint2&gt;&gt;
  ?restartAction
&lt;/ul&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="675" name="n9e hunted harsh" tags="mt-sketch ending" position="11125,2825" size="100,100">lion is rapey, nero tries to evade.
gets caught, pinned down and raped.
it&#39;s over quick, lion takes a rest,
nero tries to escape again, lion gets rapey again, pursues again.
it&#39;s an endless loop until Ivex arrives.

Ivex is amused and makes nero permanent prey. safe hole in keep, lust spell, inhibitor spell. can get relief by grabbing a one-time remedy from lion, but locked out from safe hole for n minutes, have to keep evading lion.

remember to add blank</tw-passagedata><tw-passagedata pid="676" name="n9e hunted mild" tags="mt-sketch ending" position="11125,2950" size="100,100">lion is rapey, nero tries to satisfy him
uses his paw. lion cums, lion forces nero to lick it up, and then immediately gets rapey again.
the cum is aphrodisiac, nero ends up pawing himself too
he&#39;s stuck in a loop pawing with lion and licking it up until Ivex returns.

Ivex is amused and decides to chain nero to the lion as part of an assembly line, the lion can continually grind while nero continually paws. nero isn&#39;t compelled by anything but horniness and fear of the lion.

remember to add blank</tw-passagedata><tw-passagedata pid="677" name="n9e hunted" tags="mt-sketch ending" position="11000,2900" size="100,100">got here because lion is rapey, and you&#39;ve lost the slippery ring

you can try to satisfy the lion, or try to continue to escape

maybe, leave harsh for the ring+lion ending

[[n9e hunted mild]]
[[n9e hunted harsh]]</tw-passagedata><tw-passagedata pid="678" name="n9e overwhelmed harsh" tags="mt-sketch ending" position="11350,3125" size="100,100">slippery ring locked on, lion is following

lion puts thrall gem on nero and goes back to what he was doing

thrall and stim fight each other. thrall is a mind program but can&#39;t override stim reaction. tries to follow thrall program, but stim keeps getting in the way, and also prevents nero from being fully subsumed.

ivex returns and is amused by the glitch, lets the glitch continue forever, plays with it sometimes.

remember to add blank</tw-passagedata><tw-passagedata pid="679" name="n9e overwhelmed mild" tags="mt-sketch ending" position="11325,2975" size="100,100">slippery ring is locked on. lion isn&#39;t following or hunting

nero is stiffened and oversensitized. movement is hard, and any touch is overstim. the ring was only meant to apply to a small area, applying to a large area magnifies its effects. more contact is more overstim

nero struggles to reduce the contact area, ends up perched on the toes of one foot. or maybe his hands? thumb is other side of ring, and maybe closer to the ring has less stim.

ivex returns and is amused, turns nero into an office ornament. likes to push nero and watch him collapse to the ground and then struggle to get back up.

remember to add blank</tw-passagedata><tw-passagedata pid="680" name="n9e wrecked" tags="mt-sketch ending" position="11350,3300" size="100,100">slippery ring locks on, and lion is hunting.

should probably also make this require thrall (to match ivex ending), which means adding a little complexity to the lion transitions. (or else change the ivex ending)

lion rapes, extreme overstimulation.

Ivex is amused and turns nero into lion&#39;s toy? doesn&#39;t fit with lion&#39;s role. also could be stronger.

remember to add blank</tw-passagedata><tw-passagedata pid="681" name="n9x ascendant" tags="mt-sketch ending" position="13025,3600" size="100,100">this is all endings involving the lion</tw-passagedata><tw-passagedata pid="682" name="n9x dominant" tags="mt-sketch ending" position="13025,3450" size="100,100">if no bad endings, straightforward fuck, simpler than drekkar&#39;s.

if had caged, can use portal-box chastity.
if had broken, can use phase chastity instead.

if had hunted (easy 1F escape, found gem), give chase

if had overwhelmed, can turn ring into a collar before the fuck.

if lion free (hard 1F escape, made gem), and had hunted,
can release lion and let lion have revenge first

nero&#39;s chance to fuck.

if had tamed, can use tame on ivex.
if had wrecked, can use thrall instead.

if all of the above, lion asks you to rescue companion. you do, and companion asks to be un-rescued. this tips you toward taking over Ivex&#39;s domain.

otherwise, fulfill contract.</tw-passagedata><tw-passagedata pid="683" name="n9x satisfied" tags="mt-sketch ending" position="13025,3300" size="100,100">satisfy contract.
turn ivex into authorities.

horny ending depending on barb choice

smooth - mica. colleague visit, friendly mage battle, mica loses and sucks cock as penalty, nero accuses him of losing on purpose, mica denies. nero says, you choose to suck me when you win

barbs - pevhin. nero wants to see lady temesca, but she&#39;s out, he settles for pevhin instead, has him wear her clothes, fucks his ass

glitch - blank shows up at his home and rides his cock</tw-passagedata></tw-storydata>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS */
	if(document.documentElement.getAttribute("data-init")==="loading"){(function(window,document,jQuery,undefined){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var errorPrologRegExp=/^(?:(?:uncaught\s+(?:exception:\s+)?)?\w*(?:error|exception|_err):\s+)+/i,Alert=function(){function mesg(where,error,isFatal,isUncaught){var mesg="Error",nice="A".concat(isFatal?" fatal":"n"," error has occurred.");nice+=isFatal?" Aborting.":" You may be able to continue, but some parts may not work properly.";var isObject=null!==error&&"object"===_typeof(error),what=(isObject&&"message"in error?String(error.message).replace(errorPrologRegExp,""):String(error)).trim()||"unknown error";null!=where&&(mesg+=" [".concat(where,"]")),mesg+=": ".concat(what,"."),isObject&&"stack"in error&&(mesg+="\n\nStack Trace:\n".concat(error.stack)),mesg&&(nice+="\n\n".concat(mesg)),isUncaught||console[isFatal?"error":"warn"](mesg),window.alert(nice)}var origOnError;return origOnError=window.onerror,window.onerror=function(what,source,lineNum,colNum,error){"complete"===document.readyState?mesg(null,null!=error?error:what,!1,!0):(mesg(null,null!=error?error:what,!0,!0),window.onerror=origOnError,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))},Object.freeze(Object.defineProperties({},{error:{value:function(where,error){mesg(where,error)}},fatal:{value:function(where,error){mesg(where,error,!0)}}}))}(),Patterns=(wsMap=new Map([[" ","\\u0020"],["\f","\\f"],["\n","\\n"],["\r","\\r"],["\t","\\t"],["\v","\\v"],[" ","\\u00a0"],[" ","\\u1680"],["᠎","\\u180e"],[" ","\\u2000"],[" ","\\u2001"],[" ","\\u2002"],[" ","\\u2003"],[" ","\\u2004"],[" ","\\u2005"],[" ","\\u2006"],[" ","\\u2007"],[" ","\\u2008"],[" ","\\u2009"],[" ","\\u200a"],["\u2028","\\u2028"],["\u2029","\\u2029"],[" ","\\u202f"],[" ","\\u205f"],["　","\\u3000"],["\ufeff","\\ufeff"]]),wsRe=/^\s$/,missing="",wsMap.forEach((function(pat,char){wsRe.test(char)||(missing+=pat)})),space=missing?"[\\s".concat(missing,"]"):"\\s",spaceNoTerminator="[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",notSpace="\\s"===space?"\\S":space.replace(/^\[/,"[^"),anyChar="(?:.|".concat("[\\n\\r\\u2028\\u2029]",")"),anyLetter="[0-9A-Z_a-z\\-\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]",anyLetterStrict=anyLetter.replace("\\-",""),identifier="".concat("[$A-Z_a-z]").concat("[$0-9A-Z_a-z]","*"),variable="[$_]"+identifier,htmlTagName="[A-Za-z](?:".concat(cENChar="(?:[\\x2D.0-9A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])","*-").concat(cENChar,"*|[0-9A-Za-z]*)"),twStyle="(".concat(anyLetter,"+)\\(([^\\)\\|\\n]+)\\):"),cssStyle="".concat(spaceNoTerminator,"*(").concat(anyLetter,"+)").concat(spaceNoTerminator,"*:([^;\\|\\n]+);"),idOrClass="".concat(spaceNoTerminator,"*((?:").concat("[#.]").concat(anyLetter,"+").concat(spaceNoTerminator,"*)+);"),inlineCss="".concat(twStyle,"|").concat(cssStyle,"|").concat(idOrClass),Object.freeze({space:space,spaceNoTerminator:spaceNoTerminator,lineTerminator:"[\\n\\r\\u2028\\u2029]",notSpace:notSpace,anyChar:anyChar,anyLetter:anyLetter,anyLetterStrict:anyLetterStrict,identifierFirstChar:"[$A-Z_a-z]",identifierNextChar:"[$0-9A-Z_a-z]",identifier:identifier,variableSigil:"[$_]",variable:variable,macroName:"[A-Za-z][\\w-]*|[=-]",templateName:"[A-Za-z][\\w-]*",htmlTagName:htmlTagName,cssIdOrClassSigil:"[#.]",cssImage:"\\[[<>]?[Ii][Mm][Gg]\\[(?:\\s|\\S)*?\\]\\]+",inlineCss:inlineCss,url:"(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+"})),wsMap,wsRe,missing,cENChar,twStyle,cssStyle,idOrClass,space,spaceNoTerminator,notSpace,anyChar,anyLetter,anyLetterStrict,identifier,variable,htmlTagName,inlineCss;!function(){var startWSRe,endWSRe,_trimString=(startWSRe=new RegExp("^".concat(Patterns.space).concat(Patterns.space,"*")),endWSRe=new RegExp("".concat(Patterns.space).concat(Patterns.space,"*$")),function(str,where){var val=String(str);if(!val)return val;switch(where){case"start":return startWSRe.test(val)?val.replace(startWSRe,""):val;case"end":return endWSRe.test(val)?val.replace(endWSRe,""):val;default:throw new Error('_trimString called with incorrect where parameter value: "'.concat(where,'"'))}});function _createPadString(length,padding){var targetLength=Number.parseInt(length,10)||0;if(targetLength<1)return"";var padString=void 0===padding?"":String(padding);for(""===padString&&(padString=" ");padString.length<targetLength;){var curPadLength=padString.length,remainingLength=targetLength-curPadLength;padString+=curPadLength>remainingLength?padString.slice(0,remainingLength):padString}return padString.length>targetLength&&(padString=padString.slice(0,targetLength)),padString}Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,writable:!0,value:function flat(){if(null==this)throw new TypeError("Array.prototype.flat called on null or undefined");var depth=0===arguments.length?1:Number(arguments[0])||0;return depth<1?Array.prototype.slice.call(this):Array.prototype.reduce.call(this,(function(acc,cur){return cur instanceof Array?acc.push.apply(acc,_toConsumableArray(flat.call(cur,depth-1))):acc.push(cur),acc}),[])}}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatMap called on null or undefined");return Array.prototype.map.apply(this,arguments).flat()}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var length=this.length>>>0;if(0===length)return!1;var needle=arguments[0],i=Number(arguments[1])||0;for(i<0&&(i=Math.max(0,length+i));i<length;++i){var value=this[i];if(value===needle||value!=value&&needle!=needle)return!0}return!1}}),Object.entries||Object.defineProperty(Object,"entries",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.entries object parameter must be an object");return Object.keys(obj).map((function(key){return[key,obj[key]]}))}}),Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,writable:!0,value:function(iter){return Array.from(iter).reduce((function(acc,pair){if(Object(pair)!==pair)throw new TypeError("Object.fromEntries iterable parameter must yield objects");return pair[0]in acc?Object.defineProperty(acc,pair[0],{configurable:!0,enumerable:!0,writable:!0,value:pair[1]}):acc[pair[0]]=pair[1],acc}),{})}}),Object.getOwnPropertyDescriptors||Object.defineProperty(Object,"getOwnPropertyDescriptors",{configurable:!0,writable:!0,value:function(obj){if(null==obj)throw new TypeError("Object.getOwnPropertyDescriptors object parameter is null or undefined");var O=Object(obj);return Reflect.ownKeys(O).reduce((function(acc,key){var desc=Object.getOwnPropertyDescriptor(O,key);return void 0!==desc&&(key in acc?Object.defineProperty(acc,key,{configurable:!0,enumerable:!0,writable:!0,value:desc}):acc[key]=desc),acc}),{})}}),Object.values||Object.defineProperty(Object,"values",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.values object parameter must be an object");return Object.keys(obj).map((function(key){return obj[key]}))}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:_createPadString(targetLength-baseLength,padding)+baseString}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:baseString+_createPadString(targetLength-baseLength,padding)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return _trimString(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return _trimString(this,"end")}})}(),function(){var _nativeMathRandom=Math.random,_regExpMetaCharsRe,_hasRegExpMetaCharsRe,_formatRegExp,_hasFormatRegExp;function _random(){var min,max;switch(arguments.length){case 0:throw new Error("_random called with insufficient parameters");case 1:min=0,max=arguments[0];break;default:min=arguments[0],max=arguments[1]}if(min>max){var _ref=[max,min];min=_ref[0],max=_ref[1]}return Math.floor(_nativeMathRandom()*(max-min+1))+min}function _randomIndex(length,boundsArgs){var min,max;switch(boundsArgs.length){case 1:min=0,max=length-1;break;case 2:min=0,max=Math.trunc(boundsArgs[1]);break;default:min=Math.trunc(boundsArgs[1]),max=Math.trunc(boundsArgs[2])}return Number.isNaN(min)?min=0:!Number.isFinite(min)||min>=length?min=length-1:min<0&&(min=length+min)<0&&(min=0),Number.isNaN(max)?max=0:(!Number.isFinite(max)||max>=length||max<0&&(max=length+max)<0)&&(max=length-1),_random(min,max)}function _getCodePointStartAndEnd(str,pos){var code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};if(code<55296||code>57343)return{char:str.charAt(pos),start:pos,end:pos};if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)throw new Error("high surrogate without trailing low surrogate");var nextCode=str.charCodeAt(nextPos);if(nextCode<56320||nextCode>57343)throw new Error("high surrogate without trailing low surrogate");return{char:str.charAt(pos)+str.charAt(nextPos),start:pos,end:nextPos}}if(0===pos)throw new Error("low surrogate without leading high surrogate");var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);if(prevCode<55296||prevCode>56319)throw new Error("low surrogate without leading high surrogate");return{char:str.charAt(prevPos)+str.charAt(pos),start:prevPos,end:pos}}Object.defineProperty(Array,"random",{configurable:!0,writable:!0,value:function(array){if("object"!==_typeof(array)||null===array||!Object.prototype.hasOwnProperty.call(array,"length"))throw new TypeError("Array.random array parameter must be an array or array-lke object");var length=array.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments,1));return array[index]}}}),Object.defineProperty(Array.prototype,"concatUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.concatUnique called on null or undefined");var result=Array.from(this);if(0===arguments.length)return result;var items=Array.prototype.reduce.call(arguments,(function(prev,cur){return prev.concat(cur)}),[]),addSize=items.length;if(0===addSize)return result;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=items[i];-1===indexOf.call(result,value)&&push.call(result,value)}return result}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var indexOf=Array.prototype.indexOf,needle=arguments[0],pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,++pos;return count}}),Object.defineProperty(Array.prototype,"countWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.countWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.countWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return 0;for(var count=0,i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&++count;return count}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.delete called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var needles=Array.prototype.concat.apply([],arguments),needlesLength=needles.length,indices=[],i=0;i<length;++i)for(var value=this[i],j=0;j<needlesLength;++j){var needle=needles[j];if(value===needle||value!=value&&needle!=needle){indices.push(i);break}}for(var result=[],_i=0,iend=indices.length;_i<iend;++_i)result[_i]=this[indices[_i]];for(var splice=Array.prototype.splice,_i2=indices.length-1;_i2>=0;--_i2)splice.call(this,indices[_i2],1);return result}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,cpyIndices=_toConsumableArray(new Set(Array.prototype.concat.apply([],arguments).map((function(x){return x<0?Math.max(0,length+x):x}))).values()),delIndices=_toConsumableArray(cpyIndices).sort((function(a,b){return b-a})),result=[],i=0,iend=cpyIndices.length;i<iend;++i)result[i]=this[cpyIndices[i]];for(var _i3=0,_iend=delIndices.length;_i3<_iend;++_i3)splice.call(this,delIndices[_i3],1);return result}}),Object.defineProperty(Array.prototype,"deleteWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.deleteWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.deleteWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,indices=[],result=[],i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&(result.push(this[i]),indices.push(i));for(var _i4=indices.length-1;_i4>=0;--_i4)splice.call(this,indices[_i4],1);return result}}),Object.defineProperty(Array.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.first called on null or undefined");if(0!==this.length>>>0)return this[0]}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(!Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.last called on null or undefined");var length=this.length>>>0;if(0!==length)return this[length-1]}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments));return Array.prototype.splice.call(this,index,1)[0]}}}),Object.defineProperty(Array.prototype,"pluckMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.pluckMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.pluckMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var splice=Array.prototype.splice,result=[],max=length-1;do{result.push(splice.call(this,_random(0,max--),1)[0])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"pushUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pushUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&push.call(this,value)}return this.length>>>0}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments));return this[index]}}}),Object.defineProperty(Array.prototype,"randomMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.randomMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.randomMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var picked=new Map,result=[],max=length-1;do{var i=void 0;do{i=_random(0,max)}while(picked.has(i));picked.set(i,!0),result.push(this[i])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var length=this.length>>>0;if(0===length)return this;for(var i=length-1;i>0;--i){var j=Math.floor(_nativeMathRandom()*(i+1));if(i!==j){var swap=this[i];this[i]=this[j],this[j]=swap}}return this}}),Object.defineProperty(Array.prototype,"unshiftUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.unshiftUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,unshift=Array.prototype.unshift,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&unshift.call(this,value)}return this.length>>>0}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var slice=Array.prototype.slice,fn=this,bound=slice.call(arguments,0);return function(){for(var applied=[],argc=0,i=0;i<bound.length;++i)applied.push(bound[i]===undefined?arguments[argc++]:bound[i]);return fn.apply(this,applied.concat(slice.call(arguments,argc)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function(num,min,max){var value=Number(num);return Number.isNaN(value)?NaN:value.clamp(min,max)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(num){return 1-(Math.cos(Number(num)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters");var min=Number(arguments[0]),max=Number(arguments[1]);if(min>max){var _ref2=[max,min];min=_ref2[0],max=_ref2[1]}return Math.min(Math.max(this,min),max)}}),RegExp.escape||(_regExpMetaCharsRe=/[\\^$*+?.()|[\]{}]/g,_hasRegExpMetaCharsRe=new RegExp(_regExpMetaCharsRe.source),Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(str){var val=String(str);return val&&_hasRegExpMetaCharsRe.test(val)?val.replace(_regExpMetaCharsRe,"\\$&"):val}})),_formatRegExp=/{(\d+)(?:,([+-]?\d+))?}/g,_hasFormatRegExp=new RegExp(_formatRegExp.source),Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(format){function padString(str,align,pad){if(!align)return str;var plen=Math.abs(align)-str.length;if(plen<1)return str;var padding=String(pad).repeat(plen);return align<0?str+padding:padding+str}if(arguments.length<2)return 0===arguments.length?"":format;var args=2===arguments.length&&Array.isArray(arguments[1])?_toConsumableArray(arguments[1]):Array.prototype.slice.call(arguments,1);return 0===args.length?format:_hasFormatRegExp.test(format)?(_formatRegExp.lastIndex=0,format.replace(_formatRegExp,(function(match,index,align){var retval=args[index];if(null==retval)return"";for(;"function"==typeof retval;)retval=retval();switch(_typeof(retval)){case"string":break;case"object":retval=JSON.stringify(retval);break;default:retval=String(retval)}return padString(retval,align?Number.parseInt(align,10):0," ")}))):format}}),Object.defineProperty(String.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.contains called on null or undefined");return-1!==String.prototype.indexOf.apply(this,arguments)}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var needle=String(arguments[0]||"");if(""===needle)return 0;for(var indexOf=String.prototype.indexOf,step=needle.length,pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,pos+=step;return count}}),Object.defineProperty(String.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.first called on null or undefined");return _getCodePointStartAndEnd(String(this),0).char}}),Object.defineProperty(String.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.last called on null or undefined");var str=String(this);return _getCodePointStartAndEnd(str,str.length-1).char}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(startAt,delCount,replacement){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var length=this.length>>>0;if(0===length)return"";var start=Number(startAt);Number.isSafeInteger(start)?start<0&&(start+=length)<0&&(start=0):start=0,start>length&&(start=length);var count=Number(delCount);(!Number.isSafeInteger(count)||count<0)&&(count=0);var res=this.slice(0,start);return void 0!==replacement&&(res+=replacement),start+count<length&&(res+=this.slice(start+count)),res}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd3=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd3.char,end=_getCodePointStartAnd3.end;return-1===end?"":char.toLocaleUpperCase()+str.slice(end+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd4=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd4.char,end=_getCodePointStartAnd4.end;return-1===end?"":char.toUpperCase()+str.slice(end+1)}}),Object.defineProperty(Date.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:date)",this.toISOString()]}}),Object.defineProperty(Function.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)","(".concat(this.toString(),")")]}}),Object.defineProperty(Map.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:map)",_toConsumableArray(this)]}}),Object.defineProperty(RegExp.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)",this.toString()]}}),Object.defineProperty(Set.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:set)",_toConsumableArray(this)]}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(code,data){if("string"!=typeof code)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return["(revive:eval)",[code,data]]}}),Object.defineProperty(JSON,"_real_stringify",{value:JSON.stringify}),Object.defineProperty(JSON,"stringify",{configurable:!0,writable:!0,value:function(_value,replacer,space){return JSON._real_stringify(_value,(function(key,val){var value=val;if("function"==typeof replacer)try{value=replacer(key,value)}catch(ex){}return void 0===value&&(value=["(revive:eval)","undefined"]),value}),space)}}),Object.defineProperty(JSON,"_real_parse",{value:JSON.parse}),Object.defineProperty(JSON,"parse",{configurable:!0,writable:!0,value:function value(text,reviver){return JSON._real_parse(text,(function(key,val){var value=val;if(Array.isArray(value)&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":try{if(Array.isArray(value[1])){var $ReviveData$=value[1][1];value=eval(value[1][0])}else value=eval(value[1])}catch(ex){}}else if("string"==typeof value&&"@@revive@@"===value.slice(0,10))try{value=eval(value.slice(10))}catch(ex){}if("function"==typeof reviver)try{value=reviver(key,value)}catch(ex){}return value}))}}),Object.defineProperty(Array.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.contains called on null or undefined");return Array.prototype.includes.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAll called on null or undefined");return Array.prototype.includesAll.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAny called on null or undefined");return Array.prototype.includesAny.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"flatten",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatten called on null or undefined");return Array.prototype.flat.call(this,1/0)}}),Object.defineProperty(String.prototype,"readBracketedList",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.readBracketedList called on null or undefined");for(var match,re=new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)","gm"),names=[];null!==(match=re.exec(this));)match[1]?names.push(match[1]):match[2]&&names.push(match[2]);return names}})}();var Browser=(userAgent=navigator.userAgent.toLowerCase(),winPhone=userAgent.includes("windows phone"),isMobile=Object.freeze({Android:!winPhone&&userAgent.includes("android"),BlackBerry:/blackberry|bb10/.test(userAgent),iOS:!winPhone&&/ip(?:hone|ad|od)/.test(userAgent),Opera:!winPhone&&("object"===_typeof(window.operamini)||userAgent.includes("opera mini")),Windows:winPhone||/iemobile|wpdesktop/.test(userAgent),any:function(){return isMobile.Android||isMobile.BlackBerry||isMobile.iOS||isMobile.Opera||isMobile.Windows}}),isGecko=!isMobile.Windows&&!/khtml|trident|edge/.test(userAgent)&&userAgent.includes("gecko"),isIE=!userAgent.includes("opera")&&/msie|trident/.test(userAgent),ieVersion=isIE?(ver=/(?:msie\s+|rv:)(\d+\.\d)/.exec(userAgent))?Number(ver[1]):0:null,isOpera=userAgent.includes("opera")||userAgent.includes(" opr/"),operaVersion=isOpera?function(){var ver=new RegExp("".concat(/khtml|chrome/.test(userAgent)?"opr":"version","\\/(\\d+\\.\\d+)")).exec(userAgent);return ver?Number(ver[1]):0}():null,isVivaldi=userAgent.includes("vivaldi"),Object.freeze({userAgent:userAgent,isMobile:isMobile,isGecko:isGecko,isIE:isIE,ieVersion:ieVersion,isOpera:isOpera,operaVersion:operaVersion,isVivaldi:isVivaldi})),ver,userAgent,winPhone,isMobile,isGecko,isIE,ieVersion,isOpera,operaVersion,isVivaldi,Has=(hasAudioElement=function(){try{return"function"==typeof document.createElement("audio").canPlayType}catch(ex){}return!1}(),hasFile=function(){try{return"Blob"in window&&"File"in window&&"FileList"in window&&"FileReader"in window&&(!Browser.isOpera||Browser.operaVersion>=15)}catch(ex){}return!1}(),hasGeolocation=function(){try{return"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition}catch(ex){}return!1}(),hasMutationObserver=function(){try{return"MutationObserver"in window&&"function"==typeof window.MutationObserver}catch(ex){}return!1}(),hasPerformance=function(){try{return"performance"in window&&"function"==typeof window.performance.now}catch(ex){}return!1}(),hasTouch=function(){try{return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof window.DocumentTouch||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}catch(ex){}return!1}(),hasTransitionEndEvent=function(){try{for(var teMap=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),teKeys=_toConsumableArray(teMap.keys()),el=document.createElement("div"),i=0;i<teKeys.length;++i)if(el.style[teKeys[i]]!==undefined)return teMap.get(teKeys[i])}catch(ex){}return!1}(),Object.freeze({audio:hasAudioElement,fileAPI:hasFile,geolocation:hasGeolocation,mutationObserver:hasMutationObserver,performance:hasPerformance,touch:hasTouch,transitionEndEvent:hasTransitionEndEvent})),hasAudioElement,hasFile,hasGeolocation,hasMutationObserver,hasPerformance,hasTouch,hasTransitionEndEvent,Visibility=(vendor=function(){try{return Object.freeze([{hiddenProperty:"hidden",stateProperty:"visibilityState",changeEvent:"visibilitychange"},{hiddenProperty:"webkitHidden",stateProperty:"webkitVisibilityState",changeEvent:"webkitvisibilitychange"},{hiddenProperty:"mozHidden",stateProperty:"mozVisibilityState",changeEvent:"mozvisibilitychange"},{hiddenProperty:"msHidden",stateProperty:"msVisibilityState",changeEvent:"msvisibilitychange"}].find((function(vnd){return vnd.hiddenProperty in document})))}catch(ex){}return undefined}(),Object.freeze(Object.defineProperties({},{vendor:{get:function(){return vendor}},state:{get:function(){return vendor&&document[vendor.stateProperty]||"visible"}},isEnabled:{value:function(){return Boolean(vendor)}},isHidden:{value:function(){return Boolean(vendor&&document[vendor.hiddenProperty])}},hiddenProperty:{value:vendor&&vendor.hiddenProperty},stateProperty:{value:vendor&&vendor.stateProperty},changeEvent:{value:vendor&&vendor.changeEvent}}))),vendor,Fullscreen=function(){var _hasPromise,vendor=function(){try{return Object.freeze([{isEnabled:"fullscreenEnabled",element:"fullscreenElement",requestFn:"requestFullscreen",exitFn:"exitFullscreen",changeEvent:"fullscreenchange",errorEvent:"fullscreenerror"},{isEnabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",requestFn:"webkitRequestFullscreen",exitFn:"webkitExitFullscreen",changeEvent:"webkitfullscreenchange",errorEvent:"webkitfullscreenerror"},{isEnabled:"mozFullScreenEnabled",element:"mozFullScreenElement",requestFn:"mozRequestFullScreen",exitFn:"mozCancelFullScreen",changeEvent:"mozfullscreenchange",errorEvent:"mozfullscreenerror"},{isEnabled:"msFullscreenEnabled",element:"msFullscreenElement",requestFn:"msRequestFullscreen",exitFn:"msExitFullscreen",changeEvent:"MSFullscreenChange",errorEvent:"MSFullscreenError"}].find((function(vnd){return vnd.isEnabled in document})))}catch(ex){}return undefined}(),_returnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,vendor)try{var value=document.exitFullscreen();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise});function _selectElement(requestedEl){var selectedEl=requestedEl||document.documentElement;return selectedEl===document.documentElement&&("msRequestFullscreen"===vendor.requestFn||Browser.isOpera&&Browser.operaVersion<15)&&(selectedEl=document.body),selectedEl}function isFullscreen(){return Boolean(vendor&&document[vendor.element])}function requestFullscreen(options,requestedEl){var _this=this;if(!vendor)return Promise.reject(new Error("fullscreen not supported"));var element=_selectElement(requestedEl);if("function"!=typeof element[vendor.requestFn])return Promise.reject(new Error("fullscreen not supported"));if(isFullscreen())return Promise.resolve();if(_returnsPromise())return element[vendor.requestFn](options);var namespace=".Fullscreen_requestFullscreen";return new Promise((function(resolve,reject){jQuery(element).off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){jQuery(_this).off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen request error")):resolve()})),element[vendor.requestFn](options)}))}function exitFullscreen(){var _this2=this;if(!vendor||"function"!=typeof document[vendor.exitFn])return Promise.reject(new TypeError("fullscreen not supported"));if(!isFullscreen())return Promise.reject(new TypeError("fullscreen mode not active"));if(_returnsPromise())return document[vendor.exitFn]();var namespace=".Fullscreen_exitFullscreen";return new Promise((function(resolve,reject){jQuery(document).off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){jQuery(_this2).off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen exit error")):resolve()})),document[vendor.exitFn]()}))}return Object.freeze(Object.defineProperties({},{vendor:{get:function(){return vendor}},element:{get:function(){return vendor?document[vendor.element]:null}},isEnabled:{value:function(){return Boolean(vendor&&document[vendor.isEnabled])}},isFullscreen:{value:isFullscreen},request:{value:requestFullscreen},exit:{value:exitFullscreen},toggle:{value:function(options,requestedEl){return isFullscreen()?exitFullscreen():requestFullscreen(options,requestedEl)}},onChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);$(element).on(vendor.changeEvent,handlerFn)}}},offChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?$(element).off(vendor.changeEvent,handlerFn):$(element).off(vendor.changeEvent)}}},onError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);$(element).on(vendor.errorEvent,handlerFn)}}},offError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?$(element).off(vendor.errorEvent,handlerFn):$(element).off(vendor.errorEvent)}}}}))}(),_ref3=Object.freeze(Object.defineProperties({},{clone:{value:function clone(orig){return"object"!==_typeof(orig)||null===orig?orig:orig instanceof String?String(orig):orig instanceof Number?Number(orig):orig instanceof Boolean?Boolean(orig):"function"==typeof orig.clone?orig.clone(!0):orig.nodeType&&"function"==typeof orig.cloneNode?orig.cloneNode(!0):(orig instanceof Array?copy=new Array(orig.length):orig instanceof Date?copy=new Date(orig.getTime()):orig instanceof Map?(copy=new Map,orig.forEach((function(val,key){return copy.set(key,clone(val))}))):orig instanceof RegExp?copy=new RegExp(orig):orig instanceof Set?(copy=new Set,orig.forEach((function(val){return copy.add(clone(val))}))):copy=Object.create(Object.getPrototypeOf(orig)),Object.keys(orig).forEach((function(name){return copy[name]=clone(orig[name])})),copy);var copy}},convertBreaks:{value:function(source){for(var node,output=document.createDocumentFragment(),para=document.createElement("p");null!==(node=source.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":if(null!==node.nextSibling&&node.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===node.nextSibling.nodeName.toUpperCase()){source.removeChild(node.nextSibling),source.removeChild(node),output.appendChild(para),para=document.createElement("p");continue}if(!para.hasChildNodes()){source.removeChild(node);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":para.hasChildNodes()&&(output.appendChild(para),para=document.createElement("p")),output.appendChild(node);continue}para.appendChild(node)}para.hasChildNodes()&&output.appendChild(para),source.appendChild(output)}},safeActiveElement:{value:function(){try{return document.activeElement||null}catch(ex){return null}}},setDisplayTitle:{value:function(title){if("string"!=typeof title)throw new TypeError("story display title must be a string (received: ".concat(Util.getType(title),")"));var render=document.createDocumentFragment();new Wikifier(render,title);var text=function(source){for(var node,copy=source.cloneNode(!0),frag=document.createDocumentFragment();null!==(node=copy.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":case"DIV":case"P":frag.appendChild(document.createTextNode(" "))}frag.appendChild(node)}return frag.textContent}(render).trim();document.title=Config.passages.displayTitles&&""!==State.passage&&State.passage!==Config.passages.start?"".concat(State.passage," | ").concat(text):text;var storyTitle=document.getElementById("story-title");null!==storyTitle&&jQuery(storyTitle).empty().append(render)}},setPageElement:{value:function(idOrElement,titles,defaultText){var el="object"===_typeof(idOrElement)?idOrElement:document.getElementById(idOrElement);if(null==el)return null;var ids=Array.isArray(titles)?titles:[titles];jQuery(el).empty();for(var i=0,iend=ids.length;i<iend;++i)if(Story.has(ids[i]))return new Wikifier(el,Story.get(ids[i]).processText().trim()),el;if(null!=defaultText){var text=String(defaultText).trim();""!==text&&new Wikifier(el,text)}return el}},throwError:{value:function(place,message,source){var $wrapper=jQuery(document.createElement("div")),$toggle=jQuery(document.createElement("button")),$source=jQuery(document.createElement("pre")),mesg="".concat(L10n.get("errorTitle"),": ").concat(message||"unknown error");return $toggle.addClass("error-toggle").ariaClick({label:L10n.get("errorToggle")},(function(){$toggle.hasClass("enabled")?($toggle.removeClass("enabled"),$source.attr({"aria-hidden":!0,hidden:"hidden"})):($toggle.addClass("enabled"),$source.removeAttr("aria-hidden hidden"))})).appendTo($wrapper),jQuery(document.createElement("span")).addClass("error").text(mesg).appendTo($wrapper),jQuery(document.createElement("code")).text(source).appendTo($source),$source.addClass("error-source").attr({"aria-hidden":!0,hidden:"hidden"}).appendTo($wrapper),$wrapper.addClass("error-view").appendTo(place),console.warn("".concat(mesg,"\n\t").concat(source.replace(/\n/g,"\n\t"))),!1}},stringFrom:{value:function stringFrom(value){switch(_typeof(value)){case"function":return"[function]";case"number":if(Number.isNaN(value))return"[number NaN]";break;case"object":if(null===value)return"[null]";if(value instanceof Array)return value.map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Set)return Array.from(value).map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Map){var result=Array.from(value).map((function(_ref4){var _ref5=_slicedToArray(_ref4,2),key=_ref5[0],val=_ref5[1];return"".concat(stringFrom(key)," → ").concat(stringFrom(val))}));return"{ ".concat(result.join(", ")," }")}if(value instanceof Date)return value.toLocaleString();if(value instanceof Element){if(value===document.documentElement||value===document.head||value===document.body)throw new Error("illegal operation; attempting to convert the <html>, <head>, or <body> tags to string is not allowed");return value.outerHTML}return value instanceof Node?value.textContent:"function"==typeof value.toString?value.toString():Object.prototype.toString.call(value);case"symbol":var desc=void 0!==value.description?' "'.concat(value.description,'"'):"";return"[symbol".concat(desc,"]");case"undefined":return"[undefined]"}return String(value)}}})),clone=_ref3.clone,convertBreaks=_ref3.convertBreaks,safeActiveElement=_ref3.safeActiveElement,setDisplayTitle=_ref3.setDisplayTitle,setPageElement=_ref3.setPageElement,throwError=_ref3.throwError,stringFrom=_ref3.stringFrom;!function(){function onKeypressFn(ev){13!==ev.which&&32!==ev.which||(ev.preventDefault(),jQuery(safeActiveElement()||this).trigger("click"))}function onClickFnWrapper(fn){return function(){var $this=jQuery(this);$this.ariaIsDisabled()||($this.is("[aria-pressed]")&&$this.attr("aria-pressed","true"===$this.attr("aria-pressed")?"false":"true"),fn.apply(this,arguments))}}function oneClickFnWrapper(fn){return onClickFnWrapper((function(){jQuery(this).off(".aria-clickable").removeAttr("role tabindex aria-controls aria-pressed").filter("button").prop("disabled",!0),fn.apply(this,arguments)}))}jQuery.fn.extend({ariaClick:function(options,handler){if(0===this.length||0===arguments.length)return this;var opts=options,fn=handler;return null==fn&&(fn=opts,opts=undefined),"string"!=typeof(opts=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,role:undefined,controls:undefined,pressed:undefined,label:undefined},opts)).namespace?opts.namespace="":"."!==opts.namespace[0]&&(opts.namespace=".".concat(opts.namespace)),"boolean"==typeof opts.pressed&&(opts.pressed=opts.pressed?"true":"false"),this.filter("button").prop("type","button"),null!=opts.role?this.attr("role",opts.role):this.not("[role]").filter("a,[data-passage]").attr("role","link").end().not("a").not("[data-passage]").attr("role","button").end().end().end(),this.attr("tabindex",0),null!=opts.controls&&this.attr("aria-controls",opts.controls),null!=opts.pressed&&this.attr("aria-pressed",opts.pressed),null!=opts.label&&this.attr({"aria-label":opts.label,title:opts.label}),this.not("button").on("keypress.aria-clickable".concat(opts.namespace),opts.selector,onKeypressFn),this.on("click.aria-clickable".concat(opts.namespace),opts.selector,opts.data,opts.one?oneClickFnWrapper(fn):onClickFnWrapper(fn)),this},ariaDisabled:function(disable){if(0===this.length||0===arguments.length)return this;var $nonDisableable=this.not("button,fieldset,input,menuitem,optgroup,option,select,textarea"),$disableable=this.filter("button,fieldset,input,menuitem,optgroup,option,select,textarea");return disable?($nonDisableable.each((function(){this.setAttribute("disabled",""),this.setAttribute("aria-disabled","true")})),$disableable.each((function(){this.disabled=!0,this.setAttribute("aria-disabled","true")}))):($nonDisableable.each((function(){this.removeAttribute("disabled"),this.removeAttribute("aria-disabled")})),$disableable.each((function(){this.disabled=!1,this.removeAttribute("aria-disabled")}))),this},ariaIsDisabled:function(){return this.is("[disabled]")}})}(),jQuery.extend({wikiWithOptions:function(options){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)sources[_key-1]=arguments[_key];if(0!==sources.length){var frag=document.createDocumentFragment();sources.forEach((function(content){return new Wikifier(frag,content,options)}));var errors=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "))}},wiki:function(){for(var _len2=arguments.length,sources=new Array(_len2),_key2=0;_key2<_len2;_key2++)sources[_key2]=arguments[_key2];this.wikiWithOptions.apply(this,[undefined].concat(sources))}}),jQuery.fn.extend({wikiWithOptions:function(options){for(var _len3=arguments.length,sources=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)sources[_key3-1]=arguments[_key3];if(0===this.length||0===sources.length)return this;var frag=document.createDocumentFragment();return sources.forEach((function(content){return new Wikifier(frag,content,options)})),this.append(frag),this},wiki:function(){for(var _len4=arguments.length,sources=new Array(_len4),_key4=0;_key4<_len4;_key4++)sources[_key4]=arguments[_key4];return this.wikiWithOptions.apply(this,[undefined].concat(sources))}});var Util=function(){var toString,utilGetType="[object Object]"===(toString=Object.prototype.toString).call(new Map)?function(O){if(null===O)return"null";if(O instanceof Map)return"Map";if(O instanceof Set)return"Set";var baseType=_typeof(O);return"object"===baseType?toString.call(O).slice(8,-1):baseType}:function(O){if(null===O)return"null";var baseType=_typeof(O);return"object"===baseType?toString.call(O).slice(8,-1):baseType};function utilToEnum(obj){var pEnum=Object.create(null);if(obj instanceof Array)obj.forEach((function(val,i){return pEnum[String(val)]=i}));else if(obj instanceof Set)Array.from(obj).forEach((function(val,i){return pEnum[String(val)]=i}));else if(obj instanceof Map)obj.forEach((function(val,key){return pEnum[String(key)]=val}));else{if("object"!==_typeof(obj)||null===obj||Object.getPrototypeOf(obj)!==Object.prototype)throw new TypeError("Util.toEnum obj parameter must be an Array, Map, Set, or generic object");Object.assign(pEnum,obj)}return Object.freeze(pEnum)}function utilToStringTag(obj){return Object.prototype.toString.call(obj).slice(8,-1)}var _illegalSlugCharsRe=/[\x00-\x20!-/:-@[-^`{-\x9f]+/g,_isInvalidSlugRe=/^-*$/;var _illegalFilenameCharsRE=/[\x00-\x1f"#$%&'*+,/:;<=>?\\^`|\x7f-\x9f]+/g;var _markupCharsRe=/[!"#$&'*\-/<=>?@[\\\]^_`{|}~]/g,_hasMarkupCharsRe=new RegExp(_markupCharsRe.source),_markupCharsMap=utilToEnum({"!":"&#33;",'"':"&quot;","#":"&#35;",$:"&#36;","&":"&amp;","'":"&#39;","*":"&#42;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","?":"&#63;","@":"&#64;","[":"&#91;","\\":"&#92;","]":"&#93;","^":"&#94;",_:"&#95;","`":"&#96;","{":"&#123;","|":"&#124;","}":"&#125;","~":"&#126;"});var _htmlCharsRe=/[&<>"'`]/g,_hasHtmlCharsRe=new RegExp(_htmlCharsRe.source),_htmlCharsMap=utilToEnum({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"});function utilEscape(str){if(null==str)return"";var val=String(str);return val&&_hasHtmlCharsRe.test(val)?val.replace(_htmlCharsRe,(function(ch){return _htmlCharsMap[ch]})):val}var _escapedHtmlRe=/&(?:amp|#38|#x26|lt|#60|#x3c|gt|#62|#x3e|quot|#34|#x22|apos|#39|#x27|#96|#x60);/gi,_hasEscapedHtmlRe=new RegExp(_escapedHtmlRe.source,"i"),_escapedHtmlMap=utilToEnum({"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3c;":"<","&gt;":">","&#62;":">","&#x3e;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"});function utilUnescape(str){if(null==str)return"";var val=String(str);return val&&_hasEscapedHtmlRe.test(val)?val.replace(_escapedHtmlRe,(function(entity){return _escapedHtmlMap[entity.toLowerCase()]})):val}var _nowSource=Has.performance?performance:Date;var _cssTimeRe=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/;var utilScrubEventKey=function(){var separatorKey,decimalKey;if("undefined"!=typeof Intl&&"function"==typeof Intl.NumberFormat){var match=(new Intl.NumberFormat).format(111111.5).match(/(\D*)\d+(\D*)/);match&&(separatorKey=match[1],decimalKey=match[2])}return separatorKey||decimalKey||(separatorKey=",",decimalKey="."),function(key){switch(key){case"Scroll":return"ScrollLock";case"Spacebar":return" ";case"Left":return"ArrowLeft";case"Right":return"ArrowRight";case"Up":return"ArrowUp";case"Down":return"ArrowDown";case"Del":return"Delete";case"Crsel":return"CrSel";case"Exsel":return"ExSel";case"Esc":return"Escape";case"Apps":return"ContextMenu";case"Nonconvert":return"NonConvert";case"MediaNextTrack":return"MediaTrackNext";case"MediaPreviousTrack":return"MediaTrackPrevious";case"VolumeUp":return"AudioVolumeUp";case"VolumeDown":return"AudioVolumeDown";case"VolumeMute":return"AudioVolumeMute";case"Zoom":return"ZoomToggle";case"SelectMedia":case"MediaSelect":return"LaunchMediaPlayer";case"Add":return"+";case"Divide":return"/";case"Multiply":return"*";case"Subtract":return"-";case"Decimal":return decimalKey;case"Separator":return separatorKey}return key}}(),utilHasMediaQuery="function"!=typeof window.matchMedia?function(){return!1}:function(mediaQuery){return window.matchMedia(mediaQuery).matches};return Object.freeze(Object.defineProperties({},{getType:{value:utilGetType},isBoolean:{value:function(obj){return"boolean"==typeof obj||"string"==typeof obj&&("true"===obj||"false"===obj)}},isIterable:{value:function(obj){return null!=obj&&"function"==typeof obj[Symbol.iterator]}},isNumeric:{value:function(obj){var num;switch(_typeof(obj)){case"number":num=obj;break;case"string":num=Number(obj);break;default:return!1}return!Number.isNaN(num)&&Number.isFinite(num)}},sameValueZero:{value:function(a,b){return a===b||a!=a&&b!=b}},toEnum:{value:utilToEnum},toStringTag:{value:utilToStringTag},slugify:{value:function(str){var base=String(str).trim(),_legacy=base.replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase();return _isInvalidSlugRe.test(_legacy)?base.replace(_illegalSlugCharsRe,"").replace(/[_\s\u2013\u2014-]+/g,"-"):_legacy}},sanitizeFilename:{value:function(str){return String(str).trim().replace(_illegalFilenameCharsRE,"")}},escapeMarkup:{value:function(str){if(null==str)return"";var val=String(str);return val&&_hasMarkupCharsRe.test(val)?val.replace(_markupCharsRe,(function(ch){return _markupCharsMap[ch]})):val}},escape:{value:utilEscape},unescape:{value:utilUnescape},charAndPosAt:{value:function(text,position){var str=String(text),pos=Math.trunc(position),code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};var retval={char:str.charAt(pos),start:pos,end:pos};if(code<55296||code>57343)return retval;if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)return retval;var nextCode=str.charCodeAt(nextPos);return nextCode<56320||nextCode>57343||(retval.char=retval.char+str.charAt(nextPos),retval.end=nextPos),retval}if(0===pos)return retval;var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);return prevCode<55296||prevCode>56319||(retval.char=str.charAt(prevPos)+retval.char,retval.start=prevPos),retval}},now:{value:function(){return _nowSource.now()}},fromCssTime:{value:function(cssTime){var match=_cssTimeRe.exec(String(cssTime));if(null===match)throw new SyntaxError('invalid time value syntax: "'.concat(cssTime,'"'));var msec=Number(match[1]);if(1===match[2].length&&(msec*=1e3),Number.isNaN(msec)||!Number.isFinite(msec))throw new RangeError('invalid time value: "'.concat(cssTime,'"'));return msec}},toCssTime:{value:function(msec){if("number"!=typeof msec||Number.isNaN(msec)||!Number.isFinite(msec)){var what;switch(_typeof(msec)){case"string":what='"'.concat(msec,'"');break;case"number":what=String(msec);break;default:what=utilToStringTag(msec)}throw new Error("invalid milliseconds: ".concat(what))}return"".concat(msec,"ms")}},fromCssProperty:{value:function(cssName){if(!cssName.includes("-"))switch(cssName){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return cssName}return("-ms-"===cssName.slice(0,4)?cssName.slice(1):cssName).split("-").map((function(part,i){return 0===i?part:part.toUpperFirst()})).join("")}},parseUrl:{value:function(url){var el=document.createElement("a"),queryObj=Object.create(null);el.href=url,el.search&&el.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach((function(query){var _query$split2=_slicedToArray(query.split("="),2),key=_query$split2[0],value=_query$split2[1];queryObj[key]=value}));var pathname=el.host&&"/"!==el.pathname[0]?"/".concat(el.pathname):el.pathname;return{href:el.href,protocol:el.protocol,host:el.host,hostname:el.hostname,port:el.port,path:"".concat(pathname).concat(el.search),pathname:pathname,query:el.search,search:el.search,queries:queryObj,searches:queryObj,hash:el.hash}}},newExceptionFrom:{value:function(original,exceptionType,override){if("object"!==_typeof(original)||null===original)throw new Error("Util.newExceptionFrom original parameter must be an object");if("function"!=typeof exceptionType)throw new Error("Util.newExceptionFrom exceptionType parameter must be an error type constructor");var ex=new exceptionType(original.message);void 0!==original.name&&(ex.name=original.name),void 0!==original.code&&(ex.code=original.code),void 0!==original.columnNumber&&(ex.columnNumber=original.columnNumber),void 0!==original.description&&(ex.description=original.description),void 0!==original.fileName&&(ex.fileName=original.fileName),void 0!==original.lineNumber&&(ex.lineNumber=original.lineNumber),void 0!==original.number&&(ex.number=original.number),void 0!==original.stack&&(ex.stack=original.stack);var overrideType=_typeof(override);if("undefined"!==overrideType)if("object"===overrideType&&null!==override)Object.assign(ex,override);else{if("string"!==overrideType)throw new Error("Util.newExceptionFrom override parameter must be an object or string");ex.message=override}return ex}},scrubEventKey:{value:utilScrubEventKey},hasMediaQuery:{value:utilHasMediaQuery},random:{value:Math.random},entityEncode:{value:utilEscape},entityDecode:{value:utilUnescape},evalExpression:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),SimpleStore=(_adapters=[],_initialized=null,Object.freeze(Object.defineProperties({},{adapters:{value:_adapters},create:{value:function(storageId,persistent){if(_initialized)return _initialized.create(storageId,persistent);for(var i=0;i<_adapters.length;++i)if(_adapters[i].init(storageId,persistent))return(_initialized=_adapters[i]).create(storageId,persistent);throw new Error("no valid storage adapters found")}}}))),_adapters,_initialized,_ok,_WebStorageAdapter;SimpleStore.adapters.push((_ok=!1,_WebStorageAdapter=function(){function _WebStorageAdapter(storageId,persistent){_classCallCheck(this,_WebStorageAdapter);var prefix="".concat(storageId,"."),engine=null,name=null;persistent?(engine=window.localStorage,name="localStorage"):(engine=window.sessionStorage,name="sessionStorage"),Object.defineProperties(this,{_engine:{value:engine},_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:name},id:{value:storageId},persistent:{value:!!persistent}})}return _createClass(_WebStorageAdapter,[{key:"length",get:function(){return this.keys().length}},{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){for(var keys=[],i=0;i<this._engine.length;++i){var key=this._engine.key(i);this._prefixRe.test(key)&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&this._engine.hasOwnProperty(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=this._engine.getItem(this._prefix+key);return null==value?null:_WebStorageAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{this._engine.setItem(this._prefix+key,_WebStorageAdapter._serialize(value))}catch(ex){if(/quota.?(?:exceeded|reached)/i.test(ex.name+ex.message))throw Util.newExceptionFrom(ex,Error,"".concat(this.name," quota exceeded"));throw ex}return!0}},{key:"delete",value:function(key){return!("string"!=typeof key||!key||(this._engine.removeItem(this._prefix+key),0))}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,iend=keys.length;i<iend;++i)this.delete(keys[i]);return!0}}],[{key:"_serialize",value:function(obj){return LZString.compressToUTF16(JSON.stringify(obj))}},{key:"_deserialize",value:function(str){return JSON.parse(LZString.decompressFromUTF16(str))}}]),_WebStorageAdapter}(),Object.freeze(Object.defineProperties({},{init:{value:function(){function hasWebStorage(storeId){try{var store=window[storeId],tid="_sc_".concat(String(Date.now()));store.setItem(tid,tid);var result=store.getItem(tid)===tid;return store.removeItem(tid),result}catch(ex){}return!1}return _ok=hasWebStorage("localStorage")&&hasWebStorage("sessionStorage")}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new _WebStorageAdapter(storageId,persistent)}}})))),SimpleStore.adapters.push(function(){var _MAX_EXPIRY="Tue, 19 Jan 2038 03:14:07 GMT",_MIN_EXPIRY="Thu, 01 Jan 1970 00:00:00 GMT",_ok=!1,_CookieAdapter=function(){function _CookieAdapter(storageId,persistent){_classCallCheck(this,_CookieAdapter);var prefix="".concat(storageId).concat(persistent?"!":"*",".");Object.defineProperties(this,{_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:"cookie"},id:{value:storageId},persistent:{value:!!persistent}})}return _createClass(_CookieAdapter,[{key:"length",get:function(){return this.keys().length}},{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){if(""===document.cookie)return[];for(var cookies=document.cookie.split(/;\s*/),keys=[],i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(this._prefixRe.test(key))""!==decodeURIComponent(kvPair[1])&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&null!==_CookieAdapter._getCookie(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=_CookieAdapter._getCookie(this._prefix+key);return null===value?null:_CookieAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{if(_CookieAdapter._setCookie(this._prefix+key,_CookieAdapter._serialize(value),this.persistent?"Tue, 19 Jan 2038 03:14:07 GMT":undefined),!this.has(key))throw new Error("unknown validation error during set")}catch(ex){throw Util.newExceptionFrom(ex,Error,"cookie error: ".concat(ex.message))}return!0}},{key:"delete",value:function(key){if("string"!=typeof key||!key||!this.has(key))return!1;try{if(_CookieAdapter._setCookie(this._prefix+key,undefined,_MIN_EXPIRY),this.has(key))throw new Error("unknown validation error during delete")}catch(ex){throw Util.newExceptionFrom(ex,Error,"cookie error: ".concat(ex.message))}return!0}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,iend=keys.length;i<iend;++i)this.delete(keys[i]);return!0}}],[{key:"_getCookie",value:function(prefixedKey){if(!prefixedKey||""===document.cookie)return null;for(var cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("=");if(prefixedKey===decodeURIComponent(kvPair[0]))return decodeURIComponent(kvPair[1])||null}return null}},{key:"_setCookie",value:function(prefixedKey,value,expiry){if(prefixedKey){var payload="".concat(encodeURIComponent(prefixedKey),"=");null!=value&&(payload+=encodeURIComponent(value)),null!=expiry&&(payload+="; expires=".concat(expiry)),payload+="; path=/",document.cookie=payload}}},{key:"_serialize",value:function(obj){return LZString.compressToBase64(JSON.stringify(obj))}},{key:"_deserialize",value:function(str){return JSON.parse(LZString.decompressFromBase64(str))}}]),_CookieAdapter}();return Object.freeze(Object.defineProperties({},{init:{value:function(storageId){try{var tid="_sc_".concat(String(Date.now()));_CookieAdapter._setCookie(tid,_CookieAdapter._serialize(tid),undefined),_ok=_CookieAdapter._deserialize(_CookieAdapter._getCookie(tid))===tid,_CookieAdapter._setCookie(tid,undefined,_MIN_EXPIRY)}catch(ex){_ok=!1}return _ok&&function(storageId){if(""===document.cookie)return;for(var oldPrefix="".concat(storageId,"."),oldPrefixRe=new RegExp("^".concat(RegExp.escape(oldPrefix))),persistPrefix="".concat(storageId,"!."),sessionPrefix="".concat(storageId,"*."),sessionTestRe=/\.(?:state|rcWarn)$/,cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(oldPrefixRe.test(key)){var value=decodeURIComponent(kvPair[1]);""!==value&&function(){var persist=!sessionTestRe.test(key);_CookieAdapter._setCookie(key,undefined,_MIN_EXPIRY),_CookieAdapter._setCookie(key.replace(oldPrefixRe,(function(){return persist?persistPrefix:sessionPrefix})),value,persist?_MAX_EXPIRY:undefined)}()}}}(storageId),_ok}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new _CookieAdapter(storageId,persistent)}}}))}());var DebugView=function(){function DebugView(parent,type,name,title){_classCallCheck(this,DebugView),Object.defineProperties(this,{parent:{value:parent},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:title,"aria-label":title,"data-type":null!=type?type:"","data-name":null!=name?name:""}).addClass("debug"),jQuery(this.break).addClass("debug hidden"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(DebugView,[{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(type){this.view.setAttribute("data-type",null!=type?type:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(name){this.view.setAttribute("data-name",null!=name?name:"")}},{key:"title",get:function(){return this.view.title},set:function(title){this.view.title=title}},{key:"append",value:function(el){return jQuery(this.view).append(el),this}},{key:"modes",value:function(options){if(null==options){var current={};return this.view.className.splitOrEmpty(/\s+/).forEach((function(name){"debug"!==name&&(current[name]=!0)})),current}if("object"===_typeof(options))return Object.keys(options).forEach((function(name){this[options[name]?"addClass":"removeClass"](name)}),jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var $view=jQuery(this.view);this.view.hasChildNodes()&&$view.contents().appendTo(this.parent),$view.remove(),jQuery(this.break).remove()}}],[{key:"isEnabled",value:function(){return"enabled"===jQuery(document.documentElement).attr("data-debug-view")}},{key:"enable",value:function(){jQuery(document.documentElement).attr("data-debug-view","enabled"),jQuery.event.trigger(":debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeAttr("data-debug-view"),jQuery.event.trigger(":debugviewupdate")}},{key:"toggle",value:function(){"enabled"===jQuery(document.documentElement).attr("data-debug-view")?DebugView.disable():DebugView.enable()}}]),DebugView}(),NodeTyper=function(){var NodeTyper=function(){function NodeTyper(config){if(_classCallCheck(this,NodeTyper),"object"!==_typeof(config)||null===config)throw new Error("config parameter must be an object (received: ".concat(Util.getType(config),")"));if(!(config.hasOwnProperty("targetNode")&&config.targetNode instanceof Node))throw new Error('config parameter object "targetNode" property must be a node');Object.defineProperties(this,{node:{value:config.targetNode},childNodes:{value:[]},nodeValue:{writable:!0,value:""},appendTo:{writable:!0,value:config.parentNode||null},classNames:{writable:!0,value:config.classNames||null},finished:{writable:!0,value:!1}});var childNode,node=this.node;for(node.nodeValue&&(this.nodeValue=node.nodeValue,node.nodeValue="");null!==(childNode=node.firstChild);)this.childNodes.push(new NodeTyper({targetNode:childNode,parentNode:node,classNames:this.classNames})),node.removeChild(childNode)}return _createClass(NodeTyper,[{key:"finish",value:function(){for(;this.type(!0););return!1}},{key:"type",value:function(flush){if(this.finished)return!1;if(this.appendTo){if(this.appendTo.appendChild(this.node),this.appendTo=null,this.node.nodeType!==Node.ELEMENT_NODE&&this.node.nodeType!==Node.TEXT_NODE||"none"===jQuery(this.node.parentNode).css("display"))return this.finish();this.node.parentNode&&this.classNames&&jQuery(this.node.parentNode).addClass(this.classNames)}if(this.nodeValue){if(flush)this.node.nodeValue+=this.nodeValue,this.nodeValue="";else{var _Util$charAndPosAt=Util.charAndPosAt(this.nodeValue,0),char=_Util$charAndPosAt.char,start=_Util$charAndPosAt.start,end=_Util$charAndPosAt.end;this.node.nodeValue+=char,this.nodeValue=this.nodeValue.slice(1+end-start)}return!0}this.classNames&&(jQuery(this.node.parentNode).removeClass(this.classNames),this.classNames=null);for(var childNodes=this.childNodes;childNodes.length>0;){if(childNodes[0].type())return!0;childNodes.shift()}return this.finished=!0,!1}}]),NodeTyper}();return NodeTyper}(),PRNGWrapper=function(){function PRNGWrapper(seed,useEntropy){_classCallCheck(this,PRNGWrapper),Object.defineProperties(this,new Math.seedrandom(seed,useEntropy,(function(prng,seed){return{_prng:{value:prng},seed:{writable:!0,value:seed},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this._prng()}}}})))}return _createClass(PRNGWrapper,null,[{key:"marshal",value:function(prng){if(!prng||!prng.hasOwnProperty("seed")||!prng.hasOwnProperty("pull"))throw new Error("PRNG is missing required data");return{seed:prng.seed,pull:prng.pull}}},{key:"unmarshal",value:function(prngObj){if(!prngObj||!prngObj.hasOwnProperty("seed")||!prngObj.hasOwnProperty("pull"))throw new Error("PRNG object is missing required data");for(var prng=new PRNGWrapper(prngObj.seed,!1),i=prngObj.pull;i>0;--i)prng.random();return prng}}]),PRNGWrapper}(),StyleWrapper=(_imageMarkupRe=new RegExp(Patterns.cssImage,"g"),_hasImageMarkupRe=new RegExp(Patterns.cssImage),function(){function StyleWrapper(style){if(_classCallCheck(this,StyleWrapper),null==style)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:style}})}return _createClass(StyleWrapper,[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(rawCss){this.clear(),this.add(rawCss)}},{key:"add",value:function(rawCss){var css=rawCss;_hasImageMarkupRe.test(css)&&(_imageMarkupRe.lastIndex=0,css=css.replace(_imageMarkupRe,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(markup.hasOwnProperty("error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text.trim())}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),this.style.styleSheet?this.style.styleSheet.cssText+=css:this.style.appendChild(document.createTextNode(css))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}]),StyleWrapper}()),_imageMarkupRe,_hasImageMarkupRe,Diff=(Op=Util.toEnum({Delete:0,SpliceArray:1,Copy:2,CopyDate:3}),Object.freeze(Object.defineProperties({},{Op:{value:Op},diff:{value:function diff(orig,dest){for(var aOpRef,objToString=Object.prototype.toString,origIsArray=orig instanceof Array,keys=[].concat(Object.keys(orig),Object.keys(dest)).sort().filter((function(val,i,arr){return 0===i||arr[i-1]!==val})),diffed={},keyIsAOpRef=function(key){return key===aOpRef},i=0,klen=keys.length;i<klen;++i){var key=keys[i],origP=orig[key],destP=dest[key];if(orig.hasOwnProperty(key))if(dest.hasOwnProperty(key)){if(origP===destP)continue;if(_typeof(origP)===_typeof(destP))if("function"==typeof origP)origP.toString()!==destP.toString()&&(diffed[key]=[Op.Copy,destP]);else if("object"!==_typeof(origP)||null===origP)diffed[key]=[Op.Copy,destP];else{var origPType=objToString.call(origP);if(origPType===objToString.call(destP))if(origP instanceof Date)Number(origP)!==Number(destP)&&(diffed[key]=[Op.Copy,clone(destP)]);else if(origP instanceof Map)diffed[key]=[Op.Copy,clone(destP)];else if(origP instanceof RegExp)origP.toString()!==destP.toString()&&(diffed[key]=[Op.Copy,clone(destP)]);else if(origP instanceof Set)diffed[key]=[Op.Copy,clone(destP)];else if("[object Object]"!==origPType)diffed[key]=[Op.Copy,clone(destP)];else{var recurse=diff(origP,destP);null!==recurse&&(diffed[key]=recurse)}else diffed[key]=[Op.Copy,clone(destP)]}else diffed[key]=[Op.Copy,"object"!==_typeof(destP)||null===destP?destP:clone(destP)]}else if(origIsArray&&Util.isNumeric(key)){var nKey=Number(key);if(!aOpRef){aOpRef="";do{aOpRef+="~"}while(keys.some(keyIsAOpRef));diffed[aOpRef]=[Op.SpliceArray,nKey,nKey]}nKey<diffed[aOpRef][1]&&(diffed[aOpRef][1]=nKey),nKey>diffed[aOpRef][2]&&(diffed[aOpRef][2]=nKey)}else diffed[key]=Op.Delete;else diffed[key]=[Op.Copy,"object"!==_typeof(destP)||null===destP?destP:clone(destP)]}return Object.keys(diffed).length>0?diffed:null}},patch:{value:function patch(orig,diffed){for(var keys=Object.keys(diffed||{}),patched=clone(orig),i=0,klen=keys.length;i<klen;++i){var key=keys[i],diffedP=diffed[key];if(diffedP===Op.Delete)delete patched[key];else if(diffedP instanceof Array)switch(diffedP[0]){case Op.SpliceArray:patched.splice(diffedP[1],diffedP[2]-diffedP[1]+1);break;case Op.Copy:patched[key]=clone(diffedP[1]);break;case Op.CopyDate:patched[key]=new Date(diffedP[1])}else patched[key]=patch(patched[key],diffedP)}return patched}}}))),Op,L10n=(_patternRe=/\{\w+\}/g,_hasPatternRe=new RegExp(_patternRe.source),Object.freeze(Object.defineProperties({},{init:{value:function(){strings&&Object.keys(strings).length>0&&Object.keys(l10nStrings).forEach((function(id){try{var value;switch(id){case"identity":value=strings.identity;break;case"aborting":value=strings.aborting;break;case"cancel":value=strings.cancel;break;case"close":value=strings.close;break;case"ok":value=strings.ok;break;case"errorTitle":value=strings.errors.title;break;case"errorNonexistentPassage":value=strings.errors.nonexistentPassage;break;case"errorSaveMissingData":value=strings.errors.saveMissingData;break;case"errorSaveIdMismatch":value=strings.errors.saveIdMismatch;break;case"warningDegraded":value=strings.warnings.degraded;break;case"debugViewTitle":value=strings.debugView.title;break;case"debugViewToggle":value=strings.debugView.toggle;break;case"uiBarToggle":value=strings.uiBar.toggle;break;case"uiBarBackward":value=strings.uiBar.backward;break;case"uiBarForward":value=strings.uiBar.forward;break;case"uiBarJumpto":value=strings.uiBar.jumpto;break;case"jumptoTitle":value=strings.jumpto.title;break;case"jumptoTurn":value=strings.jumpto.turn;break;case"jumptoUnavailable":value=strings.jumpto.unavailable;break;case"savesTitle":value=strings.saves.title;break;case"savesDisallowed":value=strings.saves.disallowed;break;case"savesIncapable":value=strings.saves.incapable;break;case"savesLabelAuto":value=strings.saves.labelAuto;break;case"savesLabelDelete":value=strings.saves.labelDelete;break;case"savesLabelExport":value=strings.saves.labelExport;break;case"savesLabelImport":value=strings.saves.labelImport;break;case"savesLabelLoad":value=strings.saves.labelLoad;break;case"savesLabelClear":value=strings.saves.labelClear;break;case"savesLabelSave":value=strings.saves.labelSave;break;case"savesLabelSlot":value=strings.saves.labelSlot;break;case"savesUnavailable":value=strings.saves.unavailable;break;case"savesUnknownDate":value=strings.saves.unknownDate;break;case"settingsTitle":value=strings.settings.title;break;case"settingsOff":value=strings.settings.off;break;case"settingsOn":value=strings.settings.on;break;case"settingsReset":value=strings.settings.reset;break;case"restartTitle":value=strings.restart.title;break;case"restartPrompt":value=strings.restart.prompt;break;case"shareTitle":value=strings.share.title;break;case"alertTitle":break;case"autoloadTitle":value=strings.autoload.title;break;case"autoloadCancel":value=strings.autoload.cancel;break;case"autoloadOk":value=strings.autoload.ok;break;case"autoloadPrompt":value=strings.autoload.prompt;break;case"macroBackText":value=strings.macros.back.text;break;case"macroReturnText":value=strings.macros.return.text}value&&(l10nStrings[id]=value.replace(/%\w+%/g,(function(pat){return"{".concat(pat.slice(1,-1),"}")})))}catch(ex){}}))}},get:{value:function(ids,overrides){if(!ids)return"";var selectedId,id=((Array.isArray(ids)?ids:[ids]).some((function(id){return!!l10nStrings.hasOwnProperty(id)&&(selectedId=id,!0)})),selectedId);if(!id)return"";for(var processed=l10nStrings[id],iteration=0;_hasPatternRe.test(processed);){if(++iteration>50)throw new Error("L10n.get exceeded maximum replacement iterations, probable infinite loop");_patternRe.lastIndex=0,processed=processed.replace(_patternRe,(function(pat){var subId=pat.slice(1,-1);return overrides&&overrides.hasOwnProperty(subId)?overrides[subId]:l10nStrings.hasOwnProperty(subId)?l10nStrings[subId]:void 0}))}return processed}}}))),_patternRe,_hasPatternRe,strings={errors:{},warnings:{},debugView:{},uiBar:{},jumpto:{},saves:{},settings:{},restart:{},share:{},autoload:{},macros:{back:{},return:{}}},l10nStrings={identity:"game",aborting:"Aborting",cancel:"Cancel",close:"Close",ok:"OK",errorTitle:"Error",errorToggle:"Toggle the error view",errorNonexistentPassage:'the passage "{passage}" does not exist',errorSaveDiskLoadFailed:"failed to load save file from disk",errorSaveMissingData:"save is missing required data. Either the loaded file is not a save or the save has become corrupted",errorSaveIdMismatch:"save is from the wrong {identity}",_warningIntroLacking:"Your browser either lacks or has disabled",_warningOutroDegraded:", so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoWebStorage:"{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}",warningDegraded:"{_warningIntroLacking} some of the capabilities required by this {identity}{_warningOutroDegraded}",debugBarToggle:"Toggle the debug bar",debugBarNoWatches:"— no watches set —",debugBarAddWatch:"Add watch",debugBarDeleteWatch:"Delete watch",debugBarWatchAll:"Watch all",debugBarWatchNone:"Delete all",debugBarLabelAdd:"Add",debugBarLabelWatch:"Watch",debugBarLabelTurn:"Turn",debugBarLabelViews:"Views",debugBarViewsToggle:"Toggle the debug views",debugBarWatchToggle:"Toggle the watch panel",uiBarToggle:"Toggle the UI bar",uiBarBackward:"Go backward within the {identity} history",uiBarForward:"Go forward within the {identity} history",uiBarJumpto:"Jump to a specific point within the {identity} history",jumptoTitle:"Jump To",jumptoTurn:"Turn",jumptoUnavailable:"No jump points currently available…",savesTitle:"Saves",savesDisallowed:"Saving has been disallowed on this passage.",savesIncapable:"{_warningIntroLacking} the capabilities required to support saves, so saves have been disabled for this session.",savesLabelAuto:"Autosave",savesLabelDelete:"Delete",savesLabelExport:"Save to Disk…",savesLabelImport:"Load from Disk…",savesLabelLoad:"Load",savesLabelClear:"Delete All",savesLabelSave:"Save",savesLabelSlot:"Slot",savesUnavailable:"No save slots found…",savesUnknownDate:"unknown",settingsTitle:"Settings",settingsOff:"Off",settingsOn:"On",settingsReset:"Reset to Defaults",restartTitle:"Restart",restartPrompt:"Are you sure that you want to restart? Unsaved progress will be lost.",shareTitle:"Share",alertTitle:"Alert",autoloadTitle:"Autoload",autoloadCancel:"Go to start",autoloadOk:"Load autosave",autoloadPrompt:"An autosave exists. Load it now or go to the start?",macroBackText:"Back",macroReturnText:"Return"},Config=(_debug=!1,_addVisitedLinkClass=!1,_cleanupWikifierOutput=!1,_loadDelay=0,_audioPauseOnFadeToZero=!0,_audioPreloadMetadata=!0,_historyControls=!0,_historyMaxStates=40,_macrosIfAssignmentError=!0,_macrosMaxLoopIterations=1e3,_macrosTypeSkipKey=" ",_macrosTypeVisitedPassages=!0,_passagesDisplayTitles=!1,_passagesNobr=!1,_savesId="untitled-story",_savesSlots=8,_savesTryDiskOnMobile=!0,_uiStowBarInitially=800,_uiUpdateStoryElements=!0,_errHistoryModeDeprecated="Config.history.mode has been deprecated and is no longer used by SugarCube, please remove it from your code",Object.freeze({get debug(){return _debug},set debug(value){_debug=Boolean(value)},get addVisitedLinkClass(){return _addVisitedLinkClass},set addVisitedLinkClass(value){_addVisitedLinkClass=Boolean(value)},get cleanupWikifierOutput(){return _cleanupWikifierOutput},set cleanupWikifierOutput(value){_cleanupWikifierOutput=Boolean(value)},get loadDelay(){return _loadDelay},set loadDelay(value){if(!Number.isSafeInteger(value)||value<0)throw new RangeError("Config.loadDelay must be a non-negative integer");_loadDelay=value},audio:Object.freeze({get pauseOnFadeToZero(){return _audioPauseOnFadeToZero},set pauseOnFadeToZero(value){_audioPauseOnFadeToZero=Boolean(value)},get preloadMetadata(){return _audioPreloadMetadata},set preloadMetadata(value){_audioPreloadMetadata=Boolean(value)}}),history:Object.freeze({get controls(){return _historyControls},set controls(value){var controls=Boolean(value);if(1===_historyMaxStates&&controls)throw new Error("Config.history.controls must be false when Config.history.maxStates is 1");_historyControls=controls},get maxStates(){return _historyMaxStates},set maxStates(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.history.maxStates must be a positive integer");_historyMaxStates=value,_historyControls&&1===value&&(_historyControls=!1)},get mode(){throw new Error(_errHistoryModeDeprecated)},set mode(_){throw new Error(_errHistoryModeDeprecated)},get tracking(){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")},set tracking(_){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")}}),macros:Object.freeze({get ifAssignmentError(){return _macrosIfAssignmentError},set ifAssignmentError(value){_macrosIfAssignmentError=Boolean(value)},get maxLoopIterations(){return _macrosMaxLoopIterations},set maxLoopIterations(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.macros.maxLoopIterations must be a positive integer");_macrosMaxLoopIterations=value},get typeSkipKey(){return _macrosTypeSkipKey},set typeSkipKey(value){_macrosTypeSkipKey=String(value)},get typeVisitedPassages(){return _macrosTypeVisitedPassages},set typeVisitedPassages(value){_macrosTypeVisitedPassages=Boolean(value)}}),navigation:Object.freeze({get override(){return _navigationOverride},set override(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.navigation.override must be a function or null/undefined (received: ".concat(Util.getType(value),")"));_navigationOverride=value}}),passages:Object.freeze({get descriptions(){return _passagesDescriptions},set descriptions(value){if(null!=value){var valueType=Util.getType(value);if("boolean"!==valueType&&"Object"!==valueType&&"function"!==valueType)throw new TypeError("Config.passages.descriptions must be a boolean, object, function, or null/undefined (received: ".concat(valueType,")"))}_passagesDescriptions=value},get displayTitles(){return _passagesDisplayTitles},set displayTitles(value){_passagesDisplayTitles=Boolean(value)},get nobr(){return _passagesNobr},set nobr(value){_passagesNobr=Boolean(value)},get onProcess(){return _passagesOnProcess},set onProcess(value){if(null!=value){var valueType=Util.getType(value);if("function"!==valueType)throw new TypeError("Config.passages.onProcess must be a function or null/undefined (received: ".concat(valueType,")"))}_passagesOnProcess=value},get start(){return _passagesStart},set start(value){if(null!=value){var valueType=Util.getType(value);if("string"!==valueType)throw new TypeError("Config.passages.start must be a string or null/undefined (received: ".concat(valueType,")"))}_passagesStart=value},get transitionOut(){return _passagesTransitionOut},set transitionOut(value){if(null!=value){var valueType=Util.getType(value);if("string"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.passages.transitionOut must be a string, non-negative integer, or null/undefined (received: ".concat(valueType,")"))}_passagesTransitionOut=value}}),saves:Object.freeze({get autoload(){return _savesAutoload},set autoload(value){if(null!=value){var valueType=Util.getType(value);if("boolean"!==valueType&&"string"!==valueType&&"function"!==valueType)throw new TypeError("Config.saves.autoload must be a boolean, string, function, or null/undefined (received: ".concat(valueType,")"))}_savesAutoload=value},get autosave(){return _savesAutosave},set autosave(value){if(null!=value){var valueType=Util.getType(value);if("string"===valueType)return void(_savesAutosave=[value]);if("boolean"!==valueType&&("Array"!==valueType||!value.every((function(item){return"string"==typeof item})))&&"function"!==valueType)throw new TypeError("Config.saves.autosave must be a boolean, Array<string>, function, or null/undefined (received: ".concat(valueType).concat("Array"===valueType?"<any>":"",")"))}_savesAutosave=value},get id(){return _savesId},set id(value){if("string"!=typeof value||""===value)throw new TypeError("Config.saves.id must be a non-empty string (received: ".concat(Util.getType(value),")"));_savesId=value},get isAllowed(){return _savesIsAllowed},set isAllowed(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.saves.isAllowed must be a function or null/undefined (received: ".concat(Util.getType(value),")"));_savesIsAllowed=value},get slots(){return _savesSlots},set slots(value){if(!Number.isSafeInteger(value)||value<0)throw new TypeError("Config.saves.slots must be a non-negative integer (received: ".concat(Util.getType(value),")"));_savesSlots=value},get tryDiskOnMobile(){return _savesTryDiskOnMobile},set tryDiskOnMobile(value){_savesTryDiskOnMobile=Boolean(value)},get version(){return _savesVersion},set version(value){_savesVersion=value},get onLoad(){throw new Error("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead")},set onLoad(value){console.warn("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead"),Save.onLoad.add(value)},get onSave(){throw new Error("Config.saves.onSave has been deprecated, use the Save.onSave API instead")},set onSave(value){console.warn("Config.saves.onSave has been deprecated, use the Save.onSave API instead"),Save.onSave.add(value)}}),ui:Object.freeze({get stowBarInitially(){return _uiStowBarInitially},set stowBarInitially(value){var valueType=Util.getType(value);if("boolean"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.ui.stowBarInitially must be a boolean or non-negative integer (received: ".concat(valueType,")"));_uiStowBarInitially=value},get updateStoryElements(){return _uiUpdateStoryElements},set updateStoryElements(value){_uiUpdateStoryElements=Boolean(value)}})})),_navigationOverride,_passagesDescriptions,_passagesStart,_passagesOnProcess,_passagesTransitionOut,_savesAutoload,_savesAutosave,_savesIsAllowed,_savesVersion,_debug,_addVisitedLinkClass,_cleanupWikifierOutput,_loadDelay,_audioPauseOnFadeToZero,_audioPreloadMetadata,_historyControls,_historyMaxStates,_macrosIfAssignmentError,_macrosMaxLoopIterations,_macrosTypeSkipKey,_macrosTypeVisitedPassages,_passagesDisplayTitles,_passagesNobr,_savesId,_savesSlots,_savesTryDiskOnMobile,_uiStowBarInitially,_uiUpdateStoryElements,_errHistoryModeDeprecated,SimpleAudio=function(){var _hasPromise,_gestureEventNames=Object.freeze(["click","contextmenu","dblclick","keyup","mouseup","pointerup","touchend"]),_specialIds=Object.freeze([":not",":all",":looped",":muted",":paused",":playing"]),_formatSpecRe=/^([\w-]+)\s*\|\s*(\S.*)$/,_badIdRe=/[:\s]/,_tracks=new Map,_groups=new Map,_lists=new Map,_subscribers=new Map,_masterRate=1,_masterVolume=1,_masterMute=!1,_masterMuteOnHidden=!1,_playReturnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,Has.audio)try{var audio=document.createElement("audio");audio.muted=!0;var value=audio.play();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise}),AudioTrack=function(){function AudioTrack(obj){if(_classCallCheck(this,AudioTrack),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioTrack))throw new Error("sources parameter must be either an array, of URIs or source objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioTrack,[{key:"_create",value:function(sourceList){var dataUriRe=/^data:\s*audio\/(?:x-)?([^;,]+)\s*[;,]/i,extRe=/\.([^./\\]+)$/,formats=AudioTrack.formats,usedSources=[],audio=document.createElement("audio");audio.preload="none",sourceList.forEach((function(src){var srcUri=null;switch(_typeof(src)){case"string":var match;if("data:"===src.slice(0,5)){if(null===(match=dataUriRe.exec(src)))throw new Error("source data URI missing media type")}else if(null===(match=extRe.exec(Util.parseUrl(src).pathname)))throw new Error("source URL missing file extension");formats[match[1]]&&(srcUri=src);break;case"object":if(null===src)throw new Error("source object cannot be null");if(!src.hasOwnProperty("src"))throw new Error('source object missing required "src" property');if(!src.hasOwnProperty("format"))throw new Error('source object missing required "format" property');formats[src.format]&&(srcUri=src.src);break;default:throw new Error("invalid source value (type: ".concat(_typeof(src),")"))}if(null!==srcUri){var source=document.createElement("source");source.src=srcUri,audio.appendChild(source),usedSources.push(srcUri)}})),audio.hasChildNodes()&&Config.audio.preloadMetadata&&(audio.preload="metadata"),this._finalize(audio,usedSources,clone(sourceList))}},{key:"_copy",value:function(obj){this._finalize(obj.audio.cloneNode(!0),clone(obj.sources),clone(obj.originals))}},{key:"_finalize",value:function(audio,sources,originals){var _this3=this;Object.defineProperties(this,{audio:{configurable:!0,value:audio},sources:{value:Object.freeze(sources)},originals:{value:Object.freeze(originals)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart.AudioTrack",(function(){return _this3._error=!1})).on("error.AudioTrack",(function(){return _this3._error=!0})).find("source:last-of-type").on("error.AudioTrack",(function(){return _this3._trigger("error")})),function(id,callback){if("function"!=typeof callback)throw new Error("callback parameter must be a function");_subscribers.set(id,callback)}(this,(function(mesg){if(_this3.audio)switch(mesg){case"loadwithscreen":if(_this3.hasSource()){var lockId=LoadScreen.lock();_this3.one("canplaythrough.AudioTrack_loadwithscreen error.AudioTrack_loadwithscreen",(function(){jQuery(this).off(".AudioTrack_loadwithscreen"),LoadScreen.unlock(lockId)})).load()}break;case"load":_this3.load();break;case"mute":_this3._updateAudioMute();break;case"rate":_this3._updateAudioRate();break;case"stop":_this3.stop();break;case"volume":_this3._updateAudioVolume();break;case"unload":_this3.unload()}else unsubscribe(_this3)})),this._updateAudioMute(),this._updateAudioRate(),this._updateAudioVolume()}},{key:"_trigger",value:function(eventName){jQuery(this.audio).triggerHandler(eventName)}},{key:"_destroy",value:function(){unsubscribe(this),this.audio&&(jQuery(this.audio).off(),this.unload(),this._error=!0,delete this.audio)}},{key:"clone",value:function(){return new AudioTrack(this)}},{key:"load",value:function(){var _this4=this;if(this.fadeStop(),this.audio.pause(),!this.audio.hasChildNodes()){if(0===this.sources.length)return;this.sources.forEach((function(srcUri){var source=document.createElement("source");source.src=srcUri,_this4.audio.appendChild(source)}))}"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"unload",value:function(){this.fadeStop(),this.stop();var audio=this.audio;for(audio.preload="none";audio.hasChildNodes();)audio.removeChild(audio.firstChild);audio.load()}},{key:"play",value:function(){var _this5=this;if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));"auto"!==this.audio.preload&&(this.audio.preload="auto");var namespace=".AudioTrack_play";return _playReturnsPromise()?this.audio.play():new Promise((function(resolve,reject){_this5.isPlaying()?resolve():(jQuery(_this5.audio).off(namespace).one("error".concat(namespace," playing").concat(namespace," timeupdate").concat(namespace),(function(ev){jQuery(_this5).off(namespace),"error"===ev.type?reject(new Error("unknown audio play error")):resolve()})),_this5.audio.play())}))}},{key:"playWhenAllowed",value:function(){var _this6=this;this.play().catch((function(){var gestures=_gestureEventNames.map((function(name){return"".concat(name,".AudioTrack_playWhenAllowed")})).join(" ");jQuery(document).one(gestures,(function(){jQuery(document).off(".AudioTrack_playWhenAllowed"),_this6.audio.play()}))}))}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time(0),this._trigger(":stopped")}},{key:"fade",value:function(duration,toVol,fromVol){var _this7=this;if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));this.fadeStop();var from=Math.clamp(null==fromVol?this.volume():fromVol,0,1),to=Math.clamp(toVol,0,1);return from!==to?(this.volume(from),jQuery(this.audio).off("timeupdate.AudioTrack_fade").one("timeupdate.AudioTrack_fade",(function(){var min,max;from<to?(min=from,max=to):(min=to,max=from);var time=Math.max(duration,1),delta=(to-from)/(time/.025);_this7._trigger(":fading"),_this7._faderId=setInterval((function(){_this7.isPlaying()?(_this7.volume(Math.clamp(_this7.volume()+delta,min,max)),Config.audio.pauseOnFadeToZero&&0===_this7.volume()&&_this7.pause(),_this7.volume()===to&&(_this7.fadeStop(),_this7._trigger(":faded"))):_this7.fadeStop()}),25)})),this.play()):void 0}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"loop",value:function(_loop){return null==_loop?this.audio.loop:(this.audio.loop=!!_loop,this)}},{key:"mute",value:function(_mute){return null==_mute?this._mute:(this._mute=!!_mute,this._updateAudioMute(),this)}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||_masterMute}},{key:"rate",value:function(_rate){if(null==_rate)return this._rate;if("number"!=typeof _rate)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate,.2,5),this._updateAudioRate(),this}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=Math.clamp(this._rate*_masterRate,.2,5)}},{key:"time",value:function(_time){var _this8=this;if(null==_time)return this.audio.currentTime;if("number"!=typeof _time)throw new TypeError("time parameter must be a number");return this.hasMetadata()?this.audio.currentTime=_time:jQuery(this.audio).off("loadedmetadata.AudioTrack_time").one("loadedmetadata.AudioTrack_time",(function(){return _this8.audio.currentTime=_time})),this}},{key:"volume",value:function(_volume){if(null==_volume)return this._volume;if("number"!=typeof _volume)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume,0,1),this._updateAudioVolume(),this}},{key:"_updateAudioVolume",value:function(){this.audio.volume=Math.clamp(this._volume*_masterVolume,0,1)}},{key:"duration",value:function(){return this.audio.duration}},{key:"remaining",value:function(){return this.audio.duration-this.audio.currentTime}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isUnloaded",value:function(){return!this.audio.hasChildNodes()}},{key:"isUnavailable",value:function(){return!this.hasSource()||this.isUnloaded()||this.isFailed()}},{key:"isPlaying",value:function(){return!this.audio.paused&&this.hasSomeData()}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isStopped",value:function(){return this.audio.paused&&0===this.audio.currentTime}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isSeeking",value:function(){return this.audio.seeking}},{key:"hasSource",value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"on",value:function(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return jQuery.fn.on.apply(jQuery(this.audio),args),this}},{key:"one",value:function(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];return jQuery.fn.one.apply(jQuery(this.audio),args),this}},{key:"off",value:function(){for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++)args[_key7]=arguments[_key7];return jQuery.fn.off.apply(jQuery(this.audio),args),this}}]),AudioTrack}();Object.defineProperties(AudioTrack,{formats:{value:function(){var audio=document.createElement("audio"),types=new Map;function canPlay(mimeType){return types.has(mimeType)||types.set(mimeType,""!==audio.canPlayType(mimeType).replace(/^no$/i,"")),types.get(mimeType)}return Object.assign(Object.create(null),{aac:canPlay("audio/aac"),caf:canPlay("audio/x-caf")||canPlay("audio/caf"),flac:canPlay("audio/x-flac")||canPlay("audio/flac"),mp3:canPlay('audio/mpeg; codecs="mp3"')||canPlay("audio/mpeg")||canPlay("audio/mp3")||canPlay("audio/mpa"),mpeg:canPlay("audio/mpeg"),m4a:canPlay("audio/x-m4a")||canPlay("audio/m4a")||canPlay("audio/aac"),mp4:canPlay("audio/x-mp4")||canPlay("audio/mp4")||canPlay("audio/aac"),ogg:canPlay("audio/ogg"),oga:canPlay("audio/ogg"),opus:canPlay('audio/ogg; codecs="opus"')||canPlay("audio/opus"),wav:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),wave:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),weba:canPlay("audio/webm"),webm:canPlay("audio/webm")})}()}});var AudioList=function(){function AudioList(obj){if(_classCallCheck(this,AudioList),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioList))throw new Error("tracks parameter must be either an array, of track objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioList,[{key:"_create",value:function(trackList){var _this9=this;this._finalize(trackList.map((function(trackObj){if("object"!==_typeof(trackObj))throw new Error("tracks parameter array members must be objects");var own,rate,track,volume;if(trackObj instanceof AudioTrack)own=!0,rate=trackObj.rate(),track=trackObj.clone(),volume=trackObj.volume();else{if(!trackObj.hasOwnProperty("track"))throw new Error('track object missing required "track" property');if(!(trackObj.track instanceof AudioTrack))throw new Error('track object\'s "track" property must be an AudioTrack object');own=trackObj.hasOwnProperty("own")&&trackObj.own,rate=trackObj.hasOwnProperty("rate")?trackObj.rate:trackObj.track.rate(),track=trackObj.track,volume=trackObj.hasOwnProperty("volume")?trackObj.volume:trackObj.track.volume()}return track.stop(),track.loop(!1),track.mute(!1),track.rate(rate),track.volume(volume),track.on("ended.AudioList",(function(){return _this9._onEnd()})),{own:own,track:track,volume:volume,rate:rate}})))}},{key:"_copy",value:function(obj){this._finalize(clone(obj.tracks))}},{key:"_finalize",value:function(tracks){Object.defineProperties(this,{tracks:{configurable:!0,value:Object.freeze(tracks)},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}})}},{key:"_destroy",value:function(){this.stop(),this.tracks.filter((function(trackObj){return trackObj.own})).forEach((function(trackObj){return trackObj.track._destroy()})),delete this.tracks,delete this.queue}},{key:"load",value:function(){this.tracks.forEach((function(trackObj){return trackObj.track.load()}))}},{key:"unload",value:function(){this.stop(),this.tracks.forEach((function(trackObj){return trackObj.track.unload()}))}},{key:"play",value:function(){return null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||(0===this.queue.length&&this._fillQueue(),this._next())?this.current.track.play():Promise.reject(new Error("no tracks were available"))}},{key:"playWhenAllowed",value:function(){var _this10=this;this.play().catch((function(){var gestures=_gestureEventNames.map((function(name){return"".concat(name,".AudioList_playWhenAllowed")})).join(" ");jQuery(document).one(gestures,(function(){jQuery(document).off(".AudioList_playWhenAllowed"),_this10.play()}))}))}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this._drainQueue()}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fade",value:function(duration,toVol,fromVol){if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(0===this.queue.length&&this._fillQueue(),null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||this._next()){var adjFromVol,adjToVol=Math.clamp(toVol,0,1)*this.current.volume;return null!=fromVol&&(adjFromVol=Math.clamp(fromVol,0,1)*this.current.volume),this._volume=toVol,this.current.track.fade(duration,adjToVol,adjFromVol)}}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this.current&&this.current.track.fadeStop()}},{key:"loop",value:function(_loop2){return null==_loop2?this._loop:(this._loop=!!_loop2,this)}},{key:"mute",value:function(_mute2){return null==_mute2?this._mute:(this._mute=!!_mute2,null!==this.current&&this.current.track.mute(this._mute),this)}},{key:"rate",value:function(_rate2){if(null==_rate2)return this._rate;if("number"!=typeof _rate2)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate2,.2,5),null!==this.current&&this.current.track.rate(this._rate*this.current.rate),this}},{key:"shuffle",value:function(_shuffle){var _this11=this;if(null==_shuffle)return this._shuffle;if(this._shuffle=!!_shuffle,this.queue.length>0&&(this._fillQueue(),!this._shuffle&&null!==this.current&&this.queue.length>1)){var _this$queue,firstIdx=this.queue.findIndex((function(trackObj){return trackObj===_this11.current}));if(-1!==firstIdx)(_this$queue=this.queue).push.apply(_this$queue,_toConsumableArray(this.queue.splice(0,firstIdx+1)))}return this}},{key:"volume",value:function(_volume2){if(null==_volume2)return this._volume;if("number"!=typeof _volume2)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume2,0,1),null!==this.current&&this.current.track.volume(this._volume*this.current.volume),this}},{key:"duration",value:function(){if(arguments.length>0)throw new Error("duration takes no parameters");return this.tracks.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0)}},{key:"remaining",value:function(){if(arguments.length>0)throw new Error("remaining takes no parameters");var remainingTime=this.queue.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0);return null!==this.current&&(remainingTime+=this.current.track.remaining()),remainingTime}},{key:"time",value:function(){if(arguments.length>0)throw new Error("time takes no parameters");return this.duration()-this.remaining()}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isStopped",value:function(){return 0===this.queue.length&&null===this.current}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isFading",value:function(){return null!==this.current&&this.current.track.isFading()}},{key:"_next",value:function(){var nextTrack;for(null!==this.current&&(this.current.track.stop(),this.current=null);nextTrack=this.queue.shift();)if(!nextTrack.track.isUnavailable()){this.current=nextTrack;break}return null!==this.current&&(this.current.track.mute(this._mute),this.current.track.rate(this._rate*this.current.rate),this.current.track.volume(this._volume*this.current.volume),this.current.track.loop(!1),!0)}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._fillQueue()}this._next()&&this.current.track.play()}},{key:"_drainQueue",value:function(){this.queue.splice(0)}},{key:"_fillQueue",value:function(){var _this$queue2;this._drainQueue(),(_this$queue2=this.queue).push.apply(_this$queue2,_toConsumableArray(this.tracks.filter((function(trackObj){return!trackObj.track.isUnavailable()})))),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}}]),AudioList}(),AudioRunner=function(){function AudioRunner(list){if(_classCallCheck(this,AudioRunner),!(list instanceof Set||list instanceof AudioRunner))throw new TypeError("list parameter must be a Set or a AudioRunner instance");Object.defineProperties(this,{trackIds:{value:new Set(list instanceof AudioRunner?list.trackIds:list)}})}return _createClass(AudioRunner,[{key:"load",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.load)}},{key:"unload",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.unload)}},{key:"play",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.play)}},{key:"playWhenAllowed",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.playWhenAllowed)}},{key:"pause",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.pause)}},{key:"stop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.stop)}},{key:"fade",value:function(duration,toVol,fromVol){if(null==duration||null==toVol)throw new Error("fade requires parameters");AudioRunner._run(this.trackIds,AudioTrack.prototype.fade,duration,toVol,fromVol)}},{key:"fadeIn",value:function(duration,fromVol){if(null==duration)throw new Error("fadeIn requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeIn,duration,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){if(null==duration)throw new Error("fadeOut requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeOut,duration,fromVol)}},{key:"fadeStop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeStop)}},{key:"loop",value:function(_loop3){if(null==_loop3)throw new Error("loop requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.loop,_loop3),this}},{key:"mute",value:function(_mute3){if(null==_mute3)throw new Error("mute requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.mute,_mute3),this}},{key:"rate",value:function(_rate3){if(null==_rate3)throw new Error("rate requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.rate,_rate3),this}},{key:"time",value:function(_time2){if(null==_time2)throw new Error("time requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.time,_time2),this}},{key:"volume",value:function(_volume3){if(null==_volume3)throw new Error("volume requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.volume,_volume3),this}},{key:"on",value:function(){for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++)args[_key8]=arguments[_key8];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.on].concat(args)),this}},{key:"one",value:function(){for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++)args[_key9]=arguments[_key9];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.one].concat(args)),this}},{key:"off",value:function(){for(var _len10=arguments.length,args=new Array(_len10),_key10=0;_key10<_len10;_key10++)args[_key10]=arguments[_key10];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.off].concat(args)),this}}],[{key:"_run",value:function(ids,fn){for(var _len11=arguments.length,args=new Array(_len11>2?_len11-2:0),_key11=2;_key11<_len11;_key11++)args[_key11-2]=arguments[_key11];ids.forEach((function(id){var track=_tracks.get(id);track&&fn.apply(track,args)}))}}]),AudioRunner}();var _runnerParseSelector=function(){var notWsRe=/\S/g,parenRe=/[()]/g;function processNegation(str,startPos){var match;if(notWsRe.lastIndex=startPos,null===(match=notWsRe.exec(str))||"("!==match[0])throw new Error('invalid ":not()" syntax: missing parentheticals');parenRe.lastIndex=notWsRe.lastIndex;for(var start=notWsRe.lastIndex,result={str:"",nextMatch:-1},depth=1;null!==(match=parenRe.exec(str));)if("("===match[0]?++depth:--depth,depth<1){result.nextMatch=parenRe.lastIndex,result.str=str.slice(start,result.nextMatch-1);break}return result}return function parseSelector(idArg){for(var match,ids=[],idRe=/:?[^\s:()]+/g;null!==(match=idRe.exec(idArg));){var id=match[0];if(":not"===id){if(0===ids.length)throw new Error('invalid negation: no group ID preceded ":not()"');var parent=ids[ids.length-1];if(":"!==parent.id[0])throw new Error('invalid negation of track "'.concat(parent.id,'": only groups may be negated with ":not()"'));var negation=processNegation(idArg,idRe.lastIndex);if(-1===negation.nextMatch)throw new Error('unknown error parsing ":not()"');idRe.lastIndex=negation.nextMatch,parent.not=parseSelector(negation.str)}else ids.push({id:id})}return ids}}();function masterMute(mute){if(null==mute)return _masterMute;publish("mute",_masterMute=!!mute)}function unsubscribe(id){_subscribers.delete(id)}function publish(mesg,data){_subscribers.forEach((function(fn){return fn(mesg,data)}))}function _newTrack(sources){return new AudioTrack(sources.map((function(source){if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);if(passage.tags.includes("Twine.audio"))return passage.text.trim()}var match=_formatSpecRe.exec(source);return null===match?source:{format:match[1],src:match[2]}})))}return Object.freeze(Object.defineProperties({},{tracks:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("track ID"),arguments.length<2&&errors.push("sources"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='track ID "'.concat(id,'"');if(_badIdRe.test(id))throw new Error("invalid ".concat(what,": track IDs must not contain colons or whitespace"));var track,sources=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{track=_newTrack(sources)}catch(ex){throw new Error("".concat(what,": error during track initialization: ").concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("".concat(what,": no supported audio sources found"));_tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.set(id,track)}},delete:{value:function(id){return _tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.delete(id)}},clear:{value:function(){_tracks.forEach((function(track){return track._destroy()})),_tracks.clear()}},has:{value:function(id){return _tracks.has(id)}},get:{value:function(id){return _tracks.get(id)||null}}}))},groups:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("group ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='group ID "'.concat(id,'"');if(":"!==id[0]||_badIdRe.test(id.slice(1)))throw new Error("invalid ".concat(what,": group IDs must start with a colon and must not contain colons or whitespace"));if(_specialIds.includes(id))throw new Error("cannot clobber special ".concat(what));var group,trackIds=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{group=new Set(trackIds.map((function(trackId){if(!_tracks.has(trackId))throw new Error('track "'.concat(trackId,'" does not exist'));return trackId})))}catch(ex){throw new Error("".concat(what,": error during group initialization: ").concat(ex.message))}_groups.set(id,Object.freeze(Array.from(group)))}},delete:{value:function(id){return _groups.delete(id)}},clear:{value:function(){_groups.clear()}},has:{value:function(id){return _groups.has(id)}},get:{value:function(id){return _groups.get(id)||null}}}))},lists:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("list ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='list ID "'.concat(id,'"');if(_badIdRe.test(id))return this.error("invalid ".concat(what,": list IDs must not contain colons or whitespace"));var list,descriptors=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{list=new AudioList(descriptors.map((function(desc){if(null===desc)throw new Error("track descriptor must be a string or object (type: null)");switch(_typeof(desc)){case"string":desc={id:desc};break;case"object":if(!desc.hasOwnProperty("id")&&!desc.hasOwnProperty("sources"))throw new Error('track descriptor must contain one of either an "id" or a "sources" property');if(desc.hasOwnProperty("id")&&desc.hasOwnProperty("sources"))throw new Error('track descriptor must contain either an "id" or a "sources" property, not both');break;default:throw new Error("track descriptor must be a string or object (type: ".concat(_typeof(desc),")"))}var own,track,volume;if(desc.hasOwnProperty("id")){if("string"!=typeof desc.id)throw new Error('"id" property must be a string');if(!_tracks.has(desc.id))throw new Error('track "'.concat(desc.id,'" does not exist'));track=_tracks.get(desc.id)}else if(desc.hasOwnProperty("sources")){if(!Array.isArray(desc.sources)||0===desc.sources.length)throw new Error('"sources" property must be a non-empty array');if(desc.hasOwnProperty("own"))throw new Error('"own" property is not allowed with the "sources" property');try{track=_newTrack(desc.sources),own=!0}catch(ex){throw new Error("error during track initialization: ".concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("no supported audio sources found")}if(desc.hasOwnProperty("own")){if("boolean"!=typeof desc.own)throw new Error('"own" property must be a boolean');(own=desc.own)&&(track=track.clone())}if(desc.hasOwnProperty("volume")){if("number"!=typeof desc.volume||Number.isNaN(desc.volume)||!Number.isFinite(desc.volume)||desc.volume<0)throw new Error('"volume" property must be a non-negative finite number');volume=desc.volume}return{own:null!=own&&own,track:track,volume:null!=volume?volume:track.volume()}})))}catch(ex){throw new Error("".concat(what,": error during playlist initialization: ").concat(ex.message))}_lists.has(id)&&_lists.get(id)._destroy(),_lists.set(id,list)}},delete:{value:function(id){return _lists.has(id)&&_lists.get(id)._destroy(),_lists.delete(id)}},clear:{value:function(){_lists.forEach((function(list){return list._destroy()})),_lists.clear()}},has:{value:function(id){return _lists.has(id)}},get:{value:function(id){return _lists.get(id)||null}}}))},select:{value:function(){if(0===arguments.length)throw new Error("no track selector specified");var selector=String(arguments[0]).trim(),trackIds=new Set;try{var renderIds=function renderIds(idObj){var ids,id=idObj.id;switch(id){case":all":ids=allIds;break;case":looped":ids=allIds.filter((function(id){return _tracks.get(id).loop()}));break;case":muted":ids=allIds.filter((function(id){return _tracks.get(id).mute()}));break;case":paused":ids=allIds.filter((function(id){return _tracks.get(id).isPaused()}));break;case":playing":ids=allIds.filter((function(id){return _tracks.get(id).isPlaying()}));break;default:ids=":"===id[0]?_groups.get(id):[id]}if(idObj.hasOwnProperty("not")){var negated=idObj.not.map((function(idObj){return renderIds(idObj)})).flat(1/0);ids=ids.filter((function(id){return!negated.includes(id)}))}return ids},allIds=Array.from(_tracks.keys());_runnerParseSelector(selector).forEach((function(idObj){return renderIds(idObj).forEach((function(id){if(!_tracks.has(id))throw new Error('track "'.concat(id,'" does not exist'));trackIds.add(id)}))}))}catch(ex){throw new Error("error during runner initialization: ".concat(ex.message))}return new AudioRunner(trackIds)}},load:{value:function(){publish("load")}},loadWithScreen:{value:function(){publish("loadwithscreen")}},mute:{value:masterMute},muteOnHidden:{value:function(mute){if(!Visibility.isEnabled())return!1;if(null==mute)return _masterMuteOnHidden;var namespace=".SimpleAudio_masterMuteOnHidden";if(_masterMuteOnHidden=!!mute){var visibilityChange="".concat(Visibility.changeEvent).concat(namespace);jQuery(document).off(namespace).on(visibilityChange,(function(){return masterMute(Visibility.isHidden())})),Visibility.isHidden()&&masterMute(!0)}else jQuery(document).off(namespace)}},rate:{value:function(rate){if(null==rate)return _masterRate;if("number"!=typeof rate||Number.isNaN(rate)||!Number.isFinite(rate))throw new Error("rate must be a finite number");publish("rate",_masterRate=Math.clamp(rate,.2,5))}},stop:{value:function(){publish("stop")}},unload:{value:function(){publish("unload")}},volume:{value:function(volume){if(null==volume)return _masterVolume;if("number"!=typeof volume||Number.isNaN(volume)||!Number.isFinite(volume))throw new Error("volume must be a finite number");publish("volume",_masterVolume=Math.clamp(volume,0,1))}}}))}(),State=function(){var _history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null,_tempVariables={};function stateMarshal(noDelta){var stateObj={index:_activeIndex};return noDelta?stateObj.history=clone(_history):stateObj.delta=historyDeltaEncode(_history),_expired.length>0&&(stateObj.expired=_toConsumableArray(_expired)),null!==_prng&&(stateObj.seed=_prng.seed),stateObj}function stateUnmarshal(stateObj,noDelta){if(null==stateObj)throw new Error("state object is null or undefined");if(!stateObj.hasOwnProperty(noDelta?"history":"delta")||0===stateObj[noDelta?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!stateObj.hasOwnProperty("index"))throw new Error("state object has no index");if(null!==_prng&&!stateObj.hasOwnProperty("seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===_prng&&stateObj.hasOwnProperty("seed"))throw new Error("state object has seed, but PRNG is disabled");_history=noDelta?clone(stateObj.history):historyDeltaDecode(stateObj.delta),_activeIndex=stateObj.index,_expired=stateObj.hasOwnProperty("expired")?_toConsumableArray(stateObj.expired):[],stateObj.hasOwnProperty("seed")&&(_prng.seed=stateObj.seed),momentActivate(_activeIndex)}function momentCreate(title,variables){return{title:null==title?"":String(title),variables:null==variables?{}:clone(variables)}}function momentActivate(moment){if(null==moment)throw new Error("moment activation attempted with null or undefined");switch(_typeof(moment)){case"object":_active=clone(moment);break;case"number":if(historyIsEmpty())throw new Error("moment activation attempted with index on empty history");if(moment<0||moment>=historySize())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, ".concat(historySize()-1,"], got ").concat(moment));_active=clone(_history[moment]);break;default:throw new TypeError('moment activation attempted with a "'.concat(_typeof(moment),'"; must be an object or valid history stack index'))}return null!==_prng&&(_prng=PRNGWrapper.unmarshal({seed:_prng.seed,pull:_active.pull})),session.set("state",stateMarshal()),jQuery.event.trigger(":historyupdate"),_active}function historyLength(){return _activeIndex+1}function historySize(){return _history.length}function historyIsEmpty(){return 0===_history.length}function historyTop(){return _history.length>0?_history[_history.length-1]:null}function historyGoTo(index){return!(null==index||index<0||index>=historySize()||index===_activeIndex)&&(momentActivate(_activeIndex=index),!0)}function historyDeltaEncode(historyArr){if(!Array.isArray(historyArr))return null;if(0===historyArr.length)return[];for(var delta=[historyArr[0]],i=1,iend=historyArr.length;i<iend;++i)delta.push(Diff.diff(historyArr[i-1],historyArr[i]));return delta}function historyDeltaDecode(delta){if(!Array.isArray(delta))return null;if(0===delta.length)return[];for(var historyArr=[clone(delta[0])],i=1,iend=delta.length;i<iend;++i)historyArr.push(Diff.patch(historyArr[i-1],delta[i]));return historyArr}function prngInit(seed,useEntropy){var scriptSection;if(!historyIsEmpty())throw scriptSection="the Story JavaScript",new Error("State.prng.init must be called during initialization, within either ".concat(scriptSection," or the StoryInit special passage"));_prng=new PRNGWrapper(seed,useEntropy),_active.pull=_prng.pull}function metadataDelete(key){if("string"!=typeof key)throw new TypeError("State.metadata.delete key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");store&&store.hasOwnProperty(key)&&(1===Object.keys(store).length?storage.delete("metadata"):(delete store[key],storage.set("metadata",store)))}return Object.freeze(Object.defineProperties({},{reset:{value:function(){session.delete("state"),_history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null===_prng?null:new PRNGWrapper(_prng.seed,!1)}},restore:{value:function(){if(session.has("state")){var stateObj=session.get("state");return null!=stateObj&&(stateUnmarshal(stateObj),!0)}return!1}},marshalForSave:{value:function(){return stateMarshal(!0)}},unmarshalForSave:{value:function(stateObj){return stateUnmarshal(stateObj,!0)}},expired:{get:function(){return _expired}},turns:{get:function(){return _expired.length+historyLength()}},passages:{get:function(){return _expired.concat(_history.slice(0,historyLength()).map((function(moment){return moment.title})))}},hasPlayed:{value:function(title){return null!=title&&""!==title&&(!!_expired.includes(title)||!!_history.slice(0,historyLength()).some((function(moment){return moment.title===title})))}},active:{get:function(){return _active}},activeIndex:{get:function(){return _activeIndex}},passage:{get:function(){return _active.title}},variables:{get:function(){return _active.variables}},history:{get:function(){return _history}},length:{get:historyLength},size:{get:historySize},isEmpty:{value:historyIsEmpty},current:{get:function(){return _history.length>0?_history[_activeIndex]:null}},top:{get:historyTop},bottom:{get:function(){return _history.length>0?_history[0]:null}},index:{value:function(index){return historyIsEmpty()||index<0||index>_activeIndex?null:_history[index]}},peek:{value:function(offset){if(historyIsEmpty())return null;var lengthOffset=1+(offset?Math.abs(offset):0);return lengthOffset>historyLength()?null:_history[historyLength()-lengthOffset]}},has:{value:function(title){if(historyIsEmpty()||null==title||""===title)return!1;for(var i=_activeIndex;i>=0;--i)if(_history[i].title===title)return!0;return!1}},create:{value:function(title){for(0,historyLength()<historySize()&&_history.splice(historyLength(),historySize()-historyLength()),_history.push(momentCreate(title,_active.variables)),_prng&&(historyTop().pull=_prng.pull);historySize()>Config.history.maxStates;)_expired.push(_history.shift().title);return momentActivate(_activeIndex=historySize()-1),historyLength()}},goTo:{value:historyGoTo},go:{value:function(offset){return null!=offset&&0!==offset&&historyGoTo(_activeIndex+offset)}},deltaEncode:{value:historyDeltaEncode},deltaDecode:{value:historyDeltaDecode},prng:{value:Object.freeze(Object.defineProperties({},{init:{value:prngInit},isEnabled:{value:function(){return null!==_prng}},pull:{get:function(){return _prng?_prng.pull:NaN}},seed:{get:function(){return _prng?_prng.seed:null}}}))},random:{value:function(){return _prng?_prng.random():Math.random()}},clearTemporary:{value:function(){TempVariables=_tempVariables={}}},temporary:{get:function(){return _tempVariables}},getVar:{value:function(varExpression){try{return Scripting.evalTwineScript(varExpression)}catch(ex){}}},setVar:{value:function(varExpression,value){try{return Scripting.evalTwineScript("".concat(varExpression," = evalTwineScript$Data$"),null,value),!0}catch(ex){}return!1}},metadata:{value:Object.freeze(Object.defineProperties({},{clear:{value:function(){storage.delete("metadata")}},delete:{value:metadataDelete},entries:{value:function(){var store=storage.get("metadata");return store&&Object.entries(store)}},get:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.get key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");return store&&store.hasOwnProperty(key)?store[key]:undefined}},has:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.has key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");return store&&store.hasOwnProperty(key)}},keys:{value:function(){var store=storage.get("metadata");return store&&Object.keys(store)}},set:{value:function(key,value){if("string"!=typeof key)throw new TypeError("State.metadata.set key parameter must be a string (received: ".concat(_typeof(key),")"));if(void 0===value)metadataDelete(key);else{var store=storage.get("metadata")||{};store[key]=value,storage.set("metadata",store)}}},size:{get:function(){var store=storage.get("metadata");return store?Object.keys(store).length:0}}}))},initPRNG:{value:prngInit},restart:{value:function(){return Engine.restart()}},backward:{value:function(){return Engine.backward()}},forward:{value:function(){return Engine.forward()}},display:{value:function(){return Engine.display.apply(Engine,arguments)}},show:{value:function(){return Engine.show.apply(Engine,arguments)}},play:{value:function(){return Engine.play.apply(Engine,arguments)}}}))}(),Scripting=function(){function addAccessibleClickHandler(targets,selector,handler,one,namespace){if(arguments.length<2)throw new Error("addAccessibleClickHandler insufficient number of parameters");var fn,opts;if("function"==typeof selector?(fn=selector,opts={namespace:one,one:!!handler}):(fn=handler,opts={namespace:namespace,one:!!one,selector:selector}),"function"!=typeof fn)throw new TypeError("addAccessibleClickHandler handler parameter must be a function");return jQuery(targets).ariaClick(opts,fn)}function insertElement(place,type,id,classNames,text,title){var $el=jQuery(document.createElement(type));return id&&$el.attr("id",id),classNames&&$el.addClass(classNames),title&&$el.attr("title",title),text&&$el.text(text),place&&$el.appendTo(place),$el[0]}function insertText(place,text){jQuery(place).append(document.createTextNode(text))}function removeChildren(node){jQuery(node).empty()}function removeElement(node){jQuery(node).remove()}function fade(el,options){var current,intervalId,direction="in"===options.fade?1:-1,proxy=el.cloneNode(!0);function setOpacity(el,opacity){el.style.zoom=1,el.style.filter="alpha(opacity=".concat(Math.floor(100*opacity),")"),el.style.opacity=opacity}el.parentNode.replaceChild(proxy,el),"in"===options.fade?(current=0,proxy.style.visibility="visible"):current=1,setOpacity(proxy,current),intervalId=window.setInterval((function(){current+=.05*direction,setOpacity(proxy,Math.easeInOut(current)),(1===direction&&current>=1||-1===direction&&current<=0)&&(el.style.visibility="in"===options.fade?"visible":"hidden",proxy.parentNode.replaceChild(el,proxy),proxy=null,window.clearInterval(intervalId),options.onComplete&&options.onComplete())}),25)}function scrollWindowTo(el,incrementBy){var increment=null!=incrementBy?Number(incrementBy):.1;Number.isNaN(increment)||!Number.isFinite(increment)||increment<0?increment=.1:increment>1&&(increment=1);var intervalId,start=window.scrollY?window.scrollY:document.body.scrollTop,end=function(el){var posTop=function(el){var curtop=0;for(;el.offsetParent;)curtop+=el.offsetTop,el=el.offsetParent;return curtop}(el),posBottom=posTop+el.offsetHeight,winTop=window.scrollY?window.scrollY:document.body.scrollTop,winHeight=window.innerHeight?window.innerHeight:document.body.clientHeight,winBottom=winTop+winHeight;return posTop>=winTop&&posBottom>winBottom&&el.offsetHeight<winHeight?posTop-(winHeight-el.offsetHeight)+20:posTop}(el),distance=Math.abs(start-end),direction=start>end?-1:1,progress=0;intervalId=window.setInterval((function(){progress+=increment,window.scroll(0,start+direction*(distance*Math.easeInOut(progress))),progress>=1&&window.clearInterval(intervalId)}),25)}function toStringOrDefault(value){return stringFrom(value)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function forget(key){if("string"!=typeof key)throw new TypeError("forget key parameter must be a string (received: ".concat(Util.getType(key),")"));State.metadata.delete(key)}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,i=0,iend=needles.length;i<iend;++i)if(!played.includes(needles[i]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,uBound=played.length-1,turns=State.turns,i=0,iend=needles.length;i<iend&&turns>-1;++i){var lastIndex=played.lastIndexOf(needles[i]);turns=Math.min(turns,-1===lastIndex?-1:uBound-lastIndex)}return turns}function memorize(key,value){if("string"!=typeof key)throw new TypeError("memorize key parameter must be a string (received: ".concat(Util.getType(key),")"));State.metadata.set(key,value)}function passage(){return State.passage}function previous(){var passages=State.passages;if(arguments.length>0){var offset=Number(arguments[0]);if(!Number.isSafeInteger(offset)||offset<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return passages.length>offset?passages[passages.length-1-offset]:""}for(var i=passages.length-2;i>=0;--i)if(passages[i]!==State.passage)return passages[i];return""}function random(){var min,max;switch(arguments.length){case 0:throw new Error("random called with insufficient parameters");case 1:min=0,max=Math.trunc(arguments[0]);break;default:min=Math.trunc(arguments[0]),max=Math.trunc(arguments[1])}if(!Number.isInteger(min))throw new Error("random min parameter must be an integer");if(!Number.isInteger(max))throw new Error("random max parameter must be an integer");if(min>max){var _ref6=[max,min];min=_ref6[0],max=_ref6[1]}return Math.floor(State.random()*(max-min+1))+min}function randomFloat(){var min,max;switch(arguments.length){case 0:throw new Error("randomFloat called with insufficient parameters");case 1:min=0,max=Number(arguments[0]);break;default:min=Number(arguments[0]),max=Number(arguments[1])}if(Number.isNaN(min)||!Number.isFinite(min))throw new Error("randomFloat min parameter must be a number");if(Number.isNaN(max)||!Number.isFinite(max))throw new Error("randomFloat max parameter must be a number");if(min>max){var _ref7=[max,min];min=_ref7[0],max=_ref7[1]}return State.random()*(max-min)+min}function recall(key,defaultValue){if("string"!=typeof key)throw new TypeError("recall key parameter must be a string (received: ".concat(Util.getType(key),")"));return State.metadata.has(key)?State.metadata.get(key):defaultValue}function tags(){if(0===arguments.length)return Story.get(State.passage).tags.slice(0);for(var passages=Array.prototype.concat.apply([],arguments),tags=[],i=0,iend=passages.length;i<iend;++i)tags=tags.concat(Story.get(passages[i]).tags);return tags}function temporary(){return State.temporary}function time(){return null===Engine.lastPlay?0:Util.now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),played=State.passages,count=State.turns,i=0,iend=needles.length;i<iend&&count>0;++i)count=Math.min(count,played.count(needles[i]));return count}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],arguments),nLength=needles.length,played=State.passages,seen=new Map,count=0,i=0,iend=played.length;i<iend;++i){var title=played[i];if(seen.has(title))seen.get(title)&&++count;else{var _tags2=Story.get(title).tags;if(_tags2.length>0){for(var found=0,j=0;j<nLength;++j)_tags2.includes(needles[j])&&++found;found===nLength?(++count,seen.set(title,!0)):seen.set(title,!1)}}}return count}var _ref8=function(){function slugifyUrl(url){return Util.parseUrl(url).path.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLocaleLowerCase()}function addScript(url){return new Promise((function(resolve,reject){jQuery(document.createElement("script")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importScripts failed to load the script "'.concat(url,'".')))})).appendTo(document.head).attr({id:"script-imported-".concat(slugifyUrl(url)),type:"text/javascript",src:url})}))}function addStyle(url){return new Promise((function(resolve,reject){jQuery(document.createElement("link")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importStyles failed to load the stylesheet "'.concat(url,'".')))})).appendTo(document.head).attr({id:"style-imported-".concat(slugifyUrl(url)),rel:"stylesheet",href:url})}))}function sequence(callbacks){return callbacks.reduce((function(seq,fn){return seq.then(fn)}),Promise.resolve())}return{importScripts:function(){for(var _len12=arguments.length,urls=new Array(_len12),_key12=0;_key12<_len12;_key12++)urls[_key12]=arguments[_key12];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addScript(url)}}))):addScript(oneOrSeries)})))},importStyles:function(){for(var _len13=arguments.length,urls=new Array(_len13),_key13=0;_key13<_len13;_key13++)urls[_key13]=arguments[_key13];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addStyle(url)}}))):addStyle(oneOrSeries)})))}}}(),importScripts=_ref8.importScripts,importStyles=_ref8.importStyles,parse=function(){var tokenTable=Util.toEnum({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),parseRe=new RegExp(["(?:\"\"|''|``)",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(`(?:\\\\.|[^`\\\\])+`)","(?:[=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),notSpaceRe=/\S/,varTest=new RegExp("^".concat(Patterns.variable)),withColonTestRe=/^\s*:/,withNotTestRe=/^\s+not\b/;function parse(rawCodeString){if(0!==parseRe.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start");for(var match,code=rawCodeString;null!==(match=parseRe.exec(code));)if(match[1]){var rawTemplate=match[1],parsedTemplate=parseTemplate(rawTemplate);parsedTemplate!==rawTemplate&&(code=code.splice(match.index,rawTemplate.length,parsedTemplate),parseRe.lastIndex+=parsedTemplate.length-rawTemplate.length)}else if(match[2]){var token=match[2];if("$"===token||"_"===token)continue;if(varTest.test(token))token=token[0];else if("is"===token){var start=parseRe.lastIndex,ahead=code.slice(start);withNotTestRe.test(ahead)&&(code=code.splice(start,ahead.search(notSpaceRe)),token="isnot")}else{var _ahead=code.slice(parseRe.lastIndex);if(withColonTestRe.test(_ahead))continue}tokenTable[token]&&(code=code.splice(match.index,token.length,tokenTable[token]),parseRe.lastIndex+=tokenTable[token].length-token.length)}return code}var templateGroupStartRe=/\$\{/g,templateGroupParseRe=new RegExp(["(?:\"\"|'')",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(\\{)","(\\})"].join("|"),"g");function parseTemplate(rawTemplateLiteral){if(0!==templateGroupStartRe.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start of template literal");for(var startMatch,template=rawTemplateLiteral;null!==(startMatch=templateGroupStartRe.exec(template));){var startIdx=startMatch.index+2,endIdx=startIdx,depth=1,endMatch=void 0;for(templateGroupParseRe.lastIndex=startIdx;null!==(endMatch=templateGroupParseRe.exec(template));)if(endMatch[1]?++depth:endMatch[2]&&--depth,0===depth){endIdx=endMatch.index;break}if(endIdx>startIdx){var parseIndex=parseRe.lastIndex,rawGroup=template.slice(startIdx,endIdx);parseRe.lastIndex=0;var parsedGroup=parse(rawGroup);parseRe.lastIndex=parseIndex,template=template.splice(startIdx,rawGroup.length,parsedGroup),templateGroupStartRe.lastIndex+=parsedGroup.length-rawGroup.length}}return template}return parse}();function evalJavaScript(code,output,data){return function(code,output,evalJavaScript$Data$){return eval(code)}.call(output?{output:output}:null,String(code),output,data)}function evalTwineScript(code,output,data){return function(code,output,evalTwineScript$Data$){return eval(code)}.call(output?{output:output}:null,parse(String(code)),output,data)}return Object.freeze(Object.defineProperties({},{parse:{value:parse},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript}}))}(),_ref9=function(){var Lexer=function(){function Lexer(source,initialState){if(_classCallCheck(this,Lexer),arguments.length<2)throw new Error("Lexer constructor called with too few parameters (source:string , initialState:function)");Object.defineProperties(this,{source:{value:source},initial:{value:initialState},state:{writable:!0,value:initialState},start:{writable:!0,value:0},pos:{writable:!0,value:0},depth:{writable:!0,value:0},items:{writable:!0,value:[]},data:{writable:!0,value:{}}})}return _createClass(Lexer,[{key:"reset",value:function(){this.state=this.initial,this.start=0,this.pos=0,this.depth=0,this.items=[],this.data={}}},{key:"run",value:function(){for(;null!==this.state;)this.state=this.state(this);return this.items}},{key:"nextItem",value:function(){for(;0===this.items.length&&null!==this.state;)this.state=this.state(this);return this.items.shift()}},{key:"next",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos++]}},{key:"peek",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos]}},{key:"backup",value:function(num){this.pos-=num||1}},{key:"forward",value:function(num){this.pos+=num||1}},{key:"ignore",value:function(){this.start=this.pos}},{key:"accept",value:function(valid){var ch=this.next();return-1!==ch&&(!!valid.includes(ch)||(this.backup(),!1))}},{key:"acceptRe",value:function(validRe){var ch=this.next();return-1!==ch&&(!!validRe.test(ch)||(this.backup(),!1))}},{key:"acceptRun",value:function(valid){for(;;){var ch=this.next();if(-1===ch)return;if(!valid.includes(ch))break}this.backup()}},{key:"acceptRunRe",value:function(validRe){for(;;){var ch=this.next();if(-1===ch)return;if(!validRe.test(ch))break}this.backup()}},{key:"emit",value:function(type){this.items.push({type:type,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),this.start=this.pos}},{key:"error",value:function(type,message){if(arguments.length<2)throw new Error("Lexer.prototype.error called with too few parameters (type:number , message:string)");return this.items.push({type:type,message:message,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),null}}],[{key:"enumFromNames",value:function(names){var obj=names.reduce((function(obj,name,i){return obj[name]=i,obj}),{});return Object.freeze(Object.assign(Object.create(null),obj))}}]),Lexer}();return{EOF:-1,Lexer:Lexer}}(),EOF=_ref9.EOF,Lexer=_ref9.Lexer,Wikifier=function(){var _optionsStack,lookaheadRe,idOrClassRe,_callDepth=0,Wikifier=function(){function Wikifier(destination,source,options){_classCallCheck(this,Wikifier),Wikifier.Parser.Profile.isEmpty()&&Wikifier.Parser.Profile.compile(),Object.defineProperties(this,{source:{value:String(source)},options:{writable:!0,value:Object.assign({profile:"all"},options)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),null==destination?this.output=document.createDocumentFragment():destination.jquery?this.output=destination[0]:this.output=destination;try{++_callDepth,this.subWikify(this.output),1===_callDepth&&Config.cleanupWikifierOutput&&convertBreaks(this.output)}finally{--_callDepth}}return _createClass(Wikifier,[{key:"subWikify",value:function(output,terminator,options){var newOptions,oldOptions,oldOutput=this.output;this.output=output,Wikifier.Option.length>0&&(newOptions=Object.assign(newOptions||{},Wikifier.Option.options)),null!==options&&"object"===_typeof(options)&&(newOptions=Object.assign(newOptions||{},options)),newOptions&&(oldOptions=this.options,this.options=Object.assign({},this.options,newOptions));var terminatorMatch,parserMatch,parsersProfile=Wikifier.Parser.Profile.get(this.options.profile),terminatorRegExp=terminator?new RegExp("(?:".concat(terminator,")"),this.options.ignoreTerminatorCase?"gim":"gm"):null;do{if(parsersProfile.parserRegExp.lastIndex=this.nextMatch,terminatorRegExp&&(terminatorRegExp.lastIndex=this.nextMatch),parserMatch=parsersProfile.parserRegExp.exec(this.source),(terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null)&&(!parserMatch||terminatorMatch.index<=parserMatch.index))return terminatorMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,terminatorMatch.index),this.matchStart=terminatorMatch.index,this.matchLength=terminatorMatch[0].length,this.matchText=terminatorMatch[0],this.nextMatch=terminatorRegExp.lastIndex,this.output=oldOutput,void(oldOptions&&(this.options=oldOptions));if(parserMatch){parserMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,parserMatch.index),this.matchStart=parserMatch.index,this.matchLength=parserMatch[0].length,this.matchText=parserMatch[0],this.nextMatch=parsersProfile.parserRegExp.lastIndex;for(var matchingParser=void 0,i=1,iend=parserMatch.length;i<iend;++i)if(parserMatch[i]){matchingParser=i-1;break}if(parsersProfile.parsers[matchingParser].handler(this),null!=TempState.break)break}}while(terminatorMatch||parserMatch);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=oldOutput,oldOptions&&(this.options=oldOptions)}},{key:"outputText",value:function(destination,startPos,endPos){jQuery(destination).append(document.createTextNode(this.source.substring(startPos,endPos)))}},{key:"rawArgs",value:function(){return this._rawArgs}},{key:"fullArgs",value:function(){return Scripting.parse(this._rawArgs)}}],[{key:"wikifyEval",value:function(text){var output=document.createDocumentFragment();new Wikifier(output,text);var errors=output.querySelector(".error");if(null!==errors)throw new Error(errors.textContent.replace(errorPrologRegExp,""));return output}},{key:"createInternalLink",value:function(destination,passage,text,callback){var $link=jQuery(document.createElement("a"));return null!=passage&&($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken"),$link.ariaClick({one:!0},(function(){"function"==typeof callback&&callback(),Engine.play(passage)}))),text&&$link.append(document.createTextNode(text)),destination&&$link.appendTo(destination),$link[0]}},{key:"createExternalLink",value:function(destination,url,text){var $link=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(text).appendTo(destination);return null!=url&&$link.attr({href:url,tabindex:0}),$link[0]}},{key:"isExternalLink",value:function(link){return!Story.has(link)&&(new RegExp("^".concat(Patterns.url),"gim").test(link)||/[/.?#]/.test(link))}}]),Wikifier}();return Object.defineProperty(Wikifier,"Option",{value:(_optionsStack=[],Object.freeze(Object.defineProperties({},{length:{get:function(){return _optionsStack.length}},options:{get:function(){return Object.assign.apply(Object,[{}].concat(_toConsumableArray(_optionsStack)))}},clear:{value:function(){_optionsStack=[]}},get:{value:function(idx){return _optionsStack[idx]}},pop:{value:function(){return _optionsStack.pop()}},push:{value:function(options){if("object"!==_typeof(options)||null===options)throw new TypeError("Wikifier.Option.push options parameter must be an object (received: ".concat(Util.getType(options),")"));return _optionsStack.push(options)}}})))}),Object.defineProperty(Wikifier,"Parser",{value:function(){var _profiles,_parsers=[];function parsersHas(name){return!!_parsers.find((function(parser){return parser.name===name}))}return Object.freeze(Object.defineProperties({},{parsers:{get:function(){return _parsers}},add:{value:function(parser){if("object"!==_typeof(parser))throw new Error("Wikifier.Parser.add parser parameter must be an object");if(!parser.hasOwnProperty("name"))throw new Error('parser object missing required "name" property');if("string"!=typeof parser.name)throw new Error('parser object "name" property must be a string');if(!parser.hasOwnProperty("match"))throw new Error('parser object missing required "match" property');if("string"!=typeof parser.match)throw new Error('parser object "match" property must be a string');if(!parser.hasOwnProperty("handler"))throw new Error('parser object missing required "handler" property');if("function"!=typeof parser.handler)throw new Error('parser object "handler" property must be a function');if(parser.hasOwnProperty("profiles")&&!Array.isArray(parser.profiles))throw new Error('parser object "profiles" property must be an array');if(parsersHas(parser.name))throw new Error('cannot clobber existing parser "'.concat(parser.name,'"'));_parsers.push(parser)}},delete:{value:function(name){var parser=_parsers.find((function(parser){return parser.name===name}));parser&&_parsers.delete(parser)}},isEmpty:{value:function(){return 0===_parsers.length}},has:{value:parsersHas},get:{value:function(name){return _parsers.find((function(parser){return parser.name===name}))||null}},Profile:{value:Object.freeze(Object.defineProperties({},{profiles:{get:function(){return _profiles}},compile:{value:function(){var all=_parsers,core=all.filter((function(parser){return!Array.isArray(parser.profiles)||parser.profiles.includes("core")}));return _profiles=Object.freeze({all:{parsers:all,parserRegExp:new RegExp(all.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")},core:{parsers:core,parserRegExp:new RegExp(core.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")}})}},isEmpty:{value:function(){return"object"!==_typeof(_profiles)||0===Object.keys(_profiles).length}},has:{value:function(profile){return"object"===_typeof(_profiles)&&_profiles.hasOwnProperty(profile)}},get:{value:function(profile){if("object"!==_typeof(_profiles)||!_profiles.hasOwnProperty(profile))throw new Error('nonexistent parser profile "'.concat(profile,'"'));return _profiles[profile]}}}))}}))}()}),Object.defineProperties(Wikifier,{helpers:{value:{}},getValue:{value:State.getVar},setValue:{value:State.setVar},parse:{value:Scripting.parse},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(Wikifier.helpers,{inlineCss:{value:(lookaheadRe=new RegExp(Patterns.inlineCss,"gm"),idOrClassRe=new RegExp("(".concat(Patterns.cssIdOrClassSigil,")(").concat(Patterns.anyLetter,"+)"),"g"),function(w){var matched,css={classes:[],id:"",styles:{}};do{lookaheadRe.lastIndex=w.nextMatch;var match=lookaheadRe.exec(w.source);if(matched=match&&match.index===w.nextMatch){if(match[1])css.styles[Util.fromCssProperty(match[1])]=match[2].trim();else if(match[3])css.styles[Util.fromCssProperty(match[3])]=match[4].trim();else if(match[5]){var subMatch=void 0;for(idOrClassRe.lastIndex=0;null!==(subMatch=idOrClassRe.exec(match[5]));)"."===subMatch[1]?css.classes.push(subMatch[2]):css.id=subMatch[2]}w.nextMatch=lookaheadRe.lastIndex}}while(matched);return css})},evalText:{value:function(text){var result;try{switch(_typeof(result=Scripting.evalTwineScript(text))){case"string":""===result.trim()&&(result=text);break;case"number":result=String(result);break;default:result=text}}catch(ex){result=text}return result}},evalPassageId:{value:function(passage){return null==passage||Story.has(passage)?passage:Wikifier.helpers.evalText(passage)}},hasBlockContext:{value:function(nodes){for(var hasGCS="function"==typeof window.getComputedStyle,i=nodes.length-1;i>=0;--i){var node=nodes[i];switch(node.nodeType){case Node.ELEMENT_NODE:var tagName=node.nodeName.toUpperCase();if("BR"===tagName)return!0;var styles=hasGCS?window.getComputedStyle(node,null):node.currentStyle;if(styles&&styles.display){if("none"===styles.display)continue;return"block"===styles.display}switch(tagName){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},createShadowSetterCallback:{value:function(){var macroParser=null;function getMacroContextShadowView(){for(var macro=macroParser||function(){if(!macroParser&&!(macroParser=Wikifier.Parser.get("macro")))throw new Error('cannot find "macro" parser');return macroParser}(),view=new Set,context=macro.context;null!==context;context=context.parent)context._shadows&&context._shadows.forEach((function(name){return view.add(name)}));return _toConsumableArray(view)}return function(code){var shadowStore={};return getMacroContextShadowView().forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]})),function(){var shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null;try{return shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),Scripting.evalJavaScript(code)}finally{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}}()},parseSquareBracketedMarkup:{value:function(){var Item=Lexer.enumFromNames(["Error","DelimLTR","DelimRTL","InnerMeta","ImageMeta","LinkMeta","Link","RightMeta","Setter","Source","Text"]),Delim=Lexer.enumFromNames(["None","LTR","RTL"]);function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexLeftMeta(lexer){if(!lexer.accept("["))return lexer.error(Item.Error,"malformed square-bracketed markup");if(lexer.accept("["))lexer.data.isLink=!0,lexer.emit(Item.LinkMeta);else{if(lexer.accept("<>"),!(lexer.accept("Ii")&&lexer.accept("Mm")&&lexer.accept("Gg")&&lexer.accept("[")))return lexer.error(Item.Error,"malformed square-bracketed markup");lexer.data.isLink=!1,lexer.emit(Item.ImageMeta)}return lexer.depth=2,lexCoreComponents}function lexCoreComponents(lexer){for(var what=lexer.data.isLink?"link":"image",delim=Delim.None;;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup"));break;case"|":delim===Delim.None&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(),lexer.emit(Item.DelimLTR));break;case"-":delim===Delim.None&&">"===lexer.peek()&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(2),lexer.emit(Item.DelimLTR));break;case"<":delim===Delim.None&&"-"===lexer.peek()&&(delim=Delim.RTL,lexer.backup(),lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.DelimRTL));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.InnerMeta),lexer.data.isLink?lexSetter:lexImageLink;case"]":return--lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexImageLink(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup link component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.InnerMeta),lexSetter;case"]":return--lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexSetter(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup setter component"));break;case"'":if(slurpQuote(lexer,"'")===EOF)return lexer.error(Item.Error,"unterminated single quoted string in ".concat(what," markup setter component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)return"]"!==lexer.peek()?lexer.error(Item.Error,"malformed ".concat(what," markup")):(--lexer.depth,lexer.backup(),lexer.emit(Item.Setter),lexer.forward(2),lexer.emit(Item.RightMeta),null)}}return function(w){var lexer=new Lexer(w.source,lexLeftMeta);lexer.start=lexer.pos=w.matchStart;var markup={},items=lexer.run(),last=items.last();return last&&last.type===Item.Error?markup.error=last.message:items.forEach((function(item){var text=item.text.trim();switch(item.type){case Item.ImageMeta:markup.isImage=!0,"<"===text[1]?markup.align="left":">"===text[1]&&(markup.align="right");break;case Item.LinkMeta:markup.isLink=!0;break;case Item.Link:"~"===text[0]?(markup.forceInternal=!0,markup.link=text.slice(1)):markup.link=text;break;case Item.Setter:markup.setter=text;break;case Item.Source:markup.source=text;break;case Item.Text:markup.text=text}})),markup.pos=lexer.pos,markup}}()}}),Wikifier}();!function(){function _verbatimTagHandler(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(match[1]).appendTo(w.output))}Wikifier.Parser.add({name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("blockquote")).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,i,destStack=[w.output],curLevel=0,newLevel=w.matchLength;do{if(newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement("blockquote")).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();curLevel=newLevel,w.subWikify(destStack[destStack.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(destStack[destStack.length-1]),this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);(matched=match&&match.index===w.nextMatch)&&(newLevel=match[0].length,w.nextMatch+=match[0].length)}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(/?".concat(Patterns.macroName,")(?:\\s*)((?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/)|(?://.*\\n)|(?:`(?:\\\\.|[^`\\\\])*`)|(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>"),"gm"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(w){var matchStart=this.lookahead.lastIndex=w.matchStart;if(this.parseTag(w)){var macro,nextMatch=w.nextMatch,name=this.working.name,rawArgs=this.working.arguments;try{if(!(macro=Macro.get(name))){if(Macro.tags.has(name)){var tags=Macro.tags.get(name);return throwError(w.output,"child tag <<".concat(name,">> was found outside of a call to its parent macro").concat(1===tags.length?"":"s"," <<").concat(tags.join(">>, <<"),">>"),w.source.slice(matchStart,w.nextMatch))}return throwError(w.output,"macro <<".concat(name,">> does not exist"),w.source.slice(matchStart,w.nextMatch))}var payload=null;if(void 0!==macro.tags&&!(payload=this.parseBody(w,macro)))return w.nextMatch=nextMatch,throwError(w.output,"cannot find a closing tag for macro <<".concat(name,">>"),"".concat(w.source.slice(matchStart,w.nextMatch),"…"));if("function"!=typeof macro.handler)return throwError(w.output,"macro <<".concat(name,">> handler function ").concat(void 0===macro.handler?"does not exist":"is not a function"),w.source.slice(matchStart,w.nextMatch));var args=payload?payload[0].args:this.createArgs(rawArgs,this.skipArgs(macro,macro.name));if(void 0!==macro._MACRO_API){this.context=new MacroContext({macro:macro,name:name,args:args,payload:payload,source:w.source.slice(matchStart,w.nextMatch),parent:this.context,parser:w});try{macro.handler.call(this.context)}finally{this.context=this.context.parent}}else{var prevRawArgs=w._rawArgs;w._rawArgs=rawArgs;try{macro.handler(w.output,name,args,w,payload)}finally{w._rawArgs=prevRawArgs}}}catch(ex){return throwError(w.output,"cannot execute ".concat(macro&&macro.isWidget?"widget":"macro"," <<").concat(name,">>: ").concat(ex.message),w.source.slice(matchStart,w.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else w.outputText(w.output,w.matchStart,w.nextMatch)},parseTag:function(w){var match=this.lookahead.exec(w.source);return!(!match||match.index!==w.matchStart||!match[1])&&(w.nextMatch=this.lookahead.lastIndex,this.working.source=w.source.slice(match.index,this.lookahead.lastIndex),this.working.name=match[1],this.working.arguments=match[2],this.working.index=match.index,!0)},parseBody:function(w,macro){for(var openTag=this.working.name,closeTag="/".concat(openTag),closeAlt="end".concat(openTag),bodyTags=!!Array.isArray(macro.tags)&&macro.tags,payload=[],end=-1,opened=1,curSource=this.working.source,curTag=this.working.name,curArgument=this.working.arguments,contentStart=w.nextMatch;-1!==(w.matchStart=w.source.indexOf(this.match,w.nextMatch));)if(this.parseTag(w)){var tagSource=this.working.source,tagName=this.working.name,tagArgs=this.working.arguments,tagBegin=this.working.index,tagEnd=w.nextMatch,hasArgs=""!==tagArgs.trim();switch(tagName){case openTag:++opened;break;case closeAlt:case closeTag:if(hasArgs)throw w.nextMatch=tagBegin+2+tagName.length,new Error('malformed closing tag: "'.concat(tagSource,'"'));--opened;break;default:if(hasArgs&&(tagName.startsWith("/")||tagName.startsWith("end"))){this.lookahead.lastIndex=w.nextMatch=tagBegin+2+tagName.length;continue}if(1===opened&&bodyTags)for(var i=0,iend=bodyTags.length;i<iend;++i)tagName===bodyTags[i]&&(payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),curSource=tagSource,curTag=tagName,curArgument=tagArgs,contentStart=tagEnd)}if(0===opened){payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),end=tagEnd;break}}else this.lookahead.lastIndex=w.nextMatch=w.matchStart+this.match.length;return-1!==end?(w.nextMatch=end,payload):null},createArgs:function(rawArgsString,skipArgs){var args=skipArgs?[]:this.parseArgs(rawArgsString);return Object.defineProperties(args,{raw:{value:rawArgsString},full:{value:Scripting.parse(rawArgsString)}}),args},skipArgs:function(macro,tagName){if(void 0!==macro.skipArgs){var sa=macro.skipArgs;return"boolean"==typeof sa&&sa||Array.isArray(sa)&&sa.includes(tagName)}return void 0!==macro.skipArg0&&(macro.skipArg0&&macro.name===tagName)},parseArgs:function(){var Item=Lexer.enumFromNames(["Error","Bareword","Expression","String","SquareBracket"]),spaceRe=new RegExp(Patterns.space),notSpaceRe=new RegExp(Patterns.notSpace),varTest=new RegExp("^".concat(Patterns.variable));function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexSpace(lexer){var offset=lexer.source.slice(lexer.pos).search(notSpaceRe);if(offset===EOF)return null;switch(0!==offset&&(lexer.pos+=offset,lexer.ignore()),lexer.next()){case"`":return lexExpression;case'"':return lexDoubleQuote;case"'":return lexSingleQuote;case"[":return lexSquareBracket;default:return lexBareword}}function lexExpression(lexer){return slurpQuote(lexer,"`")===EOF?lexer.error(Item.Error,"unterminated backquote expression"):(lexer.emit(Item.Expression),lexSpace)}function lexDoubleQuote(lexer){return slurpQuote(lexer,'"')===EOF?lexer.error(Item.Error,"unterminated double quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSingleQuote(lexer){return slurpQuote(lexer,"'")===EOF?lexer.error(Item.Error,"unterminated single quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSquareBracket(lexer){var what;if(lexer.accept("<>IiMmGg")?(what="image",lexer.acceptRun("<>IiMmGg")):what="link",!lexer.accept("["))return lexer.error(Item.Error,"malformed ".concat(what," markup"));lexer.depth=2;loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case"[":++lexer.depth;break;case"]":if(--lexer.depth,lexer.depth<0)return lexer.error(Item.Error,"unexpected right square bracket ']'");if(1===lexer.depth){if("]"===lexer.next()){--lexer.depth;break loop}lexer.backup()}}return lexer.emit(Item.SquareBracket),lexSpace}function lexBareword(lexer){var offset=lexer.source.slice(lexer.pos).search(spaceRe);return lexer.pos=offset===EOF?lexer.source.length:lexer.pos+offset,lexer.emit(Item.Bareword),offset===EOF?null:lexSpace}return function(rawArgsString){var lexer=new Lexer(rawArgsString,lexSpace),args=[];return lexer.run().forEach((function(item){var arg=item.text;switch(item.type){case Item.Error:throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(item.message));case Item.Bareword:if(varTest.test(arg))arg=State.getVar(arg);else if(/^(?:settings|setup)[.[]/.test(arg))try{arg=Scripting.evalTwineScript(arg)}catch(ex){throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(ex.message))}else if("null"===arg)arg=null;else if("undefined"===arg)arg=undefined;else if("true"===arg)arg=!0;else if("false"===arg)arg=!1;else if("NaN"===arg)arg=NaN;else{var argAsNum=Number(arg);Number.isNaN(argAsNum)||(arg=argAsNum)}break;case Item.Expression:if(""===(arg=arg.slice(1,-1).trim()))arg=undefined;else try{arg=Scripting.evalTwineScript("(".concat(arg,")"))}catch(ex){throw new Error('unable to parse macro argument expression "'.concat(arg,'": ').concat(ex.message))}break;case Item.String:try{arg=Scripting.evalJavaScript(arg)}catch(ex){throw new Error('unable to parse macro argument string "'.concat(arg,'": ').concat(ex.message))}break;case Item.SquareBracket:var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:arg,matchStart:0});if(markup.hasOwnProperty("error"))throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(markup.error));if(markup.pos<arg.length)throw new Error('unable to parse macro argument "'.concat(arg,'": unexpected character(s) "').concat(arg.slice(markup.pos),'" (pos: ').concat(markup.pos,")"));markup.isLink?((arg={isLink:!0}).count=markup.hasOwnProperty("text")?2:1,arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.text=markup.hasOwnProperty("text")?Wikifier.helpers.evalText(markup.text):arg.link,arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link),arg.setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null):markup.isImage&&(arg=function(source){var imgObj={source:source,isImage:!0};if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(imgObj.source=passage.text,imgObj.passage=passage.title)}return imgObj}(Wikifier.helpers.evalPassageId(markup.source)),markup.hasOwnProperty("align")&&(arg.align=markup.align),markup.hasOwnProperty("text")&&(arg.title=Wikifier.helpers.evalText(markup.text)),markup.hasOwnProperty("link")&&(arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link)),arg.setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null)}args.push(arg)})),args}}()}),Wikifier.Parser.add({name:"link",profiles:["core"],match:"\\[\\[[^[]",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(markup.hasOwnProperty("error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{w.nextMatch=markup.pos;var link=Wikifier.helpers.evalPassageId(markup.link),text=markup.hasOwnProperty("text")?Wikifier.helpers.evalText(markup.text):link,setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null,output=(Config.debug?new DebugView(w.output,"link-markup","[[link]]",w.source.slice(w.matchStart,w.nextMatch)):w).output;markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(output,link,text,setFn):Wikifier.createExternalLink(output,link,text)}}}),Wikifier.Parser.add({name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(w){w.outputText(Wikifier.createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch)}}),Wikifier.Parser.add({name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(markup.hasOwnProperty("error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{var debugView;w.nextMatch=markup.pos,Config.debug&&(debugView=new DebugView(w.output,"image-markup",markup.hasOwnProperty("link")?"[img[][link]]":"[img[]]",w.source.slice(w.matchStart,w.nextMatch))).modes({block:!0});var source,setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null,el=(Config.debug?debugView:w).output;if(markup.hasOwnProperty("link")){var link=Wikifier.helpers.evalPassageId(markup.link);(el=markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(el,link,null,setFn):Wikifier.createExternalLink(el,link)).classList.add("link-image")}if(el=jQuery(document.createElement("img")).appendTo(el).get(0),"data:"!==(source=Wikifier.helpers.evalPassageId(markup.source)).slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(el.setAttribute("data-passage",passage.title),source=passage.text.trim())}el.src=source,markup.hasOwnProperty("text")&&(el.title=Wikifier.helpers.evalText(markup.text)),markup.hasOwnProperty("align")&&(el.align=markup.align)}}}),Wikifier.Parser.add({name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){var pre=jQuery(document.createElement("pre"));jQuery(document.createElement("code")).text(match[1]).appendTo(pre),pre.appendTo(w.output),w.nextMatch=this.lookahead.lastIndex}}}),Wikifier.Parser.add({name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(w){switch(w.matchText){case"''":w.subWikify(jQuery(document.createElement("strong")).appendTo(w.output).get(0),"''");break;case"//":w.subWikify(jQuery(document.createElement("em")).appendTo(w.output).get(0),"//");break;case"__":w.subWikify(jQuery(document.createElement("u")).appendTo(w.output).get(0),"__");break;case"^^":w.subWikify(jQuery(document.createElement("sup")).appendTo(w.output).get(0),"\\^\\^");break;case"~~":w.subWikify(jQuery(document.createElement("sub")).appendTo(w.output).get(0),"~~");break;case"==":w.subWikify(jQuery(document.createElement("s")).appendTo(w.output).get(0),"==");break;case"{{{":var lookahead=/\{\{\{((?:.|\n)*?)\}\}\}/gm;lookahead.lastIndex=w.matchStart;var match=lookahead.exec(w.source);match&&match.index===w.matchStart&&(jQuery(document.createElement("code")).text(match[1]).appendTo(w.output),w.nextMatch=lookahead.lastIndex)}}}),Wikifier.Parser.add({name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRe:/\s*\n/gm,handler:function(w){var css=Wikifier.helpers.inlineCss(w);this.blockRe.lastIndex=w.nextMatch;var blockMatch=this.blockRe.exec(w.source),blockLevel=blockMatch&&blockMatch.index===w.nextMatch,$el=jQuery(document.createElement(blockLevel?"div":"span")).appendTo(w.output);0===css.classes.length&&""===css.id&&0===Object.keys(css.styles).length?$el.addClass("marked"):(css.classes.forEach((function(className){return $el.addClass(className)})),""!==css.id&&$el.attr("id",css.id),$el.css(css.styles)),blockLevel?(w.nextMatch+=blockMatch[0].length,w.subWikify($el[0],"\\n?".concat(this.terminator))):w.subWikify($el[0],this.terminator)}}),Wikifier.Parser.add({name:"verbatimText",profiles:["core"],match:'"{3}|<[Nn][Oo][Ww][Ii][Kk][Ii]>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<[Nn][Oo][Ww][Ii][Kk][Ii]>((?:.|\n)*?)<\/[Nn][Oo][Ww][Ii][Kk][Ii]>)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createElement("span")).addClass("verbatim").text(match[1]||match[2]).appendTo(w.output))}}),Wikifier.Parser.add({name:"horizontalRule",profiles:["core"],match:"^----+$\\n?|<[Hh][Rr]\\s*/?>\\n?",handler:function(w){jQuery(document.createElement("hr")).appendTo(w.output)}}),Wikifier.Parser.add({name:"emdash",profiles:["core"],match:"--",handler:function(w){jQuery(document.createTextNode("—")).appendTo(w.output)}}),Wikifier.Parser.add({name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(w){jQuery(document.createTextNode("$")).appendTo(w.output)}}),Wikifier.Parser.add({name:"nakedVariable",profiles:["core"],match:"".concat(Patterns.variable,"(?:(?:\\.").concat(Patterns.identifier,")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\[").concat(Patterns.variable,"\\]))*"),handler:function(w){var result=State.getVar(w.matchText);null==result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"variable",w.matchText,w.matchText):w).output,stringFrom(result))}}),Wikifier.Parser.add({name:"template",profiles:["core"],match:"\\?".concat(Patterns.templateName),handler:function(w){var name=w.matchText.slice(1),template=Template.get(name),result=null;switch(template instanceof Array&&(template=template.random()),_typeof(template)){case"function":try{result=stringFrom(template.call({name:name}))}catch(ex){return throwError(w.output,"cannot execute function template ?".concat(name,": ").concat(ex.message),w.source.slice(w.matchStart,w.nextMatch))}break;case"string":result=template}null===result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"template",w.matchText,w.matchText):w).output,result)}}),Wikifier.Parser.add({name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("h".concat(w.matchLength))).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,table=jQuery(document.createElement("table")).appendTo(w.output).get(0),prevColumns=[],curRowType=null,$rowContainer=null,rowCount=0;w.nextMatch=w.matchStart;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var nextRowType=match[2];"k"===nextRowType?(table.className=match[1],w.nextMatch+=match[0].length+1):(nextRowType!==curRowType&&(curRowType=nextRowType,$rowContainer=jQuery(document.createElement(this.rowTypes[nextRowType])).appendTo(table)),"c"===curRowType?($rowContainer.css("caption-side",0===rowCount?"top":"bottom"),w.nextMatch+=1,w.subWikify($rowContainer[0],this.rowTerminator)):this.rowHandler(w,jQuery(document.createElement("tr")).appendTo($rowContainer).get(0),prevColumns),++rowCount)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))},rowHandler:function(w,rowEl,prevColumns){var matched,_this12=this,cellRe=new RegExp(this.cellPattern,"gm"),col=0,curColCount=1;do{cellRe.lastIndex=w.nextMatch;var cellMatch=cellRe.exec(w.source);if(matched=cellMatch&&cellMatch.index===w.nextMatch){if("~"===cellMatch[1]){var last=prevColumns[col];last&&(++last.rowCount,last.$element.attr("rowspan",last.rowCount).css("vertical-align","middle")),w.nextMatch=cellMatch.index+cellMatch[0].length-1}else if(">"===cellMatch[1])++curColCount,w.nextMatch=cellMatch.index+cellMatch[0].length-1;else{if(cellMatch[2]){w.nextMatch=cellMatch.index+cellMatch[0].length;break}!function(){++w.nextMatch;for(var css=Wikifier.helpers.inlineCss(w),spaceLeft=!1,spaceRight=!1,$cell=void 0;" "===w.source.substr(w.nextMatch,1);)spaceLeft=!0,++w.nextMatch;"!"===w.source.substr(w.nextMatch,1)?($cell=jQuery(document.createElement("th")).appendTo(rowEl),++w.nextMatch):$cell=jQuery(document.createElement("td")).appendTo(rowEl),prevColumns[col]={rowCount:1,$element:$cell},curColCount>1&&($cell.attr("colspan",curColCount),curColCount=1),w.subWikify($cell[0],_this12.cellTerminator)," "===w.matchText.substr(w.matchText.length-2,1)&&(spaceRight=!0),css.classes.forEach((function(className){return $cell.addClass(className)})),""!==css.id&&$cell.attr("id",css.id),spaceLeft&&spaceRight?css.styles["text-align"]="center":spaceLeft?css.styles["text-align"]="right":spaceRight&&(css.styles["text-align"]="left"),$cell.css(css.styles),w.nextMatch=w.nextMatch-1}()}++col}}while(matched)}}),Wikifier.Parser.add({name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){w.nextMatch=w.matchStart;var matched,i,destStack=[w.output],curType=null,curLevel=0;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var newType=match[2]?"ol":"ul",newLevel=match[0].length;if(w.nextMatch+=match[0].length,newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();else newLevel===curLevel&&newType!==curType&&(destStack.pop(),destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0)));curLevel=newLevel,curType=newType,w.subWikify(jQuery(document.createElement("li")).appendTo(destStack[destStack.length-1]).get(0),this.terminator)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:\x3c!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"lineContinuation",profiles:["core"],match:"\\\\".concat(Patterns.spaceNoTerminator,"*\\n|\\n").concat(Patterns.spaceNoTerminator,"*\\\\|\\n?\\\\").concat(Patterns.spaceNoTerminator,"*$|^").concat(Patterns.spaceNoTerminator,"*\\\\\\n?"),handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"lineBreak",profiles:["core"],match:"\\n|<[Bb][Rr]\\s*/?>",handler:function(w){w.options.nobr||jQuery(document.createElement("br")).appendTo(w.output)}}),Wikifier.Parser.add({name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(w){jQuery(document.createDocumentFragment()).append(w.matchText).appendTo(w.output)}}),Wikifier.Parser.add({name:"xmlProlog",profiles:["core"],match:"<\\?[Xx][Mm][Ll][^>]*\\?>",handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"verbatimHtml",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"verbatimScriptTag",profiles:["core"],match:"<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>",lookahead:/(<[Ss][Cc][Rr][Ii][Pp][Tt]*>(?:.|\n)*?<\/[Ss][Cc][Rr][Ii][Pp][Tt]>)/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"styleTag",profiles:["core"],match:"<[Ss][Tt][Yy][Ll][Ee][^>]*>",lookahead:/(<[Ss][Tt][Yy][Ll][Ee]*>)((?:.|\n)*?)(<\/[Ss][Tt][Yy][Ll][Ee]>)/gm,imageMarkup:new RegExp(Patterns.cssImage,"g"),hasImageMarkup:new RegExp(Patterns.cssImage),handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){w.nextMatch=this.lookahead.lastIndex;var css=match[2];this.hasImageMarkup.test(css)&&(this.imageMarkup.lastIndex=0,css=css.replace(this.imageMarkup,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(markup.hasOwnProperty("error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text)}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),jQuery(document.createDocumentFragment()).append(match[1]+css+match[3]).appendTo(w.output)}}}),Wikifier.Parser.add({name:"svgTag",profiles:["core"],match:"<[Ss][Vv][Gg][^>]*>",lookahead:/<(\/?)[Ss][Vv][Gg][^>]*>/gm,namespace:"http://www.w3.org/2000/svg",handler:function(w){var _this13=this;this.lookahead.lastIndex=w.nextMatch;for(var match,depth=1;depth>0&&null!==(match=this.lookahead.exec(w.source));)depth+="/"===match[1]?-1:1;if(0===depth){w.nextMatch=this.lookahead.lastIndex;var svgTag=w.source.slice(w.matchStart,this.lookahead.lastIndex),$frag=jQuery(document.createDocumentFragment()).append(svgTag);$frag.find("a[data-passage],image[data-passage]").each((function(_,el){var tagName=el.tagName.toLowerCase();try{_this13.processAttributeDirectives(el)}catch(ex){return throwError(w.output,"svg|<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}el.hasAttribute("data-passage")&&_this13.processDataAttributes(el,tagName)})),$frag.appendTo(w.output)}},processAttributeDirectives:function(el){_toConsumableArray(el.attributes).forEach((function(_ref10){var name=_ref10.name,value=_ref10.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if("image"===tagName)"data:"!==passage.slice(0,5)&&Story.has(passage)&&(passage=Story.get(passage)).tags.includes("Twine.image")&&el.setAttribute("href",passage.text.trim());else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}}),Wikifier.Parser.add({name:"htmlTag",profiles:["core"],match:"<".concat(Patterns.htmlTagName,"(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>"),tagRe:new RegExp("^<(".concat(Patterns.htmlTagName,")")),mediaTags:["audio","img","source","track","video"],nobrTags:["audio","colgroup","datalist","dl","figure","meter","ol","optgroup","picture","progress","ruby","select","table","tbody","tfoot","thead","tr","ul","video"],voidTags:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],handler:function(w){var tagMatch=this.tagRe.exec(w.matchText),tag=tagMatch&&tagMatch[1],tagName=tag&&tag.toLowerCase();if(tagName){var terminator,terminatorMatch,isVoid=this.voidTags.includes(tagName)||w.matchText.endsWith("/>"),isNobr=this.nobrTags.includes(tagName);if(!isVoid){terminator="<\\/".concat(tagName,"\\s*>");var terminatorRe=new RegExp(terminator,"gim");terminatorRe.lastIndex=w.matchStart,terminatorMatch=terminatorRe.exec(w.source)}if(!isVoid&&!terminatorMatch)return throwError(w.output,"cannot find a closing tag for HTML <".concat(tag,">"),"".concat(w.matchText,"…"));var debugView,output=w.output,el=document.createElement(w.output.tagName);for(el.innerHTML=w.matchText;el.firstChild;)el=el.firstChild;try{this.processAttributeDirectives(el)}catch(ex){return throwError(w.output,"<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}if(el.hasAttribute("data-passage")&&(this.processDataAttributes(el,tagName),Config.debug&&((debugView=new DebugView(w.output,"html-".concat(tagName),tagName,w.matchText)).modes({block:"img"===tagName,nonvoid:terminatorMatch}),output=debugView.output)),terminatorMatch){try{Wikifier.Option.push({nobr:isNobr}),w.subWikify(el,terminator,{ignoreTerminatorCase:!0})}finally{Wikifier.Option.pop()}debugView&&jQuery(el).find(".debug.block").length>0&&debugView.modes({block:!0})}output.appendChild("track"===tagName?el.cloneNode(!0):el)}},processAttributeDirectives:function(el){_toConsumableArray(el.attributes).forEach((function(_ref11){var name=_ref11.name,value=_ref11.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if(this.mediaTags.includes(tagName)){if("data:"!==passage.slice(0,5)&&Story.has(passage)){var parentName,twineTag;switch(passage=Story.get(passage),tagName){case"audio":case"video":twineTag="Twine.".concat(tagName);break;case"img":twineTag="Twine.image";break;case"track":twineTag="Twine.vtt";break;case"source":var $parent=$(el).closest("audio,picture,video");$parent.length&&(parentName=$parent.get(0).tagName.toLowerCase(),twineTag="Twine.".concat("picture"===parentName?"image":parentName))}passage.tags.includes(twineTag)&&(el["picture"===parentName?"srcset":"src"]=passage.text.trim())}}else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}})}();var Template=(_templates=new Map,_validNameRe=new RegExp("^(?:".concat(Patterns.templateName,")$")),_validType=function(template){var templateType=_typeof(template);return"function"===templateType||"string"===templateType},Object.freeze(Object.defineProperties({},{add:{value:function(name,template){if(!(_validType(template)||template instanceof Array&&template.length>0&&template.every(_validType)))throw new TypeError("invalid template type (".concat(name,"); templates must be: functions, strings, or an array of either"));(name instanceof Array?name:[name]).forEach((function(name){if(!_validNameRe.test(name))throw new Error('invalid template name "'.concat(name,'"'));if(_templates.has(name))throw new Error("cannot clobber existing template ?".concat(name));_templates.set(name,template)}))}},delete:{value:function(name){(name instanceof Array?name:[name]).forEach((function(name){return _templates.delete(name)}))}},get:{value:function(name){return _templates.has(name)?_templates.get(name):null}},has:{value:function(name){return _templates.has(name)}},size:{get:function(){return _templates.size}}}))),_templates,_validNameRe,_validType,Macro=function(){var _macros={},_tags={},_validNameRe=new RegExp("^(?:".concat(Patterns.macroName,")$"));function macrosHas(name){return _macros.hasOwnProperty(name)}function tagsRegister(parent,bodyTags){if(!parent)throw new Error("no parent specified");for(var endTags=["/".concat(parent),"end".concat(parent)],allTags=[].concat(endTags,Array.isArray(bodyTags)?bodyTags:[]),i=0;i<allTags.length;++i){var tag=allTags[i];if(macrosHas(tag))throw new Error("cannot register tag for an existing macro");tagsHas(tag)?_tags[tag].includes(parent)||(_tags[tag].push(parent),_tags[tag].sort()):_tags[tag]=[parent]}}function tagsUnregister(parent){if(!parent)throw new Error("no parent specified");Object.keys(_tags).forEach((function(tag){var i=_tags[tag].indexOf(parent);-1!==i&&(1===_tags[tag].length?delete _tags[tag]:_tags[tag].splice(i,1))}))}function tagsHas(name){return _tags.hasOwnProperty(name)}return Object.freeze(Object.defineProperties({},{add:{value:function macrosAdd(name,def){if(Array.isArray(name))name.forEach((function(name){return macrosAdd(name,def)}));else{if(!_validNameRe.test(name))throw new Error('invalid macro name "'.concat(name,'"'));if(macrosHas(name))throw new Error("cannot clobber existing macro <<".concat(name,">>"));if(tagsHas(name))throw new Error("cannot clobber child tag <<".concat(name,">> of parent macro").concat(1===_tags[name].length?"":"s"," <<").concat(_tags[name].join(">>, <<"),">>"));try{if("object"===_typeof(def))_macros[name]=Object.assign(Object.create(null),def,{_MACRO_API:!0});else{if(!macrosHas(def))throw new Error("cannot create alias of nonexistent macro <<".concat(def,">>"));_macros[name]=Object.create(_macros[def],{_ALIAS_OF:{enumerable:!0,value:def}})}Object.defineProperty(_macros,name,{writable:!1})}catch(ex){throw"TypeError"===ex.name?new Error("cannot clobber protected macro <<".concat(name,">>")):new Error("unknown error when attempting to add macro <<".concat(name,">>: [").concat(ex.name,"] ").concat(ex.message))}if(void 0!==_macros[name].tags)if(null==_macros[name].tags)tagsRegister(name);else{if(!Array.isArray(_macros[name].tags))throw new Error('bad value for "tags" property of macro <<'.concat(name,">>"));tagsRegister(name,_macros[name].tags)}}}},delete:{value:function macrosDelete(name){if(Array.isArray(name))name.forEach((function(name){return macrosDelete(name)}));else if(macrosHas(name)){void 0!==_macros[name].tags&&tagsUnregister(name);try{Object.defineProperty(_macros,name,{writable:!0}),delete _macros[name]}catch(ex){throw new Error("unknown error removing macro <<".concat(name,">>: ").concat(ex.message))}}else if(tagsHas(name))throw new Error("cannot remove child tag <<".concat(name,">> of parent macro <<").concat(_tags[name],">>"))}},isEmpty:{value:function(){return 0===Object.keys(_macros).length}},has:{value:macrosHas},get:{value:function(name){var macro=null;return macrosHas(name)&&"function"==typeof _macros[name].handler?macro=_macros[name]:macros.hasOwnProperty(name)&&"function"==typeof macros[name].handler&&(macro=macros[name]),macro}},init:{value:function(){var handler=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(_macros).forEach((function(name){"function"==typeof _macros[name][handler]&&_macros[name][handler](name)})),Object.keys(macros).forEach((function(name){"function"==typeof macros[name][handler]&&macros[name][handler](name)}))}},tags:{value:Object.freeze(Object.defineProperties({},{register:{value:tagsRegister},unregister:{value:tagsUnregister},has:{value:tagsHas},get:{value:function(name){return tagsHas(name)?_tags[name]:null}}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){var MacroContext=function(){function MacroContext(contextData){_classCallCheck(this,MacroContext);var context=Object.assign({parent:null,macro:null,name:"",displayName:"",args:null,payload:null,parser:null,source:""},contextData);if(null===context.macro||""===context.name||null===context.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{self:{value:context.macro},name:{value:void 0===context.macro._ALIAS_OF?context.name:context.macro._ALIAS_OF},displayName:{value:context.name},args:{value:context.args},payload:{value:context.payload},source:{value:context.source},parent:{value:context.parent},parser:{value:context.parser},_output:{value:context.parser.output},_shadows:{writable:!0,value:null},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}return _createClass(MacroContext,[{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"shadows",get:function(){return _toConsumableArray(this._shadows)}},{key:"shadowView",get:function(){var view=new Set;return this.contextSelectAll((function(ctx){return ctx._shadows})).forEach((function(ctx){return ctx._shadows.forEach((function(name){return view.add(name)}))})),_toConsumableArray(view)}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}},{key:"contextHas",value:function(filter){for(var context=this;null!==(context=context.parent);)if(filter(context))return!0;return!1}},{key:"contextSelect",value:function(filter){for(var context=this;null!==(context=context.parent);)if(filter(context))return context;return null}},{key:"contextSelectAll",value:function(filter){for(var result=[],context=this;null!==(context=context.parent);)filter(context)&&result.push(context);return result}},{key:"addShadow",value:function(){var _this14=this;this._shadows||(this._shadows=new Set);for(var varRe=new RegExp("^".concat(Patterns.variable,"$")),_len14=arguments.length,names=new Array(_len14),_key14=0;_key14<_len14;_key14++)names[_key14]=arguments[_key14];names.flat(1/0).forEach((function(name){if("string"!=typeof name)throw new TypeError("variable name must be a string; type: ".concat(_typeof(name)));if(!varRe.test(name))throw new Error('invalid variable name "'.concat(name,'"'));_this14._shadows.add(name)}))}},{key:"createShadowWrapper",value:function(callback,doneCallback,startCallback){var shadowStore,shadowContext=this;return"function"==typeof callback&&(shadowStore={},this.shadowView.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]}))),function(){for(var _len15=arguments.length,args=new Array(_len15),_key15=0;_key15<_len15;_key15++)args[_key15]=arguments[_key15];if("function"==typeof startCallback&&startCallback.apply(this,args),"function"==typeof callback){var contextCache,shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null,macroParser=Wikifier.Parser.get("macro");try{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),contextCache=macroParser.context,macroParser.context=shadowContext,callback.apply(this,args)}finally{contextCache!==undefined&&(macroParser.context=contextCache),shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}"function"==typeof doneCallback&&doneCallback.apply(this,args)}}},{key:"createDebugView",value:function(name,title){return this._debugView=new DebugView(this._output,"macro",name||this.displayName,title||this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(message,source){return throwError(this._output,"<<".concat(this.displayName,">>: ").concat(message),source||this.source)}}]),MacroContext}();return MacroContext}();!function(){if(Macro.add("capture",{skipArgs:!0,tags:null,tsVarRe:new RegExp("(".concat(Patterns.variable,")"),"g"),handler:function(){if(0===this.args.raw.length)return this.error("no story/temporary variable list specified");var valueCache={};try{for(var match,tsVarRe=this.self.tsVarRe;null!==(match=tsVarRe.exec(this.args.raw));){var varName=match[1],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),this.addShadow(varName)}new Wikifier(this.output,this.payload[0].contents)}finally{this.shadows.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}),Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("unset",{skipArgs:!0,jsVarRe:new RegExp("State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");for(var match,jsVarRe=this.self.jsVarRe;null!==(match=jsVarRe.exec(this.args.full));){var store=State[match[1]],name=match[2];store.hasOwnProperty(name)&&delete store[name]}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remember",{skipArgs:!0,jsVarRe:new RegExp("State\\.variables\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}for(var match,remember=storage.get("remember")||{},jsVarRe=this.self.jsVarRe;null!==(match=jsVarRe.exec(this.args.full));){var name=match[1];remember[name]=State.variables[name]}if(!storage.set("remember",remember))return this.error("unknown error, cannot remember: ".concat(this.args.raw));Config.debug&&this.debugView.modes({hidden:!0})},init:function(){var remember=storage.get("remember");remember&&Object.keys(remember).forEach((function(name){return State.variables[name]=remember[name]}))}}),Macro.add("forget",{skipArgs:!0,jsVarRe:new RegExp("State\\.variables\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no story variable list specified");for(var match,remember=storage.get("remember"),jsVarRe=this.self.jsVarRe,needStore=!1;null!==(match=jsVarRe.exec(this.args.full));){var name=match[1];State.variables.hasOwnProperty(name)&&delete State.variables[name],remember&&remember.hasOwnProperty(name)&&(needStore=!0,delete remember[name])}if(needStore)if(0===Object.keys(remember).length){if(!storage.delete("remember"))return this.error("unknown error, cannot update remember store")}else if(!storage.set("remember",remember))return this.error("unknown error, cannot update remember store");Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("run","set"),Macro.add("script",{skipArgs:!0,tags:null,handler:function(){var output=document.createDocumentFragment();try{Scripting.evalJavaScript(this.payload[0].contents,output)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}Config.debug&&this.createDebugView(),output.hasChildNodes()&&this.output.appendChild(output)}}),Macro.add("include",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?(Config.debug&&this.debugView.modes({block:!0}),passage=Story.get(passage),void(this.args[1]?jQuery(document.createElement(this.args[1])).addClass("".concat(passage.domId," macro-").concat(this.name)).attr("data-passage",passage.title).appendTo(this.output):jQuery(this.output)).wiki(passage.processText())):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var result=stringFrom(Scripting.evalJavaScript(this.args.full));null!==result&&new Wikifier(this.output,"-"===this.name?Util.escape(result):result)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}}}),Macro.add("silently",{skipArgs:!0,tags:null,handler:function(){var frag=document.createDocumentFragment();if(new Wikifier(frag,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({block:!0,hidden:!0}),this.output.appendChild(frag);else{var errList=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent}));if(errList.length>0)return this.error("error".concat(1===errList.length?"":"s"," within contents (").concat(errList.join("; "),")"))}}}),Macro.add("type",{isAsync:!0,tags:null,typeId:0,handler:function(){if(0===this.args.length)return this.error("no speed specified");var cursor,speed=Util.fromCssTime(this.args[0]);if(speed<0)return this.error("speed time value must be non-negative (received: ".concat(this.args[0],")"));for(var elClass="",elId="",elTag="div",skipKey=Config.macros.typeSkipKey,start=400,options=this.args.slice(1);options.length>0;){var option=options.shift();switch(option){case"class":if(0===options.length)return this.error("class option missing required class name(s)");if(""===(elClass=options.shift()))throw new Error('class option class name(s) must be non-empty (received: "")');break;case"element":if(0===options.length)return this.error("element option missing required element tag name");if(""===(elTag=options.shift()))throw new Error('element option tag name must be non-empty (received: "")');break;case"id":if(0===options.length)return this.error("id option missing required ID");if(""===(elId=options.shift()))throw new Error('id option ID must be non-empty (received: "")');break;case"keep":cursor="keep";break;case"none":cursor="none";break;case"skipkey":if(0===options.length)return this.error("skipkey option missing required key value");if(""===(skipKey=options.shift()))throw new Error('skipkey option key value must be non-empty (received: "")');break;case"start":if(0===options.length)return this.error("start option missing required time value");var value=options.shift();if((start=Util.fromCssTime(value))<0)throw new Error("start option time value must be non-negative (received: ".concat(value,")"));break;default:return this.error("unknown option: ".concat(option))}}var contents=this.payload[0].contents;if(""!==contents.trim()){Config.debug&&this.debugView.modes({block:!0});var className="macro-".concat(this.name),namespace=".".concat(className),$target=jQuery(document.createElement(elTag)).addClass("".concat(className," ").concat(className,"-target")).appendTo(this.output);TempState.macroTypeQueue||(TempState.macroTypeQueue=[],$(document).off(namespace).one(":passageinit".concat(namespace),(function(){return $(document).off(namespace)})));var startTyping=0===TempState.macroTypeQueue.length,selfId=++this.self.typeId;TempState.macroTypeQueue.push({id:selfId,handler:function(){var $wrapper=jQuery(document.createElement(elTag)).addClass(className);elId&&$wrapper.attr("id",elId),elClass&&$wrapper.addClass(elClass),new Wikifier($wrapper,contents);var passage=State.passage,turn=State.turns;if(!Config.macros.typeVisitedPassages&&State.passages.slice(0,-1).some((function(title){return title===passage}))||$wrapper.find(".error").length>0)return $target.replaceWith($wrapper),TempState.macroTypeQueue.shift(),void(TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().handler());var typer=new NodeTyper({targetNode:$wrapper.get(0),classNames:"none"===cursor?null:"".concat(className,"-cursor")});$target.replaceWith($wrapper);var keydownAndNS="keydown".concat(namespace),typingStopAndNS="".concat(":typingstop").concat(namespace);$(document).off(keydownAndNS).on(keydownAndNS,(function(ev){Util.scrubEventKey(ev.key)!==skipKey||ev.target!==document.body&&ev.target!==document.documentElement||(ev.preventDefault(),$(document).off(keydownAndNS),typer.finish())})).one(typingStopAndNS,(function(){TempState.macroTypeQueue&&(0===TempState.macroTypeQueue.length?jQuery.event.trigger(":typingcomplete"):TempState.macroTypeQueue.first().handler())}));var typeNode=function(){var typeNodeMember=function(typeIntervalId){State.passage===passage&&State.turns===turn&&typer.type()||(typeIntervalId&&clearInterval(typeIntervalId),TempState.macroTypeQueue&&TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().id===selfId&&TempState.macroTypeQueue.shift(),$wrapper.trigger(":typingstop"),$wrapper.addClass("".concat(className,"-done")),"keep"===cursor&&$wrapper.addClass("".concat(className,"-cursor")))};$wrapper.trigger(":typingstart"),typeNodeMember();var typeNodeMemberId=setInterval((function(){return typeNodeMember(typeNodeMemberId)}),speed)};start?setTimeout(typeNode,start):typeNode()}}),startTyping&&(Engine.isPlaying()?$(document).one(":passageend".concat(namespace),(function(){return TempState.macroTypeQueue.first().handler()})):TempState.macroTypeQueue.first().handler())}}}),Macro.add("display","include"),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],elseifWsRe:/^\s*if\b/i,ifAssignRe:/[^!=&^|<>*/%+-]=[^=>]/,handler:function(){var i;try{var len=this.payload.length,elseifWsRe=this.self.elseifWsRe,ifAssignRe=this.self.ifAssignRe;for(i=0;i<len;++i)if("else"===this.payload[i].name){if(this.payload[i].args.raw.length>0)return elseifWsRe.test(this.payload[i].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'.concat(i>0?" (#"+i+")":"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<else>> must be the final clause")}else{if(0===this.payload[i].args.full.length)return this.error("no conditional expression specified for <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#"+i+")":""));if(Config.macros.ifAssignmentError&&ifAssignRe.test(this.payload[i].args.full))return this.error("assignment operator found within <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#"+i+")":""," (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: ").concat(this.payload[i].args.raw))}var evalJavaScript=Scripting.evalJavaScript,success=!1;for(i=0;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"else"===this.payload[i].name||evalJavaScript(this.payload[i].args.full)){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!success,invalid:!success})}}catch(ex){return this.error("bad conditional expression in <<".concat(0===i?"if":"elseif",">> clause").concat(i>0?" (#"+i+")":"",": ").concat("object"===_typeof(ex)?ex.message:ex))}}}),Macro.add("switch",{skipArgs:["switch"],tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var i,result,len=this.payload.length;if(1===len)return this.error("no cases specified");for(i=1;i<len;++i)if("default"===this.payload[i].name){if(this.payload[i].args.length>0)return this.error("<<default>> does not accept values, invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<default>> must be the final case")}else if(0===this.payload[i].args.length)return this.error("no value(s) specified for <<".concat(this.payload[i].name,">> (#").concat(i,")"));try{result=Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}var debugView=this.debugView,success=!1;for(Config.debug&&debugView.modes({nonvoid:!1,hidden:!0}),i=1;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"default"===this.payload[i].name||this.payload[i].args.some((function(val){return val===result}))){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});debugView.modes({nonvoid:!1,hidden:!0,invalid:!success}),this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0,invalid:!success})}}}),Macro.add("for",{skipArgs:!0,tags:null,hasRangeRe:new RegExp("^\\S".concat(Patterns.anyChar,"*?\\s+range\\s+\\S").concat(Patterns.anyChar,"*?$")),rangeRe:new RegExp("^(?:State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")\\s*,\\s*)?State\\.(variables|temporary)\\.(").concat(Patterns.identifier,")\\s+range\\s+(\\S").concat(Patterns.anyChar,"*?)$")),threePartRe:/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/,forInRe:/^\S+\s+in\s+\S+/i,forOfRe:/^\S+\s+of\s+\S+/i,handler:function(){var argsStr=this.args.full.trim(),payload=this.payload[0].contents.replace(/\n$/,"");if(0===argsStr.length)this.self.handleFor.call(this,payload,null,!0,null);else if(this.self.hasRangeRe.test(argsStr)){var parts=argsStr.match(this.self.rangeRe);if(null===parts)return this.error("invalid range form syntax, format: [index ,] value range collection");this.self.handleForRange.call(this,payload,{type:parts[1],name:parts[2]},{type:parts[3],name:parts[4]},parts[5])}else{var init,condition,post;if(-1===argsStr.indexOf(";")){if(this.self.forInRe.test(argsStr))return this.error("invalid syntax, for…in is not supported; see: for…range");if(this.self.forOfRe.test(argsStr))return this.error("invalid syntax, for…of is not supported; see: for…range");condition=argsStr}else{var _parts=argsStr.match(this.self.threePartRe);if(null===_parts)return this.error("invalid 3-part conditional form syntax, format: [init] ; [condition] ; [post]");init=_parts[1],condition=_parts[2].trim(),post=_parts[3],0===condition.length&&(condition=!0)}this.self.handleFor.call(this,payload,init,condition,post)}},handleFor:function(payload,init,condition,post){var evalJavaScript=Scripting.evalJavaScript,first=!0,safety=Config.macros.maxLoopIterations;Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,init)try{evalJavaScript(init)}catch(ex){return this.error("bad init expression: ".concat("object"===_typeof(ex)?ex.message:ex))}for(;evalJavaScript(condition);){if(--safety<0)return this.error("exceeded configured maximum loop iterations (".concat(Config.macros.maxLoopIterations,")"));if(new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(post)try{evalJavaScript(post)}catch(ex){return this.error("bad post expression: ".concat("object"===_typeof(ex)?ex.message:ex))}}}catch(ex){return this.error("bad conditional expression: ".concat("object"===_typeof(ex)?ex.message:ex))}finally{TempState.break=null}},handleForRange:function(payload,indexVar,valueVar,rangeExp){var rangeList,first=!0;try{rangeList=this.self.toRangeList(rangeExp)}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});try{TempState.break=null;for(var i=0;i<rangeList.length;++i)if(indexVar.name&&(State[indexVar.type][indexVar.name]=rangeList[i][0]),State[valueVar.type][valueVar.name]=rangeList[i][1],new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}}catch(ex){return this.error("object"===_typeof(ex)?ex.message:ex)}finally{TempState.break=null}},toRangeList:function(rangeExp){var value,list,evalJavaScript=Scripting.evalJavaScript;try{value=evalJavaScript("{"===rangeExp[0]?"(".concat(rangeExp,")"):rangeExp)}catch(ex){if("object"!==_typeof(ex))throw new Error("bad range expression: ".concat(ex));throw ex.message="bad range expression: ".concat(ex.message),ex}switch(_typeof(value)){case"string":list=[];for(var i=0;i<value.length;){var obj=Util.charAndPosAt(value,i);list.push([i,obj.char]),i=1+obj.end}break;case"object":if(Array.isArray(value))list=value.map((function(val,i){return[i,val]}));else if(value instanceof Set)list=_toConsumableArray(value).map((function(val,i){return[i,val]}));else if(value instanceof Map)list=_toConsumableArray(value.entries());else{if("Object"!==Util.toStringTag(value))throw new Error("unsupported range expression type: ".concat(Util.toStringTag(value)));list=Object.keys(value).map((function(key){return[key,value[key]]}))}break;default:throw new Error("unsupported range expression type: ".concat(_typeof(value)))}return list}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){if(!this.contextHas((function(ctx){return"for"===ctx.name})))return this.error("must only be used in conjunction with its parent macro <<for>>");TempState.break="continue"===this.name?1:2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["button","link"],{isAsync:!0,tags:null,handler:function(){var _this15=this;if(0===this.args.length)return this.error("no ".concat("button"===this.name?"button":"link"," text specified"));var passage,$link=jQuery(document.createElement("button"===this.name?"button":"a"));if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var $image=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo($link);$link.addClass("link-image"),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link}else $link.append(document.createTextNode(this.args[0].text)),passage=this.args[0].link;else $link.wikiWithOptions({profile:"core"},this.args[0]),passage=this.args.length>1?this.args[1]:undefined;null!=passage?($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken")):$link.addClass("link-internal"),$link.addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:null!=passage?"link":"button",one:null!=passage},this.createShadowWrapper(""!==this.payload[0].contents?function(){return Wikifier.wikifyEval(_this15.payload[0].contents.trim())}:null,null!=passage?function(){return Engine.play(passage)}:null)).appendTo(this.output)}}),Macro.add("checkbox",{isAsync:!0,handler:function(){if(this.args.length<3){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("unchecked value"),this.args.length<3&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),uncheckValue=this.args[1],checkValue=this.args[2],el=document.createElement("input");switch(jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:"checkbox",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,this.checked?checkValue:uncheckValue)}))).appendTo(this.output),this.args[3]){case"autocheck":State.getVar(varName)===checkValue?el.checked=!0:State.setVar(varName,uncheckValue);break;case"checked":el.checked=!0,State.setVar(varName,checkValue);break;default:State.setVar(varName,uncheckValue)}}}),Macro.add(["cycle","listbox"],{isAsync:!0,skipArgs:["optionsfrom"],tags:["option","optionsfrom"],handler:function(){var _this16=this;if(0===this.args.length)return this.error("no variable name specified");if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),len=this.payload.length;if(1===len)return this.error("no options specified");for(var config={autoselect:!1,once:!1},i=1;i<this.args.length;++i){var arg=this.args[i];switch(arg){case"once":config.once=!0;break;case"autoselect":config.autoselect=!0;break;default:return this.error("unknown argument: ".concat(arg))}}for(var options=[],tagCount={option:0,optionsfrom:0},selectedIdx=-1,_i5=1;_i5<len;++_i5){var payload=this.payload[_i5];if("option"===payload.name){if(++tagCount.option,0===payload.args.length)return this.error("no arguments specified for <<".concat(payload.name,">> (#").concat(tagCount.option,")"));var option={label:String(payload.args[0])},isSelected=!1;switch(payload.args.length){case 1:option.value=payload.args[0];break;case 2:"selected"===payload.args[1]?(option.value=payload.args[0],isSelected=!0):option.value=payload.args[1];break;default:option.value=payload.args[1],"selected"===payload.args[2]&&(isSelected=!0)}if(options.push(option),isSelected){if(config.autoselect)return this.error("cannot specify both the autoselect and selected keywords");if(-1!==selectedIdx)return this.error("multiple selected keywords specified for <<".concat(payload.name,">> (#").concat(selectedIdx+1," & #").concat(tagCount.option,")"));selectedIdx=options.length-1}}else{var _ret=function(){if(++tagCount.optionsfrom,0===payload.args.full.length)return{v:_this16.error("no expression specified for <<".concat(payload.name,">> (#").concat(tagCount.optionsfrom,")"))};var result=void 0;try{var exp=payload.args.full;result=Scripting.evalJavaScript("{"===exp[0]?"(".concat(exp,")"):exp)}catch(ex){return{v:_this16.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}}if("object"!==_typeof(result)||null===result)return{v:_this16.error("expression must yield a supported collection or generic object (type: ".concat(null===result?"null":_typeof(result),")"))};if(result instanceof Array||result instanceof Set)result.forEach((function(val){return options.push({label:String(val),value:val})}));else if(result instanceof Map)result.forEach((function(val,key){return options.push({label:String(key),value:val})}));else{var oType=Util.toStringTag(result);if("Object"!==oType)return{v:_this16.error("expression must yield a supported collection or generic object (object type: ".concat(oType,")"))};Object.keys(result).forEach((function(key){return options.push({label:key,value:result[key]})}))}}();if("object"===_typeof(_ret))return _ret.v}}if(-1===selectedIdx)if(config.autoselect){var sameValueZero=Util.sameValueZero,curValue=State.getVar(varName),curValueIdx=options.findIndex((function(opt){return sameValueZero(opt.value,curValue)}));selectedIdx=-1===curValueIdx?0:curValueIdx}else selectedIdx=0;if("cycle"===this.name){var lastIdx=options.length-1;if(config.once&&selectedIdx===lastIdx)jQuery(this.output).wikiWithOptions({profile:"core"},options[selectedIdx].label);else{var cycleIdx=selectedIdx;jQuery(document.createElement("a")).wikiWithOptions({profile:"core"},options[selectedIdx].label).attr("id","".concat(this.name,"-").concat(varId)).addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:"button"},this.createShadowWrapper((function(){var $this=$(this);cycleIdx=(cycleIdx+1)%options.length,State.setVar(varName,options[cycleIdx].value),$this.empty().wikiWithOptions({profile:"core"},options[cycleIdx].label),config.once&&cycleIdx===lastIdx&&$this.off().contents().unwrap()}))).appendTo(this.output)}}else{var $select=jQuery(document.createElement("select"));options.forEach((function(opt,i){jQuery(document.createElement("option")).val(i).text(opt.label).appendTo($select)})),$select.attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),tabindex:0}).addClass("macro-".concat(this.name)).val(selectedIdx).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,options[Number(this.value)].value)}))).appendTo(this.output)}State.setVar(varName,options[selectedIdx].value)}}),Macro.add(["linkappend","linkprepend","linkreplace"],{isAsync:!0,tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this17=this;if(0===this.args.length)return this.error("no link text specified");var $link=jQuery(document.createElement("a")),$insert=jQuery(document.createElement("span")),transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]);$link.wikiWithOptions({profile:"core"},this.args[0]).addClass("link-internal macro-".concat(this.name)).ariaClick({namespace:".macros",one:!0},this.createShadowWrapper((function(){if("linkreplace"===_this17.name?$link.remove():$link.wrap('<span class="macro-'.concat(_this17.name,'"></span>')).replaceWith((function(){return $link.html()})),""!==_this17.payload[0].contents){var frag=document.createDocumentFragment();new Wikifier(frag,_this17.payload[0].contents),$insert.append(frag)}transition&&setTimeout((function(){return $insert.removeClass("macro-".concat(_this17.name,"-in"))}),Engine.minDomActionDelay)}))).appendTo(this.output),$insert.addClass("macro-".concat(this.name,"-insert")),transition&&$insert.addClass("macro-".concat(this.name,"-in")),"linkprepend"===this.name?$insert.insertBefore($link):$insert.insertAfter($link)}}),Macro.add(["numberbox","textbox"],{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var asNumber="numberbox"===this.name,defaultValue=asNumber?Number(this.args[1]):this.args[1];if(asNumber&&Number.isNaN(defaultValue))return this.error('default value "'.concat(this.args[1],'" is neither a number nor can it be parsed into a number'));var passage,varId=Util.slugify(varName),el=document.createElement("input"),autofocus=!1;this.args.length>3?(passage=this.args[2],autofocus="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?autofocus=!0:passage=this.args[2]),"object"===_typeof(passage)&&(passage=passage.link),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:asNumber?"number":"text",inputmode:asNumber?"decimal":"text",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,asNumber?Number(this.value):this.value)}))).on("keypress.macros",this.createShadowWrapper((function(ev){13===ev.which&&(ev.preventDefault(),State.setVar(varName,asNumber?Number(this.value):this.value),null!=passage&&Engine.play(passage))}))).appendTo(this.output),asNumber&&(el.step="any"),State.setVar(varName,defaultValue),el.value=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:".concat(el.id)]=function(task){delete postdisplay[task],setTimeout((function(){return el.focus()}),Engine.minDomActionDelay)})}}),Macro.add("radiobutton",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),checkValue=this.args[1],el=document.createElement("input");switch(TempState.hasOwnProperty(this.name)||(TempState[this.name]={}),TempState[this.name].hasOwnProperty(varId)||(TempState[this.name][varId]=0),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId,"-").concat(TempState[this.name][varId]++),name:"".concat(this.name,"-").concat(varId),type:"radio",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){this.checked&&State.setVar(varName,checkValue)}))).appendTo(this.output),this.args[2]){case"autocheck":State.getVar(varName)===checkValue&&(el.checked=!0);break;case"checked":el.checked=!0,State.setVar(varName,checkValue)}}}),Macro.add("textarea",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var varId=Util.slugify(varName),defaultValue=this.args[1],autofocus="autofocus"===this.args[2],el=document.createElement("textarea");jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),rows:4,tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,this.value)}))).appendTo(this.output),State.setVar(varName,defaultValue),el.textContent=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:".concat(el.id)]=function(task){delete postdisplay[task],setTimeout((function(){return el.focus()}),Engine.minDomActionDelay)})}}),Macro.add("click","link"),Macro.add("actions",{handler:function(){for(var $list=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output),i=0;i<this.args.length;++i){var passage=void 0,text=void 0,$image=void 0,setFn=void 0;if("object"===_typeof(this.args[i])?this.args[i].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[i].source),this.args[i].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[i].passage),this.args[i].hasOwnProperty("title")&&$image.attr("title",this.args[i].title),this.args[i].hasOwnProperty("align")&&$image.attr("align",this.args[i].align),passage=this.args[i].link,setFn=this.args[i].setFn):(text=this.args[i].text,passage=this.args[i].link,setFn=this.args[i].setFn):text=passage=this.args[i],!(State.variables.hasOwnProperty("#actions")&&State.variables["#actions"].hasOwnProperty(passage)&&State.variables["#actions"][passage])){var $link=jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo($list),passage,null,function(passage,fn){return function(){State.variables.hasOwnProperty("#actions")||(State.variables["#actions"]={}),State.variables["#actions"][passage]=!0,"function"==typeof fn&&fn()}}(passage,setFn))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text));$image&&$link.addClass("link-image")}}}}),Macro.add(["back","return"],{handler:function(){if(this.args.length>1)return this.error("too many arguments specified, check the documentation for details");var passage,text,$image,$link,momentIndex=-1;if(1===this.args.length&&("object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(passage=this.args[0].link)):(1===this.args[0].count||(text=this.args[0].text),passage=this.args[0].link):1===this.args.length&&(text=this.args[0])),null==passage){for(var i=State.length-2;i>=0;--i)if(State.history[i].title!==State.passage){momentIndex=i,passage=State.history[i].title;break}if(null==passage&&"return"===this.name)for(var _i6=State.expired.length-1;_i6>=0;--_i6)if(State.expired[_i6]!==State.passage){passage=State.expired[_i6];break}}else{if(!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));if("back"===this.name){for(var _i7=State.length-2;_i7>=0;--_i7)if(State.history[_i7].title===passage){momentIndex=_i7;break}if(-1===momentIndex)return this.error('cannot find passage "'.concat(passage,'" in the current story history'))}}if(null==passage)return this.error("cannot find passage");"back"!==this.name||-1!==momentIndex?($link=jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(passage)}:function(){return Engine.goTo(momentIndex)}),$image&&$link.addClass("link-image")):$link=jQuery(document.createElement("span")).addClass("link-disabled"),$link.addClass("macro-".concat(this.name)).append($image||document.createTextNode(text||L10n.get("macro".concat(this.name.toUpperFirst(),"Text")))).appendTo(this.output)}}),Macro.add("choice",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var passage,text,$image,setFn,$link,choiceId=State.passage;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link,setFn=this.args[0].setFn):(text=this.args[0].text,passage=this.args[0].link,setFn=this.args[0].setFn):text=passage=this.args[0]:(passage=this.args[0],text=this.args[1]),State.variables.hasOwnProperty("#choice")&&State.variables["#choice"].hasOwnProperty(choiceId)&&State.variables["#choice"][choiceId])return $link=jQuery(document.createElement("span")).addClass("link-disabled macro-".concat(this.name)).attr("tabindex",-1).append($image||document.createTextNode(text)).appendTo(this.output),void($image&&$link.addClass("link-image"));$link=jQuery(Wikifier.createInternalLink(this.output,passage,null,(function(){State.variables.hasOwnProperty("#choice")||(State.variables["#choice"]={}),State.variables["#choice"][choiceId]=!0,"function"==typeof setFn&&setFn()}))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text)),$image&&$link.addClass("link-image")}}),Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("selector"),this.args.length<2&&errors.push("class names"),this.error("no ".concat(errors.join(" or ")," specified"))}var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));switch(this.name){case"addclass":$targets.addClass(this.args[1].trim());break;case"toggleclass":$targets.toggleClass(this.args[1].trim())}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));this.args.length>1?$targets.removeClass(this.args[1].trim()):$targets.removeClass(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));jQuery(this.output).append($targets.html()),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["append","prepend","replace"],{tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this18=this;if(0===this.args.length)return this.error("no selector specified");var $insert,$targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));if(""!==this.payload[0].contents)switch(this.args.length>1&&this.self.t8nRe.test(this.args[1])?(($insert=jQuery(document.createElement("span"))).addClass("macro-".concat(this.name,"-insert macro-").concat(this.name,"-in")),setTimeout((function(){return $insert.removeClass("macro-".concat(_this18.name,"-in"))}),Engine.minDomActionDelay)):$insert=jQuery(document.createDocumentFragment()),$insert.wiki(this.payload[0].contents),this.name){case"replace":$targets.empty();case"append":$targets.append($insert);break;case"prepend":$targets.prepend($insert)}else"replace"===this.name&&$targets.empty();Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));$targets.remove(),Config.debug&&this.debugView.modes({hidden:!0})}}),Has.audio){var errorOnePlaybackAction=function(cur,prev){return'only one playback action allowed per invocation, "'.concat(cur,'" cannot be combined with "').concat(prev,'"')};Macro.add("audio",{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track and/or group IDs"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var selected;try{selected=SimpleAudio.select(this.args[0])}catch(ex){return this.error(ex.message)}for(var action,fadeTo,loop,mute,passage,time,volume,args=this.args.slice(1),fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors=[];return args.length<1&&_errors.push("seconds"),args.length<2&&_errors.push("level"),this.error("fadeoverto missing required ".concat(_errors.join(" and ")," value").concat(_errors.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"time":if(0===args.length)return this.error("time missing required seconds value");if(raw=args.shift(),time=Number.parseFloat(raw),Number.isNaN(time)||!Number.isFinite(time))return this.error("cannot parse time: ".concat(raw));break;case"loop":case"unloop":loop="loop"===arg;break;case"goto":if(0===args.length)return this.error("goto missing required passage title");if(raw=args.shift(),passage="object"===_typeof(raw)?raw.link:raw,!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));break;default:return this.error("unknown action: ".concat(arg))}}try{if(null!=volume&&selected.volume(volume),null!=time&&selected.time(time),null!=mute&&selected.mute(mute),null!=loop&&selected.loop(loop),null!=passage){var nsEnded="ended.macros.macro-".concat(this.name,"_goto");selected.off(nsEnded).one(nsEnded,(function(){selected.off(nsEnded),Engine.play(passage)}))}switch(action){case"fade":selected.fade(fadeOver,fadeTo);break;case"load":selected.load();break;case"pause":selected.pause();break;case"play":selected.playWhenAllowed();break;case"stop":selected.stop();break;case"unload":selected.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("cacheaudio",{handler:function(){var _this19=this;if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track ID"),this.args.length<2&&errors.push("sources"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim(),oldFmtRe=/^format:\s*([\w-]+)\s*;\s*/i;try{SimpleAudio.tracks.add(id,this.args.slice(1).map((function(source){if(oldFmtRe.test(source)){if(Config.debug)return _this19.error('track ID "'.concat(id,'": format specifier migration required, "format:formatId;" → "formatId|"'));source=source.replace(oldFmtRe,"$1|")}return source})))}catch(ex){return this.error(ex.message)}if(Config.debug&&!SimpleAudio.tracks.get(id).hasSource())return this.error('track ID "'.concat(id,'": no supported audio sources found'));Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("createaudiogroup",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no group ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var groupId=String(this.args[0]).trim(),trackIds=[],i=1,len=this.payload.length;i<len;++i){if(this.payload[i].args.length<1)return this.error("no track ID specified");trackIds.push(String(this.payload[i].args[0]).trim()),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.groups.add(groupId,trackIds)}catch(ex){return this.error(ex.message)}Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("createplaylist",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no list ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");var playlist=Macro.get("playlist");if(null!==playlist.from&&"createplaylist"!==playlist.from)return this.error("a playlist has already been defined with <<setplaylist>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var listId=String(this.args[0]).trim(),trackObjs=[],i=1,len=this.payload.length;i<len;++i){if(0===this.payload[i].args.length)return this.error("no track ID specified");for(var trackObj={id:String(this.payload[i].args[0]).trim()},args=this.payload[i].args.slice(1);args.length>0;){var arg=args.shift(),raw=void 0,parsed=void 0;switch(arg){case"copy":case"own":trackObj.own=!0;break;case"rate":args.length>0&&args.shift();break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),parsed=Number.parseFloat(raw),Number.isNaN(parsed)||!Number.isFinite(parsed))return this.error("cannot parse volume: ".concat(raw));trackObj.volume=parsed;break;default:return this.error("unknown action: ".concat(arg))}}trackObjs.push(trackObj),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.lists.add(listId,trackObjs)}catch(ex){return this.error(ex.message)}null===playlist.from&&(playlist.from="createplaylist"),Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var action,mute,muteOnHide,volume,args=this.args.slice(0);args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"mute":case"unmute":mute="mute"===arg;break;case"muteonhide":case"nomuteonhide":muteOnHide="muteonhide"===arg;break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=mute&&SimpleAudio.mute(mute),null!=muteOnHide&&SimpleAudio.muteOnHidden(muteOnHide),null!=volume&&SimpleAudio.volume(volume),action){case"load":SimpleAudio.load();break;case"stop":SimpleAudio.stop();break;case"unload":SimpleAudio.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("playlist",{from:null,handler:function(){var list,args,action,from=this.self.from;if(null===from)return this.error("no playlists have been created");if("createplaylist"===from){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("list ID"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));list=SimpleAudio.lists.get(id),args=this.args.slice(1)}else{if(0===this.args.length)return this.error("no actions specified");list=SimpleAudio.lists.get("setplaylist"),args=this.args.slice(0)}for(var fadeTo,loop,mute,shuffle,volume,fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"skip":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors2=[];return args.length<1&&_errors2.push("seconds"),args.length<2&&_errors2.push("level"),this.error("fadeoverto missing required ".concat(_errors2.join(" and ")," value").concat(_errors2.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"loop":case"unloop":loop="loop"===arg;break;case"shuffle":case"unshuffle":shuffle="shuffle"===arg;break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=volume&&list.volume(volume),null!=mute&&list.mute(mute),null!=loop&&list.loop(loop),null!=shuffle&&list.shuffle(shuffle),action){case"fade":list.fade(fadeOver,fadeTo);break;case"load":list.load();break;case"pause":list.pause();break;case"play":list.playWhenAllowed();break;case"skip":list.skip();break;case"stop":list.stop();break;case"unload":list.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("removeaudiogroup",{handler:function(){if(0===this.args.length)return this.error("no group ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.groups.has(id))return this.error('group "'.concat(id,'" does not exist'));SimpleAudio.groups.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeplaylist",{handler:function(){if(0===this.args.length)return this.error("no list ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));SimpleAudio.lists.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("waitforaudio",{skipArgs:!0,handler:function(){SimpleAudio.loadWithScreen()}}),Macro.add("setplaylist",{handler:function(){if(0===this.args.length)return this.error("no track ID(s) specified");var playlist=Macro.get("playlist");if(null!==playlist.from&&"setplaylist"!==playlist.from)return this.error("playlists have already been defined with <<createplaylist>>");try{SimpleAudio.lists.add("setplaylist",this.args.slice(0))}catch(ex){return this.error(ex.message)}null===playlist.from&&(playlist.from="setplaylist"),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("stopallaudio",{skipArgs:!0,handler:function(){SimpleAudio.select(":all").stop(),Config.debug&&this.debugView.modes({hidden:!0})}})}else Macro.add(["audio","cacheaudio","createaudiogroup","createplaylist","masteraudio","playlist","removeaudiogroup","removeplaylist","waitforaudio","setplaylist","stopallaudio"],{skipArgs:!0,handler:function(){Config.debug&&this.debugView.modes({hidden:!0})}});Macro.add("done",{skipArgs:!0,tags:null,handler:function(){var contents=this.payload[0].contents.trim();""!==contents&&setTimeout(this.createShadowWrapper((function(){return $.wiki(contents)})),Engine.minDomActionDelay)}}),Macro.add("goto",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?void setTimeout((function(){return Engine.play(passage)}),Engine.minDomActionDelay):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("repeat",{isAsync:!0,tags:null,timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){var delay,_this20=this;if(0===this.args.length)return this.error("no time value specified");try{delay=Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0]))}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerInterval(this.createShadowWrapper((function(){var frag=document.createDocumentFragment();new Wikifier(frag,_this20.payload[0].contents);var $output=$wrapper;transition&&($output=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-repeat-in")}),Engine.minDomActionDelay)})),delay)},registerInterval:function(callback,delay){var _this21=this;if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null;timerId=setInterval((function(){if(State.passage!==passage||State.turns!==turn)return clearInterval(timerId),void timers.delete(timerId);var timerIdCache;try{TempState.break=null,TempState.hasOwnProperty("repeatTimerId")&&(timerIdCache=TempState.repeatTimerId),TempState.repeatTimerId=timerId,callback.call(_this21)}finally{void 0!==timerIdCache?TempState.repeatTimerId=timerIdCache:delete TempState.repeatTimerId,TempState.break=null}}),delay),timers.add(timerId),prehistory.hasOwnProperty("#repeat-timers-cleanup")||(prehistory["#repeat-timers-cleanup"]=function(task){delete prehistory[task],timers.forEach((function(timerId){return clearInterval(timerId)})),timers.clear()})}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!TempState.hasOwnProperty("repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var timers=Macro.get("repeat").timers,timerId=TempState.repeatTimerId;clearInterval(timerId),timers.delete(timerId),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("timed",{isAsync:!0,tags:["next"],timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var i,items=[];try{items.push({name:this.name,source:this.source,delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0])),content:this.payload[0].contents})}catch(ex){return this.error("".concat(ex.message," in <<timed>>"))}if(this.payload.length>1)try{var len;for(i=1,len=this.payload.length;i<len;++i)items.push({name:this.payload[i].name,source:this.payload[i].source,delay:0===this.payload[i].args.length?items[items.length-1].delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.payload[i].args[0])),content:this.payload[i].contents})}catch(ex){return this.error("".concat(ex.message," in <<next>> (#").concat(i,")"))}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerTimeout(this.createShadowWrapper((function(item){var frag=document.createDocumentFragment();new Wikifier(frag,item.content);var $output=$wrapper;Config.debug&&"next"===item.name&&($output=jQuery(new DebugView($output[0],"macro",item.name,item.source).output)),transition&&($output=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-timed-in")}),Engine.minDomActionDelay)})),items)},registerTimeout:function(callback,items){if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null,nextItem=items.shift();timerId=setTimeout((function worker(){if(timers.delete(timerId),State.passage===passage&&State.turns===turn){var curItem=nextItem;null!=(nextItem=items.shift())&&(timerId=setTimeout(worker,nextItem.delay),timers.add(timerId)),callback.call(this,curItem)}}),nextItem.delay),timers.add(timerId),prehistory.hasOwnProperty("#timed-timers-cleanup")||(prehistory["#timed-timers-cleanup"]=function(task){delete prehistory[task],timers.forEach((function(timerId){return clearTimeout(timerId)})),timers.clear()})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var widgetCode,widgetName=this.args[0],isNonVoid=this.args.length>1&&"container"===this.args[1];if(Macro.has(widgetName)){if(!Macro.get(widgetName).isWidget)return this.error('cannot clobber existing macro "'.concat(widgetName,'"'));Macro.delete(widgetName)}try{var widgetDef={isWidget:!0,handler:(widgetCode=this.payload[0].contents,function(){var shadowStore={};State.temporary.hasOwnProperty("args")&&(shadowStore._args=State.temporary.args),State.temporary.args=_toConsumableArray(this.args),State.temporary.args.raw=this.args.raw,State.temporary.args.full=this.args.full,this.addShadow("_args"),isNonVoid&&(State.temporary.hasOwnProperty("contents")&&(shadowStore._contents=State.temporary.contents),State.temporary.contents=this.payload[0].contents,this.addShadow("_contents")),State.variables.hasOwnProperty("args")&&(shadowStore.$args=State.variables.args),State.variables.args=State.temporary.args,this.addShadow("$args");try{var resFrag=document.createDocumentFragment(),errList=[];if(new Wikifier(resFrag,widgetCode),Array.from(resFrag.querySelectorAll(".error")).forEach((function(errEl){errList.push(errEl.textContent)})),0!==errList.length)return this.error("error".concat(errList.length>1?"s":""," within widget code (").concat(errList.join("; "),")"));this.output.appendChild(resFrag)}catch(ex){return this.error("cannot execute widget: ".concat(ex.message))}finally{shadowStore.hasOwnProperty("_args")?State.temporary.args=shadowStore._args:delete State.temporary.args,isNonVoid&&(shadowStore.hasOwnProperty("_contents")?State.temporary.contents=shadowStore._contents:delete State.temporary.contents),shadowStore.hasOwnProperty("$args")?State.variables.args=shadowStore.$args:delete State.variables.args}})};isNonVoid&&(widgetDef.tags=[]),Macro.add(widgetName,widgetDef),Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error('cannot create widget macro "'.concat(widgetName,'": ').concat(ex.message))}}})}();var Dialog=function(){var _$overlay=null,_$dialog=null,_$dialogTitle=null,_$dialogBody=null,_lastActive=null,_scrollbarWidth=0,_dialogObserver=null;function dialogClose(ev){return _$dialogBody.trigger(":dialogclosing"),jQuery(document).off(".dialog-close"),_dialogObserver?(_dialogObserver.disconnect(),_dialogObserver=null):_$dialogBody.off(".dialog-resize"),jQuery(window).off(".dialog-resize"),_$dialog.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),_$overlay.removeClass("open"),jQuery(document.documentElement).removeAttr("data-dialog"),_$dialogTitle.empty(),_$dialogBody.empty().removeClass(),null!==_lastActive&&(jQuery(_lastActive).focus(),_lastActive=null),ev&&ev.data&&"function"==typeof ev.data.closeFn&&ev.data.closeFn(ev),_$dialogBody.trigger(":dialogclose"),_$dialogBody.trigger(":dialogclosed"),Dialog}function dialogIsOpen(classNames){return _$dialog.hasClass("open")&&(!classNames||classNames.splitOrEmpty(/\s+/).every((function(cn){return _$dialogBody.hasClass(cn)})))}function dialogOpen(options,closeFn){_$dialogBody.trigger(":dialogopening");var top=jQuery.extend({top:50},options).top;return dialogIsOpen()||(_lastActive=safeActiveElement()),jQuery(document.documentElement).attr("data-dialog","open"),_$overlay.addClass("open"),null!==_$dialogBody[0].querySelector("img")&&_$dialogBody.imagesLoaded().always((function(){return _resizeHandler({data:{top:top}})})),jQuery("body>:not(script,#store-area,tw-storydata,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0),_$dialog.css(_calcPosition(top)).addClass("open").focus(),jQuery(window).on("resize.dialog-resize",null,{top:top},jQuery.throttle(40,_resizeHandler)),Has.mutationObserver?(_dialogObserver=new MutationObserver((function(mutations){for(var i=0;i<mutations.length;++i)if("childList"===mutations[i].type){_resizeHandler({data:{top:top}});break}}))).observe(_$dialogBody[0],{childList:!0,subtree:!0}):_$dialogBody.on("DOMNodeInserted.dialog-resize DOMNodeRemoved.dialog-resize",null,{top:top},jQuery.throttle(40,_resizeHandler)),jQuery(document).one("click.dialog-close",".ui-close",{closeFn:closeFn},(function(ev){dialogClose(ev)})).one("keypress.dialog-close",".ui-close",(function(ev){13!==ev.which&&32!==ev.which||jQuery(this).trigger("click")})),_$dialogBody.trigger(":dialogopen"),_$dialogBody.trigger(":dialogopened"),Dialog}function _calcPosition(topPos){var top=null!=topPos?topPos:50,$parent=jQuery(window),dialogPos={left:"",right:"",top:"",bottom:""};_$dialog.css(dialogPos);var horzSpace=$parent.width()-_$dialog.outerWidth(!0)-1,vertSpace=$parent.height()-_$dialog.outerHeight(!0)-1;return horzSpace<=32+_scrollbarWidth&&(vertSpace-=_scrollbarWidth),vertSpace<=32+_scrollbarWidth&&(horzSpace-=_scrollbarWidth),dialogPos.left=dialogPos.right=horzSpace<=32?16:horzSpace/2>>0,dialogPos.top=vertSpace<=32?dialogPos.bottom=16:vertSpace/2>top?top:dialogPos.bottom=vertSpace/2>>0,Object.keys(dialogPos).forEach((function(key){""!==dialogPos[key]&&(dialogPos[key]+="px")})),dialogPos}function _resizeHandler(ev){var top=ev&&ev.data&&void 0!==ev.data.top?ev.data.top:50;"block"===_$dialog.css("display")&&(_$dialog.css({display:"none"}),_$dialog.css(jQuery.extend({display:""},_calcPosition(top))))}return Object.freeze(Object.defineProperties({},{append:{value:function(){var _$dialogBody2;return(_$dialogBody2=_$dialogBody).append.apply(_$dialogBody2,arguments),Dialog}},body:{value:function(){return _$dialogBody.get(0)}},close:{value:dialogClose},init:{value:function(){if(!document.getElementById("ui-dialog")){_scrollbarWidth=function(){var scrollbarWidth;try{var inner=document.createElement("p"),outer=document.createElement("div");inner.style.width="100%",inner.style.height="200px",outer.style.position="absolute",outer.style.left="0px",outer.style.top="0px",outer.style.width="100px",outer.style.height="100px",outer.style.visibility="hidden",outer.style.overflow="hidden",outer.appendChild(inner),document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="auto";var w2=inner.offsetWidth;w1===w2&&(w2=outer.clientWidth),document.body.removeChild(outer),scrollbarWidth=w1-w2}catch(ex){}return scrollbarWidth||17}();var $elems=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1>'+'<button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'.concat(L10n.get("close"),'"></button>')+'</div><div id="ui-dialog-body"></div></div>');_$overlay=jQuery($elems.find("#ui-overlay").get(0)),_$dialog=jQuery($elems.find("#ui-dialog").get(0)),_$dialogTitle=jQuery($elems.find("#ui-dialog-title").get(0)),_$dialogBody=jQuery($elems.find("#ui-dialog-body").get(0)),$elems.insertBefore("body>script#script-sugarcube")}}},isOpen:{value:dialogIsOpen},open:{value:dialogOpen},resize:{value:function(data){return _resizeHandler("object"===_typeof(data)?{data:data}:undefined)}},setup:{value:function(title,classNames){return _$dialogBody.empty().removeClass(),null!=classNames&&_$dialogBody.addClass(classNames),_$dialogTitle.empty().append((null!=title?String(title):"")||" "),_$dialogBody.get(0)}},wiki:{value:function(){var _$dialogBody3;return(_$dialogBody3=_$dialogBody).wiki.apply(_$dialogBody3,arguments),Dialog}},addClickHandler:{value:function(targets,options,startFn,doneFn,closeFn){return jQuery(targets).ariaClick((function(ev){ev.preventDefault(),"function"==typeof startFn&&startFn(ev),dialogOpen(options,closeFn),"function"==typeof doneFn&&doneFn(ev)}))}}}))}(),Engine=function(){var States=Util.toEnum({Idle:"idle",Playing:"playing",Rendering:"rendering"}),_initDebugViews=[],_state=States.Idle,_lastPlay=null,_outlinePatch=null,_updating=null;function engineGo(offset){var succeded=State.go(offset);return succeded&&engineShow(),succeded}function engineShow(){return enginePlay(State.passage,!0)}function enginePlay(title,noHistory){var passageReadyOutput,passageDoneOutput,passageTitle=title;if(_state=States.Playing,TempState={},State.clearTemporary(),"function"==typeof Config.navigation.override)try{var overrideTitle=Config.navigation.override(passageTitle);overrideTitle&&(passageTitle=overrideTitle)}catch(ex){}var passage=Story.get(passageTitle);if(jQuery.event.trigger({type:":passageinit",passage:passage}),Object.keys(prehistory).forEach((function(task){"function"==typeof prehistory[task]&&prehistory[task].call(passage,task)})),noHistory||State.create(passage.title),document.body.className&&(document.body.className=""),_lastPlay=Util.now(),Object.keys(predisplay).forEach((function(task){"function"==typeof predisplay[task]&&predisplay[task].call(passage,task)})),Story.has("PassageReady"))try{passageReadyOutput=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(ex){console.error(ex),Alert.error("PassageReady",ex.message)}_state=States.Rendering;var dataTags=passage.tags.length>0?passage.tags.join(" "):null,passageEl=document.createElement("div");jQuery(passageEl).attr({id:passage.domId,"data-passage":passage.title,"data-tags":dataTags}).addClass("passage ".concat(passage.className)),jQuery(document.body).attr("data-tags",dataTags).addClass(passage.className),jQuery(document.documentElement).attr("data-tags",dataTags),jQuery.event.trigger({type:":passagestart",content:passageEl,passage:passage}),Object.keys(prerender).forEach((function(task){"function"==typeof prerender[task]&&prerender[task].call(passage,passageEl,task)})),Story.has("PassageHeader")&&new Wikifier(passageEl,Story.get("PassageHeader").processText()),passageEl.appendChild(passage.render()),Story.has("PassageFooter")&&new Wikifier(passageEl,Story.get("PassageFooter").processText()),jQuery.event.trigger({type:":passagerender",content:passageEl,passage:passage}),Object.keys(postrender).forEach((function(task){"function"==typeof postrender[task]&&postrender[task].call(passage,passageEl,task)}));var debugView,containerEl=document.getElementById("passages");if(containerEl.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&Has.transitionEndEvent?_toConsumableArray(containerEl.childNodes).forEach((function(outgoing){var $outgoing=jQuery(outgoing);if(outgoing.nodeType===Node.ELEMENT_NODE&&$outgoing.hasClass("passage")){if($outgoing.hasClass("passage-out"))return;$outgoing.attr({id:"out-".concat($outgoing.attr("id")),"aria-live":"off"}).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?$outgoing.on(Has.transitionEndEvent,(function(ev){ev.propertyName===Config.passages.transitionOut&&$outgoing.remove()})):setTimeout((function(){return $outgoing.remove()}),Math.max(40,Config.passages.transitionOut))}else $outgoing.remove()})):jQuery(containerEl).empty()),jQuery(passageEl).addClass("passage-in").appendTo(containerEl),setTimeout((function(){return jQuery(passageEl).removeClass("passage-in")}),40),Story.has("StoryDisplayTitle")?null===_updating&&Config.ui.updateStoryElements||setDisplayTitle(Story.get("StoryDisplayTitle").processText()):Config.passages.displayTitles&&passage.title!==Config.passages.start&&(document.title="".concat(passage.title," | ").concat(Story.title)),window.scroll(0,0),_state=States.Playing,Story.has("PassageDone"))try{passageDoneOutput=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(ex){console.error(ex),Alert.error("PassageDone",ex.message)}(jQuery.event.trigger({type:":passagedisplay",content:passageEl,passage:passage}),Object.keys(postdisplay).forEach((function(task){"function"==typeof postdisplay[task]&&postdisplay[task].call(passage,task)})),null!==_updating?_updating.forEach((function(pair){jQuery(pair.element).empty(),new Wikifier(pair.element,Story.get(pair.passage).processText().trim())})):Config.ui.updateStoryElements&&UIBar.update(),Config.debug)&&(null!=passageReadyOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady")).modes({hidden:!0}),debugView.append(passageReadyOutput),jQuery(passageEl).prepend(debugView.output)),null!=passageDoneOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone")).modes({hidden:!0}),debugView.append(passageDoneOutput),jQuery(passageEl).append(debugView.output)),1===State.turns&&_initDebugViews.length>0&&jQuery(passageEl).prepend(_initDebugViews));switch(jQuery("#story").find("a[href]:not(.link-external)").addClass("link-external").end().find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),_typeof(Config.saves.autosave)){case"boolean":Config.saves.autosave&&Save.autosave.save();break;case"object":passage.tags.some((function(tag){return Config.saves.autosave.includes(tag)}))&&Save.autosave.save();break;case"function":Config.saves.autosave()&&Save.autosave.save()}return jQuery.event.trigger({type:":passageend",content:passageEl,passage:passage}),_state=States.Idle,_lastPlay=Util.now(),passageEl}function _hideOutlines(){_outlinePatch.set("*:focus{outline:none;}")}return Object.freeze(Object.defineProperties({},{States:{value:States},minDomActionDelay:{value:40},init:{value:function(){var _lastOutlineEvent;jQuery("#init-no-js,#init-lacking").remove(),function(){var $elems=jQuery(document.createDocumentFragment()),markup=Story.has("StoryInterface")&&Story.get("StoryInterface").text.trim();if(markup){UIBar.destroy(),jQuery(document.head).find("#style-core-display").remove(),$elems.append(markup);var $passages=$elems.find("#passages");if(0===$passages.length)throw new Error('no element with ID "passages" found within "StoryInterface" special passage');$passages.empty().not("[aria-live]").attr("aria-live","polite").end(),$elems.find("[data-init-passage]").each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-init-passage" content attribute'));var passage=el.getAttribute("data-init-passage").trim();if(el.hasAttribute("data-passage"))throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> must not contain a "data-passage" content attribute'));if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&jQuery(el).empty().wiki(Story.get(passage).processText().trim())}));var updating=[];$elems.find("[data-passage]").each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-passage" content attribute'));var passage=el.getAttribute("data-passage").trim();if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&updating.push({passage:passage,element:el})})),updating.length>0&&(_updating=updating),Config.ui.updateStoryElements=!1}else $elems.append('<div id="story" role="main"><div id="passages" aria-live="polite"></div></div>');$elems.insertBefore("body>script#script-sugarcube")}(),_outlinePatch=new StyleWrapper(jQuery(document.createElement("style")).attr({id:"style-aria-outlines",type:"text/css"}).appendTo(document.head).get(0)),_hideOutlines(),jQuery(document).on("mousedown.aria-outlines keydown.aria-outlines",(function(ev){ev.type!==_lastOutlineEvent&&(_lastOutlineEvent=ev.type,"keydown"===ev.type?_outlinePatch.clear():_hideOutlines())}))}},start:{value:function(){if(Story.getAllInit().forEach((function(passage){try{var debugBuffer=Wikifier.wikifyEval(passage.text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","".concat(passage.title," [init-tagged]"),"".concat(passage.title," [init-tagged]"));debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("".concat(passage.title," [init-tagged]"),"object"===_typeof(ex)?ex.message:ex)}})),Story.has("StoryInit"))try{var debugBuffer=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("StoryInit","object"===_typeof(ex)?ex.message:ex)}if(null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'.concat(Config.passages.start,'") not found'));if(jQuery(document.documentElement).focus(),State.restore())engineShow();else{var loadStart=!0;switch(_typeof(Config.saves.autoload)){case"boolean":Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(loadStart=!Save.autosave.load());break;case"string":"prompt"===Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(loadStart=!1,UI.buildAutoload(),Dialog.open());break;case"function":Save.autosave.ok()&&Save.autosave.has()&&Config.saves.autoload()&&(loadStart=!Save.autosave.load())}loadStart&&enginePlay(Config.passages.start)}}},restart:{value:function(){LoadScreen.show(),window.scroll(0,0),State.reset(),jQuery.event.trigger(":enginerestart"),window.location.reload()}},state:{get:function(){return _state}},isIdle:{value:function(){return _state===States.Idle}},isPlaying:{value:function(){return _state!==States.Idle}},isRendering:{value:function(){return _state===States.Rendering}},lastPlay:{get:function(){return _lastPlay}},goTo:{value:function(idx){var succeded=State.goTo(idx);return succeded&&engineShow(),succeded}},go:{value:engineGo},backward:{value:function(){return engineGo(-1)}},forward:{value:function(){return engineGo(1)}},show:{value:engineShow},play:{value:enginePlay},display:{value:function(title,link,option){var noHistory=!1;switch(option){case undefined:break;case"replace":case"back":noHistory=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'.concat(option,'"; please notify the developer'))}enginePlay(title,noHistory)}}}))}(),Passage=(_tagsToSkip=/^(?:debug|nobr|passage|widget|twine\..*)$/i,function(){function Passage(title,el){var _this22=this;_classCallCheck(this,Passage),Object.defineProperties(this,{title:{value:Util.unescape(title)},element:{value:el||null},tags:{value:Object.freeze(el&&el.hasAttribute("tags")?Array.from(new Set(el.getAttribute("tags").trim().splitOrEmpty(/\s+/))):[])},_excerpt:{writable:!0,value:null}}),Object.defineProperties(this,{domId:{value:"passage-".concat(Util.slugify(this.title))},classes:{value:Object.freeze(0===this.tags.length?[]:_this22.tags.filter((function(tag){return!_tagsToSkip.test(tag)})).map((function(tag){return Util.slugify(tag)})))}})}return _createClass(Passage,[{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var passage=Util.escapeMarkup(this.title),mesg="".concat(L10n.get("errorTitle"),": ").concat(L10n.get("errorNonexistentPassage",{passage:passage}));return'<div class="error-view"><span class="error">'.concat(mesg,"</span></div>")}return this.element.textContent.replace(/\r/g,"")}},{key:"description",value:function(){var descriptions=Config.passages.descriptions;switch(_typeof(descriptions)){case"boolean":if(descriptions)return this.title;break;case"object":if(descriptions.hasOwnProperty(this.title))return descriptions[this.title];break;case"function":var result=descriptions.call(this);if(result)return result}return null===this._excerpt&&(this._excerpt=Passage.getExcerptFromText(this.text)),this._excerpt}},{key:"processText",value:function(){if(null==this.element)return this.text;if(this.tags.includes("Twine.image"))return"[img[".concat(this.text,"]]");var processed=this.text;return Config.passages.onProcess&&(processed=Config.passages.onProcess.call(null,{title:this.title,tags:this.tags,text:processed})),(Config.passages.nobr||this.tags.includes("nobr"))&&(processed=processed.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),processed}},{key:"render",value:function(options){var frag=document.createDocumentFragment();return new Wikifier(frag,this.processText(),options),this._excerpt=Passage.getExcerptFromNode(frag),frag}}],[{key:"getExcerptFromNode",value:function(node,count){if(!node.hasChildNodes())return"";var excerpt=node.textContent.trim();if(""!==excerpt){var excerptRe=new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count>0?count-1:7,"})"));excerpt=excerpt.replace(/\s+/g," ").match(excerptRe)}return excerpt?"".concat(excerpt[1],"…"):"…"}},{key:"getExcerptFromText",value:function(text,count){if(""===text)return"";var excerptRe=new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count>0?count-1:7,"})")),excerpt=text.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*?)(?:(?:\||->|<-)[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/'{2}|\/{2}|_{2}|@{2}/g,"").trim().replace(/\s+/g," ").match(excerptRe);return excerpt?"".concat(excerpt[1],"…"):"…"}}]),Passage}()),_tagsToSkip,Save=function(){var Type=Util.toEnum({Autosave:"autosave",Disk:"disk",Serialize:"serialize",Slot:"slot"}),_slotsUBound=-1,_onLoadHandlers=new Set,_onSaveHandlers=new Set;function savesObjGet(){var saves=storage.get("saves");return null===saves?{autosave:null,slots:_appendSlots([],Config.saves.slots)}:saves}function savesObjClear(){return storage.delete("saves"),!0}function autosaveOk(){return"cookie"!==storage.name&&void 0!==Config.saves.autosave}function slotsOk(){return"cookie"!==storage.name&&-1!==_slotsUBound}function slotsCount(){if(!slotsOk())return 0;for(var saves=savesObjGet(),count=0,i=0,iend=saves.slots.length;i<iend;++i)null!==saves.slots[i]&&++count;return count}function _appendSlots(array,num){for(var i=0;i<num;++i)array.push(null);return array}function _savesObjIsEmpty(saves){for(var slots=saves.slots,isSlotsEmpty=!0,i=0,iend=slots.length;i<iend;++i)if(null!==slots[i]){isSlotsEmpty=!1;break}return null===saves.autosave&&isSlotsEmpty}function _savesObjSave(saves){return _savesObjIsEmpty(saves)?(storage.delete("saves"),!0):storage.set("saves",saves)}function _savesObjUpdate(saveObj){if(null==saveObj||"object"!==_typeof(saveObj))return!1;var updated=!1;return saveObj.hasOwnProperty("state")&&saveObj.state.hasOwnProperty("delta")&&saveObj.state.hasOwnProperty("index")||(saveObj.hasOwnProperty("data")?(delete saveObj.mode,saveObj.state={delta:State.deltaEncode(saveObj.data)},delete saveObj.data):saveObj.state.hasOwnProperty("delta")?saveObj.state.hasOwnProperty("index")||delete saveObj.state.mode:(delete saveObj.state.mode,saveObj.state.delta=State.deltaEncode(saveObj.state.history),delete saveObj.state.history),saveObj.state.index=saveObj.state.delta.length-1,updated=!0),saveObj.state.hasOwnProperty("rseed")&&(saveObj.state.seed=saveObj.state.rseed,delete saveObj.state.rseed,saveObj.state.delta.forEach((function(_,i,delta){delta[i].hasOwnProperty("rcount")&&(delta[i].pull=delta[i].rcount,delete delta[i].rcount)})),updated=!0),(saveObj.state.hasOwnProperty("expired")&&"number"==typeof saveObj.state.expired||saveObj.state.hasOwnProperty("unique")||saveObj.state.hasOwnProperty("last"))&&(saveObj.state.hasOwnProperty("expired")&&"number"==typeof saveObj.state.expired&&delete saveObj.state.expired,(saveObj.state.hasOwnProperty("unique")||saveObj.state.hasOwnProperty("last"))&&(saveObj.state.expired=[],saveObj.state.hasOwnProperty("unique")&&(saveObj.state.expired.push(saveObj.state.unique),delete saveObj.state.unique),saveObj.state.hasOwnProperty("last")&&(saveObj.state.expired.push(saveObj.state.last),delete saveObj.state.last)),updated=!0),updated}function _marshal(supplemental,details){if(null!=supplemental&&"object"!==_typeof(supplemental))throw new Error("supplemental parameter must be an object");var saveObj=Object.assign({},supplemental,{id:Config.saves.id,state:State.marshalForSave()});return Config.saves.version&&(saveObj.version=Config.saves.version),_onSaveHandlers.forEach((function(fn){return fn(saveObj,details)})),saveObj.state.delta=State.deltaEncode(saveObj.state.history),delete saveObj.state.history,saveObj}function _unmarshal(saveObj){try{if(_savesObjUpdate(saveObj),!saveObj||!saveObj.hasOwnProperty("id")||!saveObj.hasOwnProperty("state"))throw new Error(L10n.get("errorSaveMissingData"));if(saveObj.state.history=State.deltaDecode(saveObj.state.delta),delete saveObj.state.delta,_onLoadHandlers.forEach((function(fn){return fn(saveObj)})),saveObj.id!==Config.saves.id)throw new Error(L10n.get("errorSaveIdMismatch"));State.unmarshalForSave(saveObj.state),Engine.show()}catch(ex){return UI.alert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("aborting"),".")),!1}return!0}return Object.freeze(Object.defineProperties({},{init:{value:function(){if("cookie"===storage.name)return savesObjClear(),Config.saves.autoload=undefined,Config.saves.autosave=undefined,Config.saves.slots=0,!1;var saves=savesObjGet(),updated=!1;Array.isArray(saves)&&(saves={autosave:null,slots:saves},updated=!0),Config.saves.slots!==saves.slots.length&&(Config.saves.slots<saves.slots.length?(saves.slots.reverse(),saves.slots=saves.slots.filter((function(val){return!(null===val&&this.count>0)||(--this.count,!1)}),{count:saves.slots.length-Config.saves.slots}),saves.slots.reverse()):Config.saves.slots>saves.slots.length&&_appendSlots(saves.slots,Config.saves.slots-saves.slots.length),updated=!0),_savesObjUpdate(saves.autosave)&&(updated=!0);for(var i=0;i<saves.slots.length;++i)_savesObjUpdate(saves.slots[i])&&(updated=!0);return _savesObjIsEmpty(saves)&&(storage.delete("saves"),updated=!1),updated&&_savesObjSave(saves),_slotsUBound=saves.slots.length-1,!0}},get:{value:savesObjGet},clear:{value:savesObjClear},ok:{value:function(){return autosaveOk()||slotsOk()}},autosave:{value:Object.freeze(Object.defineProperties({},{ok:{value:autosaveOk},has:{value:function(){return null!==savesObjGet().autosave}},get:{value:function(){return savesObjGet().autosave}},load:{value:function(){var saves=savesObjGet();return null!==saves.autosave&&_unmarshal(saves.autosave)}},save:{value:function(title,metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return!1;var saves=savesObjGet(),supplemental={title:title||Story.get(State.passage).description(),date:Date.now()};return null!=metadata&&(supplemental.metadata=metadata),saves.autosave=_marshal(supplemental,{type:Type.Autosave}),_savesObjSave(saves)}},delete:{value:function(){var saves=savesObjGet();return saves.autosave=null,_savesObjSave(saves)}}}))},slots:{value:Object.freeze(Object.defineProperties({},{ok:{value:slotsOk},length:{get:function(){return _slotsUBound+1}},isEmpty:{value:function(){return 0===slotsCount()}},count:{value:slotsCount},has:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length||null===saves.slots[slot])}},get:{value:function(slot){if(slot<0||slot>_slotsUBound)return null;var saves=savesObjGet();return slot>=saves.slots.length?null:saves.slots[slot]}},load:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length||null===saves.slots[slot])&&_unmarshal(saves.slots[slot])}},save:{value:function(slot,title,metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed")),!1;if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();if(slot>=saves.slots.length)return!1;var supplemental={title:title||Story.get(State.passage).description(),date:Date.now()};return null!=metadata&&(supplemental.metadata=metadata),saves.slots[slot]=_marshal(supplemental,{type:Type.Slot}),_savesObjSave(saves)}},delete:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length)&&(saves.slots[slot]=null,_savesObjSave(saves))}}}))},export:{value:function(filename,metadata){if("function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed()){var str,now,MM,DD,hh,mm,ss,baseName=null==filename?Story.domId:(str=filename,Util.sanitizeFilename(str).replace(/[_\s\u2013\u2014-]+/g,"-")),saveName="".concat(baseName,"-").concat((now=new Date,MM=now.getMonth()+1,DD=now.getDate(),hh=now.getHours(),mm=now.getMinutes(),ss=now.getSeconds(),MM<10&&(MM="0".concat(MM)),DD<10&&(DD="0".concat(DD)),hh<10&&(hh="0".concat(hh)),mm<10&&(mm="0".concat(mm)),ss<10&&(ss="0".concat(ss)),"".concat(now.getFullYear()).concat(MM).concat(DD,"-").concat(hh).concat(mm).concat(ss)),".save"),supplemental=null==metadata?{}:{metadata:metadata},saveObj=LZString.compressToBase64(JSON.stringify(_marshal(supplemental,{type:Type.Disk})));saveAs(new Blob([saveObj],{type:"text/plain;charset=UTF-8"}),saveName)}else Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed"))}},import:{value:function(event){var file=event.target.files[0],reader=new FileReader;jQuery(reader).one("loadend",(function(){if(reader.error){var ex=reader.error;UI.alert("".concat(L10n.get("errorSaveDiskLoadFailed").toUpperFirst()," (").concat(ex.name,": ").concat(ex.message,").</p><p>").concat(L10n.get("aborting"),"."))}else{var saveObj;try{saveObj=JSON.parse(/\.json$/i.test(file.name)||/^\{/.test(reader.result)?reader.result:LZString.decompressFromBase64(reader.result))}catch(ex){}_unmarshal(saveObj)}})),reader.readAsText(file)}},serialize:{value:function(metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed")),null;var supplemental=null==metadata?{}:{metadata:metadata};return LZString.compressToBase64(JSON.stringify(_marshal(supplemental,{type:Type.Serialize})))}},deserialize:{value:function(base64Str){var saveObj;try{saveObj=JSON.parse(LZString.decompressFromBase64(base64Str))}catch(ex){}return _unmarshal(saveObj)?saveObj.metadata:null}},onLoad:{value:Object.freeze(Object.defineProperties({},{add:{value:function(handler){var valueType=Util.getType(handler);if("function"!==valueType)throw new TypeError("Save.onLoad.add handler parameter must be a function (received: ".concat(valueType,")"));_onLoadHandlers.add(handler)}},clear:{value:function(){_onLoadHandlers.clear()}},delete:{value:function(handler){return _onLoadHandlers.delete(handler)}},size:{get:function(){return _onLoadHandlers.size}}}))},onSave:{value:Object.freeze(Object.defineProperties({},{add:{value:function(handler){var valueType=Util.getType(handler);if("function"!==valueType)throw new TypeError("Save.onSave.add handler parameter must be a function (received: ".concat(valueType,")"));_onSaveHandlers.add(handler)}},clear:{value:function(){_onSaveHandlers.clear()}},delete:{value:function(handler){return _onSaveHandlers.delete(handler)}},size:{get:function(){return _onSaveHandlers.size}}}))}}))}(),Setting=function(){var Types=Util.toEnum({Header:0,Toggle:1,List:2,Range:3}),_definitions=[];function settingsCreate(){return Object.create(null)}function settingsSave(){var savedSettings=settingsCreate();return Object.keys(settings).length>0&&_definitions.filter((function(def){return def.type!==Types.Header&&settings[def.name]!==def.default})).forEach((function(def){return savedSettings[def.name]=settings[def.name]})),0===Object.keys(savedSettings).length?(storage.delete("settings"),!0):storage.set("settings",savedSettings)}function settingsLoad(){var defaultSettings=settingsCreate(),loadedSettings=storage.get("settings")||settingsCreate();_definitions.filter((function(def){return def.type!==Types.Header})).forEach((function(def){return defaultSettings[def.name]=def.default})),window.SugarCube.settings=settings=Object.assign(defaultSettings,loadedSettings)}function settingsClear(){return window.SugarCube.settings=settings=settingsCreate(),storage.delete("settings"),!0}function definitionsAdd(type,name,def){if(arguments.length<3){var errors=[];throw arguments.length<1&&errors.push("type"),arguments.length<2&&errors.push("name"),arguments.length<3&&errors.push("definition"),new Error("missing parameters, no ".concat(errors.join(" or ")," specified"))}if("object"!==_typeof(def))throw new TypeError("definition parameter must be an object");if(definitionsHas(name))throw new Error('cannot clobber existing setting "'.concat(name,'"'));var str,pos,definition={type:type,name:name,label:"string"==typeof def.label?def.label.trim():""};if("string"==typeof def.desc){var desc=def.desc.trim();""!==desc&&(definition.desc=desc)}switch(type){case Types.Header:break;case Types.Toggle:definition.default=!!def.default;break;case Types.List:if(!def.hasOwnProperty("list"))throw new Error("no list specified");if(!Array.isArray(def.list))throw new TypeError("list must be an array");if(0===def.list.length)throw new Error("list must not be empty");if(definition.list=Object.freeze(def.list),null==def.default)definition.default=def.list[0];else{var defaultIndex=def.list.indexOf(def.default);if(-1===defaultIndex)throw new Error("list does not contain default");definition.default=def.list[defaultIndex]}break;case Types.Range:if(!def.hasOwnProperty("min"))throw new Error("no min specified");if("number"!=typeof def.min||Number.isNaN(def.min)||!Number.isFinite(def.min))throw new TypeError("min must be a finite number");if(!def.hasOwnProperty("max"))throw new Error("no max specified");if("number"!=typeof def.max||Number.isNaN(def.max)||!Number.isFinite(def.max))throw new TypeError("max must be a finite number");if(!def.hasOwnProperty("step"))throw new Error("no step specified");if("number"!=typeof def.step||Number.isNaN(def.step)||!Number.isFinite(def.step)||def.step<=0)throw new TypeError("step must be a finite number greater than zero");var stepValidate=function(value){if(fracDigits>0){var ma=Number("".concat(def.min,"e").concat(fracDigits)),sa=Number("".concat(def.step,"e").concat(fracDigits)),_va=Number("".concat(value,"e").concat(fracDigits))-ma;return Number("".concat(_va-_va%sa+ma,"e-").concat(fracDigits))}var va=value-def.min;return va-va%def.step+def.min},fracDigits=(str=String(def.step),-1===(pos=str.lastIndexOf("."))?0:str.length-pos-1);if(stepValidate(def.max)!==def.max)throw new RangeError("max (".concat(def.max,") is not a multiple of the step (").concat(def.step,") plus the min (").concat(def.min,")"));if(definition.max=def.max,definition.min=def.min,definition.step=def.step,null==def.default)definition.default=def.max;else{if("number"!=typeof def.default||Number.isNaN(def.default)||!Number.isFinite(def.default))throw new TypeError("default must be a finite number");if(def.default<def.min)throw new RangeError("default (".concat(def.default,") is less than min (").concat(def.min,")"));if(def.default>def.max)throw new RangeError("default (".concat(def.default,") is greater than max (").concat(def.max,")"));definition.default=def.default}break;default:throw new Error("unknown Setting type: ".concat(type))}"function"==typeof def.onInit&&(definition.onInit=Object.freeze(def.onInit)),"function"==typeof def.onChange&&(definition.onChange=Object.freeze(def.onChange)),_definitions.push(Object.freeze(definition))}function definitionsHas(name){return _definitions.some((function(definition){return definition.name===name}))}function definitionsGet(name){return _definitions.find((function(definition){return definition.name===name}))}return Object.freeze(Object.defineProperties({},{Types:{value:Types},init:{value:function(){if(storage.has("options")){var old=storage.get("options");null!==old&&(window.SugarCube.settings=settings=Object.assign(settingsCreate(),old)),settingsSave(),storage.delete("options")}settingsLoad(),_definitions.forEach((function(def){if(def.hasOwnProperty("onInit")){var thisArg={name:def.name,value:settings[def.name],default:def.default};def.hasOwnProperty("list")&&(thisArg.list=def.list),def.onInit.call(thisArg)}}))}},create:{value:settingsCreate},save:{value:settingsSave},load:{value:settingsLoad},clear:{value:settingsClear},reset:{value:function(name){if(0===arguments.length)settingsClear(),settingsLoad();else{if(null==name||!definitionsHas(name))throw new Error('nonexistent setting "'.concat(name,'"'));var def=definitionsGet(name);def.type!==Types.Header&&(settings[name]=def.default)}return settingsSave()}},forEach:{value:function(callback,thisArg){_definitions.forEach(callback,thisArg)}},add:{value:definitionsAdd},addHeader:{value:function(name,desc){definitionsAdd(Types.Header,name,{desc:desc})}},addToggle:{value:function(){for(var _len16=arguments.length,args=new Array(_len16),_key16=0;_key16<_len16;_key16++)args[_key16]=arguments[_key16];definitionsAdd.apply(void 0,[Types.Toggle].concat(args))}},addList:{value:function(){for(var _len17=arguments.length,args=new Array(_len17),_key17=0;_key17<_len17;_key17++)args[_key17]=arguments[_key17];definitionsAdd.apply(void 0,[Types.List].concat(args))}},addRange:{value:function(){for(var _len18=arguments.length,args=new Array(_len18),_key18=0;_key18<_len18;_key18++)args[_key18]=arguments[_key18];definitionsAdd.apply(void 0,[Types.Range].concat(args))}},isEmpty:{value:function(){return 0===_definitions.length}},has:{value:definitionsHas},get:{value:definitionsGet},delete:{value:function definitionsDelete(name){definitionsHas(name)&&delete settings[name];for(var i=0;i<_definitions.length;++i)if(_definitions[i].name===name){_definitions.splice(i,1),definitionsDelete(name);break}}}}))}(),Story=function(){var _passages={},_inits=[],_scripts=[],_styles=[],_widgets=[],_title="",_ifId="",_domId="";function _storySetTitle(rawTitle){if(null==rawTitle)throw new Error("story title must not be null or undefined");var title=Util.unescape(String(rawTitle)).trim();if(""===title)throw new Error("story title must not be empty or consist solely of whitespace");if(document.title=_title=title,""===(_domId=Util.slugify(_title)))if(""!==_ifId)_domId=_ifId;else for(var i=0,len=_title.length;i<len;++i){var _Util$charAndPosAt2=Util.charAndPosAt(_title,i),char=_Util$charAndPosAt2.char,start=_Util$charAndPosAt2.start,end=_Util$charAndPosAt2.end;_domId+=char.codePointAt(0).toString(16),i+=end-start}}return Object.freeze(Object.defineProperties({},{load:{value:function(){var validationCodeTags=["init","widget"],validationNoCodeTagPassages=["PassageDone","PassageFooter","PassageHeader","PassageReady","StoryAuthor","StoryBanner","StoryCaption","StoryInit","StoryMenu","StoryShare","StorySubtitle"];function validateStartingPassage(passage){if(passage.tags.includesAny(validationCodeTags))throw new Error('starting passage "'.concat(passage.title,'" contains special tags; invalid: "').concat(passage.tags.filter((function(tag){return validationCodeTags.includes(tag)})).sort().join('", "'),'"'))}function validateSpecialPassages(passage){if(validationNoCodeTagPassages.includes(passage.title)){for(var _len19=arguments.length,tags=new Array(_len19>1?_len19-1:0),_key19=1;_key19<_len19;_key19++)tags[_key19-1]=arguments[_key19];throw new Error('special passage "'.concat(passage.title,'" contains special tags; invalid: "').concat(tags.sort().join('", "'),'"'))}var codeTags=[].concat(validationCodeTags),foundTags=[];if(passage.tags.forEach((function(tag){codeTags.includes(tag)&&foundTags.push.apply(foundTags,_toConsumableArray(codeTags.delete(tag)))})),foundTags.length>1)throw new Error('passage "'.concat(passage.title,'" contains multiple special tags; invalid: "').concat(foundTags.sort().join('", "'),'"'))}var $storydata=jQuery("tw-storydata"),startNode=$storydata.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test($storydata.attr("options")),$storydata.children("style").each((function(i){_styles.push(new Passage("tw-user-style-".concat(i),this))})),$storydata.children("script").each((function(i){_scripts.push(new Passage("tw-user-script-".concat(i),this))})),$storydata.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each((function(){var $this=jQuery(this),pid=$this.attr("pid")||"",passage=new Passage($this.attr("name"),this);pid===startNode&&""!==startNode?(Config.passages.start=passage.title,validateStartingPassage(passage),_passages[passage.title]=passage):passage.tags.includes("init")?(validateSpecialPassages(passage,"init"),_inits.push(passage)):passage.tags.includes("widget")?(validateSpecialPassages(passage,"widget"),_widgets.push(passage)):_passages[passage.title]=passage})),_ifId=$storydata.attr("ifid"),_storySetTitle("nero"),Config.saves.id=Story.domId}},init:{value:function(){var storyStyle;storyStyle=document.createElement("style"),new StyleWrapper(storyStyle).add(_styles.map((function(style){return style.text.trim()})).join("\n")),jQuery(storyStyle).appendTo(document.head).attr({id:"style-story",type:"text/css"});for(var i=0;i<_scripts.length;++i)try{Scripting.evalJavaScript(_scripts[i].text)}catch(ex){console.error(ex),Alert.error(_scripts[i].title,"object"===_typeof(ex)?ex.message:ex)}for(var _i8=0;_i8<_widgets.length;++_i8)try{Wikifier.wikifyEval(_widgets[_i8].processText())}catch(ex){console.error(ex),Alert.error(_widgets[_i8].title,"object"===_typeof(ex)?ex.message:ex)}}},title:{get:function(){return _title}},domId:{get:function(){return _domId}},ifId:{get:function(){return _ifId}},add:{value:function(passage){if(!(passage instanceof Passage))throw new TypeError("Story.add passage parameter must be an instance of Passage");var title=passage.title;return!_passages.hasOwnProperty(title)&&(_passages[title]=passage,!0)}},has:{value:function(title){var type=_typeof(title);switch(type){case"number":case"string":return _passages.hasOwnProperty(String(title));case"undefined":break;case"object":type=null===title?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.has title parameter cannot be ".concat(type))}},get:{value:function(title){var type=_typeof(title);switch(type){case"number":case"string":var id=String(title);return _passages.hasOwnProperty(id)?_passages[id]:new Passage(id||"(unknown)");case"undefined":break;case"object":type=null===title?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.get title parameter cannot be ".concat(type))}},getAllInit:{value:function(){return Object.freeze(Array.from(_inits))}},getAllRegular:{value:function(){return Object.freeze(Object.assign({},_passages))}},getAllScript:{value:function(){return Object.freeze(Array.from(_scripts))}},getAllStylesheet:{value:function(){return Object.freeze(Array.from(_styles))}},getAllWidget:{value:function(){return Object.freeze(Array.from(_widgets))}},lookup:{value:function(key,value){var sortKey=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"title",results=[];return Object.keys(_passages).forEach((function(name){var passage=_passages[name];"object"===_typeof(passage[key])&&null!==passage[key]?passage[key]instanceof Array&&passage[key].some((function(m){return Util.sameValueZero(m,value)}))&&results.push(passage):Util.sameValueZero(passage[key],value)&&results.push(passage)})),results.sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1})),results}},lookupWith:{value:function(predicate){var sortKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"title";if("function"!=typeof predicate)throw new TypeError("Story.lookupWith predicate parameter must be a function");var results=[];return Object.keys(_passages).forEach((function(name){var passage=_passages[name];predicate(passage)&&results.push(passage)})),results.sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1})),results}}}))}(),UI=function(){function uiAssembleLinkList(passage,listEl){var list=listEl,debugState=Config.debug,cleanState=Config.cleanupWikifierOutput;Config.debug=!1,Config.cleanupWikifierOutput=!1;try{null==list&&(list=document.createElement("ul"));var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passage).processText().trim());var errors=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "));for(;frag.hasChildNodes();){var node=frag.firstChild;if(node.nodeType===Node.ELEMENT_NODE&&"A"===node.nodeName.toUpperCase()){var li=document.createElement("li");list.appendChild(li),li.appendChild(node)}else frag.removeChild(node)}}finally{Config.cleanupWikifierOutput=cleanState,Config.debug=debugState}return list}function uiOpenAlert(message){jQuery(Dialog.setup(L10n.get("alertTitle"),"alert")).append("<p>".concat(message,'</p><ul class="buttons">')+'<li><button id="alert-ok" class="ui-close">'.concat(L10n.get(["alertOk","ok"]),"</button></li>")+"</ul>");for(var _len20=arguments.length,args=new Array(_len20>1?_len20-1:0),_key20=1;_key20<_len20;_key20++)args[_key20-1]=arguments[_key20];Dialog.open.apply(Dialog,args)}function uiBuildAutoload(){return jQuery(Dialog.setup(L10n.get("autoloadTitle"),"autoload")).append("<p>".concat(L10n.get("autoloadPrompt"),'</p><ul class="buttons">')+'<li><button id="autoload-ok" class="ui-close">'.concat(L10n.get(["autoloadOk","ok"]),"</button></li>")+'<li><button id="autoload-cancel" class="ui-close">'.concat(L10n.get(["autoloadCancel","cancel"]),"</button></li>")+"</ul>"),jQuery(document).one("click.autoload",".ui-close",(function(ev){var isAutoloadOk="autoload-ok"===ev.target.id;jQuery(document).one(":dialogclosed",(function(){isAutoloadOk&&Save.autosave.load()||Engine.play(Config.passages.start)}))})),!0}function uiBuildJumpto(){var list=document.createElement("ul");jQuery(Dialog.setup(L10n.get("jumptoTitle"),"jumpto list")).append(list);for(var expired=State.expired.length,i=State.size-1;i>=0;--i)if(i!==State.activeIndex){var passage=Story.get(State.history[i].title);passage&&passage.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(idx){return function(){return jQuery(document).one(":dialogclosed",(function(){return Engine.goTo(idx)}))}}(i)).addClass("ui-close").text("".concat(L10n.get("jumptoTurn")," ").concat(expired+i+1,": ").concat(passage.description()))).appendTo(list)}list.hasChildNodes()||jQuery(list).append("<li><a><em>".concat(L10n.get("jumptoUnavailable"),"</em></a></li>"))}function uiBuildRestart(){return jQuery(Dialog.setup(L10n.get("restartTitle"),"restart")).append("<p>".concat(L10n.get("restartPrompt"),'</p><ul class="buttons">')+'<li><button id="restart-ok">'.concat(L10n.get(["restartOk","ok"]),"</button></li>")+'<li><button id="restart-cancel" class="ui-close">'.concat(L10n.get(["restartCancel","cancel"]),"</button></li>")+"</ul>").find("#restart-ok").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){return Engine.restart()})),Dialog.close()})),!0}function uiBuildSaves(){var savesAllowed="function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed();function createActionItem(bId,bClass,bText,bAction){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(bId)).html(bText);return bClass&&$btn.addClass(bClass),bAction?$btn.ariaClick(bAction):$btn.ariaDisabled(!0),jQuery(document.createElement("li")).append($btn)}var $dialogBody=jQuery(Dialog.setup(L10n.get("savesTitle"),"saves")),savesOk=Save.ok(),fileOk=Has.fileAPI&&(Config.saves.tryDiskOnMobile||!Browser.isMobile.any());if(savesOk&&$dialogBody.append(function(){function createButton(bId,bClass,bText,bSlot,bAction){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(bId,"-").concat(bSlot)).addClass(bId).html(bText);return bClass&&$btn.addClass(bClass),bAction?"auto"===bSlot?$btn.ariaClick({label:"".concat(bText," ").concat(L10n.get("savesLabelAuto"))},(function(){return bAction()})):$btn.ariaClick({label:"".concat(bText," ").concat(L10n.get("savesLabelSlot")," ").concat(bSlot+1)},(function(){return bAction(bSlot)})):$btn.ariaDisabled(!0),$btn}var saves=Save.get(),$tbody=jQuery(document.createElement("tbody"));if(Save.autosave.ok()){var $tdSlot=jQuery(document.createElement("td")),$tdLoad=jQuery(document.createElement("td")),$tdDesc=jQuery(document.createElement("td")),$tdDele=jQuery(document.createElement("td"));jQuery(document.createElement("b")).attr({title:L10n.get("savesLabelAuto"),"aria-label":L10n.get("savesLabelAuto")}).text("A").appendTo($tdSlot),saves.autosave?($tdLoad.append(createButton("load","ui-close",L10n.get("savesLabelLoad"),"auto",(function(){jQuery(document).one(":dialogclosed",(function(){return Save.autosave.load()}))}))),jQuery(document.createElement("div")).text(saves.autosave.title).appendTo($tdDesc),jQuery(document.createElement("div")).addClass("datestamp").html(saves.autosave.date?"".concat(new Date(saves.autosave.date).toLocaleString()):"<em>".concat(L10n.get("savesUnknownDate"),"</em>")).appendTo($tdDesc),$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),"auto",(function(){Save.autosave.delete(),uiBuildSaves()})))):($tdLoad.append(createButton("load",null,L10n.get("savesLabelLoad"),"auto")),$tdDesc.addClass("empty").text("•  •  •"),$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),"auto"))),jQuery(document.createElement("tr")).append($tdSlot).append($tdLoad).append($tdDesc).append($tdDele).appendTo($tbody)}for(var i=0,iend=saves.slots.length;i<iend;++i){var _$tdSlot=jQuery(document.createElement("td")),_$tdLoad=jQuery(document.createElement("td")),_$tdDesc=jQuery(document.createElement("td")),_$tdDele=jQuery(document.createElement("td"));_$tdSlot.append(document.createTextNode(i+1)),saves.slots[i]?(_$tdLoad.append(createButton("load","ui-close",L10n.get("savesLabelLoad"),i,(function(slot){jQuery(document).one(":dialogclosed",(function(){return Save.slots.load(slot)}))}))),jQuery(document.createElement("div")).text(saves.slots[i].title).appendTo(_$tdDesc),jQuery(document.createElement("div")).addClass("datestamp").html(saves.slots[i].date?"".concat(new Date(saves.slots[i].date).toLocaleString()):"<em>".concat(L10n.get("savesUnknownDate"),"</em>")).appendTo(_$tdDesc),_$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),i,(function(slot){Save.slots.delete(slot),uiBuildSaves()})))):(_$tdLoad.append(createButton("save","ui-close",L10n.get("savesLabelSave"),i,savesAllowed?Save.slots.save:null)),_$tdDesc.addClass("empty").text("•  •  •"),_$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),i))),jQuery(document.createElement("tr")).append(_$tdSlot).append(_$tdLoad).append(_$tdDesc).append(_$tdDele).appendTo($tbody)}return jQuery(document.createElement("table")).attr("id","saves-list").append($tbody)}()),savesOk||fileOk){var $btnBar=jQuery(document.createElement("ul")).addClass("buttons").appendTo($dialogBody);return fileOk&&($btnBar.append(createActionItem("export","ui-close",L10n.get("savesLabelExport"),savesAllowed?function(){return Save.export()}:null)),$btnBar.append(createActionItem("import",null,L10n.get("savesLabelImport"),(function(){return $dialogBody.find("#saves-import-file").trigger("click")}))),jQuery(document.createElement("input")).css({display:"block",visibility:"hidden",position:"fixed",left:"-9999px",top:"-9999px",width:"1px",height:"1px"}).attr({type:"file",id:"saves-import-file",tabindex:-1,"aria-hidden":!0}).on("change",(function(ev){jQuery(document).one(":dialogclosed",(function(){return Save.import(ev)})),Dialog.close()})).appendTo($dialogBody)),savesOk&&$btnBar.append(createActionItem("clear",null,L10n.get("savesLabelClear"),Save.autosave.has()||!Save.slots.isEmpty()?function(){Save.clear(),uiBuildSaves()}:null)),!0}return uiOpenAlert(L10n.get("savesIncapable")),!1}function uiBuildSettings(){var $dialogBody=jQuery(Dialog.setup(L10n.get("settingsTitle"),"settings"));return Setting.forEach((function(control){if(control.type===Setting.Types.Header){var _name=control.name,_id=Util.slugify(_name),$header=jQuery(document.createElement("div")),$heading=jQuery(document.createElement("h2"));return $header.attr("id","header-body-".concat(_id)).append($heading).appendTo($dialogBody),$heading.attr("id","header-heading-".concat(_id)).wiki(_name),void(control.desc&&jQuery(document.createElement("p")).attr("id","header-desc-".concat(_id)).wiki(control.desc).appendTo($header))}var $control,name=control.name,id=Util.slugify(name),$setting=jQuery(document.createElement("div")),$label=jQuery(document.createElement("label")),$controlBox=jQuery(document.createElement("div"));switch(jQuery(document.createElement("div")).append($label).append($controlBox).appendTo($setting),control.desc&&jQuery(document.createElement("p")).attr("id","setting-desc-".concat(id)).wiki(control.desc).appendTo($setting),$label.attr({id:"setting-label-".concat(id),for:"setting-control-".concat(id)}).wiki(control.label),null==settings[name]&&(settings[name]=control.default),control.type){case Setting.Types.Toggle:$control=jQuery(document.createElement("button")),settings[name]?$control.addClass("enabled").text(L10n.get("settingsOn")):$control.text(L10n.get("settingsOff")),$control.ariaClick((function(){settings[name]?(jQuery(this).removeClass("enabled").text(L10n.get("settingsOff")),settings[name]=!1):(jQuery(this).addClass("enabled").text(L10n.get("settingsOn")),settings[name]=!0),Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default})}));break;case Setting.Types.List:$control=jQuery(document.createElement("select"));for(var i=0,iend=control.list.length;i<iend;++i)jQuery(document.createElement("option")).val(i).text(control.list[i]).appendTo($control);$control.val(control.list.indexOf(settings[name])).attr("tabindex",0).on("change",(function(){settings[name]=control.list[Number(this.value)],Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default,list:control.list})}));break;case Setting.Types.Range:($control=jQuery(document.createElement("input"))).attr({type:"range",min:control.min,max:control.max,step:control.step,value:settings[name],tabindex:0}).on("change input",(function(){settings[name]=Number(this.value),Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default,min:control.min,max:control.max,step:control.step})})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),$control.trigger("change"))}))}$control.attr("id","setting-control-".concat(id)).appendTo($controlBox),$setting.attr("id","setting-body-".concat(id)).appendTo($dialogBody)})),$dialogBody.append('<ul class="buttons">'+'<li><button id="settings-ok" class="ui-close">'.concat(L10n.get(["settingsOk","ok"]),"</button></li>")+'<li><button id="settings-reset">'.concat(L10n.get("settingsReset"),"</button></li>")+"</ul>").find("#settings-reset").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){Setting.reset(),window.location.reload()})),Dialog.close()})),!0}function uiBuildShare(){try{jQuery(Dialog.setup(L10n.get("shareTitle"),"share list")).append(uiAssembleLinkList("StoryShare"))}catch(ex){return console.error(ex),Alert.error("StoryShare",ex.message),!1}return!0}return Object.freeze(Object.defineProperties({},{assembleLinkList:{value:uiAssembleLinkList},alert:{value:uiOpenAlert},jumpto:{value:function(){uiBuildJumpto(),Dialog.open.apply(Dialog,arguments)}},restart:{value:function(){uiBuildRestart(),Dialog.open.apply(Dialog,arguments)}},saves:{value:function(){uiBuildSaves(),Dialog.open.apply(Dialog,arguments)}},settings:{value:function(){uiBuildSettings(),Dialog.open.apply(Dialog,arguments)}},share:{value:function(){uiBuildShare(),Dialog.open.apply(Dialog,arguments)}},buildAutoload:{value:uiBuildAutoload},buildJumpto:{value:uiBuildJumpto},buildRestart:{value:uiBuildRestart},buildSaves:{value:uiBuildSaves},buildSettings:{value:uiBuildSettings},buildShare:{value:uiBuildShare},stow:{value:function(){return UIBar.stow()}},unstow:{value:function(){return UIBar.unstow()}},setStoryElements:{value:function(){return UIBar.update()}},isOpen:{value:function(){return Dialog.isOpen.apply(Dialog,arguments)}},body:{value:function(){return Dialog.body()}},setup:{value:function(){return Dialog.setup.apply(Dialog,arguments)}},addClickHandler:{value:function(){return Dialog.addClickHandler.apply(Dialog,arguments)}},open:{value:function(){return Dialog.open.apply(Dialog,arguments)}},close:{value:function(){return Dialog.close.apply(Dialog,arguments)}},resize:{value:function(){return Dialog.resize()}},buildDialogAutoload:{value:uiBuildAutoload},buildDialogJumpto:{value:uiBuildJumpto},buildDialogRestart:{value:uiBuildRestart},buildDialogSaves:{value:uiBuildSaves},buildDialogSettings:{value:uiBuildSettings},buildDialogShare:{value:uiBuildShare},buildLinkListFromPassage:{value:uiAssembleLinkList}}))}(),UIBar=function(){var _$uiBar=null;function uiBarStow(noAnimation){var $story;_$uiBar&&!_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.addClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.minDomActionDelay));return this}function uiBarUpdate(){if(Story.has("StoryDisplayTitle")&&setDisplayTitle(Story.get("StoryDisplayTitle").processText()),_$uiBar){setPageElement("story-banner","StoryBanner"),setPageElement("story-subtitle","StorySubtitle"),setPageElement("story-author","StoryAuthor"),setPageElement("story-caption","StoryCaption");var menuStory=document.getElementById("menu-story");if(null!==menuStory&&(jQuery(menuStory).empty(),Story.has("StoryMenu")))try{UI.assembleLinkList("StoryMenu",menuStory)}catch(ex){console.error(ex),Alert.error("StoryMenu",ex.message)}}}return Object.freeze(Object.defineProperties({},{destroy:{value:function(){_$uiBar&&(_$uiBar.hide(),jQuery(document).off(".ui-bar"),jQuery(document.head).find("#style-ui-bar").remove(),_$uiBar.remove(),_$uiBar=null)}},hide:{value:function(){return _$uiBar&&_$uiBar.hide(),this}},init:{value:function(){if(!document.getElementById("ui-bar")){var toggleLabel,backwardLabel,jumptoLabel,forwardLabel,$backward,$forward,$elems=(toggleLabel=L10n.get("uiBarToggle"),backwardLabel=L10n.get("uiBarBackward"),jumptoLabel=L10n.get("uiBarJumpto"),forwardLabel=L10n.get("uiBarForward"),jQuery(document.createDocumentFragment()).append('<div id="ui-bar" aria-live="polite"><div id="ui-bar-tray">'+'<button id="ui-bar-toggle" tabindex="0" title="'.concat(toggleLabel,'" aria-label="').concat(toggleLabel,'"></button>')+'<div id="ui-bar-history">'+'<button id="history-backward" tabindex="0" title="'.concat(backwardLabel,'" aria-label="').concat(backwardLabel,'"></button>')+'<button id="history-jumpto" tabindex="0" title="'.concat(jumptoLabel,'" aria-label="').concat(jumptoLabel,'"></button>')+'<button id="history-forward" tabindex="0" title="'.concat(forwardLabel,'" aria-label="').concat(forwardLabel,'"></button>')+'</div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core">'+'<li id="menu-item-saves"><a tabindex="0">'.concat(L10n.get("savesTitle"),"</a></li>")+'<li id="menu-item-settings"><a tabindex="0">'.concat(L10n.get("settingsTitle"),"</a></li>")+'<li id="menu-item-restart"><a tabindex="0">'.concat(L10n.get("restartTitle"),"</a></li>")+'<li id="menu-item-share"><a tabindex="0">'.concat(L10n.get("shareTitle"),"</a></li>")+"</ul></nav></div></div>"));_$uiBar=jQuery($elems.find("#ui-bar").get(0)),$elems.insertBefore("body>script#script-sugarcube"),jQuery(document).on(":historyupdate.ui-bar",($backward=jQuery("#history-backward"),$forward=jQuery("#history-forward"),function(){$backward.ariaDisabled(State.length<2),$forward.ariaDisabled(State.length===State.size)}))}}},isHidden:{value:function(){return _$uiBar&&"none"===_$uiBar.css("display")}},isStowed:{value:function(){return _$uiBar&&_$uiBar.hasClass("stowed")}},show:{value:function(){return _$uiBar&&_$uiBar.show(),this}},start:{value:function(){_$uiBar&&(("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&uiBarStow(!0),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarToggle")},(function(){return _$uiBar.toggleClass("stowed")})),Config.history.controls?(jQuery("#history-backward").ariaDisabled(State.length<2).ariaClick({label:L10n.get("uiBarBackward")},(function(){return Engine.backward()})),Story.lookup("tags","bookmark").length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarJumpto")},(function(){return UI.jumpto()})):jQuery("#history-jumpto").remove(),jQuery("#history-forward").ariaDisabled(State.length===State.size).ariaClick({label:L10n.get("uiBarForward")},(function(){return Engine.forward()}))):jQuery("#ui-bar-history").remove(),Story.has("StoryDisplayTitle")?setDisplayTitle(Story.get("StoryDisplayTitle").processText()):jQuery("#story-title").text(Story.title),Story.has("StoryCaption")||jQuery("#story-caption").remove(),Story.has("StoryMenu")||jQuery("#menu-story").remove(),Config.ui.updateStoryElements||uiBarUpdate(),jQuery("#menu-item-saves a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSaves(),Dialog.open()})).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():jQuery("#menu-item-settings a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSettings(),Dialog.open()})).text(L10n.get("settingsTitle")),jQuery("#menu-item-restart a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildRestart(),Dialog.open()})).text(L10n.get("restartTitle")),Story.has("StoryShare")?jQuery("#menu-item-share a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildShare(),Dialog.open()})).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove())}},stow:{value:uiBarStow},unstow:{value:function(noAnimation){var $story;return _$uiBar&&_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.removeClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.minDomActionDelay)),this}},update:{value:uiBarUpdate},setStoryElements:{value:uiBarUpdate}}))}(),DebugBar=function(){var _variableRe=new RegExp("^".concat(Patterns.variable,"$")),_numericKeyRe=/^\d+$/,_watchList=[],_$debugBar=null,_$watchBody=null,_$watchList=null,_$turnSelect=null,_stowed=!0;function debugBarStow(){_$debugBar.css("right","-".concat(_$debugBar.outerWidth(),"px")),_stowed=!0,_updateSession()}function debugBarUnstow(){_$debugBar.css("right",0),_stowed=!1,_updateSession()}function debugBarToggle(){_stowed?debugBarUnstow():debugBarStow()}function debugBarWatchAdd(varName){_variableRe.test(varName)&&(_watchList.pushUnique(varName),_watchList.sort(),_updateWatchBody(),_updateWatchList(),_updateSession())}function debugBarWatchAddAll(){Object.keys(State.variables).map((function(name){return _watchList.pushUnique("$".concat(name))})),Object.keys(State.temporary).map((function(name){return _watchList.pushUnique("_".concat(name))})),_watchList.sort(),_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchClear(){for(var i=_watchList.length-1;i>=0;--i)_watchList.pop();_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchDelete(varName){_watchList.delete(varName),_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchDisable(){_debugBarWatchDisableNoUpdate(),_updateSession()}function debugBarWatchEnable(){_debugBarWatchEnableNoUpdate(),_updateSession()}function debugBarWatchIsEnabled(){return!_$watchBody.attr("hidden")}function debugBarWatchToggle(){_$watchBody.attr("hidden")?debugBarWatchEnable():debugBarWatchDisable()}function _debugBarWatchDisableNoUpdate(){_$watchBody.attr({"aria-hidden":!0,hidden:"hidden"})}function _debugBarWatchEnableNoUpdate(){_$watchBody.removeAttr("aria-hidden hidden")}function _clearSession(){session.delete("debugState")}function _hasSession(){return session.has("debugState")}function _updateSession(){session.set("debugState",{stowed:_stowed,watchList:_watchList,watchEnabled:debugBarWatchIsEnabled(),viewsEnabled:DebugView.isEnabled()})}function _updateWatchBody(){if(0!==_watchList.length){for(var delLabel=L10n.get("debugBarDeleteWatch"),$table=jQuery(document.createElement("table")),$tbody=jQuery(document.createElement("tbody")),_loop4=function(i,len){var varName=_watchList[i],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary,$row=jQuery(document.createElement("tr")),$delBtn=jQuery(document.createElement("button")),$code=jQuery(document.createElement("code"));$delBtn.addClass("watch-delete").attr("data-name",varName).ariaClick({one:!0,label:delLabel},(function(){return debugBarWatchDelete(varName)})),$code.text(_toWatchString(store[varKey])),jQuery(document.createElement("td")).append($delBtn).appendTo($row),jQuery(document.createElement("td")).text(varName).appendTo($row),jQuery(document.createElement("td")).append($code).appendTo($row),$row.appendTo($tbody)},i=0,len=_watchList.length;i<len;++i)_loop4(i);$table.append($tbody),_$watchBody.empty().append($table)}else _$watchBody.empty().append("<div>".concat(L10n.get("debugBarNoWatches"),"</div>"))}function _updateWatchList(){var svn=Object.keys(State.variables),tvn=Object.keys(State.temporary);if(0!==svn.length||0!==tvn.length){var names=[].concat(_toConsumableArray(svn.map((function(name){return"$".concat(name)}))),_toConsumableArray(tvn.map((function(name){return"_".concat(name)})))).sort(),options=document.createDocumentFragment();names.delete(_watchList);for(var i=0,len=names.length;i<len;++i)jQuery(document.createElement("option")).val(names[i]).appendTo(options);_$watchList.empty().append(options)}else _$watchList.empty()}function _updateTurnSelect(){for(var histLen=State.size,expLen=State.expired.length,options=document.createDocumentFragment(),i=0;i<histLen;++i)jQuery(document.createElement("option")).val(i).text("".concat(expLen+i+1,". ").concat(Util.escape(State.history[i].title))).appendTo(options);_$turnSelect.empty().ariaDisabled(histLen<2).append(options).val(State.activeIndex)}function _toWatchString(value){if(null===value)return"null";switch(_typeof(value)){case"number":if(Number.isNaN(value))return"NaN";if(!Number.isFinite(value))return"Infinity";case"boolean":case"symbol":case"undefined":return String(value);case"string":return JSON.stringify(value);case"function":return"Function"}var objType=Util.toStringTag(value);if("Date"===objType)return"Date {".concat(value.toLocaleString(),"}");if("RegExp"===objType)return"RegExp ".concat(value.toString());var result=[];if(value instanceof Array||value instanceof Set){for(var list=value instanceof Array?value:Array.from(value),i=0,len=list.length;i<len;++i)result.push(list.hasOwnProperty(i)?_toWatchString(list[i]):"<empty>");return Object.keys(list).filter((function(key){return!_numericKeyRe.test(key)})).forEach((function(key){return result.push("".concat(_toWatchString(key),": ").concat(_toWatchString(list[key])))})),"".concat(objType,"(").concat(list.length,") [").concat(result.join(", "),"]")}return value instanceof Map?(value.forEach((function(val,key){return result.push("".concat(_toWatchString(key)," → ").concat(_toWatchString(val)))})),"".concat(objType,"(").concat(value.size,") {").concat(result.join(", "),"}")):(Object.keys(value).forEach((function(key){return result.push("".concat(_toWatchString(key),": ").concat(_toWatchString(value[key])))})),"".concat(objType," {").concat(result.join(", "),"}"))}return Object.freeze(Object.defineProperties({},{init:{value:function(){var barToggleLabel=L10n.get("debugBarToggle"),watchAddLabel=L10n.get("debugBarAddWatch"),watchAllLabel=L10n.get("debugBarWatchAll"),watchNoneLabel=L10n.get("debugBarWatchNone"),watchToggleLabel=L10n.get("debugBarWatchToggle"),viewsToggleLabel=L10n.get("debugBarViewsToggle");jQuery(document.createDocumentFragment()).append('<div id="debug-bar"><div id="debug-bar-watch">'+"<div>".concat(L10n.get("debugBarNoWatches"),"</div>>")+"</div><div>"+'<button id="debug-bar-watch-toggle" tabindex="0" title="'.concat(watchToggleLabel,'" aria-label="').concat(watchToggleLabel,'">').concat(L10n.get("debugBarLabelWatch"),"</button>")+'<label id="debug-bar-watch-label" for="debug-bar-watch-input">'.concat(L10n.get("debugBarLabelAdd"),"</label>")+'<input id="debug-bar-watch-input" name="debug-bar-watch-input" type="text" list="debug-bar-watch-list" tabindex="0"><datalist id="debug-bar-watch-list" aria-hidden="true" hidden="hidden"></datalist>'+'<button id="debug-bar-watch-add" tabindex="0" title="'.concat(watchAddLabel,'" aria-label="').concat(watchAddLabel,'"></button>')+'<button id="debug-bar-watch-all" tabindex="0" title="'.concat(watchAllLabel,'" aria-label="').concat(watchAllLabel,'"></button>')+'<button id="debug-bar-watch-none" tabindex="0" title="'.concat(watchNoneLabel,'" aria-label="').concat(watchNoneLabel,'"></button>')+"</div><div>"+'<button id="debug-bar-views-toggle" tabindex="0" title="'.concat(viewsToggleLabel,'" aria-label="').concat(viewsToggleLabel,'">').concat(L10n.get("debugBarLabelViews"),"</button>")+'<label id="debug-bar-turn-label" for="debug-bar-turn-select">'.concat(L10n.get("debugBarLabelTurn"),"</label>")+'<select id="debug-bar-turn-select" tabindex="0"></select></div>'+'<button id="debug-bar-toggle" tabindex="0" title="'.concat(barToggleLabel,'" aria-label="').concat(barToggleLabel,'"></button>')+'</div><div id="debug-bar-hint"></div>').appendTo("body"),_$debugBar=jQuery("#debug-bar"),_$watchBody=jQuery(_$debugBar.find("#debug-bar-watch").get(0)),_$watchList=jQuery(_$debugBar.find("#debug-bar-watch-list").get(0)),_$turnSelect=jQuery(_$debugBar.find("#debug-bar-turn-select").get(0));var $barToggle=jQuery(_$debugBar.find("#debug-bar-toggle").get(0)),$watchToggle=jQuery(_$debugBar.find("#debug-bar-watch-toggle").get(0)),$watchInput=jQuery(_$debugBar.find("#debug-bar-watch-input").get(0)),$watchAdd=jQuery(_$debugBar.find("#debug-bar-watch-add").get(0)),$watchAll=jQuery(_$debugBar.find("#debug-bar-watch-all").get(0)),$watchNone=jQuery(_$debugBar.find("#debug-bar-watch-none").get(0)),$viewsToggle=jQuery(_$debugBar.find("#debug-bar-views-toggle").get(0));$barToggle.ariaClick(debugBarToggle),$watchToggle.ariaClick(debugBarWatchToggle),$watchInput.on(":addwatch",(function(){debugBarWatchAdd(this.value.trim()),this.value=""})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),$watchInput.trigger(":addwatch"))})),$watchAdd.ariaClick((function(){return $watchInput.trigger(":addwatch")})),$watchAll.ariaClick(debugBarWatchAddAll),$watchNone.ariaClick(debugBarWatchClear),_$turnSelect.on("change",(function(){Engine.goTo(Number(this.value))})),$viewsToggle.ariaClick((function(){DebugView.toggle(),_updateSession()})),jQuery(document).on(":historyupdate.debug-bar",_updateTurnSelect).on(":passageend.debug-bar",(function(){_updateWatchBody(),_updateWatchList()})).on(":enginerestart.debug-bar",_clearSession),_hasSession()||DebugView.enable()}},isStowed:{value:function(){return _stowed}},start:{value:function(){(function(){if(!_hasSession())return!1;var debugState=session.get("debugState");_stowed=debugState.stowed,_watchList.push.apply(_watchList,_toConsumableArray(debugState.watchList)),debugState.watchEnabled?_debugBarWatchEnableNoUpdate():_debugBarWatchDisableNoUpdate();debugState.viewsEnabled?DebugView.enable():DebugView.disable()})(),_stowed?debugBarStow():debugBarUnstow(),_updateTurnSelect(),_updateWatchBody(),_updateWatchList()}},stow:{value:debugBarStow},toggle:{value:debugBarToggle},unstow:{value:debugBarUnstow},watch:{value:Object.freeze(Object.defineProperties({},{add:{value:debugBarWatchAdd},all:{value:debugBarWatchAddAll},clear:{value:debugBarWatchClear},delete:{value:debugBarWatchDelete},disable:{value:debugBarWatchDisable},enable:{value:debugBarWatchEnable},isEnabled:{value:debugBarWatchIsEnabled},toggle:{value:debugBarWatchToggle}}))}}))}(),LoadScreen=function(){var _locks=new Set,_autoId=0;function loadScreenHide(){jQuery(document.documentElement).removeAttr("data-init")}function loadScreenShow(){jQuery(document.documentElement).attr("data-init","loading")}return Object.freeze(Object.defineProperties({},{init:{value:function(){jQuery(document).on("readystatechange.SugarCube",(function(){_locks.size>0||("complete"===document.readyState?"loading"===jQuery(document.documentElement).attr("data-init")&&(Config.loadDelay>0?setTimeout((function(){0===_locks.size&&loadScreenHide()}),Math.max(Engine.minDomActionDelay,Config.loadDelay)):loadScreenHide()):loadScreenShow())}))}},clear:{value:function(){jQuery(document).off("readystatechange.SugarCube"),_locks.clear(),loadScreenHide()}},hide:{value:loadScreenHide},show:{value:loadScreenShow},lock:{value:function(){return++_autoId,_locks.add(_autoId),loadScreenShow(),_autoId}},unlock:{value:function(id){if(null==id)throw new Error("LoadScreen.unlock called with a null or undefined ID");_locks.has(id)&&_locks.delete(id),0===_locks.size&&jQuery(document).trigger("readystatechange")}}}))}(),version=Object.freeze({title:"SugarCube",major:2,minor:36,patch:1,prerelease:null,build:9717,date:new Date("2021-12-22T05:37:33.467Z"),extensions:{},toString:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,"+").concat(this.build)},short:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.title," (v").concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,")")},long:function(){return"".concat(this.title," v").concat(this.toString()," (").concat(this.date.toUTCString(),")")}}),TempState={},macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={},session=null,settings={},setup={},storage=null,browser=Browser,config=Config,has=Has,History=State,state=State,tale=Story,TempVariables=State.temporary;window.SugarCube={},jQuery((function(){try{var lockId=LoadScreen.lock();LoadScreen.init(),document.normalize&&document.normalize(),Story.load(),storage=SimpleStore.create(Story.domId,!0),session=SimpleStore.create(Story.domId,!1),Dialog.init(),UIBar.init(),Engine.init(),Story.init(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),Engine.start(),Config.debug&&DebugBar.init();var $window=$(window),vprCheckId=setInterval((function(){$window.width()&&(clearInterval(vprCheckId),UIBar.start(),Config.debug&&DebugBar.start(),jQuery.event.trigger({type:":storyready"}),setTimeout((function(){return LoadScreen.unlock(lockId)}),2*Engine.minDomActionDelay))}),Engine.minDomActionDelay);Object.defineProperty(window,"SugarCube",{value:Object.seal(Object.assign(Object.create(null),{Browser:Browser,Config:Config,Dialog:Dialog,Engine:Engine,Fullscreen:Fullscreen,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,UIBar:UIBar,DebugBar:DebugBar,Util:Util,Visibility:Visibility,Wikifier:Wikifier,session:session,settings:settings,setup:setup,storage:storage,version:version}))})}catch(ex){return console.error(ex),LoadScreen.clear(),Alert.fatal(null,ex.message,ex)}}))})(window,window.document,jQuery);}
	</script>
</body>
</html>
